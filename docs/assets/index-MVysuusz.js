(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function O0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hm={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function bk(){if(b1)return uc;b1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:l,ref:s!==void 0?s:null,props:o}}return uc.Fragment=e,uc.jsx=t,uc.jsxs=t,uc}var x1;function xk(){return x1||(x1=1,Hm.exports=bk()),Hm.exports}var b=xk(),Um={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function vk(){if(v1)return Xe;v1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(M,q,W){this.props=M,this.context=q,this.refs=C,this.updater=W||w}T.prototype.isReactComponent={},T.prototype.setState=function(M,q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,q,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function L(){}L.prototype=T.prototype;function R(M,q,W){this.props=M,this.context=q,this.refs=C,this.updater=W||w}var k=R.prototype=new L;k.constructor=R,S(k,T.prototype),k.isPureReactComponent=!0;var j=Array.isArray;function H(){}var U={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function re(M,q,W){var ie=W.ref;return{$$typeof:n,type:M,key:q,ref:ie!==void 0?ie:null,props:W}}function fe(M,q){return re(M.type,q,M.props)}function be(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function ae(M){var q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(W){return q[W]})}var ce=/\/+/g;function ve(M,q){return typeof M=="object"&&M!==null&&M.key!=null?ae(""+M.key):q.toString(36)}function pe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(H,H):(M.status="pending",M.then(function(q){M.status==="pending"&&(M.status="fulfilled",M.value=q)},function(q){M.status==="pending"&&(M.status="rejected",M.reason=q)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function z(M,q,W,ie,le){var we=typeof M;(we==="undefined"||we==="boolean")&&(M=null);var He=!1;if(M===null)He=!0;else switch(we){case"bigint":case"string":case"number":He=!0;break;case"object":switch(M.$$typeof){case n:case e:He=!0;break;case p:return He=M._init,z(He(M._payload),q,W,ie,le)}}if(He)return le=le(M),He=ie===""?"."+ve(M,0):ie,j(le)?(W="",He!=null&&(W=He.replace(ce,"$&/")+"/"),z(le,q,W,"",function(Je){return Je})):le!=null&&(be(le)&&(le=fe(le,W+(le.key==null||M&&M.key===le.key?"":(""+le.key).replace(ce,"$&/")+"/")+He)),q.push(le)),1;He=0;var Re=ie===""?".":ie+":";if(j(M))for(var de=0;de<M.length;de++)ie=M[de],we=Re+ve(ie,de),He+=z(ie,q,W,we,le);else if(de=v(M),typeof de=="function")for(M=de.call(M),de=0;!(ie=M.next()).done;)ie=ie.value,we=Re+ve(ie,de++),He+=z(ie,q,W,we,le);else if(we==="object"){if(typeof M.then=="function")return z(pe(M),q,W,ie,le);throw q=String(M),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return He}function D(M,q,W){if(M==null)return M;var ie=[],le=0;return z(M,ie,"","",function(we){return q.call(W,we,le++)}),ie}function $(M){if(M._status===-1){var q=M._result;q=q(),q.then(function(W){(M._status===0||M._status===-1)&&(M._status=1,M._result=W)},function(W){(M._status===0||M._status===-1)&&(M._status=2,M._result=W)}),M._status===-1&&(M._status=0,M._result=q)}if(M._status===1)return M._result.default;throw M._result}var B=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ee={map:D,forEach:function(M,q,W){D(M,function(){q.apply(this,arguments)},W)},count:function(M){var q=0;return D(M,function(){q++}),q},toArray:function(M){return D(M,function(q){return q})||[]},only:function(M){if(!be(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Xe.Activity=m,Xe.Children=ee,Xe.Component=T,Xe.Fragment=t,Xe.Profiler=s,Xe.PureComponent=R,Xe.StrictMode=r,Xe.Suspense=d,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return U.H.useMemoCache(M)}},Xe.cache=function(M){return function(){return M.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(M,q,W){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ie=S({},M.props),le=M.key;if(q!=null)for(we in q.key!==void 0&&(le=""+q.key),q)!J.call(q,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&q.ref===void 0||(ie[we]=q[we]);var we=arguments.length-2;if(we===1)ie.children=W;else if(1<we){for(var He=Array(we),Re=0;Re<we;Re++)He[Re]=arguments[Re+2];ie.children=He}return re(M.type,le,ie)},Xe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Xe.createElement=function(M,q,W){var ie,le={},we=null;if(q!=null)for(ie in q.key!==void 0&&(we=""+q.key),q)J.call(q,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(le[ie]=q[ie]);var He=arguments.length-2;if(He===1)le.children=W;else if(1<He){for(var Re=Array(He),de=0;de<He;de++)Re[de]=arguments[de+2];le.children=Re}if(M&&M.defaultProps)for(ie in He=M.defaultProps,He)le[ie]===void 0&&(le[ie]=He[ie]);return re(M,we,le)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(M){return{$$typeof:u,render:M}},Xe.isValidElement=be,Xe.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:$}},Xe.memo=function(M,q){return{$$typeof:h,type:M,compare:q===void 0?null:q}},Xe.startTransition=function(M){var q=U.T,W={};U.T=W;try{var ie=M(),le=U.S;le!==null&&le(W,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(H,B)}catch(we){B(we)}finally{q!==null&&W.types!==null&&(q.types=W.types),U.T=q}},Xe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Xe.use=function(M){return U.H.use(M)},Xe.useActionState=function(M,q,W){return U.H.useActionState(M,q,W)},Xe.useCallback=function(M,q){return U.H.useCallback(M,q)},Xe.useContext=function(M){return U.H.useContext(M)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(M,q){return U.H.useDeferredValue(M,q)},Xe.useEffect=function(M,q){return U.H.useEffect(M,q)},Xe.useEffectEvent=function(M){return U.H.useEffectEvent(M)},Xe.useId=function(){return U.H.useId()},Xe.useImperativeHandle=function(M,q,W){return U.H.useImperativeHandle(M,q,W)},Xe.useInsertionEffect=function(M,q){return U.H.useInsertionEffect(M,q)},Xe.useLayoutEffect=function(M,q){return U.H.useLayoutEffect(M,q)},Xe.useMemo=function(M,q){return U.H.useMemo(M,q)},Xe.useOptimistic=function(M,q){return U.H.useOptimistic(M,q)},Xe.useReducer=function(M,q,W){return U.H.useReducer(M,q,W)},Xe.useRef=function(M){return U.H.useRef(M)},Xe.useState=function(M){return U.H.useState(M)},Xe.useSyncExternalStore=function(M,q,W){return U.H.useSyncExternalStore(M,q,W)},Xe.useTransition=function(){return U.H.useTransition()},Xe.version="19.2.0",Xe}var w1;function R0(){return w1||(w1=1,Um.exports=vk()),Um.exports}var N=R0();const se=O0(N);var $m={exports:{}},dc={},Pm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function wk(){return S1||(S1=1,function(n){function e(z,D){var $=z.length;z.push(D);e:for(;0<$;){var B=$-1>>>1,ee=z[B];if(0<s(ee,D))z[B]=D,z[$]=ee,$=B;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var D=z[0],$=z.pop();if($!==D){z[0]=$;e:for(var B=0,ee=z.length,M=ee>>>1;B<M;){var q=2*(B+1)-1,W=z[q],ie=q+1,le=z[ie];if(0>s(W,$))ie<ee&&0>s(le,W)?(z[B]=le,z[ie]=$,B=ie):(z[B]=W,z[q]=$,B=q);else if(ie<ee&&0>s(le,$))z[B]=le,z[ie]=$,B=ie;else break e}}return D}function s(z,D){var $=z.sortIndex-D.sortIndex;return $!==0?$:z.id-D.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,x=3,v=!1,w=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(z){for(var D=t(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=z)r(h),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(h)}}function j(z){if(S=!1,k(z),!w)if(t(d)!==null)w=!0,H||(H=!0,ae());else{var D=t(h);D!==null&&pe(j,D.startTime-z)}}var H=!1,U=-1,J=5,re=-1;function fe(){return C?!0:!(n.unstable_now()-re<J)}function be(){if(C=!1,H){var z=n.unstable_now();re=z;var D=!0;try{e:{w=!1,S&&(S=!1,L(U),U=-1),v=!0;var $=x;try{t:{for(k(z),m=t(d);m!==null&&!(m.expirationTime>z&&fe());){var B=m.callback;if(typeof B=="function"){m.callback=null,x=m.priorityLevel;var ee=B(m.expirationTime<=z);if(z=n.unstable_now(),typeof ee=="function"){m.callback=ee,k(z),D=!0;break t}m===t(d)&&r(d),k(z)}else r(d);m=t(d)}if(m!==null)D=!0;else{var M=t(h);M!==null&&pe(j,M.startTime-z),D=!1}}break e}finally{m=null,x=$,v=!1}D=void 0}}finally{D?ae():H=!1}}}var ae;if(typeof R=="function")ae=function(){R(be)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ve=ce.port2;ce.port1.onmessage=be,ae=function(){ve.postMessage(null)}}else ae=function(){T(be,0)};function pe(z,D){U=T(function(){z(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(z){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var $=x;x=D;try{return z()}finally{x=$}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=x;x=z;try{return D()}finally{x=$}},n.unstable_scheduleCallback=function(z,D,$){var B=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,z){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=$+ee,z={id:p++,callback:D,priorityLevel:z,startTime:$,expirationTime:ee,sortIndex:-1},$>B?(z.sortIndex=$,e(h,z),t(d)===null&&z===t(h)&&(S?(L(U),U=-1):S=!0,pe(j,$-B))):(z.sortIndex=ee,e(d,z),w||v||(w=!0,H||(H=!0,ae()))),z},n.unstable_shouldYield=fe,n.unstable_wrapCallback=function(z){var D=x;return function(){var $=x;x=D;try{return z.apply(this,arguments)}finally{x=$}}}}(qm)),qm}var E1;function Sk(){return E1||(E1=1,Pm.exports=wk()),Pm.exports}var Vm={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function Ek(){if(C1)return Fn;C1=1;var n=R0();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,p)},Fn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},Fn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Fn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Fn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:v}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Fn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Fn.requestFormReset=function(d){r.d.r(d)},Fn.unstable_batchedUpdates=function(d,h){return d(h)},Fn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Fn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fn.version="19.2.0",Fn}var N1;function yE(){if(N1)return Vm.exports;N1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vm.exports=Ek(),Vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function Ck(){if(T1)return dc;T1=1;var n=Sk(),e=R0(),t=yE();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return d(g),i;if(y===f)return d(g),a;y=y.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=y;else{for(var E=!1,A=g.child;A;){if(A===c){E=!0,c=g,f=y;break}if(A===f){E=!0,f=g,c=y;break}A=A.sibling}if(!E){for(A=y.child;A;){if(A===c){E=!0,c=y,f=g;break}if(A===f){E=!0,f=y,c=g;break}A=A.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function ae(i){return i===null||typeof i!="object"?null:(i=be&&i[be]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ce?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case H:return"SuspenseList";case re:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case R:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case k:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return a=i.displayName||null,a!==null?a:ve(i.type)||"Memo";case J:a=i._payload,i=i._init;try{return ve(i(a))}catch{}}return null}var pe=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},B=[],ee=-1;function M(i){return{current:i}}function q(i){0>ee||(i.current=B[ee],B[ee]=null,ee--)}function W(i,a){ee++,B[ee]=i.current,i.current=a}var ie=M(null),le=M(null),we=M(null),He=M(null);function Re(i,a){switch(W(we,a),W(le,i),W(ie,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?$v(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=$v(a),i=Pv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(ie),W(ie,i)}function de(){q(ie),q(le),q(we)}function Je(i){i.memoizedState!==null&&W(He,i);var a=ie.current,c=Pv(a,i.type);a!==c&&(W(le,i),W(ie,c))}function ye(i){le.current===i&&(q(ie),q(le)),He.current===i&&(q(He),oc._currentValue=$)}var Qe,Ut;function Lt(i){if(Qe===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Qe=a&&a[1]||"",Ut=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+i+Ut}var En=!1;function Ot(i,a){if(!i||En)return"";En=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var G=X}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(X){G=X}i.call(ne.prototype)}}else{try{throw Error()}catch(X){G=X}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),E=y[0],A=y[1];if(E&&A){var _=E.split(`
`),F=A.split(`
`);for(g=f=0;f<_.length&&!_[f].includes("DetermineComponentFrameRoot");)f++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(f===_.length||g===F.length)for(f=_.length-1,g=F.length-1;1<=f&&0<=g&&_[f]!==F[g];)g--;for(;1<=f&&0<=g;f--,g--)if(_[f]!==F[g]){if(f!==1||g!==1)do if(f--,g--,0>g||_[f]!==F[g]){var Z=`
`+_[f].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=f&&0<=g);break}}}finally{En=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Lt(c):""}function on(i,a){switch(i.tag){case 26:case 27:case 5:return Lt(i.type);case 16:return Lt("Lazy");case 13:return i.child!==a&&a!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return Ot(i.type,!1);case 11:return Ot(i.type.render,!1);case 1:return Ot(i.type,!0);case 31:return Lt("Activity");default:return""}}function Cn(i){try{var a="",c=null;do a+=on(i,c),c=i,i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var K=Object.prototype.hasOwnProperty,Ee=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,Be=n.unstable_shouldYield,lt=n.unstable_requestPaint,nt=n.unstable_now,wn=n.unstable_getCurrentPriorityLevel,Bt=n.unstable_ImmediatePriority,ge=n.unstable_UserBlockingPriority,Te=n.unstable_NormalPriority,We=n.unstable_LowPriority,Ze=n.unstable_IdlePriority,$t=n.log,Zt=n.unstable_setDisableYieldValue,gr=null,Y=null;function Ne(i){if(typeof $t=="function"&&Zt(i),Y&&typeof Y.setStrictMode=="function")try{Y.setStrictMode(gr,i)}catch{}}var ke=Math.clz32?Math.clz32:St,pt=Math.log,et=Math.LN2;function St(i){return i>>>=0,i===0?32:31-(pt(i)/et|0)|0}var en=256,Yn=262144,yr=4194304;function Pt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function O(i,a,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var A=f&134217727;return A!==0?(f=A&~y,f!==0?g=Pt(f):(E&=A,E!==0?g=Pt(E):c||(c=A&~i,c!==0&&(g=Pt(c))))):(A=f&~y,A!==0?g=Pt(A):E!==0?g=Pt(E):c||(c=f&~i,c!==0&&(g=Pt(c)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:g}function Q(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ue(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var i=yr;return yr<<=1,(yr&62914560)===0&&(yr=4194304),i}function gt(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ge(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ce(i,a,c,f,g,y){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,_=i.expirationTimes,F=i.hiddenUpdates;for(c=E&~c;0<c;){var Z=31-ke(c),ne=1<<Z;A[Z]=0,_[Z]=-1;var G=F[Z];if(G!==null)for(F[Z]=null,Z=0;Z<G.length;Z++){var X=G[Z];X!==null&&(X.lane&=-536870913)}c&=~ne}f!==0&&Ae(i,f,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~a))}function Ae(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-ke(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function _e(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-ke(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}function yt(i,a){var c=a&-a;return c=(c&42)!==0?1:Rt(c),(c&(i.suspendedLanes|a))!==0?0:c}function Rt(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function _n(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ao(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:d1(i.type))}function oa(i,a){var c=D.p;try{return D.p=i,a()}finally{D.p=c}}var li=Math.random().toString(36).slice(2),an="__reactFiber$"+li,qn="__reactProps$"+li,cs="__reactContainer$"+li,yl="__reactEvents$"+li,mu="__reactListeners$"+li,aa="__reactHandles$"+li,gu="__reactResources$"+li,lo="__reactMarker$"+li;function bl(i){delete i[an],delete i[qn],delete i[yl],delete i[mu],delete i[aa]}function Xn(i){var a=i[an];if(a)return a;for(var c=i.parentNode;c;){if(a=c[cs]||c[an]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Qv(i);i!==null;){if(c=i[an])return c;i=Qv(i)}return a}i=c,c=i.parentNode}return null}function Mi(i){if(i=i[an]||i[cs]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function us(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ds(i){var a=i[gu];return a||(a=i[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function hn(i){i[lo]=!0}var yu=new Set,co={};function Oi(i,a){he(i,a),he(i+"Capture",a)}function he(i,a){for(co[i]=a,i=0;i<a.length;i++)yu.add(a[i])}var Ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},Et={};function ln(i){return K.call(Et,i)?!0:K.call(at,i)?!1:Ue.test(i)?Et[i]=!0:(at[i]=!0,!1)}function Vn(i,a,c){if(ln(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function br(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function nr(i,a,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+f)}}function zt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xr(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bu(i,a,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,y=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function la(i){if(!i._valueTracker){var a=xr(i)?"checked":"value";i._valueTracker=bu(i,a,""+i[a])}}function xl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=xr(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function ca(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ih=/[\n"\\]/g;function rr(i){return i.replace(Ih,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vl(i,a,c,f,g,y,E,A){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+zt(a)):i.value!==""+zt(a)&&(i.value=""+zt(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?ua(i,E,zt(a)):c!=null?ua(i,E,zt(c)):f!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+zt(A):i.removeAttribute("name")}function uo(i,a,c,f,g,y,E,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){la(i);return}c=c!=null?""+zt(c):"",a=a!=null?""+zt(a):c,A||a===i.value||(i.value=a),i.defaultValue=a}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=A?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),la(i)}function ua(i,a,c){a==="number"&&ca(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function jn(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+zt(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function xu(i,a,c){if(a!=null&&(a=""+zt(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+zt(c):""}function da(i,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(pe(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=zt(a),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),la(i)}function Ke(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pn(i,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,c):typeof c!="number"||c===0||vu.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function Ct(i,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in a)f=a[g],a.hasOwnProperty(g)&&c[g]!==f&&pn(i,g,f)}else for(var y in a)a.hasOwnProperty(y)&&pn(i,y,a[y])}function fs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ri=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hs(i){return wl.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function xe(){}var je=null;function tt(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var dt=null,Xt=null;function Dr(i){var a=Mi(i);if(a&&(i=a.stateNode)){var c=i[qn]||null;e:switch(i=a.stateNode,a.type){case"input":if(vl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=f[qn]||null;if(!g)throw Error(r(90));vl(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===i.form&&xl(f)}break e;case"textarea":xu(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&jn(i,!!c.multiple,a,!1)}}}var Sl=!1;function wu(i,a,c){if(Sl)return i(a,c);Sl=!0;try{var f=i(a);return f}finally{if(Sl=!1,(dt!==null||Xt!==null)&&(ld(),dt&&(a=dt,i=Xt,Xt=dt=null,Dr(a),i)))for(a=0;a<i.length;a++)Dr(i[a])}}function El(i,a){var c=i.stateNode;if(c===null)return null;var f=c[qn]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hh=!1;if(Di)try{var Cl={};Object.defineProperty(Cl,"passive",{get:function(){Hh=!0}}),window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{Hh=!1}var ps=null,Uh=null,Su=null;function Py(){if(Su)return Su;var i,a=Uh,c=a.length,f,g="value"in ps?ps.value:ps.textContent,y=g.length;for(i=0;i<c&&a[i]===g[i];i++);var E=c-i;for(f=1;f<=E&&a[c-f]===g[y-f];f++);return Su=g.slice(i,1<f?1-f:void 0)}function Eu(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Cu(){return!0}function qy(){return!1}function ir(i){function a(c,f,g,y,E){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Cu:qy,this.isPropagationStopped=qy,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),a}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=ir(fo),Nl=m({},fo,{view:0,detail:0}),gT=ir(Nl),$h,Ph,Tl,Tu=m({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Tl&&(Tl&&i.type==="mousemove"?($h=i.screenX-Tl.screenX,Ph=i.screenY-Tl.screenY):Ph=$h=0,Tl=i),$h)},movementY:function(i){return"movementY"in i?i.movementY:Ph}}),Vy=ir(Tu),yT=m({},Tu,{dataTransfer:0}),bT=ir(yT),xT=m({},Nl,{relatedTarget:0}),qh=ir(xT),vT=m({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),wT=ir(vT),ST=m({},fo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ET=ir(ST),CT=m({},fo,{data:0}),Fy=ir(CT),NT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=AT[i])?!!a[i]:!1}function Vh(){return kT}var MT=m({},Nl,{key:function(i){if(i.key){var a=NT[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Eu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?TT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vh,charCode:function(i){return i.type==="keypress"?Eu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Eu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),OT=ir(MT),RT=m({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=ir(RT),DT=m({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vh}),_T=ir(DT),jT=m({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),LT=ir(jT),BT=m({},Tu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),zT=ir(BT),IT=m({},fo,{newState:0,oldState:0}),HT=ir(IT),UT=[9,13,27,32],Fh=Di&&"CompositionEvent"in window,Al=null;Di&&"documentMode"in document&&(Al=document.documentMode);var $T=Di&&"TextEvent"in window&&!Al,Ky=Di&&(!Fh||Al&&8<Al&&11>=Al),Wy=" ",Qy=!1;function Yy(i,a){switch(i){case"keyup":return UT.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fa=!1;function PT(i,a){switch(i){case"compositionend":return Xy(a);case"keypress":return a.which!==32?null:(Qy=!0,Wy);case"textInput":return i=a.data,i===Wy&&Qy?null:i;default:return null}}function qT(i,a){if(fa)return i==="compositionend"||!Fh&&Yy(i,a)?(i=Py(),Su=Uh=ps=null,fa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ky&&a.locale!=="ko"?null:a.data;default:return null}}var VT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!VT[i.type]:a==="textarea"}function Zy(i,a,c,f){dt?Xt?Xt.push(f):Xt=[f]:dt=f,a=md(a,"onChange"),0<a.length&&(c=new Nu("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var kl=null,Ml=null;function FT(i){Lv(i,0)}function Au(i){var a=us(i);if(xl(a))return i}function eb(i,a){if(i==="change")return a}var tb=!1;if(Di){var Gh;if(Di){var Kh="oninput"in document;if(!Kh){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),Kh=typeof nb.oninput=="function"}Gh=Kh}else Gh=!1;tb=Gh&&(!document.documentMode||9<document.documentMode)}function rb(){kl&&(kl.detachEvent("onpropertychange",ib),Ml=kl=null)}function ib(i){if(i.propertyName==="value"&&Au(Ml)){var a=[];Zy(a,Ml,i,tt(i)),wu(FT,a)}}function GT(i,a,c){i==="focusin"?(rb(),kl=a,Ml=c,kl.attachEvent("onpropertychange",ib)):i==="focusout"&&rb()}function KT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Au(Ml)}function WT(i,a){if(i==="click")return Au(a)}function QT(i,a){if(i==="input"||i==="change")return Au(a)}function YT(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vr=typeof Object.is=="function"?Object.is:YT;function Ol(i,a){if(vr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!K.call(a,g)||!vr(i[g],a[g]))return!1}return!0}function sb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ob(i,a){var c=sb(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=sb(c)}}function ab(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ab(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function lb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=ca(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=ca(i.document)}return a}function Wh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var XT=Di&&"documentMode"in document&&11>=document.documentMode,ha=null,Qh=null,Rl=null,Yh=!1;function cb(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yh||ha==null||ha!==ca(f)||(f=ha,"selectionStart"in f&&Wh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Rl&&Ol(Rl,f)||(Rl=f,f=md(Qh,"onSelect"),0<f.length&&(a=new Nu("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=ha)))}function ho(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var pa={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},Xh={},ub={};Di&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function po(i){if(Xh[i])return Xh[i];if(!pa[i])return i;var a=pa[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in ub)return Xh[i]=a[c];return i}var db=po("animationend"),fb=po("animationiteration"),hb=po("animationstart"),JT=po("transitionrun"),ZT=po("transitionstart"),eA=po("transitioncancel"),pb=po("transitionend"),mb=new Map,Jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jh.push("scrollEnd");function Zr(i,a){mb.set(i,a),Oi(a,[i])}var ku=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_r=[],ma=0,Zh=0;function Mu(){for(var i=ma,a=Zh=ma=0;a<i;){var c=_r[a];_r[a++]=null;var f=_r[a];_r[a++]=null;var g=_r[a];_r[a++]=null;var y=_r[a];if(_r[a++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}y!==0&&gb(c,g,y)}}function Ou(i,a,c,f){_r[ma++]=i,_r[ma++]=a,_r[ma++]=c,_r[ma++]=f,Zh|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function ep(i,a,c,f){return Ou(i,a,c,f),Ru(i)}function mo(i,a){return Ou(i,null,null,a),Ru(i)}function gb(i,a,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,y=i.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&a!==null&&(g=31-ke(c),i=y.hiddenUpdates,f=i[g],f===null?i[g]=[a]:f.push(a),a.lane=c|536870912),y):null}function Ru(i){if(50<Zl)throw Zl=0,cm=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ga={};function tA(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(i,a,c,f){return new tA(i,a,c,f)}function tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _i(i,a){var c=i.alternate;return c===null?(c=wr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function yb(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Du(i,a,c,f,g,y){var E=0;if(f=i,typeof i=="function")tp(i)&&(E=1);else if(typeof i=="string")E=ok(i,c,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case re:return i=wr(31,c,a,g),i.elementType=re,i.lanes=y,i;case S:return go(c.children,g,y,a);case C:E=8,g|=24;break;case T:return i=wr(12,c,a,g|2),i.elementType=T,i.lanes=y,i;case j:return i=wr(13,c,a,g),i.elementType=j,i.lanes=y,i;case H:return i=wr(19,c,a,g),i.elementType=H,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:E=10;break e;case L:E=9;break e;case k:E=11;break e;case U:E=14;break e;case J:E=16,f=null;break e}E=29,c=Error(r(130,i===null?"null":typeof i,"")),f=null}return a=wr(E,c,a,g),a.elementType=i,a.type=f,a.lanes=y,a}function go(i,a,c,f){return i=wr(7,i,f,a),i.lanes=c,i}function np(i,a,c){return i=wr(6,i,null,a),i.lanes=c,i}function bb(i){var a=wr(18,null,null,0);return a.stateNode=i,a}function rp(i,a,c){return a=wr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var xb=new WeakMap;function jr(i,a){if(typeof i=="object"&&i!==null){var c=xb.get(i);return c!==void 0?c:(a={value:i,source:a,stack:Cn(a)},xb.set(i,a),a)}return{value:i,source:a,stack:Cn(a)}}var ya=[],ba=0,_u=null,Dl=0,Lr=[],Br=0,ms=null,ci=1,ui="";function ji(i,a){ya[ba++]=Dl,ya[ba++]=_u,_u=i,Dl=a}function vb(i,a,c){Lr[Br++]=ci,Lr[Br++]=ui,Lr[Br++]=ms,ms=i;var f=ci;i=ui;var g=32-ke(f)-1;f&=~(1<<g),c+=1;var y=32-ke(a)+g;if(30<y){var E=g-g%5;y=(f&(1<<E)-1).toString(32),f>>=E,g-=E,ci=1<<32-ke(a)+g|c<<g|f,ui=y+i}else ci=1<<y|c<<g|f,ui=i}function ip(i){i.return!==null&&(ji(i,1),vb(i,1,0))}function sp(i){for(;i===_u;)_u=ya[--ba],ya[ba]=null,Dl=ya[--ba],ya[ba]=null;for(;i===ms;)ms=Lr[--Br],Lr[Br]=null,ui=Lr[--Br],Lr[Br]=null,ci=Lr[--Br],Lr[Br]=null}function wb(i,a){Lr[Br++]=ci,Lr[Br++]=ui,Lr[Br++]=ms,ci=a.id,ui=a.overflow,ms=i}var Ln=null,qt=null,mt=!1,gs=null,zr=!1,op=Error(r(519));function ys(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(jr(a,i)),op}function Sb(i){var a=i.stateNode,c=i.type,f=i.memoizedProps;switch(a[an]=i,a[qn]=f,c){case"dialog":ut("cancel",a),ut("close",a);break;case"iframe":case"object":case"embed":ut("load",a);break;case"video":case"audio":for(c=0;c<tc.length;c++)ut(tc[c],a);break;case"source":ut("error",a);break;case"img":case"image":case"link":ut("error",a),ut("load",a);break;case"details":ut("toggle",a);break;case"input":ut("invalid",a),uo(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":ut("invalid",a);break;case"textarea":ut("invalid",a),da(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||Hv(a.textContent,c)?(f.popover!=null&&(ut("beforetoggle",a),ut("toggle",a)),f.onScroll!=null&&ut("scroll",a),f.onScrollEnd!=null&&ut("scrollend",a),f.onClick!=null&&(a.onclick=xe),a=!0):a=!1,a||ys(i,!0)}function Eb(i){for(Ln=i.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:Ln=Ln.return}}function xa(i){if(i!==Ln)return!1;if(!mt)return Eb(i),mt=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Cm(i.type,i.memoizedProps)),c=!c),c&&qt&&ys(i),Eb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));qt=Wv(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));qt=Wv(i)}else a===27?(a=qt,Rs(i.type)?(i=Mm,Mm=null,qt=i):qt=a):qt=Ln?Hr(i.stateNode.nextSibling):null;return!0}function yo(){qt=Ln=null,mt=!1}function ap(){var i=gs;return i!==null&&(lr===null?lr=i:lr.push.apply(lr,i),gs=null),i}function _l(i){gs===null?gs=[i]:gs.push(i)}var lp=M(null),bo=null,Li=null;function bs(i,a,c){W(lp,a._currentValue),a._currentValue=c}function Bi(i){i._currentValue=lp.current,q(lp)}function cp(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function up(i,a,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var _=0;_<a.length;_++)if(A.context===a[_]){y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),cp(y.return,c,i),f||(E=null);break e}y=A.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),cp(E,c,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function va(i,a,c,f){i=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=g.type;vr(g.pendingProps.value,E.value)||(i!==null?i.push(A):i=[A])}}else if(g===He.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(oc):i=[oc])}g=g.return}i!==null&&up(a,i,c,f),a.flags|=262144}function ju(i){for(i=i.firstContext;i!==null;){if(!vr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xo(i){bo=i,Li=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Bn(i){return Cb(bo,i)}function Lu(i,a){return bo===null&&xo(i),Cb(i,a)}function Cb(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Li===null){if(i===null)throw Error(r(308));Li=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Li=Li.next=a;return c}var nA=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},rA=n.unstable_scheduleCallback,iA=n.unstable_NormalPriority,mn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dp(){return{controller:new nA,data:new Map,refCount:0}}function jl(i){i.refCount--,i.refCount===0&&rA(iA,function(){i.controller.abort()})}var Ll=null,fp=0,wa=0,Sa=null;function sA(i,a){if(Ll===null){var c=Ll=[];fp=0,wa=mm(),Sa={status:"pending",value:void 0,then:function(f){c.push(f)}}}return fp++,a.then(Nb,Nb),a}function Nb(){if(--fp===0&&Ll!==null){Sa!==null&&(Sa.status="fulfilled");var i=Ll;Ll=null,wa=0,Sa=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function oA(i,a){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var Tb=z.S;z.S=function(i,a){cv=nt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&sA(i,a),Tb!==null&&Tb(i,a)};var vo=M(null);function hp(){var i=vo.current;return i!==null?i:Dt.pooledCache}function Bu(i,a){a===null?W(vo,vo.current):W(vo,a.pool)}function Ab(){var i=hp();return i===null?null:{parent:mn._currentValue,pool:i}}var Ea=Error(r(460)),pp=Error(r(474)),zu=Error(r(542)),Iu={then:function(){}};function kb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Mb(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(xe,xe),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Rb(i),i;default:if(typeof a.status=="string")a.then(xe,xe);else{if(i=Dt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=f}},function(f){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Rb(i),i}throw So=a,Ea}}function wo(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(So=c,Ea):c}}var So=null;function Ob(){if(So===null)throw Error(r(459));var i=So;return So=null,i}function Rb(i){if(i===Ea||i===zu)throw Error(r(483))}var Ca=null,Bl=0;function Hu(i){var a=Bl;return Bl+=1,Ca===null&&(Ca=[]),Mb(Ca,i,a)}function zl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Uu(i,a){throw a.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Db(i){function a(P,I){if(i){var V=P.deletions;V===null?(P.deletions=[I],P.flags|=16):V.push(I)}}function c(P,I){if(!i)return null;for(;I!==null;)a(P,I),I=I.sibling;return null}function f(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function g(P,I){return P=_i(P,I),P.index=0,P.sibling=null,P}function y(P,I,V){return P.index=V,i?(V=P.alternate,V!==null?(V=V.index,V<I?(P.flags|=67108866,I):V):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function E(P){return i&&P.alternate===null&&(P.flags|=67108866),P}function A(P,I,V,te){return I===null||I.tag!==6?(I=np(V,P.mode,te),I.return=P,I):(I=g(I,V),I.return=P,I)}function _(P,I,V,te){var $e=V.type;return $e===S?Z(P,I,V.props.children,te,V.key):I!==null&&(I.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===J&&wo($e)===I.type)?(I=g(I,V.props),zl(I,V),I.return=P,I):(I=Du(V.type,V.key,V.props,null,P.mode,te),zl(I,V),I.return=P,I)}function F(P,I,V,te){return I===null||I.tag!==4||I.stateNode.containerInfo!==V.containerInfo||I.stateNode.implementation!==V.implementation?(I=rp(V,P.mode,te),I.return=P,I):(I=g(I,V.children||[]),I.return=P,I)}function Z(P,I,V,te,$e){return I===null||I.tag!==7?(I=go(V,P.mode,te,$e),I.return=P,I):(I=g(I,V),I.return=P,I)}function ne(P,I,V){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=np(""+I,P.mode,V),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case v:return V=Du(I.type,I.key,I.props,null,P.mode,V),zl(V,I),V.return=P,V;case w:return I=rp(I,P.mode,V),I.return=P,I;case J:return I=wo(I),ne(P,I,V)}if(pe(I)||ae(I))return I=go(I,P.mode,V,null),I.return=P,I;if(typeof I.then=="function")return ne(P,Hu(I),V);if(I.$$typeof===R)return ne(P,Lu(P,I),V);Uu(P,I)}return null}function G(P,I,V,te){var $e=I!==null?I.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return $e!==null?null:A(P,I,""+V,te);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return V.key===$e?_(P,I,V,te):null;case w:return V.key===$e?F(P,I,V,te):null;case J:return V=wo(V),G(P,I,V,te)}if(pe(V)||ae(V))return $e!==null?null:Z(P,I,V,te,null);if(typeof V.then=="function")return G(P,I,Hu(V),te);if(V.$$typeof===R)return G(P,I,Lu(P,V),te);Uu(P,V)}return null}function X(P,I,V,te,$e){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return P=P.get(V)||null,A(I,P,""+te,$e);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case v:return P=P.get(te.key===null?V:te.key)||null,_(I,P,te,$e);case w:return P=P.get(te.key===null?V:te.key)||null,F(I,P,te,$e);case J:return te=wo(te),X(P,I,V,te,$e)}if(pe(te)||ae(te))return P=P.get(V)||null,Z(I,P,te,$e,null);if(typeof te.then=="function")return X(P,I,V,Hu(te),$e);if(te.$$typeof===R)return X(P,I,V,Lu(I,te),$e);Uu(I,te)}return null}function Me(P,I,V,te){for(var $e=null,bt=null,Le=I,it=I=0,ht=null;Le!==null&&it<V.length;it++){Le.index>it?(ht=Le,Le=null):ht=Le.sibling;var xt=G(P,Le,V[it],te);if(xt===null){Le===null&&(Le=ht);break}i&&Le&&xt.alternate===null&&a(P,Le),I=y(xt,I,it),bt===null?$e=xt:bt.sibling=xt,bt=xt,Le=ht}if(it===V.length)return c(P,Le),mt&&ji(P,it),$e;if(Le===null){for(;it<V.length;it++)Le=ne(P,V[it],te),Le!==null&&(I=y(Le,I,it),bt===null?$e=Le:bt.sibling=Le,bt=Le);return mt&&ji(P,it),$e}for(Le=f(Le);it<V.length;it++)ht=X(Le,P,it,V[it],te),ht!==null&&(i&&ht.alternate!==null&&Le.delete(ht.key===null?it:ht.key),I=y(ht,I,it),bt===null?$e=ht:bt.sibling=ht,bt=ht);return i&&Le.forEach(function(Bs){return a(P,Bs)}),mt&&ji(P,it),$e}function Ve(P,I,V,te){if(V==null)throw Error(r(151));for(var $e=null,bt=null,Le=I,it=I=0,ht=null,xt=V.next();Le!==null&&!xt.done;it++,xt=V.next()){Le.index>it?(ht=Le,Le=null):ht=Le.sibling;var Bs=G(P,Le,xt.value,te);if(Bs===null){Le===null&&(Le=ht);break}i&&Le&&Bs.alternate===null&&a(P,Le),I=y(Bs,I,it),bt===null?$e=Bs:bt.sibling=Bs,bt=Bs,Le=ht}if(xt.done)return c(P,Le),mt&&ji(P,it),$e;if(Le===null){for(;!xt.done;it++,xt=V.next())xt=ne(P,xt.value,te),xt!==null&&(I=y(xt,I,it),bt===null?$e=xt:bt.sibling=xt,bt=xt);return mt&&ji(P,it),$e}for(Le=f(Le);!xt.done;it++,xt=V.next())xt=X(Le,P,it,xt.value,te),xt!==null&&(i&&xt.alternate!==null&&Le.delete(xt.key===null?it:xt.key),I=y(xt,I,it),bt===null?$e=xt:bt.sibling=xt,bt=xt);return i&&Le.forEach(function(yk){return a(P,yk)}),mt&&ji(P,it),$e}function Mt(P,I,V,te){if(typeof V=="object"&&V!==null&&V.type===S&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case v:e:{for(var $e=V.key;I!==null;){if(I.key===$e){if($e=V.type,$e===S){if(I.tag===7){c(P,I.sibling),te=g(I,V.props.children),te.return=P,P=te;break e}}else if(I.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===J&&wo($e)===I.type){c(P,I.sibling),te=g(I,V.props),zl(te,V),te.return=P,P=te;break e}c(P,I);break}else a(P,I);I=I.sibling}V.type===S?(te=go(V.props.children,P.mode,te,V.key),te.return=P,P=te):(te=Du(V.type,V.key,V.props,null,P.mode,te),zl(te,V),te.return=P,P=te)}return E(P);case w:e:{for($e=V.key;I!==null;){if(I.key===$e)if(I.tag===4&&I.stateNode.containerInfo===V.containerInfo&&I.stateNode.implementation===V.implementation){c(P,I.sibling),te=g(I,V.children||[]),te.return=P,P=te;break e}else{c(P,I);break}else a(P,I);I=I.sibling}te=rp(V,P.mode,te),te.return=P,P=te}return E(P);case J:return V=wo(V),Mt(P,I,V,te)}if(pe(V))return Me(P,I,V,te);if(ae(V)){if($e=ae(V),typeof $e!="function")throw Error(r(150));return V=$e.call(V),Ve(P,I,V,te)}if(typeof V.then=="function")return Mt(P,I,Hu(V),te);if(V.$$typeof===R)return Mt(P,I,Lu(P,V),te);Uu(P,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,I!==null&&I.tag===6?(c(P,I.sibling),te=g(I,V),te.return=P,P=te):(c(P,I),te=np(V,P.mode,te),te.return=P,P=te),E(P)):c(P,I)}return function(P,I,V,te){try{Bl=0;var $e=Mt(P,I,V,te);return Ca=null,$e}catch(Le){if(Le===Ea||Le===zu)throw Le;var bt=wr(29,Le,null,P.mode);return bt.lanes=te,bt.return=P,bt}finally{}}}var Eo=Db(!0),_b=Db(!1),xs=!1;function mp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function vs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ws(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(vt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,a=Ru(i),gb(i,null,c),a}return Ou(i,f,a,c),Ru(i)}function Il(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,_e(i,c)}}function yp(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var bp=!1;function Hl(){if(bp){var i=Sa;if(i!==null)throw i}}function Ul(i,a,c,f){bp=!1;var g=i.updateQueue;xs=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var _=A,F=_.next;_.next=null,E===null?y=F:E.next=F,E=_;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==E&&(A===null?Z.firstBaseUpdate=F:A.next=F,Z.lastBaseUpdate=_))}if(y!==null){var ne=g.baseState;E=0,Z=F=_=null,A=y;do{var G=A.lane&-536870913,X=G!==A.lane;if(X?(ft&G)===G:(f&G)===G){G!==0&&G===wa&&(bp=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Me=i,Ve=A;G=a;var Mt=c;switch(Ve.tag){case 1:if(Me=Ve.payload,typeof Me=="function"){ne=Me.call(Mt,ne,G);break e}ne=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ve.payload,G=typeof Me=="function"?Me.call(Mt,ne,G):Me,G==null)break e;ne=m({},ne,G);break e;case 2:xs=!0}}G=A.callback,G!==null&&(i.flags|=64,X&&(i.flags|=8192),X=g.callbacks,X===null?g.callbacks=[G]:X.push(G))}else X={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(F=Z=X,_=ne):Z=Z.next=X,E|=G;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;X=A,A=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);Z===null&&(_=ne),g.baseState=_,g.firstBaseUpdate=F,g.lastBaseUpdate=Z,y===null&&(g.shared.lanes=0),Ts|=E,i.lanes=E,i.memoizedState=ne}}function jb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Lb(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)jb(c[i],a)}var Na=M(null),$u=M(0);function Bb(i,a){i=Fi,W($u,i),W(Na,a),Fi=i|a.baseLanes}function xp(){W($u,Fi),W(Na,Na.current)}function vp(){Fi=$u.current,q(Na),q($u)}var Sr=M(null),Ir=null;function Ss(i){var a=i.alternate;W(cn,cn.current&1),W(Sr,i),Ir===null&&(a===null||Na.current!==null||a.memoizedState!==null)&&(Ir=i)}function wp(i){W(cn,cn.current),W(Sr,i),Ir===null&&(Ir=i)}function zb(i){i.tag===22?(W(cn,cn.current),W(Sr,i),Ir===null&&(Ir=i)):Es()}function Es(){W(cn,cn.current),W(Sr,Sr.current)}function Er(i){q(Sr),Ir===i&&(Ir=null),q(cn)}var cn=M(0);function Pu(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Am(c)||km(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var zi=0,rt=null,At=null,gn=null,qu=!1,Ta=!1,Co=!1,Vu=0,$l=0,Aa=null,aA=0;function tn(){throw Error(r(321))}function Sp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!vr(i[c],a[c]))return!1;return!0}function Ep(i,a,c,f,g,y){return zi=y,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=i===null||i.memoizedState===null?vx:Ip,Co=!1,y=c(f,g),Co=!1,Ta&&(y=Hb(a,c,f,g)),Ib(i),y}function Ib(i){z.H=Vl;var a=At!==null&&At.next!==null;if(zi=0,gn=At=rt=null,qu=!1,$l=0,Aa=null,a)throw Error(r(300));i===null||yn||(i=i.dependencies,i!==null&&ju(i)&&(yn=!0))}function Hb(i,a,c,f){rt=i;var g=0;do{if(Ta&&(Aa=null),$l=0,Ta=!1,25<=g)throw Error(r(301));if(g+=1,gn=At=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=wx,y=a(c,f)}while(Ta);return y}function lA(){var i=z.H,a=i.useState()[0];return a=typeof a.then=="function"?Pl(a):a,i=i.useState()[0],(At!==null?At.memoizedState:null)!==i&&(rt.flags|=1024),a}function Cp(){var i=Vu!==0;return Vu=0,i}function Np(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Tp(i){if(qu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}qu=!1}zi=0,gn=At=rt=null,Ta=!1,$l=Vu=0,Aa=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?rt.memoizedState=gn=i:gn=gn.next=i,gn}function un(){if(At===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=At.next;var a=gn===null?rt.memoizedState:gn.next;if(a!==null)gn=a,At=i;else{if(i===null)throw rt.alternate===null?Error(r(467)):Error(r(310));At=i,i={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},gn===null?rt.memoizedState=gn=i:gn=gn.next=i}return gn}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(i){var a=$l;return $l+=1,Aa===null&&(Aa=[]),i=Mb(Aa,i,a),a=rt,(gn===null?a.memoizedState:gn.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?vx:Ip),i}function Gu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Pl(i);if(i.$$typeof===R)return Bn(i)}throw Error(r(438,String(i)))}function Ap(i){var a=null,c=rt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=rt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Fu(),rt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),f=0;f<i;f++)c[f]=fe;return a.index++,c}function Ii(i,a){return typeof a=="function"?a(i):a}function Ku(i){var a=un();return kp(a,At,i)}function kp(i,a,c){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=i.baseQueue,y=f.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}a.baseQueue=g=y,f.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{a=g.next;var A=E=null,_=null,F=a,Z=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(ft&ne)===ne:(zi&ne)===ne){var G=F.revertLane;if(G===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===wa&&(Z=!0);else if((zi&G)===G){F=F.next,G===wa&&(Z=!0);continue}else ne={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},_===null?(A=_=ne,E=y):_=_.next=ne,rt.lanes|=G,Ts|=G;ne=F.action,Co&&c(y,ne),y=F.hasEagerState?F.eagerState:c(y,ne)}else G={lane:ne,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},_===null?(A=_=G,E=y):_=_.next=G,rt.lanes|=ne,Ts|=ne;F=F.next}while(F!==null&&F!==a);if(_===null?E=y:_.next=A,!vr(y,i.memoizedState)&&(yn=!0,Z&&(c=Sa,c!==null)))throw c;i.memoizedState=y,i.baseState=E,i.baseQueue=_,f.lastRenderedState=y}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Mp(i){var a=un(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do y=i(y,E.action),E=E.next;while(E!==g);vr(y,a.memoizedState)||(yn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,f]}function Ub(i,a,c){var f=rt,g=un(),y=mt;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=a();var E=!vr((At||g).memoizedState,c);if(E&&(g.memoizedState=c,yn=!0),g=g.queue,Dp(qb.bind(null,f,g,i),[i]),g.getSnapshot!==a||E||gn!==null&&gn.memoizedState.tag&1){if(f.flags|=2048,ka(9,{destroy:void 0},Pb.bind(null,f,g,c,a),null),Dt===null)throw Error(r(349));y||(zi&127)!==0||$b(f,a,c)}return c}function $b(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=rt.updateQueue,a===null?(a=Fu(),rt.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function Pb(i,a,c,f){a.value=c,a.getSnapshot=f,Vb(a)&&Fb(i)}function qb(i,a,c){return c(function(){Vb(a)&&Fb(i)})}function Vb(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!vr(i,c)}catch{return!0}}function Fb(i){var a=mo(i,2);a!==null&&cr(a,i,2)}function Op(i){var a=Jn();if(typeof i=="function"){var c=i;if(i=c(),Co){Ne(!0);try{c()}finally{Ne(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},a}function Gb(i,a,c,f){return i.baseState=c,kp(i,At,typeof f=="function"?f:Ii)}function cA(i,a,c,f,g){if(Yu(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};z.T!==null?c(!0):y.isTransition=!1,f(y),c=a.pending,c===null?(y.next=a.pending=y,Kb(a,y)):(y.next=c.next,a.pending=c.next=y)}}function Kb(i,a){var c=a.action,f=a.payload,g=i.state;if(a.isTransition){var y=z.T,E={};z.T=E;try{var A=c(g,f),_=z.S;_!==null&&_(E,A),Wb(i,a,A)}catch(F){Rp(i,a,F)}finally{y!==null&&E.types!==null&&(y.types=E.types),z.T=y}}else try{y=c(g,f),Wb(i,a,y)}catch(F){Rp(i,a,F)}}function Wb(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Qb(i,a,f)},function(f){return Rp(i,a,f)}):Qb(i,a,c)}function Qb(i,a,c){a.status="fulfilled",a.value=c,Yb(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,Kb(i,c)))}function Rp(i,a,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,Yb(a),a=a.next;while(a!==f)}i.action=null}function Yb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Xb(i,a){return a}function Jb(i,a){if(mt){var c=Dt.formState;if(c!==null){e:{var f=rt;if(mt){if(qt){t:{for(var g=qt,y=zr;g.nodeType!==8;){if(!y){g=null;break t}if(g=Hr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){qt=Hr(g.nextSibling),f=g.data==="F!";break e}}ys(f)}f=!1}f&&(a=c[0])}}return c=Jn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xb,lastRenderedState:a},c.queue=f,c=yx.bind(null,rt,f),f.dispatch=c,f=Op(!1),y=zp.bind(null,rt,!1,f.queue),f=Jn(),g={state:a,dispatch:null,action:i,pending:null},f.queue=g,c=cA.bind(null,rt,g,y,c),g.dispatch=c,f.memoizedState=i,[a,c,!1]}function Zb(i){var a=un();return ex(a,At,i)}function ex(i,a,c){if(a=kp(i,a,Xb)[0],i=Ku(Ii)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=Pl(a)}catch(E){throw E===Ea?zu:E}else f=a;a=un();var g=a.queue,y=g.dispatch;return c!==a.memoizedState&&(rt.flags|=2048,ka(9,{destroy:void 0},uA.bind(null,g,c),null)),[f,y,i]}function uA(i,a){i.action=a}function tx(i){var a=un(),c=At;if(c!==null)return ex(a,c,i);un(),a=a.memoizedState,c=un();var f=c.queue.dispatch;return c.memoizedState=i,[a,f,!1]}function ka(i,a,c,f){return i={tag:i,create:c,deps:f,inst:a,next:null},a=rt.updateQueue,a===null&&(a=Fu(),rt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i),i}function nx(){return un().memoizedState}function Wu(i,a,c,f){var g=Jn();rt.flags|=i,g.memoizedState=ka(1|a,{destroy:void 0},c,f===void 0?null:f)}function Qu(i,a,c,f){var g=un();f=f===void 0?null:f;var y=g.memoizedState.inst;At!==null&&f!==null&&Sp(f,At.memoizedState.deps)?g.memoizedState=ka(a,y,c,f):(rt.flags|=i,g.memoizedState=ka(1|a,y,c,f))}function rx(i,a){Wu(8390656,8,i,a)}function Dp(i,a){Qu(2048,8,i,a)}function dA(i){rt.flags|=4;var a=rt.updateQueue;if(a===null)a=Fu(),rt.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function ix(i){var a=un().memoizedState;return dA({ref:a,nextImpl:i}),function(){if((vt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function sx(i,a){return Qu(4,2,i,a)}function ox(i,a){return Qu(4,4,i,a)}function ax(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function lx(i,a,c){c=c!=null?c.concat([i]):null,Qu(4,4,ax.bind(null,a,i),c)}function _p(){}function cx(i,a){var c=un();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Sp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function ux(i,a){var c=un();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Sp(a,f[1]))return f[0];if(f=i(),Co){Ne(!0);try{i()}finally{Ne(!1)}}return c.memoizedState=[f,a],f}function jp(i,a,c){return c===void 0||(zi&1073741824)!==0&&(ft&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=dv(),rt.lanes|=i,Ts|=i,c)}function dx(i,a,c,f){return vr(c,a)?c:Na.current!==null?(i=jp(i,c,f),vr(i,a)||(yn=!0),i):(zi&42)===0||(zi&1073741824)!==0&&(ft&261930)===0?(yn=!0,i.memoizedState=c):(i=dv(),rt.lanes|=i,Ts|=i,a)}function fx(i,a,c,f,g){var y=D.p;D.p=y!==0&&8>y?y:8;var E=z.T,A={};z.T=A,zp(i,!1,a,c);try{var _=g(),F=z.S;if(F!==null&&F(A,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var Z=oA(_,f);ql(i,a,Z,Tr(i))}else ql(i,a,f,Tr(i))}catch(ne){ql(i,a,{then:function(){},status:"rejected",reason:ne},Tr())}finally{D.p=y,E!==null&&A.types!==null&&(E.types=A.types),z.T=E}}function fA(){}function Lp(i,a,c,f){if(i.tag!==5)throw Error(r(476));var g=hx(i).queue;fx(i,g,a,$,c===null?fA:function(){return px(i),c(f)})}function hx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:$},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function px(i){var a=hx(i);a.next===null&&(a=i.alternate.memoizedState),ql(i,a.next.queue,{},Tr())}function Bp(){return Bn(oc)}function mx(){return un().memoizedState}function gx(){return un().memoizedState}function hA(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Tr();i=vs(c);var f=ws(a,i,c);f!==null&&(cr(f,a,c),Il(f,a,c)),a={cache:dp()},i.payload=a;return}a=a.return}}function pA(i,a,c){var f=Tr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Yu(i)?bx(a,c):(c=ep(i,a,c,f),c!==null&&(cr(c,i,f),xx(c,a,f)))}function yx(i,a,c){var f=Tr();ql(i,a,c,f)}function ql(i,a,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Yu(i))bx(a,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,A=y(E,c);if(g.hasEagerState=!0,g.eagerState=A,vr(A,E))return Ou(i,a,g,0),Dt===null&&Mu(),!1}catch{}finally{}if(c=ep(i,a,g,f),c!==null)return cr(c,i,f),xx(c,a,f),!0}return!1}function zp(i,a,c,f){if(f={lane:2,revertLane:mm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Yu(i)){if(a)throw Error(r(479))}else a=ep(i,c,f,2),a!==null&&cr(a,i,2)}function Yu(i){var a=i.alternate;return i===rt||a!==null&&a===rt}function bx(i,a){Ta=qu=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function xx(i,a,c){if((c&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,_e(i,c)}}var Vl={readContext:Bn,use:Gu,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};Vl.useEffectEvent=tn;var vx={readContext:Bn,use:Gu,useCallback:function(i,a){return Jn().memoizedState=[i,a===void 0?null:a],i},useContext:Bn,useEffect:rx,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,Wu(4194308,4,ax.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Wu(4194308,4,i,a)},useInsertionEffect:function(i,a){Wu(4,2,i,a)},useMemo:function(i,a){var c=Jn();a=a===void 0?null:a;var f=i();if(Co){Ne(!0);try{i()}finally{Ne(!1)}}return c.memoizedState=[f,a],f},useReducer:function(i,a,c){var f=Jn();if(c!==void 0){var g=c(a);if(Co){Ne(!0);try{c(a)}finally{Ne(!1)}}}else g=a;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=pA.bind(null,rt,i),[f.memoizedState,i]},useRef:function(i){var a=Jn();return i={current:i},a.memoizedState=i},useState:function(i){i=Op(i);var a=i.queue,c=yx.bind(null,rt,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:_p,useDeferredValue:function(i,a){var c=Jn();return jp(c,i,a)},useTransition:function(){var i=Op(!1);return i=fx.bind(null,rt,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var f=rt,g=Jn();if(mt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Dt===null)throw Error(r(349));(ft&127)!==0||$b(f,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,rx(qb.bind(null,f,y,i),[i]),f.flags|=2048,ka(9,{destroy:void 0},Pb.bind(null,f,y,c,a),null),c},useId:function(){var i=Jn(),a=Dt.identifierPrefix;if(mt){var c=ui,f=ci;c=(f&~(1<<32-ke(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Vu++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=aA++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Bp,useFormState:Jb,useActionState:Jb,useOptimistic:function(i){var a=Jn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=zp.bind(null,rt,!0,c),c.dispatch=a,[i,a]},useMemoCache:Ap,useCacheRefresh:function(){return Jn().memoizedState=hA.bind(null,rt)},useEffectEvent:function(i){var a=Jn(),c={impl:i};return a.memoizedState=c,function(){if((vt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Ip={readContext:Bn,use:Gu,useCallback:cx,useContext:Bn,useEffect:Dp,useImperativeHandle:lx,useInsertionEffect:sx,useLayoutEffect:ox,useMemo:ux,useReducer:Ku,useRef:nx,useState:function(){return Ku(Ii)},useDebugValue:_p,useDeferredValue:function(i,a){var c=un();return dx(c,At.memoizedState,i,a)},useTransition:function(){var i=Ku(Ii)[0],a=un().memoizedState;return[typeof i=="boolean"?i:Pl(i),a]},useSyncExternalStore:Ub,useId:mx,useHostTransitionStatus:Bp,useFormState:Zb,useActionState:Zb,useOptimistic:function(i,a){var c=un();return Gb(c,At,i,a)},useMemoCache:Ap,useCacheRefresh:gx};Ip.useEffectEvent=ix;var wx={readContext:Bn,use:Gu,useCallback:cx,useContext:Bn,useEffect:Dp,useImperativeHandle:lx,useInsertionEffect:sx,useLayoutEffect:ox,useMemo:ux,useReducer:Mp,useRef:nx,useState:function(){return Mp(Ii)},useDebugValue:_p,useDeferredValue:function(i,a){var c=un();return At===null?jp(c,i,a):dx(c,At.memoizedState,i,a)},useTransition:function(){var i=Mp(Ii)[0],a=un().memoizedState;return[typeof i=="boolean"?i:Pl(i),a]},useSyncExternalStore:Ub,useId:mx,useHostTransitionStatus:Bp,useFormState:tx,useActionState:tx,useOptimistic:function(i,a){var c=un();return At!==null?Gb(c,At,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ap,useCacheRefresh:gx};wx.useEffectEvent=ix;function Hp(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Up={enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Tr(),g=vs(f);g.payload=a,c!=null&&(g.callback=c),a=ws(i,g,f),a!==null&&(cr(a,i,f),Il(a,i,f))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Tr(),g=vs(f);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=ws(i,g,f),a!==null&&(cr(a,i,f),Il(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Tr(),f=vs(c);f.tag=2,a!=null&&(f.callback=a),a=ws(i,f,c),a!==null&&(cr(a,i,c),Il(a,i,c))}};function Sx(i,a,c,f,g,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,E):a.prototype&&a.prototype.isPureReactComponent?!Ol(c,f)||!Ol(g,y):!0}function Ex(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Up.enqueueReplaceState(a,a.state,null)}function No(i,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Cx(i){ku(i)}function Nx(i){console.error(i)}function Tx(i){ku(i)}function Xu(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Ax(i,a,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function $p(i,a,c){return c=vs(c),c.tag=3,c.payload={element:null},c.callback=function(){Xu(i,a)},c}function kx(i){return i=vs(i),i.tag=3,i}function Mx(i,a,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;i.payload=function(){return g(y)},i.callback=function(){Ax(a,c,f)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Ax(a,c,f),typeof g!="function"&&(As===null?As=new Set([this]):As.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function mA(i,a,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&va(a,c,g,!0),c=Sr.current,c!==null){switch(c.tag){case 31:case 13:return Ir===null?cd():c.alternate===null&&nn===0&&(nn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===Iu?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),fm(i,f,g)),!1;case 22:return c.flags|=65536,f===Iu?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),fm(i,f,g)),!1}throw Error(r(435,c.tag))}return fm(i,f,g),cd(),!1}if(mt)return a=Sr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,f!==op&&(i=Error(r(422),{cause:f}),_l(jr(i,c)))):(f!==op&&(a=Error(r(423),{cause:f}),_l(jr(a,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=jr(f,c),g=$p(i.stateNode,f,g),yp(i,g),nn!==4&&(nn=2)),!1;var y=Error(r(520),{cause:f});if(y=jr(y,c),Jl===null?Jl=[y]:Jl.push(y),nn!==4&&(nn=2),a===null)return!0;f=jr(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=$p(c.stateNode,f,i),yp(c,i),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(As===null||!As.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=kx(g),Mx(g,i,c,f),yp(c,g),!1}c=c.return}while(c!==null);return!1}var Pp=Error(r(461)),yn=!1;function zn(i,a,c,f){a.child=i===null?_b(a,null,c,f):Eo(a,i.child,c,f)}function Ox(i,a,c,f,g){c=c.render;var y=a.ref;if("ref"in f){var E={};for(var A in f)A!=="ref"&&(E[A]=f[A])}else E=f;return xo(a),f=Ep(i,a,c,E,y,g),A=Cp(),i!==null&&!yn?(Np(i,a,g),Hi(i,a,g)):(mt&&A&&ip(a),a.flags|=1,zn(i,a,f,g),a.child)}function Rx(i,a,c,f,g){if(i===null){var y=c.type;return typeof y=="function"&&!tp(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,Dx(i,a,y,f,g)):(i=Du(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Yp(i,g)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Ol,c(E,f)&&i.ref===a.ref)return Hi(i,a,g)}return a.flags|=1,i=_i(y,f),i.ref=a.ref,i.return=a,a.child=i}function Dx(i,a,c,f,g){if(i!==null){var y=i.memoizedProps;if(Ol(y,f)&&i.ref===a.ref)if(yn=!1,a.pendingProps=f=y,Yp(i,g))(i.flags&131072)!==0&&(yn=!0);else return a.lanes=i.lanes,Hi(i,a,g)}return qp(i,a,c,f,g)}function _x(i,a,c,f){var g=f.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,i!==null){for(f=a.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~y}else f=0,a.child=null;return jx(i,a,y,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(a,y!==null?y.cachePool:null),y!==null?Bb(a,y):xp(),zb(a);else return f=a.lanes=536870912,jx(i,a,y!==null?y.baseLanes|c:c,c,f)}else y!==null?(Bu(a,y.cachePool),Bb(a,y),Es(),a.memoizedState=null):(i!==null&&Bu(a,null),xp(),Es());return zn(i,a,g,c),a.child}function Fl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function jx(i,a,c,f,g){var y=hp();return y=y===null?null:{parent:mn._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},i!==null&&Bu(a,null),xp(),zb(a),i!==null&&va(i,a,f,!0),a.childLanes=g,null}function Ju(i,a){return a=ed({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Lx(i,a,c){return Eo(a,i.child,null,c),i=Ju(a,a.pendingProps),i.flags|=2,Er(a),a.memoizedState=null,i}function gA(i,a,c){var f=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(mt){if(f.mode==="hidden")return i=Ju(a,f),a.lanes=536870912,Fl(null,i);if(wp(a),(i=qt)?(i=Kv(i,zr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ms!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},c=bb(i),c.return=a,a.child=c,Ln=a,qt=null)):i=null,i===null)throw ys(a);return a.lanes=536870912,null}return Ju(a,f)}var y=i.memoizedState;if(y!==null){var E=y.dehydrated;if(wp(a),g)if(a.flags&256)a.flags&=-257,a=Lx(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(yn||va(i,a,c,!1),g=(c&i.childLanes)!==0,yn||g){if(f=Dt,f!==null&&(E=yt(f,c),E!==0&&E!==y.retryLane))throw y.retryLane=E,mo(i,E),cr(f,i,E),Pp;cd(),a=Lx(i,a,c)}else i=y.treeContext,qt=Hr(E.nextSibling),Ln=a,mt=!0,gs=null,zr=!1,i!==null&&wb(a,i),a=Ju(a,f),a.flags|=4096;return a}return i=_i(i.child,{mode:f.mode,children:f.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Zu(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function qp(i,a,c,f,g){return xo(a),c=Ep(i,a,c,f,void 0,g),f=Cp(),i!==null&&!yn?(Np(i,a,g),Hi(i,a,g)):(mt&&f&&ip(a),a.flags|=1,zn(i,a,c,g),a.child)}function Bx(i,a,c,f,g,y){return xo(a),a.updateQueue=null,c=Hb(a,f,c,g),Ib(i),f=Cp(),i!==null&&!yn?(Np(i,a,y),Hi(i,a,y)):(mt&&f&&ip(a),a.flags|=1,zn(i,a,c,y),a.child)}function zx(i,a,c,f,g){if(xo(a),a.stateNode===null){var y=ga,E=c.contextType;typeof E=="object"&&E!==null&&(y=Bn(E)),y=new c(f,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Up,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=f,y.state=a.memoizedState,y.refs={},mp(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?Bn(E):ga,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Hp(a,c,E,f),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Up.enqueueReplaceState(y,y.state,null),Ul(a,f,y,g),Hl(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){y=a.stateNode;var A=a.memoizedProps,_=No(c,A);y.props=_;var F=y.context,Z=c.contextType;E=ga,typeof Z=="object"&&Z!==null&&(E=Bn(Z));var ne=c.getDerivedStateFromProps;Z=typeof ne=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,Z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||F!==E)&&Ex(a,y,f,E),xs=!1;var G=a.memoizedState;y.state=G,Ul(a,f,y,g),Hl(),F=a.memoizedState,A||G!==F||xs?(typeof ne=="function"&&(Hp(a,c,ne,f),F=a.memoizedState),(_=xs||Sx(a,c,_,f,G,F,E))?(Z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),y.props=f,y.state=F,y.context=E,f=_):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{y=a.stateNode,gp(i,a),E=a.memoizedProps,Z=No(c,E),y.props=Z,ne=a.pendingProps,G=y.context,F=c.contextType,_=ga,typeof F=="object"&&F!==null&&(_=Bn(F)),A=c.getDerivedStateFromProps,(F=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==ne||G!==_)&&Ex(a,y,f,_),xs=!1,G=a.memoizedState,y.state=G,Ul(a,f,y,g),Hl();var X=a.memoizedState;E!==ne||G!==X||xs||i!==null&&i.dependencies!==null&&ju(i.dependencies)?(typeof A=="function"&&(Hp(a,c,A,f),X=a.memoizedState),(Z=xs||Sx(a,c,Z,f,G,X,_)||i!==null&&i.dependencies!==null&&ju(i.dependencies))?(F||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,X,_),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,X,_)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=X),y.props=f,y.state=X,y.context=_,f=Z):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),f=!1)}return y=f,Zu(i,a),f=(a.flags&128)!==0,y||f?(y=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&f?(a.child=Eo(a,i.child,null,g),a.child=Eo(a,null,c,g)):zn(i,a,c,g),a.memoizedState=y.state,i=a.child):i=Hi(i,a,g),i}function Ix(i,a,c,f){return yo(),a.flags|=256,zn(i,a,c,f),a.child}var Vp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fp(i){return{baseLanes:i,cachePool:Ab()}}function Gp(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Nr),i}function Hx(i,a,c){var f=a.pendingProps,g=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(cn.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(mt){if(g?Ss(a):Es(),(i=qt)?(i=Kv(i,zr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ms!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},c=bb(i),c.return=a,a.child=c,Ln=a,qt=null)):i=null,i===null)throw ys(a);return km(i)?a.lanes=32:a.lanes=536870912,null}var A=f.children;return f=f.fallback,g?(Es(),g=a.mode,A=ed({mode:"hidden",children:A},g),f=go(f,g,c,null),A.return=a,f.return=a,A.sibling=f,a.child=A,f=a.child,f.memoizedState=Fp(c),f.childLanes=Gp(i,E,c),a.memoizedState=Vp,Fl(null,f)):(Ss(a),Kp(a,A))}var _=i.memoizedState;if(_!==null&&(A=_.dehydrated,A!==null)){if(y)a.flags&256?(Ss(a),a.flags&=-257,a=Wp(i,a,c)):a.memoizedState!==null?(Es(),a.child=i.child,a.flags|=128,a=null):(Es(),A=f.fallback,g=a.mode,f=ed({mode:"visible",children:f.children},g),A=go(A,g,c,null),A.flags|=2,f.return=a,A.return=a,f.sibling=A,a.child=f,Eo(a,i.child,null,c),f=a.child,f.memoizedState=Fp(c),f.childLanes=Gp(i,E,c),a.memoizedState=Vp,a=Fl(null,f));else if(Ss(a),km(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,f=Error(r(419)),f.stack="",f.digest=E,_l({value:f,source:null,stack:null}),a=Wp(i,a,c)}else if(yn||va(i,a,c,!1),E=(c&i.childLanes)!==0,yn||E){if(E=Dt,E!==null&&(f=yt(E,c),f!==0&&f!==_.retryLane))throw _.retryLane=f,mo(i,f),cr(E,i,f),Pp;Am(A)||cd(),a=Wp(i,a,c)}else Am(A)?(a.flags|=192,a.child=i.child,a=null):(i=_.treeContext,qt=Hr(A.nextSibling),Ln=a,mt=!0,gs=null,zr=!1,i!==null&&wb(a,i),a=Kp(a,f.children),a.flags|=4096);return a}return g?(Es(),A=f.fallback,g=a.mode,_=i.child,F=_.sibling,f=_i(_,{mode:"hidden",children:f.children}),f.subtreeFlags=_.subtreeFlags&65011712,F!==null?A=_i(F,A):(A=go(A,g,c,null),A.flags|=2),A.return=a,f.return=a,f.sibling=A,a.child=f,Fl(null,f),f=a.child,A=i.child.memoizedState,A===null?A=Fp(c):(g=A.cachePool,g!==null?(_=mn._currentValue,g=g.parent!==_?{parent:_,pool:_}:g):g=Ab(),A={baseLanes:A.baseLanes|c,cachePool:g}),f.memoizedState=A,f.childLanes=Gp(i,E,c),a.memoizedState=Vp,Fl(i.child,f)):(Ss(a),c=i.child,i=c.sibling,c=_i(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=c,a.memoizedState=null,c)}function Kp(i,a){return a=ed({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function ed(i,a){return i=wr(22,i,null,a),i.lanes=0,i}function Wp(i,a,c){return Eo(a,i.child,null,c),i=Kp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ux(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),cp(i.return,a,c)}function Qp(i,a,c,f,g,y){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:y}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=c,E.tailMode=g,E.treeForkCount=y)}function $x(i,a,c){var f=a.pendingProps,g=f.revealOrder,y=f.tail;f=f.children;var E=cn.current,A=(E&2)!==0;if(A?(E=E&1|2,a.flags|=128):E&=1,W(cn,E),zn(i,a,f,c),f=mt?Dl:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ux(i,c,a);else if(i.tag===19)Ux(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&Pu(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Qp(a,!1,g,c,y,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Pu(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Qp(a,!0,c,null,y,f);break;case"together":Qp(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Hi(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Ts|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(va(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,c=_i(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=_i(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Yp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&ju(i)))}function yA(i,a,c){switch(a.tag){case 3:Re(a,a.stateNode.containerInfo),bs(a,mn,i.memoizedState.cache),yo();break;case 27:case 5:Je(a);break;case 4:Re(a,a.stateNode.containerInfo);break;case 10:bs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,wp(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Ss(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Hx(i,a,c):(Ss(a),i=Hi(i,a,c),i!==null?i.sibling:null);Ss(a);break;case 19:var g=(i.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(va(i,a,c,!1),f=(c&a.childLanes)!==0),g){if(f)return $x(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(cn,cn.current),f)break;return null;case 22:return a.lanes=0,_x(i,a,c,a.pendingProps);case 24:bs(a,mn,i.memoizedState.cache)}return Hi(i,a,c)}function Px(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)yn=!0;else{if(!Yp(i,c)&&(a.flags&128)===0)return yn=!1,yA(i,a,c);yn=(i.flags&131072)!==0}else yn=!1,mt&&(a.flags&1048576)!==0&&vb(a,Dl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(i=wo(a.elementType),a.type=i,typeof i=="function")tp(i)?(f=No(i,f),a.tag=1,a=zx(null,a,i,f,c)):(a.tag=0,a=qp(null,a,i,f,c));else{if(i!=null){var g=i.$$typeof;if(g===k){a.tag=11,a=Ox(null,a,i,f,c);break e}else if(g===U){a.tag=14,a=Rx(null,a,i,f,c);break e}}throw a=ve(i)||i,Error(r(306,a,""))}}return a;case 0:return qp(i,a,a.type,a.pendingProps,c);case 1:return f=a.type,g=No(f,a.pendingProps),zx(i,a,f,g,c);case 3:e:{if(Re(a,a.stateNode.containerInfo),i===null)throw Error(r(387));f=a.pendingProps;var y=a.memoizedState;g=y.element,gp(i,a),Ul(a,f,null,c);var E=a.memoizedState;if(f=E.cache,bs(a,mn,f),f!==y.cache&&up(a,[mn],c,!0),Hl(),f=E.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Ix(i,a,f,c);break e}else if(f!==g){g=jr(Error(r(424)),a),_l(g),a=Ix(i,a,f,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(qt=Hr(i.firstChild),Ln=a,mt=!0,gs=null,zr=!0,c=_b(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(yo(),f===g){a=Hi(i,a,c);break e}zn(i,a,f,c)}a=a.child}return a;case 26:return Zu(i,a),i===null?(c=Zv(a.type,null,a.pendingProps,null))?a.memoizedState=c:mt||(c=a.type,i=a.pendingProps,f=gd(we.current).createElement(c),f[an]=a,f[qn]=i,In(f,c,i),hn(f),a.stateNode=f):a.memoizedState=Zv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Je(a),i===null&&mt&&(f=a.stateNode=Yv(a.type,a.pendingProps,we.current),Ln=a,zr=!0,g=qt,Rs(a.type)?(Mm=g,qt=Hr(f.firstChild)):qt=g),zn(i,a,a.pendingProps.children,c),Zu(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&mt&&((g=f=qt)&&(f=KA(f,a.type,a.pendingProps,zr),f!==null?(a.stateNode=f,Ln=a,qt=Hr(f.firstChild),zr=!1,g=!0):g=!1),g||ys(a)),Je(a),g=a.type,y=a.pendingProps,E=i!==null?i.memoizedProps:null,f=y.children,Cm(g,y)?f=null:E!==null&&Cm(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Ep(i,a,lA,null,null,c),oc._currentValue=g),Zu(i,a),zn(i,a,f,c),a.child;case 6:return i===null&&mt&&((i=c=qt)&&(c=WA(c,a.pendingProps,zr),c!==null?(a.stateNode=c,Ln=a,qt=null,i=!0):i=!1),i||ys(a)),null;case 13:return Hx(i,a,c);case 4:return Re(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Eo(a,null,f,c):zn(i,a,f,c),a.child;case 11:return Ox(i,a,a.type,a.pendingProps,c);case 7:return zn(i,a,a.pendingProps,c),a.child;case 8:return zn(i,a,a.pendingProps.children,c),a.child;case 12:return zn(i,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,bs(a,a.type,f.value),zn(i,a,f.children,c),a.child;case 9:return g=a.type._context,f=a.pendingProps.children,xo(a),g=Bn(g),f=f(g),a.flags|=1,zn(i,a,f,c),a.child;case 14:return Rx(i,a,a.type,a.pendingProps,c);case 15:return Dx(i,a,a.type,a.pendingProps,c);case 19:return $x(i,a,c);case 31:return gA(i,a,c);case 22:return _x(i,a,c,a.pendingProps);case 24:return xo(a),f=Bn(mn),i===null?(g=hp(),g===null&&(g=Dt,y=dp(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:f,cache:g},mp(a),bs(a,mn,g)):((i.lanes&c)!==0&&(gp(i,a),Ul(a,null,null,c),Hl()),g=i.memoizedState,y=a.memoizedState,g.parent!==f?(g={parent:f,cache:f},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),bs(a,mn,f)):(f=y.cache,bs(a,mn,f),f!==g.cache&&up(a,[mn],c,!0))),zn(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ui(i){i.flags|=4}function Xp(i,a,c,f,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(mv())i.flags|=8192;else throw So=Iu,pp}else i.flags&=-16777217}function qx(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!i1(a))if(mv())i.flags|=8192;else throw So=Iu,pp}function td(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?De():536870912,i.lanes|=a,Da|=a)}function Gl(i,a){if(!mt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Vt(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function bA(i,a,c){var f=a.pendingProps;switch(sp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return Vt(a),null;case 3:return c=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Bi(mn),de(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(xa(a)?Ui(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ap())),Vt(a),null;case 26:var g=a.type,y=a.memoizedState;return i===null?(Ui(a),y!==null?(Vt(a),qx(a,y)):(Vt(a),Xp(a,g,null,f,c))):y?y!==i.memoizedState?(Ui(a),Vt(a),qx(a,y)):(Vt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==f&&Ui(a),Vt(a),Xp(a,g,i,f,c)),null;case 27:if(ye(a),c=we.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ui(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Vt(a),null}i=ie.current,xa(a)?Sb(a):(i=Yv(g,f,c),a.stateNode=i,Ui(a))}return Vt(a),null;case 5:if(ye(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ui(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Vt(a),null}if(y=ie.current,xa(a))Sb(a);else{var E=gd(we.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?y.multiple=!0:f.size&&(y.size=f.size);break;default:y=typeof f.is=="string"?E.createElement(g,{is:f.is}):E.createElement(g)}}y[an]=a,y[qn]=f;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=y;e:switch(In(y,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ui(a)}}return Vt(a),Xp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Ui(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(i=we.current,xa(a)){if(i=a.stateNode,c=a.memoizedProps,f=null,g=Ln,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[an]=a,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Hv(i.nodeValue,c)),i||ys(a,!0)}else i=gd(i).createTextNode(f),i[an]=a,a.stateNode=i}return Vt(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(f=xa(a),c!==null){if(i===null){if(!f)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[an]=a}else yo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),i=!1}else c=ap(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(Er(a),a):(Er(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Vt(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=xa(a),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[an]=a}else yo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),g=!1}else g=ap(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Er(a),a):(Er(a),null)}return Er(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=a.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),td(a,a.updateQueue),Vt(a),null);case 4:return de(),i===null&&xm(a.stateNode.containerInfo),Vt(a),null;case 10:return Bi(a.type),Vt(a),null;case 19:if(q(cn),f=a.memoizedState,f===null)return Vt(a),null;if(g=(a.flags&128)!==0,y=f.rendering,y===null)if(g)Gl(f,!1);else{if(nn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=Pu(i),y!==null){for(a.flags|=128,Gl(f,!1),i=y.updateQueue,a.updateQueue=i,td(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)yb(c,i),c=c.sibling;return W(cn,cn.current&1|2),mt&&ji(a,f.treeForkCount),a.child}i=i.sibling}f.tail!==null&&nt()>od&&(a.flags|=128,g=!0,Gl(f,!1),a.lanes=4194304)}else{if(!g)if(i=Pu(y),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,td(a,i),Gl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!mt)return Vt(a),null}else 2*nt()-f.renderingStartTime>od&&c!==536870912&&(a.flags|=128,g=!0,Gl(f,!1),a.lanes=4194304);f.isBackwards?(y.sibling=a.child,a.child=y):(i=f.last,i!==null?i.sibling=y:a.child=y,f.last=y)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=nt(),i.sibling=null,c=cn.current,W(cn,g?c&1|2:c&1),mt&&ji(a,f.treeForkCount),i):(Vt(a),null);case 22:case 23:return Er(a),vp(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),c=a.updateQueue,c!==null&&td(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),i!==null&&q(vo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Bi(mn),Vt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function xA(i,a){switch(sp(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Bi(mn),de(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ye(a),null;case 31:if(a.memoizedState!==null){if(Er(a),a.alternate===null)throw Error(r(340));yo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Er(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));yo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return q(cn),null;case 4:return de(),null;case 10:return Bi(a.type),null;case 22:case 23:return Er(a),vp(),i!==null&&q(vo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Bi(mn),null;case 25:return null;default:return null}}function Vx(i,a){switch(sp(a),a.tag){case 3:Bi(mn),de();break;case 26:case 27:case 5:ye(a);break;case 4:de();break;case 31:a.memoizedState!==null&&Er(a);break;case 13:Er(a);break;case 19:q(cn);break;case 10:Bi(a.type);break;case 22:case 23:Er(a),vp(),i!==null&&q(vo);break;case 24:Bi(mn)}}function Kl(i,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var y=c.create,E=c.inst;f=y(),E.destroy=f}c=c.next}while(c!==g)}}catch(A){Tt(a,a.return,A)}}function Cs(i,a,c){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&i)===i){var E=f.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,g=a;var _=c,F=A;try{F()}catch(Z){Tt(g,_,Z)}}}f=f.next}while(f!==y)}}catch(Z){Tt(a,a.return,Z)}}function Fx(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{Lb(a,c)}catch(f){Tt(i,i.return,f)}}}function Gx(i,a,c){c.props=No(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){Tt(i,a,f)}}function Wl(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){Tt(i,a,g)}}function di(i,a){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){Tt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Tt(i,a,g)}else c.current=null}function Kx(i){var a=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){Tt(i,i.return,g)}}function Jp(i,a,c){try{var f=i.stateNode;$A(f,i.type,c,a),f[qn]=a}catch(g){Tt(i,i.return,g)}}function Wx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Rs(i.type)||i.tag===4}function Zp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Rs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function em(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=xe));else if(f!==4&&(f===27&&Rs(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(em(i,a,c),i=i.sibling;i!==null;)em(i,a,c),i=i.sibling}function nd(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(f===27&&Rs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(nd(i,a,c),i=i.sibling;i!==null;)nd(i,a,c),i=i.sibling}function Qx(i){var a=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);In(a,f,c),a[an]=i,a[qn]=c}catch(y){Tt(i,i.return,y)}}var $i=!1,bn=!1,tm=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function vA(i,a){if(i=i.containerInfo,Sm=Ed,i=lb(i),Wh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,A=-1,_=-1,F=0,Z=0,ne=i,G=null;t:for(;;){for(var X;ne!==c||g!==0&&ne.nodeType!==3||(A=E+g),ne!==y||f!==0&&ne.nodeType!==3||(_=E+f),ne.nodeType===3&&(E+=ne.nodeValue.length),(X=ne.firstChild)!==null;)G=ne,ne=X;for(;;){if(ne===i)break t;if(G===c&&++F===g&&(A=E),G===y&&++Z===f&&(_=E),(X=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=X}c=A===-1||_===-1?null:{start:A,end:_}}else c=null}c=c||{start:0,end:0}}else c=null;for(Em={focusedElem:i,selectionRange:c},Ed=!1,Nn=a;Nn!==null;)if(a=Nn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Nn=i;else for(;Nn!==null;){switch(a=Nn,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var Me=No(c.type,g);i=f.getSnapshotBeforeUpdate(Me,y),f.__reactInternalSnapshotBeforeUpdate=i}catch(Ve){Tt(c,c.return,Ve)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)Tm(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Tm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Nn=i;break}Nn=a.return}}function Xx(i,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:qi(i,c),f&4&&Kl(5,c);break;case 1:if(qi(i,c),f&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(E){Tt(c,c.return,E)}else{var g=No(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){Tt(c,c.return,E)}}f&64&&Fx(c),f&512&&Wl(c,c.return);break;case 3:if(qi(i,c),f&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Lb(i,a)}catch(E){Tt(c,c.return,E)}}break;case 27:a===null&&f&4&&Qx(c);case 26:case 5:qi(i,c),a===null&&f&4&&Kx(c),f&512&&Wl(c,c.return);break;case 12:qi(i,c);break;case 31:qi(i,c),f&4&&ev(i,c);break;case 13:qi(i,c),f&4&&tv(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=MA.bind(null,c),QA(i,c))));break;case 22:if(f=c.memoizedState!==null||$i,!f){a=a!==null&&a.memoizedState!==null||bn,g=$i;var y=bn;$i=f,(bn=a)&&!y?Vi(i,c,(c.subtreeFlags&8772)!==0):qi(i,c),$i=g,bn=y}break;case 30:break;default:qi(i,c)}}function Jx(i){var a=i.alternate;a!==null&&(i.alternate=null,Jx(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&bl(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Kt=null,sr=!1;function Pi(i,a,c){for(c=c.child;c!==null;)Zx(i,a,c),c=c.sibling}function Zx(i,a,c){if(Y&&typeof Y.onCommitFiberUnmount=="function")try{Y.onCommitFiberUnmount(gr,c)}catch{}switch(c.tag){case 26:bn||di(c,a),Pi(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:bn||di(c,a);var f=Kt,g=sr;Rs(c.type)&&(Kt=c.stateNode,sr=!1),Pi(i,a,c),rc(c.stateNode),Kt=f,sr=g;break;case 5:bn||di(c,a);case 6:if(f=Kt,g=sr,Kt=null,Pi(i,a,c),Kt=f,sr=g,Kt!==null)if(sr)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(c.stateNode)}catch(y){Tt(c,a,y)}else try{Kt.removeChild(c.stateNode)}catch(y){Tt(c,a,y)}break;case 18:Kt!==null&&(sr?(i=Kt,Fv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ua(i)):Fv(Kt,c.stateNode));break;case 4:f=Kt,g=sr,Kt=c.stateNode.containerInfo,sr=!0,Pi(i,a,c),Kt=f,sr=g;break;case 0:case 11:case 14:case 15:Cs(2,c,a),bn||Cs(4,c,a),Pi(i,a,c);break;case 1:bn||(di(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Gx(c,a,f)),Pi(i,a,c);break;case 21:Pi(i,a,c);break;case 22:bn=(f=bn)||c.memoizedState!==null,Pi(i,a,c),bn=f;break;default:Pi(i,a,c)}}function ev(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ua(i)}catch(c){Tt(a,a.return,c)}}}function tv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ua(i)}catch(c){Tt(a,a.return,c)}}function wA(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Yx),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Yx),a;default:throw Error(r(435,i.tag))}}function rd(i,a){var c=wA(i);a.forEach(function(f){if(!c.has(f)){c.add(f);var g=OA.bind(null,i,f);f.then(g,g)}})}function or(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],y=i,E=a,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Rs(A.type)){Kt=A.stateNode,sr=!1;break e}break;case 5:Kt=A.stateNode,sr=!1;break e;case 3:case 4:Kt=A.stateNode.containerInfo,sr=!0;break e}A=A.return}if(Kt===null)throw Error(r(160));Zx(y,E,g),Kt=null,sr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)nv(a,i),a=a.sibling}var ei=null;function nv(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(a,i),ar(i),f&4&&(Cs(3,i,i.return),Kl(3,i),Cs(5,i,i.return));break;case 1:or(a,i),ar(i),f&512&&(bn||c===null||di(c,c.return)),f&64&&$i&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=ei;if(or(a,i),ar(i),f&512&&(bn||c===null||di(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[lo]||y[an]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),In(y,f,c),y[an]=i,hn(y),f=y;break e;case"link":var E=n1("link","href",g).get(f+(c.href||""));if(E){for(var A=0;A<E.length;A++)if(y=E[A],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(A,1);break t}}y=g.createElement(f),In(y,f,c),g.head.appendChild(y);break;case"meta":if(E=n1("meta","content",g).get(f+(c.content||""))){for(A=0;A<E.length;A++)if(y=E[A],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(A,1);break t}}y=g.createElement(f),In(y,f,c),g.head.appendChild(y);break;default:throw Error(r(468,f))}y[an]=i,hn(y),f=y}i.stateNode=f}else r1(g,i.type,i.stateNode);else i.stateNode=t1(g,f,i.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?r1(g,i.type,i.stateNode):t1(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Jp(i,i.memoizedProps,c.memoizedProps)}break;case 27:or(a,i),ar(i),f&512&&(bn||c===null||di(c,c.return)),c!==null&&f&4&&Jp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(or(a,i),ar(i),f&512&&(bn||c===null||di(c,c.return)),i.flags&32){g=i.stateNode;try{Ke(g,"")}catch(Me){Tt(i,i.return,Me)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,Jp(i,g,c!==null?c.memoizedProps:g)),f&1024&&(tm=!0);break;case 6:if(or(a,i),ar(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Me){Tt(i,i.return,Me)}}break;case 3:if(xd=null,g=ei,ei=yd(a.containerInfo),or(a,i),ei=g,ar(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ua(a.containerInfo)}catch(Me){Tt(i,i.return,Me)}tm&&(tm=!1,rv(i));break;case 4:f=ei,ei=yd(i.stateNode.containerInfo),or(a,i),ar(i),ei=f;break;case 12:or(a,i),ar(i);break;case 31:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 13:or(a,i),ar(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(sd=nt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 22:g=i.memoizedState!==null;var _=c!==null&&c.memoizedState!==null,F=$i,Z=bn;if($i=F||g,bn=Z||_,or(a,i),bn=Z,$i=F,ar(i),f&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||_||$i||bn||To(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){_=c=a;try{if(y=_.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=_.stateNode;var ne=_.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Me){Tt(_,_.return,Me)}}}else if(a.tag===6){if(c===null){_=a;try{_.stateNode.nodeValue=g?"":_.memoizedProps}catch(Me){Tt(_,_.return,Me)}}}else if(a.tag===18){if(c===null){_=a;try{var X=_.stateNode;g?Gv(X,!0):Gv(_.stateNode,!1)}catch(Me){Tt(_,_.return,Me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,rd(i,c))));break;case 19:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 30:break;case 21:break;default:or(a,i),ar(i)}}function ar(i){var a=i.flags;if(a&2){try{for(var c,f=i.return;f!==null;){if(Wx(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,y=Zp(i);nd(i,y,g);break;case 5:var E=c.stateNode;c.flags&32&&(Ke(E,""),c.flags&=-33);var A=Zp(i);nd(i,A,E);break;case 3:case 4:var _=c.stateNode.containerInfo,F=Zp(i);em(i,F,_);break;default:throw Error(r(161))}}catch(Z){Tt(i,i.return,Z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;rv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function qi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xx(i,a.alternate,a),a=a.sibling}function To(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Cs(4,a,a.return),To(a);break;case 1:di(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Gx(a,a.return,c),To(a);break;case 27:rc(a.stateNode);case 26:case 5:di(a,a.return),To(a);break;case 22:a.memoizedState===null&&To(a);break;case 30:To(a);break;default:To(a)}i=i.sibling}}function Vi(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,g=i,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:Vi(g,y,c),Kl(4,y);break;case 1:if(Vi(g,y,c),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){Tt(f,f.return,F)}if(f=y,g=f.updateQueue,g!==null){var A=f.stateNode;try{var _=g.shared.hiddenCallbacks;if(_!==null)for(g.shared.hiddenCallbacks=null,g=0;g<_.length;g++)jb(_[g],A)}catch(F){Tt(f,f.return,F)}}c&&E&64&&Fx(y),Wl(y,y.return);break;case 27:Qx(y);case 26:case 5:Vi(g,y,c),c&&f===null&&E&4&&Kx(y),Wl(y,y.return);break;case 12:Vi(g,y,c);break;case 31:Vi(g,y,c),c&&E&4&&ev(g,y);break;case 13:Vi(g,y,c),c&&E&4&&tv(g,y);break;case 22:y.memoizedState===null&&Vi(g,y,c),Wl(y,y.return);break;case 30:break;default:Vi(g,y,c)}a=a.sibling}}function nm(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&jl(c))}function rm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&jl(i))}function ti(i,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)iv(i,a,c,f),a=a.sibling}function iv(i,a,c,f){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ti(i,a,c,f),g&2048&&Kl(9,a);break;case 1:ti(i,a,c,f);break;case 3:ti(i,a,c,f),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&jl(i)));break;case 12:if(g&2048){ti(i,a,c,f),i=a.stateNode;try{var y=a.memoizedProps,E=y.id,A=y.onPostCommit;typeof A=="function"&&A(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(_){Tt(a,a.return,_)}}else ti(i,a,c,f);break;case 31:ti(i,a,c,f);break;case 13:ti(i,a,c,f);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?ti(i,a,c,f):Ql(i,a):y._visibility&2?ti(i,a,c,f):(y._visibility|=2,Ma(i,a,c,f,(a.subtreeFlags&10256)!==0||!1)),g&2048&&nm(E,a);break;case 24:ti(i,a,c,f),g&2048&&rm(a.alternate,a);break;default:ti(i,a,c,f)}}function Ma(i,a,c,f,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,E=a,A=c,_=f,F=E.flags;switch(E.tag){case 0:case 11:case 15:Ma(y,E,A,_,g),Kl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Ma(y,E,A,_,g):Ql(y,E):(Z._visibility|=2,Ma(y,E,A,_,g)),g&&F&2048&&nm(E.alternate,E);break;case 24:Ma(y,E,A,_,g),g&&F&2048&&rm(E.alternate,E);break;default:Ma(y,E,A,_,g)}a=a.sibling}}function Ql(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,f=a,g=f.flags;switch(f.tag){case 22:Ql(c,f),g&2048&&nm(f.alternate,f);break;case 24:Ql(c,f),g&2048&&rm(f.alternate,f);break;default:Ql(c,f)}a=a.sibling}}var Yl=8192;function Oa(i,a,c){if(i.subtreeFlags&Yl)for(i=i.child;i!==null;)sv(i,a,c),i=i.sibling}function sv(i,a,c){switch(i.tag){case 26:Oa(i,a,c),i.flags&Yl&&i.memoizedState!==null&&ak(c,ei,i.memoizedState,i.memoizedProps);break;case 5:Oa(i,a,c);break;case 3:case 4:var f=ei;ei=yd(i.stateNode.containerInfo),Oa(i,a,c),ei=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Yl,Yl=16777216,Oa(i,a,c),Yl=f):Oa(i,a,c));break;default:Oa(i,a,c)}}function ov(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Xl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Nn=f,lv(f,i)}ov(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)av(i),i=i.sibling}function av(i){switch(i.tag){case 0:case 11:case 15:Xl(i),i.flags&2048&&Cs(9,i,i.return);break;case 3:Xl(i);break;case 12:Xl(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,id(i)):Xl(i);break;default:Xl(i)}}function id(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Nn=f,lv(f,i)}ov(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Cs(8,a,a.return),id(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,id(a));break;default:id(a)}i=i.sibling}}function lv(i,a){for(;Nn!==null;){var c=Nn;switch(c.tag){case 0:case 11:case 15:Cs(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:jl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Nn=f;else e:for(c=i;Nn!==null;){f=Nn;var g=f.sibling,y=f.return;if(Jx(f),f===c){Nn=null;break e}if(g!==null){g.return=y,Nn=g;break e}Nn=y}}}var SA={getCacheForType:function(i){var a=Bn(mn),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Bn(mn).controller.signal}},EA=typeof WeakMap=="function"?WeakMap:Map,vt=0,Dt=null,ct=null,ft=0,Nt=0,Cr=null,Ns=!1,Ra=!1,im=!1,Fi=0,nn=0,Ts=0,Ao=0,sm=0,Nr=0,Da=0,Jl=null,lr=null,om=!1,sd=0,cv=0,od=1/0,ad=null,As=null,Sn=0,ks=null,_a=null,Gi=0,am=0,lm=null,uv=null,Zl=0,cm=null;function Tr(){return(vt&2)!==0&&ft!==0?ft&-ft:z.T!==null?mm():ao()}function dv(){if(Nr===0)if((ft&536870912)===0||mt){var i=Yn;Yn<<=1,(Yn&3932160)===0&&(Yn=262144),Nr=i}else Nr=536870912;return i=Sr.current,i!==null&&(i.flags|=32),Nr}function cr(i,a,c){(i===Dt&&(Nt===2||Nt===9)||i.cancelPendingCommit!==null)&&(ja(i,0),Ms(i,ft,Nr,!1)),Ge(i,c),((vt&2)===0||i!==Dt)&&(i===Dt&&((vt&2)===0&&(Ao|=c),nn===4&&Ms(i,ft,Nr,!1)),fi(i))}function fv(i,a,c){if((vt&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&i.expiredLanes)===0||Q(i,a),g=f?TA(i,a):dm(i,a,!0),y=f;do{if(g===0){Ra&&!f&&Ms(i,a,0,!1);break}else{if(c=i.current.alternate,y&&!CA(c)){g=dm(i,a,!1),y=!1;continue}if(g===2){if(y=a,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var A=i;g=Jl;var _=A.current.memoizedState.isDehydrated;if(_&&(ja(A,E).flags|=256),E=dm(A,E,!1),E!==2){if(im&&!_){A.errorRecoveryDisabledLanes|=y,Ao|=y,g=4;break e}y=lr,lr=g,y!==null&&(lr===null?lr=y:lr.push.apply(lr,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){ja(i,0),Ms(i,a,0,!0);break}e:{switch(f=i,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ms(f,a,Nr,!Ns);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=sd+300-nt(),10<g)){if(Ms(f,a,Nr,!Ns),O(f,0,!0)!==0)break e;Gi=a,f.timeoutHandle=qv(hv.bind(null,f,c,lr,ad,om,a,Nr,Ao,Da,Ns,y,"Throttled",-0,0),g);break e}hv(f,c,lr,ad,om,a,Nr,Ao,Da,Ns,y,null,-0,0)}}break}while(!0);fi(i)}function hv(i,a,c,f,g,y,E,A,_,F,Z,ne,G,X){if(i.timeoutHandle=-1,ne=a.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xe},sv(a,y,ne);var Me=(y&62914560)===y?sd-nt():(y&4194048)===y?cv-nt():0;if(Me=lk(ne,Me),Me!==null){Gi=y,i.cancelPendingCommit=Me(wv.bind(null,i,a,y,c,f,g,E,A,_,Z,ne,null,G,X)),Ms(i,y,E,!F);return}}wv(i,a,y,c,f,g,E,A,_)}function CA(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],y=g.getSnapshot;g=g.value;try{if(!vr(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ms(i,a,c,f){a&=~sm,a&=~Ao,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var g=a;0<g;){var y=31-ke(g),E=1<<y;f[y]=-1,g&=~E}c!==0&&Ae(i,c,a)}function ld(){return(vt&6)===0?(ec(0),!1):!0}function um(){if(ct!==null){if(Nt===0)var i=ct.return;else i=ct,Li=bo=null,Tp(i),Ca=null,Bl=0,i=ct;for(;i!==null;)Vx(i.alternate,i),i=i.return;ct=null}}function ja(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,VA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Gi=0,um(),Dt=i,ct=c=_i(i.current,null),ft=a,Nt=0,Cr=null,Ns=!1,Ra=Q(i,a),im=!1,Da=Nr=sm=Ao=Ts=nn=0,lr=Jl=null,om=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var g=31-ke(f),y=1<<g;a|=i[g],f&=~y}return Fi=a,Mu(),c}function pv(i,a){rt=null,z.H=Vl,a===Ea||a===zu?(a=Ob(),Nt=3):a===pp?(a=Ob(),Nt=4):Nt=a===Pp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Cr=a,ct===null&&(nn=1,Xu(i,jr(a,i.current)))}function mv(){var i=Sr.current;return i===null?!0:(ft&4194048)===ft?Ir===null:(ft&62914560)===ft||(ft&536870912)!==0?i===Ir:!1}function gv(){var i=z.H;return z.H=Vl,i===null?Vl:i}function yv(){var i=z.A;return z.A=SA,i}function cd(){nn=4,Ns||(ft&4194048)!==ft&&Sr.current!==null||(Ra=!0),(Ts&134217727)===0&&(Ao&134217727)===0||Dt===null||Ms(Dt,ft,Nr,!1)}function dm(i,a,c){var f=vt;vt|=2;var g=gv(),y=yv();(Dt!==i||ft!==a)&&(ad=null,ja(i,a)),a=!1;var E=nn;e:do try{if(Nt!==0&&ct!==null){var A=ct,_=Cr;switch(Nt){case 8:um(),E=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(a=!0);var F=Nt;if(Nt=0,Cr=null,La(i,A,_,F),c&&Ra){E=0;break e}break;default:F=Nt,Nt=0,Cr=null,La(i,A,_,F)}}NA(),E=nn;break}catch(Z){pv(i,Z)}while(!0);return a&&i.shellSuspendCounter++,Li=bo=null,vt=f,z.H=g,z.A=y,ct===null&&(Dt=null,ft=0,Mu()),E}function NA(){for(;ct!==null;)bv(ct)}function TA(i,a){var c=vt;vt|=2;var f=gv(),g=yv();Dt!==i||ft!==a?(ad=null,od=nt()+500,ja(i,a)):Ra=Q(i,a);e:do try{if(Nt!==0&&ct!==null){a=ct;var y=Cr;t:switch(Nt){case 1:Nt=0,Cr=null,La(i,a,y,1);break;case 2:case 9:if(kb(y)){Nt=0,Cr=null,xv(a);break}a=function(){Nt!==2&&Nt!==9||Dt!==i||(Nt=7),fi(i)},y.then(a,a);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:kb(y)?(Nt=0,Cr=null,xv(a)):(Nt=0,Cr=null,La(i,a,y,7));break;case 5:var E=null;switch(ct.tag){case 26:E=ct.memoizedState;case 5:case 27:var A=ct;if(E?i1(E):A.stateNode.complete){Nt=0,Cr=null;var _=A.sibling;if(_!==null)ct=_;else{var F=A.return;F!==null?(ct=F,ud(F)):ct=null}break t}}Nt=0,Cr=null,La(i,a,y,5);break;case 6:Nt=0,Cr=null,La(i,a,y,6);break;case 8:um(),nn=6;break e;default:throw Error(r(462))}}AA();break}catch(Z){pv(i,Z)}while(!0);return Li=bo=null,z.H=f,z.A=g,vt=c,ct!==null?0:(Dt=null,ft=0,Mu(),nn)}function AA(){for(;ct!==null&&!Be();)bv(ct)}function bv(i){var a=Px(i.alternate,i,Fi);i.memoizedProps=i.pendingProps,a===null?ud(i):ct=a}function xv(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Bx(c,a,a.pendingProps,a.type,void 0,ft);break;case 11:a=Bx(c,a,a.pendingProps,a.type.render,a.ref,ft);break;case 5:Tp(a);default:Vx(c,a),a=ct=yb(a,Fi),a=Px(c,a,Fi)}i.memoizedProps=i.pendingProps,a===null?ud(i):ct=a}function La(i,a,c,f){Li=bo=null,Tp(a),Ca=null,Bl=0;var g=a.return;try{if(mA(i,g,a,c,ft)){nn=1,Xu(i,jr(c,i.current)),ct=null;return}}catch(y){if(g!==null)throw ct=g,y;nn=1,Xu(i,jr(c,i.current)),ct=null;return}a.flags&32768?(mt||f===1?i=!0:Ra||(ft&536870912)!==0?i=!1:(Ns=i=!0,(f===2||f===9||f===3||f===6)&&(f=Sr.current,f!==null&&f.tag===13&&(f.flags|=16384))),vv(a,i)):ud(a)}function ud(i){var a=i;do{if((a.flags&32768)!==0){vv(a,Ns);return}i=a.return;var c=bA(a.alternate,a,Fi);if(c!==null){ct=c;return}if(a=a.sibling,a!==null){ct=a;return}ct=a=i}while(a!==null);nn===0&&(nn=5)}function vv(i,a){do{var c=xA(i.alternate,i);if(c!==null){c.flags&=32767,ct=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){ct=i;return}ct=i=c}while(i!==null);nn=6,ct=null}function wv(i,a,c,f,g,y,E,A,_){i.cancelPendingCommit=null;do dd();while(Sn!==0);if((vt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=Zh,Ce(i,c,y,E,A,_),i===Dt&&(ct=Dt=null,ft=0),_a=a,ks=i,Gi=c,am=y,lm=g,uv=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,RA(Te,function(){return Tv(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=z.T,z.T=null,g=D.p,D.p=2,E=vt,vt|=4;try{vA(i,a,c)}finally{vt=E,D.p=g,z.T=f}}Sn=1,Sv(),Ev(),Cv()}}function Sv(){if(Sn===1){Sn=0;var i=ks,a=_a,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var f=D.p;D.p=2;var g=vt;vt|=4;try{nv(a,i);var y=Em,E=lb(i.containerInfo),A=y.focusedElem,_=y.selectionRange;if(E!==A&&A&&A.ownerDocument&&ab(A.ownerDocument.documentElement,A)){if(_!==null&&Wh(A)){var F=_.start,Z=_.end;if(Z===void 0&&(Z=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(Z,A.value.length);else{var ne=A.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var X=G.getSelection(),Me=A.textContent.length,Ve=Math.min(_.start,Me),Mt=_.end===void 0?Ve:Math.min(_.end,Me);!X.extend&&Ve>Mt&&(E=Mt,Mt=Ve,Ve=E);var P=ob(A,Ve),I=ob(A,Mt);if(P&&I&&(X.rangeCount!==1||X.anchorNode!==P.node||X.anchorOffset!==P.offset||X.focusNode!==I.node||X.focusOffset!==I.offset)){var V=ne.createRange();V.setStart(P.node,P.offset),X.removeAllRanges(),Ve>Mt?(X.addRange(V),X.extend(I.node,I.offset)):(V.setEnd(I.node,I.offset),X.addRange(V))}}}}for(ne=[],X=A;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ne.length;A++){var te=ne[A];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Ed=!!Sm,Em=Sm=null}finally{vt=g,D.p=f,z.T=c}}i.current=a,Sn=2}}function Ev(){if(Sn===2){Sn=0;var i=ks,a=_a,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var f=D.p;D.p=2;var g=vt;vt|=4;try{Xx(i,a.alternate,a)}finally{vt=g,D.p=f,z.T=c}}Sn=3}}function Cv(){if(Sn===4||Sn===3){Sn=0,lt();var i=ks,a=_a,c=Gi,f=uv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Sn=5:(Sn=0,_a=ks=null,Nv(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(As=null),_n(c),a=a.stateNode,Y&&typeof Y.onCommitFiberRoot=="function")try{Y.onCommitFiberRoot(gr,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=z.T,g=D.p,D.p=2,z.T=null;try{for(var y=i.onRecoverableError,E=0;E<f.length;E++){var A=f[E];y(A.value,{componentStack:A.stack})}}finally{z.T=a,D.p=g}}(Gi&3)!==0&&dd(),fi(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===cm?Zl++:(Zl=0,cm=i):Zl=0,ec(0)}}function Nv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,jl(a)))}function dd(){return Sv(),Ev(),Cv(),Tv()}function Tv(){if(Sn!==5)return!1;var i=ks,a=am;am=0;var c=_n(Gi),f=z.T,g=D.p;try{D.p=32>c?32:c,z.T=null,c=lm,lm=null;var y=ks,E=Gi;if(Sn=0,_a=ks=null,Gi=0,(vt&6)!==0)throw Error(r(331));var A=vt;if(vt|=4,av(y.current),iv(y,y.current,E,c),vt=A,ec(0,!1),Y&&typeof Y.onPostCommitFiberRoot=="function")try{Y.onPostCommitFiberRoot(gr,y)}catch{}return!0}finally{D.p=g,z.T=f,Nv(i,a)}}function Av(i,a,c){a=jr(c,a),a=$p(i.stateNode,a,2),i=ws(i,a,2),i!==null&&(Ge(i,2),fi(i))}function Tt(i,a,c){if(i.tag===3)Av(i,i,c);else for(;a!==null;){if(a.tag===3){Av(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(As===null||!As.has(f))){i=jr(c,i),c=kx(2),f=ws(a,c,2),f!==null&&(Mx(c,f,a,i),Ge(f,2),fi(f));break}}a=a.return}}function fm(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new EA;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(im=!0,g.add(c),i=kA.bind(null,i,a,c),a.then(i,i))}function kA(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Dt===i&&(ft&c)===c&&(nn===4||nn===3&&(ft&62914560)===ft&&300>nt()-sd?(vt&2)===0&&ja(i,0):sm|=c,Da===ft&&(Da=0)),fi(i)}function kv(i,a){a===0&&(a=De()),i=mo(i,a),i!==null&&(Ge(i,a),fi(i))}function MA(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),kv(i,c)}function OA(i,a){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),kv(i,c)}function RA(i,a){return Ee(i,a)}var fd=null,Ba=null,hm=!1,hd=!1,pm=!1,Os=0;function fi(i){i!==Ba&&i.next===null&&(Ba===null?fd=Ba=i:Ba=Ba.next=i),hd=!0,hm||(hm=!0,_A())}function ec(i,a){if(!pm&&hd){pm=!0;do for(var c=!1,f=fd;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var E=f.suspendedLanes,A=f.pingedLanes;y=(1<<31-ke(42|i)+1)-1,y&=g&~(E&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Dv(f,y))}else y=ft,y=O(f,f===Dt?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||Q(f,y)||(c=!0,Dv(f,y));f=f.next}while(c);pm=!1}}function DA(){Mv()}function Mv(){hd=hm=!1;var i=0;Os!==0&&qA()&&(i=Os);for(var a=nt(),c=null,f=fd;f!==null;){var g=f.next,y=Ov(f,a);y===0?(f.next=null,c===null?fd=g:c.next=g,g===null&&(Ba=c)):(c=f,(i!==0||(y&3)!==0)&&(hd=!0)),f=g}Sn!==0&&Sn!==5||ec(i),Os!==0&&(Os=0)}function Ov(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-ke(y),A=1<<E,_=g[E];_===-1?((A&c)===0||(A&f)!==0)&&(g[E]=ue(A,a)):_<=a&&(i.expiredLanes|=A),y&=~A}if(a=Dt,c=ft,c=O(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===a&&(Nt===2||Nt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Ye(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Q(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(f!==null&&Ye(f),_n(c)){case 2:case 8:c=ge;break;case 32:c=Te;break;case 268435456:c=Ze;break;default:c=Te}return f=Rv.bind(null,i),c=Ee(c,f),i.callbackPriority=a,i.callbackNode=c,a}return f!==null&&f!==null&&Ye(f),i.callbackPriority=2,i.callbackNode=null,2}function Rv(i,a){if(Sn!==0&&Sn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(dd()&&i.callbackNode!==c)return null;var f=ft;return f=O(i,i===Dt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(fv(i,f,a),Ov(i,nt()),i.callbackNode!=null&&i.callbackNode===c?Rv.bind(null,i):null)}function Dv(i,a){if(dd())return null;fv(i,a,!0)}function _A(){FA(function(){(vt&6)!==0?Ee(Bt,DA):Mv()})}function mm(){if(Os===0){var i=wa;i===0&&(i=en,en<<=1,(en&261888)===0&&(en=256)),Os=i}return Os}function _v(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:hs(""+i)}function jv(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function jA(i,a,c,f,g){if(a==="submit"&&c&&c.stateNode===g){var y=_v((g[qn]||null).action),E=f.submitter;E&&(a=(a=E[qn]||null)?_v(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var A=new Nu("action","action",null,f,g);i.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Os!==0){var _=E?jv(g,E):new FormData(g);Lp(c,{pending:!0,data:_,method:g.method,action:y},null,_)}}else typeof y=="function"&&(A.preventDefault(),_=E?jv(g,E):new FormData(g),Lp(c,{pending:!0,data:_,method:g.method,action:y},y,_))},currentTarget:g}]})}}for(var gm=0;gm<Jh.length;gm++){var ym=Jh[gm],LA=ym.toLowerCase(),BA=ym[0].toUpperCase()+ym.slice(1);Zr(LA,"on"+BA)}Zr(db,"onAnimationEnd"),Zr(fb,"onAnimationIteration"),Zr(hb,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(JT,"onTransitionRun"),Zr(ZT,"onTransitionStart"),Zr(eA,"onTransitionCancel"),Zr(pb,"onTransitionEnd"),he("onMouseEnter",["mouseout","mouseover"]),he("onMouseLeave",["mouseout","mouseover"]),he("onPointerEnter",["pointerout","pointerover"]),he("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function Lv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var E=f.length-1;0<=E;E--){var A=f[E],_=A.instance,F=A.currentTarget;if(A=A.listener,_!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=F;try{y(g)}catch(Z){ku(Z)}g.currentTarget=null,y=_}else for(E=0;E<f.length;E++){if(A=f[E],_=A.instance,F=A.currentTarget,A=A.listener,_!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=F;try{y(g)}catch(Z){ku(Z)}g.currentTarget=null,y=_}}}}function ut(i,a){var c=a[yl];c===void 0&&(c=a[yl]=new Set);var f=i+"__bubble";c.has(f)||(Bv(a,i,2,!1),c.add(f))}function bm(i,a,c){var f=0;a&&(f|=4),Bv(c,i,f,a)}var pd="_reactListening"+Math.random().toString(36).slice(2);function xm(i){if(!i[pd]){i[pd]=!0,yu.forEach(function(c){c!=="selectionchange"&&(zA.has(c)||bm(c,!1,i),bm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[pd]||(a[pd]=!0,bm("selectionchange",!1,a))}}function Bv(i,a,c,f){switch(d1(a)){case 2:var g=dk;break;case 8:g=fk;break;default:g=jm}c=g.bind(null,a,c,i),g=void 0,!Hh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function vm(i,a,c,f,g){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var A=f.stateNode.containerInfo;if(A===g)break;if(E===4)for(E=f.return;E!==null;){var _=E.tag;if((_===3||_===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;A!==null;){if(E=Xn(A),E===null)return;if(_=E.tag,_===5||_===6||_===26||_===27){f=y=E;continue e}A=A.parentNode}}f=f.return}wu(function(){var F=y,Z=tt(c),ne=[];e:{var G=mb.get(i);if(G!==void 0){var X=Nu,Me=i;switch(i){case"keypress":if(Eu(c)===0)break e;case"keydown":case"keyup":X=OT;break;case"focusin":Me="focus",X=qh;break;case"focusout":Me="blur",X=qh;break;case"beforeblur":case"afterblur":X=qh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=bT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=_T;break;case db:case fb:case hb:X=wT;break;case pb:X=LT;break;case"scroll":case"scrollend":X=gT;break;case"wheel":X=zT;break;case"copy":case"cut":case"paste":X=ET;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Gy;break;case"toggle":case"beforetoggle":X=HT}var Ve=(a&4)!==0,Mt=!Ve&&(i==="scroll"||i==="scrollend"),P=Ve?G!==null?G+"Capture":null:G;Ve=[];for(var I=F,V;I!==null;){var te=I;if(V=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||V===null||P===null||(te=El(I,P),te!=null&&Ve.push(nc(I,te,V))),Mt)break;I=I.return}0<Ve.length&&(G=new X(G,Me,null,c,Z),ne.push({event:G,listeners:Ve}))}}if((a&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",G&&c!==je&&(Me=c.relatedTarget||c.fromElement)&&(Xn(Me)||Me[cs]))break e;if((X||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,X?(Me=c.relatedTarget||c.toElement,X=F,Me=Me?Xn(Me):null,Me!==null&&(Mt=o(Me),Ve=Me.tag,Me!==Mt||Ve!==5&&Ve!==27&&Ve!==6)&&(Me=null)):(X=null,Me=F),X!==Me)){if(Ve=Vy,te="onMouseLeave",P="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(Ve=Gy,te="onPointerLeave",P="onPointerEnter",I="pointer"),Mt=X==null?G:us(X),V=Me==null?G:us(Me),G=new Ve(te,I+"leave",X,c,Z),G.target=Mt,G.relatedTarget=V,te=null,Xn(Z)===F&&(Ve=new Ve(P,I+"enter",Me,c,Z),Ve.target=V,Ve.relatedTarget=Mt,te=Ve),Mt=te,X&&Me)t:{for(Ve=IA,P=X,I=Me,V=0,te=P;te;te=Ve(te))V++;te=0;for(var $e=I;$e;$e=Ve($e))te++;for(;0<V-te;)P=Ve(P),V--;for(;0<te-V;)I=Ve(I),te--;for(;V--;){if(P===I||I!==null&&P===I.alternate){Ve=P;break t}P=Ve(P),I=Ve(I)}Ve=null}else Ve=null;X!==null&&zv(ne,G,X,Ve,!1),Me!==null&&Mt!==null&&zv(ne,Mt,Me,Ve,!0)}}e:{if(G=F?us(F):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var bt=eb;else if(Jy(G))if(tb)bt=QT;else{bt=KT;var Le=GT}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&fs(F.elementType)&&(bt=eb):bt=WT;if(bt&&(bt=bt(i,F))){Zy(ne,bt,c,Z);break e}Le&&Le(i,G,F),i==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&ua(G,"number",G.value)}switch(Le=F?us(F):window,i){case"focusin":(Jy(Le)||Le.contentEditable==="true")&&(ha=Le,Qh=F,Rl=null);break;case"focusout":Rl=Qh=ha=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,cb(ne,c,Z);break;case"selectionchange":if(XT)break;case"keydown":case"keyup":cb(ne,c,Z)}var it;if(Fh)e:{switch(i){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else fa?Yy(i,c)&&(ht="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ht="onCompositionStart");ht&&(Ky&&c.locale!=="ko"&&(fa||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&fa&&(it=Py()):(ps=Z,Uh="value"in ps?ps.value:ps.textContent,fa=!0)),Le=md(F,ht),0<Le.length&&(ht=new Fy(ht,i,null,c,Z),ne.push({event:ht,listeners:Le}),it?ht.data=it:(it=Xy(c),it!==null&&(ht.data=it)))),(it=$T?PT(i,c):qT(i,c))&&(ht=md(F,"onBeforeInput"),0<ht.length&&(Le=new Fy("onBeforeInput","beforeinput",null,c,Z),ne.push({event:Le,listeners:ht}),Le.data=it)),jA(ne,i,F,c,Z)}Lv(ne,a)})}function nc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function md(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=El(i,c),g!=null&&f.unshift(nc(i,g,y)),g=El(i,a),g!=null&&f.push(nc(i,g,y))),i.tag===3)return f;i=i.return}return[]}function IA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zv(i,a,c,f,g){for(var y=a._reactName,E=[];c!==null&&c!==f;){var A=c,_=A.alternate,F=A.stateNode;if(A=A.tag,_!==null&&_===f)break;A!==5&&A!==26&&A!==27||F===null||(_=F,g?(F=El(c,y),F!=null&&E.unshift(nc(c,F,_))):g||(F=El(c,y),F!=null&&E.push(nc(c,F,_)))),c=c.return}E.length!==0&&i.push({event:a,listeners:E})}var HA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function Iv(i){return(typeof i=="string"?i:""+i).replace(HA,`
`).replace(UA,"")}function Hv(i,a){return a=Iv(a),Iv(i)===a}function kt(i,a,c,f,g,y){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Ke(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Ke(i,""+f);break;case"className":br(i,"class",f);break;case"tabIndex":br(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":br(i,c,f);break;case"style":Ct(i,f,y);break;case"data":if(a!=="object"){br(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=hs(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&kt(i,a,"name",g.name,g,null),kt(i,a,"formEncType",g.formEncType,g,null),kt(i,a,"formMethod",g.formMethod,g,null),kt(i,a,"formTarget",g.formTarget,g,null)):(kt(i,a,"encType",g.encType,g,null),kt(i,a,"method",g.method,g,null),kt(i,a,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=hs(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=xe);break;case"onScroll":f!=null&&ut("scroll",i);break;case"onScrollEnd":f!=null&&ut("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=hs(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":ut("beforetoggle",i),ut("toggle",i),Vn(i,"popover",f);break;case"xlinkActuate":nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":nr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":nr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":nr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":nr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Vn(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ri.get(c)||c,Vn(i,c,f))}}function wm(i,a,c,f,g,y){switch(c){case"style":Ct(i,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Ke(i,f):(typeof f=="number"||typeof f=="bigint")&&Ke(i,""+f);break;case"onScroll":f!=null&&ut("scroll",i);break;case"onScrollEnd":f!=null&&ut("scrollend",i);break;case"onClick":f!=null&&(i.onclick=xe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=i[qn]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(a,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):Vn(i,c,f)}}}function In(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",i),ut("load",i);var f=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:kt(i,a,y,E,c,null)}}g&&kt(i,a,"srcSet",c.srcSet,c,null),f&&kt(i,a,"src",c.src,c,null);return;case"input":ut("invalid",i);var A=y=E=g=null,_=null,F=null;for(f in c)if(c.hasOwnProperty(f)){var Z=c[f];if(Z!=null)switch(f){case"name":g=Z;break;case"type":E=Z;break;case"checked":_=Z;break;case"defaultChecked":F=Z;break;case"value":y=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:kt(i,a,f,Z,c,null)}}uo(i,y,A,_,F,E,g,!1);return;case"select":ut("invalid",i),f=E=y=null;for(g in c)if(c.hasOwnProperty(g)&&(A=c[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":E=A;break;case"multiple":f=A;default:kt(i,a,g,A,c,null)}a=y,c=E,i.multiple=!!f,a!=null?jn(i,!!f,a,!1):c!=null&&jn(i,!!f,c,!0);return;case"textarea":ut("invalid",i),y=g=f=null;for(E in c)if(c.hasOwnProperty(E)&&(A=c[E],A!=null))switch(E){case"value":f=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:kt(i,a,E,A,c,null)}da(i,f,g,y);return;case"option":for(_ in c)if(c.hasOwnProperty(_)&&(f=c[_],f!=null))switch(_){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:kt(i,a,_,f,c,null)}return;case"dialog":ut("beforetoggle",i),ut("toggle",i),ut("cancel",i),ut("close",i);break;case"iframe":case"object":ut("load",i);break;case"video":case"audio":for(f=0;f<tc.length;f++)ut(tc[f],i);break;case"image":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"embed":case"source":case"link":ut("error",i),ut("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in c)if(c.hasOwnProperty(F)&&(f=c[F],f!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:kt(i,a,F,f,c,null)}return;default:if(fs(a)){for(Z in c)c.hasOwnProperty(Z)&&(f=c[Z],f!==void 0&&wm(i,a,Z,f,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(f=c[A],f!=null&&kt(i,a,A,f,c,null))}function $A(i,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,A=null,_=null,F=null,Z=null;for(X in c){var ne=c[X];if(c.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":_=ne;default:f.hasOwnProperty(X)||kt(i,a,X,null,f,ne)}}for(var G in f){var X=f[G];if(ne=c[G],f.hasOwnProperty(G)&&(X!=null||ne!=null))switch(G){case"type":y=X;break;case"name":g=X;break;case"checked":F=X;break;case"defaultChecked":Z=X;break;case"value":E=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:X!==ne&&kt(i,a,G,X,f,ne)}}vl(i,E,A,_,F,Z,y,g);return;case"select":X=E=A=G=null;for(y in c)if(_=c[y],c.hasOwnProperty(y)&&_!=null)switch(y){case"value":break;case"multiple":X=_;default:f.hasOwnProperty(y)||kt(i,a,y,null,f,_)}for(g in f)if(y=f[g],_=c[g],f.hasOwnProperty(g)&&(y!=null||_!=null))switch(g){case"value":G=y;break;case"defaultValue":A=y;break;case"multiple":E=y;default:y!==_&&kt(i,a,g,y,f,_)}a=A,c=E,f=X,G!=null?jn(i,!!c,G,!1):!!f!=!!c&&(a!=null?jn(i,!!c,a,!0):jn(i,!!c,c?[]:"",!1));return;case"textarea":X=G=null;for(A in c)if(g=c[A],c.hasOwnProperty(A)&&g!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:kt(i,a,A,null,f,g)}for(E in f)if(g=f[E],y=c[E],f.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":G=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&kt(i,a,E,g,f,y)}xu(i,G,X);return;case"option":for(var Me in c)if(G=c[Me],c.hasOwnProperty(Me)&&G!=null&&!f.hasOwnProperty(Me))switch(Me){case"selected":i.selected=!1;break;default:kt(i,a,Me,null,f,G)}for(_ in f)if(G=f[_],X=c[_],f.hasOwnProperty(_)&&G!==X&&(G!=null||X!=null))switch(_){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:kt(i,a,_,G,f,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in c)G=c[Ve],c.hasOwnProperty(Ve)&&G!=null&&!f.hasOwnProperty(Ve)&&kt(i,a,Ve,null,f,G);for(F in f)if(G=f[F],X=c[F],f.hasOwnProperty(F)&&G!==X&&(G!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,a));break;default:kt(i,a,F,G,f,X)}return;default:if(fs(a)){for(var Mt in c)G=c[Mt],c.hasOwnProperty(Mt)&&G!==void 0&&!f.hasOwnProperty(Mt)&&wm(i,a,Mt,void 0,f,G);for(Z in f)G=f[Z],X=c[Z],!f.hasOwnProperty(Z)||G===X||G===void 0&&X===void 0||wm(i,a,Z,G,f,X);return}}for(var P in c)G=c[P],c.hasOwnProperty(P)&&G!=null&&!f.hasOwnProperty(P)&&kt(i,a,P,null,f,G);for(ne in f)G=f[ne],X=c[ne],!f.hasOwnProperty(ne)||G===X||G==null&&X==null||kt(i,a,ne,G,f,X)}function Uv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],y=g.transferSize,E=g.initiatorType,A=g.duration;if(y&&A&&Uv(E)){for(E=0,A=g.responseEnd,f+=1;f<c.length;f++){var _=c[f],F=_.startTime;if(F>A)break;var Z=_.transferSize,ne=_.initiatorType;Z&&Uv(ne)&&(_=_.responseEnd,E+=Z*(_<A?1:(A-F)/(_-F)))}if(--f,a+=8*(y+E)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sm=null,Em=null;function gd(i){return i.nodeType===9?i:i.ownerDocument}function $v(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Cm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Nm=null;function qA(){var i=window.event;return i&&i.type==="popstate"?i===Nm?!1:(Nm=i,!0):(Nm=null,!1)}var qv=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,FA=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(i){return Vv.resolve(null).then(i).catch(GA)}:qv;function GA(i){setTimeout(function(){throw i})}function Rs(i){return i==="head"}function Fv(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(g),Ua(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")rc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,rc(c);for(var y=c.firstChild;y;){var E=y.nextSibling,A=y.nodeName;y[lo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=E}}else c==="body"&&rc(i.ownerDocument.body);c=g}while(c);Ua(a)}function Gv(i,a){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Tm(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Tm(c),bl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function KA(i,a,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[lo])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Hr(i.nextSibling),i===null)break}return null}function WA(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Hr(i.nextSibling),i===null))return null;return i}function Kv(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hr(i.nextSibling),i===null))return null;return i}function Am(i){return i.data==="$?"||i.data==="$~"}function km(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function QA(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Hr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Mm=null;function Wv(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return Hr(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function Qv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function Yv(i,a,c){switch(a=gd(c),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function rc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);bl(i)}var Ur=new Map,Xv=new Set;function yd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=D.d;D.d={f:YA,r:XA,D:JA,C:ZA,L:ek,m:tk,X:rk,S:nk,M:ik};function YA(){var i=Ki.f(),a=ld();return i||a}function XA(i){var a=Mi(i);a!==null&&a.tag===5&&a.type==="form"?px(a):Ki.r(i)}var za=typeof document>"u"?null:document;function Jv(i,a,c){var f=za;if(f&&typeof a=="string"&&a){var g=rr(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Xv.has(g)||(Xv.add(g),i={rel:i,crossOrigin:c,href:a},f.querySelector(g)===null&&(a=f.createElement("link"),In(a,"link",i),hn(a),f.head.appendChild(a)))}}function JA(i){Ki.D(i),Jv("dns-prefetch",i,null)}function ZA(i,a){Ki.C(i,a),Jv("preconnect",i,a)}function ek(i,a,c){Ki.L(i,a,c);var f=za;if(f&&i&&a){var g='link[rel="preload"][as="'+rr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+rr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+rr(c.imageSizes)+'"]')):g+='[href="'+rr(i)+'"]';var y=g;switch(a){case"style":y=Ia(i);break;case"script":y=Ha(i)}Ur.has(y)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Ur.set(y,i),f.querySelector(g)!==null||a==="style"&&f.querySelector(ic(y))||a==="script"&&f.querySelector(sc(y))||(a=f.createElement("link"),In(a,"link",i),hn(a),f.head.appendChild(a)))}}function tk(i,a){Ki.m(i,a);var c=za;if(c&&i){var f=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+rr(f)+'"][href="'+rr(i)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ha(i)}if(!Ur.has(y)&&(i=m({rel:"modulepreload",href:i},a),Ur.set(y,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(sc(y)))return}f=c.createElement("link"),In(f,"link",i),hn(f),c.head.appendChild(f)}}}function nk(i,a,c){Ki.S(i,a,c);var f=za;if(f&&i){var g=ds(f).hoistableStyles,y=Ia(i);a=a||"default";var E=g.get(y);if(!E){var A={loading:0,preload:null};if(E=f.querySelector(ic(y)))A.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Ur.get(y))&&Om(i,c);var _=E=f.createElement("link");hn(_),In(_,"link",i),_._p=new Promise(function(F,Z){_.onload=F,_.onerror=Z}),_.addEventListener("load",function(){A.loading|=1}),_.addEventListener("error",function(){A.loading|=2}),A.loading|=4,bd(E,a,f)}E={type:"stylesheet",instance:E,count:1,state:A},g.set(y,E)}}}function rk(i,a){Ki.X(i,a);var c=za;if(c&&i){var f=ds(c).hoistableScripts,g=Ha(i),y=f.get(g);y||(y=c.querySelector(sc(g)),y||(i=m({src:i,async:!0},a),(a=Ur.get(g))&&Rm(i,a),y=c.createElement("script"),hn(y),In(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function ik(i,a){Ki.M(i,a);var c=za;if(c&&i){var f=ds(c).hoistableScripts,g=Ha(i),y=f.get(g);y||(y=c.querySelector(sc(g)),y||(i=m({src:i,async:!0,type:"module"},a),(a=Ur.get(g))&&Rm(i,a),y=c.createElement("script"),hn(y),In(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function Zv(i,a,c,f){var g=(g=we.current)?yd(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Ia(c.href),c=ds(g).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ia(c.href);var y=ds(g).hoistableStyles,E=y.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=g.querySelector(ic(i)))&&!y._p&&(E.instance=y,E.state.loading=5),Ur.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ur.set(i,c),y||sk(g,i,c,E.state))),a&&f===null)throw Error(r(528,""));return E}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ha(c),c=ds(g).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ia(i){return'href="'+rr(i)+'"'}function ic(i){return'link[rel="stylesheet"]['+i+"]"}function e1(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function sk(i,a,c,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),In(a,"link",c),hn(a),i.head.appendChild(a))}function Ha(i){return'[src="'+rr(i)+'"]'}function sc(i){return"script[async]"+i}function t1(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+rr(c.href)+'"]');if(f)return a.instance=f,hn(f),f;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),hn(f),In(f,"style",g),bd(f,c.precedence,i),a.instance=f;case"stylesheet":g=Ia(c.href);var y=i.querySelector(ic(g));if(y)return a.state.loading|=4,a.instance=y,hn(y),y;f=e1(c),(g=Ur.get(g))&&Om(f,g),y=(i.ownerDocument||i).createElement("link"),hn(y);var E=y;return E._p=new Promise(function(A,_){E.onload=A,E.onerror=_}),In(y,"link",f),a.state.loading|=4,bd(y,c.precedence,i),a.instance=y;case"script":return y=Ha(c.src),(g=i.querySelector(sc(y)))?(a.instance=g,hn(g),g):(f=c,(g=Ur.get(y))&&(f=m({},c),Rm(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),hn(g),In(g,"link",f),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,bd(f,c.precedence,i));return a.instance}function bd(i,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,E=0;E<f.length;E++){var A=f[E];if(A.dataset.precedence===a)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Om(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Rm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var xd=null;function n1(i,a,c){if(xd===null){var f=new Map,g=xd=new Map;g.set(c,f)}else g=xd,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var y=c[g];if(!(y[lo]||y[an]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=i+E;var A=f.get(E);A?A.push(y):f.set(E,[y])}}return f}function r1(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function ok(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function i1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function ak(i,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Ia(f.href),y=a.querySelector(ic(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=vd.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=y,hn(y);return}y=a.ownerDocument||a,f=e1(f),(g=Ur.get(g))&&Om(f,g),y=y.createElement("link"),hn(y);var E=y;E._p=new Promise(function(A,_){E.onload=A,E.onerror=_}),In(y,"link",f),c.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=vd.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Dm=0;function lk(i,a){return i.stylesheets&&i.count===0&&Sd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&Sd(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Dm===0&&(Dm=62500*PA());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Sd(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Dm?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wd=null;function Sd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wd=new Map,a.forEach(ck,i),wd=null,vd.call(i))}function ck(i,a){if(!(a.state.loading&4)){var c=wd.get(i);if(c)var f=c.get(null);else{c=new Map,wd.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),f=E)}f&&c.set(null,f)}g=a.instance,E=g.getAttribute("data-precedence"),y=c.get(E)||f,y===f&&c.set(null,g),c.set(E,g),this.count++,f=vd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var oc={$$typeof:R,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function uk(i,a,c,f,g,y,E,A,_){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.hiddenUpdates=gt(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function s1(i,a,c,f,g,y,E,A,_,F,Z,ne){return i=new uk(i,a,c,E,_,F,Z,ne,A),a=1,y===!0&&(a|=24),y=wr(3,null,null,a),i.current=y,y.stateNode=i,a=dp(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:a},mp(y),i}function o1(i){return i?(i=ga,i):ga}function a1(i,a,c,f,g,y){g=o1(g),f.context===null?f.context=g:f.pendingContext=g,f=vs(a),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=ws(i,f,a),c!==null&&(cr(c,i,a),Il(c,i,a))}function l1(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function _m(i,a){l1(i,a),(i=i.alternate)&&l1(i,a)}function c1(i){if(i.tag===13||i.tag===31){var a=mo(i,67108864);a!==null&&cr(a,i,67108864),_m(i,67108864)}}function u1(i){if(i.tag===13||i.tag===31){var a=Tr();a=Rt(a);var c=mo(i,a);c!==null&&cr(c,i,a),_m(i,a)}}var Ed=!0;function dk(i,a,c,f){var g=z.T;z.T=null;var y=D.p;try{D.p=2,jm(i,a,c,f)}finally{D.p=y,z.T=g}}function fk(i,a,c,f){var g=z.T;z.T=null;var y=D.p;try{D.p=8,jm(i,a,c,f)}finally{D.p=y,z.T=g}}function jm(i,a,c,f){if(Ed){var g=Lm(f);if(g===null)vm(i,a,f,Cd,c),f1(i,f);else if(pk(g,i,a,c,f))f.stopPropagation();else if(f1(i,f),a&4&&-1<hk.indexOf(i)){for(;g!==null;){var y=Mi(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Pt(y.pendingLanes);if(E!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var _=1<<31-ke(E);A.entanglements[1]|=_,E&=~_}fi(y),(vt&6)===0&&(od=nt()+500,ec(0))}}break;case 31:case 13:A=mo(y,2),A!==null&&cr(A,y,2),ld(),_m(y,2)}if(y=Lm(f),y===null&&vm(i,a,f,Cd,c),y===g)break;g=y}g!==null&&f.stopPropagation()}else vm(i,a,f,null,c)}}function Lm(i){return i=tt(i),Bm(i)}var Cd=null;function Bm(i){if(Cd=null,i=Xn(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Cd=i,null}function d1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case Bt:return 2;case ge:return 8;case Te:case We:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var zm=!1,Ds=null,_s=null,js=null,ac=new Map,lc=new Map,Ls=[],hk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f1(i,a){switch(i){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":ac.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(a.pointerId)}}function cc(i,a,c,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},a!==null&&(a=Mi(a),a!==null&&c1(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function pk(i,a,c,f,g){switch(a){case"focusin":return Ds=cc(Ds,i,a,c,f,g),!0;case"dragenter":return _s=cc(_s,i,a,c,f,g),!0;case"mouseover":return js=cc(js,i,a,c,f,g),!0;case"pointerover":var y=g.pointerId;return ac.set(y,cc(ac.get(y)||null,i,a,c,f,g)),!0;case"gotpointercapture":return y=g.pointerId,lc.set(y,cc(lc.get(y)||null,i,a,c,f,g)),!0}return!1}function h1(i){var a=Xn(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,oa(i.priority,function(){u1(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,oa(i.priority,function(){u1(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Nd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Lm(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);je=f,c.target.dispatchEvent(f),je=null}else return a=Mi(c),a!==null&&c1(a),i.blockedOn=c,!1;a.shift()}return!0}function p1(i,a,c){Nd(i)&&c.delete(a)}function mk(){zm=!1,Ds!==null&&Nd(Ds)&&(Ds=null),_s!==null&&Nd(_s)&&(_s=null),js!==null&&Nd(js)&&(js=null),ac.forEach(p1),lc.forEach(p1)}function Td(i,a){i.blockedOn===a&&(i.blockedOn=null,zm||(zm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mk)))}var Ad=null;function m1(i){Ad!==i&&(Ad=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ad===i&&(Ad=null);for(var a=0;a<i.length;a+=3){var c=i[a],f=i[a+1],g=i[a+2];if(typeof f!="function"){if(Bm(f||c)===null)continue;break}var y=Mi(c);y!==null&&(i.splice(a,3),a-=3,Lp(y,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function Ua(i){function a(_){return Td(_,i)}Ds!==null&&Td(Ds,i),_s!==null&&Td(_s,i),js!==null&&Td(js,i),ac.forEach(a),lc.forEach(a);for(var c=0;c<Ls.length;c++){var f=Ls[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ls.length&&(c=Ls[0],c.blockedOn===null);)h1(c),c.blockedOn===null&&Ls.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],y=c[f+1],E=g[qn]||null;if(typeof y=="function")E||m1(c);else if(E){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[qn]||null)A=E.formAction;else if(Bm(g)!==null)continue}else A=E.action;typeof A=="function"?c[f+1]=A:(c.splice(f,3),f-=3),m1(c)}}}function g1(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Im(i){this._internalRoot=i}kd.prototype.render=Im.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=Tr();a1(c,f,i,a,null,null)},kd.prototype.unmount=Im.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;a1(i.current,2,null,i,null,null),ld(),a[cs]=null}};function kd(i){this._internalRoot=i}kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=ao();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Ls.length&&a!==0&&a<Ls[c].priority;c++);Ls.splice(c,0,i),c===0&&h1(i)}};var y1=e.version;if(y1!=="19.2.0")throw Error(r(527,y1,"19.2.0"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var gk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{gr=Md.inject(gk),Y=Md}catch{}}return dc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var c=!1,f="",g=Cx,y=Nx,E=Tx;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=s1(i,1,!1,null,null,c,f,null,g,y,E,g1),i[cs]=a.current,xm(i),new Im(a)},dc.hydrateRoot=function(i,a,c){if(!s(i))throw Error(r(299));var f=!1,g="",y=Cx,E=Nx,A=Tx,_=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(_=c.formState)),a=s1(i,1,!0,a,c??null,f,g,_,y,E,A,g1),a.context=o1(null),c=a.current,f=Tr(),f=Rt(f),g=vs(f),g.callback=null,ws(c,g,f),c=f,a.current.lanes=c,Ge(a,c),fi(a),i[cs]=a.current,xm(i),new kd(a)},dc.version="19.2.0",dc}var A1;function Nk(){if(A1)return $m.exports;A1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$m.exports=Ck(),$m.exports}var Tk=Nk();const Oo="1.29.1";var xi=[],Vr=[],Ak=Uint8Array,Fm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $a=0,kk=Fm.length;$a<kk;++$a)xi[$a]=Fm[$a],Vr[Fm.charCodeAt($a)]=$a;Vr[45]=62;Vr[95]=63;function Mk(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Ok(n,e,t){return(e+t)*3/4-t}function zc(n){var e,t=Mk(n),r=t[0],s=t[1],o=new Ak(Ok(n,r,s)),l=0,u=s>0?r-4:r,d;for(d=0;d<u;d+=4)e=Vr[n.charCodeAt(d)]<<18|Vr[n.charCodeAt(d+1)]<<12|Vr[n.charCodeAt(d+2)]<<6|Vr[n.charCodeAt(d+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=e&255;return s===2&&(e=Vr[n.charCodeAt(d)]<<2|Vr[n.charCodeAt(d+1)]>>4,o[l++]=e&255),s===1&&(e=Vr[n.charCodeAt(d)]<<10|Vr[n.charCodeAt(d+1)]<<4|Vr[n.charCodeAt(d+2)]>>2,o[l++]=e>>8&255,o[l++]=e&255),o}function Rk(n){return xi[n>>18&63]+xi[n>>12&63]+xi[n>>6&63]+xi[n&63]}function Dk(n,e,t){for(var r,s=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),s.push(Rk(r));return s.join("")}function Ic(n){for(var e,t=n.length,r=t%3,s=[],o=16383,l=0,u=t-r;l<u;l+=o)s.push(Dk(n,l,l+o>u?u:l+o));return r===1?(e=n[t-1],s.push(xi[e>>2]+xi[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],s.push(xi[e>>10]+xi[e>>4&63]+xi[e<<2&63]+"=")),s.join("")}function dr(n){if(n===void 0)return{};if(!xE(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function bE(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function xE(n){var s;const e=typeof n=="object",t=Object.getPrototypeOf(n),r=t===null||t===Object.prototype||((s=t==null?void 0:t.constructor)==null?void 0:s.name)==="Object";return e&&r}const vE=!0,el=BigInt("-9223372036854775808"),D0=BigInt("9223372036854775807"),Ig=BigInt("0"),_k=BigInt("8"),jk=BigInt("256");function wE(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function Lk(n){n<Ig&&(n-=el+el);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let r=0;for(const s of e.match(/.{2}/g).reverse())t.set([parseInt(s,16)],r++),n>>=_k;return Ic(t)}function Bk(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=Ig,r=Ig;for(const s of e)t+=BigInt(s)*jk**r,r++;return t>D0&&(t+=el+el),t}function zk(n){if(n<el||D0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),Ic(new Uint8Array(e))}function Ik(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Hk=DataView.prototype.setBigInt64?zk:Lk,Uk=DataView.prototype.getBigInt64?Ik:Bk,k1=1024;function SE(n){if(n.length>k1)throw new Error(`Field name ${n} exceeds maximum field name length ${k1}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function ri(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(r=>ri(r));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return zc(n.$bytes).buffer}if(r==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return Uk(n.$integer)}if(r==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const s=zc(n.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const l=new DataView(s.buffer).getFloat64(0,vE);if(!wE(l))throw new Error(`Float ${l} should be encoded as a number`);return l}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[r,s]of Object.entries(n))SE(r),t[r]=ri(s);return t}const M1=16384;function wc(n){const e=JSON.stringify(n,(t,r)=>r===void 0?"undefined":typeof r=="bigint"?`${r.toString()}n`:r);if(e.length>M1){const t="[...truncated]";let r=M1-t.length;const s=e.codePointAt(r-1);return s!==void 0&&s>65535&&(r-=1),e.substring(0,r)+t}return e}function Hg(n,e,t,r){var l;if(n===void 0){const u=t&&` (present at path ${t} in original object ${wc(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<el||D0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:Hk(n)}}if(typeof n=="number")if(wE(n)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,n,vE),{$float:Ic(new Uint8Array(u))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:Ic(new Uint8Array(n))};if(Array.isArray(n))return n.map((u,d)=>Hg(u,e,t+`[${d}]`));if(n instanceof Set)throw new Error(Gm(t,"Set",[...n],e));if(n instanceof Map)throw new Error(Gm(t,"Map",[...n],e));if(!xE(n)){const u=(l=n==null?void 0:n.constructor)==null?void 0:l.name,d=u?`${u} `:"";throw new Error(Gm(t,d,n,e))}const s={},o=Object.entries(n);o.sort(([u,d],[h,p])=>u===h?0:u<h?-1:1);for(const[u,d]of o)d!==void 0&&(SE(u),s[u]=Hg(d,e,t+`.${u}`));return s}function Gm(n,e,t,r){return n?`${e}${wc(t)} is not a supported Convex type (present at path ${n} in original object ${wc(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${wc(t)} is not a supported Convex type.`}function Kr(n){return Hg(n,n,"")}var $k=Object.defineProperty,Pk=(n,e,t)=>e in n?$k(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Km=(n,e,t)=>Pk(n,typeof e!="symbol"?e+"":e,t),O1,R1;const qk=Symbol.for("ConvexError");class _o extends(R1=Error,O1=qk,R1){constructor(e){super(typeof e=="string"?e:wc(e)),Km(this,"name","ConvexError"),Km(this,"data"),Km(this,O1,!0),this.data=e}}const EE=()=>Array.from({length:4},()=>0);EE();EE();var Vk=Object.defineProperty,Fk=(n,e,t)=>e in n?Vk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D1=(n,e,t)=>Fk(n,typeof e!="symbol"?e+"":e,t);const Gk="color:rgb(0, 145, 255)";function CE(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class NE{constructor(e){D1(this,"_onLogLineFuncs"),D1(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[t]!==void 0;r++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function _0(n){const e=new NE(n);return e.addLogLineListener((t,...r)=>{switch(t){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function j0(n){return new NE(n)}function Gs(n,e,t,r,s){const o=CE(t);if(typeof s=="object"&&(s=`ConvexError ${JSON.stringify(s.errorData,null,2)}`),e==="info"){const l=s.match(/^\[.*?\] /);if(l===null){n.error(`[CONVEX ${o}(${r})] Could not parse console.log`);return}const u=s.slice(1,l[0].length-2),d=s.slice(l[0].length);n.log(`%c[CONVEX ${o}(${r})] [${u}]`,Gk,d)}else n.error(`[CONVEX ${o}(${r})] ${s}`)}function Kk(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function Qa(n,e,t){return`[CONVEX ${CE(n)}(${e})] ${t.errorMessage}
  Called by client`}function Ug(n,e){return e.data=n.errorData,e}function yf(n){const e=n.split(":");let t,r;return e.length===1?(t=e[0],r="default"):(t=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function Io(n,e){return JSON.stringify({udfPath:yf(n),args:Kr(e)})}var Wk=Object.defineProperty,Qk=(n,e,t)=>e in n?Wk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hi=(n,e,t)=>Qk(n,typeof e!="symbol"?e+"":e,t);class Yk{constructor(){hi(this,"nextQueryId"),hi(this,"querySetVersion"),hi(this,"querySet"),hi(this,"queryIdToToken"),hi(this,"identityVersion"),hi(this,"auth"),hi(this,"outstandingQueriesOlderThanRestart"),hi(this,"outstandingAuthOlderThanRestart"),hi(this,"paused"),hi(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,s){const o=yf(e),l=Io(o,t),u=this.querySet.get(l);if(u!==void 0)return u.numSubscribers+=1,{queryToken:l,modification:null,unsubscribe:()=>this.removeSubscriber(l)};{const d=this.nextQueryId++,h={id:d,canonicalizedUdfPath:o,args:t,numSubscribers:1,journal:r,componentPath:s};this.querySet.set(l,h),this.queryIdToToken.set(d,l);const p=this.querySetVersion,m=this.querySetVersion+1,x={type:"Add",queryId:d,udfPath:o,args:[Kr(t)],journal:r,componentPath:s};return this.paused?this.pendingQuerySetModifications.set(d,x):this.querySetVersion=m,{queryToken:l,modification:{type:"ModifyQuerySet",baseVersion:p,newVersion:m,modifications:[x]},unsubscribe:()=>this.removeSubscriber(l)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const r=t.journal;if(r!==void 0){const s=this.queryIdToToken.get(t.queryId);s!==void 0&&(this.querySet.get(s).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const r=yf(e),s=Io(r,t),o=this.querySet.get(s);return o!==void 0?o.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}getAuth(){return this.auth}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;const s=this.identityVersion;return this.paused||(this.identityVersion=s+1),{type:"Authenticate",baseVersion:s,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var t;return((t=this.auth)==null?void 0:t.value)!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var t;return(t=this.querySet.get(e))==null?void 0:t.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const o of this.querySet.values()){const l={type:"Add",queryId:o.id,udfPath:o.canonicalizedUdfPath,args:[Kr(o.args)],journal:o.journal,componentPath:o.componentPath};t.push(l),e.has(o.id)||this.outstandingQueriesOlderThanRestart.add(o.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const s={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,s]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const r=this.querySetVersion,s=this.querySetVersion+1,o={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,o):this.querySetVersion=s,{type:"ModifyQuerySet",baseVersion:r,newVersion:s,modifications:[o]}}}}var Xk=Object.defineProperty,Jk=(n,e,t)=>e in n?Xk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Od=(n,e,t)=>Jk(n,typeof e!="symbol"?e+"":e,t);class Zk{constructor(e,t){this.logger=e,this.markConnectionStateDirty=t,Od(this,"inflightRequests"),Od(this,"requestsOlderThanRestart"),Od(this,"inflightMutationsCount",0),Od(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){const r=new Promise(s=>{const o=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:o,requestedAt:new Date,onResult:s}}),e.type==="Mutation"?this.inflightMutationsCount++:e.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),r}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const r=t.message.type==="Mutation"?"mutation":"action",s=t.message.udfPath;for(const d of e.logLines)Gs(this.logger,"info",r,s,d);const o=t.status;let l,u;if(e.success)l={success:!0,logLines:e.logLines,value:ri(e.result)},u=()=>o.onResult(l);else{const d=e.result,{errorData:h}=e;Gs(this.logger,"error",r,s,d),l={success:!1,errorMessage:d,errorData:h!==void 0?ri(h):void 0,logLines:e.logLines},u=()=>o.onResult(l)}return e.type==="ActionResponse"||!e.success?(u(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),t.message.type==="Action"?this.inflightActionsCount--:t.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:e.requestId,result:l}):(t.status={status:"Completed",result:l,ts:e.ts,onResolve:u},null)}removeCompleted(e){const t=new Map;for(const[r,s]of this.inflightRequests.entries()){const o=s.status;o.status==="Completed"&&o.ts.lessThanOrEqual(e)&&(o.onResolve(),t.set(r,o.result),s.message.type==="Mutation"?this.inflightMutationsCount--:s.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t.size>0&&this.markConnectionStateDirty(),t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else if(r.message.type==="Action"){if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),this.inflightActionsCount--,r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const Hc=Symbol.for("functionName"),TE=Symbol.for("toReferencePath");function eM(n){return n[TE]??null}function tM(n){return n.startsWith("function://")}function nM(n){let e;if(typeof n=="string")tM(n)?e={functionHandle:n}:e={name:n};else if(n[Hc])e={name:n[Hc]};else{const t=eM(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function An(n){const e=nM(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[Hc];if(!t)throw new Error(`${n} is not a functionReference`);return t}function L0(n){return{[Hc]:n}}function AE(n=[]){const e={get(t,r){if(typeof r=="string"){const s=[...n,r];return AE(s)}else if(r===Hc){if(n.length<2){const l=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${l}\``)}const s=n.slice(0,-1).join("/"),o=n[n.length-1];return o==="default"?s:s+":"+o}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const rM=AE();var iM=Object.defineProperty,sM=(n,e,t)=>e in n?iM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bf=(n,e,t)=>sM(n,typeof e!="symbol"?e+"":e,t);class Uc{constructor(e){bf(this,"queryResults"),bf(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const r=dr(t[0]),s=An(e),o=this.queryResults.get(Io(s,r));if(o!==void 0)return Uc.queryValue(o.result)}getAllQueries(e){const t=[],r=An(e);for(const s of this.queryResults.values())s.udfPath===yf(r)&&t.push({args:s.args,value:Uc.queryValue(s.result)});return t}setQuery(e,t,r){const s=dr(t),o=An(e),l=Io(o,s);let u;r===void 0?u=void 0:u={success:!0,value:r,logLines:[]};const d={udfPath:o,args:s,result:u};this.queryResults.set(l,d),this.modifiedQueries.push(l)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class oM{constructor(){bf(this,"queryResults"),bf(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(l=>!t.has(l.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const s=new Uc(this.queryResults);for(const l of this.optimisticUpdates)l.update(s);const o=[];for(const[l,u]of this.queryResults){const d=r.get(l);(d===void 0||d.result!==u.result)&&o.push(l)}return o}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const r=new Uc(this.queryResults);return e(r),r.modifiedQueries}rawQueryResult(e){return this.queryResults.get(e)}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const r=t.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?Ug(r,new _o(Qa("query",t.udfPath,r))):new Error(Qa("query",t.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const t=this.queryResults.get(e);return(r=t==null?void 0:t.result)==null?void 0:r.logLines}}var aM=Object.defineProperty,lM=(n,e,t)=>e in n?aM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wm=(n,e,t)=>lM(n,typeof e!="symbol"?e+"":e,t);class Ar{constructor(e,t){Wm(this,"low"),Wm(this,"high"),Wm(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new Ar(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?_1:e>=cM?uM:new Ar(e%Sc|0,e/Sc|0)}toString(){return(BigInt(this.high)*BigInt(Sc)+BigInt(this.low)).toString()}equals(e){return Ar.isLong(e)||(e=Ar.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return Ar.isLong(e)||(e=Ar.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?Ar.fromNumber(e):new Ar(e.low,e.high)}}const _1=new Ar(0,0),j1=65536,Sc=j1*j1,cM=Sc*Sc,uM=new Ar(-1,-1);var dM=Object.defineProperty,fM=(n,e,t)=>e in n?dM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rd=(n,e,t)=>fM(n,typeof e!="symbol"?e+"":e,t);class L1{constructor(e,t){Rd(this,"version"),Rd(this,"remoteQuerySet"),Rd(this,"queryPath"),Rd(this,"logger"),this.version={querySet:0,ts:Ar.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}:${t.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Gs(this.logger,"info","query",s,l);const o=ri(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:o,logLines:r.logLines});break}case"QueryFailed":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Gs(this.logger,"info","query",s,l);const{errorData:o}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:o!==void 0?ri(o):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Qm(n){const e=zc(n);return Ar.fromBytesLE(Array.from(e))}function hM(n){const e=new Uint8Array(n.toBytesLE());return Ic(e)}function B1(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Qm(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Qm(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Qm(n.endVersion.ts)}}}}function pM(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:hM(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var mM=Object.defineProperty,gM=(n,e,t)=>e in n?mM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Hn=(n,e,t)=>gM(n,typeof e!="symbol"?e+"":e,t);const yM=1e3,bM=1001,xM=1005,vM=4040;let rf;function sf(){return rf===void 0&&(rf=Date.now()),typeof performance>"u"||!performance.now?Date.now():Math.round(rf+performance.now())}function z1(){return`t=${Math.round((sf()-rf)/100)/10}s`}const kE={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function wM(n){if(n===void 0)return"Unknown";for(const e of Object.keys(kE))if(n.startsWith(e))return e;return"Unknown"}class SM{constructor(e,t,r,s,o,l){this.markConnectionStateDirty=o,this.debug=l,Hn(this,"socket"),Hn(this,"connectionCount"),Hn(this,"_hasEverConnected",!1),Hn(this,"lastCloseReason"),Hn(this,"transitionChunkBuffer",null),Hn(this,"defaultInitialBackoff"),Hn(this,"maxBackoff"),Hn(this,"retries"),Hn(this,"serverInactivityThreshold"),Hn(this,"reconnectDueToServerInactivityTimeout"),Hn(this,"uri"),Hn(this,"onOpen"),Hn(this,"onResume"),Hn(this,"onMessage"),Hn(this,"webSocketConstructor"),Hn(this,"logger"),Hn(this,"onServerDisconnectError"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.onServerDisconnectError=t.onServerDisconnectError,this.logger=s,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(e){if(e.partNumber<0||e.partNumber>=e.totalParts||e.totalParts===0||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==e.totalParts||this.transitionChunkBuffer.transitionId!==e.transitionId))throw this.transitionChunkBuffer=null,new Error("Invalid TransitionChunk");if(this.transitionChunkBuffer===null&&(this.transitionChunkBuffer={chunks:[],totalParts:e.totalParts,transitionId:e.transitionId}),e.partNumber!==this.transitionChunkBuffer.chunks.length){const t=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,new Error(`TransitionChunk received out of order: expected part ${t}, got ${e.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(e.chunk),this.transitionChunkBuffer.chunks.length===e.totalParts){const t=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;const r=B1(JSON.parse(t));if(r.type!=="Transition")throw new Error(`Expected Transition, got ${r.type} after assembling chunks`);return r}return null}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:sf()})),this.lastCloseReason!=="InitialConnect"&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",z1(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",z1())),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{this.transitionChunkBuffer=null;const r=t.message;r&&this.logger.log(`WebSocket error message: ${r}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const r=t.data.length;let s=B1(JSON.parse(t.data));if(this._logVerbose(`received ws message with type ${s.type}`),s.type==="Ping")return;if(s.type==="TransitionChunk"){const l=this.assembleTransition(s);if(!l)return;s=l,this._logVerbose(`assembled full ws message of type ${s.type}`)}this.transitionChunkBuffer!==null&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${s.type} while buffering TransitionChunks`)),s.type==="Transition"&&this.reportLargeTransition({messageLength:r,transition:s}),this.onMessage(s).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,this.lastCloseReason===null&&(this.lastCloseReason=t.reason||`closed with code ${t.code}`),t.code!==yM&&t.code!==bM&&t.code!==xM&&t.code!==vM){let s=`WebSocket closed with code ${t.code}`;t.reason&&(s+=`: ${t.reason}`),this.logger.log(s),this.onServerDisconnectError&&t.reason&&this.onServerDisconnectError(s)}const r=wM(t.reason);this.scheduleReconnect(r)}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const r=pM(e),s=JSON.stringify(r);let o=!1;try{this.socket.ws.send(s),o=!0}catch(l){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${l}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${o?"sent":"failed to send"} message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(e){this.socket={state:"disconnected"};const t=this.nextBackoff(e);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(t)}ms`),setTimeout(()=>this.connect(),t)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return e.onmessage=t=>{this._logVerbose("Ignoring message received after close")},new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws;e.onmessage=r=>{this._logVerbose("Ignoring message received after close")};const t=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:sf()})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(e){const r=(e==="client"?100:e==="Unknown"?this.defaultInitialBackoff:kE[e].timeout)*Math.pow(2,this.retries);this.retries+=1;const s=Math.min(r,this.maxBackoff),o=s*(Math.random()-.5);return s+o}reportLargeTransition({transition:e,messageLength:t}){if(e.clientClockSkew===void 0||e.serverTs===void 0)return;const r=sf()-e.clientClockSkew-e.serverTs/1e6,s=`${Math.round(r)}ms`,o=`${Math.round(t/1e4)/100}MB`,l=t/(r/1e3),u=`${Math.round(l/1e4)/100}MB per second`;this._logVerbose(`received ${o} transition in ${s} at ${u}`),t>2e7?this.logger.log(`received query results totaling more that 20MB (${o}) which will take a long time to download on slower connections`):r>2e4&&this.logger.log(`received query results totaling ${o} which took more than 20s to arrive (${s})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:r,messageLength:t}})}}function EM(){return CM()}function CM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class gc extends Error{}gc.prototype.name="InvalidTokenError";function NM(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function TM(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return NM(e)}catch{return atob(e)}}function ME(n,e){if(typeof n!="string")throw new gc("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,r=n.split(".")[t];if(typeof r!="string")throw new gc(`Invalid token specified: missing part #${t+1}`);let s;try{s=TM(r)}catch(o){throw new gc(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new gc(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}var AM=Object.defineProperty,kM=(n,e,t)=>e in n?AM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$r=(n,e,t)=>kM(n,typeof e!="symbol"?e+"":e,t);const MM=20*24*60*60*1e3,I1=2;class OM{constructor(e,t,r){$r(this,"authState",{state:"noAuth"}),$r(this,"configVersion",0),$r(this,"syncState"),$r(this,"authenticate"),$r(this,"stopSocket"),$r(this,"tryRestartSocket"),$r(this,"pauseSocket"),$r(this,"resumeSocket"),$r(this,"clearAuth"),$r(this,"logger"),$r(this,"refreshTokenLeewaySeconds"),$r(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=I1){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${I1-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:s}=t;if(!r||!s){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const o=s-r;if(o<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let l=Math.min(MM,(o-this.refreshTokenLeewaySeconds)*1e3);l<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${o}s`),l=0);const u=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},l);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:u,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${l}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const r=++this.configVersion;this._logVerbose(`fetching token with config version ${r}`);const s=await e(t);return this.configVersion!==r?(this._logVerbose(`stale config version, expected ${r}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:s}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return ME(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const RM=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function DM(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function _M(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function jM(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of RM){const r=performance.getEntriesByName(t).filter(s=>s.entryType==="mark").filter(s=>s.detail.sessionId===n);e.push(...r)}return e.map(_M)}var LM=Object.defineProperty,BM=(n,e,t)=>e in n?LM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xn=(n,e,t)=>BM(n,typeof e!="symbol"?e+"":e,t);class zM{constructor(e,t,r){if(xn(this,"address"),xn(this,"state"),xn(this,"requestManager"),xn(this,"webSocketManager"),xn(this,"authenticationManager"),xn(this,"remoteQuerySet"),xn(this,"optimisticQueryResults"),xn(this,"_transitionHandlerCounter",0),xn(this,"_nextRequestId"),xn(this,"_onTransitionFns",new Map),xn(this,"_sessionId"),xn(this,"firstMessageReceived",!1),xn(this,"debug"),xn(this,"logger"),xn(this,"maxObservedTimestamp"),xn(this,"connectionStateSubscribers",new Map),xn(this,"nextConnectionStateSubscriberId",0),xn(this,"_lastPublishedConnectionState"),xn(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const v=this.connectionState();if(JSON.stringify(v)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=v;for(const w of this.connectionStateSubscribers.values())w(v)}})}),xn(this,"mark",v=>{this.debug&&DM(v,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&bE(e),r={...r};const s=r.authRefreshTokenLeewaySeconds??2;let o=r.webSocketConstructor;if(!o&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");o=o||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger===!1?j0({verbose:r.verbose??!1}):r.logger!==!0&&r.logger?r.logger:_0({verbose:r.verbose??!1});const l=e.search("://");if(l===-1)throw new Error("Provided address was not an absolute URL.");const u=e.substring(l+3),d=e.substring(0,l);let h;if(d==="http")h="ws";else if(d==="https")h="wss";else throw new Error(`Unknown parent protocol ${d}`);const p=`${h}://${u}/api/${Oo}/sync`;this.state=new Yk,this.remoteQuerySet=new L1(v=>this.state.queryPath(v),this.logger),this.requestManager=new Zk(this.logger,this.markConnectionStateDirty);const m=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new OM(this.state,{authenticate:v=>{const w=this.state.setAuth(v);return this.webSocketManager.sendMessage(w),w.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:m,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:s}),this.optimisticQueryResults=new oM,this.addOnTransitionHandler(v=>{t(v.queries.map(w=>w.token))}),this._nextRequestId=0,this._sessionId=EM();const{unsavedChangesWarning:x}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(x===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else x!==!1&&window.addEventListener("beforeunload",v=>{if(this.requestManager.hasIncompleteRequests()){v.preventDefault();const w="Are you sure you want to leave? Your changes may not be saved.";return(v||window.event).returnValue=w,w}});this.webSocketManager=new SM(p,{onOpen:v=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...v,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const w=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new L1(T=>this.state.queryPath(T),this.logger);const[S,C]=this.state.restart(w);C&&this.webSocketManager.sendMessage(C),this.webSocketManager.sendMessage(S);for(const T of this.requestManager.restart())this.webSocketManager.sendMessage(T)},onResume:()=>{const[v,w]=this.state.resume();w&&this.webSocketManager.sendMessage(w),v&&this.webSocketManager.sendMessage(v);for(const S of this.requestManager.resume())this.webSocketManager.sendMessage(S)},onMessage:v=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),v.type){case"Transition":{this.observedTimestamp(v.endVersion.ts),this.authenticationManager.onTransition(v),this.remoteQuerySet.transition(v),this.state.transition(v);const w=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(w);break}case"MutationResponse":{v.success&&this.observedTimestamp(v.ts);const w=this.requestManager.onResponse(v);w!==null&&this.notifyOnQueryResultChanges(new Map([[w.requestId,w.result]]));break}case"ActionResponse":{this.requestManager.onResponse(v);break}case"AuthError":{this.authenticationManager.onAuthError(v);break}case"FatalError":{const w=Kk(this.logger,v.error);throw this.webSocketManager.terminate(),w}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:r.onServerDisconnectError},o,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),r.expectAuth&&m()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[o,l]of t){const u=this.state.queryToken(o);if(u!==null){const d={result:l,udfPath:this.state.queryPath(o),args:this.state.queryArgs(o)};r.set(u,d)}}const s=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:s.map(o=>{const l=this.optimisticQueryResults.rawQueryResult(o);return{token:o,modification:{kind:"Updated",result:l.result}}}),reflectedMutations:Array.from(e).map(([o,l])=>({requestId:o,result:l})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}getCurrentAuthClaims(){const e=this.state.getAuth();let t={};if(e&&e.tokenType==="User")try{t=e?ME(e.value):{}}catch{t={}}else return;return{token:e.value,decoded:t}}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){const s=dr(t),{modification:o,queryToken:l,unsubscribe:u}=this.state.subscribe(e,s,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return o!==null&&this.webSocketManager.sendMessage(o),{queryToken:l,unsubscribe:()=>{const d=u();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(e,t){const r=dr(t),s=Io(e,r);return this.optimisticQueryResults.queryResult(s)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const r=dr(t),s=Io(e,r);return this.optimisticQueryResults.queryLogs(s)}queryJournal(e,t){const r=dr(t),s=Io(e,r);return this.state.queryJournal(s)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(e){const t=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(t,e),()=>{this.connectionStateSubscribers.delete(t)}}async mutation(e,t,r){const s=await this.mutationInternal(e,t,r);if(!s.success)throw s.errorData!==void 0?Ug(s,new _o(Qa("mutation",e,s))):new Error(Qa("mutation",e,s));return s.value}async mutationInternal(e,t,r,s){const{mutationPromise:o}=this.enqueueMutation(e,t,r,s);return o}enqueueMutation(e,t,r,s){const o=dr(t);this.tryReportLongDisconnect();const l=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const p=r.optimisticUpdate;if(p!==void 0){const m=w=>{p(w,o)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},v=this.optimisticQueryResults.applyOptimisticUpdate(m,l).map(w=>{const S=this.localQueryResultByToken(w);return{token:w,modification:{kind:"Updated",result:S===void 0?void 0:{success:!0,value:S,logLines:[]}}}});this.handleTransition({queries:v,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const u={type:"Mutation",requestId:l,udfPath:e,componentPath:s,args:[Kr(o)]},d=this.webSocketManager.sendMessage(u),h=this.requestManager.request(u,d);return{requestId:l,mutationPromise:h}}async action(e,t){const r=await this.actionInternal(e,t);if(!r.success)throw r.errorData!==void 0?Ug(r,new _o(Qa("action",e,r))):new Error(Qa("action",e,r));return r.value}async actionInternal(e,t,r){const s=dr(t),o=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const l={type:"Action",requestId:o,udfPath:e,componentPath:r,args:[Kr(s)]},u=this.webSocketManager.sendMessage(l);return this.requestManager.request(l,u)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=jM(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Oo}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var IM=Object.defineProperty,HM=(n,e,t)=>e in n?IM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wi=(n,e,t)=>HM(n,typeof e!="symbol"?e+"":e,t);const Dd=560;class UM{constructor(e,t){if(Wi(this,"address"),Wi(this,"auth"),Wi(this,"adminAuth"),Wi(this,"encodedTsPromise"),Wi(this,"debug"),Wi(this,"fetchOptions"),Wi(this,"logger"),Wi(this,"mutationQueue",[]),Wi(this,"isProcessingQueue",!1),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");(t??{}).skipConvexDeploymentUrlCheck!==!0&&bE(e),this.logger=(t==null?void 0:t.logger)===!1?j0({verbose:!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:_0({verbose:!1}),this.address=e,this.debug=!0,this.auth=void 0,this.adminAuth=void 0,t!=null&&t.auth&&this.setAuth(t.auth)}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const r=new TextEncoder().encode(JSON.stringify(t)),s=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${s}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const r=dr(t[0]),s=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:s})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!r.ok)throw new Error(await r.text());const{ts:s}=await r.json();return s}async query(e,...t){const r=dr(t[0]);return await this.queryInner(e,r,{})}async queryInner(e,t,r){const s=An(e),o=[Kr(t)],l={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const u=fetch,d=r.timestampPromise?await r.timestampPromise:void 0,h=JSON.stringify({path:s,format:"convex_encoded_json",args:o,...d?{ts:d}:{}}),p=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,m=await u(p,{...this.fetchOptions,body:h,method:"POST",headers:l});if(!m.ok&&m.status!==Dd)throw new Error(await m.text());const x=await m.json();if(this.debug)for(const v of x.logLines??[])Gs(this.logger,"info","query",s,v);switch(x.status){case"success":return ri(x.value);case"error":throw x.errorData!==void 0?_d(x.errorData,new _o(x.errorMessage)):new Error(x.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(x)}`)}}async mutationInner(e,t){const r=An(e),s=JSON.stringify({path:r,format:"convex_encoded_json",args:[Kr(t)]}),o={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?o.Authorization=`Convex ${this.adminAuth}`:this.auth&&(o.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:s,method:"POST",headers:o});if(!u.ok&&u.status!==Dd)throw new Error(await u.text());const d=await u.json();if(this.debug)for(const h of d.logLines??[])Gs(this.logger,"info","mutation",r,h);switch(d.status){case"success":return ri(d.value);case"error":throw d.errorData!==void 0?_d(d.errorData,new _o(d.errorMessage)):new Error(d.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(d)}`)}}async processMutationQueue(){if(!this.isProcessingQueue){for(this.isProcessingQueue=!0;this.mutationQueue.length>0;){const{mutation:e,args:t,resolve:r,reject:s}=this.mutationQueue.shift();try{const o=await this.mutationInner(e,t);r(o)}catch(o){s(o)}}this.isProcessingQueue=!1}}enqueueMutation(e,t){return new Promise((r,s)=>{this.mutationQueue.push({mutation:e,args:t,resolve:r,reject:s}),this.processMutationQueue()})}async mutation(e,...t){const[r,s]=t,o=dr(r);return s!=null&&s.skipQueue?await this.mutationInner(e,o):await this.enqueueMutation(e,o)}async action(e,...t){const r=dr(t[0]),s=An(e),o=JSON.stringify({path:s,format:"convex_encoded_json",args:[Kr(r)]}),l={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:o,method:"POST",headers:l});if(!d.ok&&d.status!==Dd)throw new Error(await d.text());const h=await d.json();if(this.debug)for(const p of h.logLines??[])Gs(this.logger,"info","action",s,p);switch(h.status){case"success":return ri(h.value);case"error":throw h.errorData!==void 0?_d(h.errorData,new _o(h.errorMessage)):new Error(h.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(h)}`)}}async function(e,t,...r){const s=dr(r[0]),o=typeof e=="string"?e:An(e),l=JSON.stringify({componentPath:t,path:o,format:"convex_encoded_json",args:Kr(s)}),u={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const h=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!h.ok&&h.status!==Dd)throw new Error(await h.text());const p=await h.json();if(this.debug)for(const m of p.logLines??[])Gs(this.logger,"info","any",o,m);switch(p.status){case"success":return ri(p.value);case"error":throw p.errorData!==void 0?_d(p.errorData,new _o(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}}function _d(n,e){return e.data=ri(n),e}function $M({getCurrentValue:n,subscribe:e}){const[t,r]=N.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let s=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(s=n(),r({getCurrentValue:n,subscribe:e,value:s})),N.useEffect(()=>{let o=!1;const l=()=>{o||r(d=>{if(d.getCurrentValue!==n||d.subscribe!==e)return d;const h=n();return d.value===h?d:{...d,value:h}})},u=e(l);return l(),()=>{o=!0,u()}},[n,e]),s}var PM=Object.defineProperty,qM=(n,e,t)=>e in n?PM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zs=(n,e,t)=>qM(n,typeof e!="symbol"?e+"":e,t);const VM=5e3;if(typeof se>"u")throw new Error("Required dependency 'react' not found");function OE(n,e,t){function r(s){return QM(s),e.mutation(n,s,{optimisticUpdate:t})}return r.withOptimisticUpdate=function(o){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${An(n)}`);return OE(n,e,o)},r}function FM(n,e){return function(t){return e.action(n,t)}}class GM{constructor(e,t){if(zs(this,"address"),zs(this,"cachedSync"),zs(this,"listeners"),zs(this,"options"),zs(this,"closed",!1),zs(this,"_logger"),zs(this,"adminAuth"),zs(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(t==null?void 0:t.logger)===!1?j0({verbose:(t==null?void 0:t.verbose)??!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:_0({verbose:(t==null?void 0:t.verbose)??!1}),this.options={...t,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new zM(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[r,s]=t,o=An(e);return{onUpdate:l=>{const{queryToken:u,unsubscribe:d}=this.sync.subscribe(o,r,s),h=this.listeners.get(u);return h!==void 0?h.add(l):this.listeners.set(u,new Set([l])),()=>{if(this.closed)return;const p=this.listeners.get(u);p.delete(l),p.size===0&&this.listeners.delete(u),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(o,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(o,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(o,r)}}}prewarmQuery(e){const t=e.extendSubscriptionFor??VM,s=this.watchQuery(e.query,e.args||{}).onUpdate(()=>{});setTimeout(s,t)}mutation(e,...t){const[r,s]=t,o=An(e);return this.sync.mutation(o,r,s)}action(e,...t){const r=An(e);return this.sync.action(r,...t)}query(e,...t){const r=this.watchQuery(e,...t),s=r.localQueryResult();return s!==void 0?Promise.resolve(s):new Promise((o,l)=>{const u=r.onUpdate(()=>{u();try{o(r.localQueryResult())}catch(d){l(d)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(e){return this.sync.subscribeToConnectionState(e)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){for(const t of e){const r=this.listeners.get(t);if(r)for(const s of r)s()}}}const ph=se.createContext(void 0);function KM(){return N.useContext(ph)}const WM=({client:n,children:e})=>se.createElement(ph.Provider,{value:n},e);function It(n,...e){const t=e[0]==="skip",r=e[0]==="skip"?{}:dr(e[0]),s=typeof n=="string"?L0(n):n,o=An(s),l=N.useMemo(()=>t?{}:{query:{query:s,args:r}},[JSON.stringify(Kr(r)),o,t]),d=ZM(l).query;if(d instanceof Error)throw d;return d}function _t(n){const e=typeof n=="string"?L0(n):n,t=N.useContext(ph);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return N.useMemo(()=>OE(e,t),[t,An(e)])}function xf(n){const e=N.useContext(ph),t=typeof n=="string"?L0(n):n;if(e===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return N.useMemo(()=>FM(t,e),[e,An(t)])}function QM(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var YM=Object.defineProperty,XM=(n,e,t)=>e in n?YM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ym=(n,e,t)=>XM(n,typeof e!="symbol"?e+"":e,t);class JM{constructor(e){Ym(this,"createWatch"),Ym(this,"queries"),Ym(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:r,args:s}=e[t];if(An(r),this.queries[t]===void 0)this.addQuery(t,r,s);else{const o=this.queries[t];(An(r)!==An(o.query)||JSON.stringify(Kr(s))!==JSON.stringify(Kr(o.args)))&&(this.removeQuery(t),this.addQuery(t,r,s))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const r of Object.keys(e)){const{query:s,args:o}=e[r];An(s);const l=this.createWatch(s,o);let u;try{u=l.localQueryResult()}catch(d){if(d instanceof Error)u=d;else throw d}t[r]=u}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:r,args:s,watch:o}=this.queries[t],l=o.journal();this.removeQuery(t),this.addQuery(t,r,s,l)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,s){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const o=this.createWatch(t,r,s),l=o.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:o,unsubscribe:l}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function ZM(n){const e=KM();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=N.useMemo(()=>(r,s,o)=>e.watchQuery(r,s,o?{journal:o}:{}),[e]);return eO(n,t)}function eO(n,e){const[t]=N.useState(()=>new JM(e));t.createWatch!==e&&t.setCreateWatch(e),N.useEffect(()=>()=>t.destroy(),[t]);const r=N.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:s=>(t.setQueries(n),t.subscribe(s))}),[t,n]);return $M(r)}const RE=N.createContext(void 0);function B0(){const n=N.useContext(RE);if(n===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return n}function tO({children:n,client:e,useAuth:t}){const{isLoading:r,isAuthenticated:s,fetchAccessToken:o}=t(),[l,u]=N.useState(null);return r&&l!==null&&u(null),!r&&!s&&l!==!1&&u(!1),se.createElement(RE.Provider,{value:{isLoading:l===null,isAuthenticated:s&&(l??!1)}},se.createElement(nO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}),se.createElement(WM,{client:e},n),se.createElement(rO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}))}function nO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return N.useEffect(()=>{let o=!0;if(n)return r.setAuth(e,l=>{o&&s(()=>l)}),()=>{o=!1,s(l=>l?!1:null)}},[n,e,t,r,s]),null}function rO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return N.useEffect(()=>{if(n)return()=>{r.clearAuth(),s(()=>null)}},[n,e,t,r,s]),null}function iO({children:n}){const{isLoading:e,isAuthenticated:t}=B0();return e||!t?null:se.createElement(se.Fragment,null,n)}function sO({children:n}){const{isLoading:e,isAuthenticated:t}=B0();return e||t?null:se.createElement(se.Fragment,null,n)}const DE=N.createContext(void 0),_E=N.createContext(void 0);function oO(){return N.useContext(_E)}const aO=N.createContext(null),Xm="__convexAuthOAuthVerifier",jd="__convexAuthJWT",Ld="__convexAuthRefreshToken",H1="__convexAuthServerStateFetchTime";function lO({client:n,serverState:e,onChange:t,storage:r,storageNamespace:s,replaceURL:o,children:l}){const u=N.useRef((e==null?void 0:e._state.token)??null),[d,h]=N.useState(u.current===null),[p,m]=N.useState(u.current),x=n.verbose??!1,v=N.useCallback(ce=>{x&&console.debug(`${new Date().toISOString()} ${ce}`)},[x]),{storageSet:w,storageGet:S,storageRemove:C,storageKey:T}=cO(r,s),[L,R]=N.useState(!1),k=N.useCallback(async ce=>{const ve=u.current!==null;let pe;if(ce.tokens===null)u.current=null,ce.shouldStore&&(await C(jd),await C(Ld)),pe=null;else{const{token:z}=ce.tokens;if(u.current=z,ce.shouldStore){const{refreshToken:D}=ce.tokens;await w(jd,z),await w(Ld,D)}pe=z}ve!==(pe!==null)&&await(t==null?void 0:t()),m(pe),h(!1)},[w,C]);N.useEffect(()=>{const ce=async ve=>{if(L){ve.preventDefault();const pe="Are you sure you want to leave? Your changes may not be saved.";return ve.returnValue=!0,pe}};return U1("beforeunload",ce),()=>{$1("beforeunload",ce)}}),N.useEffect(()=>{const ce=ve=>{(async()=>{if(ve.storageArea===r&&ve.key===T(jd)){const pe=ve.newValue;v(`synced access token, is null: ${pe===null}`),await k({shouldStore:!1,tokens:pe===null?null:{token:pe}})}})()};return U1("storage",ce),()=>$1("storage",ce)},[k]);const j=N.useCallback(async ce=>{const{tokens:ve}=await n.unauthenticatedCall("auth:signIn","code"in ce?{params:{code:ce.code},verifier:ce.verifier}:ce);return v(`retrieved tokens, is null: ${ve===null}`),await k({shouldStore:!0,tokens:ve??null}),ve!==null},[n,k]),H=N.useCallback(async(ce,ve)=>{const pe=ve instanceof FormData?Array.from(ve.entries()).reduce(($,[B,ee])=>($[B]=ee,$),{}):ve??{},z=await S(Xm)??void 0;await C(Xm);const D=await n.authenticatedCall("auth:signIn",{provider:ce,params:pe,verifier:z});if(D.redirect!==void 0){const $=new URL(D.redirect);return await w(Xm,D.verifier),window.location!==void 0&&(window.location.href=$.toString()),{signingIn:!1,redirect:$}}else if(D.tokens!==void 0){const{tokens:$}=D;return v(`signed in and got tokens, is null: ${$===null}`),await k({shouldStore:!0,tokens:$}),{signingIn:D.tokens!==null}}return{signingIn:!1}},[n,k,S]),U=N.useCallback(async()=>{try{await n.authenticatedCall("auth:signOut")}catch{}v("signed out, erasing tokens"),await k({shouldStore:!0,tokens:null})},[k,n]),J=N.useCallback(async({forceRefreshToken:ce})=>{if(ce){const ve=u.current;return await dO(Ld,async()=>{const pe=u.current;if(pe!==ve)return v(`returning synced token, is null: ${pe===null}`),pe;const z=await S(Ld)??null;return z!==null?(R(!0),await j({refreshToken:z}).finally(()=>{R(!1)}),v(`returning retrieved token, is null: ${pe===null}`),u.current):(R(!1),v("returning null, there is no refresh token"),null)})}return u.current},[j,U,S]),re=N.useRef(!1);N.useEffect(()=>{if(r===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ce=async()=>{const pe=await S(jd)??null;v(`retrieved token from storage, is null: ${pe===null}`),await k({shouldStore:!1,tokens:pe===null?null:{token:pe}})};if(e!==void 0){const pe=S(H1),z=D=>{if(!D||e._timeFetched>+D){const{token:$,refreshToken:B}=e._state,ee=$===null||B===null?null:{token:$,refreshToken:B};w(H1,e._timeFetched.toString()),k({tokens:ee,shouldStore:!0})}else ce()};pe instanceof Promise?pe.then(z):z(pe);return}const ve=typeof(window==null?void 0:window.location)<"u"?new URLSearchParams(window.location.search).get("code"):null;if(re.current||ve){if(ve&&!re.current){re.current=!0;const pe=new URL(window.location.href);pe.searchParams.delete("code"),(async()=>(await o(pe.pathname+pe.search+pe.hash),await H(void 0,{code:ve}),re.current=!1))()}}else ce()},[n,S]);const fe=N.useMemo(()=>({signIn:H,signOut:U}),[H,U]),be=p!==null,ae=N.useMemo(()=>({isLoading:d,isAuthenticated:be,fetchAccessToken:J}),[J,d,be]);return b.jsx(_E.Provider,{value:ae,children:b.jsx(DE.Provider,{value:fe,children:b.jsx(aO.Provider,{value:p,children:l})})})}function cO(n,e){const t=uO(),r=N.useMemo(()=>n??t(),[n]),s=e.replace(/[^a-zA-Z0-9]/g,""),o=N.useCallback(h=>`${h}_${s}`,[e]),l=N.useCallback((h,p)=>r.setItem(o(h),p),[r,o]),u=N.useCallback(h=>r.getItem(o(h)),[r,o]),d=N.useCallback(h=>r.removeItem(o(h)),[r,o]);return{storageSet:l,storageGet:u,storageRemove:d,storageKey:o}}function uO(){const[n,e]=N.useState({});return()=>({getItem:t=>n[t],setItem:(t,r)=>{e(s=>({...s,[t]:r}))},removeItem:t=>{e(r=>{const{[t]:s,...o}=r;return o})}})}async function dO(n,e){var r;const t=(r=window==null?void 0:window.navigator)==null?void 0:r.locks;return t!==void 0?await t.request(n,e):await fO(n,e)}function Bd(n){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[n];return e===void 0&&(globalThis.__convexAuthMutexes[n]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[n],e}function Jm(n,e){globalThis.__convexAuthMutexes[n]=e}async function jE(n,e){const t=Bd(n);t.currentlyRunning===null?Jm(n,{currentlyRunning:e().finally(()=>{const r=Bd(n).waiting.shift();Bd(n).currentlyRunning=null,Jm(n,{...Bd(n),currentlyRunning:r===void 0?null:jE(n,r)})}),waiting:[]}):Jm(n,{...t,waiting:[...t.waiting,e]})}async function fO(n,e){return new Promise((r,s)=>{jE(n,()=>e().then(l=>r(l)).catch(l=>s(l)))})}function U1(n,e,t){var r;(r=window.addEventListener)==null||r.call(window,n,e,t)}function $1(n,e,t){var r;(r=window.removeEventListener)==null||r.call(window,n,e,t)}function LE(){return N.useContext(DE)}function hO(n){const{client:e,storage:t,storageNamespace:r,replaceURL:s,children:o}=n,l=N.useMemo(()=>{var u;return{authenticatedCall(d,h){return e.action(d,h)},unauthenticatedCall(d,h){return new UM(e.address).action(d,h)},verbose:(u=e.options)==null?void 0:u.verbose}},[e]);return b.jsx(lO,{client:l,storage:t??(typeof window>"u"||window==null?void 0:window.localStorage),storageNamespace:r??e.address,replaceURL:s??(u=>{window.history.replaceState({},"",u)}),children:b.jsx(tO,{client:e,useAuth:oO,children:o})})}/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var P1="popstate";function pO(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return $g("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:$c(s)}return gO(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mO(){return Math.random().toString(36).substring(2,10)}function q1(n,e){return{usr:n.state,key:n.key,idx:e}}function $g(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:t,key:e&&e.key||r||mO()}}function $c({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function dl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function gO(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let C=p(),T=C==null?null:C-h;h=C,d&&d({action:u,location:S.location,delta:T})}function x(C,T){u="PUSH";let L=$g(S.location,C,T);h=p()+1;let R=q1(L,h),k=S.createHref(L);try{l.pushState(R,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(k)}o&&d&&d({action:u,location:S.location,delta:1})}function v(C,T){u="REPLACE";let L=$g(S.location,C,T);h=p();let R=q1(L,h),k=S.createHref(L);l.replaceState(R,"",k),o&&d&&d({action:u,location:S.location,delta:0})}function w(C){return yO(C)}let S={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(P1,m),d=C,()=>{s.removeEventListener(P1,m),d=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let T=w(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:v,go(C){return l.go(C)}};return S}function yO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:$c(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function BE(n,e,t="/"){return bO(n,e,t,!1)}function bO(n,e,t,r){let s=typeof e=="string"?dl(e):e,o=as(s.pathname||"/",t);if(o==null)return null;let l=zE(n);xO(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=OO(o);u=kO(l[d],h,r)}return u}function zE(n,e=[],t=[],r="",s=!1){let o=(l,u,d=s,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Jt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=rs([r,p.relativePath]),x=t.concat(p);l.children&&l.children.length>0&&(Jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),zE(l.children,e,x,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:TO(m,l.index),routesMeta:x})};return n.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let h of IE(l.path))o(l,u,!0,h)}),e}function IE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=IE(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function xO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var vO=/^:[\w-]+$/,wO=3,SO=2,EO=1,CO=10,NO=-2,V1=n=>n==="*";function TO(n,e){let t=n.split("/"),r=t.length;return t.some(V1)&&(r+=NO),e&&(r+=SO),t.filter(s=>!V1(s)).reduce((s,o)=>s+(vO.test(o)?wO:o===""?EO:CO),r)}function AO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function kO(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),x=d.route;if(!m&&h&&t&&!r[r.length-1].route.index&&(m=vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:rs([o,m.pathname]),pathnameBase:LO(rs([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=rs([o,m.pathnameBase]))}return l}function vf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=MO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},x)=>{if(p==="*"){let w=u[x]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[x];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function MO(n,e=!1,t=!0){oi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function as(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var RO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DO=n=>RO.test(n);function _O(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?dl(n):n,o;if(t)if(DO(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),oi(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=F1(t.substring(1),"/"):o=F1(t,e)}else o=e;return{pathname:o,search:BO(r),hash:zO(s)}}function F1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Zm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HE(n){let e=jO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function UE(n,e,t,r=!1){let s;typeof n=="string"?s=dl(n):(s={...n},Jt(!s.pathname||!s.pathname.includes("?"),Zm("?","pathname","search",s)),Jt(!s.pathname||!s.pathname.includes("#"),Zm("#","pathname","hash",s)),Jt(!s.search||!s.search.includes("#"),Zm("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;s.pathname=x.join("/")}u=m>=0?e[m]:"/"}let d=_O(s,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var rs=n=>n.join("/").replace(/\/\/+/g,"/"),LO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),BO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,zO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function IO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $E=["POST","PUT","PATCH","DELETE"];new Set($E);var HO=["GET",...$E];new Set(HO);var fl=N.createContext(null);fl.displayName="DataRouter";var mh=N.createContext(null);mh.displayName="DataRouterState";N.createContext(!1);var PE=N.createContext({isTransitioning:!1});PE.displayName="ViewTransition";var UO=N.createContext(new Map);UO.displayName="Fetchers";var $O=N.createContext(null);$O.displayName="Await";var Ti=N.createContext(null);Ti.displayName="Navigation";var au=N.createContext(null);au.displayName="Location";var Ai=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var z0=N.createContext(null);z0.displayName="RouteError";function PO(n,{relative:e}={}){Jt(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Ti),{hash:s,pathname:o,search:l}=cu(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:rs([t,o])),r.createHref({pathname:u,search:l,hash:s})}function lu(){return N.useContext(au)!=null}function na(){return Jt(lu(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(au).location}var qE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VE(n){N.useContext(Ti).static||N.useLayoutEffect(n)}function qO(){let{isDataRoute:n}=N.useContext(Ai);return n?rR():VO()}function VO(){Jt(lu(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(fl),{basename:e,navigator:t}=N.useContext(Ti),{matches:r}=N.useContext(Ai),{pathname:s}=na(),o=JSON.stringify(HE(r)),l=N.useRef(!1);return VE(()=>{l.current=!0}),N.useCallback((d,h={})=>{if(oi(l.current,qE),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=UE(d,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rs([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,o,s,n])}N.createContext(null);function FO(){let{matches:n}=N.useContext(Ai),e=n[n.length-1];return e?e.params:{}}function cu(n,{relative:e}={}){let{matches:t}=N.useContext(Ai),{pathname:r}=na(),s=JSON.stringify(HE(t));return N.useMemo(()=>UE(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function GO(n,e){return FE(n,e)}function FE(n,e,t,r,s){var L;Jt(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(Ti),{matches:l}=N.useContext(Ai),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let R=m&&m.path||"";GE(h,!m||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=na(),v;if(e){let R=typeof e=="string"?dl(e):e;Jt(p==="/"||((L=R.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=x;let w=v.pathname||"/",S=w;if(p!=="/"){let R=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=BE(n,{pathname:S});oi(m||C!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),oi(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=XO(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:rs([p,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:rs([p,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),l,t,r,s);return e&&T?N.createElement(au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function KO(){let n=nR(),e=IO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var WO=N.createElement(KO,null),QO=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?N.createElement(Ai.Provider,{value:this.props.routeContext},N.createElement(z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YO({routeContext:n,match:e,children:t}){let r=N.useContext(fl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ai.Provider,{value:n},t)}function XO(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Jt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:x,errors:v}=t,w=m.route.loader&&!x.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=t&&r?(p,m)=>{var x,v;r(p,{location:t.location,params:((v=(x=t.matches)==null?void 0:x[0])==null?void 0:v.params)??{},errorInfo:m})}:void 0;return o.reduceRight((p,m,x)=>{let v,w=!1,S=null,C=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||WO,u&&(d<0&&x===0?(GE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):d===x&&(w=!0,C=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,x+1)),L=()=>{let R;return v?R=S:w?R=C:m.route.Component?R=N.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,N.createElement(YO,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?N.createElement(QO,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:L(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):L()},null)}function I0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JO(n){let e=N.useContext(fl);return Jt(e,I0(n)),e}function ZO(n){let e=N.useContext(mh);return Jt(e,I0(n)),e}function eR(n){let e=N.useContext(Ai);return Jt(e,I0(n)),e}function H0(n){let e=eR(n),t=e.matches[e.matches.length-1];return Jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function tR(){return H0("useRouteId")}function nR(){var r;let n=N.useContext(z0),e=ZO("useRouteError"),t=H0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function rR(){let{router:n}=JO("useNavigate"),e=H0("useNavigate"),t=N.useRef(!1);return VE(()=>{t.current=!0}),N.useCallback(async(s,o={})=>{oi(t.current,qE),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var G1={};function GE(n,e,t){!e&&!G1[n]&&(G1[n]=!0,oi(!1,t))}N.memo(iR);function iR({routes:n,future:e,state:t,unstable_onError:r}){return FE(n,void 0,t,r,e)}function Pg(n){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Jt(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=dl(t));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=t,v=N.useMemo(()=>{let w=as(d,l);return w==null?null:{location:{pathname:w,search:h,hash:p,state:m,key:x},navigationType:r}},[l,d,h,p,m,x,r]);return oi(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:N.createElement(Ti.Provider,{value:u},N.createElement(au.Provider,{children:e,value:v}))}function oR({children:n,location:e}){return GO(qg(n),e)}function qg(n,e=[]){let t=[];return N.Children.forEach(n,(r,s)=>{if(!N.isValidElement(r))return;let o=[...e,s];if(r.type===N.Fragment){t.push.apply(t,qg(r.props.children,o));return}Jt(r.type===Pg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=qg(r.props.children,o)),t.push(l)}),t}var of="get",af="application/x-www-form-urlencoded";function gh(n){return n!=null&&typeof n.tagName=="string"}function aR(n){return gh(n)&&n.tagName.toLowerCase()==="button"}function lR(n){return gh(n)&&n.tagName.toLowerCase()==="form"}function cR(n){return gh(n)&&n.tagName.toLowerCase()==="input"}function uR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dR(n,e){return n.button===0&&(!e||e==="_self")&&!uR(n)}var zd=null;function fR(){if(zd===null)try{new FormData(document.createElement("form"),0),zd=!1}catch{zd=!0}return zd}var hR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eg(n){return n!=null&&!hR.has(n)?(oi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${af}"`),null):n}function pR(n,e){let t,r,s,o,l;if(lR(n)){let u=n.getAttribute("action");r=u?as(u,e):null,t=n.getAttribute("method")||of,s=eg(n.getAttribute("enctype"))||af,o=new FormData(n)}else if(aR(n)||cR(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?as(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||of,s=eg(n.getAttribute("formenctype"))||eg(u.getAttribute("enctype"))||af,o=new FormData(u,n),!fR()){let{name:h,type:p,value:m}=n;if(p==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,m)}}else{if(gh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=of,r=null,s=af,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&as(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function gR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function bR(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await gR(o,t);return l.links?l.links():[]}return[]}));return SR(r.flat(1).filter(yR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function K1(n,e,t,r,s,o){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var p;return t[h].pathname!==d.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var m;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function xR(n,e,{includeHydrateFallback:t}={}){return vR(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function vR(n){return[...new Set(n)]}function wR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function SR(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(wR(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function KE(){let n=N.useContext(fl);return U0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function ER(){let n=N.useContext(mh);return U0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $0=N.createContext(void 0);$0.displayName="FrameworkContext";function WE(){let n=N.useContext($0);return U0(n,"You must render this element inside a <HydratedRouter> element"),n}function CR(n,e){let t=N.useContext($0),[r,s]=N.useState(!1),[o,l]=N.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,x=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let S=T=>{T.forEach(L=>{l(L.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),N.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let v=()=>{s(!0)},w=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,x,{}]:[o,x,{onFocus:fc(u,v),onBlur:fc(d,w),onMouseEnter:fc(h,v),onMouseLeave:fc(p,w),onTouchStart:fc(m,v)}]:[!1,x,{}]}function fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function NR({page:n,...e}){let{router:t}=KE(),r=N.useMemo(()=>BE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(AR,{page:n,matches:r,...e}):null}function TR(n){let{manifest:e,routeModules:t}=WE(),[r,s]=N.useState([]);return N.useEffect(()=>{let o=!1;return bR(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function AR({page:n,matches:e,...t}){let r=na(),{manifest:s,routeModules:o}=WE(),{basename:l}=KE(),{loaderData:u,matches:d}=ER(),h=N.useMemo(()=>K1(n,e,d,s,r,"data"),[n,e,d,s,r]),p=N.useMemo(()=>K1(n,e,d,s,r,"assets"),[n,e,d,s,r]),m=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(T=>{var R;let L=s.routes[T.route.id];!L||!L.hasLoader||(!h.some(k=>k.route.id===T.route.id)&&T.route.id in u&&((R=o[T.route.id])!=null&&R.shouldRevalidate)||L.hasClientLoader?S=!0:w.add(T.route.id))}),w.size===0)return[];let C=mR(n,l,"data");return S&&w.size>0&&C.searchParams.set("_routes",e.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[l,u,r,s,h,e,n,o]),x=N.useMemo(()=>xR(p,s),[p,s]),v=TR(p);return N.createElement(N.Fragment,null,m.map(w=>N.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>N.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:S})=>N.createElement("link",{key:w,nonce:t.nonce,...S})))}function kR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var QE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QE&&(window.__reactRouterVersion="7.9.6")}catch{}function MR({basename:n,children:e,window:t}){let r=N.useRef();r.current==null&&(r.current=pO({window:t,v5Compat:!0}));let s=r.current,[o,l]=N.useState({action:s.action,location:s.location}),u=N.useCallback(d=>{N.startTransition(()=>l(d))},[l]);return N.useLayoutEffect(()=>s.listen(u),[s,u]),N.createElement(sR,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XE=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,...x},v){let{basename:w}=N.useContext(Ti),S=typeof h=="string"&&YE.test(h),C,T=!1;if(typeof h=="string"&&S&&(C=h,QE))try{let re=new URL(window.location.href),fe=h.startsWith("//")?new URL(re.protocol+h):new URL(h),be=as(fe.pathname,w);fe.origin===re.origin&&be!=null?h=be+fe.search+fe.hash:T=!0}catch{oi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=PO(h,{relative:s}),[R,k,j]=CR(r,x),H=_R(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:m});function U(re){e&&e(re),re.defaultPrevented||H(re)}let J=N.createElement("a",{...x,...j,href:C||L,onClick:T||o?e:U,ref:kR(v,k),target:d,"data-discover":!S&&t==="render"?"true":void 0});return R&&!S?N.createElement(N.Fragment,null,J,N.createElement(NR,{page:L})):J});XE.displayName="Link";var OR=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...h},p){let m=cu(l,{relative:h.relative}),x=na(),v=N.useContext(mh),{navigator:w,basename:S}=N.useContext(Ti),C=v!=null&&IR(m)&&u===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,L=x.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(L=L.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&S&&(R=as(R,S)||R);const k=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let j=L===T||!s&&L.startsWith(T)&&L.charAt(k)==="/",H=R!=null&&(R===T||!s&&R.startsWith(T)&&R.charAt(T.length)==="/"),U={isActive:j,isPending:H,isTransitioning:C},J=j?e:void 0,re;typeof r=="function"?re=r(U):re=[r,j?"active":null,H?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let fe=typeof o=="function"?o(U):o;return N.createElement(XE,{...h,"aria-current":J,className:re,ref:p,style:fe,to:l,viewTransition:u},typeof d=="function"?d(U):d)});OR.displayName="NavLink";var RR=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=of,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...x},v)=>{let w=BR(),S=zR(u,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&YE.test(u),L=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let k=R.nativeEvent.submitter,j=(k==null?void 0:k.getAttribute("formmethod"))||l;w(k||R.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:s,state:o,relative:h,preventScrollReset:p,viewTransition:m})};return N.createElement("form",{ref:v,method:C,action:S,onSubmit:r?d:L,...x,"data-discover":!T&&n==="render"?"true":void 0})});RR.displayName="Form";function DR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JE(n){let e=N.useContext(fl);return Jt(e,DR(n)),e}function _R(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=qO(),d=na(),h=cu(n,{relative:o});return N.useCallback(p=>{if(dR(p,e)){p.preventDefault();let m=t!==void 0?t:$c(d)===$c(h);u(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,h,t,r,e,n,s,o,l])}var jR=0,LR=()=>`__${String(++jR)}__`;function BR(){let{router:n}=JE("useSubmit"),{basename:e}=N.useContext(Ti),t=tR();return N.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=pR(r,e);if(s.navigate===!1){let p=s.fetcherKey||LR();await n.fetch(p,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function zR(n,{relative:e}={}){let{basename:t}=N.useContext(Ti),r=N.useContext(Ai);Jt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...cu(n||".",{relative:e})},l=na();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:rs([t,o.pathname])),$c(o)}function IR(n,{relative:e}={}){let t=N.useContext(PE);Jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=JE("useViewTransitionState"),s=cu(n,{relative:e});if(!t.isTransitioning)return!1;let o=as(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=as(t.nextLocation.pathname,r)||t.nextLocation.pathname;return vf(s.pathname,l)!=null||vf(s.pathname,o)!=null}var ZE=yE();const eC=O0(ZE);function tC(n,e){const t={get(r,s){if(typeof s=="string"){const o=[...e,s];return tC(n,o)}else if(s===TE){if(e.length<1){const o=[n,...e].join(".");throw new Error(`API path is expected to be of the form \`${n}.childComponent.functionName\`. Found: \`${o}\``)}return"_reference/childComponent/"+e.join("/")}else return}};return new Proxy({},t)}const HR=()=>tC("components",[]),ze=rM;HR();function UR(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const $R=n=>{switch(n){case"success":return VR;case"info":return GR;case"warning":return FR;case"error":return KR;default:return null}},PR=Array(12).fill(0),qR=({visible:n,className:e})=>se.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},se.createElement("div",{className:"sonner-spinner"},PR.map((t,r)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),VR=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FR=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),GR=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),KR=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),WR=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),QR=()=>{const[n,e]=se.useState(document.hidden);return se.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Vg=1;class YR{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vg++,l=this.toasts.find(d=>d.id===o),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...e,id:o,title:r}),{...d,...e,id:o,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const u=s.then(async h=>{if(l=["resolve",h],se.isValidElement(h))o=!1,this.create({id:r,type:"default",message:h});else if(JR(h)&&!h.ok){o=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,w=typeof m=="object"&&!se.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:x,...w})}else if(h instanceof Error){o=!1;const m=typeof t.error=="function"?await t.error(h):t.error,x=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!se.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:x,...w})}else if(t.success!==void 0){o=!1;const m=typeof t.success=="function"?await t.success(h):t.success,x=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!se.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:x,...w})}}).catch(async h=>{if(l=["reject",h],t.error!==void 0){o=!1;const p=typeof t.error=="function"?await t.error(h):t.error,m=typeof t.description=="function"?await t.description(h):t.description,v=typeof p=="object"&&!se.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...v})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((h,p)=>u.then(()=>l[0]==="reject"?p(l[1]):h(l[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Vg++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ur=new YR,XR=(n,e)=>{const t=(e==null?void 0:e.id)||Vg++;return ur.addToast({title:n,...e,id:t}),t},JR=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",ZR=XR,e5=()=>ur.toasts,t5=()=>ur.getActiveToasts(),qe=Object.assign(ZR,{success:ur.success,info:ur.info,warning:ur.warning,error:ur.error,custom:ur.custom,message:ur.message,promise:ur.promise,dismiss:ur.dismiss,loading:ur.loading},{getHistory:e5,getToasts:t5});UR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Id(n){return n.label!==void 0}const n5=3,r5="24px",i5="16px",W1=4e3,s5=356,o5=14,a5=45,l5=200;function pi(...n){return n.filter(Boolean).join(" ")}function c5(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const u5=n=>{var e,t,r,s,o,l,u,d,h;const{invert:p,toast:m,unstyled:x,interacting:v,setHeights:w,visibleToasts:S,heights:C,index:T,toasts:L,expanded:R,removeToast:k,defaultRichColors:j,closeButton:H,style:U,cancelButtonStyle:J,actionButtonStyle:re,className:fe="",descriptionClassName:be="",duration:ae,position:ce,gap:ve,expandByDefault:pe,classNames:z,icons:D,closeButtonAriaLabel:$="Close toast"}=n,[B,ee]=se.useState(null),[M,q]=se.useState(null),[W,ie]=se.useState(!1),[le,we]=se.useState(!1),[He,Re]=se.useState(!1),[de,Je]=se.useState(!1),[ye,Qe]=se.useState(!1),[Ut,Lt]=se.useState(0),[En,Ot]=se.useState(0),on=se.useRef(m.duration||ae||W1),Cn=se.useRef(null),K=se.useRef(null),Ee=T===0,Ye=T+1<=S,Be=m.type,lt=m.dismissible!==!1,nt=m.className||"",wn=m.descriptionClassName||"",Bt=se.useMemo(()=>C.findIndex(O=>O.toastId===m.id)||0,[C,m.id]),ge=se.useMemo(()=>{var O;return(O=m.closeButton)!=null?O:H},[m.closeButton,H]),Te=se.useMemo(()=>m.duration||ae||W1,[m.duration,ae]),We=se.useRef(0),Ze=se.useRef(0),$t=se.useRef(0),Zt=se.useRef(null),[gr,Y]=ce.split("-"),Ne=se.useMemo(()=>C.reduce((O,Q,ue)=>ue>=Bt?O:O+Q.height,0),[C,Bt]),ke=QR(),pt=m.invert||p,et=Be==="loading";Ze.current=se.useMemo(()=>Bt*ve+Ne,[Bt,Ne]),se.useEffect(()=>{on.current=Te},[Te]),se.useEffect(()=>{ie(!0)},[]),se.useEffect(()=>{const O=K.current;if(O){const Q=O.getBoundingClientRect().height;return Ot(Q),w(ue=>[{toastId:m.id,height:Q,position:m.position},...ue]),()=>w(ue=>ue.filter(De=>De.toastId!==m.id))}},[w,m.id]),se.useLayoutEffect(()=>{if(!W)return;const O=K.current,Q=O.style.height;O.style.height="auto";const ue=O.getBoundingClientRect().height;O.style.height=Q,Ot(ue),w(De=>De.find(Ge=>Ge.toastId===m.id)?De.map(Ge=>Ge.toastId===m.id?{...Ge,height:ue}:Ge):[{toastId:m.id,height:ue,position:m.position},...De])},[W,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const St=se.useCallback(()=>{we(!0),Lt(Ze.current),w(O=>O.filter(Q=>Q.toastId!==m.id)),setTimeout(()=>{k(m)},l5)},[m,k,w,Ze]);se.useEffect(()=>{if(m.promise&&Be==="loading"||m.duration===1/0||m.type==="loading")return;let O;return R||v||ke?(()=>{if($t.current<We.current){const De=new Date().getTime()-We.current;on.current=on.current-De}$t.current=new Date().getTime()})():(()=>{on.current!==1/0&&(We.current=new Date().getTime(),O=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),St()},on.current))})(),()=>clearTimeout(O)},[R,v,m,Be,ke,St]),se.useEffect(()=>{m.delete&&(St(),m.onDismiss==null||m.onDismiss.call(m,m))},[St,m.delete]);function en(){var O;if(D!=null&&D.loading){var Q;return se.createElement("div",{className:pi(z==null?void 0:z.loader,m==null||(Q=m.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":Be==="loading"},D.loading)}return se.createElement(qR,{className:pi(z==null?void 0:z.loader,m==null||(O=m.classNames)==null?void 0:O.loader),visible:Be==="loading"})}const Yn=m.icon||(D==null?void 0:D[Be])||$R(Be);var yr,Pt;return se.createElement("li",{tabIndex:0,ref:K,className:pi(fe,nt,z==null?void 0:z.toast,m==null||(e=m.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[Be],m==null||(t=m.classNames)==null?void 0:t[Be]),"data-sonner-toast":"","data-rich-colors":(yr=m.richColors)!=null?yr:j,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":ye,"data-removed":le,"data-visible":Ye,"data-y-position":gr,"data-x-position":Y,"data-index":T,"data-front":Ee,"data-swiping":He,"data-dismissible":lt,"data-type":Be,"data-invert":pt,"data-swipe-out":de,"data-swipe-direction":M,"data-expanded":!!(R||pe&&W),"data-testid":m.testId,style:{"--index":T,"--toasts-before":T,"--z-index":L.length-T,"--offset":`${le?Ut:Ze.current}px`,"--initial-height":pe?"auto":`${En}px`,...U,...m.style},onDragEnd:()=>{Re(!1),ee(null),Zt.current=null},onPointerDown:O=>{O.button!==2&&(et||!lt||(Cn.current=new Date,Lt(Ze.current),O.target.setPointerCapture(O.pointerId),O.target.tagName!=="BUTTON"&&(Re(!0),Zt.current={x:O.clientX,y:O.clientY})))},onPointerUp:()=>{var O,Q,ue;if(de||!lt)return;Zt.current=null;const De=Number(((O=K.current)==null?void 0:O.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),gt=Number(((Q=K.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ge=new Date().getTime()-((ue=Cn.current)==null?void 0:ue.getTime()),Ce=B==="x"?De:gt,Ae=Math.abs(Ce)/Ge;if(Math.abs(Ce)>=a5||Ae>.11){Lt(Ze.current),m.onDismiss==null||m.onDismiss.call(m,m),q(B==="x"?De>0?"right":"left":gt>0?"down":"up"),St(),Je(!0);return}else{var _e,yt;(_e=K.current)==null||_e.style.setProperty("--swipe-amount-x","0px"),(yt=K.current)==null||yt.style.setProperty("--swipe-amount-y","0px")}Qe(!1),Re(!1),ee(null)},onPointerMove:O=>{var Q,ue,De;if(!Zt.current||!lt||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;const Ge=O.clientY-Zt.current.y,Ce=O.clientX-Zt.current.x;var Ae;const _e=(Ae=n.swipeDirections)!=null?Ae:c5(ce);!B&&(Math.abs(Ce)>1||Math.abs(Ge)>1)&&ee(Math.abs(Ce)>Math.abs(Ge)?"x":"y");let yt={x:0,y:0};const Rt=_n=>1/(1.5+Math.abs(_n)/20);if(B==="y"){if(_e.includes("top")||_e.includes("bottom"))if(_e.includes("top")&&Ge<0||_e.includes("bottom")&&Ge>0)yt.y=Ge;else{const _n=Ge*Rt(Ge);yt.y=Math.abs(_n)<Math.abs(Ge)?_n:Ge}}else if(B==="x"&&(_e.includes("left")||_e.includes("right")))if(_e.includes("left")&&Ce<0||_e.includes("right")&&Ce>0)yt.x=Ce;else{const _n=Ce*Rt(Ce);yt.x=Math.abs(_n)<Math.abs(Ce)?_n:Ce}(Math.abs(yt.x)>0||Math.abs(yt.y)>0)&&Qe(!0),(ue=K.current)==null||ue.style.setProperty("--swipe-amount-x",`${yt.x}px`),(De=K.current)==null||De.style.setProperty("--swipe-amount-y",`${yt.y}px`)}},ge&&!m.jsx&&Be!=="loading"?se.createElement("button",{"aria-label":$,"data-disabled":et,"data-close-button":!0,onClick:et||!lt?()=>{}:()=>{St(),m.onDismiss==null||m.onDismiss.call(m,m)},className:pi(z==null?void 0:z.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(Pt=D==null?void 0:D.close)!=null?Pt:WR):null,(Be||m.icon||m.promise)&&m.icon!==null&&((D==null?void 0:D[Be])!==null||m.icon)?se.createElement("div",{"data-icon":"",className:pi(z==null?void 0:z.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||en():null,m.type!=="loading"?Yn:null):null,se.createElement("div",{"data-content":"",className:pi(z==null?void 0:z.content,m==null||(o=m.classNames)==null?void 0:o.content)},se.createElement("div",{"data-title":"",className:pi(z==null?void 0:z.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?se.createElement("div",{"data-description":"",className:pi(be,wn,z==null?void 0:z.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),se.isValidElement(m.cancel)?m.cancel:m.cancel&&Id(m.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||J,onClick:O=>{Id(m.cancel)&&lt&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,O),St())},className:pi(z==null?void 0:z.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,se.isValidElement(m.action)?m.action:m.action&&Id(m.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||re,onClick:O=>{Id(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,O),!O.defaultPrevented&&St())},className:pi(z==null?void 0:z.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function Q1(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function d5(n,e){const t={};return[n,e].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",u=o?i5:r5;function d(h){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?t[`${l}-${h}`]=u:t[`${l}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(u)}),t}const f5=se.forwardRef(function(e,t){const{id:r,invert:s,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:h,offset:p,mobileOffset:m,theme:x="light",richColors:v,duration:w,style:S,visibleToasts:C=n5,toastOptions:T,dir:L=Q1(),gap:R=o5,icons:k,containerAriaLabel:j="Notifications"}=e,[H,U]=se.useState([]),J=se.useMemo(()=>r?H.filter(W=>W.toasterId===r):H.filter(W=>!W.toasterId),[H,r]),re=se.useMemo(()=>Array.from(new Set([o].concat(J.filter(W=>W.position).map(W=>W.position)))),[J,o]),[fe,be]=se.useState([]),[ae,ce]=se.useState(!1),[ve,pe]=se.useState(!1),[z,D]=se.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=se.useRef(null),B=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=se.useRef(null),M=se.useRef(!1),q=se.useCallback(W=>{U(ie=>{var le;return(le=ie.find(we=>we.id===W.id))!=null&&le.delete||ur.dismiss(W.id),ie.filter(({id:we})=>we!==W.id)})},[]);return se.useEffect(()=>ur.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{U(ie=>ie.map(le=>le.id===W.id?{...le,delete:!0}:le))});return}setTimeout(()=>{eC.flushSync(()=>{U(ie=>{const le=ie.findIndex(we=>we.id===W.id);return le!==-1?[...ie.slice(0,le),{...ie[le],...W},...ie.slice(le+1)]:[W,...ie]})})})}),[H]),se.useEffect(()=>{if(x!=="system"){D(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:ie})=>{D(ie?"dark":"light")})}catch{W.addListener(({matches:le})=>{try{D(le?"dark":"light")}catch(we){console.error(we)}})}},[x]),se.useEffect(()=>{H.length<=1&&ce(!1)},[H]),se.useEffect(()=>{const W=ie=>{var le;if(l.every(Re=>ie[Re]||ie.code===Re)){var He;ce(!0),(He=$.current)==null||He.focus()}ie.code==="Escape"&&(document.activeElement===$.current||(le=$.current)!=null&&le.contains(document.activeElement))&&ce(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[l]),se.useEffect(()=>{if($.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,M.current=!1)}},[$.current]),se.createElement("section",{ref:t,"aria-label":`${j} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},re.map((W,ie)=>{var le;const[we,He]=W.split("-");return J.length?se.createElement("ol",{key:W,dir:L==="auto"?Q1():L,tabIndex:-1,ref:$,className:h,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":we,"data-x-position":He,style:{"--front-toast-height":`${((le=fe[0])==null?void 0:le.height)||0}px`,"--width":`${s5}px`,"--gap":`${R}px`,...S,...d5(p,m)},onBlur:Re=>{M.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(M.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||M.current||(M.current=!0,ee.current=Re.relatedTarget)},onMouseEnter:()=>ce(!0),onMouseMove:()=>ce(!0),onMouseLeave:()=>{ve||ce(!1)},onDragEnd:()=>ce(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||pe(!0)},onPointerUp:()=>pe(!1)},J.filter(Re=>!Re.position&&ie===0||Re.position===W).map((Re,de)=>{var Je,ye;return se.createElement(u5,{key:Re.id,icons:k,index:de,toast:Re,defaultRichColors:v,duration:(Je=T==null?void 0:T.duration)!=null?Je:w,className:T==null?void 0:T.className,descriptionClassName:T==null?void 0:T.descriptionClassName,invert:s,visibleToasts:C,closeButton:(ye=T==null?void 0:T.closeButton)!=null?ye:d,interacting:ve,position:W,style:T==null?void 0:T.style,unstyled:T==null?void 0:T.unstyled,classNames:T==null?void 0:T.classNames,cancelButtonStyle:T==null?void 0:T.cancelButtonStyle,actionButtonStyle:T==null?void 0:T.actionButtonStyle,closeButtonAriaLabel:T==null?void 0:T.closeButtonAriaLabel,removeToast:q,toasts:J.filter(Qe=>Qe.position==Re.position),heights:fe.filter(Qe=>Qe.position==Re.position),setHeights:be,expandByDefault:u,gap:R,expanded:ae,swipeDirections:e.swipeDirections})})):null}))});function h5(){const{signIn:n}=LE(),[e,t]=N.useState("signIn"),[r,s]=N.useState(!1);return b.jsx("div",{className:"w-full",children:b.jsxs("form",{className:"flex flex-col gap-form-field",onSubmit:o=>{o.preventDefault(),s(!0);const l=new FormData(o.target);l.set("flow",e),n("password",l).catch(u=>{let d="";u.message.includes("Invalid password")?d="Invalid password. Please try again.":d=e==="signIn"?"Could not sign in, did you mean to sign up?":"Could not sign up, did you mean to sign in?",qe.error(d),s(!1)})},children:[b.jsx("input",{className:"auth-input-field",type:"email",name:"email",placeholder:"Email",required:!0}),b.jsx("input",{className:"auth-input-field",type:"password",name:"password",placeholder:"Password",required:!0}),b.jsx("button",{className:"auth-button",type:"submit",disabled:r,children:e==="signIn"?"Sign in":"Sign up"}),b.jsxs("div",{className:"text-center text-sm text-secondary",children:[b.jsx("span",{children:e==="signIn"?"Don't have an account? ":"Already have an account? "}),b.jsx("button",{type:"button",className:"text-primary hover:text-primary-hover hover:underline font-medium cursor-pointer",onClick:()=>t(e==="signIn"?"signUp":"signIn"),children:e==="signIn"?"Sign up instead":"Sign in instead"})]})]})})}function p5(){const{isAuthenticated:n}=B0(),{signOut:e}=LE();return n?b.jsx("button",{className:"rounded-md border border-neutral-200 px-3 py-1.5 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 hover:text-neutral-800",onClick:()=>void e(),children:"Sign out"}):null}function m5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const g5=N.forwardRef(m5);function y5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const b5=N.forwardRef(y5);function x5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const v5=N.forwardRef(x5);function w5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25"}))}const S5=N.forwardRef(w5);function E5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const lf=N.forwardRef(E5);function C5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const N5=N.forwardRef(C5);function T5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const Fg=N.forwardRef(T5);function A5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const nC=N.forwardRef(A5);function k5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Pc=N.forwardRef(k5);function M5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const O5=N.forwardRef(M5);function R5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const D5=N.forwardRef(R5);function _5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ec=N.forwardRef(_5);function j5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const L5=N.forwardRef(j5);function B5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const z5=N.forwardRef(B5);function I5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const wf=N.forwardRef(I5);function H5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const yh=N.forwardRef(H5);function U5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const P0=N.forwardRef(U5);function $5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const P5=N.forwardRef($5);function q5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const qc=N.forwardRef(q5);function V5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const F5=N.forwardRef(V5);function G5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const K5=N.forwardRef(G5);function W5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Y1=N.forwardRef(W5);function Q5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Y5=N.forwardRef(Q5);function X5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const J5=N.forwardRef(X5);function Z5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const eD=N.forwardRef(Z5);function tD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const nD=N.forwardRef(tD);function rD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const q0=N.forwardRef(rD);function iD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const sD=N.forwardRef(iD);function oD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const V0=N.forwardRef(oD);function aD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const lD=N.forwardRef(aD);function cD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const uD=N.forwardRef(cD);function dD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const jo=N.forwardRef(dD);function fD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"}))}const hD=N.forwardRef(fD);function pD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const mD=N.forwardRef(pD);function gD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const yD=N.forwardRef(gD);function bD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const si=N.forwardRef(bD);function xD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ho=N.forwardRef(xD);function vD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const X1=N.forwardRef(vD);function wD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const J1=N.forwardRef(wD);function SD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Z1=N.forwardRef(SD);function ED({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Uo=N.forwardRef(ED);function CD({collapsed:n,onToggleCollapse:e,activeView:t,onViewChange:r,selectedCaseId:s,onCaseSelect:o}){const l=[{id:"editor",label:"Editor",icon:yh},{id:"hub",label:"Hub",icon:qc},{id:"goals",label:"Goals",icon:nC},{id:"chat",label:"WS Chat",icon:si}];return n?b.jsxs("div",{className:"flex w-16 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[b.jsx("button",{onClick:e,className:"flex h-12 items-center justify-center border-b border-neutral-200 text-neutral-500 transition hover:bg-neutral-100",children:b.jsx(D5,{className:"h-5 w-5"})}),b.jsx("nav",{className:"flex-1 py-4",children:l.map(u=>b.jsxs("button",{onClick:()=>r(u.id),className:`relative flex h-12 w-full items-center justify-center transition ${t===u.id?"bg-neutral-100 text-neutral-900":"text-neutral-500 hover:bg-neutral-100"}`,title:u.label,children:[b.jsx(u.icon,{className:"h-5 w-5"}),t===u.id&&b.jsx("span",{className:"absolute inset-y-0 left-0 w-1 rounded-tr rounded-br bg-neutral-900"})]},u.id))}),b.jsx("div",{className:"border-t border-neutral-200 p-2"})]}):b.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[b.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[b.jsx("div",{className:"mb-4 flex items-center justify-end",children:b.jsx("button",{onClick:e,className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",children:b.jsx(O5,{className:"h-4 w-4"})})}),b.jsx("nav",{className:"space-y-1",children:l.map(u=>b.jsxs("button",{onClick:()=>r(u.id),className:`flex w-full items-center gap-3 rounded-md px-3 py-2 text-sm transition ${t===u.id?"bg-white text-neutral-900 shadow-sm":"text-neutral-600 hover:bg-neutral-100"}`,children:[b.jsx(u.icon,{className:"h-4 w-4"}),u.label]},u.id))})]}),b.jsx("div",{className:"flex-1"})]})}function ND({isOpen:n,onClose:e,documentId:t,documentContent:r}){const[s,o]=N.useState(""),[l,u]=N.useState([]),[d,h]=N.useState(!1),p=N.useRef(null),m=xf(ze.chat.generateAIResponse);N.useEffect(()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})},[l]);const x=async w=>{if(w.preventDefault(),!s.trim()||d)return;const S={id:Date.now().toString(),type:"user",content:s,timestamp:Date.now()};u(T=>[...T,S]);const C=s;o(""),h(!0);try{let T=C;r&&r.trim()&&(T=`Document context: "${r.substring(0,500)}${r.length>500?"...":""}"

User question: ${C}`);const L=await m({userMessage:T,documentId:t});if(L){const R={id:(Date.now()+1).toString(),type:"ai",content:L,timestamp:Date.now()};u(k=>[...k,R])}}catch(T){console.error("AI response error:",T),qe.error("Failed to get AI response");const L={id:(Date.now()+1).toString(),type:"ai",content:"I apologize, but I'm currently unable to provide a response. Please try again later.",timestamp:Date.now()};u(R=>[...R,L])}finally{h(!1)}},v=w=>{o(w)};return n?b.jsxs("div",{className:"w-96 border-l border-gray-200 bg-[#f7f6f3] flex flex-col transition-all duration-300 ease-in-out",children:[b.jsx("div",{className:"px-6 py-5 border-b border-gray-200 bg-[#f7f6f3]",children:b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsxs("div",{className:"flex items-center space-x-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-xl border border-gray-200 bg-white flex items-center justify-center shadow-sm",children:b.jsx(si,{className:"w-5 h-5 text-slate-500"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold text-slate-900 font-sans",children:"Legal AI Assistant"}),b.jsx("p",{className:"text-xs text-slate-500 mt-1 font-sans",children:"Get instant legal insights and document analysis"})]})]}),b.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white border border-transparent hover:border-gray-200 rounded-lg transition-colors","aria-label":"Close AI Assistant",children:b.jsx(Uo,{className:"w-4 h-4 text-slate-400"})})]})}),b.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-4 min-h-0",children:[l.length===0?b.jsxs("div",{className:"text-center py-16",children:[b.jsx("div",{className:"w-14 h-14 rounded-xl border border-gray-200 bg-white flex items-center justify-center mx-auto mb-5 shadow-sm",children:b.jsx(si,{className:"w-6 h-6 text-slate-500"})}),b.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2 font-sans",children:"Welcome to Legal AI Assistant"}),b.jsx("p",{className:"text-xs text-slate-500 max-w-xs mx-auto leading-relaxed font-sans",children:"Ask questions about legal concepts, document analysis, compliance requirements, or get help with your legal research."}),b.jsxs("div",{className:"mt-8 space-y-2 text-left",children:[b.jsx("p",{className:"text-xs font-medium text-slate-600 font-sans",children:"Try asking:"}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("button",{onClick:()=>v("What are the key elements of a valid contract?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are the key elements of a valid contract?"'}),b.jsx("button",{onClick:()=>v("Help me review this document for compliance issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Help me review this document for compliance issues"'}),b.jsx("button",{onClick:()=>v("What are common legal risks in business agreements?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are common legal risks in business agreements?"'}),r&&b.jsx("button",{onClick:()=>v("Analyze this document for potential legal issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Analyze this document for potential legal issues"'})]})]})]}):b.jsxs(b.Fragment,{children:[l.map(w=>b.jsx("div",{className:`flex ${w.type==="user"?"justify-end":"justify-start"}`,children:b.jsxs("div",{className:`max-w-sm px-4 py-3 rounded-2xl shadow-sm ${w.type==="user"?"bg-slate-900 text-white":"bg-white border border-gray-200 text-slate-800"}`,children:[b.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap font-sans",children:w.content}),b.jsx("p",{className:`text-[11px] mt-2 font-sans ${w.type==="user"?"text-slate-300":"text-slate-400"}`,children:new Date(w.timestamp).toLocaleTimeString()})]})},w.id)),d&&b.jsx("div",{className:"flex justify-start",children:b.jsx("div",{className:"bg-white border border-gray-200 text-slate-700 shadow-sm px-4 py-3 rounded-2xl max-w-sm",children:b.jsxs("div",{className:"flex items-center space-x-2",children:[b.jsxs("div",{className:"flex space-x-1",children:[b.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),b.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),b.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),b.jsx("span",{className:"text-sm text-slate-600 font-sans",children:"AI is thinking..."})]})})})]}),b.jsx("div",{ref:p})]}),b.jsxs("div",{className:"px-6 py-5 border-t border-gray-200 bg-[#f7f6f3]",children:[b.jsxs("form",{onSubmit:x,className:"flex items-end space-x-3",children:[b.jsx("div",{className:"flex-1",children:b.jsx("textarea",{value:s,onChange:w=>o(w.target.value),placeholder:"Ask about legal concepts, document analysis, compliance...",className:"w-full px-4 py-3 text-sm border border-gray-200 rounded-xl bg-white resize-none focus:outline-none focus:ring-2 focus:ring-slate-900/10 font-sans leading-relaxed shadow-sm",rows:2,disabled:d,onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),x(w))}})}),b.jsx("button",{type:"submit",disabled:!s.trim()||d,className:"p-3 rounded-xl bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200 shadow-sm","aria-label":"Send message",children:b.jsx(q0,{className:"w-4 h-4"})})]}),b.jsx("p",{className:"text-xs text-slate-500 mt-3 font-sans leading-relaxed",children:"Press Enter to send, Shift+Enter for new line. AI responses are for informational purposes only."})]})]}):null}function Un(n){this.content=n}Un.prototype={constructor:Un,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),o=r.content.slice();return s==-1?o.push(t||n,e):(o[s+1]=e,t&&(o[s]=t)),new Un(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Un(t)},addToStart:function(n,e){return new Un([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Un(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),o=r.find(n);return s.splice(o==-1?s.length:o,0,e,t),new Un(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Un.from(n),n.size?new Un(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Un.from(n),n.size?new Un(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Un.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Un.from=function(n){if(n instanceof Un)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Un(e)};function rC(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let l=0;s.text[l]==o.text[l];l++)t++;return t}if(s.content.size||o.content.size){let l=rC(s.content,o.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function iC(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let l=n.child(--s),u=e.child(--o),d=l.nodeSize;if(l==u){t-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=iC(l.content,u.content,t-1,r-1);if(h)return h}t-=d,r-=d}}class oe{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let l=0,u=0;u<t;l++){let d=this.content[l],h=u+d.nodeSize;if(h>e&&r(d,s+u,o||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,t-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",l=!0;return this.nodesBetween(e,t,(u,d)=>{let h=u.isText?u.text.slice(Math.max(e,d)-d,t-d):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new oe(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],d=l+u.nodeSize;d>e&&((l<e||d>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),s+=u.nodeSize),l=d}return new oe(r,s)}cutByIndex(e,t){return e==t?oe.empty:e==0&&t==this.content.length?this:new oe(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new oe(s,o)}addToStart(e){return new oe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return rC(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return iC(this,e,t,r)}findIndex(e){if(e==0)return Hd(0,e);if(e==this.size)return Hd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),o=r+s.nodeSize;if(o>=e)return o==e?Hd(t+1,o):Hd(t,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return oe.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new oe(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oe.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new oe(t||e,r)}static from(e){if(!e)return oe.empty;if(e instanceof oe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}oe.empty=new oe([],0);const tg={index:0,offset:0};function Hd(n,e){return tg.index=n,tg.offset=e,tg}function Sf(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Sf(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Sf(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let jt=class Gg{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Sf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Gg.none;if(e instanceof Gg)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};jt.none=[];class Ef extends Error{}class Se{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=oC(this.content,e+this.openStart,t);return r&&new Se(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Se(sC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Se.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Se(oe.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new Se(e,r,s)}}Se.empty=new Se(oe.empty,0,0);function sC(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(s==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(sC(o.content,e-s-1,t-s-1)))}function oC(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),l=n.maybeChild(s);if(o==e||l.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=oC(l.content,e-o-1,t,l);return u&&n.replaceChild(s,l.copy(u))}function TD(n,e,t){if(t.openStart>n.depth)throw new Ef("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Ef("Inconsistent open depths");return aC(n,e,t,0)}function aC(n,e,t,r){let s=n.index(r),o=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=aC(n,e,t,r+1);return o.copy(o.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return Po(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=AD(t,n);return Po(o,cC(n,l,u,e,r))}else return Po(o,Cf(n,e,r))}function lC(n,e){if(!e.type.compatibleContent(n.type))throw new Ef("Cannot join "+e.type.name+" onto "+n.type.name)}function Kg(n,e,t){let r=n.node(t);return lC(r,e.node(t)),r}function $o(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Cc(n,e,t,r){let s=(e||n).node(t),o=0,l=e?e.index(t):s.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&($o(n.nodeAfter,r),o++));for(let u=o;u<l;u++)$o(s.child(u),r);e&&e.depth==t&&e.textOffset&&$o(e.nodeBefore,r)}function Po(n,e){return n.type.checkContent(e),n.copy(e)}function cC(n,e,t,r,s){let o=n.depth>s&&Kg(n,e,s+1),l=r.depth>s&&Kg(t,r,s+1),u=[];return Cc(null,n,s,u),o&&l&&e.index(s)==t.index(s)?(lC(o,l),$o(Po(o,cC(n,e,t,r,s+1)),u)):(o&&$o(Po(o,Cf(n,e,s+1)),u),Cc(e,t,s,u),l&&$o(Po(l,Cf(t,r,s+1)),u)),Cc(r,null,s,u),new oe(u)}function Cf(n,e,t){let r=[];if(Cc(null,n,t,r),n.depth>t){let s=Kg(n,e,t+1);$o(Po(s,Cf(n,e,t+1)),r)}return Cc(e,null,t,r),new oe(r)}function AD(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)s=e.node(o).copy(oe.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Vc{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return jt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!s||!o[l].isInSet(s.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Nf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,o=t;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(o),h=o-d;if(r.push(l,u,s+d),!h||(l=l.child(u),l.isText))break;o=h-1,s+=d+1}return new Vc(t,r,o)}static resolveCached(e,t){let r=ew.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else ew.set(e,r=new kD);let s=r.elts[r.i]=Vc.resolve(e,t);return r.i=(r.i+1)%MD,s}}class kD{constructor(){this.elts=[],this.i=0}}const MD=12,ew=new WeakMap;class Nf{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const OD=Object.create(null);let Xs=class Wg{constructor(e,t,r,s=jt.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||oe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Sf(this.attrs,t||e.defaultAttrs||OD)&&jt.sameSet(this.marks,r||jt.none)}copy(e=null){return e==this.content?this:new Wg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Wg(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Se.empty;let s=this.resolve(e),o=this.resolve(t),l=r?0:s.sharedDepth(t),u=s.start(l),h=s.node(l).content.cut(s.pos-u,o.pos-u);return new Se(h,s.depth-l,o.depth-l)}replace(e,t,r){return TD(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Vc.resolveCached(this,e)}resolveNoCache(e){return Vc.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),uC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=oe.empty,s=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let d=s;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=jt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!jt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=oe.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Xs.prototype.text=void 0;class Tf extends Xs{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):uC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Tf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Tf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function uC(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Qo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new RD(e,t);if(r.next==null)return Qo.empty;let s=dC(r);r.next&&r.err("Unexpected trailing text");let o=ID(zD(s));return HD(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let o=t;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function o(l,u){let d=l.matchFragment(e,r);if(d&&(!t||d.validEnd))return oe.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let x=o(m,u.concat(p));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Qo.empty=new Qo(!0);class RD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function dC(n){let e=[];do e.push(DD(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function DD(n){let e=[];do e.push(_D(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function _D(n){let e=BD(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=jD(n,e);else break;return e}function tw(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function jD(n,e){let t=tw(n),r=t;return n.eat(",")&&(n.next!="}"?r=tw(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function LD(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let o in t){let l=t[o];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function BD(n){if(n.eat("(")){let e=dC(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=LD(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function zD(n){let e=[[]];return s(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,d){let h={term:d,to:u};return e[l].push(h),h}function s(l,u){l.forEach(d=>d.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],u);if(d==l.exprs.length-1)return h;s(h,u=t())}else if(l.type=="star"){let d=t();return r(u,d),s(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=t();return s(o(l.expr,u),d),s(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=t();s(o(l.expr,d),p),d=p}if(l.max==-1)s(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=t();r(d,p),s(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function fC(n,e){return e-n}function nw(n,e){let t=[];return r(e),t.sort(fC);function r(s){let o=n[s];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(s);for(let l=0;l<o.length;l++){let{term:u,to:d}=o[l];!u&&t.indexOf(d)==-1&&r(d)}}}function ID(n){let e=Object.create(null);return t(nw(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);nw(n,d).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new Qo(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(fC);o.next.push({type:s[l][0],next:e[u.join(",")]||t(u)})}return o}}function HD(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],o=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:d,next:h}=s.next[u];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hC(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function pC(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let o=n[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function mC(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let o=n[s];o.validate&&o.validate(e[s])}}function gC(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new $D(n,r,e[r]);return t}let rw=class yC{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gC(e,r.attrs),this.defaultAttrs=hC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pC(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Xs(this,this.computeAttrs(e),oe.from(t),jt.setFrom(r))}createChecked(e=null,t,r){return t=oe.from(t),this.checkContent(t),new Xs(this,this.computeAttrs(e),t,jt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=oe.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),o=s&&s.fillBefore(oe.empty,!0);return o?new Xs(this,e,t.append(o),jt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:jt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new yC(o,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function UD(n,e,t){let r=t.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class $D{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?UD(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class bh{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=gC(e,s.attrs),this.excluded=null;let o=hC(this.attrs);this.instance=o?new jt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new jt(this,pC(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((o,l)=>r[o]=new bh(o,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){mC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class bC{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Un.from(e.nodes),t.marks=Un.from(e.marks||{}),this.nodes=rw.compile(this.spec.nodes,this),this.marks=bh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Qo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?iw(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:iw(this,l.split(" "))}this.nodeFromJSON=s=>Xs.fromJSON(this,s),this.markFromJSON=s=>jt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof rw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Tf(r,r.defaultAttrs,e,jt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function iw(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],o=n.marks[s],l=o;if(o)t.push(o);else for(let u in n.marks){let d=n.marks[u];(s=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function PD(n){return n.tag!=null}function qD(n){return n.style!=null}class Js{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(PD(s))this.tags.push(s);else if(qD(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new ow(this,t,!1);return r.addAll(e,jt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ow(this,t,!0);return r.addAll(e,jt.none,t.from,t.to),Se.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(GD(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let d=l.getAttrs(t);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(l=>{r(l=aw(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(l=>{r(l=aw(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Js(e,Js.schemaRules(e)))}}const xC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},VD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vC={ol:!0,ul:!0},Fc=1,Qg=2,Nc=4;function sw(n,e,t){return e!=null?(e?Fc:0)|(e==="full"?Qg:0):n&&n.whitespace=="pre"?Fc|Qg:t&~Nc}class Ud{constructor(e,t,r,s,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=jt.none,this.match=o||(l&Nc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(oe.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Fc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=oe.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ow{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,o,l=sw(null,t.preserveWhitespace,0)|(r?Nc:0);s?o=new Ud(s.type,s.attrs,jt.none,!0,t.topMatch||s.type.contentMatch,l):r?o=new Ud(null,null,jt.none,!0,null,l):o=new Ud(e.schema.topNodeType,null,jt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,o=s.options&Qg?"full":this.localPreserveWS||(s.options&Fc)>0,{schema:l}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),t,!0),u[d]&&this.insertNode(l.text(u[d]),t,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;vC.hasOwnProperty(l)&&this.parser.normalizeLists&&FD(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:VD.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(xC.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=d&&d.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(o,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return t}addElementByRule(e,t,r,s){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,t.attrs||null,r,t.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,s){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t,r){let s,o;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,o=d,!h.length))break;if(d.solid){if(r)break;u+=2}}if(!s)return null;this.sync(o);for(let l=0;l<s.length;l++)t=this.enterInner(s[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=jt.none;for(let u of s.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):lw(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,s){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,s)),o}enterInner(e,t,r,s=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=sw(e,o,l.options);l.options&Nc&&l.content.length==0&&(u|=Nc);let d=jt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):lw(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Ud(e,t,d,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Fc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),l=(u,d)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;d>=o;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&s?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function FD(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&vC.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function GD(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function aw(n){let e={};for(let t in n)e[t]=n[t];return e}function lw(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(s.contentMatch))return!0}}class ra{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ng(t).createDocumentFragment());let s=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,d=0;for(;u<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<o.length;)s=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,t);p&&(o.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=cf(ng(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&cf(ng(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return cf(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ra(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=cw(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return cw(e.marks)}}function cw(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ng(n){return n.document||window.document}const uw=new WeakMap;function KD(n){let e=uw.get(n);return e===void 0&&uw.set(n,e=WD(n)),e}function WD(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function cf(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=KD(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let u,d=t?n.createElementNS(t,s):n.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let x=m.indexOf(" ");x>0?d.setAttributeNS(m.slice(0,x),m.slice(x+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let x=e[m];if(x===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:w}=cf(n,x,t,r);if(d.appendChild(v),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:d,contentDOM:u}}const wC=65535,SC=Math.pow(2,16);function QD(n,e){return n+e*SC}function dw(n){return n&wC}function YD(n){return(n-(n&wC))/SC}const EC=1,CC=2,uf=4,NC=8;class Yg{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&NC)>0}get deletedBefore(){return(this.delInfo&(EC|uf))>0}get deletedAfter(){return(this.delInfo&(CC|uf))>0}get deletedAcross(){return(this.delInfo&uf)>0}}class kr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&kr.empty)return kr.empty}recover(e){let t=0,r=dw(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+YD(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=d+h;if(e<=m){let x=h?e==d?-1:e==m?1:t:t,v=d+s+(x<0?0:p);if(r)return v;let w=e==(t<0?d:m)?null:QD(u/3,e-d),S=e==d?CC:e==m?EC:uf;return(t<0?e!=d:e!=m)&&(S|=NC),new Yg(v,S,w)}s+=p-h}return r?e+s:new Yg(e+s,0,null)}touches(e,t){let r=0,s=dw(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[u+o],p=d+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[s+t],p=this.ranges[s+r];e(u,u+h,d,d+p),o+=p-h}}invert(){return new kr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?kr.empty:new kr(e<0?[0,-e,0]:[0,0,e])}}kr.empty=new kr([]);class Gc{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Gc(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Gc;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new Yg(e,s,null)}}const rg=Object.create(null);class Qn{getMap(){return kr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=rg[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in rg)throw new RangeError("Duplicate use of step JSON ID "+e);return rg[e]=t,t.prototype.jsonID=e,t}}class vn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new vn(e,null)}static fail(e){return new vn(null,e)}static fromReplace(e,t,r,s){try{return vn.ok(e.replace(t,r,s))}catch(o){if(o instanceof Ef)return vn.fail(o.message);throw o}}}function F0(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(F0(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return oe.fromArray(r)}class Ks extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new Se(F0(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return vn.fromReplace(e,this.from,this.to,o)}invert(){return new vi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ks(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ks&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ks(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ks(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("addMark",Ks);class vi extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Se(F0(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return vn.fromReplace(e,this.from,this.to,r)}invert(){return new Ks(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new vi(t.pos,r.pos,this.mark)}merge(e){return e instanceof vi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new vi(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("removeMark",vi);class Ws extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return vn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return vn.fromReplace(e,this.pos,this.pos+1,new Se(oe.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Ws(this.pos,t.marks[s]);return new Ws(this.pos,this.mark)}}return new Yo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ws(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ws(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("addNodeMark",Ws);class Yo extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return vn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return vn.fromReplace(e,this.pos,this.pos+1,new Se(oe.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ws(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yo(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("removeNodeMark",Yo);class Tn extends Qn{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&Xg(e,this.from,this.to)?vn.fail("Structure replace would overwrite content"):vn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new kr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Tn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Tn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Tn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Se.empty:new Se(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Tn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Se.empty:new Se(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Tn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Tn(t.from,t.to,Se.fromJSON(e,t.slice),!!t.structure)}}Qn.jsonID("replace",Tn);class Mn extends Qn{constructor(e,t,r,s,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(Xg(e,this.from,this.gapFrom)||Xg(e,this.gapTo,this.to)))return vn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return vn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?vn.fromReplace(e,this.from,this.to,r):vn.fail("Content does not fit in gap")}getMap(){return new kr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Mn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new Mn(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Mn(t.from,t.to,t.gapFrom,t.gapTo,Se.fromJSON(e,t.slice),t.insert,!!t.structure)}}Qn.jsonID("replaceAround",Mn);function Xg(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function XD(n,e,t,r){let s=[],o=[],l,u;n.doc.nodesBetween(e,t,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let x=Math.max(h,e),v=Math.min(h+d.nodeSize,t),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==x&&l.mark.eq(m[S])?l.to=v:s.push(l=new vi(x,v,m[S])));u&&u.to==x?u.to=v:o.push(u=new Ks(x,v,r))}}),s.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function JD(n,e,t,r){let s=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof bh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,t);for(let p=0;p<d.length;p++){let m=d[p],x;for(let v=0;v<s.length;v++){let w=s[v];w.step==o-1&&m.eq(s[v].style)&&(x=w)}x?(x.to=h,x.step=o):s.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),s.forEach(l=>n.step(new vi(l.from,l.to,l.style)))}function G0(n,e,t,r=t.contentMatch,s=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new Tn(u,p,Se.empty));else{r=m;for(let x=0;x<h.marks.length;x++)t.allowsMarkType(h.marks[x].type)||n.step(new vi(u,p,h.marks[x]));if(s&&h.isText&&t.whitespace!="pre"){let x,v=/\r?\n|\r/g,w;for(;x=v.exec(h.text);)w||(w=new Se(oe.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new Tn(u+x.index,u+x.index+x[0].length,w))}}u=p}if(!r.validEnd){let d=r.fillBefore(oe.empty,!0);n.replace(u,u,new Se(d,0,0))}for(let d=l.length-1;d>=0;d--)n.step(l[d])}function ZD(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,s=0,o=0;;--r){let l=n.$from.node(r),u=n.$from.index(r)+s,d=n.$to.indexAfter(r)-o;if(r<n.depth&&l.canReplace(u,d,t))return r;if(r==0||l.type.spec.isolating||!ZD(l,u,d))break;u&&(s=1),d<l.childCount&&(o=1)}return null}function e3(n,e,t){let{$from:r,$to:s,depth:o}=e,l=r.before(o+1),u=s.after(o+1),d=l,h=u,p=oe.empty,m=0;for(let w=o,S=!1;w>t;w--)S||r.index(w)>0?(S=!0,p=oe.from(r.node(w).copy(p)),m++):d--;let x=oe.empty,v=0;for(let w=o,S=!1;w>t;w--)S||s.after(w+1)<s.end(w)?(S=!0,x=oe.from(s.node(w).copy(x)),v++):h++;n.step(new Mn(d,h,l,u,new Se(p.append(x),m,v),p.size-m,!0))}function K0(n,e,t=null,r=n){let s=t3(n,e),o=s&&n3(r,e);return o?s.map(fw).concat({type:e,attrs:t}).concat(o.map(fw)):null}function fw(n){return{type:n,attrs:null}}function t3(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,s,l)?o:null}function n3(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<s;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:l}function r3(n,e,t){let r=oe.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oe.from(t[l].type.create(t[l].attrs,r))}let s=e.start,o=e.end;n.step(new Mn(s,o,s,o,new Se(r,0,0),t.length,!0))}function i3(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let d=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,d)&&s3(n.doc,n.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&AC(n,l,u,o),G0(n,n.mapping.slice(o).map(u,1),r,void 0,h===null);let p=n.mapping.slice(o),m=p.map(u,1),x=p.map(u+l.nodeSize,1);return n.step(new Mn(m,x,m+1,x-1,new Se(oe.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&TC(n,l,u,o),!1}})}function TC(n,e,t,r){e.forEach((s,o)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let d=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function AC(n,e,t,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function s3(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function o3(n,e,t,r,s){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,s||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Mn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Se(oe.from(l),0,0),1,!0))}function is(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,l=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=t-2;h>o;h--,p--){let m=s.node(h),x=s.index(h);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(x,m.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(x+1,m.childCount)||!S.type.validContent(v))return!1}let u=s.indexAfter(o),d=r&&r[0];return s.node(o).canReplaceWith(u,u,d?d.type:s.node(o+1).type)}function a3(n,e,t=1,r){let s=n.doc.resolve(e),o=oe.empty,l=oe.empty;for(let u=s.depth,d=s.depth-t,h=t-1;u>d;u--,h--){o=oe.from(s.node(u).copy(o));let p=r&&r[h];l=oe.from(p?p.type.create(p.attrs,l):s.node(u).copy(l))}n.step(new Tn(e,e,new Se(o.append(l),t,t),!0))}function ro(n,e){let t=n.resolve(e),r=t.index();return kC(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function l3(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function kC(n,e){return!!(n&&e&&!n.isLeaf&&l3(n,e))}function xh(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,l,u=r.index(s);if(s==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(o=r.node(s).maybeChild(u-1),l=r.node(s+1)),o&&!o.isTextblock&&kC(o,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function c3(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(s&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);AC(n,p.node(),p.before(),u)}l.inlineContent&&G0(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let d=n.mapping.slice(u),h=d.map(e-t);if(n.step(new Tn(h,d.map(e+t,-1),Se.empty,!0)),r===!0){let p=n.doc.resolve(h);TC(n,p.node(),p.before(),n.steps.length)}return n}function u3(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,t))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,t))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function MC(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let o=0;o<t.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(d,d,s);else{let m=h.contentMatchAt(d).findWrapping(s.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function vh(n,e,t=e,r=Se.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return OC(s,o,r)?new Tn(e,t,r):new d3(s,o,r).fit()}function OC(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class d3{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=oe.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=oe.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,l=r.depth,u=s.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let d=new Se(o,l,u);return e>-1?new Mn(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new Tn(r.pos,s.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=ig(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,m=null;if(t==1&&(l?h.matchType(l.type)||(m=h.fillBefore(oe.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(t==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=ig(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Se(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=ig(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new Se(yc(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new Se(yc(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:m,type:x}=this.frontier[t];if(s){for(let S=0;S<s.childCount;S++)p.push(s.child(S));m=m.matchFragment(s)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let S=u.child(h),C=m.matchType(S.type);if(!C)break;h++,(h>1||d==0||S.content.size)&&(m=C,p.push(RC(S.mark(x.allowedMarks(S.marks)),h==1?d:0,h==u.childCount?v:-1)))}let w=h==u.childCount;w||(v=-1),this.placed=bc(this.placed,t,oe.from(p)),this.frontier[t].match=m,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,C=u;S<v;S++){let T=C.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),C=T.content}this.unplaced=w?e==0?Se.empty:new Se(yc(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new Se(yc(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!sg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=sg(e,t,s,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=sg(e,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=bc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=bc(this.placed,this.depth,oe.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(oe.empty,!0);t.childCount&&(this.placed=bc(this.placed,this.frontier.length,t))}}function yc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(yc(n.firstChild.content,e-1,t)))}function bc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(bc(n.lastChild.content,e-1,t)))}function ig(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function RC(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,RC(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(oe.empty,!0)))),n.copy(r)}function sg(n,e,t,r,s){let o=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!f3(t,o.content,l)?u:null}function f3(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function h3(n){return n.spec.defining||n.spec.definingForContent}function p3(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),o=n.doc.resolve(t);if(OC(s,o,r))return n.step(new Tn(e,t,r));let l=_C(s,o);l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let x=s.depth,v=s.pos-1;x>0;x--,v--){let w=s.node(x).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(x)>-1?u=x:s.before(x)==v&&l.splice(1,0,-x)}let d=l.indexOf(u),h=[],p=r.openStart;for(let x=r.content,v=0;;v++){let w=x.firstChild;if(h.push(w),v==r.openStart)break;x=w.content}for(let x=p-1;x>=0;x--){let v=h[x],w=h3(v.type);if(w&&!v.sameMarkup(s.node(Math.abs(u)-1)))p=x;else if(w||!v.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let v=(x+p+1)%(r.openStart+1),w=h[v];if(w)for(let S=0;S<l.length;S++){let C=l[(S+d)%l.length],T=!0;C<0&&(T=!1,C=-C);let L=s.node(C-1),R=s.index(C-1);if(L.canReplaceWith(R,R,w.type,w.marks))return n.replace(s.before(C),T?o.after(C):t,new Se(DC(r.content,0,r.openStart,v),v,r.openEnd))}}let m=n.steps.length;for(let x=l.length-1;x>=0&&(n.replace(e,t,r),!(n.steps.length>m));x--){let v=l[x];v<0||(e=s.before(v),t=o.after(v))}}function DC(n,e,t,r,s){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(DC(o.content,e+1,t,r,o)))}if(e>r){let o=s.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(oe.empty,!0))}return n}function m3(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=u3(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new Se(oe.from(r),0,0))}function g3(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),o=_C(r,s);for(let l=0;l<o.length;l++){let u=o[l],d=l==o.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function _C(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let o=n.start(s);if(o<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&t.push(s)}return t}class Ja extends Qn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return vn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return vn.fromReplace(e,this.pos,this.pos+1,new Se(oe.from(s),0,t.isLeaf?0:1))}getMap(){return kr.empty}invert(e){return new Ja(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ja(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ja(t.pos,t.attr,t.value)}}Qn.jsonID("attr",Ja);class Kc extends Qn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return vn.ok(r)}getMap(){return kr.empty}invert(e){return new Kc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Kc(t.attr,t.value)}}Qn.jsonID("docAttr",Kc);let tl=class extends Error{};tl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};tl.prototype=Object.create(Error.prototype);tl.prototype.constructor=tl;tl.prototype.name="TransformError";class W0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Se.empty){let s=vh(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new Se(oe.from(r),0,0))}delete(e,t){return this.replace(e,t,Se.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return p3(this,e,t,r),this}replaceRangeWith(e,t,r){return m3(this,e,t,r),this}deleteRange(e,t){return g3(this,e,t),this}lift(e,t){return e3(this,e,t),this}join(e,t=1){return c3(this,e,t),this}wrap(e,t){return r3(this,e,t),this}setBlockType(e,t=e,r,s=null){return i3(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return o3(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new Ja(e,t,r)),this}setDocAttribute(e,t){return this.step(new Kc(e,t)),this}addNodeMark(e,t){return this.step(new Ws(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof jt)t.isInSet(r.marks)&&this.step(new Yo(e,t));else{let s=r.marks,o,l=[];for(;o=t.isInSet(s);)l.push(new Yo(e,o)),s=o.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,t=1,r){return a3(this,e,t,r),this}addMark(e,t,r){return XD(this,e,t,r),this}removeMark(e,t,r){return JD(this,e,t,r),this}clearIncompatible(e,t,r){return G0(this,e,t,r),this}}const og=Object.create(null);class Fe{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new jC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Se.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(h.pos),u?Se.empty:t),u==0&&mw(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),mw(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new Pe(e):Fa(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let l=t<0?Fa(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Fa(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Or(e.node(0))}static atStart(e){return Fa(e,e,0,0,1)||new Or(e)}static atEnd(e){return Fa(e,e,e.content.size,e.childCount,-1)||new Or(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=og[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in og)throw new RangeError("Duplicate use of selection JSON ID "+e);return og[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Pe.between(this.$anchor,this.$head).getBookmark()}}Fe.prototype.visible=!0;class jC{constructor(e,t){this.$from=e,this.$to=t}}let hw=!1;function pw(n){!hw&&!n.parent.inlineContent&&(hw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Pe extends Fe{constructor(e,t=e){pw(e),pw(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Fe.near(r);let s=e.resolve(t.map(this.anchor));return new Pe(s.parent.inlineContent?s:r,r)}replace(e,t=Se.empty){if(super.replace(e,t),t==Se.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Pe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new wh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Pe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=Fe.findFrom(t,r,!0)||Fe.findFrom(t,-r,!0);if(o)t=o.$head;else return Fe.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Fe.findFrom(e,-r,!0)||Fe.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Pe(e,t)}}Fe.jsonID("text",Pe);class wh{constructor(e,t){this.anchor=e,this.head=t}map(e){return new wh(e.map(this.anchor),e.map(this.head))}resolve(e){return Pe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ie extends Fe{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?Fe.near(o):new Ie(o)}content(){return new Se(oe.from(this.node),0,0)}eq(e){return e instanceof Ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Q0(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ie(e.resolve(t.anchor))}static create(e,t){return new Ie(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ie.prototype.visible=!1;Fe.jsonID("node",Ie);class Q0{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new wh(r,r):new Q0(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ie.isSelectable(r)?new Ie(t):Fe.near(t)}}class Or extends Fe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Se.empty){if(t==Se.empty){e.delete(0,e.doc.content.size);let r=Fe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Or(e)}map(e){return new Or(e)}eq(e){return e instanceof Or}getBookmark(){return y3}}Fe.jsonID("all",Or);const y3={map(){return this},resolve(n){return new Or(n)}};function Fa(n,e,t,r,s,o=!1){if(e.inlineContent)return Pe.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!o&&Ie.isSelectable(u))return Ie.create(n,t-(s<0?u.nodeSize:0))}else{let d=Fa(n,u,t+s,s<0?u.childCount:0,s,o);if(d)return d}t+=u.nodeSize*s}return null}function mw(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof Tn||s instanceof Mn))return;let o=n.mapping.maps[r],l;o.forEach((u,d,h,p)=>{l==null&&(l=p)}),n.setSelection(Fe.near(n.doc.resolve(l),t))}const gw=1,$d=2,yw=4;class b3 extends W0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|gw)&~$d,this.storedMarks=null,this}get selectionSet(){return(this.updated&gw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=$d,this}ensureMarks(e){return jt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&$d)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~$d,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||jt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Fe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=yw,this}get scrolledIntoView(){return(this.updated&yw)>0}}function bw(n,e){return!e||!n?n:n.bind(e)}class xc{constructor(e,t,r){this.name=e,this.init=bw(t.init,r),this.apply=bw(t.apply,r)}}const x3=[new xc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new xc("selection",{init(n,e){return n.selection||Fe.atStart(e.doc)},apply(n){return n.selection}}),new xc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new xc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class ag{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=x3.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xc(r.key,r.spec.state,r))})}}class Ya{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=s?s[l].n:0,h=s?s[l].state:this,p=d<t.length&&u.spec.appendTransaction.call(u,d?t.slice(d):t,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<l?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),o=!0}s&&(s[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ya(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new b3(this)}static create(e){let t=new ag(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ya(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new ag(this.schema,e.plugins),r=t.fields,s=new Ya(t);for(let o=0;o<r.length;o++){let l=r[o].name;s[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new ag(e.schema,e.plugins),o=new Ya(s);return s.fields.forEach(l=>{if(l.name=="doc")o.doc=Xs.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=Fe.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=h.fromJSON.call(d,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function LC(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=LC(s,e,{})),t[r]=s}return t}class Yt{constructor(e){this.spec=e,this.props={},e.props&&LC(e.props,this,this.props),this.key=e.key?e.key.key:BC("plugin")}getState(e){return e[this.key]}}const lg=Object.create(null);function BC(n){return n in lg?n+"$"+ ++lg[n]:(lg[n]=0,n+"$")}class fn{constructor(e="key"){this.key=BC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const $n=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},nl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Jg=null;const es=function(n,e,t){let r=Jg||(Jg=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},v3=function(){Jg=null},Xo=function(n,e,t,r){return t&&(xw(n,e,t,r,-1)||xw(n,e,t,r,1))},w3=/^(img|br|input|textarea|hr)$/i;function xw(n,e,t,r,s){for(var o;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Gr(n))){let l=n.parentNode;if(!l||l.nodeType!=1||uu(n)||w3.test(n.nodeName)||n.contentEditable=="false")return!1;e=$n(n)+(s<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else n=l,e=s<0?Gr(n):0}else return!1}}function Gr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function S3(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Gr(n)}else if(n.parentNode&&!uu(n))e=$n(n),n=n.parentNode;else return null}}function E3(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!uu(n))e=$n(n)+1,n=n.parentNode;else return null}}function C3(n,e,t){for(let r=e==0,s=e==Gr(n);r||s;){if(n==t)return!0;let o=$n(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,s=s&&o==Gr(n)}}function uu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Sh=function(n){return n.focusNode&&Xo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ro(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function N3(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function T3(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Gr(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Gr(r.startContainer),r.startOffset)}}}const Si=typeof navigator<"u"?navigator:null,vw=typeof document<"u"?document:null,io=Si&&Si.userAgent||"",Zg=/Edge\/(\d+)/.exec(io),zC=/MSIE \d/.exec(io),e0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(io),hr=!!(zC||e0||Zg),Zs=zC?document.documentMode:e0?+e0[1]:Zg?+Zg[1]:0,Wr=!hr&&/gecko\/(\d+)/i.test(io);Wr&&+(/Firefox\/(\d+)/.exec(io)||[0,0])[1];const t0=!hr&&/Chrome\/(\d+)/.exec(io),Kn=!!t0,IC=t0?+t0[1]:0,Zn=!hr&&!!Si&&/Apple Computer/.test(Si.vendor),rl=Zn&&(/Mobile\/\w+/.test(io)||!!Si&&Si.maxTouchPoints>2),Fr=rl||(Si?/Mac/.test(Si.platform):!1),A3=Si?/Win/.test(Si.platform):!1,ts=/Android \d/.test(io),du=!!vw&&"webkitFontSmoothing"in vw.documentElement.style,k3=du?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function M3(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Qi(n,e){return typeof n=="number"?n:n[e]}function O3(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function ww(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=nl(l);continue}let u=l,d=u==o.body,h=d?M3(o):O3(u),p=0,m=0;if(e.top<h.top+Qi(r,"top")?m=-(h.top-e.top+Qi(s,"top")):e.bottom>h.bottom-Qi(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+Qi(s,"top")-h.top:e.bottom-h.bottom+Qi(s,"bottom")),e.left<h.left+Qi(r,"left")?p=-(h.left-e.left+Qi(s,"left")):e.right>h.right-Qi(r,"right")&&(p=e.right-h.right+Qi(s,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let v=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-v,C=u.scrollTop-w;e={left:e.left-S,top:e.top-C,right:e.right-S,bottom:e.bottom-C}}let x=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(x))break;l=x=="absolute"?l.offsetParent:nl(l)}}function R3(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=t-20){r=u,s=d.top;break}}return{refDOM:r,refTop:s,stack:HC(n.dom)}}function HC(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=nl(r));return e}function D3({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;UC(t,r==0?0:r-e)}function UC(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:o}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Pa=null;function _3(n){if(n.setActive)return n.setActive();if(Pa)return n.focus(Pa);let e=HC(n);n.focus(Pa==null?{get preventScroll(){return Pa={preventScroll:!0},!0}}:void 0),Pa||(Pa=!1,UC(e,0))}function $C(n,e){let t,r=2e8,s,o=0,l=e.top,u=e.top,d,h;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let x;if(p.nodeType==1)x=p.getClientRects();else if(p.nodeType==3)x=es(p).getClientRects();else continue;for(let v=0;v<x.length;v++){let w=x[v];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){t=p,r=S,s=S&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!t&&d&&(t=d,s=h,r=0),t&&t.nodeType==3?j3(t,s):!t||r&&t.nodeType==1?{node:n,offset:o}:$C(t,s)}function j3(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=Hs(r,1);if(o.top!=o.bottom&&Y0(e,o))return{node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Y0(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function L3(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function B3(n,e,t){let{node:r,offset:s}=$C(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,o)}function z3(n,e,t,r){let s=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?s=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function PC(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=s;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(Y0(e,h))return PC(l,e,h)}}if((o=(o+1)%r)==s)break}return n}function I3(n,e){let t=n.dom.ownerDocument,r,s=0,o=T3(t,e.left,e.top);o&&({node:r,offset:s}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!Y0(e,h)||(l=PC(n.dom,e,h),!l))return null}if(Zn)for(let h=l;r&&h;h=nl(h))h.draggable&&(r=void 0);if(l=L3(l,e),r){if(Wr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let h;du&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=z3(n,r,s,e))}u==null&&(u=B3(n,l,e));let d=n.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function Sw(n){return n.top<n.bottom||n.left<n.right}function Hs(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Sw(r))return r}return Array.prototype.find.call(t,Sw)||n.getBoundingClientRect()}const H3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qC(n,e,t){let{node:r,offset:s,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=du||Wr;if(r.nodeType==3)if(l&&(H3.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let d=Hs(es(r,s,s),t);if(Wr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Hs(es(r,s-1,s-1),-1);if(h.top==d.top){let p=Hs(es(r,s,s+1),-1);if(p.top!=d.top)return hc(p,p.left<h.left)}}return d}else{let d=s,h=s,p=t<0?1:-1;return t<0&&!s?(h++,p=-1):t>=0&&s==r.nodeValue.length?(d--,p=1):t<0?d--:h++,hc(Hs(es(r,d,h),p),p<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1];if(d.nodeType==1)return cg(d.getBoundingClientRect(),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];if(d.nodeType==1)return cg(d.getBoundingClientRect(),!0)}return cg(r.getBoundingClientRect(),t>=0)}if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1],h=d.nodeType==3?es(d,Gr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return hc(Hs(h,1),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?es(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return hc(Hs(h,-1),!0)}return hc(Hs(r.nodeType==3?es(r):r,-t),t>=0)}function hc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function cg(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function VC(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function U3(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return VC(n,e,()=>{let{node:o}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=qC(n,s.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=es(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(t=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const $3=/[\u0590-\u08ac]/;function P3(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,l=s==r.parent.content.size,u=n.domSelection();return u?!$3.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:VC(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),x=u.caretBidiLevel;u.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:S}=n.domSelectionRange(),C=w&&!v.contains(w.nodeType==1?w:w.parentNode)||d==w&&h==S;try{u.collapse(p,m),d&&(d!=p||h!=m)&&u.extend&&u.extend(d,h)}catch{}return x!=null&&(u.caretBidiLevel=x),C}):r.pos==r.start()||r.pos==r.end()}let Ew=null,Cw=null,Nw=!1;function q3(n,e,t){return Ew==e&&Cw==t?Nw:(Ew=e,Cw=t,Nw=t=="up"||t=="down"?U3(n,e,t):P3(n,e,t))}const Qr=0,Tw=1,Lo=2,Ei=3;class fu{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Qr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>$n(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof GC){s=e-o;break}o=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof FC&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?$n(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?$n(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let l=r,u=0;;u++){let d=this.children[u],h=l+d.size;if(s==-1&&e<=h){let p=l+d.border;if(e>=p&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,p);e=l;for(let m=u;m>0;m--){let x=this.children[m-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){s=$n(x.dom)+1;break}e-=x.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=$n(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let v=0,w=0;v<this.children.length;v++){let S=this.children[v],C=w+S.size;if(o>w&&l<C)return S.setSelection(e-w-S.border,t-w-S.border,r,s);w=C}let u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Wr||Zn)&&e==t){let{node:v,offset:w}=u;if(v.nodeType==3){if(m=!!(w&&v.nodeValue[w-1]==`
`),m&&w==v.nodeValue.length)for(let S=v,C;S;S=S.parentNode){if(C=S.nextSibling){C.nodeName=="BR"&&(u=d={node:C.parentNode,offset:$n(C)+1});break}let T=S.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let S=v.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Wr&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||m&&Zn)&&Xo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Xo(d.node,d.offset,p.focusNode,p.focusOffset))return;let x=!1;if((h.extend||e==t)&&!(m&&Wr)){h.collapse(u.node,u.offset);try{e!=t&&h.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>t){let w=u;u=d,d=w}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,d=l-o.border;if(e>=u&&t<=d){this.dirty=e==r||t==l?Lo:Tw,e==u&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ei:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Lo:Ei}r=l}this.dirty=Lo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Lo:Tw;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class FC extends fu{constructor(e,t,r,s){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Qr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class V3 extends fu{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Jo extends fu{constructor(e,t,r,s,o){super(e,[],r,s),this.mark=t,this.spec=o}static create(e,t,r,s){let o=s.nodeViews[t.type.name],l=o&&o(t,s,r);return(!l||!l.dom)&&(l=ra.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Jo(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ei||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ei&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Qr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qr}}slice(e,t,r){let s=Jo.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=r0(o,t,l,r)),e>0&&(o=r0(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class eo extends fu{constructor(e,t,r,s,o,l,u,d,h){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,o,l){let u=o.nodeViews[t.type.name],d,h=u&&u(t,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,s),p=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=ra.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let x=p;return p=QC(p,r,t),h?d=new F3(e,t,r,s,p,m||null,x,h,o,l+1):t.isText?new Eh(e,t,r,s,p,x,o):new eo(e,t,r,s,p,m||null,x,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oe.empty)}return e}matchesNode(e,t,r){return this.dirty==Qr&&e.eq(this.node)&&Af(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,d=new K3(this,l&&l.node,e);Y3(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?jt.none:this.node.child(p).marks,r,e),d.placeWidget(h,e,s)},(h,p,m,x)=>{d.syncToMarks(h.marks,r,e);let v;d.findNodeMatch(h,p,m,x)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,v,e)||d.updateNextNode(h,p,m,e,x,s)||d.addNode(h,p,m,e,s),s+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Lo)&&(l&&this.protectLocalComposition(e,l),KC(this.contentDOM,this.children,e),rl&&X3(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Pe)||r<t||s>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=J3(this.node.content,l,r-t,s-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new V3(this,o,t,s);e.input.compositionNodes.push(l),this.children=r0(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==Ei||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Qr}updateOuterDeco(e){if(Af(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=WC(this.dom,this.nodeDOM,n0(this.outerDeco,this.node,t),n0(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Aw(n,e,t,r,s){QC(r,e,n);let o=new eo(void 0,n,e,t,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Eh extends eo{constructor(e,t,r,s,o,l,u){super(e,t,r,s,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Ei||this.dirty!=Qr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Qr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Qr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),o=document.createTextNode(s.text);return new Eh(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ei)}get domAtom(){return!1}isText(e){return this.node.text==e}}class GC extends fu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class F3 extends eo{constructor(e,t,r,s,o,l,u,d,h,p){super(e,t,r,s,o,l,u,h,p),this.spec=d}update(e,t,r,s){if(this.dirty==Ei)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function KC(n,e,t){let r=n.firstChild,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=kw(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(l instanceof Jo){let d=r?r.previousSibling:n.lastChild;KC(l.contentDOM,l.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=kw(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Tc=function(n){n&&(this.nodeName=n)};Tc.prototype=Object.create(null);const Bo=[new Tc];function n0(n,e,t){if(n.length==0)return Bo;let r=t?Bo[0]:new Tc,s=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&s.push(r=new Tc(l.nodeName));for(let u in l){let d=l[u];d!=null&&(t&&s.length==1&&s.push(r=new Tc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return s}function WC(n,e,t,r){if(t==Bo&&r==Bo)return e;let s=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let d;u&&u.nodeName==l.nodeName&&s!=n&&(d=s.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(s),u=Bo[0]),s=d}G3(s,u||Bo[0],l)}return s}function G3(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&n.classList.add(s[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function QC(n,e,t){return WC(n,n,Bo,n0(e,t,n.nodeType!=1))}function Af(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function kw(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class K3{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=W3(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;s<l&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Qr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=d;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let d=Jo.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,s){let o=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,s,o){let l=this.top.children[s];return l.dirty==Ei&&l.dom==l.contentDOM&&(l.dirty=Lo),l.update(e,t,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,o,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof eo){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,x=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Ei&&Af(t,d.outerDeco));if(!x&&d.update(e,t,r,s))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!x&&(m=this.recreateWrapper(d,e,t,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Lo,m.updateChildren(s,l+1),m.dirty=Qr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Af(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=eo.create(this.top,t,r,s,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,t,r,s,o){let l=eo.create(this.top,e,t,r,s,o);l.contentDOM&&l.updateChildren(s,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new FC(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Jo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Eh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Zn||Kn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new GC(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function W3(n,e){let t=e,r=t.children.length,s=n.childCount,o=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof Jo)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=u.node;if(d){if(d!=n.child(s-1))break;--s,o.set(u,s),l.push(u)}}return{index:s,matched:o,matches:l.reverse()}}function Q3(n,e){return n.type.side-e.type.side}function Y3(n,e,t,r){let s=e.locals(n),o=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,s,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,m;for(;l<s.length&&s[l].to==o;){let C=s[l++];C.widget&&(p?(m||(m=[p])).push(C):p=C)}if(p)if(m){m.sort(Q3);for(let C=0;C<m.length;C++)t(m[C],h,!!d)}else t(p,h,!!d);let x,v;if(d)v=-1,x=d,d=null;else if(h<n.childCount)v=h,x=n.child(h++);else break;for(let C=0;C<u.length;C++)u[C].to<=o&&u.splice(C--,1);for(;l<s.length&&s[l].from<=o&&s[l].to>o;)u.push(s[l++]);let w=o+x.nodeSize;if(x.isText){let C=w;l<s.length&&s[l].from<C&&(C=s[l].from);for(let T=0;T<u.length;T++)u[T].to<C&&(C=u[T].to);C<w&&(d=x.cut(C-o),x=x.cut(0,C-o),w=C,v=-1)}else for(;l<s.length&&s[l].to<w;)l++;let S=x.isInline&&!x.isLeaf?u.filter(C=>!C.inline):u.slice();r(x,S,e.forChild(o,x),v),o=w}}function X3(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function J3(n,e,t,r){for(let s=0,o=0;s<n.childCount&&o<=r;){let l=n.child(s++),u=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;s<n.childCount;){let h=n.child(s++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?d.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function r0(n,e,t,r,s){let o=[];for(let l=0,u=0;l<n.length;l++){let d=n[l],h=u,p=u+=d.size;h>=t||p<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,r)),s&&(o.push(s),s=void 0),p>t&&o.push(d.slice(t-h,d.size,r)))}return o}function X0(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),o=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,h;if(Sh(t)){for(d=l;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&Ie.isSelectable(m)&&s.parent&&!(m.isInline&&C3(t.focusNode,t.focusOffset,s.dom))){let x=s.posBefore;h=new Ie(l==x?u:r.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=l,x=l;for(let v=0;v<t.rangeCount;v++){let w=t.getRangeAt(v);m=Math.min(m,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=x==n.state.selection.anchor?[x,m]:[m,x],u=r.resolve(l)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let m=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=J0(n,p,u,m)}return h}function YC(n){return n.editable?n.hasFocus():JC(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ss(n,e=!1){let t=n.state.selection;if(XC(n,t),!!YC(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Kn){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Xo(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)e_(n);else{let{anchor:r,head:s}=t,o,l;Mw&&!(t instanceof Pe)&&(t.$from.parent.inlineContent||(o=Ow(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=Ow(n,t.to))),n.docView.setSelection(r,s,n,e),Mw&&(o&&Rw(o),l&&Rw(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Z3(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Mw=Zn||Kn&&IC<63;function Ow(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Zn&&s&&s.contentEditable=="false")return ug(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return ug(s);if(o)return ug(o)}}function ug(n){return n.contentEditable="true",Zn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Rw(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Z3(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!YC(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function e_(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,$n(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&hr&&Zs<=11&&(t.disabled=!0,t.disabled=!1)}function XC(n,e){if(e instanceof Ie){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Dw(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Dw(n)}function Dw(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function J0(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||Pe.between(e,t,r)}function _w(n){return n.editable&&!n.hasFocus()?!1:JC(n)}function JC(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function t_(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Xo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function i0(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),o=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return o&&Fe.findFrom(o,e)}function Us(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function jw(n,e,t){let r=n.state.selection;if(r instanceof Pe)if(t.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return Us(n,new Pe(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=i0(n.state,e);return s&&s instanceof Ie?Us(n,s):!1}else if(!(Fr&&t.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?Ie.isSelectable(o)?Us(n,new Ie(e<0?n.state.doc.resolve(s.pos-o.nodeSize):s)):du?Us(n,new Pe(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ie&&r.node.isInline)return Us(n,new Pe(e>0?r.$to:r.$from));{let s=i0(n.state,e);return s?Us(n,s):!1}}}function kf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ac(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function qa(n,e){return e<0?n_(n):r_(n)}function n_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,o,l=!1;for(Wr&&t.nodeType==1&&r<kf(t)&&Ac(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Ac(u,-1))s=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(ZC(t))break;{let u=t.previousSibling;for(;u&&Ac(u,-1);)s=t.parentNode,o=$n(u),u=u.previousSibling;if(u)t=u,r=kf(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?s0(n,t,r):s&&s0(n,s,o)}function r_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=kf(t),o,l;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Ac(u,1))o=t,l=++r;else break}else{if(ZC(t))break;{let u=t.nextSibling;for(;u&&Ac(u,1);)o=u.parentNode,l=$n(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=kf(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}o&&s0(n,o,l)}function ZC(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function i_(n,e){for(;n&&e==n.childNodes.length&&!uu(n);)e=$n(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function s_(n,e){for(;n&&!e&&!uu(n);)e=$n(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function s0(n,e,t){if(e.nodeType!=3){let o,l;(l=i_(e,t))?(e=l,t=0):(o=s_(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Sh(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&ss(n)},50)}function Lw(n,e){let t=n.state.doc.resolve(e);if(!(Kn||A3)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Bw(n,e,t){let r=n.state.selection;if(r instanceof Pe&&!r.empty||t.indexOf("s")>-1||Fr&&t.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=i0(n.state,e);if(l&&l instanceof Ie)return Us(n,l)}if(!s.parent.inlineContent){let l=e<0?s:o,u=r instanceof Or?Fe.near(l,e):Fe.findFrom(l,e);return u?Us(n,u):!1}return!1}function zw(n,e){if(!(n.state.selection instanceof Pe))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function Iw(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function o_(n){if(!Zn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Iw(n,r,"true"),setTimeout(()=>Iw(n,r,"false"),20)}return!1}function a_(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function l_(n,e){let t=e.keyCode,r=a_(e);if(t==8||Fr&&t==72&&r=="c")return zw(n,-1)||qa(n,-1);if(t==46&&!e.shiftKey||Fr&&t==68&&r=="c")return zw(n,1)||qa(n,1);if(t==13||t==27)return!0;if(t==37||Fr&&t==66&&r=="c"){let s=t==37?Lw(n,n.state.selection.from)=="ltr"?-1:1:-1;return jw(n,s,r)||qa(n,s)}else if(t==39||Fr&&t==70&&r=="c"){let s=t==39?Lw(n,n.state.selection.from)=="ltr"?1:-1:1;return jw(n,s,r)||qa(n,s)}else{if(t==38||Fr&&t==80&&r=="c")return Bw(n,-1,r)||qa(n,-1);if(t==40||Fr&&t==78&&r=="c")return o_(n)||Bw(n,1,r)||qa(n,1);if(r==(Fr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Z0(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=n.someProp("clipboardSerializer")||ra.fromSchema(n.state.schema),u=s2(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=i2[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=u.createElement(p[v]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function e2(n,e,t,r,s){let o=s.parent.type.spec.code,l,u;if(!t&&!e)return null;let d=!!e&&(r||o||!t);if(d){if(n.someProp("transformPastedText",x=>{e=x(e,o||r,n)}),o)return u=new Se(oe.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",x=>{u=x(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",x=>x(e,s,r,n));if(m)u=m;else{let x=s.marks(),{schema:v}=n.state,w=ra.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let C=l.appendChild(document.createElement("p"));S&&C.appendChild(w.serializeNode(v.text(S,x)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),l=f_(t),du&&h_(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let x=l.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;l=x}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Js.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:s,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!c_.test(x.parentNode.nodeName)?{ignore:!0}:null}})),p)u=p_(Hw(u,+p[1],+p[2]),p[4]);else if(u=Se.maxOpen(u_(u.content,s),!0),u.openStart||u.openEnd){let m=0,x=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;x<u.openEnd&&!v.type.spec.isolating;x++,v=v.lastChild);u=Hw(u,m,x)}return n.someProp("transformPasted",m=>{u=m(u,n,d)}),u}const c_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function u_(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let d=s.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&o.length&&n2(d,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=r2(l[l.length-1],o.length));let p=t2(u,d);l.push(p),s=s.matchType(p.type),o=d}}),l)return oe.from(l)}return n}function t2(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,oe.from(n));return n}function n2(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let o=n2(n,e,t,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(oe.from(t2(t,n,s+1))))}}function r2(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,r2(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(oe.empty,!0);return n.copy(t.append(r))}function o0(n,e,t,r,s,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),s<r-1&&(u=o0(u,e,t,r,s+1,o)),s>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(oe.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function Hw(n,e,t){return e<n.openStart&&(n=new Se(o0(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Se(o0(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const i2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Uw=null;function s2(){return Uw||(Uw=document.implementation.createHTMLDocument("title"))}let dg=null;function d_(n){let e=window.trustedTypes;return e?(dg||(dg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),dg.createHTML(n)):n}function f_(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=s2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&i2[r[1].toLowerCase()])&&(n=s.map(o=>"<"+o+">").join("")+n+s.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=d_(n),s)for(let o=0;o<s.length;o++)t=t.querySelector(s[o])||t;return t}function h_(n){let e=n.querySelectorAll(Kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function p_(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let d=t.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;s=oe.from(d.create(r[u+1],s)),o++,l++}return new Se(s,o,l)}const er={},tr={},m_={touchstart:!0,touchmove:!0};class g_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function y_(n){for(let e in er){let t=er[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{x_(n,r)&&!ey(n,r)&&(n.editable||!(r.type in tr))&&t(n,r)},m_[e]?{passive:!0}:void 0)}Zn&&n.dom.addEventListener("input",()=>null),a0(n)}function Qs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function b_(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function a0(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>ey(n,r))})}function ey(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function x_(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function v_(n,e){!ey(n,e)&&er[e.type]&&(n.editable||!(e.type in tr))&&er[e.type](n,e)}tr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!a2(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ts&&Kn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),rl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Ro(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||l_(n,t)?t.preventDefault():Qs(n,"key")};tr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};tr.keypress=(n,e)=>{let t=e;if(a2(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fr&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Pe)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,s,o))&&n.dispatch(o()),t.preventDefault()}};function Ch(n){return{left:n.clientX,top:n.clientY}}function w_(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ty(n,e,t,r,s){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),s,!0):u(n,t,o.node(l),o.before(l),s,!1)))return!0;return!1}function Za(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function S_(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ie.isSelectable(r)?(Za(n,new Ie(t)),!0):!1}function E_(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof Ie&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(Ie.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?s=o.before(t.$from.depth):s=o.before(l);break}}return s!=null?(Za(n,Ie.create(n.state.doc,s)),!0):!1}function C_(n,e,t,r,s){return ty(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(s?E_(n,t):S_(n,t))}function N_(n,e,t,r){return ty(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function T_(n,e,t,r){return ty(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||A_(n,t,r)}function A_(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Za(n,Pe.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o),u=s.before(o);if(l.inlineContent)Za(n,Pe.create(r,u+1,u+1+l.content.size));else if(Ie.isSelectable(l))Za(n,Ie.create(r,u));else continue;return!0}}function ny(n){return Mf(n)}const o2=Fr?"metaKey":"ctrlKey";er.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=ny(n),s=Date.now(),o="singleClick";s-n.input.lastClick.time<500&&w_(t,n.input.lastClick)&&!t[o2]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=n.posAtCoords(Ch(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new k_(n,l,t,!!r)):(o=="doubleClick"?N_:T_)(n,l.pos,l.inside,t)?t.preventDefault():Qs(n,"pointer"))};class k_{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[o2],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let p=e.state.doc.resolve(t.pos);o=p.parent,l=p.depth?p.before():0}const u=s?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof Ie&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ss(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ch(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qs(this.view,"pointer"):C_(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Zn&&this.mightDrag&&!this.mightDrag.node.isAtom||Kn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Za(this.view,Fe.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qs(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}er.touchstart=n=>{n.input.lastTouch=Date.now(),ny(n),Qs(n,"pointer")};er.touchmove=n=>{n.input.lastTouch=Date.now(),Qs(n,"pointer")};er.contextmenu=n=>ny(n);function a2(n,e){return n.composing?!0:Zn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const M_=ts?5e3:-1;tr.compositionstart=tr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Pe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Mf(n,!0),n.markCursor=null;else if(Mf(n,!e.selection.empty),Wr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let l=o<0?s.lastChild:s.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,o=-1}}n.input.composing=!0}l2(n,M_)};tr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,l2(n,20))};function l2(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Mf(n),e))}function c2(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=R_());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function O_(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=S3(e.focusNode,e.focusOffset),r=E3(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function R_(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Mf(n,e=!1){if(!(ts&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),c2(n),e||n.docView&&n.docView.dirty){let t=X0(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function D_(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Wc=hr&&Zs<15||rl&&k3<604;er.copy=tr.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let o=Wc?null:t.clipboardData,l=r.content(),{dom:u,text:d}=Z0(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",d)):D_(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function __(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function j_(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Qc(n,r.value,null,s,e):Qc(n,r.textContent,r.innerHTML,s,e)},50)}function Qc(n,e,t,r,s){let o=e2(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,s,o||Se.empty)))return!0;if(!o)return!1;let l=__(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function u2(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}tr.paste=(n,e)=>{let t=e;if(n.composing&&!ts)return;let r=Wc?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Qc(n,u2(r),r.getData("text/html"),s,t)?t.preventDefault():j_(n,t)};class d2{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const L_=Fr?"altKey":"ctrlKey";function f2(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[L_]}er.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,o=s.empty?null:n.posAtCoords(Ch(t)),l;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof Ie?s.to-1:s.to))){if(r&&r.mightDrag)l=Ie.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(l=Ie.create(n.state.doc,m.posBefore))}}let u=(l||n.state.selection).content(),{dom:d,text:h,slice:p}=Z0(n,u);(!t.dataTransfer.files.length||!Kn||IC>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Wc?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Wc||t.dataTransfer.setData("text/plain",h),n.dragging=new d2(p,f2(n,t),l)};er.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};tr.dragover=tr.dragenter=(n,e)=>e.preventDefault();tr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Ch(t));if(!s)return;let o=n.state.doc.resolve(s.pos),l=r&&r.slice;l?n.someProp("transformPasted",w=>{l=w(l,n,!1)}):l=e2(n,u2(t.dataTransfer),Wc?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&f2(n,t));if(n.someProp("handleDrop",w=>w(n,t,l||Se.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let d=l?MC(n.state.doc,o.pos,l):o.pos;d==null&&(d=o.pos);let h=n.state.tr;if(u){let{node:w}=r;w?w.replace(h):h.deleteSelection()}let p=h.mapping.map(d),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,x=h.doc;if(m?h.replaceRangeWith(p,p,l.content.firstChild):h.replaceRange(p,p,l),h.doc.eq(x))return;let v=h.doc.resolve(p);if(m&&Ie.isSelectable(l.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new Ie(v));else{let w=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((S,C,T,L)=>w=L),h.setSelection(J0(n,v,h.doc.resolve(w)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};er.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ss(n)},20))};er.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};er.beforeinput=(n,e)=>{if(Kn&&ts&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Ro(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in tr)er[n]=tr[n];function Yc(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Of{constructor(e,t){this.toDOM=e,this.spec=t||qo,this.side=this.spec.side||0}map(e,t,r,s){let{pos:o,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new kn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Of&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class to{constructor(e,t){this.attrs=e,this.spec=t||qo}map(e,t,r,s){let o=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new kn(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof to&&Yc(this.attrs,e.attrs)&&Yc(this.spec,e.spec)}static is(e){return e.type instanceof to}destroy(){}}class ry{constructor(e,t){this.attrs=e,this.spec=t||qo}map(e,t,r,s){let o=e.mapResult(t.from+s,1);if(o.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=o.pos?null:new kn(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),o;return s==t.from&&!(o=e.child(r)).isText&&s+o.nodeSize==t.to}eq(e){return this==e||e instanceof ry&&Yc(this.attrs,e.attrs)&&Yc(this.spec,e.spec)}destroy(){}}class kn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new kn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new kn(e,e,new Of(t,r))}static inline(e,t,r,s){return new kn(e,t,new to(r,s))}static node(e,t,r,s){return new kn(e,t,new ry(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof to}get widget(){return this.type instanceof Of}}const Ga=[],qo={};class Gt{constructor(e,t){this.local=e.length?e:Ga,this.children=t.length?t:Ga}static create(e,t){return t.length?Rf(t,e,0,qo):Gn}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,s+u,o)}}map(e,t,r){return this==Gn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||qo)}mapInner(e,t,r,s,o){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,s);d&&d.type.valid(t,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?B_(this.children,l||[],e,t,r,s,o):l?new Gt(l.sort(Vo),Ga):Gn}add(e,t){return t.length?this==Gn?Gt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,o=0;e.forEach((u,d)=>{let h=d+r,p;if(p=p2(t,u,h)){for(s||(s=this.children.slice());o<s.length&&s[o]<d;)o+=3;s[o]==d?s[o+2]=s[o+2].addInner(u,p,h+1):s.splice(o,0,d,d+u.nodeSize,Rf(p,u,h+1,qo)),o+=3}});let l=h2(o?m2(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Gt(l.length?this.local.concat(l).sort(Vo):this.local,s||this.children)}remove(e){return e.length==0||this==Gn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,d=r[o+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=Gn?r[o+2]=h:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<s.length;u++)s[u].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Gt(s,r):Gn}forChild(e,t){if(this==Gn)return this;if(t.isLeaf)return Gt.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>o&&d.type instanceof to){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(s||(s=[])).push(d.copy(h,p))}}if(s){let u=new Gt(s.sort(Vo),Ga);return r?new qs([u,r]):u}return r||Gn}eq(e){if(this==e)return!0;if(!(e instanceof Gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return iy(this.localsInner(e))}localsInner(e){if(this==Gn)return Ga;if(e.inlineContent||!this.local.some(to.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof to||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Gt.empty=new Gt([],[]);Gt.removeOverlap=iy;const Gn=Gt.empty;class qs{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,qo));return qs.from(r)}forChild(e,t){if(t.isLeaf)return Gt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,t);o!=Gn&&(o instanceof qs?r=r.concat(o.members):r.push(o))}return qs.from(r)}eq(e){if(!(e instanceof qs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?iy(r?t:t.sort(Vo)):Ga}static from(e){switch(e.length){case 0:return Gn;case 1:return e[0];default:return new qs(e.every(t=>t instanceof Gt)?e:e.reduce((t,r)=>t.concat(r instanceof Gt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function B_(n,e,t,r,s,o,l){let u=n.slice();for(let h=0,p=o;h<t.maps.length;h++){let m=0;t.maps[h].forEach((x,v,w,S)=>{let C=S-w-(v-x);for(let T=0;T<u.length;T+=3){let L=u[T+1];if(L<0||x>L+p-m)continue;let R=u[T]+p-m;v>=R?u[T+1]=x<=R?-2:-1:x>=p&&C&&(u[T]+=C,u[T+1]+=C)}m+=C}),p=t.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=t.map(n[h]+o),m=p-s;if(m<0||m>=r.content.size){d=!0;continue}let x=t.map(n[h+1]+o,-1),v=x-s,{index:w,offset:S}=r.content.findIndex(m),C=r.maybeChild(w);if(C&&S==m&&S+C.nodeSize==v){let T=u[h+2].mapInner(t,C,p+1,n[h]+o+1,l);T!=Gn?(u[h]=m,u[h+1]=v,u[h+2]=T):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=z_(u,n,e,t,s,o,l),p=Rf(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,x=0;m<p.children.length;m+=3){let v=p.children[m];for(;x<u.length&&u[x]<v;)x+=3;u.splice(x,0,p.children[m],p.children[m+1],p.children[m+2])}}return new Gt(e.sort(Vo),u)}function h2(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new kn(s.from+e,s.to+e,s.type))}return t}function z_(n,e,t,r,s,o,l){function u(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,s,h);m?t.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&u(n[d+2],e[d]+o+1);return t}function p2(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[o]=null);return s}function m2(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Rf(n,e,t,r){let s=[],o=!1;e.forEach((u,d)=>{let h=p2(n,u,d+t);if(h){o=!0;let p=Rf(h,u,t+d+1,r);p!=Gn&&s.push(d,d+u.nodeSize,p)}});let l=h2(o?m2(n):n,-t).sort(Vo);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new Gt(l,s):Gn}function Vo(n,e){return n.from-e.from||n.to-e.to}function iy(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[s]=o.copy(o.from,r.to),$w(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),$w(e,s,r.copy(o.from,r.to)));break}}}return e}function $w(n,e,t){for(;e<n.length&&Vo(t,n[e])>0;)e++;n.splice(e,0,t)}function fg(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Gn&&e.push(r)}),n.cursorWrapper&&e.push(Gt.create(n.state.doc,[n.cursorWrapper.deco])),qs.from(e)}const I_={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},H_=hr&&Zs<=11;class U_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class $_{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new U_,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);hr&&Zs<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),H_&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,I_)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_w(this.view)){if(this.suppressingSelectionUpdates)return ss(this.view);if(hr&&Zs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=nl(o))t.add(o);for(let o=e.anchorNode;o;o=nl(o))if(t.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&_w(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(Wr&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,x]=p;m.parentNode&&m.parentNode.parentNode==x.parentNode?x.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let x of p){let v=x.parentNode;v&&v.nodeName=="LI"&&(!m||V_(e,m)!=v)&&x.remove()}}}let h=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Sh(r)&&(h=X0(e))&&h.eq(Fe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ss(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,l),P_(e)),this.handleDOMChange(o,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ss(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(hr&&Zs<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:x}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let l=s&&s.parentNode==e.target?$n(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?$n(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Pw=new WeakMap,qw=!1;function P_(n){if(!Pw.has(n)&&(Pw.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Wr,qw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qw=!0}}function Vw(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Xo(l.node,l.offset,s,o)&&([t,r,s,o]=[s,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:o}}function q_(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Vw(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Vw(n,t):null}function V_(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function F_(n,e,t){let{node:r,fromOffset:s,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,p=d.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],Sh(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Kn&&n.input.lastKeyCode===8)for(let C=o;C>s;C--){let T=r.childNodes[C-1],L=T.pmViewDesc;if(T.nodeName=="BR"&&!L){o=C;break}if(!L||L.size)break}let m=n.state.doc,x=n.someProp("domParser")||Js.fromSchema(n.state.schema),v=m.resolve(l),w=null,S=x.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:G_,context:v});if(h&&h[0].pos!=null){let C=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=C),w={anchor:C+l,head:T+l}}return{doc:S,sel:w,from:l,to:u}}function G_(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Zn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Zn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const K_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function W_(n,e,t,r,s){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let U=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,J=X0(n,U);if(J&&!n.state.selection.eq(J)){if(Kn&&ts&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",fe=>fe(n,Ro(13,"Enter"))))return;let re=n.state.tr.setSelection(J);U=="pointer"?re.setMeta("pointer",!0):U=="key"&&re.scrollIntoView(),o&&re.setMeta("composition",o),n.dispatch(re)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let d=n.state.selection,h=F_(n,e,t),p=n.state.doc,m=p.slice(h.from,h.to),x,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,v="end"):(x=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let w=X_(m.content,h.doc.content,h.from,x,v);if(w&&n.input.domChangeCount++,(rl&&n.input.lastIOSEnter>Date.now()-225||ts)&&s.some(U=>U.nodeType==1&&!K_.test(U.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",U=>U(n,Ro(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof Pe&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let U=Fw(n,n.state.doc,h.sel);if(U&&!U.eq(n.state.selection)){let J=n.state.tr.setSelection(U);o&&J.setMeta("composition",o),n.dispatch(J)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof Pe&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),hr&&Zs<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=h.doc.resolveNoCache(w.start-h.from),C=h.doc.resolveNoCache(w.endB-h.from),T=p.resolve(w.start),L=S.sameParent(C)&&S.parent.inlineContent&&T.end()>=w.endA;if((rl&&n.input.lastIOSEnter>Date.now()-225&&(!L||s.some(U=>U.nodeName=="DIV"||U.nodeName=="P"))||!L&&S.pos<h.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&S.pos<C.pos&&!/\S/.test(h.doc.textBetween(S.pos,C.pos,"","")))&&n.someProp("handleKeyDown",U=>U(n,Ro(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&Y_(p,w.start,w.endA,S,C)&&n.someProp("handleKeyDown",U=>U(n,Ro(8,"Backspace")))){ts&&Kn&&n.domObserver.suppressSelectionUpdates();return}Kn&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),ts&&!L&&S.start()!=C.start()&&C.parentOffset==0&&S.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,C=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(U){return U(n,Ro(13,"Enter"))})},20));let R=w.start,k=w.endA,j=U=>{let J=U||n.state.tr.replace(R,k,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let re=Fw(n,J.doc,h.sel);re&&!(Kn&&n.composing&&re.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(re.head==R||re.head==J.mapping.map(k)-1)||hr&&re.empty&&re.head==R)&&J.setSelection(re)}return o&&J.setMeta("composition",o),J.scrollIntoView()},H;if(L)if(S.pos==C.pos){hr&&Zs<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ss(n),20));let U=j(n.state.tr.delete(R,k)),J=p.resolve(w.start).marksAcross(p.resolve(w.endA));J&&U.ensureMarks(J),n.dispatch(U)}else if(w.endA==w.endB&&(H=Q_(S.parent.content.cut(S.parentOffset,C.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let U=j(n.state.tr);H.type=="add"?U.addMark(R,k,H.mark):U.removeMark(R,k,H.mark),n.dispatch(U)}else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){let U=S.parent.textBetween(S.parentOffset,C.parentOffset),J=()=>j(n.state.tr.insertText(U,R,k));n.someProp("handleTextInput",re=>re(n,R,k,U,J))||n.dispatch(J())}else n.dispatch(j());else n.dispatch(j())}function Fw(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:J0(n,e.resolve(t.anchor),e.resolve(t.head))}function Q_(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,o=r,l,u,d;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<t.length;p++)o=t[p].removeFromSet(o);if(s.length==1&&o.length==0)u=s[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&o.length==1)u=o[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(oe.from(h).eq(n))return{mark:u,type:l}}function Y_(n,e,t,r,s){if(t-e<=s.pos-r.pos||hg(r,!0,!1)<s.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(hg(o,!0,!0));return!l.parent.isTextblock||l.pos>t||hg(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function hg(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function X_(n,e,t,r,s){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let d=Math.max(0,o-Math.min(l,u));r-=l+d-o}if(l<o&&n.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&Gw(e.textBetween(o-1,o+1))&&(o+=d?1:-1),u=o+(u-l),l=o}else if(u<o){let d=r<=o&&r>=u?o-r:0;o-=d,o&&o<n.size&&Gw(n.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function Gw(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class g2{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new g_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Xw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Qw(this),Ww(this),this.nodeViews=Yw(this),this.docView=Aw(this.state.doc,Kw(this),fg(this),this.dom,this),this.domObserver=new $_(this,(r,s,o,l)=>W_(this,r,s,o,l)),this.domObserver.start(),y_(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&a0(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Xw),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(c2(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=Yw(this);Z_(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&a0(this),this.editable=Qw(this),Ww(this);let d=fg(this),h=Kw(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,d);(m||!e.selection.eq(s.selection))&&(l=!0);let x=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&R3(this);if(l){this.domObserver.stop();let v=m&&(hr||Kn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&J_(s.selection,e.selection);if(m){let w=Kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=O_(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Aw(e.doc,h,d,this.dom,this)),w&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&t_(this))?ss(this,v):(XC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():x&&D3(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ie){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ww(this,t.getBoundingClientRect(),e)}else ww(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new d2(e.slice,e.move,s<0?void 0:Ie.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=t?t(u):u))return s}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(hr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&_3(this.dom),ss(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return I3(this,e)}coordsAtPos(e,t=1){return qC(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return q3(this,t||this.state,e)}pasteHTML(e,t){return Qc(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Qc(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Z0(this,e)}destroy(){this.docView&&(b_(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],fg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,v3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return v_(this,e)}domSelectionRange(){let e=this.domSelection();return e?Zn&&this.root.nodeType===11&&N3(this.dom.ownerDocument)==this.dom&&q_(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}g2.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Kw(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[kn.node(0,n.state.doc.content.size,e)]}function Ww(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:kn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Qw(n){return!n.someProp("editable",e=>e(n.state)===!1)}function J_(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Yw(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Z_(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Xw(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var no={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Df={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},e4=typeof navigator<"u"&&/Mac/.test(navigator.platform),t4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Pn=0;Pn<10;Pn++)no[48+Pn]=no[96+Pn]=String(Pn);for(var Pn=1;Pn<=24;Pn++)no[Pn+111]="F"+Pn;for(var Pn=65;Pn<=90;Pn++)no[Pn]=String.fromCharCode(Pn+32),Df[Pn]=String.fromCharCode(Pn);for(var pg in no)Df.hasOwnProperty(pg)||(Df[pg]=no[pg]);function n4(n){var e=e4&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||t4&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Df:no)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const r4=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),i4=typeof navigator<"u"&&/Win/.test(navigator.platform);function s4(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))r4?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function o4(n){let e=Object.create(null);for(let t in n)e[s4(t)]=n[t];return e}function mg(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function a4(n){return new Yt({props:{handleKeyDown:sy(n)}})}function sy(n){let e=o4(n);return function(t,r){let s=n4(r),o,l=e[mg(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[mg(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(i4&&r.ctrlKey&&r.altKey)&&(o=no[r.keyCode])&&o!=s){let u=e[mg(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const oy=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function y2(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const b2=(n,e,t)=>{let r=y2(n,t);if(!r)return!1;let s=ay(r);if(!s){let l=r.blockRange(),u=l&&hl(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=s.nodeBefore;if(A2(n,s,e,-1))return!0;if(r.parent.content.size==0&&(il(o,"end")||Ie.isSelectable(o)))for(let l=r.depth;;l--){let u=vh(n.doc,r.before(l),r.after(l),Se.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=n.tr.step(u);d.setSelection(il(o,"end")?Fe.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):Ie.create(d.doc,s.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},l4=(n,e,t)=>{let r=y2(n,t);if(!r)return!1;let s=ay(r);return s?x2(n,s,e):!1},c4=(n,e,t)=>{let r=w2(n,t);if(!r)return!1;let s=ly(r);return s?x2(n,s,e):!1};function x2(n,e,t){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=vh(n.doc,o,d,Se.empty);if(!h||h.from!=o||h instanceof Tn&&h.slice.size>=d-o)return!1;if(t){let p=n.tr.step(h);p.setSelection(Pe.create(p.doc,o)),t(p.scrollIntoView())}return!0}function il(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const v2=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=ay(r)}let l=o&&o.nodeBefore;return!l||!Ie.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ie.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function ay(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function w2(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const S2=(n,e,t)=>{let r=w2(n,t);if(!r)return!1;let s=ly(r);if(!s)return!1;let o=s.nodeAfter;if(A2(n,s,e,1))return!0;if(r.parent.content.size==0&&(il(o,"start")||Ie.isSelectable(o))){let l=vh(n.doc,r.before(),r.after(),Se.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(il(o,"start")?Fe.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):Ie.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},E2=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=ly(r)}let l=o&&o.nodeAfter;return!l||!Ie.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ie.create(n.doc,o.pos)).scrollIntoView()),!0)};function ly(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const u4=(n,e)=>{let t=n.selection,r=t instanceof Ie,s;if(r){if(t.node.isTextblock||!ro(n.doc,t.from))return!1;s=t.from}else if(s=xh(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(Ie.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},d4=(n,e)=>{let t=n.selection,r;if(t instanceof Ie){if(t.node.isTextblock||!ro(n.doc,t.to))return!1;r=t.to}else if(r=xh(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},f4=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&hl(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},C2=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function cy(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const h4=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),l=cy(s.contentMatchAt(o));if(!l||!s.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),d=n.tr.replaceWith(u,u,l.createAndFill());d.setSelection(Fe.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},N2=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof Or||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=cy(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(Pe.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},T2=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(is(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&hl(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function p4(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Ie&&e.selection.node.isBlock)return!r.parentOffset||!is(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,d=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){d=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=cy(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(d&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof Pe||e.selection instanceof Or)&&p.deleteSelection();let m=p.mapping.map(r.pos),x=is(p.doc,m,o.length,o);if(x||(o[0]=u?{type:u}:null,x=is(p.doc,m,o.length,o)),!x)return!1;if(p.split(m,o.length,o),!d&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),w=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return t&&t(p.scrollIntoView()),!0}}const m4=p4(),g4=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(Ie.create(n.doc,s))),!0)};function y4(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||ro(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function A2(n,e,t,r){let s=e.nodeBefore,o=e.nodeAfter,l,u,d=s.type.spec.isolating||o.type.spec.isolating;if(!d&&y4(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,w=oe.empty;for(let T=l.length-1;T>=0;T--)w=oe.from(l[T].create(null,w));w=oe.from(s.copy(w));let S=n.tr.step(new Mn(e.pos-1,v,e.pos,v,new Se(w,1,0),l.length,!0)),C=S.doc.resolve(v+2*l.length);C.nodeAfter&&C.nodeAfter.type==s.type&&ro(S.doc,C.pos)&&S.join(C.pos),t(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:Fe.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),x=m&&hl(m);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(m,x).scrollIntoView()),!0;if(h&&il(o,"start",!0)&&il(s,"end")){let v=s,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let S=o,C=1;for(;!S.isTextblock;S=S.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,S.content)){if(t){let T=oe.empty;for(let R=w.length-1;R>=0;R--)T=oe.from(w[R].copy(T));let L=n.tr.step(new Mn(e.pos-w.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new Se(T,w.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function k2(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(Pe.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const b4=k2(-1),x4=k2(1);function v4(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o),u=l&&K0(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function Jw(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(d,h)=>{if(s)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)s=!0;else{let p=t.doc.resolve(h),m=p.index();s=p.parent.canReplaceWith(m,m+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=t.selection.ranges[l];o.setBlockType(u,d,n,e)}r(o.scrollIntoView())}return!0}}function uy(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}uy(oy,b2,v2);uy(oy,S2,E2);uy(C2,N2,T2,m4);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function w4(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o);if(!l)return!1;let u=r?t.tr:null;return S4(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function S4(n,e,t,r=null){let s=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new Nf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Nf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=K0(o,t,r,e);return u?(n&&E4(n,e,u,s,t),!0):!1}function E4(n,e,t,r,s){let o=oe.empty;for(let p=t.length-1;p>=0;p--)o=oe.from(t[p].type.create(t[p].attrs,o));n.step(new Mn(e.start-(r?2:0),e.end,e.start,e.end,new Se(o,0,0),t.length,!0));let l=0;for(let p=0;p<t.length;p++)t[p].type==s&&(l=p+1);let u=t.length-l,d=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,x=!0;p<m;p++,x=!1)!x&&is(n.doc,d,u)&&(n.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return n}function C4(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?N4(e,t,n,o):T4(e,t,o):!0:!1}}function N4(n,e,t,r){let s=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(s.step(new Mn(o-1,l,o,l,new Se(oe.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Nf(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=hl(r);if(u==null)return!1;s.lift(r,u);let d=s.doc.resolve(s.mapping.map(o,-1)-1);return ro(s.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&s.join(d.pos),e(s.scrollIntoView()),!0}function T4(n,e,t){let r=n.tr,s=t.parent;for(let v=t.end,w=t.endIndex-1,S=t.startIndex;w>S;w--)v-=s.child(w).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,d=t.endIndex==s.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?oe.empty:oe.from(s))))return!1;let m=o.pos,x=m+l.nodeSize;return r.step(new Mn(m-(u?1:0),x+(d?1:0),m+1,x-1,new Se((u?oe.empty:oe.from(s.copy(oe.empty))).append(d?oe.empty:oe.from(s.copy(oe.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function A4(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,d=u.child(l-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==u.type,p=oe.from(h?n.create():null),m=new Se(oe.from(n.create(null,oe.from(u.type.create(null,p)))),h?3:1,0),x=o.start,v=o.end;t(e.tr.step(new Mn(x-(h?3:1),v,x,v,m,1,!0)).scrollIntoView())}return!0}}function Nh(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}class Th{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...p)=>{const m=d(...p)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u=[],d=!!e,h=e||o.tr,p=()=>(!d&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(h),u.every(x=>x===!0)),m={...Object.fromEntries(Object.entries(r).map(([x,v])=>[x,(...S)=>{const C=this.buildProps(h,t),T=v(...S)(C);return u.push(T),m}])),run:p};return m}createCan(e){const{rawCommands:t,state:r}=this,s=!1,o=e||r.tr,l=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(t).map(([d,h])=>[d,(...p)=>h(...p)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u={tr:e,editor:s,view:l,state:Nh({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...p)=>h(...p)(u)]))}};return u}}class k4{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Oe(n,e,t){return n.config[e]===void 0&&n.parent?Oe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Oe(n.parent,e,t):null}):n.config[e]}function Ah(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function M2(n){const e=[],{nodeExtensions:t,markExtensions:r}=Ah(n),s=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:s},d=Oe(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([x,v])=>{e.push({type:m,name:x,attribute:{...o,...v}})})})})}),s.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=Oe(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const x={...o,...m};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:l.name,name:p,attribute:x})})}),e}function Rn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function wt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const u=o?String(o).split(" "):[],d=r[s]?r[s].split(" "):[],h=u.filter(p=>!d.includes(p));r[s]=[...d,...h].join(" ")}else if(s==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,x]=p.split(":").map(v=>v.trim());h.set(m,x)}),u.forEach(p=>{const[m,x]=p.split(":").map(v=>v.trim());h.set(m,x)}),r[s]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=o}),r},{})}function _f(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>wt(t,r),{})}function O2(n){return typeof n=="function"}function ot(n,e=void 0,...t){return O2(n)?e?n.bind(e)(...t):n(...t):n}function M4(n={}){return Object.keys(n).length===0&&n.constructor===Object}function O4(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Zw(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):O4(t.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...s}}}}function eS(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&M4(t)?!1:t!=null))}function R4(n,e){var t;const r=M2(n),{nodeExtensions:s,markExtensions:o}=Ah(n),l=(t=s.find(h=>Oe(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(T=>T.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((T,L)=>{const R=Oe(L,"extendNodeSchema",m);return{...T,...R?R(h):{}}},{}),v=eS({...x,content:ot(Oe(h,"content",m)),marks:ot(Oe(h,"marks",m)),group:ot(Oe(h,"group",m)),inline:ot(Oe(h,"inline",m)),atom:ot(Oe(h,"atom",m)),selectable:ot(Oe(h,"selectable",m)),draggable:ot(Oe(h,"draggable",m)),code:ot(Oe(h,"code",m)),whitespace:ot(Oe(h,"whitespace",m)),linebreakReplacement:ot(Oe(h,"linebreakReplacement",m)),defining:ot(Oe(h,"defining",m)),isolating:ot(Oe(h,"isolating",m)),attrs:Object.fromEntries(p.map(T=>{var L;return[T.name,{default:(L=T==null?void 0:T.attribute)===null||L===void 0?void 0:L.default}]}))}),w=ot(Oe(h,"parseHTML",m));w&&(v.parseDOM=w.map(T=>Zw(T,p)));const S=Oe(h,"renderHTML",m);S&&(v.toDOM=T=>S({node:T,HTMLAttributes:_f(T,p)}));const C=Oe(h,"renderText",m);return C&&(v.toText=C),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const p=r.filter(C=>C.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((C,T)=>{const L=Oe(T,"extendMarkSchema",m);return{...C,...L?L(h):{}}},{}),v=eS({...x,inclusive:ot(Oe(h,"inclusive",m)),excludes:ot(Oe(h,"excludes",m)),group:ot(Oe(h,"group",m)),spanning:ot(Oe(h,"spanning",m)),code:ot(Oe(h,"code",m)),attrs:Object.fromEntries(p.map(C=>{var T;return[C.name,{default:(T=C==null?void 0:C.attribute)===null||T===void 0?void 0:T.default}]}))}),w=ot(Oe(h,"parseHTML",m));w&&(v.parseDOM=w.map(C=>Zw(C,p)));const S=Oe(h,"renderHTML",m);return S&&(v.toDOM=C=>S({mark:C,HTMLAttributes:_f(C,p)})),[h.name,v]}));return new bC({topNode:l,nodes:u,marks:d})}function gg(n,e){return e.nodes[n]||e.marks[n]||null}function tS(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function dy(n,e){const t=ra.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const D4=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,o,l,u)=>{var d,h;const p=((h=(d=s.type.spec).toText)===null||h===void 0?void 0:h.call(d,{node:s,pos:o,parent:l,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-o))}),t};function fy(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class kh{constructor(e){this.find=e.find,this.handler=e.handler}}const _4=(n,e)=>{if(fy(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Pd(n){var e;const{editor:t,from:r,to:s,text:o,rules:l,plugin:u}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(x=>x.type.spec.code))return!1;let p=!1;const m=D4(h)+o;return l.forEach(x=>{if(p)return;const v=_4(m,x.find);if(!v)return;const w=d.state.tr,S=Nh({state:d.state,transaction:w}),C={from:r-(v[0].length-o.length),to:s},{commands:T,chain:L,can:R}=new Th({editor:t,state:S});x.handler({state:S,range:C,match:v,commands:T,chain:L,can:R})===null||!w.steps.length||(w.setMeta(u,{transform:w,from:r,to:s,text:o}),d.dispatch(w),p=!0)}),p}function j4(n){const{editor:e,rules:t}=n,r=new Yt({state:{init(){return null},apply(s,o,l){const u=s.getMeta(r);if(u)return u;const d=s.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=dy(oe.from(p),l.schema);const{from:m}=d,x=m+p.length;Pd({editor:e,from:m,to:x,text:p,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,l,u){return Pd({editor:e,from:o,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&Pd({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?Pd({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function L4(n){return Object.prototype.toString.call(n).slice(8,-1)}function qd(n){return L4(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Mh(n,e){const t={...n};return qd(n)&&qd(e)&&Object.keys(e).forEach(r=>{qd(e[r])&&qd(n[r])?t[r]=Mh(n[r],e[r]):t[r]=e[r]}),t}class Ci{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ot(Oe(this,"addOptions",{name:this.name}))),this.storage=ot(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ci(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ci(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ot(Oe(t,"addOptions",{name:t.name})),t.storage=ot(Oe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const d=l.find(h=>(h==null?void 0:h.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function B4(n){return typeof n=="number"}class z4{constructor(e){this.find=e.find,this.handler=e.handler}}const I4=(n,e,t)=>{if(fy(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=n,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function H4(n){const{editor:e,state:t,from:r,to:s,rule:o,pasteEvent:l,dropEvent:u}=n,{commands:d,chain:h,can:p}=new Th({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,s,(v,w)=>{if(!v.isTextblock||v.type.spec.code)return;const S=Math.max(r,w),C=Math.min(s,w+v.content.size),T=v.textBetween(S-w,C-w,void 0,"");I4(T,o.find,l).forEach(R=>{if(R.index===void 0)return;const k=S+R.index+1,j=k+R[0].length,H={from:t.tr.mapping.map(k),to:t.tr.mapping.map(j)},U=o.handler({state:t,range:H,match:R,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(U)})}),m.every(v=>v!==null)}let Vd=null;const U4=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function $4(n){const{editor:e,rules:t}=n;let r=null,s=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:x,rule:v,pasteEvt:w})=>{const S=p.tr,C=Nh({state:p,transaction:S});if(!(!H4({editor:e,state:C,from:Math.max(m-1,0),to:x.b-1,rule:v,pasteEvent:w,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new Yt({view(m){const x=w=>{var S;r=!((S=m.dom.parentElement)===null||S===void 0)&&S.contains(w.target)?m.dom.parentElement:null,r&&(Vd=e)},v=()=>{Vd&&(Vd=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,x)=>{if(o=r===m.dom.parentElement,u=x,!o){const v=Vd;v!=null&&v.isEditable&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,x)=>{var v;const w=(v=x.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return l=x,s=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(m,x,v)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!s,C=w.getMeta("uiEvent")==="drop"&&!o,T=w.getMeta("applyPasteRules"),L=!!T;if(!S&&!C&&!L)return;if(L){let{text:j}=T;typeof j=="string"?j=j:j=dy(oe.from(j),v.schema);const{from:H}=T,U=H+j.length,J=U4(j);return d({rule:p,state:v,from:H,to:{b:U},pasteEvt:J})}const R=x.doc.content.findDiffStart(v.doc.content),k=x.doc.content.findDiffEnd(v.doc.content);if(!(!B4(R)||!k||R===k.b))return d({rule:p,state:v,from:R,to:k,pasteEvt:l})}}))}function P4(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Xa{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Xa.resolve(e),this.schema=R4(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Xa.sort(Xa.flatten(e)),r=P4(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=Oe(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=Oe(r,"priority")||100,l=Oe(s,"priority")||100;return o>l?-1:o<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:gg(t.name,this.schema)},s=Oe(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Xa.sort([...this.extensions].reverse()),r=[],s=[],o=t.map(l=>{const u={name:l.name,options:l.options,storage:l.storage,editor:e,type:gg(l.name,this.schema)},d=[],h=Oe(l,"addKeyboardShortcuts",u);let p={};if(l.type==="mark"&&Oe(l,"exitable",u)&&(p.ArrowRight=()=>Ci.handleExit({editor:e,mark:l})),h){const S=Object.fromEntries(Object.entries(h()).map(([C,T])=>[C,()=>T({editor:e})]));p={...p,...S}}const m=a4(p);d.push(m);const x=Oe(l,"addInputRules",u);tS(l,e.options.enableInputRules)&&x&&r.push(...x());const v=Oe(l,"addPasteRules",u);tS(l,e.options.enablePasteRules)&&v&&s.push(...v());const w=Oe(l,"addProseMirrorPlugins",u);if(w){const S=w();d.push(...S)}return d}).flat();return[j4({editor:e,rules:r}),...$4({editor:e,rules:s}),...o]}get attributes(){return M2(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ah(this.extensions);return Object.fromEntries(t.filter(r=>!!Oe(r,"addNodeView")).map(r=>{const s=this.attributes.filter(d=>d.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Rn(r.name,this.schema)},l=Oe(r,"addNodeView",o);if(!l)return[];const u=(d,h,p,m,x)=>{const v=_f(d,s);return l()({node:d,view:h,getPos:p,decorations:m,innerDecorations:x,editor:e,extension:r,HTMLAttributes:v})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:gg(e.name,this.schema)};e.type==="mark"&&(!((t=ot(Oe(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=Oe(e,"onBeforeCreate",r),o=Oe(e,"onCreate",r),l=Oe(e,"onUpdate",r),u=Oe(e,"onSelectionUpdate",r),d=Oe(e,"onTransaction",r),h=Oe(e,"onFocus",r),p=Oe(e,"onBlur",r),m=Oe(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}}class Dn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ot(Oe(this,"addOptions",{name:this.name}))),this.storage=ot(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Dn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ot(Oe(t,"addOptions",{name:t.name})),t.storage=ot(Oe(t,"addStorage",{name:t.name,options:t.options})),t}}function R2(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,s,(d,h,p,m)=>{var x;d.isBlock&&h>r&&(u+=o);const v=l==null?void 0:l[d.type.name];if(v)return p&&(u+=v({node:d,pos:h,parent:p,index:m,range:e})),!1;d.isText&&(u+=(x=d==null?void 0:d.text)===null||x===void 0?void 0:x.slice(Math.max(r,h)-h,s-h))}),u}function D2(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const q4=Dn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Yt({key:new fn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),d=D2(t);return R2(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),V4=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),F4=(n=!1)=>({commands:e})=>e.setContent("",n),G4=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(d)),x=h.resolve(p.map(d+u.nodeSize)),v=m.blockRange(x);if(!v)return;const w=hl(v);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,S)}(w||w===0)&&e.lift(v,w)})}),!0},K4=n=>e=>n(e),W4=()=>({state:n,dispatch:e})=>N2(n,e),Q4=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,o=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new Pe(r.doc.resolve(Math.max(l-1,0)))),!0},Y4=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const u=s.before(o),d=s.after(o);n.delete(u,d).scrollIntoView()}return!0}return!1},X4=n=>({tr:e,state:t,dispatch:r})=>{const s=Rn(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===s){if(r){const d=o.before(l),h=o.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},J4=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},Z4=()=>({state:n,dispatch:e})=>oy(n,e),ej=()=>({commands:n})=>n.keyboardShortcut("Enter"),tj=()=>({state:n,dispatch:e})=>h4(n,e);function jf(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:fy(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function _2(n,e,t={}){return n.find(r=>r.type===e&&jf(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function nS(n,e,t={}){return!!_2(n,e,t)}function hy(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!_2([...s.node.marks],e,t)))return;let l=s.index,u=n.start()+s.offset,d=l+1,h=u+s.node.nodeSize;for(;l>0&&nS([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;d<n.parent.childCount&&nS([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function so(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const nj=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=so(n,r.schema),{doc:l,selection:u}=t,{$from:d,from:h,to:p}=u;if(s){const m=hy(d,o,e);if(m&&m.from<=h&&m.to>=p){const x=Pe.create(l,m.from,m.to);t.setSelection(x)}}return!0},rj=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function py(n){return n instanceof Pe}function ns(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function j2(n,e=null){if(!e)return null;const t=Fe.atStart(n),r=Fe.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?Pe.create(n,ns(0,s,o),ns(n.content.size,s,o)):Pe.create(n,ns(e,s,o),ns(e,s,o))}function L2(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Oh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ij=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Oh()||L2())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!py(t.state.selection))return l(),!0;const u=j2(s.doc,n)||t.state.selection,d=t.state.selection.eq(u);return o&&(d||s.setSelection(u),d&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},sj=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),oj=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),B2=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&B2(r)}return n};function Fd(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return B2(t)}function Xc(n,e,t){if(n instanceof Xs||n instanceof oe)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return oe.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Xc("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,u="";const d=new bC({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Js.fromSchema(d).parseSlice(Fd(n),t.parseOptions):Js.fromSchema(d).parse(Fd(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=Js.fromSchema(e);return t.slice?o.parseSlice(Fd(n),t.parseOptions).content:o.parse(Fd(n),t.parseOptions)}return Xc("",e,t)}function aj(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof Tn||s instanceof Mn))return;const o=n.mapping.maps[r];let l=0;o.forEach((u,d,h,p)=>{l===0&&(l=p)}),n.setSelection(Fe.near(n.doc.resolve(l),t))}const lj=n=>!("type"in n),cj=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{var l;if(s){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const d=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Xc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(C){d(C)}try{u=Xc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck})}catch(C){return d(C),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},x=!0,v=!0;if((lj(u)?u:[u]).forEach(C=>{C.check(),x=x?C.isText&&C.marks.length===0:!1,v=v?C.isBlock:!1}),p===m&&v){const{parent:C}=r.doc.resolve(p);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(p-=1,m+=1)}let S;if(x){if(Array.isArray(e))S=e.map(C=>C.text||"").join("");else if(e instanceof oe){let C="";e.forEach(T=>{T.text&&(C+=T.text)}),S=C}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else S=u,r.replaceWith(p,m,S);t.updateSelection&&aj(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},uj=()=>({state:n,dispatch:e})=>u4(n,e),dj=()=>({state:n,dispatch:e})=>d4(n,e),fj=()=>({state:n,dispatch:e})=>b2(n,e),hj=()=>({state:n,dispatch:e})=>S2(n,e),pj=()=>({state:n,dispatch:e,tr:t})=>{try{const r=xh(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},mj=()=>({state:n,dispatch:e,tr:t})=>{try{const r=xh(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},gj=()=>({state:n,dispatch:e})=>l4(n,e),yj=()=>({state:n,dispatch:e})=>c4(n,e);function z2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function bj(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Oh()||z2()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const xj=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=bj(n).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return d==null||d.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function Jc(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,l=e?Rn(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(m,x)=>{if(m.isText)return;const v=Math.max(r,x),w=Math.min(s,x+m.nodeSize);u.push({node:m,from:v,to:w})});const d=s-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>jf(m.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((m,x)=>m+x.to-x.from,0)>=d}const vj=(n,e={})=>({state:t,dispatch:r})=>{const s=Rn(n,t.schema);return Jc(t,s,e)?f4(t,r):!1},wj=()=>({state:n,dispatch:e})=>T2(n,e),Sj=n=>({state:e,dispatch:t})=>{const r=Rn(n,e.schema);return C4(r)(e,t)},Ej=()=>({state:n,dispatch:e})=>C2(n,e);function Rh(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function rS(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const Cj=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=Rh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=Rn(n,r.schema)),u==="mark"&&(l=so(n,r.schema)),s&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,p)=>{o&&o===h.type&&t.setNodeMarkup(p,void 0,rS(h.attrs,e)),l&&h.marks.length&&h.marks.forEach(m=>{l===m.type&&t.addMark(p,p+h.nodeSize,l.create(rS(m.attrs,e)))})})}),!0):!1},Nj=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Tj=()=>({tr:n,dispatch:e})=>{if(e){const t=new Or(n.doc);n.setSelection(t)}return!0},Aj=()=>({state:n,dispatch:e})=>v2(n,e),kj=()=>({state:n,dispatch:e})=>E2(n,e),Mj=()=>({state:n,dispatch:e})=>g4(n,e),Oj=()=>({state:n,dispatch:e})=>x4(n,e),Rj=()=>({state:n,dispatch:e})=>b4(n,e);function l0(n,e,t={},r={}){return Xc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const Dj=(n,e=!1,t={},r={})=>({editor:s,tr:o,dispatch:l,commands:u})=>{var d,h;const{doc:p}=o;if(t.preserveWhitespace!=="full"){const m=l0(n,s.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck});return l&&o.replaceWith(0,p.content.size,m).setMeta("preventUpdate",!e),!0}return l&&o.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:s.options.enableContentCheck})};function I2(n,e){const t=so(e,n.schema),{from:r,to:s,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===t.name);return u?{...u.attrs}:{}}function _j(n,e){const t=new W0(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function my(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Fo(n,e){const t=[];return n.descendants((r,s)=>{e(r)&&t.push({node:r,pos:s})}),t}function jj(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,o)=>{t(s)&&r.push({node:s,pos:o})}),r}function H2(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function pl(n){return e=>H2(e.$from,n)}function Lj(n,e){const t={from:0,to:n.content.size};return R2(n,t,e)}function Bj(n,e){const t=Rn(e,n.schema),{from:r,to:s}=n.selection,o=[];n.doc.nodesBetween(r,s,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function U2(n,e){const t=Rh(typeof e=="string"?e:e.name,n.schema);return t==="node"?Bj(n,e):t==="mark"?I2(n,e):{}}function zj(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function Ij(n){const e=zj(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,l)=>l!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Hj(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,o)=>{const l=[];if(s.ranges.length)s.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=t[o];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(d),m=e.invert().map(h,-1),x=e.invert().map(p);r.push({oldRange:{from:m,to:x},newRange:{from:h,to:p}})})}),Ij(r)}function gy(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const o=t.resolve(n),l=hy(o,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(l=>({from:o,to:o+s.nodeSize,mark:l})))}),r}function df(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function c0(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?so(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>jf(m.attrs,t,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:m,$to:x})=>{const v=m.pos,w=x.pos;n.doc.nodesBetween(v,w,(S,C)=>{if(!S.isText&&!S.marks.length)return;const T=Math.max(v,C),L=Math.min(w,C+S.nodeSize),R=L-T;l+=R,u.push(...S.marks.map(k=>({mark:k,from:T,to:L})))})}),l===0)return!1;const d=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>jf(m.mark.attrs,t,{strict:!1})).reduce((m,x)=>m+x.to-x.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,x)=>m+x.to-x.from,0);return(d>0?d+h:d)>=l}function $2(n,e,t={}){if(!e)return Jc(n,null,t)||c0(n,null,t);const r=Rh(e,n.schema);return r==="node"?Jc(n,e,t):r==="mark"?c0(n,e,t):!1}function iS(n,e){const{nodeExtensions:t}=Ah(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=ot(Oe(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Dh(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(o=>{s!==!1&&(Dh(o,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function P2(n){return n instanceof Ie}function Uj(n,e,t){const s=n.state.doc.content.size,o=ns(e,0,s),l=ns(t,0,s),u=n.coordsAtPos(o),d=n.coordsAtPos(l,-1),h=Math.min(u.top,d.top),p=Math.max(u.bottom,d.bottom),m=Math.min(u.left,d.left),x=Math.max(u.right,d.right),v=x-m,w=p-h,T={top:h,bottom:p,left:m,right:x,width:v,height:w,x:m,y:h};return{...T,toJSON:()=>T}}function $j(n,e,t){var r;const{selection:s}=e;let o=null;if(py(s)&&(o=s.$cursor),o){const u=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(u)||!u.some(d=>d.type.excludes(t))}const{ranges:l}=s;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,d.pos,(p,m,x)=>{if(h)return!1;if(p.isInline){const v=!x||x.type.allowsMarkType(t),w=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));h=v&&w}return!h}),h})}const Pj=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:l,ranges:u}=o,d=so(n,r.schema);if(s)if(l){const h=I2(r,d);t.addStoredMark(d.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(x,v)=>{const w=Math.max(v,p),S=Math.min(v+x.nodeSize,m);x.marks.find(T=>T.type===d)?x.marks.forEach(T=>{d===T.type&&t.addMark(w,S,d.create({...T.attrs,...e}))}):t.addMark(w,S,d.create(e))})});return $j(r,t,d)},qj=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Vj=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=Rn(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:u})=>Jw(o,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>Jw(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Fj=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=ns(n,0,r.content.size),o=Ie.create(r,s);e.setSelection(o)}return!0},Gj=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,l=Pe.atStart(r).from,u=Pe.atEnd(r).to,d=ns(s,l,u),h=ns(o,l,u),p=Pe.create(r,d,h);e.setSelection(p)}return!0},Kj=n=>({state:e,dispatch:t})=>{const r=Rn(n,e.schema);return A4(r)(e,t)};function sS(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const Wj=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:l}=e,{$from:u,$to:d}=o,h=s.extensionManager.attributes,p=df(h,u.node().type.name,u.node().attrs);if(o instanceof Ie&&o.node.isBlock)return!u.parentOffset||!is(l,u.pos)?!1:(r&&(n&&sS(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,x=u.depth===0?void 0:my(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&x?[{type:x,attrs:p}]:void 0,w=is(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!w&&is(e.doc,e.mapping.map(u.pos),1,x?[{type:x}]:void 0)&&(w=!0,v=x?[{type:x,attrs:p}]:void 0),r){if(w&&(o instanceof Pe&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),x&&!m&&!u.parentOffset&&u.parent.type!==x)){const S=e.mapping.map(u.before()),C=e.doc.resolve(S);u.node(-1).canReplaceWith(C.index(),C.index()+1,x)&&e.setNodeMarkup(e.mapping.map(u.before()),x)}n&&sS(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return w},Qj=(n,e={})=>({tr:t,state:r,dispatch:s,editor:o})=>{var l;const u=Rn(n,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==u)return!1;const x=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(s){let T=oe.empty;const L=d.index(-1)?1:d.index(-2)?2:3;for(let J=d.depth-L;J>=d.depth-3;J-=1)T=oe.from(d.node(J).copy(T));const R=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,k={...df(x,d.node().type.name,d.node().attrs),...e},j=((l=u.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(k))||void 0;T=T.append(oe.from(u.createAndFill(null,j)||void 0));const H=d.before(d.depth-(L-1));t.replace(H,d.after(-R),new Se(T,4-L,0));let U=-1;t.doc.nodesBetween(H,t.doc.content.size,(J,re)=>{if(U>-1)return!1;J.isTextblock&&J.content.size===0&&(U=re+1)}),U>-1&&t.setSelection(Pe.near(t.doc.resolve(U))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...df(x,m.type.name,m.attrs),...e},S={...df(x,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const C=v?[{type:u,attrs:w},{type:v,attrs:S}]:[{type:u,attrs:w}];if(!is(t.doc,d.pos,2))return!1;if(s){const{selection:T,storedMarks:L}=r,{splittableMarks:R}=o.extensionManager,k=L||T.$to.parentOffset&&T.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!k||!s)return!0;const j=k.filter(H=>R.includes(H.type.name));t.ensureMarks(j)}return!0},yg=(n,e)=>{const t=pl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&ro(n.doc,t.pos)&&n.join(t.pos),!0},bg=(n,e)=>{const t=pl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&ro(n.doc,r)&&n.join(r),!0},Yj=(n,e,t,r={})=>({editor:s,tr:o,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:x}=s.extensionManager,v=Rn(n,l.schema),w=Rn(e,l.schema),{selection:S,storedMarks:C}=l,{$from:T,$to:L}=S,R=T.blockRange(L),k=C||S.$to.parentOffset&&S.$from.marks();if(!R)return!1;const j=pl(H=>iS(H.type.name,m))(S);if(R.depth>=1&&j&&R.depth-j.depth<=1){if(j.node.type===v)return h.liftListItem(w);if(iS(j.node.type.name,m)&&v.validContent(j.node.content)&&u)return d().command(()=>(o.setNodeMarkup(j.pos,v),!0)).command(()=>yg(o,v)).command(()=>bg(o,v)).run()}return!t||!k||!u?d().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>yg(o,v)).command(()=>bg(o,v)).run():d().command(()=>{const H=p().wrapInList(v,r),U=k.filter(J=>x.includes(J.type.name));return o.ensureMarks(U),H?!0:h.clearNodes()}).wrapInList(v,r).command(()=>yg(o,v)).command(()=>bg(o,v)).run()},Xj=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,l=so(n,r.schema);return c0(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:o}):s.setMark(l,e)},Jj=(n,e,t={})=>({state:r,commands:s})=>{const o=Rn(n,r.schema),l=Rn(e,r.schema),u=Jc(r,o,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?s.setNode(l,d):s.setNode(o,{...d,...t})},Zj=(n,e={})=>({state:t,commands:r})=>{const s=Rn(n,t.schema);return Jc(t,s,e)?r.lift(s):r.wrapIn(s,e)},eL=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const l=n.tr,u=o.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},tL=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},nL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,d=so(n,r.schema),{$from:h,empty:p,ranges:m}=u;if(!s)return!0;if(p&&l){let{from:x,to:v}=u;const w=(o=h.marks().find(C=>C.type===d))===null||o===void 0?void 0:o.attrs,S=hy(h,d,w);S&&(x=S.from,v=S.to),t.removeMark(x,v,d)}else m.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,d)});return t.removeStoredMark(d),!0},rL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=Rh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=Rn(n,r.schema)),u==="mark"&&(l=so(n,r.schema)),s&&t.selection.ranges.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;let m,x,v,w;t.selection.empty?r.doc.nodesBetween(h,p,(S,C)=>{o&&o===S.type&&(v=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,x=S)}):r.doc.nodesBetween(h,p,(S,C)=>{C<h&&o&&o===S.type&&(v=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,x=S),C>=h&&C<=p&&(o&&o===S.type&&t.setNodeMarkup(C,void 0,{...S.attrs,...e}),l&&S.marks.length&&S.marks.forEach(T=>{if(l===T.type){const L=Math.max(C,h),R=Math.min(C+S.nodeSize,p);t.addMark(L,R,l.create({...T.attrs,...e}))}}))}),x&&(m!==void 0&&t.setNodeMarkup(m,void 0,{...x.attrs,...e}),l&&x.marks.length&&x.marks.forEach(S=>{l===S.type&&t.addMark(v,w,l.create({...S.attrs,...e}))}))}),!0):!1},iL=(n,e={})=>({state:t,dispatch:r})=>{const s=Rn(n,t.schema);return v4(s,e)(t,r)},sL=(n,e={})=>({state:t,dispatch:r})=>{const s=Rn(n,t.schema);return w4(s,e)(t,r)};var oL=Object.freeze({__proto__:null,blur:V4,clearContent:F4,clearNodes:G4,command:K4,createParagraphNear:W4,cut:Q4,deleteCurrentNode:Y4,deleteNode:X4,deleteRange:J4,deleteSelection:Z4,enter:ej,exitCode:tj,extendMarkRange:nj,first:rj,focus:ij,forEach:sj,insertContent:oj,insertContentAt:cj,joinBackward:fj,joinDown:dj,joinForward:hj,joinItemBackward:pj,joinItemForward:mj,joinTextblockBackward:gj,joinTextblockForward:yj,joinUp:uj,keyboardShortcut:xj,lift:vj,liftEmptyBlock:wj,liftListItem:Sj,newlineInCode:Ej,resetAttributes:Cj,scrollIntoView:Nj,selectAll:Tj,selectNodeBackward:Aj,selectNodeForward:kj,selectParentNode:Mj,selectTextblockEnd:Oj,selectTextblockStart:Rj,setContent:Dj,setMark:Pj,setMeta:qj,setNode:Vj,setNodeSelection:Fj,setTextSelection:Gj,sinkListItem:Kj,splitBlock:Wj,splitListItem:Qj,toggleList:Yj,toggleMark:Xj,toggleNode:Jj,toggleWrap:Zj,undoInputRule:eL,unsetAllMarks:tL,unsetMark:nL,updateAttributes:rL,wrapIn:iL,wrapInList:sL});const aL=Dn.create({name:"commands",addCommands(){return{...oL}}}),lL=Dn.create({name:"drop",addProseMirrorPlugins(){return[new Yt({key:new fn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),cL=Dn.create({name:"editable",addProseMirrorPlugins(){return[new Yt({key:new fn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),uL=new fn("focusEvents"),dL=Dn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Yt({key:uL,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),fL=Dn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:m}=d,{pos:x,parent:v}=m,w=m.parent.isTextblock&&x>0?u.doc.resolve(x-1):m,S=w.parent.type.spec.isolating,C=m.pos-m.parentOffset,T=S&&w.parent.childCount===1?C===m.pos:Fe.atStart(h).from===x;return!p||!v.type.isTextblock||v.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Oh()||z2()?o:s},addProseMirrorPlugins(){return[new Yt({key:new fn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),s=n.some(S=>S.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:l,to:u}=e.selection,d=Fe.atStart(e.doc).from,h=Fe.atEnd(e.doc).to;if(o||!(l===d&&u===h)||!Dh(t.doc))return;const x=t.tr,v=Nh({state:t,transaction:x}),{commands:w}=new Th({editor:this.editor,state:v});if(w.clearNodes(),!!x.steps.length)return x}})]}}),hL=Dn.create({name:"paste",addProseMirrorPlugins(){return[new Yt({key:new fn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),pL=Dn.create({name:"tabindex",addProseMirrorPlugins(){return[new Yt({key:new fn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Do{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Do(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Do(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Do(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!s&&u.depth<=this.depth)return;const d=new Do(u,this.editor,s,s?t:null);s&&(d.actualDepth=this.depth+1),e.push(new Do(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const o=s.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const d=l[u];if(o[d]!==t[d])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&o.every(d=>t[d]===l.node.attrs[d])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const mL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function gL(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class yL extends k4{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=gL(mL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=O2(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const l=typeof o=="string"?`${o}$`:o.key;r=r.filter(u=>!u.key.startsWith(l))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[cL,q4.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),aL,dL,fL,pL,lL,hL].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Xa(s,this)}createCommandManager(){this.commandManager=new Th({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=l0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=l0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=j2(t,this.options.autofocus);this.view=new g2(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ya.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(l)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return U2(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return $2(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return dy(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Lj(this.state.doc,{blockSeparator:t,textSerializers:{...D2(this.schema),...r}})}get isEmpty(){return Dh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Do(t,this)}get $doc(){return this.$pos(0)}}function sl(n){return new kh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=ot(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),h=t.from+u.indexOf(l),p=h+l.length;if(gy(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===n.type&&S!==v.mark.type)).filter(v=>v.to>h).length)return null;p<t.to&&o.delete(p,t.to),h>t.from&&o.delete(t.from+d,h);const x=t.from+d+l.length;o.addMark(t.from+d,x,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function q2(n){return new kh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=ot(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let u=t.to;const d=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,d)}else if(r[0]){const h=n.type.isInline?l:l-1;o.insert(h,n.type.create(s)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()}})}function u0(n){return new kh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),o=ot(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function Zc(n){return new kh({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const o=ot(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),d=l.doc.resolve(t.from).blockRange(),h=d&&K0(d,n.type,o);if(!h)return null;if(l.wrap(d,h),n.keepMarks&&n.editor){const{selection:m,storedMarks:x}=e,{splittableMarks:v}=n.editor.extensionManager,w=x||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(C=>v.includes(C.type.name));l.ensureMarks(S)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,o).run()}const p=l.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&ro(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&l.join(t.from-1)}})}class Qt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ot(Oe(this,"addOptions",{name:this.name}))),this.storage=ot(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Qt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Qt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ot(Oe(t,"addOptions",{name:t.name})),t.storage=ot(Oe(t,"addStorage",{name:t.name,options:t.options})),t}}class bL{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,s,o,l,u,d;const{view:h}=this.editor,p=e.target,m=p.nodeType===3?(t=p.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):p.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(p)||!m)return;let x=0,v=0;if(this.dom!==m){const L=this.dom.getBoundingClientRect(),R=m.getBoundingClientRect(),k=(s=e.offsetX)!==null&&s!==void 0?s:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,j=(l=e.offsetY)!==null&&l!==void 0?l:(u=e.nativeEvent)===null||u===void 0?void 0:u.offsetY;x=R.x-L.x+k,v=R.y-L.y+j}const w=this.dom.cloneNode(!0);(d=e.dataTransfer)===null||d===void 0||d.setDragImage(w,x,v);const S=this.getPos();if(typeof S!="number")return;const C=Ie.create(h.state.doc,S),T=h.state.tr.setSelection(C);h.dispatch(T)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(r))))return!1;const o=e.type.startsWith("drag"),l=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!l&&!o)return!0;const{isEditable:d}=this.editor,{isDragging:h}=this,p=!!this.node.type.spec.draggable,m=Ie.isSelectable(this.node),x=e.type==="copy",v=e.type==="paste",w=e.type==="cut",S=e.type==="mousedown";if(!p&&m&&o&&e.target===this.dom&&e.preventDefault(),p&&o&&!h&&e.target===this.dom)return e.preventDefault(),!1;if(p&&d&&!h&&S){const C=r.closest("[data-drag-handle]");C&&(this.dom===C||this.dom.contains(C))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(h||l||x||v||w||S&&m)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Oh()||L2())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function Zo(n){return new z4({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const o=ot(n.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let h=t.to;if(u){const p=d.search(/\S/),m=t.from+d.indexOf(u),x=m+u.length;if(gy(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(C=>C===n.type&&C!==w.mark.type)).filter(w=>w.to>m).length)return null;x<t.to&&l.delete(x,t.to),m>t.from&&l.delete(t.from+p,m),h=t.from+p+u.length,l.addMark(t.from+p,h,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function xL(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof Ie){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}function vL(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var pr="top",Xr="bottom",Jr="right",mr="left",yy="auto",hu=[pr,Xr,Jr,mr],ol="start",eu="end",wL="clippingParents",V2="viewport",pc="popper",SL="reference",oS=hu.reduce(function(n,e){return n.concat([e+"-"+ol,e+"-"+eu])},[]),F2=[].concat(hu,[yy]).reduce(function(n,e){return n.concat([e,e+"-"+ol,e+"-"+eu])},[]),EL="beforeRead",CL="read",NL="afterRead",TL="beforeMain",AL="main",kL="afterMain",ML="beforeWrite",OL="write",RL="afterWrite",DL=[EL,CL,NL,TL,AL,kL,ML,OL,RL];function Ni(n){return n?(n.nodeName||"").toLowerCase():null}function Rr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ea(n){var e=Rr(n).Element;return n instanceof e||n instanceof Element}function Yr(n){var e=Rr(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function by(n){if(typeof ShadowRoot>"u")return!1;var e=Rr(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function _L(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},o=e.elements[t];!Yr(o)||!Ni(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(l){var u=s[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function jL(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),u=l.reduce(function(d,h){return d[h]="",d},{});!Yr(s)||!Ni(s)||(Object.assign(s.style,u),Object.keys(o).forEach(function(d){s.removeAttribute(d)}))})}}const G2={name:"applyStyles",enabled:!0,phase:"write",fn:_L,effect:jL,requires:["computeStyles"]};function wi(n){return n.split("-")[0]}var Go=Math.max,Lf=Math.min,al=Math.round;function d0(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function K2(){return!/^((?!chrome|android).)*safari/i.test(d0())}function ll(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&Yr(n)&&(s=n.offsetWidth>0&&al(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&al(r.height)/n.offsetHeight||1);var l=ea(n)?Rr(n):window,u=l.visualViewport,d=!K2()&&t,h=(r.left+(d&&u?u.offsetLeft:0))/s,p=(r.top+(d&&u?u.offsetTop:0))/o,m=r.width/s,x=r.height/o;return{width:m,height:x,top:p,right:h+m,bottom:p+x,left:h,x:h,y:p}}function xy(n){var e=ll(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function W2(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&by(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ls(n){return Rr(n).getComputedStyle(n)}function LL(n){return["table","td","th"].indexOf(Ni(n))>=0}function oo(n){return((ea(n)?n.ownerDocument:n.document)||window.document).documentElement}function _h(n){return Ni(n)==="html"?n:n.assignedSlot||n.parentNode||(by(n)?n.host:null)||oo(n)}function aS(n){return!Yr(n)||ls(n).position==="fixed"?null:n.offsetParent}function BL(n){var e=/firefox/i.test(d0()),t=/Trident/i.test(d0());if(t&&Yr(n)){var r=ls(n);if(r.position==="fixed")return null}var s=_h(n);for(by(s)&&(s=s.host);Yr(s)&&["html","body"].indexOf(Ni(s))<0;){var o=ls(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function pu(n){for(var e=Rr(n),t=aS(n);t&&LL(t)&&ls(t).position==="static";)t=aS(t);return t&&(Ni(t)==="html"||Ni(t)==="body"&&ls(t).position==="static")?e:t||BL(n)||e}function vy(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function kc(n,e,t){return Go(n,Lf(e,t))}function zL(n,e,t){var r=kc(n,e,t);return r>t?t:r}function Q2(){return{top:0,right:0,bottom:0,left:0}}function Y2(n){return Object.assign({},Q2(),n)}function X2(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var IL=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Y2(typeof e!="number"?e:X2(e,hu))};function HL(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,u=wi(t.placement),d=vy(u),h=[mr,Jr].indexOf(u)>=0,p=h?"height":"width";if(!(!o||!l)){var m=IL(s.padding,t),x=xy(o),v=d==="y"?pr:mr,w=d==="y"?Xr:Jr,S=t.rects.reference[p]+t.rects.reference[d]-l[d]-t.rects.popper[p],C=l[d]-t.rects.reference[d],T=pu(o),L=T?d==="y"?T.clientHeight||0:T.clientWidth||0:0,R=S/2-C/2,k=m[v],j=L-x[p]-m[w],H=L/2-x[p]/2+R,U=kc(k,H,j),J=d;t.modifiersData[r]=(e={},e[J]=U,e.centerOffset=U-H,e)}}function UL(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||W2(e.elements.popper,s)&&(e.elements.arrow=s))}const $L={name:"arrow",enabled:!0,phase:"main",fn:HL,effect:UL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cl(n){return n.split("-")[1]}var PL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qL(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:al(t*s)/s||0,y:al(r*s)/s||0}}function lS(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,u=n.position,d=n.gpuAcceleration,h=n.adaptive,p=n.roundOffsets,m=n.isFixed,x=l.x,v=x===void 0?0:x,w=l.y,S=w===void 0?0:w,C=typeof p=="function"?p({x:v,y:S}):{x:v,y:S};v=C.x,S=C.y;var T=l.hasOwnProperty("x"),L=l.hasOwnProperty("y"),R=mr,k=pr,j=window;if(h){var H=pu(t),U="clientHeight",J="clientWidth";if(H===Rr(t)&&(H=oo(t),ls(H).position!=="static"&&u==="absolute"&&(U="scrollHeight",J="scrollWidth")),H=H,s===pr||(s===mr||s===Jr)&&o===eu){k=Xr;var re=m&&H===j&&j.visualViewport?j.visualViewport.height:H[U];S-=re-r.height,S*=d?1:-1}if(s===mr||(s===pr||s===Xr)&&o===eu){R=Jr;var fe=m&&H===j&&j.visualViewport?j.visualViewport.width:H[J];v-=fe-r.width,v*=d?1:-1}}var be=Object.assign({position:u},h&&PL),ae=p===!0?qL({x:v,y:S},Rr(t)):{x:v,y:S};if(v=ae.x,S=ae.y,d){var ce;return Object.assign({},be,(ce={},ce[k]=L?"0":"",ce[R]=T?"0":"",ce.transform=(j.devicePixelRatio||1)<=1?"translate("+v+"px, "+S+"px)":"translate3d("+v+"px, "+S+"px, 0)",ce))}return Object.assign({},be,(e={},e[k]=L?S+"px":"",e[R]=T?v+"px":"",e.transform="",e))}function VL(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,u=t.roundOffsets,d=u===void 0?!0:u,h={placement:wi(e.placement),variation:cl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lS(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lS(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const FL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:VL,data:{}};var Gd={passive:!0};function GL(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,u=l===void 0?!0:l,d=Rr(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(p){p.addEventListener("scroll",t.update,Gd)}),u&&d.addEventListener("resize",t.update,Gd),function(){o&&h.forEach(function(p){p.removeEventListener("scroll",t.update,Gd)}),u&&d.removeEventListener("resize",t.update,Gd)}}const KL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:GL,data:{}};var WL={left:"right",right:"left",bottom:"top",top:"bottom"};function ff(n){return n.replace(/left|right|bottom|top/g,function(e){return WL[e]})}var QL={start:"end",end:"start"};function cS(n){return n.replace(/start|end/g,function(e){return QL[e]})}function wy(n){var e=Rr(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Sy(n){return ll(oo(n)).left+wy(n).scrollLeft}function YL(n,e){var t=Rr(n),r=oo(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;var h=K2();(h||!h&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}return{width:o,height:l,x:u+Sy(n),y:d}}function XL(n){var e,t=oo(n),r=wy(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=Go(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Go(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-r.scrollLeft+Sy(n),d=-r.scrollTop;return ls(s||t).direction==="rtl"&&(u+=Go(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:u,y:d}}function Ey(n){var e=ls(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function J2(n){return["html","body","#document"].indexOf(Ni(n))>=0?n.ownerDocument.body:Yr(n)&&Ey(n)?n:J2(_h(n))}function Mc(n,e){var t;e===void 0&&(e=[]);var r=J2(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Rr(r),l=s?[o].concat(o.visualViewport||[],Ey(r)?r:[]):r,u=e.concat(l);return s?u:u.concat(Mc(_h(l)))}function f0(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function JL(n,e){var t=ll(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function uS(n,e,t){return e===V2?f0(YL(n,t)):ea(e)?JL(e,t):f0(XL(oo(n)))}function ZL(n){var e=Mc(_h(n)),t=["absolute","fixed"].indexOf(ls(n).position)>=0,r=t&&Yr(n)?pu(n):n;return ea(r)?e.filter(function(s){return ea(s)&&W2(s,r)&&Ni(s)!=="body"}):[]}function eB(n,e,t,r){var s=e==="clippingParents"?ZL(n):[].concat(e),o=[].concat(s,[t]),l=o[0],u=o.reduce(function(d,h){var p=uS(n,h,r);return d.top=Go(p.top,d.top),d.right=Lf(p.right,d.right),d.bottom=Lf(p.bottom,d.bottom),d.left=Go(p.left,d.left),d},uS(n,l,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Z2(n){var e=n.reference,t=n.element,r=n.placement,s=r?wi(r):null,o=r?cl(r):null,l=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,d;switch(s){case pr:d={x:l,y:e.y-t.height};break;case Xr:d={x:l,y:e.y+e.height};break;case Jr:d={x:e.x+e.width,y:u};break;case mr:d={x:e.x-t.width,y:u};break;default:d={x:e.x,y:e.y}}var h=s?vy(s):null;if(h!=null){var p=h==="y"?"height":"width";switch(o){case ol:d[h]=d[h]-(e[p]/2-t[p]/2);break;case eu:d[h]=d[h]+(e[p]/2-t[p]/2);break}}return d}function tu(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,u=t.boundary,d=u===void 0?wL:u,h=t.rootBoundary,p=h===void 0?V2:h,m=t.elementContext,x=m===void 0?pc:m,v=t.altBoundary,w=v===void 0?!1:v,S=t.padding,C=S===void 0?0:S,T=Y2(typeof C!="number"?C:X2(C,hu)),L=x===pc?SL:pc,R=n.rects.popper,k=n.elements[w?L:x],j=eB(ea(k)?k:k.contextElement||oo(n.elements.popper),d,p,l),H=ll(n.elements.reference),U=Z2({reference:H,element:R,placement:s}),J=f0(Object.assign({},R,U)),re=x===pc?J:H,fe={top:j.top-re.top+T.top,bottom:re.bottom-j.bottom+T.bottom,left:j.left-re.left+T.left,right:re.right-j.right+T.right},be=n.modifiersData.offset;if(x===pc&&be){var ae=be[s];Object.keys(fe).forEach(function(ce){var ve=[Jr,Xr].indexOf(ce)>=0?1:-1,pe=[pr,Xr].indexOf(ce)>=0?"y":"x";fe[ce]+=ae[pe]*ve})}return fe}function tB(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,u=t.flipVariations,d=t.allowedAutoPlacements,h=d===void 0?F2:d,p=cl(r),m=p?u?oS:oS.filter(function(w){return cl(w)===p}):hu,x=m.filter(function(w){return h.indexOf(w)>=0});x.length===0&&(x=m);var v=x.reduce(function(w,S){return w[S]=tu(n,{placement:S,boundary:s,rootBoundary:o,padding:l})[wi(S)],w},{});return Object.keys(v).sort(function(w,S){return v[w]-v[S]})}function nB(n){if(wi(n)===yy)return[];var e=ff(n);return[cS(n),e,cS(e)]}function rB(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!0:l,d=t.fallbackPlacements,h=t.padding,p=t.boundary,m=t.rootBoundary,x=t.altBoundary,v=t.flipVariations,w=v===void 0?!0:v,S=t.allowedAutoPlacements,C=e.options.placement,T=wi(C),L=T===C,R=d||(L||!w?[ff(C)]:nB(C)),k=[C].concat(R).reduce(function(ie,le){return ie.concat(wi(le)===yy?tB(e,{placement:le,boundary:p,rootBoundary:m,padding:h,flipVariations:w,allowedAutoPlacements:S}):le)},[]),j=e.rects.reference,H=e.rects.popper,U=new Map,J=!0,re=k[0],fe=0;fe<k.length;fe++){var be=k[fe],ae=wi(be),ce=cl(be)===ol,ve=[pr,Xr].indexOf(ae)>=0,pe=ve?"width":"height",z=tu(e,{placement:be,boundary:p,rootBoundary:m,altBoundary:x,padding:h}),D=ve?ce?Jr:mr:ce?Xr:pr;j[pe]>H[pe]&&(D=ff(D));var $=ff(D),B=[];if(o&&B.push(z[ae]<=0),u&&B.push(z[D]<=0,z[$]<=0),B.every(function(ie){return ie})){re=be,J=!1;break}U.set(be,B)}if(J)for(var ee=w?3:1,M=function(le){var we=k.find(function(He){var Re=U.get(He);if(Re)return Re.slice(0,le).every(function(de){return de})});if(we)return re=we,"break"},q=ee;q>0;q--){var W=M(q);if(W==="break")break}e.placement!==re&&(e.modifiersData[r]._skip=!0,e.placement=re,e.reset=!0)}}const iB={name:"flip",enabled:!0,phase:"main",fn:rB,requiresIfExists:["offset"],data:{_skip:!1}};function dS(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function fS(n){return[pr,Jr,Xr,mr].some(function(e){return n[e]>=0})}function sB(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=tu(e,{elementContext:"reference"}),u=tu(e,{altBoundary:!0}),d=dS(l,r),h=dS(u,s,o),p=fS(d),m=fS(h);e.modifiersData[t]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const oB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:sB};function aB(n,e,t){var r=wi(n),s=[mr,pr].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],u=o[1];return l=l||0,u=(u||0)*s,[mr,Jr].indexOf(r)>=0?{x:u,y:l}:{x:l,y:u}}function lB(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=F2.reduce(function(p,m){return p[m]=aB(m,e.rects,o),p},{}),u=l[e.placement],d=u.x,h=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=l}const cB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:lB};function uB(n){var e=n.state,t=n.name;e.modifiersData[t]=Z2({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const dB={name:"popperOffsets",enabled:!0,phase:"read",fn:uB,data:{}};function fB(n){return n==="x"?"y":"x"}function hB(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!1:l,d=t.boundary,h=t.rootBoundary,p=t.altBoundary,m=t.padding,x=t.tether,v=x===void 0?!0:x,w=t.tetherOffset,S=w===void 0?0:w,C=tu(e,{boundary:d,rootBoundary:h,padding:m,altBoundary:p}),T=wi(e.placement),L=cl(e.placement),R=!L,k=vy(T),j=fB(k),H=e.modifiersData.popperOffsets,U=e.rects.reference,J=e.rects.popper,re=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,fe=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),be=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ae={x:0,y:0};if(H){if(o){var ce,ve=k==="y"?pr:mr,pe=k==="y"?Xr:Jr,z=k==="y"?"height":"width",D=H[k],$=D+C[ve],B=D-C[pe],ee=v?-J[z]/2:0,M=L===ol?U[z]:J[z],q=L===ol?-J[z]:-U[z],W=e.elements.arrow,ie=v&&W?xy(W):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Q2(),we=le[ve],He=le[pe],Re=kc(0,U[z],ie[z]),de=R?U[z]/2-ee-Re-we-fe.mainAxis:M-Re-we-fe.mainAxis,Je=R?-U[z]/2+ee+Re+He+fe.mainAxis:q+Re+He+fe.mainAxis,ye=e.elements.arrow&&pu(e.elements.arrow),Qe=ye?k==="y"?ye.clientTop||0:ye.clientLeft||0:0,Ut=(ce=be==null?void 0:be[k])!=null?ce:0,Lt=D+de-Ut-Qe,En=D+Je-Ut,Ot=kc(v?Lf($,Lt):$,D,v?Go(B,En):B);H[k]=Ot,ae[k]=Ot-D}if(u){var on,Cn=k==="x"?pr:mr,K=k==="x"?Xr:Jr,Ee=H[j],Ye=j==="y"?"height":"width",Be=Ee+C[Cn],lt=Ee-C[K],nt=[pr,mr].indexOf(T)!==-1,wn=(on=be==null?void 0:be[j])!=null?on:0,Bt=nt?Be:Ee-U[Ye]-J[Ye]-wn+fe.altAxis,ge=nt?Ee+U[Ye]+J[Ye]-wn-fe.altAxis:lt,Te=v&&nt?zL(Bt,Ee,ge):kc(v?Bt:Be,Ee,v?ge:lt);H[j]=Te,ae[j]=Te-Ee}e.modifiersData[r]=ae}}const pB={name:"preventOverflow",enabled:!0,phase:"main",fn:hB,requiresIfExists:["offset"]};function mB(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function gB(n){return n===Rr(n)||!Yr(n)?wy(n):mB(n)}function yB(n){var e=n.getBoundingClientRect(),t=al(e.width)/n.offsetWidth||1,r=al(e.height)/n.offsetHeight||1;return t!==1||r!==1}function bB(n,e,t){t===void 0&&(t=!1);var r=Yr(e),s=Yr(e)&&yB(e),o=oo(e),l=ll(n,s,t),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&((Ni(e)!=="body"||Ey(o))&&(u=gB(e)),Yr(e)?(d=ll(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=Sy(o))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function xB(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!t.has(u)){var d=e.get(u);d&&s(d)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function vB(n){var e=xB(n);return DL.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function wB(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function SB(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var hS={placement:"bottom",modifiers:[],strategy:"absolute"};function pS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function EB(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?hS:s;return function(u,d,h){h===void 0&&(h=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},hS,o),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],x=!1,v={state:p,setOptions:function(T){var L=typeof T=="function"?T(p.options):T;S(),p.options=Object.assign({},o,p.options,L),p.scrollParents={reference:ea(u)?Mc(u):u.contextElement?Mc(u.contextElement):[],popper:Mc(d)};var R=vB(SB([].concat(r,p.options.modifiers)));return p.orderedModifiers=R.filter(function(k){return k.enabled}),w(),v.update()},forceUpdate:function(){if(!x){var T=p.elements,L=T.reference,R=T.popper;if(pS(L,R)){p.rects={reference:bB(L,pu(R),p.options.strategy==="fixed"),popper:xy(R)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(fe){return p.modifiersData[fe.name]=Object.assign({},fe.data)});for(var k=0;k<p.orderedModifiers.length;k++){if(p.reset===!0){p.reset=!1,k=-1;continue}var j=p.orderedModifiers[k],H=j.fn,U=j.options,J=U===void 0?{}:U,re=j.name;typeof H=="function"&&(p=H({state:p,options:J,name:re,instance:v})||p)}}}},update:wB(function(){return new Promise(function(C){v.forceUpdate(),C(p)})}),destroy:function(){S(),x=!0}};if(!pS(u,d))return v;v.setOptions(h).then(function(C){!x&&h.onFirstUpdate&&h.onFirstUpdate(C)});function w(){p.orderedModifiers.forEach(function(C){var T=C.name,L=C.options,R=L===void 0?{}:L,k=C.effect;if(typeof k=="function"){var j=k({state:p,name:T,instance:v,options:R}),H=function(){};m.push(j||H)}})}function S(){m.forEach(function(C){return C()}),m=[]}return v}}var CB=[KL,dB,FL,G2,cB,iB,pB,$L,oB],NB=EB({defaultModifiers:CB}),TB="tippy-box",eN="tippy-content",AB="tippy-backdrop",tN="tippy-arrow",nN="tippy-svg-arrow",Mo={passive:!0,capture:!0},rN=function(){return document.body};function xg(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function Cy(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function iN(n,e){return typeof n=="function"?n.apply(void 0,e):n}function mS(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function kB(n){return n.split(/\s+/).filter(Boolean)}function Ka(n){return[].concat(n)}function gS(n,e){n.indexOf(e)===-1&&n.push(e)}function MB(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function OB(n){return n.split("-")[0]}function Bf(n){return[].slice.call(n)}function yS(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Oc(){return document.createElement("div")}function jh(n){return["Element","Fragment"].some(function(e){return Cy(n,e)})}function RB(n){return Cy(n,"NodeList")}function DB(n){return Cy(n,"MouseEvent")}function _B(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function jB(n){return jh(n)?[n]:RB(n)?Bf(n):Array.isArray(n)?n:Bf(document.querySelectorAll(n))}function vg(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function bS(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function LB(n){var e,t=Ka(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function BB(n,e){var t=e.clientX,r=e.clientY;return n.every(function(s){var o=s.popperRect,l=s.popperState,u=s.props,d=u.interactiveBorder,h=OB(l.placement),p=l.modifiersData.offset;if(!p)return!0;var m=h==="bottom"?p.top.y:0,x=h==="top"?p.bottom.y:0,v=h==="right"?p.left.x:0,w=h==="left"?p.right.x:0,S=o.top-r+m>d,C=r-o.bottom-x>d,T=o.left-t+v>d,L=t-o.right-w>d;return S||C||T||L})}function wg(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){n[r](s,t)})}function xS(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var bi={isTouch:!1},vS=0;function zB(){bi.isTouch||(bi.isTouch=!0,window.performance&&document.addEventListener("mousemove",sN))}function sN(){var n=performance.now();n-vS<20&&(bi.isTouch=!1,document.removeEventListener("mousemove",sN)),vS=n}function IB(){var n=document.activeElement;if(_B(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function HB(){document.addEventListener("touchstart",zB,Mo),window.addEventListener("blur",IB)}var UB=typeof window<"u"&&typeof document<"u",$B=UB?!!window.msCrypto:!1,PB={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},qB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ii=Object.assign({appendTo:rN,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},PB,qB),VB=Object.keys(ii),FB=function(e){var t=Object.keys(e);t.forEach(function(r){ii[r]=e[r]})};function oN(n){var e=n.plugins||[],t=e.reduce(function(r,s){var o=s.name,l=s.defaultValue;if(o){var u;r[o]=n[o]!==void 0?n[o]:(u=ii[o])!=null?u:l}return r},{});return Object.assign({},n,t)}function GB(n,e){var t=e?Object.keys(oN(Object.assign({},ii,{plugins:e}))):VB,r=t.reduce(function(s,o){var l=(n.getAttribute("data-tippy-"+o)||"").trim();if(!l)return s;if(o==="content")s[o]=l;else try{s[o]=JSON.parse(l)}catch{s[o]=l}return s},{});return r}function wS(n,e){var t=Object.assign({},e,{content:iN(e.content,[n])},e.ignoreAttributes?{}:GB(n,e.plugins));return t.aria=Object.assign({},ii.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var KB=function(){return"innerHTML"};function h0(n,e){n[KB()]=e}function SS(n){var e=Oc();return n===!0?e.className=tN:(e.className=nN,jh(n)?e.appendChild(n):h0(e,n)),e}function ES(n,e){jh(e.content)?(h0(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?h0(n,e.content):n.textContent=e.content)}function p0(n){var e=n.firstElementChild,t=Bf(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(eN)}),arrow:t.find(function(r){return r.classList.contains(tN)||r.classList.contains(nN)}),backdrop:t.find(function(r){return r.classList.contains(AB)})}}function aN(n){var e=Oc(),t=Oc();t.className=TB,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Oc();r.className=eN,r.setAttribute("data-state","hidden"),ES(r,n.props),e.appendChild(t),t.appendChild(r),s(n.props,n.props);function s(o,l){var u=p0(e),d=u.box,h=u.content,p=u.arrow;l.theme?d.setAttribute("data-theme",l.theme):d.removeAttribute("data-theme"),typeof l.animation=="string"?d.setAttribute("data-animation",l.animation):d.removeAttribute("data-animation"),l.inertia?d.setAttribute("data-inertia",""):d.removeAttribute("data-inertia"),d.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?d.setAttribute("role",l.role):d.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&ES(h,n.props),l.arrow?p?o.arrow!==l.arrow&&(d.removeChild(p),d.appendChild(SS(l.arrow))):d.appendChild(SS(l.arrow)):p&&d.removeChild(p)}return{popper:e,onUpdate:s}}aN.$$tippy=!0;var WB=1,Kd=[],Sg=[];function QB(n,e){var t=wS(n,Object.assign({},ii,oN(yS(e)))),r,s,o,l=!1,u=!1,d=!1,h=!1,p,m,x,v=[],w=mS(Lt,t.interactiveDebounce),S,C=WB++,T=null,L=MB(t.plugins),R={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},k={id:C,reference:n,popper:Oc(),popperInstance:T,props:t,state:R,plugins:L,clearDelayTimeouts:Bt,setProps:ge,setContent:Te,show:We,hide:Ze,hideWithInteractivity:$t,enable:nt,disable:wn,unmount:Zt,destroy:gr};if(!t.render)return k;var j=t.render(k),H=j.popper,U=j.onUpdate;H.setAttribute("data-tippy-root",""),H.id="tippy-"+k.id,k.popper=H,n._tippy=k,H._tippy=k;var J=L.map(function(Y){return Y.fn(k)}),re=n.hasAttribute("aria-expanded");return ye(),ee(),D(),$("onCreate",[k]),t.showOnCreate&&Be(),H.addEventListener("mouseenter",function(){k.props.interactive&&k.state.isVisible&&k.clearDelayTimeouts()}),H.addEventListener("mouseleave",function(){k.props.interactive&&k.props.trigger.indexOf("mouseenter")>=0&&ve().addEventListener("mousemove",w)}),k;function fe(){var Y=k.props.touch;return Array.isArray(Y)?Y:[Y,0]}function be(){return fe()[0]==="hold"}function ae(){var Y;return!!((Y=k.props.render)!=null&&Y.$$tippy)}function ce(){return S||n}function ve(){var Y=ce().parentNode;return Y?LB(Y):document}function pe(){return p0(H)}function z(Y){return k.state.isMounted&&!k.state.isVisible||bi.isTouch||p&&p.type==="focus"?0:xg(k.props.delay,Y?0:1,ii.delay)}function D(Y){Y===void 0&&(Y=!1),H.style.pointerEvents=k.props.interactive&&!Y?"":"none",H.style.zIndex=""+k.props.zIndex}function $(Y,Ne,ke){if(ke===void 0&&(ke=!0),J.forEach(function(et){et[Y]&&et[Y].apply(et,Ne)}),ke){var pt;(pt=k.props)[Y].apply(pt,Ne)}}function B(){var Y=k.props.aria;if(Y.content){var Ne="aria-"+Y.content,ke=H.id,pt=Ka(k.props.triggerTarget||n);pt.forEach(function(et){var St=et.getAttribute(Ne);if(k.state.isVisible)et.setAttribute(Ne,St?St+" "+ke:ke);else{var en=St&&St.replace(ke,"").trim();en?et.setAttribute(Ne,en):et.removeAttribute(Ne)}})}}function ee(){if(!(re||!k.props.aria.expanded)){var Y=Ka(k.props.triggerTarget||n);Y.forEach(function(Ne){k.props.interactive?Ne.setAttribute("aria-expanded",k.state.isVisible&&Ne===ce()?"true":"false"):Ne.removeAttribute("aria-expanded")})}}function M(){ve().removeEventListener("mousemove",w),Kd=Kd.filter(function(Y){return Y!==w})}function q(Y){if(!(bi.isTouch&&(d||Y.type==="mousedown"))){var Ne=Y.composedPath&&Y.composedPath()[0]||Y.target;if(!(k.props.interactive&&xS(H,Ne))){if(Ka(k.props.triggerTarget||n).some(function(ke){return xS(ke,Ne)})){if(bi.isTouch||k.state.isVisible&&k.props.trigger.indexOf("click")>=0)return}else $("onClickOutside",[k,Y]);k.props.hideOnClick===!0&&(k.clearDelayTimeouts(),k.hide(),u=!0,setTimeout(function(){u=!1}),k.state.isMounted||we())}}}function W(){d=!0}function ie(){d=!1}function le(){var Y=ve();Y.addEventListener("mousedown",q,!0),Y.addEventListener("touchend",q,Mo),Y.addEventListener("touchstart",ie,Mo),Y.addEventListener("touchmove",W,Mo)}function we(){var Y=ve();Y.removeEventListener("mousedown",q,!0),Y.removeEventListener("touchend",q,Mo),Y.removeEventListener("touchstart",ie,Mo),Y.removeEventListener("touchmove",W,Mo)}function He(Y,Ne){de(Y,function(){!k.state.isVisible&&H.parentNode&&H.parentNode.contains(H)&&Ne()})}function Re(Y,Ne){de(Y,Ne)}function de(Y,Ne){var ke=pe().box;function pt(et){et.target===ke&&(wg(ke,"remove",pt),Ne())}if(Y===0)return Ne();wg(ke,"remove",m),wg(ke,"add",pt),m=pt}function Je(Y,Ne,ke){ke===void 0&&(ke=!1);var pt=Ka(k.props.triggerTarget||n);pt.forEach(function(et){et.addEventListener(Y,Ne,ke),v.push({node:et,eventType:Y,handler:Ne,options:ke})})}function ye(){be()&&(Je("touchstart",Ut,{passive:!0}),Je("touchend",En,{passive:!0})),kB(k.props.trigger).forEach(function(Y){if(Y!=="manual")switch(Je(Y,Ut),Y){case"mouseenter":Je("mouseleave",En);break;case"focus":Je($B?"focusout":"blur",Ot);break;case"focusin":Je("focusout",Ot);break}})}function Qe(){v.forEach(function(Y){var Ne=Y.node,ke=Y.eventType,pt=Y.handler,et=Y.options;Ne.removeEventListener(ke,pt,et)}),v=[]}function Ut(Y){var Ne,ke=!1;if(!(!k.state.isEnabled||on(Y)||u)){var pt=((Ne=p)==null?void 0:Ne.type)==="focus";p=Y,S=Y.currentTarget,ee(),!k.state.isVisible&&DB(Y)&&Kd.forEach(function(et){return et(Y)}),Y.type==="click"&&(k.props.trigger.indexOf("mouseenter")<0||l)&&k.props.hideOnClick!==!1&&k.state.isVisible?ke=!0:Be(Y),Y.type==="click"&&(l=!ke),ke&&!pt&&lt(Y)}}function Lt(Y){var Ne=Y.target,ke=ce().contains(Ne)||H.contains(Ne);if(!(Y.type==="mousemove"&&ke)){var pt=Ye().concat(H).map(function(et){var St,en=et._tippy,Yn=(St=en.popperInstance)==null?void 0:St.state;return Yn?{popperRect:et.getBoundingClientRect(),popperState:Yn,props:t}:null}).filter(Boolean);BB(pt,Y)&&(M(),lt(Y))}}function En(Y){var Ne=on(Y)||k.props.trigger.indexOf("click")>=0&&l;if(!Ne){if(k.props.interactive){k.hideWithInteractivity(Y);return}lt(Y)}}function Ot(Y){k.props.trigger.indexOf("focusin")<0&&Y.target!==ce()||k.props.interactive&&Y.relatedTarget&&H.contains(Y.relatedTarget)||lt(Y)}function on(Y){return bi.isTouch?be()!==Y.type.indexOf("touch")>=0:!1}function Cn(){K();var Y=k.props,Ne=Y.popperOptions,ke=Y.placement,pt=Y.offset,et=Y.getReferenceClientRect,St=Y.moveTransition,en=ae()?p0(H).arrow:null,Yn=et?{getBoundingClientRect:et,contextElement:et.contextElement||ce()}:n,yr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Q){var ue=Q.state;if(ae()){var De=pe(),gt=De.box;["placement","reference-hidden","escaped"].forEach(function(Ge){Ge==="placement"?gt.setAttribute("data-placement",ue.placement):ue.attributes.popper["data-popper-"+Ge]?gt.setAttribute("data-"+Ge,""):gt.removeAttribute("data-"+Ge)}),ue.attributes.popper={}}}},Pt=[{name:"offset",options:{offset:pt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!St}},yr];ae()&&en&&Pt.push({name:"arrow",options:{element:en,padding:3}}),Pt.push.apply(Pt,(Ne==null?void 0:Ne.modifiers)||[]),k.popperInstance=NB(Yn,H,Object.assign({},Ne,{placement:ke,onFirstUpdate:x,modifiers:Pt}))}function K(){k.popperInstance&&(k.popperInstance.destroy(),k.popperInstance=null)}function Ee(){var Y=k.props.appendTo,Ne,ke=ce();k.props.interactive&&Y===rN||Y==="parent"?Ne=ke.parentNode:Ne=iN(Y,[ke]),Ne.contains(H)||Ne.appendChild(H),k.state.isMounted=!0,Cn()}function Ye(){return Bf(H.querySelectorAll("[data-tippy-root]"))}function Be(Y){k.clearDelayTimeouts(),Y&&$("onTrigger",[k,Y]),le();var Ne=z(!0),ke=fe(),pt=ke[0],et=ke[1];bi.isTouch&&pt==="hold"&&et&&(Ne=et),Ne?r=setTimeout(function(){k.show()},Ne):k.show()}function lt(Y){if(k.clearDelayTimeouts(),$("onUntrigger",[k,Y]),!k.state.isVisible){we();return}if(!(k.props.trigger.indexOf("mouseenter")>=0&&k.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Y.type)>=0&&l)){var Ne=z(!1);Ne?s=setTimeout(function(){k.state.isVisible&&k.hide()},Ne):o=requestAnimationFrame(function(){k.hide()})}}function nt(){k.state.isEnabled=!0}function wn(){k.hide(),k.state.isEnabled=!1}function Bt(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)}function ge(Y){if(!k.state.isDestroyed){$("onBeforeUpdate",[k,Y]),Qe();var Ne=k.props,ke=wS(n,Object.assign({},Ne,yS(Y),{ignoreAttributes:!0}));k.props=ke,ye(),Ne.interactiveDebounce!==ke.interactiveDebounce&&(M(),w=mS(Lt,ke.interactiveDebounce)),Ne.triggerTarget&&!ke.triggerTarget?Ka(Ne.triggerTarget).forEach(function(pt){pt.removeAttribute("aria-expanded")}):ke.triggerTarget&&n.removeAttribute("aria-expanded"),ee(),D(),U&&U(Ne,ke),k.popperInstance&&(Cn(),Ye().forEach(function(pt){requestAnimationFrame(pt._tippy.popperInstance.forceUpdate)})),$("onAfterUpdate",[k,Y])}}function Te(Y){k.setProps({content:Y})}function We(){var Y=k.state.isVisible,Ne=k.state.isDestroyed,ke=!k.state.isEnabled,pt=bi.isTouch&&!k.props.touch,et=xg(k.props.duration,0,ii.duration);if(!(Y||Ne||ke||pt)&&!ce().hasAttribute("disabled")&&($("onShow",[k],!1),k.props.onShow(k)!==!1)){if(k.state.isVisible=!0,ae()&&(H.style.visibility="visible"),D(),le(),k.state.isMounted||(H.style.transition="none"),ae()){var St=pe(),en=St.box,Yn=St.content;vg([en,Yn],0)}x=function(){var Pt;if(!(!k.state.isVisible||h)){if(h=!0,H.offsetHeight,H.style.transition=k.props.moveTransition,ae()&&k.props.animation){var O=pe(),Q=O.box,ue=O.content;vg([Q,ue],et),bS([Q,ue],"visible")}B(),ee(),gS(Sg,k),(Pt=k.popperInstance)==null||Pt.forceUpdate(),$("onMount",[k]),k.props.animation&&ae()&&Re(et,function(){k.state.isShown=!0,$("onShown",[k])})}},Ee()}}function Ze(){var Y=!k.state.isVisible,Ne=k.state.isDestroyed,ke=!k.state.isEnabled,pt=xg(k.props.duration,1,ii.duration);if(!(Y||Ne||ke)&&($("onHide",[k],!1),k.props.onHide(k)!==!1)){if(k.state.isVisible=!1,k.state.isShown=!1,h=!1,l=!1,ae()&&(H.style.visibility="hidden"),M(),we(),D(!0),ae()){var et=pe(),St=et.box,en=et.content;k.props.animation&&(vg([St,en],pt),bS([St,en],"hidden"))}B(),ee(),k.props.animation?ae()&&He(pt,k.unmount):k.unmount()}}function $t(Y){ve().addEventListener("mousemove",w),gS(Kd,w),w(Y)}function Zt(){k.state.isVisible&&k.hide(),k.state.isMounted&&(K(),Ye().forEach(function(Y){Y._tippy.unmount()}),H.parentNode&&H.parentNode.removeChild(H),Sg=Sg.filter(function(Y){return Y!==k}),k.state.isMounted=!1,$("onHidden",[k]))}function gr(){k.state.isDestroyed||(k.clearDelayTimeouts(),k.unmount(),Qe(),delete n._tippy,k.state.isDestroyed=!0,$("onDestroy",[k]))}}function ml(n,e){e===void 0&&(e={});var t=ii.plugins.concat(e.plugins||[]);HB();var r=Object.assign({},e,{plugins:t}),s=jB(n),o=s.reduce(function(l,u){var d=u&&QB(u,r);return d&&l.push(d),l},[]);return jh(n)?o[0]:o}ml.defaultProps=ii;ml.setDefaultProps=FB;ml.currentInput=bi;Object.assign({},G2,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});ml.setDefaultProps({render:aN});class YB{constructor({editor:e,element:t,view:r,tippyOptions:s={},updateDelay:o=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:u,state:d,from:h,to:p})=>{const{doc:m,selection:x}=d,{empty:v}=x,w=!m.textBetween(h,p).length&&py(d.selection),S=this.element.contains(document.activeElement);return!(!(u.hasFocus()||S)||v||w||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var d;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&(!((d=this.element.parentNode)===null||d===void 0)&&d.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=u=>{this.blurHandler({event:u})},this.handleDebouncedUpdate=(u,d)=>{const h=!(d!=null&&d.selection.eq(u.state.selection)),p=!(d!=null&&d.doc.eq(u.state.doc));!h&&!p||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,h,p,d)},this.updateDelay))},this.updateHandler=(u,d,h,p)=>{var m,x,v;const{state:w,composing:S}=u,{selection:C}=w;if(S||!d&&!h)return;this.createTooltip();const{ranges:L}=C,R=Math.min(...L.map(H=>H.$from.pos)),k=Math.max(...L.map(H=>H.$to.pos));if(!((m=this.shouldShow)===null||m===void 0?void 0:m.call(this,{editor:this.editor,element:this.element,view:u,state:w,oldState:p,from:R,to:k}))){this.hide();return}(x=this.tippy)===null||x===void 0||x.setProps({getReferenceClientRect:((v=this.tippyOptions)===null||v===void 0?void 0:v.getReferenceClientRect)||(()=>{if(P2(w.selection)){let H=u.nodeDOM(R);if(H){const U=H.dataset.nodeViewWrapper?H:H.querySelector("[data-node-view-wrapper]");if(U&&(H=U.firstChild),H)return H.getBoundingClientRect()}}return Uj(u,R,k)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!t)&&(this.tippy=ml(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,s=r.selection.from!==r.selection.to;if(this.updateDelay>0&&s){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),l=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,l,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const lN=n=>new Yt({key:typeof n.pluginKey=="string"?new fn(n.pluginKey):n.pluginKey,view:e=>new YB({view:e,...n})});Dn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[lN({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function XB(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cN={exports:{}},Eg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function JB(){if(CS)return Eg;CS=1;var n=se;function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(m,x){var v=x(),w=r({inst:{value:v,getSnapshot:x}}),S=w[0].inst,C=w[1];return o(function(){S.value=v,S.getSnapshot=x,d(S)&&C({inst:S})},[m,v,x]),s(function(){return d(S)&&C({inst:S}),m(function(){d(S)&&C({inst:S})})},[m]),l(v),v}function d(m){var x=m.getSnapshot;m=m.value;try{var v=x();return!t(m,v)}catch{return!0}}function h(m,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Eg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Eg}cN.exports=JB();var Ny=cN.exports;const ZB=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},e6=({contentComponent:n})=>{const e=Ny.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return se.createElement(se.Fragment,null,Object.values(e))};function t6(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:eC.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class n6 extends se.Component{constructor(e){var t;super(e),this.editorContentRef=se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=t6(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return se.createElement(se.Fragment,null,se.createElement("div",{ref:ZB(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&se.createElement(e6,{contentComponent:e.contentComponent}))}}const r6=N.forwardRef((n,e)=>{const t=se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return se.createElement(n6,{key:t,innerRef:e,...n})}),i6=se.memo(r6);var s6=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=r;s--!==0;){var l=o[s];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},o6=XB(s6),uN={exports:{}},Cg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function a6(){if(NS)return Cg;NS=1;var n=se,e=Ny;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return Cg.useSyncExternalStoreWithSelector=function(h,p,m,x,v){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function T(H){if(!L){if(L=!0,R=H,H=x(H),v!==void 0&&S.hasValue){var U=S.value;if(v(U,H))return k=U}return k=H}if(U=k,r(R,H))return U;var J=x(H);return v!==void 0&&v(U,J)?U:(R=H,k=J)}var L=!1,R,k,j=m===void 0?null:m;return[function(){return T(p())},j===null?void 0:function(){return T(j())}]},[p,m,x,v]);var C=s(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=C},[C]),d(C),C},Cg}uN.exports=a6();var l6=uN.exports;const c6=typeof window<"u"?N.useLayoutEffect:N.useEffect;class u6{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function d6(n){var e;const[t]=N.useState(()=>new u6(n.editor)),r=l6.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:o6);return c6(()=>t.watch(n.editor),[n.editor,t]),N.useDebugValue(r),r}const f6=!1,m0=typeof window>"u",h6=m0||!!(typeof window<"u"&&window.next);class Ty{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?m0||h6?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)===null||o===void 0?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)===null||o===void 0?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)===null||o===void 0?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)===null||o===void 0?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)===null||o===void 0?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)===null||o===void 0?void 0:o.call(s,...r)}};return new yL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,o)=>{var l;return s===((l=t.extensions)===null||l===void 0?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Ty.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function p6(n={},e=[]){const t=N.useRef(n);t.current=n;const[r]=N.useState(()=>new Ty(t)),s=Ny.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return N.useDebugValue(s),N.useEffect(r.onRender(e)),d6({editor:s,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&o===0?0:o+1}),s}const dN=N.createContext({editor:null});dN.Consumer;const m6=()=>N.useContext(dN),fN=n=>{const[e,t]=N.useState(null),{editor:r}=m6();return N.useEffect(()=>{var s;if(!e||!((s=n.editor)===null||s===void 0)&&s.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:l,tippyOptions:u={},updateDelay:d,shouldShow:h=null}=n,p=l||r;if(!p){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=lN({updateDelay:d,editor:p,element:e,pluginKey:o,shouldShow:h,tippyOptions:u});return p.registerPlugin(m),()=>{p.unregisterPlugin(o)}},[n.editor,r,e]),se.createElement("div",{ref:t,className:n.className,style:{visibility:"hidden"}},n.children)},hN=N.createContext({onDragStart:void 0}),pN=()=>N.useContext(hN),g6=n=>{const e=n.as||"div",{nodeViewContentRef:t}=pN();return se.createElement(e,{...n,ref:t,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style}})},mN=se.forwardRef((n,e)=>{const{onDragStart:t}=pN(),r=n.as||"div";return se.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function TS(n){return!!(typeof n=="function"&&n.prototype&&n.prototype.isReactComponent)}function AS(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.forward_ref)"||n.$$typeof.description==="react.forward_ref"))}function y6(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.memo)"||n.$$typeof.description==="react.memo"))}function b6(n){if(TS(n)||AS(n))return!0;if(y6(n)){const e=n.type;if(e)return TS(e)||AS(e)}return!1}function x6(){try{if(N.version)return parseInt(N.version.split(".")[0],10)>=19}catch{}return!1}class gN{constructor(e,{editor:t,props:r={},as:s="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(s),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?ZE.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,s=this.editor,o=x6(),l=b6(t),u={...r};u.ref&&!(o||l)&&delete u.ref,!u.ref&&(o||l)&&(u.ref=d=>{this.ref=d}),this.reactElement=se.createElement(t,{...u}),(e=s==null?void 0:s.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class v6 extends bL{constructor(e,t,r){if(super(e,t,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const s=this.dom.querySelector("[data-node-view-content]");if(!s)return;s.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(h={})=>this.updateAttributes(h),deleteNode:()=>this.deleteNode(),ref:N.createRef()};if(!this.component.displayName){const h=p=>p.charAt(0).toUpperCase()+p.substring(1);this.component.displayName=h(this.extension.name)}const s={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:h=>{h&&this.contentDOMElement&&h.firstChild!==this.contentDOMElement&&(h.hasAttribute("data-node-view-wrapper")&&h.removeAttribute("data-node-view-wrapper"),h.appendChild(this.contentDOMElement))}},o=this.component,l=N.memo(h=>se.createElement(hN.Provider,{value:s},N.createElement(o,h)));l.displayName="ReactNodeView";let u=this.node.isInline?"span":"div";this.options.as&&(u=this.options.as);const{className:d=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new gN(l,{editor:this.editor,props:e,as:u,className:`node-${this.node.type.name} ${d}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,r){const s=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,l=this.decorations,u=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:o,oldDecorations:l,newNode:e,newDecorations:t,oldInnerDecorations:u,innerDecorations:r,updateProps:()=>s({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,s({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=_f(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function yN(n,e){return t=>t.editor.contentComponent?new v6(n,t,e):{}}const w6=/^\s*>\s$/,S6=Qt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Zc({find:w6,type:this.type})]}}),E6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,C6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,N6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,T6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,A6=Ci.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[sl({find:E6,type:this.type}),sl({find:N6,type:this.type})]},addPasteRules(){return[Zo({find:C6,type:this.type}),Zo({find:T6,type:this.type})]}}),k6="listItem",kS="textStyle",MS=/^\s*([-+*])\s$/,M6=Qt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(k6,this.editor.getAttributes(kS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Zc({find:MS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Zc({find:MS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kS),editor:this.editor})),[n]}}),O6=/(^|[^`])`([^`]+)`(?!`)/,R6=/(^|[^`])`([^`]+)`(?!`)/g,D6=Ci.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[sl({find:O6,type:this.type})]},addPasteRules(){return[Zo({find:R6,type:this.type})]}}),_6=/^```([a-z]+)?[\s\n]$/,j6=/^~~~([a-z]+)?[\s\n]$/,bN=Qt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",wt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(Fe.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[u0({find:_6,type:this.type,getAttributes:n=>({language:n[1]})}),u0({find:j6,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Yt({key:new fn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!t||!o)return!1;const{tr:l,schema:u}=n.state,d=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Pe.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),L6=Qt.create({name:"doc",topNode:!0,content:"block+"});function B6(n={}){return new Yt({view(e){return new z6(e,n)}})}class z6{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=l=>{this[s](l)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),l=o.width/s.offsetWidth,u=o.height/s.offsetHeight;if(t){let m=e.nodeBefore,x=e.nodeAfter;if(m||x){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let w=v.getBoundingClientRect(),S=m?w.bottom:w.top;m&&x&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*u;r={left:w.left,right:w.right,top:S-C,bottom:S+C}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*l;r={left:m.left-x,right:m.left+x,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),x=m.width/d.offsetWidth,v=m.height/d.offsetHeight;h=m.left-d.scrollLeft*x,p=m.top-d.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=MC(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const I6=Dn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[B6(this.options)]}});class Wt extends Fe{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Wt.valid(r)?new Wt(r):Fe.near(r)}content(){return Se.empty}eq(e){return e instanceof Wt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Wt(e.resolve(t.pos))}getBookmark(){return new Ay(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!H6(e)||!U6(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Wt.valid(e))return e;let s=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let d=e.doc.resolve(s);if(Wt.valid(d))return d}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!Ie.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*t),r=!1;continue e}break}o=l,s+=t;let u=e.doc.resolve(s);if(Wt.valid(u))return u}return null}}}Wt.prototype.visible=!1;Wt.findFrom=Wt.findGapCursorFrom;Fe.jsonID("gapcursor",Wt);class Ay{constructor(e){this.pos=e}map(e){return new Ay(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Wt.valid(t)?new Wt(t):Fe.near(t)}}function xN(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function H6(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||xN(s.type))return!0;if(s.inlineContent)return!1}}return!0}function U6(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||xN(s.type))return!0;if(s.inlineContent)return!1}}return!0}function $6(){return new Yt({props:{decorations:F6,createSelectionBetween(n,e,t){return e.pos==t.pos&&Wt.valid(t)?new Wt(t):null},handleClick:q6,handleKeyDown:P6,handleDOMEvents:{beforeinput:V6}}})}const P6=sy({ArrowLeft:Wd("horiz",-1),ArrowRight:Wd("horiz",1),ArrowUp:Wd("vert",-1),ArrowDown:Wd("vert",1)});function Wd(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Pe){if(!o.endOfTextblock(t)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Wt.findGapCursorFrom(u,e,d);return h?(s&&s(r.tr.setSelection(new Wt(h))),!0):!1}}function q6(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Wt.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&Ie.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Wt(r))),!0)}function V6(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Wt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=oe.empty;for(let l=r.length-1;l>=0;l--)s=oe.from(r[l].createAndFill(null,s));let o=n.state.tr.replace(t.pos,t.pos,new Se(s,0,0));return o.setSelection(Pe.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function F6(n){if(!(n.selection instanceof Wt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Gt.create(n.doc,[kn.widget(n.selection.head,e,{key:"gapcursor"})])}const G6=Dn.create({name:"gapCursor",addProseMirrorPlugins(){return[$6()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ot(Oe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),K6=Qt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",wt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:o}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(x=>u.includes(x.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),W6=Qt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,wt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>u0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var zf=200,On=function(){};On.prototype.append=function(e){return e.length?(e=On.from(e),!this.length&&e||e.length<zf&&this.leafAppend(e)||this.length<zf&&e.leafPrepend(this)||this.appendInner(e)):this};On.prototype.prepend=function(e){return e.length?On.from(e).append(this):this};On.prototype.appendInner=function(e){return new Q6(this,e)};On.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?On.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};On.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};On.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};On.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,l){return s.push(e(o,l))},t,r),s};On.from=function(e){return e instanceof On?e:e&&e.length?new vN(e):On.empty};var vN=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,l,u){for(var d=o;d<l;d++)if(s(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,l,u){for(var d=o-1;d>=l;d--)if(s(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=zf)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=zf)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(On);On.empty=new vN([]);var Q6=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(s,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(On);const Y6=500;class ni{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;t&&(s=this.remapping(r,this.items.length),o=s.maps.length);let l=e.tr,u,d,h=[],p=[];return this.items.forEach((m,x)=>{if(!m.step){s||(s=this.remapping(r,x+1),o=s.maps.length),o--,p.push(m);return}if(s){p.push(new mi(m.map));let v=m.step.map(s.slice(o)),w;v&&l.maybeStep(v).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new mi(w,void 0,void 0,h.length+p.length))),o--,w&&s.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(o)):m.selection,d=new ni(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,t,r,s){let o=[],l=this.eventCount,u=this.items,d=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),x=new mi(e.mapping.maps[p],m,t),v;(v=d&&d.merge(x))&&(x=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(x),t&&(l++,t=void 0),s||(d=x)}let h=l-r.depth;return h>J6&&(u=X6(u,h),l-=h),new ni(u.append(o),l)}remapping(e,t){let r=new Gc;return this.items.forEach((s,o)=>{let l=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new ni(this.items.append(e.map(t=>new mi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(x=>{x.selection&&u--},s);let d=t;this.items.forEach(x=>{let v=o.getMirror(--d);if(v==null)return;l=Math.min(l,v);let w=o.maps[v];if(x.step){let S=e.steps[v].invert(e.docs[v]),C=x.selection&&x.selection.map(o.slice(d+1,v));C&&u++,r.push(new mi(w,S,C))}else r.push(new mi(w))},s);let h=[];for(let x=t;x<l;x++)h.push(new mi(o.maps[x]));let p=this.items.slice(0,s).append(h).append(r),m=new ni(p,u);return m.emptyItemCount()>Y6&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(t.slice(r)),h=d&&d.getMap();if(r--,h&&t.appendMap(h,r),d){let p=l.selection&&l.selection.map(t.slice(r));p&&o++;let m=new mi(h.invert(),d,p),x,v=s.length-1;(x=s.length&&s[v].merge(m))?s[v]=x:s.push(m)}}else l.map&&r--},this.items.length,0),new ni(On.from(s.reverse()),o)}}ni.empty=new ni(On.empty,0);function X6(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class mi{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new mi(t.getMap().invert(),t,this.selection)}}}class $s{constructor(e,t,r,s,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const J6=20;function Z6(n,e,t,r){let s=t.getMeta(Ko),o;if(s)return s.historyState;t.getMeta(nz)&&(n=new $s(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Ko))return l.getMeta(Ko).redo?new $s(n.done.addTransform(t,void 0,r,hf(e)),n.undone,OS(t.mapping.maps),n.prevTime,n.prevComposition):new $s(n.done,n.undone.addTransform(t,void 0,r,hf(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),d=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!ez(t,n.prevRanges)),h=l?Ng(n.prevRanges,t.mapping):OS(t.mapping.maps);return new $s(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,hf(e)),ni.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new $s(n.done.rebased(t,o),n.undone.rebased(t,o),Ng(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new $s(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Ng(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function ez(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(t=!0)}),t}function OS(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,o,l)=>e.push(o,l));return e}function Ng(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),o=e.map(n[r+1],-1);s<=o&&t.push(s,o)}return t}function tz(n,e,t){let r=hf(e),s=Ko.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),d=new $s(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Ko,{redo:t,historyState:d})}let Tg=!1,RS=null;function hf(n){let e=n.plugins;if(RS!=e){Tg=!1,RS=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Tg=!0;break}}return Tg}const Ko=new fn("history"),nz=new fn("closeHistory");function rz(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Yt({key:Ko,state:{init(){return new $s(ni.empty,ni.empty,null,0,-1)},apply(e,t,r){return Z6(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?SN:r=="historyRedo"?EN:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function wN(n,e){return(t,r)=>{let s=Ko.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let o=tz(s,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const SN=wN(!1,!0),EN=wN(!0,!0),iz=Dn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>SN(n,e),redo:()=>({state:n,dispatch:e})=>EN(n,e)}},addProseMirrorPlugins(){return[rz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),sz=Qt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",wt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!xL(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:s}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):P2(t)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:l,dispatch:u})=>{var d;if(u){const{$to:h}=l.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?l.setSelection(Pe.create(l.doc,h.pos+1)):h.nodeAfter.isBlock?l.setSelection(Ie.create(l.doc,h.pos)):l.setSelection(Pe.create(l.doc,h.pos));else{const m=(d=h.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();m&&(l.insert(p,m),l.setSelection(Pe.create(l.doc,p+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[q2({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),oz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,az=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,cz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,uz=Ci.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[sl({find:oz,type:this.type}),sl({find:lz,type:this.type})]},addPasteRules(){return[Zo({find:az,type:this.type}),Zo({find:cz,type:this.type})]}}),dz=Qt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",wt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),fz="listItem",DS="textStyle",_S=/^(\d+)\.\s$/,hz=Qt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",wt(this.options.HTMLAttributes,t),0]:["ol",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fz,this.editor.getAttributes(DS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Zc({find:_S,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Zc({find:_S,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(DS)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),pz=Qt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),mz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,gz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,yz=Ci.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[sl({find:mz,type:this.type})]},addPasteRules(){return[Zo({find:gz,type:this.type})]}}),bz=Qt.create({name:"text",group:"inline"}),xz=Dn.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(A6.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(S6.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(M6.configure(this.options.bulletList)),this.options.code!==!1&&n.push(D6.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(bN.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(L6.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(I6.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(G6.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(K6.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(W6.configure(this.options.heading)),this.options.history!==!1&&n.push(iz.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(sz.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(uz.configure(this.options.italic)),this.options.listItem!==!1&&n.push(dz.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(hz.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(pz.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(yz.configure(this.options.strike)),this.options.text!==!1&&n.push(bz.configure(this.options.text)),n}}),vz=Dn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Yt({key:new fn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((l,u)=>{const d=r>=u&&r<=u+l.nodeSize,h=!l.isLeaf&&Dh(l);if((d||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const m=kn.node(u,u+l.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:d}):this.options.placeholder});s.push(m)}return this.options.includeChildren}),Gt.create(n,s)}}})]}}),wz=Ci.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",wt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Sz="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Ez="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",g0="numeric",y0="ascii",b0="alpha",Rc="asciinumeric",vc="alphanumeric",x0="domain",CN="emoji",Cz="scheme",Nz="slashscheme",Ag="whitespace";function Tz(n,e){return n in e||(e[n]=[]),e[n]}function zo(n,e,t){e[g0]&&(e[Rc]=!0,e[vc]=!0),e[y0]&&(e[Rc]=!0,e[b0]=!0),e[Rc]&&(e[vc]=!0),e[b0]&&(e[vc]=!0),e[vc]&&(e[x0]=!0),e[CN]&&(e[x0]=!0);for(const r in e){const s=Tz(r,t);s.indexOf(n)<0&&s.push(n)}}function Az(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function fr(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}fr.groups={};fr.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||fr.groups;let s;return e&&e.j?s=e:(s=new fr(e),t&&r&&zo(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const o=n.length;if(!o)return s;for(let l=0;l<o-1;l++)s=s.tt(n[l]);return s.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||fr.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const o=e;let l,u=s.go(n);if(u?(l=new fr,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new fr,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(Az(l.t,r),t);zo(o,d,r)}else t&&zo(o,t,r);l.t=o}return s.j[n]=l,l}};const st=(n,e,t,r,s)=>n.ta(e,t,r,s),rn=(n,e,t,r,s)=>n.tr(e,t,r,s),jS=(n,e,t,r,s)=>n.ts(e,t,r,s),me=(n,e,t,r,s)=>n.tt(e,t,r,s),Ji="WORD",v0="UWORD",NN="ASCIINUMERICAL",TN="ALPHANUMERICAL",nu="LOCALHOST",w0="TLD",S0="UTLD",pf="SCHEME",Wa="SLASH_SCHEME",ky="NUM",E0="WS",My="NL",Dc="OPENBRACE",_c="CLOSEBRACE",If="OPENBRACKET",Hf="CLOSEBRACKET",Uf="OPENPAREN",$f="CLOSEPAREN",Pf="OPENANGLEBRACKET",qf="CLOSEANGLEBRACKET",Vf="FULLWIDTHLEFTPAREN",Ff="FULLWIDTHRIGHTPAREN",Gf="LEFTCORNERBRACKET",Kf="RIGHTCORNERBRACKET",Wf="LEFTWHITECORNERBRACKET",Qf="RIGHTWHITECORNERBRACKET",Yf="FULLWIDTHLESSTHAN",Xf="FULLWIDTHGREATERTHAN",Jf="AMPERSAND",Zf="APOSTROPHE",eh="ASTERISK",Ps="AT",th="BACKSLASH",nh="BACKTICK",rh="CARET",Vs="COLON",Oy="COMMA",ih="DOLLAR",gi="DOT",sh="EQUALS",Ry="EXCLAMATION",qr="HYPHEN",jc="PERCENT",oh="PIPE",ah="PLUS",lh="POUND",Lc="QUERY",Dy="QUOTE",AN="FULLWIDTHMIDDLEDOT",_y="SEMI",yi="SLASH",Bc="TILDE",ch="UNDERSCORE",kN="EMOJI",uh="SYM";var MN=Object.freeze({__proto__:null,ALPHANUMERICAL:TN,AMPERSAND:Jf,APOSTROPHE:Zf,ASCIINUMERICAL:NN,ASTERISK:eh,AT:Ps,BACKSLASH:th,BACKTICK:nh,CARET:rh,CLOSEANGLEBRACKET:qf,CLOSEBRACE:_c,CLOSEBRACKET:Hf,CLOSEPAREN:$f,COLON:Vs,COMMA:Oy,DOLLAR:ih,DOT:gi,EMOJI:kN,EQUALS:sh,EXCLAMATION:Ry,FULLWIDTHGREATERTHAN:Xf,FULLWIDTHLEFTPAREN:Vf,FULLWIDTHLESSTHAN:Yf,FULLWIDTHMIDDLEDOT:AN,FULLWIDTHRIGHTPAREN:Ff,HYPHEN:qr,LEFTCORNERBRACKET:Gf,LEFTWHITECORNERBRACKET:Wf,LOCALHOST:nu,NL:My,NUM:ky,OPENANGLEBRACKET:Pf,OPENBRACE:Dc,OPENBRACKET:If,OPENPAREN:Uf,PERCENT:jc,PIPE:oh,PLUS:ah,POUND:lh,QUERY:Lc,QUOTE:Dy,RIGHTCORNERBRACKET:Kf,RIGHTWHITECORNERBRACKET:Qf,SCHEME:pf,SEMI:_y,SLASH:yi,SLASH_SCHEME:Wa,SYM:uh,TILDE:Bc,TLD:w0,UNDERSCORE:ch,UTLD:S0,UWORD:v0,WORD:Ji,WS:E0});const Yi=/[a-z]/,mc=new RegExp("\\p{L}","u"),kg=new RegExp("\\p{Emoji}","u"),Xi=/\d/,Mg=/\s/,LS="\r",Og=`
`,kz="",Mz="",Rg="";let Qd=null,Yd=null;function Oz(n=[]){const e={};fr.groups=e;const t=new fr;Qd==null&&(Qd=BS(Sz)),Yd==null&&(Yd=BS(Ez)),me(t,"'",Zf),me(t,"{",Dc),me(t,"}",_c),me(t,"[",If),me(t,"]",Hf),me(t,"(",Uf),me(t,")",$f),me(t,"<",Pf),me(t,">",qf),me(t,"",Vf),me(t,"",Ff),me(t,"",Gf),me(t,"",Kf),me(t,"",Wf),me(t,"",Qf),me(t,"",Yf),me(t,"",Xf),me(t,"&",Jf),me(t,"*",eh),me(t,"@",Ps),me(t,"`",nh),me(t,"^",rh),me(t,":",Vs),me(t,",",Oy),me(t,"$",ih),me(t,".",gi),me(t,"=",sh),me(t,"!",Ry),me(t,"-",qr),me(t,"%",jc),me(t,"|",oh),me(t,"+",ah),me(t,"#",lh),me(t,"?",Lc),me(t,'"',Dy),me(t,"/",yi),me(t,";",_y),me(t,"~",Bc),me(t,"_",ch),me(t,"\\",th),me(t,"",AN);const r=rn(t,Xi,ky,{[g0]:!0});rn(r,Xi,r);const s=rn(r,Yi,NN,{[Rc]:!0}),o=rn(r,mc,TN,{[vc]:!0}),l=rn(t,Yi,Ji,{[y0]:!0});rn(l,Xi,s),rn(l,Yi,l),rn(s,Xi,s),rn(s,Yi,s);const u=rn(t,mc,v0,{[b0]:!0});rn(u,Yi),rn(u,Xi,o),rn(u,mc,u),rn(o,Xi,o),rn(o,Yi),rn(o,mc,o);const d=me(t,Og,My,{[Ag]:!0}),h=me(t,LS,E0,{[Ag]:!0}),p=rn(t,Mg,E0,{[Ag]:!0});me(t,Rg,p),me(h,Og,d),me(h,Rg,p),rn(h,Mg,p),me(p,LS),me(p,Og),rn(p,Mg,p),me(p,Rg,p);const m=rn(t,kg,kN,{[CN]:!0});me(m,"#"),rn(m,kg,m),me(m,kz,m);const x=me(m,Mz);me(x,"#"),rn(x,kg,m);const v=[[Yi,l],[Xi,s]],w=[[Yi,null],[mc,u],[Xi,o]];for(let S=0;S<Qd.length;S++)Is(t,Qd[S],w0,Ji,v);for(let S=0;S<Yd.length;S++)Is(t,Yd[S],S0,v0,w);zo(w0,{tld:!0,ascii:!0},e),zo(S0,{utld:!0,alpha:!0},e),Is(t,"file",pf,Ji,v),Is(t,"mailto",pf,Ji,v),Is(t,"http",Wa,Ji,v),Is(t,"https",Wa,Ji,v),Is(t,"ftp",Wa,Ji,v),Is(t,"ftps",Wa,Ji,v),zo(pf,{scheme:!0,ascii:!0},e),zo(Wa,{slashscheme:!0,ascii:!0},e),n=n.sort((S,C)=>S[0]>C[0]?1:-1);for(let S=0;S<n.length;S++){const C=n[S][0],L=n[S][1]?{[Cz]:!0}:{[Nz]:!0};C.indexOf("-")>=0?L[x0]=!0:Yi.test(C)?Xi.test(C)?L[Rc]=!0:L[y0]=!0:L[g0]=!0,jS(t,C,C,L)}return jS(t,"localhost",nu,{ascii:!0}),t.jd=new fr(uh),{start:t,tokens:Object.assign({groups:e},MN)}}function ON(n,e){const t=Rz(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let o=0,l=0;for(;l<r;){let u=n,d=null,h=0,p=null,m=-1,x=-1;for(;l<r&&(d=u.go(t[l]));)u=d,u.accepts()?(m=0,x=0,p=u):m>=0&&(m+=t[l].length,x++),h+=t[l].length,o+=t[l].length,l++;o-=m,l-=x,h-=m,s.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return s}function Rz(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),o,l=s<55296||s>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Is(n,e,t,r,s){let o;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];n.j[d]?o=n.j[d]:(o=new fr(r),o.jr=s.slice(),n.j[d]=o),n=o}return o=new fr(t),o.jr=s.slice(),n.j[e[l-1]]=o,o}function BS(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let o=0;for(;s.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+o),10);l>0;l--)t.pop();r+=o}else t.push(n[r]),r++}return e}const ru={defaultProtocol:"http",events:null,format:zS,formatHref:zS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function jy(n,e=null){let t=Object.assign({},ru);n&&(t=Object.assign(t,n instanceof jy?n.o:n));const r=t.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}jy.prototype={o:ru,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:ru[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function zS(n){return n}function RN(n,e){this.t="token",this.v=n,this.tk=e}RN.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ru.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),o=this.toFormattedString(n),l={},u=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:s,attributes:l,content:o,eventListeners:m}}};function Lh(n,e){class t extends RN{constructor(s,o){super(s,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const IS=Lh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),HS=Lh("text"),Dz=Lh("nl"),Xd=Lh("url",{isLink:!0,toHref(n=ru.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==nu&&n[1].t===Vs}}),Pr=n=>new fr(n);function _z({groups:n}){const e=n.domain.concat([Jf,eh,Ps,th,nh,rh,ih,sh,qr,ky,jc,oh,ah,lh,yi,uh,Bc,ch]),t=[Zf,Vs,Oy,gi,Ry,jc,Lc,Dy,_y,Pf,qf,Dc,_c,Hf,If,Uf,$f,Vf,Ff,Gf,Kf,Wf,Qf,Yf,Xf],r=[Jf,Zf,eh,th,nh,rh,ih,sh,qr,Dc,_c,jc,oh,ah,lh,Lc,yi,uh,Bc,ch],s=Pr(),o=me(s,Bc);st(o,r,o),st(o,n.domain,o);const l=Pr(),u=Pr(),d=Pr();st(s,n.domain,l),st(s,n.scheme,u),st(s,n.slashscheme,d),st(l,r,o),st(l,n.domain,l);const h=me(l,Ps);me(o,Ps,h),me(u,Ps,h),me(d,Ps,h);const p=me(o,gi);st(p,r,o),st(p,n.domain,o);const m=Pr();st(h,n.domain,m),st(m,n.domain,m);const x=me(m,gi);st(x,n.domain,m);const v=Pr(IS);st(x,n.tld,v),st(x,n.utld,v),me(h,nu,v);const w=me(m,qr);me(w,qr,w),st(w,n.domain,m),st(v,n.domain,m),me(v,gi,x),me(v,qr,w);const S=me(v,Vs);st(S,n.numeric,IS);const C=me(l,qr),T=me(l,gi);me(C,qr,C),st(C,n.domain,l),st(T,r,o),st(T,n.domain,l);const L=Pr(Xd);st(T,n.tld,L),st(T,n.utld,L),st(L,n.domain,l),st(L,r,o),me(L,gi,T),me(L,qr,C),me(L,Ps,h);const R=me(L,Vs),k=Pr(Xd);st(R,n.numeric,k);const j=Pr(Xd),H=Pr();st(j,e,j),st(j,t,H),st(H,e,j),st(H,t,H),me(L,yi,j),me(k,yi,j);const U=me(u,Vs),J=me(d,Vs),re=me(J,yi),fe=me(re,yi);st(u,n.domain,l),me(u,gi,T),me(u,qr,C),st(d,n.domain,l),me(d,gi,T),me(d,qr,C),st(U,n.domain,j),me(U,yi,j),me(U,Lc,j),st(fe,n.domain,j),st(fe,e,j),me(fe,yi,j);const be=[[Dc,_c],[If,Hf],[Uf,$f],[Pf,qf],[Vf,Ff],[Gf,Kf],[Wf,Qf],[Yf,Xf]];for(let ae=0;ae<be.length;ae++){const[ce,ve]=be[ae],pe=me(j,ce);me(H,ce,pe),me(pe,ve,j);const z=Pr(Xd);st(pe,e,z);const D=Pr();st(pe,t),st(z,e,z),st(z,t,D),st(D,e,z),st(D,t,D),me(z,ve,j),me(D,ve,j)}return me(s,nu,L),me(s,My,Dz),{start:s,tokens:MN}}function jz(n,e,t){let r=t.length,s=0,o=[],l=[];for(;s<r;){let u=n,d=null,h=null,p=0,m=null,x=-1;for(;s<r&&!(d=u.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=d||u.go(t[s].t));)d=null,u=h,u.accepts()?(x=0,m=u):x>=0&&x++,s++,p++;if(x<0)s-=p,s<r&&(l.push(t[s]),s++);else{l.length>0&&(o.push(Dg(HS,e,l)),l=[]),s-=x,p-=x;const v=m.t,w=t.slice(s-p,s);o.push(Dg(v,e,w))}}return l.length>0&&o.push(Dg(HS,e,l)),o}function Dg(n,e,t){const r=t[0].s,s=t[t.length-1].e,o=e.slice(r,s);return new n(o,t)}const Lz=typeof console<"u"&&console&&console.warn||(()=>{}),Bz="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function zz(){return fr.groups={},Ft.scanner=null,Ft.parser=null,Ft.tokenQueue=[],Ft.pluginQueue=[],Ft.customSchemes=[],Ft.initialized=!1,Ft}function US(n,e=!1){if(Ft.initialized&&Lz(`linkifyjs: already initialized - will not register custom scheme "${n}" ${Bz}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ft.customSchemes.push([n,e])}function Iz(){Ft.scanner=Oz(Ft.customSchemes);for(let n=0;n<Ft.tokenQueue.length;n++)Ft.tokenQueue[n][1]({scanner:Ft.scanner});Ft.parser=_z(Ft.scanner.tokens);for(let n=0;n<Ft.pluginQueue.length;n++)Ft.pluginQueue[n][1]({scanner:Ft.scanner,parser:Ft.parser});return Ft.initialized=!0,Ft}function Ly(n){return Ft.initialized||Iz(),jz(Ft.parser.start,n,ON(Ft.scanner.start,n))}Ly.scan=ON;function DN(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new jy(t),s=Ly(n),o=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}const By="[\0- -\u2029]",Hz=new RegExp(By),Uz=new RegExp(`${By}$`),$z=new RegExp(By,"g");function Pz(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function qz(n){return new Yt({key:new fn("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!s||o)return;const{tr:l}=r,u=_j(t.doc,[...e]);if(Hj(u).forEach(({newRange:h})=>{const p=jj(r.doc,h,v=>v.isTextblock);let m,x;if(p.length>1)m=p[0],x=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!Uz.test(v))return;m=p[0],x=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&x){const v=x.split(Hz).filter(Boolean);if(v.length<=0)return!1;const w=v[v.length-1],S=m.pos+x.lastIndexOf(w);if(!w)return!1;const C=Ly(w).map(T=>T.toObject(n.defaultProtocol));if(!Pz(C))return!1;C.filter(T=>T.isLink).map(T=>({...T,from:S+T.start+1,to:S+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>n.validate(T.value)).filter(T=>n.shouldAutoLink(T.value)).forEach(T=>{gy(T.from,T.to,r.doc).some(L=>L.mark.type===n.type)||l.addMark(T.from,T.to,n.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function Vz(n){return new Yt({key:new fn("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let l=r.target;const u=[];for(;l.nodeName!=="DIV";)u.push(l),l=l.parentNode;if(!u.find(x=>x.nodeName==="A"))return!1;const d=U2(e.state,n.type.name),h=r.target,p=(s=h==null?void 0:h.href)!==null&&s!==void 0?s:d.href,m=(o=h==null?void 0:h.target)!==null&&o!==void 0?o:d.target;return h&&p?(window.open(p,m),!0):!1}}})}function Fz(n){return new Yt({key:new fn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const d=DN(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!d?!1:n.editor.commands.setMark(n.type,{href:d.href})}}})}function ko(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace($z,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Gz=Ci.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){US(n);return}US(n.scheme,n.optionalSlashes)})},onDestroy(){zz()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!ko(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!ko(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!ko(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",wt(this.options.HTMLAttributes,n),0]:["a",wt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ko(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ko(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Zo({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=DN(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!ko(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(qz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!ko(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(Vz({type:this.type})),this.options.linkOnPaste&&n.push(Fz({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),Kz=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Wz=Qt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",wt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[q2({find:Kz,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}});var C0,N0;if(typeof WeakMap<"u"){let n=new WeakMap;C0=e=>n.get(e),N0=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;C0=r=>{for(let s=0;s<n.length;s+=2)if(n[s]==r)return n[s+1]},N0=(r,s)=>(t==10&&(t=0),n[t++]=r,n[t++]=s)}var sn=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,s=e/this.width|0;let o=r+1,l=s+1;for(let u=1;o<this.width&&this.map[e+u]==t;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==t;u++)l++;return{left:r,top:s,right:o,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:s,top:o,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:s==this.width)?null:this.map[o*this.width+(t<0?r-1:s)]:(t<0?o==0:l==this.height)?null:this.map[r+this.width*(t<0?o-1:l)]}rectBetween(n,e){const{left:t,right:r,top:s,bottom:o}=this.findCell(n),{left:l,right:u,top:d,bottom:h}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(s,d),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let s=n.left;s<n.right;s++){const o=r*this.width+s,l=this.map[o];t[l]||(t[l]=!0,!(s==n.left&&s&&this.map[o-1]==l||r==n.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,s=0;;r++){const o=s+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const u=(n+1)*this.width;for(;l<u&&this.map[l]<s;)l++;return l==u?o-1:this.map[l]}s=o}}static get(n){return C0(n)||N0(n,Qz(n))}};function Qz(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=Yz(n),t=n.childCount,r=[];let s=0,o=null;const l=[];for(let h=0,p=e*t;h<p;h++)r[h]=0;for(let h=0,p=0;h<t;h++){const m=n.child(h);p++;for(let w=0;;w++){for(;s<r.length&&r[s]!=0;)s++;if(w==m.childCount)break;const S=m.child(w),{colspan:C,rowspan:T,colwidth:L}=S.attrs;for(let R=0;R<T;R++){if(R+h>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:T-R});break}const k=s+R*e;for(let j=0;j<C;j++){r[k+j]==0?r[k+j]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:C-j});const H=L&&L[j];if(H){const U=(k+j)%e*2,J=l[U];J==null||J!=H&&l[U+1]==1?(l[U]=H,l[U+1]=1):J==H&&l[U+1]++}}}s+=C,p+=S.nodeSize}const x=(h+1)*e;let v=0;for(;s<x;)r[s++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||t===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new sn(e,t,r,o);let d=!1;for(let h=0;!d&&h<l.length;h+=2)l[h]!=null&&l[h+1]<t&&(d=!0);return d&&Xz(u,l,n),u}function Yz(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const s=n.child(r);let o=0;if(t)for(let l=0;l<r;l++){const u=n.child(l);for(let d=0;d<u.childCount;d++){const h=u.child(d);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<s.childCount;l++){const u=s.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Xz(n,e,t){n.problems||(n.problems=[]);const r={};for(let s=0;s<n.map.length;s++){const o=n.map[s];if(r[o])continue;r[o]=!0;const l=t.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const d=l.attrs;for(let h=0;h<d.colspan;h++){const p=(s+h)%n.width,m=e[p*2];m!=null&&(!d.colwidth||d.colwidth[h]!=m)&&((u||(u=Jz(d)))[h]=m)}u&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function Jz(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Wn(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var Fs=new fn("selectingCells");function gl(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Zz(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function ai(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Bh(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=gl(e.$head)||e7(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function e7(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function T0(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function t7(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function zy(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function _N(n,e,t){const r=n.node(-1),s=sn.get(r),o=n.start(-1),l=s.nextCell(n.pos-o,e,t);return l==null?null:n.node(0).resolve(o+l)}function ta(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function jN(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<t;s++)r.colwidth.splice(e,0,0)}return r}function n7(n,e,t){const r=Wn(e.type.schema).header_cell;for(let s=0;s<n.height;s++)if(e.nodeAt(n.map[t+s*n.width]).type!=r)return!1;return!0}var Ht=class Zi extends Fe{constructor(e,t=e){const r=e.node(-1),s=sn.get(r),o=e.start(-1),l=s.rectBetween(e.pos-o,t.pos-o),u=e.node(0),d=s.cellsInRect(l).filter(p=>p!=t.pos-o);d.unshift(t.pos-o);const h=d.map(p=>{const m=r.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const x=o+p+1;return new jC(u.resolve(x),u.resolve(x+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),s=e.resolve(t.map(this.$headCell.pos));if(T0(r)&&T0(s)&&zy(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Zi.rowSelection(r,s):o&&this.isColSelection()?Zi.colSelection(r,s):new Zi(r,s)}return Pe.between(r,s)}content(){const e=this.$anchorCell.node(-1),t=sn.get(e),r=this.$anchorCell.start(-1),s=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=s.top;d<s.bottom;d++){const h=[];for(let p=d*t.width+s.left,m=s.left;m<s.right;m++,p++){const x=t.map[p];if(o[x])continue;o[x]=!0;const v=t.findCell(x);let w=e.nodeAt(x);if(!w)throw RangeError(`No cell with offset ${x} found`);const S=s.left-v.left,C=v.right-s.right;if(S>0||C>0){let T=w.attrs;if(S>0&&(T=ta(T,0,S)),C>0&&(T=ta(T,T.colspan-C,C)),v.left<s.left){if(w=w.type.createAndFill(T),!w)throw RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else w=w.type.create(T,w.content)}if(v.top<s.top||v.bottom>s.bottom){const T={...w.attrs,rowspan:Math.min(v.bottom,s.bottom)-Math.max(v.top,s.top)};v.top<s.top?w=w.type.createAndFill(T):w=w.type.create(T,w.content)}h.push(w)}l.push(e.child(d).copy(oe.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new Se(oe.from(u),1,1)}replace(e,t=Se.empty){const r=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){const{$from:u,$to:d}=s[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(d.pos),l?Se.empty:t)}const o=Fe.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new Se(oe.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=sn.get(t),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let l=0;l<o.length;l++)e(t.nodeAt(o[l]),s+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),s=sn.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.top<=u.top?(l.top>0&&(e=d.resolve(o+s.map[l.left])),u.bottom<s.height&&(t=d.resolve(o+s.map[s.width*(s.height-1)+u.right-1]))):(u.top>0&&(t=d.resolve(o+s.map[u.left])),l.bottom<s.height&&(e=d.resolve(o+s.map[s.width*(s.height-1)+l.right-1]))),new Zi(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=sn.get(e),r=this.$anchorCell.start(-1),s=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const l=s+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==t.width}eq(e){return e instanceof Zi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),s=sn.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.left<=u.left?(l.left>0&&(e=d.resolve(o+s.map[l.top*s.width])),u.right<s.width&&(t=d.resolve(o+s.map[s.width*(u.top+1)-1]))):(u.left>0&&(t=d.resolve(o+s.map[u.top*s.width])),l.right<s.width&&(e=d.resolve(o+s.map[s.width*(l.top+1)-1]))),new Zi(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Zi(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Zi(e.resolve(t),e.resolve(r))}getBookmark(){return new r7(this.$anchorCell.pos,this.$headCell.pos)}};Ht.prototype.visible=!1;Fe.jsonID("cell",Ht);var r7=class LN{constructor(e,t){this.anchor=e,this.head=t}map(e){return new LN(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&zy(t,r)?new Ht(t,r):Fe.near(r,1)}};function i7(n){if(!(n.selection instanceof Ht))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(kn.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Gt.create(n.doc,e)}function s7({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,s=n.depth;for(;s>=0&&!(n.after(s+1)<n.end(s));s--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(s).type.spec.tableRole)}function o7({$from:n,$to:e}){let t,r;for(let s=n.depth;s>0;s--){const o=n.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let s=e.depth;s>0;s--){const o=e.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function a7(n,e,t){const r=(e||n).selection,s=(e||n).doc;let o,l;if(r instanceof Ie&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=Ht.create(s,r.from);else if(l=="row"){const u=s.resolve(r.from+1);o=Ht.rowSelection(u,u)}else if(!t){const u=sn.get(r.node),d=r.from+1,h=d+u.map[u.width*u.height-1];o=Ht.create(s,d+1,h)}}else r instanceof Pe&&s7(r)?o=Pe.create(s,r.from):r instanceof Pe&&o7(r)&&(o=Pe.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var l7=new fn("fix-tables");function BN(n,e,t,r){const s=n.childCount,o=e.childCount;e:for(let l=0,u=0;l<o;l++){const d=e.child(l);for(let h=u,p=Math.min(s,l+3);h<p;h++)if(n.child(h)==d){u=h+1,t+=d.nodeSize;continue e}r(d,t),u<s&&n.child(u).sameMarkup(d)?BN(n.child(u),d,t+1,r):d.nodesBetween(0,d.content.size,r,t+1),t+=d.nodeSize}}function zN(n,e){let t;const r=(s,o)=>{s.type.spec.tableRole=="table"&&(t=c7(n,s,o,t))};return e?e.doc!=n.doc&&BN(e.doc,n.doc,0,r):n.doc.descendants(r),t}function c7(n,e,t,r){const s=sn.get(e);if(!s.problems)return r;r||(r=n.tr);const o=[];for(let d=0;d<s.height;d++)o.push(0);for(let d=0;d<s.problems.length;d++){const h=s.problems[d];if(h.type=="collision"){const p=e.nodeAt(h.pos);if(!p)continue;const m=p.attrs;for(let x=0;x<m.rowspan;x++)o[h.row+x]+=h.n;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,ta(m,m.colspan-h.n,h.n))}else if(h.type=="missing")o[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const p=r.mapping.map(t);r.delete(p,p+e.nodeSize)}}let l,u;for(let d=0;d<o.length;d++)o[d]&&(l==null&&(l=d),u=d);for(let d=0,h=t+1;d<s.height;d++){const p=e.child(d),m=h+p.nodeSize,x=o[d];if(x>0){let v="cell";p.firstChild&&(v=p.firstChild.type.spec.tableRole);const w=[];for(let C=0;C<x;C++){const T=Wn(n.schema)[v].createAndFill();T&&w.push(T)}const S=(d==0||l==d-1)&&u==d?h+1:m-1;r.insert(r.mapping.map(S),w)}h=m}return r.setMeta(l7,{fixTables:!0})}function ki(n){const e=n.selection,t=Bh(n),r=t.node(-1),s=t.start(-1),o=sn.get(r);return{...e instanceof Ht?o.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):o.findCell(t.pos-s),tableStart:s,map:o,table:r}}function IN(n,{map:e,tableStart:t,table:r},s){let o=s>0?-1:0;n7(e,r,s+o)&&(o=s==0||s==e.width?null:0);for(let l=0;l<e.height;l++){const u=l*e.width+s;if(s>0&&s<e.width&&e.map[u-1]==e.map[u]){const d=e.map[u],h=r.nodeAt(d);n.setNodeMarkup(n.mapping.map(t+d),null,jN(h.attrs,s-e.colCount(d))),l+=h.attrs.rowspan-1}else{const d=o==null?Wn(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,h=e.positionAt(l,s,r);n.insert(n.mapping.map(t+h),d.createAndFill())}}return n}function u7(n,e){if(!ai(n))return!1;if(e){const t=ki(n);e(IN(n.tr,t,t.left))}return!0}function d7(n,e){if(!ai(n))return!1;if(e){const t=ki(n);e(IN(n.tr,t,t.right))}return!0}function f7(n,{map:e,table:t,tableStart:r},s){const o=n.mapping.maps.length;for(let l=0;l<e.height;){const u=l*e.width+s,d=e.map[u],h=t.nodeAt(d),p=h.attrs;if(s>0&&e.map[u-1]==d||s<e.width-1&&e.map[u+1]==d)n.setNodeMarkup(n.mapping.slice(o).map(r+d),null,ta(p,s-e.colCount(d)));else{const m=n.mapping.slice(o).map(r+d);n.delete(m,m+h.nodeSize)}l+=p.rowspan}}function h7(n,e){if(!ai(n))return!1;if(e){const t=ki(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let s=t.right-1;f7(r,t,s),s!=t.left;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=sn.get(o)}e(r)}return!0}function p7(n,e,t){var r;const s=Wn(e.type.schema).header_cell;for(let o=0;o<n.width;o++)if(((r=e.nodeAt(n.map[o+t*n.width]))==null?void 0:r.type)!=s)return!1;return!0}function HN(n,{map:e,tableStart:t,table:r},s){var o;let l=t;for(let h=0;h<s;h++)l+=r.child(h).nodeSize;const u=[];let d=s>0?-1:0;p7(e,r,s+d)&&(d=s==0||s==e.height?null:0);for(let h=0,p=e.width*s;h<e.width;h++,p++)if(s>0&&s<e.height&&e.map[p]==e.map[p-e.width]){const m=e.map[p],x=r.nodeAt(m).attrs;n.setNodeMarkup(t+m,null,{...x,rowspan:x.rowspan+1}),h+=x.colspan-1}else{const m=d==null?Wn(r.type.schema).cell:(o=r.nodeAt(e.map[p+d*e.width]))==null?void 0:o.type,x=m==null?void 0:m.createAndFill();x&&u.push(x)}return n.insert(l,Wn(r.type.schema).row.create(null,u)),n}function m7(n,e){if(!ai(n))return!1;if(e){const t=ki(n);e(HN(n.tr,t,t.top))}return!0}function g7(n,e){if(!ai(n))return!1;if(e){const t=ki(n);e(HN(n.tr,t,t.bottom))}return!0}function y7(n,{map:e,table:t,tableStart:r},s){let o=0;for(let h=0;h<s;h++)o+=t.child(h).nodeSize;const l=o+t.child(s).nodeSize,u=n.mapping.maps.length;n.delete(o+r,l+r);const d=new Set;for(let h=0,p=s*e.width;h<e.width;h++,p++){const m=e.map[p];if(!d.has(m)){if(d.add(m),s>0&&m==e.map[p-e.width]){const x=t.nodeAt(m).attrs;n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...x,rowspan:x.rowspan-1}),h+=x.colspan-1}else if(s<e.height&&m==e.map[p+e.width]){const x=t.nodeAt(m),v=x.attrs,w=x.type.create({...v,rowspan:x.attrs.rowspan-1},x.content),S=e.positionAt(s+1,h,t);n.insert(n.mapping.slice(u).map(r+S),w),h+=v.colspan-1}}}}function b7(n,e){if(!ai(n))return!1;if(e){const t=ki(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let s=t.bottom-1;y7(r,t,s),s!=t.top;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=sn.get(t.table)}e(r)}return!0}function $S(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function x7({width:n,height:e,map:t},r){let s=r.top*n+r.left,o=s,l=(r.bottom-1)*n+r.left,u=s+(r.right-r.left-1);for(let d=r.top;d<r.bottom;d++){if(r.left>0&&t[o]==t[o-1]||r.right<n&&t[u]==t[u+1])return!0;o+=n,u+=n}for(let d=r.left;d<r.right;d++){if(r.top>0&&t[s]==t[s-n]||r.bottom<e&&t[l]==t[l+n])return!0;s++,l++}return!1}function PS(n,e){const t=n.selection;if(!(t instanceof Ht)||t.$anchorCell.pos==t.$headCell.pos)return!1;const r=ki(n),{map:s}=r;if(x7(s,r))return!1;if(e){const o=n.tr,l={};let u=oe.empty,d,h;for(let p=r.top;p<r.bottom;p++)for(let m=r.left;m<r.right;m++){const x=s.map[p*s.width+m],v=r.table.nodeAt(x);if(!(l[x]||!v))if(l[x]=!0,d==null)d=x,h=v;else{$S(v)||(u=u.append(v.content));const w=o.mapping.map(x+r.tableStart);o.delete(w,w+v.nodeSize)}}if(d==null||h==null)return!0;if(o.setNodeMarkup(d+r.tableStart,null,{...jN(h.attrs,h.attrs.colspan,r.right-r.left-h.attrs.colspan),rowspan:r.bottom-r.top}),u.size){const p=d+1+h.content.size,m=$S(h)?d+1:p;o.replaceWith(m+r.tableStart,p+r.tableStart,u)}o.setSelection(new Ht(o.doc.resolve(d+r.tableStart))),e(o)}return!0}function qS(n,e){const t=Wn(n.schema);return v7(({node:r})=>t[r.type.spec.tableRole])(n,e)}function v7(n){return(e,t)=>{var r;const s=e.selection;let o,l;if(s instanceof Ht){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;o=s.$anchorCell.nodeAfter,l=s.$anchorCell.pos}else{if(o=Zz(s.$from),!o)return!1;l=(r=gl(s.$from))==null?void 0:r.pos}if(o==null||l==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(t){let u=o.attrs;const d=[],h=u.colwidth;u.rowspan>1&&(u={...u,rowspan:1}),u.colspan>1&&(u={...u,colspan:1});const p=ki(e),m=e.tr;for(let v=0;v<p.right-p.left;v++)d.push(h?{...u,colwidth:h&&h[v]?[h[v]]:null}:u);let x;for(let v=p.top;v<p.bottom;v++){let w=p.map.positionAt(v,p.left,p.table);v==p.top&&(w+=o.nodeSize);for(let S=p.left,C=0;S<p.right;S++,C++)S==p.left&&v==p.top||m.insert(x=m.mapping.map(w+p.tableStart,1),n({node:o,row:v,col:S}).createAndFill(d[C]))}m.setNodeMarkup(l,n({node:o,row:p.top,col:p.left}),d[0]),s instanceof Ht&&m.setSelection(new Ht(m.doc.resolve(s.$anchorCell.pos),x?m.doc.resolve(x):void 0)),t(m)}return!0}}function w7(n,e){return function(t,r){if(!ai(t))return!1;const s=Bh(t);if(s.nodeAfter.attrs[n]===e)return!1;if(r){const o=t.tr;t.selection instanceof Ht?t.selection.forEachCell((l,u)=>{l.attrs[n]!==e&&o.setNodeMarkup(u,null,{...l.attrs,[n]:e})}):o.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[n]:e}),r(o)}return!0}}function S7(n){return function(e,t){if(!ai(e))return!1;if(t){const r=Wn(e.schema),s=ki(e),o=e.tr,l=s.map.cellsInRect(n=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:n=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),u=l.map(d=>s.table.nodeAt(d));for(let d=0;d<l.length;d++)u[d].type==r.header_cell&&o.setNodeMarkup(s.tableStart+l[d],r.cell,u[d].attrs);if(o.steps.length==0)for(let d=0;d<l.length;d++)o.setNodeMarkup(s.tableStart+l[d],r.header_cell,u[d].attrs);t(o)}return!0}}function VS(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const o=e.table.nodeAt(r[s]);if(o&&o.type!==t.header_cell)return!1}return!0}function iu(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?S7(n):function(t,r){if(!ai(t))return!1;if(r){const s=Wn(t.schema),o=ki(t),l=t.tr,u=VS("row",o,s),d=VS("column",o,s),p=(n==="column"?u:n==="row"?d:!1)?1:0,m=n=="column"?{left:0,top:p,right:1,bottom:o.map.height}:n=="row"?{left:p,top:0,right:o.map.width,bottom:1}:o,x=n=="column"?d?s.cell:s.header_cell:n=="row"?u?s.cell:s.header_cell:s.cell;o.map.cellsInRect(m).forEach(v=>{const w=v+o.tableStart,S=l.doc.nodeAt(w);S&&l.setNodeMarkup(w,x,S.attrs)}),r(l)}return!0}}iu("row",{useDeprecatedLogic:!0});iu("column",{useDeprecatedLogic:!0});var E7=iu("cell",{useDeprecatedLogic:!0});function C7(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,s=n.before();r>=0;r--){const o=n.node(-1).child(r),l=o.lastChild;if(l)return s-1-l.nodeSize;s-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),s=n.after();r<t.childCount;r++){const o=t.child(r);if(o.childCount)return s+1;s+=o.nodeSize}}return null}function FS(n){return function(e,t){if(!ai(e))return!1;const r=C7(Bh(e),n);if(r==null)return!1;if(t){const s=e.doc.resolve(r);t(e.tr.setSelection(Pe.between(s,t7(s))).scrollIntoView())}return!0}}function N7(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Jd(n,e){const t=n.selection;if(!(t instanceof Ht))return!1;if(e){const r=n.tr,s=Wn(n.schema).cell.createAndFill().content;t.forEachCell((o,l)=>{o.content.eq(s)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new Se(s,0,0))}),r.docChanged&&e(r)}return!0}function T7(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const s=e.child(0),o=s.type.spec.tableRole,l=s.type.schema,u=[];if(o=="row")for(let d=0;d<e.childCount;d++){let h=e.child(d).content;const p=d?0:Math.max(0,t-1),m=d<e.childCount-1?0:Math.max(0,r-1);(p||m)&&(h=A0(Wn(l).row,new Se(h,p,m)).content),u.push(h)}else if(o=="cell"||o=="header_cell")u.push(t||r?A0(Wn(l).row,new Se(e,t,r)).content:e);else return null;return A7(l,u)}function A7(n,e){const t=[];for(let s=0;s<e.length;s++){const o=e[s];for(let l=o.childCount-1;l>=0;l--){const{rowspan:u,colspan:d}=o.child(l).attrs;for(let h=s;h<s+u;h++)t[h]=(t[h]||0)+d}}let r=0;for(let s=0;s<t.length;s++)r=Math.max(r,t[s]);for(let s=0;s<t.length;s++)if(s>=e.length&&e.push(oe.empty),t[s]<r){const o=Wn(n).cell.createAndFill(),l=[];for(let u=t[s];u<r;u++)l.push(o);e[s]=e[s].append(oe.from(l))}return{height:e.length,width:r,rows:e}}function A0(n,e){const t=n.createAndFill();return new W0(t).replace(0,t.content.size,e).doc}function k7({width:n,height:e,rows:t},r,s){if(n!=r){const o=[],l=[];for(let u=0;u<t.length;u++){const d=t[u],h=[];for(let p=o[u]||0,m=0;p<r;m++){let x=d.child(m%d.childCount);p+x.attrs.colspan>r&&(x=x.type.createChecked(ta(x.attrs,x.attrs.colspan,p+x.attrs.colspan-r),x.content)),h.push(x),p+=x.attrs.colspan;for(let v=1;v<x.attrs.rowspan;v++)o[u+v]=(o[u+v]||0)+x.attrs.colspan}l.push(oe.from(h))}t=l,n=r}if(e!=s){const o=[];for(let l=0,u=0;l<s;l++,u++){const d=[],h=t[u%e];for(let p=0;p<h.childCount;p++){let m=h.child(p);l+m.attrs.rowspan>s&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,s-m.attrs.rowspan)},m.content)),d.push(m)}o.push(oe.from(d))}t=o,e=s}return{width:n,height:e,rows:t}}function M7(n,e,t,r,s,o,l){const u=n.doc.type.schema,d=Wn(u);let h,p;if(s>e.width)for(let m=0,x=0;m<e.height;m++){const v=t.child(m);x+=v.nodeSize;const w=[];let S;v.lastChild==null||v.lastChild.type==d.cell?S=h||(h=d.cell.createAndFill()):S=p||(p=d.header_cell.createAndFill());for(let C=e.width;C<s;C++)w.push(S);n.insert(n.mapping.slice(l).map(x-1+r),w)}if(o>e.height){const m=[];for(let w=0,S=(e.height-1)*e.width;w<Math.max(e.width,s);w++){const C=w>=e.width?!1:t.nodeAt(e.map[S+w]).type==d.header_cell;m.push(C?p||(p=d.header_cell.createAndFill()):h||(h=d.cell.createAndFill()))}const x=d.row.create(null,oe.from(m)),v=[];for(let w=e.height;w<o;w++)v.push(x);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),v)}return!!(h||p)}function GS(n,e,t,r,s,o,l,u){if(l==0||l==e.height)return!1;let d=!1;for(let h=s;h<o;h++){const p=l*e.width+h,m=e.map[p];if(e.map[p-e.width]==m){d=!0;const x=t.nodeAt(m),{top:v,left:w}=e.findCell(m);n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...x.attrs,rowspan:l-v}),n.insert(n.mapping.slice(u).map(e.positionAt(l,w,t)),x.type.createAndFill({...x.attrs,rowspan:v+x.attrs.rowspan-l})),h+=x.attrs.colspan-1}}return d}function KS(n,e,t,r,s,o,l,u){if(l==0||l==e.width)return!1;let d=!1;for(let h=s;h<o;h++){const p=h*e.width+l,m=e.map[p];if(e.map[p-1]==m){d=!0;const x=t.nodeAt(m),v=e.colCount(m),w=n.mapping.slice(u).map(m+r);n.setNodeMarkup(w,null,ta(x.attrs,l-v,x.attrs.colspan-(l-v))),n.insert(w+x.nodeSize,x.type.createAndFill(ta(x.attrs,0,l-v))),h+=x.attrs.rowspan-1}}return d}function WS(n,e,t,r,s){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let l=sn.get(o);const{top:u,left:d}=r,h=d+s.width,p=u+s.height,m=n.tr;let x=0;function v(){if(o=t?m.doc.nodeAt(t-1):m.doc,!o)throw new Error("No table found");l=sn.get(o),x=m.mapping.maps.length}M7(m,l,o,t,h,p,x)&&v(),GS(m,l,o,t,d,h,u,x)&&v(),GS(m,l,o,t,d,h,p,x)&&v(),KS(m,l,o,t,u,p,d,x)&&v(),KS(m,l,o,t,u,p,h,x)&&v();for(let w=u;w<p;w++){const S=l.positionAt(w,d,o),C=l.positionAt(w,h,o);m.replace(m.mapping.slice(x).map(S+t),m.mapping.slice(x).map(C+t),new Se(s.rows[w-u],0,0))}v(),m.setSelection(new Ht(m.doc.resolve(t+l.positionAt(u,d,o)),m.doc.resolve(t+l.positionAt(p-1,h-1,o)))),e(m)}var O7=sy({ArrowLeft:Zd("horiz",-1),ArrowRight:Zd("horiz",1),ArrowUp:Zd("vert",-1),ArrowDown:Zd("vert",1),"Shift-ArrowLeft":ef("horiz",-1),"Shift-ArrowRight":ef("horiz",1),"Shift-ArrowUp":ef("vert",-1),"Shift-ArrowDown":ef("vert",1),Backspace:Jd,"Mod-Backspace":Jd,Delete:Jd,"Mod-Delete":Jd});function mf(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Zd(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;if(o instanceof Ht)return mf(t,r,Fe.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const l=UN(s,n,e);if(l==null)return!1;if(n=="horiz")return mf(t,r,Fe.near(t.doc.resolve(o.head+e),e));{const u=t.doc.resolve(l),d=_N(u,n,e);let h;return d?h=Fe.near(d,1):e<0?h=Fe.near(t.doc.resolve(u.before(-1)),-1):h=Fe.near(t.doc.resolve(u.after(-1)),1),mf(t,r,h)}}}function ef(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;let l;if(o instanceof Ht)l=o;else{const d=UN(s,n,e);if(d==null)return!1;l=new Ht(t.doc.resolve(d))}const u=_N(l.$headCell,n,e);return u?mf(t,r,new Ht(l.$anchorCell,u)):!1}}function R7(n,e){const t=n.state.doc,r=gl(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Ht(r))),!0):!1}function D7(n,e,t){if(!ai(n.state))return!1;let r=T7(t);const s=n.state.selection;if(s instanceof Ht){r||(r={width:1,height:1,rows:[oe.from(A0(Wn(n.state.schema).cell,t))]});const o=s.$anchorCell.node(-1),l=s.$anchorCell.start(-1),u=sn.get(o).rectBetween(s.$anchorCell.pos-l,s.$headCell.pos-l);return r=k7(r,u.right-u.left,u.bottom-u.top),WS(n.state,n.dispatch,l,u,r),!0}else if(r){const o=Bh(n.state),l=o.start(-1);return WS(n.state,n.dispatch,l,sn.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function _7(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=QS(n,e.target);let s;if(e.shiftKey&&n.state.selection instanceof Ht)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=gl(n.state.selection.$anchor))!=null&&((t=_g(n,e))==null?void 0:t.pos)!=s.pos)o(s,e),e.preventDefault();else if(!r)return;function o(d,h){let p=_g(n,h);const m=Fs.getState(n.state)==null;if(!p||!zy(d,p))if(m)p=d;else return;const x=new Ht(d,p);if(m||!n.state.selection.eq(x)){const v=n.state.tr.setSelection(x);m&&v.setMeta(Fs,d.pos),n.dispatch(v)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",u),Fs.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Fs,-1))}function u(d){const h=d,p=Fs.getState(n.state);let m;if(p!=null)m=n.state.doc.resolve(p);else if(QS(n,h.target)!=r&&(m=_g(n,e),!m))return l();m&&o(m,h)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",u)}function UN(n,e,t){if(!(n.state.selection instanceof Pe))return null;const{$head:r}=n.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((t<0?r.index(s):r.indexAfter(s))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(s),d=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(d)?u:null}}return null}function QS(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function _g(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?gl(n.state.doc.resolve(t.pos)):null}var j7=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),k0(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,k0(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function k0(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p){for(let m=0,x=0;m<p.childCount;m++){const{colspan:v,colwidth:w}=p.child(m).attrs;for(let S=0;S<v;S++,x++){const C=s==x?o:w&&w[S],T=C?C+"px":"";if(u+=C||r,C||(d=!1),h)h.style.width!=T&&(h.style.width=T),h=h.nextSibling;else{const L=document.createElement("col");L.style.width=T,e.appendChild(L)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)==null||l.removeChild(h),h=m}d?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var Mr=new fn("tableColumnResizing");function L7({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=j7,lastColumnResizable:s=!0}={}){const o=new Yt({key:Mr,state:{init(l,u){var d,h;const p=(h=(d=o.spec)==null?void 0:d.props)==null?void 0:h.nodeViews,m=Wn(u.schema).table.name;return r&&p&&(p[m]=(x,v)=>new r(x,t,v)),new B7(-1,!1)},apply(l,u){return u.apply(l)}},props:{attributes:l=>{const u=Mr.getState(l);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,u)=>{z7(l,u,n,s)},mouseleave:l=>{I7(l)},mousedown:(l,u)=>{H7(l,u,e,t)}},decorations:l=>{const u=Mr.getState(l);if(u&&u.activeHandle>-1)return V7(l,u.activeHandle)},nodeViews:{}}});return o}var B7=class gf{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(Mr);if(r&&r.setHandle!=null)return new gf(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new gf(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let s=e.mapping.map(t.activeHandle,-1);return T0(e.doc.resolve(s))||(s=-1),new gf(s,t.dragging)}return t}};function z7(n,e,t,r){if(!n.editable)return;const s=Mr.getState(n.state);if(s&&!s.dragging){const o=$7(e.target);let l=-1;if(o){const{left:u,right:d}=o.getBoundingClientRect();e.clientX-u<=t?l=YS(n,e,"left",t):d-e.clientX<=t&&(l=YS(n,e,"right",t))}if(l!=s.activeHandle){if(!r&&l!==-1){const u=n.state.doc.resolve(l),d=u.node(-1),h=sn.get(d),p=u.start(-1);if(h.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==h.width-1)return}$N(n,l)}}}function I7(n){if(!n.editable)return;const e=Mr.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&$N(n,-1)}function H7(n,e,t,r){var s;if(!n.editable)return!1;const o=(s=n.dom.ownerDocument.defaultView)!=null?s:window,l=Mr.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const u=n.state.doc.nodeAt(l.activeHandle),d=U7(n,l.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(Mr,{setDragging:{startX:e.clientX,startWidth:d}}));function h(m){o.removeEventListener("mouseup",h),o.removeEventListener("mousemove",p);const x=Mr.getState(n.state);x!=null&&x.dragging&&(P7(n,x.activeHandle,XS(x.dragging,m,t)),n.dispatch(n.state.tr.setMeta(Mr,{setDragging:null})))}function p(m){if(!m.which)return h(m);const x=Mr.getState(n.state);if(x&&x.dragging){const v=XS(x.dragging,m,t);JS(n,x.activeHandle,v,r)}}return JS(n,l.activeHandle,d,r),o.addEventListener("mouseup",h),o.addEventListener("mousemove",p),e.preventDefault(),!0}function U7(n,e,{colspan:t,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const o=n.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,d=t;if(r)for(let h=0;h<t;h++)r[h]&&(u-=r[h],d--);return u/d}function $7(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function YS(n,e,t,r){const s=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+s,top:e.clientY});if(!o)return-1;const{pos:l}=o,u=gl(n.state.doc.resolve(l));if(!u)return-1;if(t=="right")return u.pos;const d=sn.get(u.node(-1)),h=u.start(-1),p=d.map.indexOf(u.pos-h);return p%d.width==0?-1:h+d.map[p-1]}function XS(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function $N(n,e){n.dispatch(n.state.tr.setMeta(Mr,{setHandle:e}))}function P7(n,e,t){const r=n.state.doc.resolve(e),s=r.node(-1),o=sn.get(s),l=r.start(-1),u=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,d=n.state.tr;for(let h=0;h<o.height;h++){const p=h*o.width+u;if(h&&o.map[p]==o.map[p-o.width])continue;const m=o.map[p],x=s.nodeAt(m).attrs,v=x.colspan==1?0:u-o.colCount(m);if(x.colwidth&&x.colwidth[v]==t)continue;const w=x.colwidth?x.colwidth.slice():q7(x.colspan);w[v]=t,d.setNodeMarkup(l+m,null,{...x,colwidth:w})}d.docChanged&&n.dispatch(d)}function JS(n,e,t,r){const s=n.state.doc.resolve(e),o=s.node(-1),l=s.start(-1),u=sn.get(o).colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1;let d=n.domAtPos(s.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&k0(o,d.firstChild,d,r,u,t)}function q7(n){return Array(n).fill(0)}function V7(n,e){var t;const r=[],s=n.doc.resolve(e),o=s.node(-1);if(!o)return Gt.empty;const l=sn.get(o),u=s.start(-1),d=l.colCount(s.pos-u)+s.nodeAfter.attrs.colspan-1;for(let h=0;h<l.height;h++){const p=d+h*l.width;if((d==l.width-1||l.map[p]!=l.map[p+1])&&(h==0||l.map[p]!=l.map[p-l.width])){const m=l.map[p],x=u+m+o.nodeAt(m).nodeSize-1,v=document.createElement("div");v.className="column-resize-handle",(t=Mr.getState(n))!=null&&t.dragging&&r.push(kn.node(u+m,u+m+o.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),r.push(kn.widget(x,v))}}return Gt.create(n.doc,r)}function F7({allowTableNodeSelection:n=!1}={}){return new Yt({key:Fs,state:{init(){return null},apply(e,t){const r=e.getMeta(Fs);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:s,pos:o}=e.mapping.mapResult(t);return s?null:o}},props:{decorations:i7,handleDOMEvents:{mousedown:_7},createSelectionBetween(e){return Fs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:R7,handleKeyDown:O7,handlePaste:D7},appendTransaction(e,t,r){return a7(r,zN(r,t),n)}})}function M0(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function ZS(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p!==null)for(let m=0,x=0;m<p.childCount;m+=1){const{colspan:v,colwidth:w}=p.child(m).attrs;for(let S=0;S<v;S+=1,x+=1){const C=s===x?o:w&&w[S],T=C?`${C}px`:"";if(u+=C||r,C||(d=!1),h){if(h.style.width!==T){const[L,R]=M0(r,C);h.style.setProperty(L,R)}h=h.nextSibling}else{const L=document.createElement("col"),[R,k]=M0(r,C);L.style.setProperty(R,k),e.appendChild(L)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)===null||l===void 0||l.removeChild(h),h=m}d?(t.style.width=`${u}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${u}px`)}class G7{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ZS(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,ZS(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function K7(n,e,t,r){let s=0,o=!0;const l=[],u=n.firstChild;if(!u)return{};for(let m=0,x=0;m<u.childCount;m+=1){const{colspan:v,colwidth:w}=u.child(m).attrs;for(let S=0;S<v;S+=1,x+=1){const C=t===x?r:w&&w[S];s+=C||e,C||(o=!1);const[T,L]=M0(e,C);l.push(["col",{style:`${T}: ${L}`}])}}const d=o?`${s}px`:"",h=o?"":`${s}px`;return{colgroup:["colgroup",{},...l],tableWidth:d,tableMinWidth:h}}function eE(n,e){return n.createAndFill()}function W7(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function Q7(n,e,t,r,s){const o=W7(n),l=[],u=[];for(let h=0;h<t;h+=1){const p=eE(o.cell);if(p&&u.push(p),r){const m=eE(o.header_cell);m&&l.push(m)}}const d=[];for(let h=0;h<e;h+=1)d.push(o.row.createChecked(null,r&&h===0?l:u));return o.table.createChecked(null,d)}function Y7(n){return n instanceof Ht}const tf=({editor:n})=>{const{selection:e}=n.state;if(!Y7(e))return!1;let t=0;const r=H2(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},X7=Qt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:G7,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:r,tableMinWidth:s}=K7(n,this.options.cellMinWidth),o=["table",wt(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),t,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},o]:o},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:s,editor:o})=>{const l=Q7(o.schema,n,e,t);if(s){const u=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(Pe.near(r.doc.resolve(u)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>u7(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>d7(n,e),deleteColumn:()=>({state:n,dispatch:e})=>h7(n,e),addRowBefore:()=>({state:n,dispatch:e})=>m7(n,e),addRowAfter:()=>({state:n,dispatch:e})=>g7(n,e),deleteRow:()=>({state:n,dispatch:e})=>b7(n,e),deleteTable:()=>({state:n,dispatch:e})=>N7(n,e),mergeCells:()=>({state:n,dispatch:e})=>PS(n,e),splitCell:()=>({state:n,dispatch:e})=>qS(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>iu("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>iu("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>E7(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>PS(n,e)?!0:qS(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>w7(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>FS(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>FS(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&zN(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=Ht.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:tf,"Mod-Backspace":tf,Delete:tf,"Mod-Delete":tf}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[L7({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],F7({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:ot(Oe(n,"tableRole",e))}}}),J7=Qt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",wt(this.options.HTMLAttributes,n),0]}}),Z7=Qt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",wt(this.options.HTMLAttributes,n),0]}}),eI=Qt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",wt(this.options.HTMLAttributes,n),0]}}),dh=(n,e)=>e.view.domAtPos(n).node.offsetParent!==null,tI=(n,e,t)=>{for(let r=n.depth;r>0;r-=1){const s=n.node(r),o=e(s),l=dh(n.start(r),t);if(o&&l)return{pos:r>0?n.before(r):0,start:n.start(r),depth:r,node:s}}},tE=(n,e)=>{const{state:t,view:r,extensionManager:s}=n,{schema:o,selection:l}=t,{empty:u,$anchor:d}=l,h=!!s.extensions.find(T=>T.name==="gapCursor");if(!u||d.parent.type!==o.nodes.detailsSummary||!h||e==="right"&&d.parentOffset!==d.parent.nodeSize-2)return!1;const p=pl(T=>T.type===o.nodes.details)(l);if(!p)return!1;const m=Fo(p.node,T=>T.type===o.nodes.detailsContent);if(!m.length||dh(p.start+m[0].pos+1,n))return!1;const v=t.doc.resolve(p.pos+p.node.nodeSize),w=Wt.findFrom(v,1,!1);if(!w)return!1;const{tr:S}=t,C=new Wt(w);return S.setSelection(C),S.scrollIntoView(),r.dispatch(S),!0},nI=Qt.create({name:"details",content:"detailsSummary detailsContent",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,addOptions(){return{persist:!1,openClassName:"is-open",HTMLAttributes:{}}},addAttributes(){return this.options.persist?{open:{default:!1,parseHTML:n=>n.hasAttribute("open"),renderHTML:({open:n})=>n?{open:""}:{}}}:[]},parseHTML(){return[{tag:"details"}]},renderHTML({HTMLAttributes:n}){return["details",wt(this.options.HTMLAttributes,n),0]},addNodeView(){return({editor:n,getPos:e,node:t,HTMLAttributes:r})=>{const s=document.createElement("div"),o=wt(this.options.HTMLAttributes,r,{"data-type":this.name});Object.entries(o).forEach(([h,p])=>s.setAttribute(h,p));const l=document.createElement("button");l.type="button",s.append(l);const u=document.createElement("div");s.append(u);const d=h=>{if(h!==void 0)if(h){if(s.classList.contains(this.options.openClassName))return;s.classList.add(this.options.openClassName)}else{if(!s.classList.contains(this.options.openClassName))return;s.classList.remove(this.options.openClassName)}else s.classList.toggle(this.options.openClassName);const p=new Event("toggleDetailsContent"),m=u.querySelector(':scope > div[data-type="detailsContent"]');m==null||m.dispatchEvent(p)};return t.attrs.open&&setTimeout(()=>d()),l.addEventListener("click",()=>{if(d(),!this.options.persist){n.commands.focus(void 0,{scrollIntoView:!1});return}if(n.isEditable&&typeof e=="function"){const{from:h,to:p}=n.state.selection;n.chain().command(({tr:m})=>{const x=e(),v=m.doc.nodeAt(x);return(v==null?void 0:v.type)!==this.type?!1:(m.setNodeMarkup(x,void 0,{open:!v.attrs.open}),!0)}).setTextSelection({from:h,to:p}).focus(void 0,{scrollIntoView:!1}).run()}}),{dom:s,contentDOM:u,ignoreMutation(h){return h.type==="selection"?!1:!s.contains(h.target)||s===h.target},update:h=>h.type!==this.type?!1:(h.attrs.open!==void 0&&d(h.attrs.open),!0)}}},addCommands(){return{setDetails:()=>({state:n,chain:e})=>{var t;const{schema:r,selection:s}=n,{$from:o,$to:l}=s,u=o.blockRange(l);if(!u)return!1;const d=n.doc.slice(u.start,u.end);if(!r.nodes.detailsContent.contentMatch.matchFragment(d.content))return!1;const p=((t=d.toJSON())===null||t===void 0?void 0:t.content)||[];return e().insertContentAt({from:u.start,to:u.end},{type:this.name,content:[{type:"detailsSummary"},{type:"detailsContent",content:p}]}).setTextSelection(u.start+2).run()},unsetDetails:()=>({state:n,chain:e})=>{const{selection:t,schema:r}=n,s=pl(T=>T.type===this.type)(t);if(!s)return!1;const o=Fo(s.node,T=>T.type===r.nodes.detailsSummary),l=Fo(s.node,T=>T.type===r.nodes.detailsContent);if(!o.length||!l.length)return!1;const u=o[0],d=l[0],h=s.pos,p=n.doc.resolve(h),m=h+s.node.nodeSize,x={from:h,to:m},v=d.node.content.toJSON()||[],w=p.parent.type.contentMatch.defaultType,C=[w==null?void 0:w.create(null,u.node.content).toJSON(),...v];return e().insertContentAt(x,C).setTextSelection(h+1).run()}}},addKeyboardShortcuts(){return{Backspace:()=>{const{schema:n,selection:e}=this.editor.state,{empty:t,$anchor:r}=e;return!t||r.parent.type!==n.nodes.detailsSummary?!1:r.parentOffset!==0?this.editor.commands.command(({tr:s})=>{const o=r.pos-1,l=r.pos;return s.delete(o,l),!0}):this.editor.commands.unsetDetails()},Enter:({editor:n})=>{const{state:e,view:t}=n,{schema:r,selection:s}=e,{$head:o}=s;if(o.parent.type!==r.nodes.detailsSummary)return!1;const l=dh(o.after()+1,n),u=l?e.doc.nodeAt(o.after()):o.node(-2);if(!u)return!1;const d=l?0:o.indexAfter(-1),h=my(u.contentMatchAt(d));if(!h||!u.canReplaceWith(d,d,h))return!1;const p=h.createAndFill();if(!p)return!1;const m=l?o.after()+1:o.after(-1),x=e.tr.replaceWith(m,m,p),v=x.doc.resolve(m),w=Fe.near(v,1);return x.setSelection(w),x.scrollIntoView(),t.dispatch(x),!0},ArrowRight:({editor:n})=>tE(n,"right"),ArrowDown:({editor:n})=>tE(n,"down")}},addProseMirrorPlugins(){return[new Yt({key:new fn("detailsSelection"),appendTransaction:(n,e,t)=>{const{editor:r,type:s}=this;if(!n.some(C=>C.selectionSet)||!e.selection.empty||!t.selection.empty||!$2(t,s.name))return;const{$from:u}=t.selection;if(dh(u.pos,r))return;const h=tI(u,C=>C.type===s,r);if(!h)return;const p=Fo(h.node,C=>C.type===t.schema.nodes.detailsSummary);if(!p.length)return;const m=p[0],v=(e.selection.from<t.selection.from?"forward":"backward")==="forward"?h.start+m.pos:h.pos+m.pos+m.node.nodeSize,w=Pe.create(t.doc,v);return t.tr.setSelection(w)}})]}}),rI=Qt.create({name:"detailsSummary",content:"text*",defining:!0,selectable:!1,isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"summary"}]},renderHTML({HTMLAttributes:n}){return["summary",wt(this.options.HTMLAttributes,n),0]}}),iI=Qt.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){return["div",wt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addNodeView(){return({HTMLAttributes:n})=>{const e=document.createElement("div"),t=wt(this.options.HTMLAttributes,n,{"data-type":this.name,hidden:"hidden"});return Object.entries(t).forEach(([r,s])=>e.setAttribute(r,s)),e.addEventListener("toggleDetailsContent",()=>{e.toggleAttribute("hidden")}),{dom:e,contentDOM:e,ignoreMutation(r){return r.type==="selection"?!1:!e.contains(r.target)||e===r.target},update:r=>r.type===this.type}}},addKeyboardShortcuts(){return{Enter:({editor:n})=>{const{state:e,view:t}=n,{selection:r}=e,{$from:s,empty:o}=r,l=pl(be=>be.type===this.type)(r);if(!o||!l||!l.node.childCount)return!1;const u=s.index(l.depth),{childCount:d}=l.node;if(!(d===u+1))return!1;const p=l.node.type.contentMatch.defaultType,m=p==null?void 0:p.createAndFill();if(!m)return!1;const x=e.doc.resolve(l.pos+1),v=d-1,w=l.node.child(v),S=x.posAtIndex(v,l.depth);if(!w.eq(m))return!1;const T=s.node(-3);if(!T)return!1;const L=s.indexAfter(-3),R=my(T.contentMatchAt(L));if(!R||!T.canReplaceWith(L,L,R))return!1;const k=R.createAndFill();if(!k)return!1;const{tr:j}=e,H=s.after(-2);j.replaceWith(H,H,k);const U=j.doc.resolve(H),J=Fe.near(U,1);j.setSelection(J);const re=S,fe=S+w.nodeSize;return j.delete(re,fe),j.scrollIntoView(),t.dispatch(j),!0}}}});function sI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function PN(n){return n instanceof Map?n.clear=n.delete=n.set=function(){throw new Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=function(){throw new Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{const t=n[e],r=typeof t;(r==="object"||r==="function")&&!Object.isFrozen(t)&&PN(t)}),n}class nE{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function qN(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ys(n,...e){const t=Object.create(null);for(const r in n)t[r]=n[r];return e.forEach(function(r){for(const s in r)t[s]=r[s]}),t}const oI="</span>",rE=n=>!!n.scope,aI=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){const t=n.split(".");return[`${e}${t.shift()}`,...t.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${n}`};class lI{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=qN(e)}openNode(e){if(!rE(e))return;const t=aI(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){rE(e)&&(this.buffer+=oI)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const iE=(n={})=>{const e={children:[]};return Object.assign(e,n),e};class Iy{constructor(){this.rootNode=iE(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=iE({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(r=>this._walk(e,r)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{Iy._collapse(t)}))}}class cI extends Iy{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const r=e.root;t&&(r.scope=`language:${t}`),this.add(r)}toHTML(){return new lI(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function su(n){return n?typeof n=="string"?n:n.source:null}function VN(n){return ia("(?=",n,")")}function uI(n){return ia("(?:",n,")*")}function dI(n){return ia("(?:",n,")?")}function ia(...n){return n.map(t=>su(t)).join("")}function fI(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function Hy(...n){return"("+(fI(n).capture?"":"?:")+n.map(r=>su(r)).join("|")+")"}function FN(n){return new RegExp(n.toString()+"|").exec("").length-1}function hI(n,e){const t=n&&n.exec(e);return t&&t.index===0}const pI=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Uy(n,{joinWith:e}){let t=0;return n.map(r=>{t+=1;const s=t;let o=su(r),l="";for(;o.length>0;){const u=pI.exec(o);if(!u){l+=o;break}l+=o.substring(0,u.index),o=o.substring(u.index+u[0].length),u[0][0]==="\\"&&u[1]?l+="\\"+String(Number(u[1])+s):(l+=u[0],u[0]==="("&&t++)}return l}).map(r=>`(${r})`).join(e)}const mI=/\b\B/,GN="[a-zA-Z]\\w*",$y="[a-zA-Z_]\\w*",KN="\\b\\d+(\\.\\d+)?",WN="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",QN="\\b(0b[01]+)",gI="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",yI=(n={})=>{const e=/^#![ ]*\//;return n.binary&&(n.begin=ia(e,/.*\b/,n.binary,/\b.*/)),Ys({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,r)=>{t.index!==0&&r.ignoreMatch()}},n)},ou={begin:"\\\\[\\s\\S]",relevance:0},bI={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ou]},xI={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ou]},vI={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},zh=function(n,e,t={}){const r=Ys({scope:"comment",begin:n,end:e,contains:[]},t);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=Hy("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:ia(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},wI=zh("//","$"),SI=zh("/\\*","\\*/"),EI=zh("#","$"),CI={scope:"number",begin:KN,relevance:0},NI={scope:"number",begin:WN,relevance:0},TI={scope:"number",begin:QN,relevance:0},AI={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ou,{begin:/\[/,end:/\]/,relevance:0,contains:[ou]}]},kI={scope:"title",begin:GN,relevance:0},MI={scope:"title",begin:$y,relevance:0},OI={begin:"\\.\\s*"+$y,relevance:0},RI=function(n){return Object.assign(n,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var nf=Object.freeze({__proto__:null,APOS_STRING_MODE:bI,BACKSLASH_ESCAPE:ou,BINARY_NUMBER_MODE:TI,BINARY_NUMBER_RE:QN,COMMENT:zh,C_BLOCK_COMMENT_MODE:SI,C_LINE_COMMENT_MODE:wI,C_NUMBER_MODE:NI,C_NUMBER_RE:WN,END_SAME_AS_BEGIN:RI,HASH_COMMENT_MODE:EI,IDENT_RE:GN,MATCH_NOTHING_RE:mI,METHOD_GUARD:OI,NUMBER_MODE:CI,NUMBER_RE:KN,PHRASAL_WORDS_MODE:vI,QUOTE_STRING_MODE:xI,REGEXP_MODE:AI,RE_STARTERS_RE:gI,SHEBANG:yI,TITLE_MODE:kI,UNDERSCORE_IDENT_RE:$y,UNDERSCORE_TITLE_MODE:MI});function DI(n,e){n.input[n.index-1]==="."&&e.ignoreMatch()}function _I(n,e){n.className!==void 0&&(n.scope=n.className,delete n.className)}function jI(n,e){e&&n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",n.__beforeBegin=DI,n.keywords=n.keywords||n.beginKeywords,delete n.beginKeywords,n.relevance===void 0&&(n.relevance=0))}function LI(n,e){Array.isArray(n.illegal)&&(n.illegal=Hy(...n.illegal))}function BI(n,e){if(n.match){if(n.begin||n.end)throw new Error("begin & end are not supported with match");n.begin=n.match,delete n.match}}function zI(n,e){n.relevance===void 0&&(n.relevance=1)}const II=(n,e)=>{if(!n.beforeMatch)return;if(n.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},n);Object.keys(n).forEach(r=>{delete n[r]}),n.keywords=t.keywords,n.begin=ia(t.beforeMatch,VN(t.begin)),n.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},n.relevance=0,delete t.beforeMatch},HI=["of","and","for","in","not","or","if","then","parent","list","value"],UI="keyword";function YN(n,e,t=UI){const r=Object.create(null);return typeof n=="string"?s(t,n.split(" ")):Array.isArray(n)?s(t,n):Object.keys(n).forEach(function(o){Object.assign(r,YN(n[o],e,o))}),r;function s(o,l){e&&(l=l.map(u=>u.toLowerCase())),l.forEach(function(u){const d=u.split("|");r[d[0]]=[o,$I(d[0],d[1])]})}}function $I(n,e){return e?Number(e):PI(n)?0:1}function PI(n){return HI.includes(n.toLowerCase())}const sE={},Wo=n=>{console.error(n)},oE=(n,...e)=>{console.log(`WARN: ${n}`,...e)},Va=(n,e)=>{sE[`${n}/${e}`]||(console.log(`Deprecated as of ${n}. ${e}`),sE[`${n}/${e}`]=!0)},fh=new Error;function XN(n,e,{key:t}){let r=0;const s=n[t],o={},l={};for(let u=1;u<=e.length;u++)l[u+r]=s[u],o[u+r]=!0,r+=FN(e[u-1]);n[t]=l,n[t]._emit=o,n[t]._multi=!0}function qI(n){if(Array.isArray(n.begin)){if(n.skip||n.excludeBegin||n.returnBegin)throw Wo("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),fh;if(typeof n.beginScope!="object"||n.beginScope===null)throw Wo("beginScope must be object"),fh;XN(n,n.begin,{key:"beginScope"}),n.begin=Uy(n.begin,{joinWith:""})}}function VI(n){if(Array.isArray(n.end)){if(n.skip||n.excludeEnd||n.returnEnd)throw Wo("skip, excludeEnd, returnEnd not compatible with endScope: {}"),fh;if(typeof n.endScope!="object"||n.endScope===null)throw Wo("endScope must be object"),fh;XN(n,n.end,{key:"endScope"}),n.end=Uy(n.end,{joinWith:""})}}function FI(n){n.scope&&typeof n.scope=="object"&&n.scope!==null&&(n.beginScope=n.scope,delete n.scope)}function GI(n){FI(n),typeof n.beginScope=="string"&&(n.beginScope={_wrap:n.beginScope}),typeof n.endScope=="string"&&(n.endScope={_wrap:n.endScope}),qI(n),VI(n)}function KI(n){function e(l,u){return new RegExp(su(l),"m"+(n.case_insensitive?"i":"")+(n.unicodeRegex?"u":"")+(u?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(u,d){d.position=this.position++,this.matchIndexes[this.matchAt]=d,this.regexes.push([d,u]),this.matchAt+=FN(u)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const u=this.regexes.map(d=>d[1]);this.matcherRe=e(Uy(u,{joinWith:"|"}),!0),this.lastIndex=0}exec(u){this.matcherRe.lastIndex=this.lastIndex;const d=this.matcherRe.exec(u);if(!d)return null;const h=d.findIndex((m,x)=>x>0&&m!==void 0),p=this.matchIndexes[h];return d.splice(0,h),Object.assign(d,p)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(u){if(this.multiRegexes[u])return this.multiRegexes[u];const d=new t;return this.rules.slice(u).forEach(([h,p])=>d.addRule(h,p)),d.compile(),this.multiRegexes[u]=d,d}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(u,d){this.rules.push([u,d]),d.type==="begin"&&this.count++}exec(u){const d=this.getMatcher(this.regexIndex);d.lastIndex=this.lastIndex;let h=d.exec(u);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const p=this.getMatcher(0);p.lastIndex=this.lastIndex+1,h=p.exec(u)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(l){const u=new r;return l.contains.forEach(d=>u.addRule(d.begin,{rule:d,type:"begin"})),l.terminatorEnd&&u.addRule(l.terminatorEnd,{type:"end"}),l.illegal&&u.addRule(l.illegal,{type:"illegal"}),u}function o(l,u){const d=l;if(l.isCompiled)return d;[_I,BI,GI,II].forEach(p=>p(l,u)),n.compilerExtensions.forEach(p=>p(l,u)),l.__beforeBegin=null,[jI,LI,zI].forEach(p=>p(l,u)),l.isCompiled=!0;let h=null;return typeof l.keywords=="object"&&l.keywords.$pattern&&(l.keywords=Object.assign({},l.keywords),h=l.keywords.$pattern,delete l.keywords.$pattern),h=h||/\w+/,l.keywords&&(l.keywords=YN(l.keywords,n.case_insensitive)),d.keywordPatternRe=e(h,!0),u&&(l.begin||(l.begin=/\B|\b/),d.beginRe=e(d.begin),!l.end&&!l.endsWithParent&&(l.end=/\B|\b/),l.end&&(d.endRe=e(d.end)),d.terminatorEnd=su(d.end)||"",l.endsWithParent&&u.terminatorEnd&&(d.terminatorEnd+=(l.end?"|":"")+u.terminatorEnd)),l.illegal&&(d.illegalRe=e(l.illegal)),l.contains||(l.contains=[]),l.contains=[].concat(...l.contains.map(function(p){return WI(p==="self"?l:p)})),l.contains.forEach(function(p){o(p,d)}),l.starts&&o(l.starts,u),d.matcher=s(d),d}if(n.compilerExtensions||(n.compilerExtensions=[]),n.contains&&n.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return n.classNameAliases=Ys(n.classNameAliases||{}),o(n)}function JN(n){return n?n.endsWithParent||JN(n.starts):!1}function WI(n){return n.variants&&!n.cachedVariants&&(n.cachedVariants=n.variants.map(function(e){return Ys(n,{variants:null},e)})),n.cachedVariants?n.cachedVariants:JN(n)?Ys(n,{starts:n.starts?Ys(n.starts):null}):Object.isFrozen(n)?Ys(n):n}var QI="11.10.0";class YI extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const jg=qN,aE=Ys,lE=Symbol("nomatch"),XI=7,ZN=function(n){const e=Object.create(null),t=Object.create(null),r=[];let s=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let u={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:cI};function d(D){return u.noHighlightRe.test(D)}function h(D){let $=D.className+" ";$+=D.parentNode?D.parentNode.className:"";const B=u.languageDetectRe.exec($);if(B){const ee=re(B[1]);return ee||(oE(o.replace("{}",B[1])),oE("Falling back to no-highlight mode for this block.",D)),ee?B[1]:"no-highlight"}return $.split(/\s+/).find(ee=>d(ee)||re(ee))}function p(D,$,B){let ee="",M="";typeof $=="object"?(ee=D,B=$.ignoreIllegals,M=$.language):(Va("10.7.0","highlight(lang, code, ...args) has been deprecated."),Va("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),M=D,ee=$),B===void 0&&(B=!0);const q={code:ee,language:M};pe("before:highlight",q);const W=q.result?q.result:m(q.language,q.code,B);return W.code=q.code,pe("after:highlight",W),W}function m(D,$,B,ee){const M=Object.create(null);function q(ge,Te){return ge.keywords[Te]}function W(){if(!K.keywords){Ye.addText(Be);return}let ge=0;K.keywordPatternRe.lastIndex=0;let Te=K.keywordPatternRe.exec(Be),We="";for(;Te;){We+=Be.substring(ge,Te.index);const Ze=Ot.case_insensitive?Te[0].toLowerCase():Te[0],$t=q(K,Ze);if($t){const[Zt,gr]=$t;if(Ye.addText(We),We="",M[Ze]=(M[Ze]||0)+1,M[Ze]<=XI&&(lt+=gr),Zt.startsWith("_"))We+=Te[0];else{const Y=Ot.classNameAliases[Zt]||Zt;we(Te[0],Y)}}else We+=Te[0];ge=K.keywordPatternRe.lastIndex,Te=K.keywordPatternRe.exec(Be)}We+=Be.substring(ge),Ye.addText(We)}function ie(){if(Be==="")return;let ge=null;if(typeof K.subLanguage=="string"){if(!e[K.subLanguage]){Ye.addText(Be);return}ge=m(K.subLanguage,Be,!0,Ee[K.subLanguage]),Ee[K.subLanguage]=ge._top}else ge=v(Be,K.subLanguage.length?K.subLanguage:null);K.relevance>0&&(lt+=ge.relevance),Ye.__addSublanguage(ge._emitter,ge.language)}function le(){K.subLanguage!=null?ie():W(),Be=""}function we(ge,Te){ge!==""&&(Ye.startScope(Te),Ye.addText(ge),Ye.endScope())}function He(ge,Te){let We=1;const Ze=Te.length-1;for(;We<=Ze;){if(!ge._emit[We]){We++;continue}const $t=Ot.classNameAliases[ge[We]]||ge[We],Zt=Te[We];$t?we(Zt,$t):(Be=Zt,W(),Be=""),We++}}function Re(ge,Te){return ge.scope&&typeof ge.scope=="string"&&Ye.openNode(Ot.classNameAliases[ge.scope]||ge.scope),ge.beginScope&&(ge.beginScope._wrap?(we(Be,Ot.classNameAliases[ge.beginScope._wrap]||ge.beginScope._wrap),Be=""):ge.beginScope._multi&&(He(ge.beginScope,Te),Be="")),K=Object.create(ge,{parent:{value:K}}),K}function de(ge,Te,We){let Ze=hI(ge.endRe,We);if(Ze){if(ge["on:end"]){const $t=new nE(ge);ge["on:end"](Te,$t),$t.isMatchIgnored&&(Ze=!1)}if(Ze){for(;ge.endsParent&&ge.parent;)ge=ge.parent;return ge}}if(ge.endsWithParent)return de(ge.parent,Te,We)}function Je(ge){return K.matcher.regexIndex===0?(Be+=ge[0],1):(Bt=!0,0)}function ye(ge){const Te=ge[0],We=ge.rule,Ze=new nE(We),$t=[We.__beforeBegin,We["on:begin"]];for(const Zt of $t)if(Zt&&(Zt(ge,Ze),Ze.isMatchIgnored))return Je(Te);return We.skip?Be+=Te:(We.excludeBegin&&(Be+=Te),le(),!We.returnBegin&&!We.excludeBegin&&(Be=Te)),Re(We,ge),We.returnBegin?0:Te.length}function Qe(ge){const Te=ge[0],We=$.substring(ge.index),Ze=de(K,ge,We);if(!Ze)return lE;const $t=K;K.endScope&&K.endScope._wrap?(le(),we(Te,K.endScope._wrap)):K.endScope&&K.endScope._multi?(le(),He(K.endScope,ge)):$t.skip?Be+=Te:($t.returnEnd||$t.excludeEnd||(Be+=Te),le(),$t.excludeEnd&&(Be=Te));do K.scope&&Ye.closeNode(),!K.skip&&!K.subLanguage&&(lt+=K.relevance),K=K.parent;while(K!==Ze.parent);return Ze.starts&&Re(Ze.starts,ge),$t.returnEnd?0:Te.length}function Ut(){const ge=[];for(let Te=K;Te!==Ot;Te=Te.parent)Te.scope&&ge.unshift(Te.scope);ge.forEach(Te=>Ye.openNode(Te))}let Lt={};function En(ge,Te){const We=Te&&Te[0];if(Be+=ge,We==null)return le(),0;if(Lt.type==="begin"&&Te.type==="end"&&Lt.index===Te.index&&We===""){if(Be+=$.slice(Te.index,Te.index+1),!s){const Ze=new Error(`0 width match regex (${D})`);throw Ze.languageName=D,Ze.badRule=Lt.rule,Ze}return 1}if(Lt=Te,Te.type==="begin")return ye(Te);if(Te.type==="illegal"&&!B){const Ze=new Error('Illegal lexeme "'+We+'" for mode "'+(K.scope||"<unnamed>")+'"');throw Ze.mode=K,Ze}else if(Te.type==="end"){const Ze=Qe(Te);if(Ze!==lE)return Ze}if(Te.type==="illegal"&&We==="")return 1;if(wn>1e5&&wn>Te.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Be+=We,We.length}const Ot=re(D);if(!Ot)throw Wo(o.replace("{}",D)),new Error('Unknown language: "'+D+'"');const on=KI(Ot);let Cn="",K=ee||on;const Ee={},Ye=new u.__emitter(u);Ut();let Be="",lt=0,nt=0,wn=0,Bt=!1;try{if(Ot.__emitTokens)Ot.__emitTokens($,Ye);else{for(K.matcher.considerAll();;){wn++,Bt?Bt=!1:K.matcher.considerAll(),K.matcher.lastIndex=nt;const ge=K.matcher.exec($);if(!ge)break;const Te=$.substring(nt,ge.index),We=En(Te,ge);nt=ge.index+We}En($.substring(nt))}return Ye.finalize(),Cn=Ye.toHTML(),{language:D,value:Cn,relevance:lt,illegal:!1,_emitter:Ye,_top:K}}catch(ge){if(ge.message&&ge.message.includes("Illegal"))return{language:D,value:jg($),illegal:!0,relevance:0,_illegalBy:{message:ge.message,index:nt,context:$.slice(nt-100,nt+100),mode:ge.mode,resultSoFar:Cn},_emitter:Ye};if(s)return{language:D,value:jg($),illegal:!1,relevance:0,errorRaised:ge,_emitter:Ye,_top:K};throw ge}}function x(D){const $={value:jg(D),illegal:!1,relevance:0,_top:l,_emitter:new u.__emitter(u)};return $._emitter.addText(D),$}function v(D,$){$=$||u.languages||Object.keys(e);const B=x(D),ee=$.filter(re).filter(be).map(le=>m(le,D,!1));ee.unshift(B);const M=ee.sort((le,we)=>{if(le.relevance!==we.relevance)return we.relevance-le.relevance;if(le.language&&we.language){if(re(le.language).supersetOf===we.language)return 1;if(re(we.language).supersetOf===le.language)return-1}return 0}),[q,W]=M,ie=q;return ie.secondBest=W,ie}function w(D,$,B){const ee=$&&t[$]||B;D.classList.add("hljs"),D.classList.add(`language-${ee}`)}function S(D){let $=null;const B=h(D);if(d(B))return;if(pe("before:highlightElement",{el:D,language:B}),D.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",D);return}if(D.children.length>0&&(u.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(D)),u.throwUnescapedHTML))throw new YI("One of your code blocks includes unescaped HTML.",D.innerHTML);$=D;const ee=$.textContent,M=B?p(ee,{language:B,ignoreIllegals:!0}):v(ee);D.innerHTML=M.value,D.dataset.highlighted="yes",w(D,B,M.language),D.result={language:M.language,re:M.relevance,relevance:M.relevance},M.secondBest&&(D.secondBest={language:M.secondBest.language,relevance:M.secondBest.relevance}),pe("after:highlightElement",{el:D,result:M,text:ee})}function C(D){u=aE(u,D)}const T=()=>{k(),Va("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function L(){k(),Va("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let R=!1;function k(){if(document.readyState==="loading"){R=!0;return}document.querySelectorAll(u.cssSelector).forEach(S)}function j(){R&&k()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",j,!1);function H(D,$){let B=null;try{B=$(n)}catch(ee){if(Wo("Language definition for '{}' could not be registered.".replace("{}",D)),s)Wo(ee);else throw ee;B=l}B.name||(B.name=D),e[D]=B,B.rawDefinition=$.bind(null,n),B.aliases&&fe(B.aliases,{languageName:D})}function U(D){delete e[D];for(const $ of Object.keys(t))t[$]===D&&delete t[$]}function J(){return Object.keys(e)}function re(D){return D=(D||"").toLowerCase(),e[D]||e[t[D]]}function fe(D,{languageName:$}){typeof D=="string"&&(D=[D]),D.forEach(B=>{t[B.toLowerCase()]=$})}function be(D){const $=re(D);return $&&!$.disableAutodetect}function ae(D){D["before:highlightBlock"]&&!D["before:highlightElement"]&&(D["before:highlightElement"]=$=>{D["before:highlightBlock"](Object.assign({block:$.el},$))}),D["after:highlightBlock"]&&!D["after:highlightElement"]&&(D["after:highlightElement"]=$=>{D["after:highlightBlock"](Object.assign({block:$.el},$))})}function ce(D){ae(D),r.push(D)}function ve(D){const $=r.indexOf(D);$!==-1&&r.splice($,1)}function pe(D,$){const B=D;r.forEach(function(ee){ee[B]&&ee[B]($)})}function z(D){return Va("10.7.0","highlightBlock will be removed entirely in v12.0"),Va("10.7.0","Please use highlightElement now."),S(D)}Object.assign(n,{highlight:p,highlightAuto:v,highlightAll:k,highlightElement:S,highlightBlock:z,configure:C,initHighlighting:T,initHighlightingOnLoad:L,registerLanguage:H,unregisterLanguage:U,listLanguages:J,getLanguage:re,registerAliases:fe,autoDetection:be,inherit:aE,addPlugin:ce,removePlugin:ve}),n.debugMode=function(){s=!1},n.safeMode=function(){s=!0},n.versionString=QI,n.regex={concat:ia,lookahead:VN,either:Hy,optional:dI,anyNumberOfTimes:uI};for(const D in nf)typeof nf[D]=="object"&&PN(nf[D]);return Object.assign(n,nf),n},ul=ZN({});ul.newInstance=()=>ZN({});var JI=ul;ul.HighlightJS=ul;ul.default=ul;var ZI=sI(JI);function eT(n,e=[]){return n.map(t=>{const r=[...e,...t.properties?t.properties.className:[]];return t.children?eT(t.children,r):{text:t.value,classes:r}}).flat()}function cE(n){return n.value||n.children||[]}function e8(n){return!!ZI.getLanguage(n)}function uE({doc:n,name:e,lowlight:t,defaultLanguage:r}){const s=[];return Fo(n,o=>o.type.name===e).forEach(o=>{var l;let u=o.pos+1;const d=o.node.attrs.language||r,h=t.listLanguages(),p=d&&(h.includes(d)||e8(d)||!((l=t.registered)===null||l===void 0)&&l.call(t,d))?cE(t.highlight(d,o.node.textContent)):cE(t.highlightAuto(o.node.textContent));eT(p).forEach(m=>{const x=u+m.text.length;if(m.classes.length){const v=kn.inline(u,x,{class:m.classes.join(" ")});s.push(v)}u=x})}),Gt.create(n,s)}function t8(n){return typeof n=="function"}function n8({name:n,lowlight:e,defaultLanguage:t}){if(!["highlight","highlightAuto","listLanguages"].every(s=>t8(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Yt({key:new fn("lowlight"),state:{init:(s,{doc:o})=>uE({doc:o,name:n,lowlight:e,defaultLanguage:t}),apply:(s,o,l,u)=>{const d=l.selection.$head.parent.type.name,h=u.selection.$head.parent.type.name,p=Fo(l.doc,x=>x.type.name===n),m=Fo(u.doc,x=>x.type.name===n);return s.docChanged&&([d,h].includes(n)||m.length!==p.length||s.steps.some(x=>x.from!==void 0&&x.to!==void 0&&p.some(v=>v.pos>=x.from&&v.pos+v.node.nodeSize<=x.to)))?uE({doc:s.doc,name:n,lowlight:e,defaultLanguage:t}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}const r8=bN.extend({addOptions(){var n;return{...(n=this.parent)===null||n===void 0?void 0:n.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var n;return[...((n=this.parent)===null||n===void 0?void 0:n.call(this))||[],n8({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),i8=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),s8=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],o8=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],a8=[...s8,...o8],l8=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),c8=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),u8=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),d8=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function f8(n){const e=n.regex,t=i8(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",o=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",u=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+c8.join("|")+")"},{begin:":(:)?("+u8.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+d8.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...u,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...u,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:l8.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...u,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+a8.join("|")+")\\b"}]}}const dE="[A-Za-z$_][0-9A-Za-z$_]*",h8=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],p8=["true","false","null","undefined","NaN","Infinity"],tT=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nT=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rT=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],m8=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],g8=[].concat(rT,tT,nT);function y8(n){const e=n.regex,t=($,{after:B})=>{const ee="</"+$[0].slice(1);return $.input.indexOf(ee,B)!==-1},r=dE,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:($,B)=>{const ee=$[0].length+$.index,M=$.input[ee];if(M==="<"||M===","){B.ignoreMatch();return}M===">"&&(t($,{after:ee})||B.ignoreMatch());let q;const W=$.input.substring(ee);if(q=W.match(/^\s*=/)){B.ignoreMatch();return}if((q=W.match(/^\s+extends\s+/))&&q.index===0){B.ignoreMatch();return}}},u={$pattern:dE,keyword:h8,literal:p8,built_in:g8,"variable.language":m8},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},v={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,x]},L={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},R=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,{match:/\$\d+/},m];x.contains=R.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(R)});const k=[].concat(L,x.contains),j=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),H={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j},U={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},J={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...tT,...nT]}},re={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},fe={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[H],illegal:/%/},be={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function ae($){return e.concat("(?!",$.join("|"),")")}const ce={match:e.concat(/\b/,ae([...rT,"super","import"].map($=>`${$}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},ve={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},pe={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},H]},z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[H]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:j,CLASS_REFERENCE:J},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),re,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,L,{match:/\$\d+/},m,J,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[L,n.REGEXP_MODE,{className:"function",begin:z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},fe,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[H,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},ve,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[H]},ce,be,U,pe,{match:/\$[(.]/}]}}function b8(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,t,n.QUOTE_STRING_MODE,s,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function x8(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],u={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:u,illegal:/#/},p={begin:/\{\{/,relevance:0},m={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,p,h]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},x="[0-9](_?[0-9])*",v=`(\\b(${x}))?\\.(${x})|\\b(${x})\\.`,w=`\\b|${r.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${x})|(${v}))[eE][+-]?(${x})[jJ]?(?=${w})`},{begin:`(${v})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${w})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${w})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${w})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${w})`},{begin:`\\b(${x})[jJ](?=${w})`}]},C={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:u,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},T={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",d,S,m,n.HASH_COMMENT_MODE]}]};return h.contains=[m,S,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:u,illegal:/(<\/|\?)|=>/,contains:[d,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,C,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[T]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,T,m]}]}}const hh="[A-Za-z$_][0-9A-Za-z$_]*",iT=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],sT=["true","false","null","undefined","NaN","Infinity"],oT=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],aT=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],lT=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],cT=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],uT=[].concat(lT,oT,aT);function v8(n){const e=n.regex,t=($,{after:B})=>{const ee="</"+$[0].slice(1);return $.input.indexOf(ee,B)!==-1},r=hh,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:($,B)=>{const ee=$[0].length+$.index,M=$.input[ee];if(M==="<"||M===","){B.ignoreMatch();return}M===">"&&(t($,{after:ee})||B.ignoreMatch());let q;const W=$.input.substring(ee);if(q=W.match(/^\s*=/)){B.ignoreMatch();return}if((q=W.match(/^\s+extends\s+/))&&q.index===0){B.ignoreMatch();return}}},u={$pattern:hh,keyword:iT,literal:sT,built_in:uT,"variable.language":cT},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},v={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,x]},L={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},R=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,{match:/\$\d+/},m];x.contains=R.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(R)});const k=[].concat(L,x.contains),j=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),H={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j},U={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},J={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...oT,...aT]}},re={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},fe={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[H],illegal:/%/},be={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function ae($){return e.concat("(?!",$.join("|"),")")}const ce={match:e.concat(/\b/,ae([...lT,"super","import"].map($=>`${$}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},ve={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},pe={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},H]},z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[H]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:j,CLASS_REFERENCE:J},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),re,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,L,{match:/\$\d+/},m,J,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[L,n.REGEXP_MODE,{className:"function",begin:z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},fe,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[H,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},ve,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[H]},ce,be,U,pe,{match:/\$[(.]/}]}}function w8(n){const e=n.regex,t=v8(n),r=hh,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[t.exports.CLASS_REFERENCE]},u={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:hh,keyword:iT.concat(d),literal:sT,built_in:uT.concat(s),"variable.language":cT},p={className:"meta",begin:"@"+r},m=(S,C,T)=>{const L=S.contains.findIndex(R=>R.label===C);if(L===-1)throw new Error("can not find mode to replace");S.contains.splice(L,1,T)};Object.assign(t.keywords,h),t.exports.PARAMS_CONTAINS.push(p);const x=t.contains.find(S=>S.scope==="attr"),v=Object.assign({},x,{match:e.concat(r,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,x,v]),t.contains=t.contains.concat([p,o,l,v]),m(t,"shebang",n.SHEBANG()),m(t,"use_strict",u);const w=t.contains.find(S=>S.label==="func.def");return w.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function S8(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=n.inherit(o,{begin:/\(/,end:/\)/}),u=n.inherit(n.APOS_STRING_MODE,{className:"string"}),d=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,d,u,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,l,d,u]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}var Lg,fE;function E8(){if(fE)return Lg;fE=1;function n(O){return O instanceof Map?O.clear=O.delete=O.set=function(){throw new Error("map is read-only")}:O instanceof Set&&(O.add=O.clear=O.delete=function(){throw new Error("set is read-only")}),Object.freeze(O),Object.getOwnPropertyNames(O).forEach(Q=>{const ue=O[Q],De=typeof ue;(De==="object"||De==="function")&&!Object.isFrozen(ue)&&n(ue)}),O}class e{constructor(Q){Q.data===void 0&&(Q.data={}),this.data=Q.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(O){return O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(O,...Q){const ue=Object.create(null);for(const De in O)ue[De]=O[De];return Q.forEach(function(De){for(const gt in De)ue[gt]=De[gt]}),ue}const s="</span>",o=O=>!!O.scope,l=(O,{prefix:Q})=>{if(O.startsWith("language:"))return O.replace("language:","language-");if(O.includes(".")){const ue=O.split(".");return[`${Q}${ue.shift()}`,...ue.map((De,gt)=>`${De}${"_".repeat(gt+1)}`)].join(" ")}return`${Q}${O}`};class u{constructor(Q,ue){this.buffer="",this.classPrefix=ue.classPrefix,Q.walk(this)}addText(Q){this.buffer+=t(Q)}openNode(Q){if(!o(Q))return;const ue=l(Q.scope,{prefix:this.classPrefix});this.span(ue)}closeNode(Q){o(Q)&&(this.buffer+=s)}value(){return this.buffer}span(Q){this.buffer+=`<span class="${Q}">`}}const d=(O={})=>{const Q={children:[]};return Object.assign(Q,O),Q};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Q){this.top.children.push(Q)}openNode(Q){const ue=d({scope:Q});this.add(ue),this.stack.push(ue)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Q){return this.constructor._walk(Q,this.rootNode)}static _walk(Q,ue){return typeof ue=="string"?Q.addText(ue):ue.children&&(Q.openNode(ue),ue.children.forEach(De=>this._walk(Q,De)),Q.closeNode(ue)),Q}static _collapse(Q){typeof Q!="string"&&Q.children&&(Q.children.every(ue=>typeof ue=="string")?Q.children=[Q.children.join("")]:Q.children.forEach(ue=>{h._collapse(ue)}))}}class p extends h{constructor(Q){super(),this.options=Q}addText(Q){Q!==""&&this.add(Q)}startScope(Q){this.openNode(Q)}endScope(){this.closeNode()}__addSublanguage(Q,ue){const De=Q.root;ue&&(De.scope=`language:${ue}`),this.add(De)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function m(O){return O?typeof O=="string"?O:O.source:null}function x(O){return S("(?=",O,")")}function v(O){return S("(?:",O,")*")}function w(O){return S("(?:",O,")?")}function S(...O){return O.map(ue=>m(ue)).join("")}function C(O){const Q=O[O.length-1];return typeof Q=="object"&&Q.constructor===Object?(O.splice(O.length-1,1),Q):{}}function T(...O){return"("+(C(O).capture?"":"?:")+O.map(De=>m(De)).join("|")+")"}function L(O){return new RegExp(O.toString()+"|").exec("").length-1}function R(O,Q){const ue=O&&O.exec(Q);return ue&&ue.index===0}const k=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function j(O,{joinWith:Q}){let ue=0;return O.map(De=>{ue+=1;const gt=ue;let Ge=m(De),Ce="";for(;Ge.length>0;){const Ae=k.exec(Ge);if(!Ae){Ce+=Ge;break}Ce+=Ge.substring(0,Ae.index),Ge=Ge.substring(Ae.index+Ae[0].length),Ae[0][0]==="\\"&&Ae[1]?Ce+="\\"+String(Number(Ae[1])+gt):(Ce+=Ae[0],Ae[0]==="("&&ue++)}return Ce}).map(De=>`(${De})`).join(Q)}const H=/\b\B/,U="[a-zA-Z]\\w*",J="[a-zA-Z_]\\w*",re="\\b\\d+(\\.\\d+)?",fe="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",be="\\b(0b[01]+)",ae="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ce=(O={})=>{const Q=/^#![ ]*\//;return O.binary&&(O.begin=S(Q,/.*\b/,O.binary,/\b.*/)),r({scope:"meta",begin:Q,end:/$/,relevance:0,"on:begin":(ue,De)=>{ue.index!==0&&De.ignoreMatch()}},O)},ve={begin:"\\\\[\\s\\S]",relevance:0},pe={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ve]},z={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ve]},D={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},$=function(O,Q,ue={}){const De=r({scope:"comment",begin:O,end:Q,contains:[]},ue);De.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const gt=T("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return De.contains.push({begin:S(/[ ]+/,"(",gt,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),De},B=$("//","$"),ee=$("/\\*","\\*/"),M=$("#","$"),q={scope:"number",begin:re,relevance:0},W={scope:"number",begin:fe,relevance:0},ie={scope:"number",begin:be,relevance:0},le={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ve,{begin:/\[/,end:/\]/,relevance:0,contains:[ve]}]},we={scope:"title",begin:U,relevance:0},He={scope:"title",begin:J,relevance:0},Re={begin:"\\.\\s*"+J,relevance:0};var Je=Object.freeze({__proto__:null,APOS_STRING_MODE:pe,BACKSLASH_ESCAPE:ve,BINARY_NUMBER_MODE:ie,BINARY_NUMBER_RE:be,COMMENT:$,C_BLOCK_COMMENT_MODE:ee,C_LINE_COMMENT_MODE:B,C_NUMBER_MODE:W,C_NUMBER_RE:fe,END_SAME_AS_BEGIN:function(O){return Object.assign(O,{"on:begin":(Q,ue)=>{ue.data._beginMatch=Q[1]},"on:end":(Q,ue)=>{ue.data._beginMatch!==Q[1]&&ue.ignoreMatch()}})},HASH_COMMENT_MODE:M,IDENT_RE:U,MATCH_NOTHING_RE:H,METHOD_GUARD:Re,NUMBER_MODE:q,NUMBER_RE:re,PHRASAL_WORDS_MODE:D,QUOTE_STRING_MODE:z,REGEXP_MODE:le,RE_STARTERS_RE:ae,SHEBANG:ce,TITLE_MODE:we,UNDERSCORE_IDENT_RE:J,UNDERSCORE_TITLE_MODE:He});function ye(O,Q){O.input[O.index-1]==="."&&Q.ignoreMatch()}function Qe(O,Q){O.className!==void 0&&(O.scope=O.className,delete O.className)}function Ut(O,Q){Q&&O.beginKeywords&&(O.begin="\\b("+O.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",O.__beforeBegin=ye,O.keywords=O.keywords||O.beginKeywords,delete O.beginKeywords,O.relevance===void 0&&(O.relevance=0))}function Lt(O,Q){Array.isArray(O.illegal)&&(O.illegal=T(...O.illegal))}function En(O,Q){if(O.match){if(O.begin||O.end)throw new Error("begin & end are not supported with match");O.begin=O.match,delete O.match}}function Ot(O,Q){O.relevance===void 0&&(O.relevance=1)}const on=(O,Q)=>{if(!O.beforeMatch)return;if(O.starts)throw new Error("beforeMatch cannot be used with starts");const ue=Object.assign({},O);Object.keys(O).forEach(De=>{delete O[De]}),O.keywords=ue.keywords,O.begin=S(ue.beforeMatch,x(ue.begin)),O.starts={relevance:0,contains:[Object.assign(ue,{endsParent:!0})]},O.relevance=0,delete ue.beforeMatch},Cn=["of","and","for","in","not","or","if","then","parent","list","value"],K="keyword";function Ee(O,Q,ue=K){const De=Object.create(null);return typeof O=="string"?gt(ue,O.split(" ")):Array.isArray(O)?gt(ue,O):Object.keys(O).forEach(function(Ge){Object.assign(De,Ee(O[Ge],Q,Ge))}),De;function gt(Ge,Ce){Q&&(Ce=Ce.map(Ae=>Ae.toLowerCase())),Ce.forEach(function(Ae){const _e=Ae.split("|");De[_e[0]]=[Ge,Ye(_e[0],_e[1])]})}}function Ye(O,Q){return Q?Number(Q):Be(O)?0:1}function Be(O){return Cn.includes(O.toLowerCase())}const lt={},nt=O=>{console.error(O)},wn=(O,...Q)=>{console.log(`WARN: ${O}`,...Q)},Bt=(O,Q)=>{lt[`${O}/${Q}`]||(console.log(`Deprecated as of ${O}. ${Q}`),lt[`${O}/${Q}`]=!0)},ge=new Error;function Te(O,Q,{key:ue}){let De=0;const gt=O[ue],Ge={},Ce={};for(let Ae=1;Ae<=Q.length;Ae++)Ce[Ae+De]=gt[Ae],Ge[Ae+De]=!0,De+=L(Q[Ae-1]);O[ue]=Ce,O[ue]._emit=Ge,O[ue]._multi=!0}function We(O){if(Array.isArray(O.begin)){if(O.skip||O.excludeBegin||O.returnBegin)throw nt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ge;if(typeof O.beginScope!="object"||O.beginScope===null)throw nt("beginScope must be object"),ge;Te(O,O.begin,{key:"beginScope"}),O.begin=j(O.begin,{joinWith:""})}}function Ze(O){if(Array.isArray(O.end)){if(O.skip||O.excludeEnd||O.returnEnd)throw nt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ge;if(typeof O.endScope!="object"||O.endScope===null)throw nt("endScope must be object"),ge;Te(O,O.end,{key:"endScope"}),O.end=j(O.end,{joinWith:""})}}function $t(O){O.scope&&typeof O.scope=="object"&&O.scope!==null&&(O.beginScope=O.scope,delete O.scope)}function Zt(O){$t(O),typeof O.beginScope=="string"&&(O.beginScope={_wrap:O.beginScope}),typeof O.endScope=="string"&&(O.endScope={_wrap:O.endScope}),We(O),Ze(O)}function gr(O){function Q(Ce,Ae){return new RegExp(m(Ce),"m"+(O.case_insensitive?"i":"")+(O.unicodeRegex?"u":"")+(Ae?"g":""))}class ue{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Ae,_e){_e.position=this.position++,this.matchIndexes[this.matchAt]=_e,this.regexes.push([_e,Ae]),this.matchAt+=L(Ae)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Ae=this.regexes.map(_e=>_e[1]);this.matcherRe=Q(j(Ae,{joinWith:"|"}),!0),this.lastIndex=0}exec(Ae){this.matcherRe.lastIndex=this.lastIndex;const _e=this.matcherRe.exec(Ae);if(!_e)return null;const yt=_e.findIndex((_n,ao)=>ao>0&&_n!==void 0),Rt=this.matchIndexes[yt];return _e.splice(0,yt),Object.assign(_e,Rt)}}class De{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Ae){if(this.multiRegexes[Ae])return this.multiRegexes[Ae];const _e=new ue;return this.rules.slice(Ae).forEach(([yt,Rt])=>_e.addRule(yt,Rt)),_e.compile(),this.multiRegexes[Ae]=_e,_e}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Ae,_e){this.rules.push([Ae,_e]),_e.type==="begin"&&this.count++}exec(Ae){const _e=this.getMatcher(this.regexIndex);_e.lastIndex=this.lastIndex;let yt=_e.exec(Ae);if(this.resumingScanAtSamePosition()&&!(yt&&yt.index===this.lastIndex)){const Rt=this.getMatcher(0);Rt.lastIndex=this.lastIndex+1,yt=Rt.exec(Ae)}return yt&&(this.regexIndex+=yt.position+1,this.regexIndex===this.count&&this.considerAll()),yt}}function gt(Ce){const Ae=new De;return Ce.contains.forEach(_e=>Ae.addRule(_e.begin,{rule:_e,type:"begin"})),Ce.terminatorEnd&&Ae.addRule(Ce.terminatorEnd,{type:"end"}),Ce.illegal&&Ae.addRule(Ce.illegal,{type:"illegal"}),Ae}function Ge(Ce,Ae){const _e=Ce;if(Ce.isCompiled)return _e;[Qe,En,Zt,on].forEach(Rt=>Rt(Ce,Ae)),O.compilerExtensions.forEach(Rt=>Rt(Ce,Ae)),Ce.__beforeBegin=null,[Ut,Lt,Ot].forEach(Rt=>Rt(Ce,Ae)),Ce.isCompiled=!0;let yt=null;return typeof Ce.keywords=="object"&&Ce.keywords.$pattern&&(Ce.keywords=Object.assign({},Ce.keywords),yt=Ce.keywords.$pattern,delete Ce.keywords.$pattern),yt=yt||/\w+/,Ce.keywords&&(Ce.keywords=Ee(Ce.keywords,O.case_insensitive)),_e.keywordPatternRe=Q(yt,!0),Ae&&(Ce.begin||(Ce.begin=/\B|\b/),_e.beginRe=Q(_e.begin),!Ce.end&&!Ce.endsWithParent&&(Ce.end=/\B|\b/),Ce.end&&(_e.endRe=Q(_e.end)),_e.terminatorEnd=m(_e.end)||"",Ce.endsWithParent&&Ae.terminatorEnd&&(_e.terminatorEnd+=(Ce.end?"|":"")+Ae.terminatorEnd)),Ce.illegal&&(_e.illegalRe=Q(Ce.illegal)),Ce.contains||(Ce.contains=[]),Ce.contains=[].concat(...Ce.contains.map(function(Rt){return Ne(Rt==="self"?Ce:Rt)})),Ce.contains.forEach(function(Rt){Ge(Rt,_e)}),Ce.starts&&Ge(Ce.starts,Ae),_e.matcher=gt(_e),_e}if(O.compilerExtensions||(O.compilerExtensions=[]),O.contains&&O.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return O.classNameAliases=r(O.classNameAliases||{}),Ge(O)}function Y(O){return O?O.endsWithParent||Y(O.starts):!1}function Ne(O){return O.variants&&!O.cachedVariants&&(O.cachedVariants=O.variants.map(function(Q){return r(O,{variants:null},Q)})),O.cachedVariants?O.cachedVariants:Y(O)?r(O,{starts:O.starts?r(O.starts):null}):Object.isFrozen(O)?r(O):O}var ke="11.11.1";class pt extends Error{constructor(Q,ue){super(Q),this.name="HTMLInjectionError",this.html=ue}}const et=t,St=r,en=Symbol("nomatch"),Yn=7,yr=function(O){const Q=Object.create(null),ue=Object.create(null),De=[];let gt=!0;const Ge="Could not find the language '{}', did you forget to load/include a language module?",Ce={disableAutodetect:!0,name:"Plain text",contains:[]};let Ae={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function _e(he){return Ae.noHighlightRe.test(he)}function yt(he){let Ue=he.className+" ";Ue+=he.parentNode?he.parentNode.className:"";const at=Ae.languageDetectRe.exec(Ue);if(at){const Et=Xn(at[1]);return Et||(wn(Ge.replace("{}",at[1])),wn("Falling back to no-highlight mode for this block.",he)),Et?at[1]:"no-highlight"}return Ue.split(/\s+/).find(Et=>_e(Et)||Xn(Et))}function Rt(he,Ue,at){let Et="",ln="";typeof Ue=="object"?(Et=he,at=Ue.ignoreIllegals,ln=Ue.language):(Bt("10.7.0","highlight(lang, code, ...args) has been deprecated."),Bt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ln=he,Et=Ue),at===void 0&&(at=!0);const Vn={code:Et,language:ln};co("before:highlight",Vn);const br=Vn.result?Vn.result:_n(Vn.language,Vn.code,at);return br.code=Vn.code,co("after:highlight",br),br}function _n(he,Ue,at,Et){const ln=Object.create(null);function Vn(xe,je){return xe.keywords[je]}function br(){if(!Ke.keywords){pn.addText(Ct);return}let xe=0;Ke.keywordPatternRe.lastIndex=0;let je=Ke.keywordPatternRe.exec(Ct),tt="";for(;je;){tt+=Ct.substring(xe,je.index);const dt=jn.case_insensitive?je[0].toLowerCase():je[0],Xt=Vn(Ke,dt);if(Xt){const[Dr,Sl]=Xt;if(pn.addText(tt),tt="",ln[dt]=(ln[dt]||0)+1,ln[dt]<=Yn&&(fs+=Sl),Dr.startsWith("_"))tt+=je[0];else{const wu=jn.classNameAliases[Dr]||Dr;xr(je[0],wu)}}else tt+=je[0];xe=Ke.keywordPatternRe.lastIndex,je=Ke.keywordPatternRe.exec(Ct)}tt+=Ct.substring(xe),pn.addText(tt)}function nr(){if(Ct==="")return;let xe=null;if(typeof Ke.subLanguage=="string"){if(!Q[Ke.subLanguage]){pn.addText(Ct);return}xe=_n(Ke.subLanguage,Ct,!0,vu[Ke.subLanguage]),vu[Ke.subLanguage]=xe._top}else xe=oa(Ct,Ke.subLanguage.length?Ke.subLanguage:null);Ke.relevance>0&&(fs+=xe.relevance),pn.__addSublanguage(xe._emitter,xe.language)}function zt(){Ke.subLanguage!=null?nr():br(),Ct=""}function xr(xe,je){xe!==""&&(pn.startScope(je),pn.addText(xe),pn.endScope())}function bu(xe,je){let tt=1;const dt=je.length-1;for(;tt<=dt;){if(!xe._emit[tt]){tt++;continue}const Xt=jn.classNameAliases[xe[tt]]||xe[tt],Dr=je[tt];Xt?xr(Dr,Xt):(Ct=Dr,br(),Ct=""),tt++}}function la(xe,je){return xe.scope&&typeof xe.scope=="string"&&pn.openNode(jn.classNameAliases[xe.scope]||xe.scope),xe.beginScope&&(xe.beginScope._wrap?(xr(Ct,jn.classNameAliases[xe.beginScope._wrap]||xe.beginScope._wrap),Ct=""):xe.beginScope._multi&&(bu(xe.beginScope,je),Ct="")),Ke=Object.create(xe,{parent:{value:Ke}}),Ke}function xl(xe,je,tt){let dt=R(xe.endRe,tt);if(dt){if(xe["on:end"]){const Xt=new e(xe);xe["on:end"](je,Xt),Xt.isMatchIgnored&&(dt=!1)}if(dt){for(;xe.endsParent&&xe.parent;)xe=xe.parent;return xe}}if(xe.endsWithParent)return xl(xe.parent,je,tt)}function ca(xe){return Ke.matcher.regexIndex===0?(Ct+=xe[0],1):(hs=!0,0)}function Ih(xe){const je=xe[0],tt=xe.rule,dt=new e(tt),Xt=[tt.__beforeBegin,tt["on:begin"]];for(const Dr of Xt)if(Dr&&(Dr(xe,dt),dt.isMatchIgnored))return ca(je);return tt.skip?Ct+=je:(tt.excludeBegin&&(Ct+=je),zt(),!tt.returnBegin&&!tt.excludeBegin&&(Ct=je)),la(tt,xe),tt.returnBegin?0:je.length}function rr(xe){const je=xe[0],tt=Ue.substring(xe.index),dt=xl(Ke,xe,tt);if(!dt)return en;const Xt=Ke;Ke.endScope&&Ke.endScope._wrap?(zt(),xr(je,Ke.endScope._wrap)):Ke.endScope&&Ke.endScope._multi?(zt(),bu(Ke.endScope,xe)):Xt.skip?Ct+=je:(Xt.returnEnd||Xt.excludeEnd||(Ct+=je),zt(),Xt.excludeEnd&&(Ct=je));do Ke.scope&&pn.closeNode(),!Ke.skip&&!Ke.subLanguage&&(fs+=Ke.relevance),Ke=Ke.parent;while(Ke!==dt.parent);return dt.starts&&la(dt.starts,xe),Xt.returnEnd?0:je.length}function vl(){const xe=[];for(let je=Ke;je!==jn;je=je.parent)je.scope&&xe.unshift(je.scope);xe.forEach(je=>pn.openNode(je))}let uo={};function ua(xe,je){const tt=je&&je[0];if(Ct+=xe,tt==null)return zt(),0;if(uo.type==="begin"&&je.type==="end"&&uo.index===je.index&&tt===""){if(Ct+=Ue.slice(je.index,je.index+1),!gt){const dt=new Error(`0 width match regex (${he})`);throw dt.languageName=he,dt.badRule=uo.rule,dt}return 1}if(uo=je,je.type==="begin")return Ih(je);if(je.type==="illegal"&&!at){const dt=new Error('Illegal lexeme "'+tt+'" for mode "'+(Ke.scope||"<unnamed>")+'"');throw dt.mode=Ke,dt}else if(je.type==="end"){const dt=rr(je);if(dt!==en)return dt}if(je.type==="illegal"&&tt==="")return Ct+=`
`,1;if(wl>1e5&&wl>je.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ct+=tt,tt.length}const jn=Xn(he);if(!jn)throw nt(Ge.replace("{}",he)),new Error('Unknown language: "'+he+'"');const xu=gr(jn);let da="",Ke=Et||xu;const vu={},pn=new Ae.__emitter(Ae);vl();let Ct="",fs=0,Ri=0,wl=0,hs=!1;try{if(jn.__emitTokens)jn.__emitTokens(Ue,pn);else{for(Ke.matcher.considerAll();;){wl++,hs?hs=!1:Ke.matcher.considerAll(),Ke.matcher.lastIndex=Ri;const xe=Ke.matcher.exec(Ue);if(!xe)break;const je=Ue.substring(Ri,xe.index),tt=ua(je,xe);Ri=xe.index+tt}ua(Ue.substring(Ri))}return pn.finalize(),da=pn.toHTML(),{language:he,value:da,relevance:fs,illegal:!1,_emitter:pn,_top:Ke}}catch(xe){if(xe.message&&xe.message.includes("Illegal"))return{language:he,value:et(Ue),illegal:!0,relevance:0,_illegalBy:{message:xe.message,index:Ri,context:Ue.slice(Ri-100,Ri+100),mode:xe.mode,resultSoFar:da},_emitter:pn};if(gt)return{language:he,value:et(Ue),illegal:!1,relevance:0,errorRaised:xe,_emitter:pn,_top:Ke};throw xe}}function ao(he){const Ue={value:et(he),illegal:!1,relevance:0,_top:Ce,_emitter:new Ae.__emitter(Ae)};return Ue._emitter.addText(he),Ue}function oa(he,Ue){Ue=Ue||Ae.languages||Object.keys(Q);const at=ao(he),Et=Ue.filter(Xn).filter(us).map(zt=>_n(zt,he,!1));Et.unshift(at);const ln=Et.sort((zt,xr)=>{if(zt.relevance!==xr.relevance)return xr.relevance-zt.relevance;if(zt.language&&xr.language){if(Xn(zt.language).supersetOf===xr.language)return 1;if(Xn(xr.language).supersetOf===zt.language)return-1}return 0}),[Vn,br]=ln,nr=Vn;return nr.secondBest=br,nr}function li(he,Ue,at){const Et=Ue&&ue[Ue]||at;he.classList.add("hljs"),he.classList.add(`language-${Et}`)}function an(he){let Ue=null;const at=yt(he);if(_e(at))return;if(co("before:highlightElement",{el:he,language:at}),he.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",he);return}if(he.children.length>0&&(Ae.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(he)),Ae.throwUnescapedHTML))throw new pt("One of your code blocks includes unescaped HTML.",he.innerHTML);Ue=he;const Et=Ue.textContent,ln=at?Rt(Et,{language:at,ignoreIllegals:!0}):oa(Et);he.innerHTML=ln.value,he.dataset.highlighted="yes",li(he,at,ln.language),he.result={language:ln.language,re:ln.relevance,relevance:ln.relevance},ln.secondBest&&(he.secondBest={language:ln.secondBest.language,relevance:ln.secondBest.relevance}),co("after:highlightElement",{el:he,result:ln,text:Et})}function qn(he){Ae=St(Ae,he)}const cs=()=>{aa(),Bt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function yl(){aa(),Bt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let mu=!1;function aa(){function he(){aa()}if(document.readyState==="loading"){mu||window.addEventListener("DOMContentLoaded",he,!1),mu=!0;return}document.querySelectorAll(Ae.cssSelector).forEach(an)}function gu(he,Ue){let at=null;try{at=Ue(O)}catch(Et){if(nt("Language definition for '{}' could not be registered.".replace("{}",he)),gt)nt(Et);else throw Et;at=Ce}at.name||(at.name=he),Q[he]=at,at.rawDefinition=Ue.bind(null,O),at.aliases&&Mi(at.aliases,{languageName:he})}function lo(he){delete Q[he];for(const Ue of Object.keys(ue))ue[Ue]===he&&delete ue[Ue]}function bl(){return Object.keys(Q)}function Xn(he){return he=(he||"").toLowerCase(),Q[he]||Q[ue[he]]}function Mi(he,{languageName:Ue}){typeof he=="string"&&(he=[he]),he.forEach(at=>{ue[at.toLowerCase()]=Ue})}function us(he){const Ue=Xn(he);return Ue&&!Ue.disableAutodetect}function ds(he){he["before:highlightBlock"]&&!he["before:highlightElement"]&&(he["before:highlightElement"]=Ue=>{he["before:highlightBlock"](Object.assign({block:Ue.el},Ue))}),he["after:highlightBlock"]&&!he["after:highlightElement"]&&(he["after:highlightElement"]=Ue=>{he["after:highlightBlock"](Object.assign({block:Ue.el},Ue))})}function hn(he){ds(he),De.push(he)}function yu(he){const Ue=De.indexOf(he);Ue!==-1&&De.splice(Ue,1)}function co(he,Ue){const at=he;De.forEach(function(Et){Et[at]&&Et[at](Ue)})}function Oi(he){return Bt("10.7.0","highlightBlock will be removed entirely in v12.0"),Bt("10.7.0","Please use highlightElement now."),an(he)}Object.assign(O,{highlight:Rt,highlightAuto:oa,highlightAll:aa,highlightElement:an,highlightBlock:Oi,configure:qn,initHighlighting:cs,initHighlightingOnLoad:yl,registerLanguage:gu,unregisterLanguage:lo,listLanguages:bl,getLanguage:Xn,registerAliases:Mi,autoDetection:us,inherit:St,addPlugin:hn,removePlugin:yu}),O.debugMode=function(){gt=!1},O.safeMode=function(){gt=!0},O.versionString=ke,O.regex={concat:S,lookahead:x,either:T,optional:w,anyNumberOfTimes:v};for(const he in Je)typeof Je[he]=="object"&&n(Je[he]);return Object.assign(O,Je),O},Pt=yr({});return Pt.newInstance=()=>yr({}),Lg=Pt,Pt.HighlightJS=Pt,Pt.default=Pt,Lg}var C8=E8();const N8=O0(C8),hE={},T8="hljs-";function A8(n){const e=N8.newInstance();return{highlight:t,highlightAuto:r,listLanguages:s,register:o,registerAlias:l,registered:u};function t(d,h,p){const m=p||hE,x=typeof m.prefix=="string"?m.prefix:T8;if(!e.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");e.configure({__emitter:k8,classPrefix:x});const v=e.highlight(h,{ignoreIllegals:!0,language:d});if(v.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:v.errorRaised});const w=v._emitter.root,S=w.data;return S.language=v.language,S.relevance=v.relevance,w}function r(d,h){const m=(h||hE).subset||s();let x=-1,v=0,w;for(;++x<m.length;){const S=m[x];if(!e.getLanguage(S))continue;const C=t(S,d,h);C.data&&C.data.relevance!==void 0&&C.data.relevance>v&&(v=C.data.relevance,w=C)}return w||{type:"root",children:[],data:{language:void 0,relevance:v}}}function s(){return e.listLanguages()}function o(d,h){if(typeof d=="string")e.registerLanguage(d,h);else{let p;for(p in d)Object.hasOwn(d,p)&&e.registerLanguage(p,d[p])}}function l(d,h){if(typeof d=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let p;for(p in d)if(Object.hasOwn(d,p)){const m=d[p];e.registerAliases(typeof m=="string"?m:[...m],{languageName:p})}}}function u(d){return!!e.getLanguage(d)}}class k8{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],r=t.children[t.children.length-1];r&&r.type==="text"?r.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const r=this.stack[this.stack.length-1],s=e.root.children;t?r.children.push({type:"element",tagName:"span",properties:{className:[t]},children:s}):r.children.push(...s)}openNode(e){const t=this,r=e.split(".").map(function(l,u){return u?l+"_".repeat(u):t.options.classPrefix+l}),s=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}function dT(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=dT(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Bg(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=dT(n))&&(r&&(r+=" "),r+=e);return r}function M8(n){var e;const{char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:u}=n,d=r&&!s,h=vL(t),p=new RegExp(`\\s${h}$`),m=l?"^":"",x=s?"":h,v=d?new RegExp(`${m}${h}.*?(?=\\s${x}|$)`,"gm"):new RegExp(`${m}(?:^)?${h}[^\\s${x}]*`,"gm"),w=((e=u.nodeBefore)===null||e===void 0?void 0:e.isText)&&u.nodeBefore.text;if(!w)return null;const S=u.pos-w.length,C=Array.from(w.matchAll(v)).pop();if(!C||C.input===void 0||C.index===void 0)return null;const T=C.input.slice(Math.max(0,C.index-1),C.index),L=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(T);if(o!==null&&!L)return null;const R=S+C.index;let k=R+C[0].length;return d&&p.test(w.slice(k-1,k+1))&&(C[0]+=" ",k+=1),R<u.pos&&k>=u.pos?{range:{from:R,to:k},query:C[0].slice(t.length),text:C[0]}:null}const O8=new fn("suggestion");function R8({pluginKey:n=O8,editor:e,char:t="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:o=[" "],startOfLine:l=!1,decorationTag:u="span",decorationClass:d="suggestion",decorationContent:h="",decorationEmptyClass:p="is-empty",command:m=()=>null,items:x=()=>[],render:v=()=>({}),allow:w=()=>!0,findSuggestionMatch:S=M8}){let C;const T=v==null?void 0:v(),L=new Yt({key:n,view(){return{update:async(R,k)=>{var j,H,U,J,re,fe,be;const ae=(j=this.key)===null||j===void 0?void 0:j.getState(k),ce=(H=this.key)===null||H===void 0?void 0:H.getState(R.state),ve=ae.active&&ce.active&&ae.range.from!==ce.range.from,pe=!ae.active&&ce.active,z=ae.active&&!ce.active,D=!pe&&!z&&ae.query!==ce.query,$=pe||ve&&D,B=D||ve,ee=z||ve&&D;if(!$&&!B&&!ee)return;const M=ee&&!$?ae:ce,q=R.dom.querySelector(`[data-decoration-id="${M.decorationId}"]`);C={editor:e,range:M.range,query:M.query,text:M.text,items:[],command:W=>m({editor:e,range:M.range,props:W}),decorationNode:q,clientRect:q?()=>{var W;const{decorationId:ie}=(W=this.key)===null||W===void 0?void 0:W.getState(e.state),le=R.dom.querySelector(`[data-decoration-id="${ie}"]`);return(le==null?void 0:le.getBoundingClientRect())||null}:null},$&&((U=T==null?void 0:T.onBeforeStart)===null||U===void 0||U.call(T,C)),B&&((J=T==null?void 0:T.onBeforeUpdate)===null||J===void 0||J.call(T,C)),(B||$)&&(C.items=await x({editor:e,query:M.query})),ee&&((re=T==null?void 0:T.onExit)===null||re===void 0||re.call(T,C)),B&&((fe=T==null?void 0:T.onUpdate)===null||fe===void 0||fe.call(T,C)),$&&((be=T==null?void 0:T.onStart)===null||be===void 0||be.call(T,C))},destroy:()=>{var R;C&&((R=T==null?void 0:T.onExit)===null||R===void 0||R.call(T,C))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(R,k,j,H){const{isEditable:U}=e,{composing:J}=e.view,{selection:re}=R,{empty:fe,from:be}=re,ae={...k};if(ae.composing=J,U&&(fe||e.view.composing)){(be<k.range.from||be>k.range.to)&&!J&&!k.composing&&(ae.active=!1);const ce=S({char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:re.$from}),ve=`id_${Math.floor(Math.random()*4294967295)}`;ce&&w({editor:e,state:H,range:ce.range,isActive:k.active})?(ae.active=!0,ae.decorationId=k.decorationId?k.decorationId:ve,ae.range=ce.range,ae.query=ce.query,ae.text=ce.text):ae.active=!1}else ae.active=!1;return ae.active||(ae.decorationId=null,ae.range={from:0,to:0},ae.query=null,ae.text=null),ae}},props:{handleKeyDown(R,k){var j;const{active:H,range:U}=L.getState(R.state);return H&&((j=T==null?void 0:T.onKeyDown)===null||j===void 0?void 0:j.call(T,{view:R,event:k,range:U}))||!1},decorations(R){const{active:k,range:j,decorationId:H,query:U}=L.getState(R);if(!k)return null;const J=!(U!=null&&U.length),re=[d];return J&&re.push(p),Gt.create(R.doc,[kn.inline(j.from,j.to,{nodeName:u,class:re.join(" "),"data-decoration-id":H,"data-decoration-content":h})])}}});return L}const fT=N.forwardRef(({items:n,command:e},t)=>{const r=N.useRef(null),[s,o]=N.useState(0),l=N.useMemo(()=>h=>{const p=n[h];p&&e(p)},[n,e]),u=N.useMemo(()=>()=>{o(h=>{const p=h-1;return p<0?Math.max(n.length-1,0):p})},[n.length]),d=N.useMemo(()=>()=>{o(h=>{const p=h+1;return p>=n.length?0:p})},[n.length]);return N.useEffect(()=>{o(0)},[n]),N.useEffect(()=>{const h=r.current;if(!h)return;const p=h.querySelector(`[data-index="${s}"]`);p==null||p.scrollIntoView({block:"nearest"})},[s]),N.useImperativeHandle(t,()=>({onKeyDown:({event:h})=>h.key==="ArrowUp"?(u(),!0):h.key==="ArrowDown"?(d(),!0):h.key==="Enter"?(l(s),!0):!1}),[d,l,s,u]),n.length?b.jsx("div",{ref:r,className:"max-h-80 w-72 overflow-y-auto rounded-xl border border-neutral-200 bg-white p-1 shadow-xl",children:n.map((h,p)=>{const m=h.icon,x=p===s;return b.jsxs("button",{type:"button","data-index":p,onClick:()=>l(p),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition ${x?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[m?b.jsx(m,{className:"h-4 w-4 text-neutral-500"}):b.jsx("span",{className:"h-4 w-4","aria-hidden":!0}),b.jsxs("div",{className:"flex flex-col text-sm",children:[b.jsx("span",{className:"font-medium",children:h.title}),h.description?b.jsx("span",{className:"text-xs text-neutral-400",children:h.description}):null]})]},h.title)})}):b.jsx("div",{ref:r,className:"w-72 rounded-xl border border-neutral-200 bg-white p-4 text-sm text-neutral-500 shadow-xl",children:b.jsx("p",{children:"No matches. Keep typing to search commands."})})});fT.displayName="SlashCommandList";const D8=Dn.create({name:"slash-command",addOptions(){return{items:[]}},addProseMirrorPlugins(){return[R8({editor:this.editor,char:"/",command:n=>{const e=n==null?void 0:n.editor,t=n==null?void 0:n.range,r=n==null?void 0:n.props;if(!e||!t||!r)return!1;r.command({editor:e,range:t})},items:({query:n})=>{const e=n.toLowerCase();return this.options.items.filter(t=>t.disabled?!1:[t.title,t.description??"",...t.keywords??[]].join(" ").toLowerCase().includes(e)).slice(0,50)},render:()=>{let n=null,e=null;return{onStart(t){t!=null&&t.editor&&(n=new gN(fT,{props:{items:t.items,command:r=>t.command(r)},editor:t.editor}),e=ml("body",{getReferenceClientRect:t.clientRect,appendTo:()=>document.body,content:n.element,interactive:!0,trigger:"manual",placement:"left-start",arrow:!1,offset:[0,12]}),e[0].show())},onUpdate(t){t!=null&&t.editor&&(n==null||n.updateProps({items:t.items,command:r=>t.command(r)}),e==null||e[0].setProps({getReferenceClientRect:t.clientRect}))},onKeyDown(t){var s;return t!=null&&t.editor?t.event.key==="Escape"?(e==null||e[0].hide(),!0):!!((s=n==null?void 0:n.ref)==null?void 0:s.onKeyDown({event:t.event})):!1},onExit(){var t,r,s;(r=(t=e==null?void 0:e[0])==null?void 0:t.destroy)==null||r.call(t),e=null,(s=n==null?void 0:n.destroy)==null||s.call(n),n=null}}}})]}}),zg={default:"border-neutral-200 bg-neutral-50",info:"border-blue-200 bg-blue-50",success:"border-emerald-200 bg-emerald-50",warning:"border-amber-200 bg-amber-50",danger:"border-rose-200 bg-rose-50"};function _8({node:n,updateAttributes:e}){const{emoji:t="",color:r="default"}=n.attrs,s=zg[r]??zg.default,o=()=>{const u=window.prompt("Callout icon (emoji)",t??"");u&&e({emoji:u})},l=()=>{const u=window.prompt("Callout color (default, info, success, warning, danger)",r);if(!u)return;const d=u.toLowerCase();zg[d]&&e({color:d})};return b.jsxs(mN,{as:"aside",className:`notion-callout group relative my-3 flex w-full items-start gap-3 rounded-xl border px-4 py-3 text-[15px] leading-7 text-neutral-800 ${s}`,"data-color":r,children:[b.jsx("button",{type:"button",onClick:o,className:"mt-1 inline-flex h-8 w-8 items-center justify-center rounded-lg text-xl transition hover:bg-white/70","aria-label":"Change callout icon",children:t}),b.jsx("div",{className:"flex-1",children:b.jsx(g6,{className:"notion-callout-content"})}),b.jsx("button",{type:"button",onClick:l,className:"absolute right-3 top-3 hidden rounded-md bg-white/80 px-2 py-1 text-xs font-medium text-neutral-500 shadow-sm transition hover:bg-white group-hover:flex",children:"Color"})]})}const j8=["youtube.com","youtu.be","player.vimeo.com"];function L8(n){try{const e=new URL(n);return j8.some(t=>e.hostname.includes(t))}catch{return!1}}function B8({node:n}){const{url:e,title:t}=n.attrs,r=L8(e),s=(()=>{try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e}})();return b.jsxs(mN,{className:"notion-embed my-4 w-full overflow-hidden rounded-xl border border-neutral-200 bg-white shadow-sm",children:[r?b.jsx("div",{className:"aspect-video w-full bg-neutral-950/5",children:b.jsx("iframe",{src:e,title:t??e,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):null,b.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 text-sm",children:[b.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-neutral-200 bg-neutral-100 font-semibold text-neutral-500",children:s.slice(0,2).toUpperCase()}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-medium text-neutral-800",children:t??e}),b.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-neutral-500 underline-offset-2 hover:underline",children:s})]})]})]})}function z8({editor:n}){return b.jsx(fN,{editor:n,pluginKey:"table-bubble-menu",shouldShow:()=>n.isActive("table"),tippyOptions:{duration:150,offset:[0,16]},className:"rounded-xl border border-neutral-200 bg-white/95 px-3 py-2 text-sm shadow-2xl",children:b.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[b.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Col"}),b.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Col "}),b.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Row"}),b.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Row "}),b.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteColumn().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Col"}),b.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteRow().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Row"}),b.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteTable().run(),className:"rounded-md border border-rose-200 px-2 py-1 text-xs font-medium text-rose-500 transition hover:bg-rose-50",children:"Delete"})]})})}const sa=A8();sa.register("javascript",y8);sa.register("typescript",w8);sa.register("css",f8);sa.register("html",S8);sa.register("json",b8);sa.register("python",x8);function dn(n){return!n||n.isDestroyed?null:n.chain().focus()}function pE(n){try{return new URL(n),!0}catch{return!1}}const I8=nI.extend({name:"toggle"}).configure({HTMLAttributes:{class:"notion-toggle","data-type":"toggle"}}),H8=Qt.create({name:"callout",group:"block",content:"block+",defining:!0,isolating:!0,selectable:!0,addAttributes(){return{emoji:{default:""},color:{default:"default"}}},parseHTML(){return[{tag:"aside[data-type='callout']"}]},renderHTML({HTMLAttributes:n}){return["aside",wt(n,{"data-type":"callout"}),0]},addNodeView(){return yN(_8)},addCommands(){return{setCallout:n=>({editor:e,range:t})=>{var l;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"callout",attrs:n??{},content:[{type:"paragraph"}]}),(l=dn(e))==null||l.run(),!0}}}}),U8=Qt.create({name:"embed",group:"block",atom:!0,selectable:!0,addAttributes(){return{url:{default:""},title:{default:null}}},parseHTML(){return[{tag:"div[data-type='embed']"}]},renderHTML({HTMLAttributes:n}){return["div",wt(n,{"data-type":"embed"})]},addNodeView(){return yN(B8)},addCommands(){return{setEmbed:n=>({editor:e,range:t})=>{var l;if(!(n!=null&&n.url))return!1;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"embed",attrs:n}),(l=dn(e))==null||l.run(),!0}}}});function $8({value:n,onChange:e,placeholder:t="Type '/' for commands",editable:r=!0,className:s,editorClassName:o}){const l=N.useRef(n??""),u=N.useRef(null),d=N.useRef(null),h=N.useMemo(()=>[{title:"Text",description:"Plain text",icon:yh,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).setParagraph().run()}},{title:"Heading 1",description:"Large heading",icon:K5,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).setNode("heading",{level:1}).run()}},{title:"List",description:"Bulleted list",icon:v5,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).toggleBulletList().run()}},{title:"Ordered list",description:"Numbered",icon:hD,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).toggleOrderedList().run()}},{title:"Quote",description:"Blockquote",icon:si,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).toggleBlockquote().run()}},{title:"Code block",description:"Syntax highlighted",icon:L5,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).setCodeBlock().run()}},{title:"Divider",description:"Horizontal line",icon:nD,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).setHorizontalRule().run()}},{title:"Callout",description:"Highlighted block",icon:S5,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).setCallout().run()}},{title:"Table",description:"33 table",icon:mD,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}},{title:"Embed",description:"External link",icon:Y1,command:({editor:v,range:w})=>{var C;const S=window.prompt("Embed URL");S&&((C=dn(v))==null||C.deleteRange(w).setEmbed({url:S}).run())}},{title:"Image",description:"Upload",icon:uD,command:({editor:v,range:w})=>{var S;(S=dn(v))==null||S.deleteRange(w).run(),setTimeout(()=>{var C;return(C=u.current)==null?void 0:C.click()},0)}}],[]),p=N.useCallback(async v=>{const w=d.current;if(!w||w.isDestroyed||!(v!=null&&v.length))return;const S=Array.from(v).filter(C=>C.type.startsWith("image/"));if(S.length)for(const C of S)await new Promise(T=>{const L=new FileReader;L.onload=R=>{var k,j;if(!d.current||d.current.isDestroyed)return T();typeof((k=R.target)==null?void 0:k.result)=="string"&&((j=dn(d.current))==null||j.setImage({src:R.target.result,alt:C.name}).run()),T()},L.readAsDataURL(C)})},[]),m=p6({content:n,editable:r,extensions:[xz.configure({codeBlock:!1,heading:{levels:[1,2,3]}}),vz.configure({placeholder:t,showOnlyWhenEditable:!0}),wz,Gz.configure({openOnClick:!1,autolink:!0,validate:v=>pE(v),HTMLAttributes:{class:"underline text-neutral-700 hover:text-neutral-900"}}),Wz.configure({allowBase64:!0}),X7.configure({resizable:!0,HTMLAttributes:{class:"notion-table w-full text-sm border border-neutral-200"}}),J7,Z7.configure({HTMLAttributes:{class:"bg-neutral-100 font-semibold"}}),eI.configure({HTMLAttributes:{class:"border p-3 align-top"}}),r8.configure({lowlight:sa,HTMLAttributes:{class:"rounded-xl bg-neutral-950/90 p-4 font-mono text-[13px] text-neutral-100 overflow-x-auto"}}),I8,rI.configure({HTMLAttributes:{class:"cursor-pointer text-neutral-700 font-medium flex gap-2"}}),iI.configure({HTMLAttributes:{class:"pl-4 text-neutral-700"}}),H8,U8,D8.configure({items:h})],editorProps:{attributes:{class:Bg("notion-editor prose prose-neutral mx-auto min-h-[50vh] max-w-3xl text-[16px] leading-7 outline-none",o)},handlePaste:(v,w)=>{var T,L,R;const S=(T=w.clipboardData)==null?void 0:T.files;if(S!=null&&S.length)return p(S),!0;const C=(L=w.clipboardData)==null?void 0:L.getData("text/plain");return C&&pE(C)?((R=dn(d.current))==null||R.setEmbed({url:C}).run(),!0):!1},handleDrop:(v,w)=>{var C;const S=(C=w.dataTransfer)==null?void 0:C.files;return S!=null&&S.length?(w.preventDefault(),p(S),!0):!1}},onUpdate({editor:v}){if(!v||v.isDestroyed)return;const w=v.isEmpty?"":v.getHTML();l.current!==w&&(l.current=w,e(w))}},[r,t]);N.useEffect(()=>{d.current=m??null},[m]),N.useEffect(()=>{!m||m.isDestroyed||m.isEditable!==r&&m.setEditable(r)},[m,r]),N.useEffect(()=>{var k;if(!m||m.isDestroyed)return;const v=n??"";if(l.current===v)return;if(m.getHTML()===v||m.isEmpty&&v===""){l.current=v;return}const S=m.state.selection,C=(S==null?void 0:S.from)??0,T=(S==null?void 0:S.to)??0;m.commands.setContent(v,!1);const L=m.state.doc.content.size,R=j=>Math.max(0,Math.min(j,L));(k=dn(m))==null||k.setTextSelection({from:R(C),to:R(T)}).run(),l.current=v},[n,m]);const x=v=>Bg("flex h-8 w-8 items-center justify-center rounded-full text-[13px] transition",v?"bg-neutral-900 text-white":"text-neutral-100 hover:bg-white/10 hover:text-white");return b.jsxs("div",{className:Bg("relative rounded-2xl border border-neutral-200 bg-white px-6 py-5 shadow-sm",s),children:[b.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:v=>{p(v.target.files),v.target.value=""}}),m?b.jsxs(b.Fragment,{children:[b.jsx(fN,{editor:m,tippyOptions:{duration:100,offset:[0,8]},className:"rounded-full bg-neutral-900/95 px-2 py-1 shadow-xl",children:b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{type:"button",onClick:()=>{var v;return(v=dn(m))==null?void 0:v.toggleBold().run()},className:x(m.isActive("bold")),children:b.jsx("strong",{children:"B"})}),b.jsx("button",{type:"button",onClick:()=>{var v;return(v=dn(m))==null?void 0:v.toggleItalic().run()},className:x(m.isActive("italic")),children:b.jsx("em",{children:"I"})}),b.jsx("button",{type:"button",onClick:()=>{var v;return(v=dn(m))==null?void 0:v.toggleUnderline().run()},className:x(m.isActive("underline")),children:b.jsx("span",{className:"underline",children:"U"})}),b.jsx("button",{type:"button",onClick:()=>{var v;return(v=dn(m))==null?void 0:v.toggleStrike().run()},className:x(m.isActive("strike")),children:b.jsx("span",{className:"line-through",children:"S"})}),b.jsx("button",{type:"button",onClick:()=>{var w;const v=window.prompt("Enter URL:");v&&((w=dn(m))==null||w.extendMarkRange("link").setLink({href:v}).run())},className:x(m.isActive("link")),children:b.jsx(Y1,{className:"h-4 w-4"})})]})}),b.jsx(i6,{editor:m}),b.jsx(z8,{editor:m})]}):b.jsx("div",{className:"h-40 animate-pulse rounded-xl bg-neutral-200/80"})]})}const P8=/<\/?[a-z][^>]*>/i,q8=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),hT=n=>n?P8.test(n)?n:n.split(/\n{2,}/).map(t=>t.trim()?`<p>${t.split(/\n/).map(s=>q8(s.trimEnd())).join("<br />")}</p>`:"<p><br /></p>").join(""):"";function pT({isOpen:n,onClose:e,feature:t,currentUsage:r,limit:s}){const[o,l]=N.useState(!1),u=It(ze.subscriptions.getUserSubscription),d=It(ze.subscriptions.getUserUsage,{});if(!n)return null;const h=async()=>{l(!0),alert("Stripe integration would be implemented here. For demo purposes, this would redirect to payment."),l(!1)},p=["10 AI chatbot questions per month","3 tasks","5 document creations","1 PDF export","3 calendar events","5 file uploads","Basic document editing","Public document sharing"],m=["Unlimited AI chatbot questions","Unlimited tasks","Unlimited document creations","Unlimited PDF exports","Unlimited calendar events","Unlimited file uploads","Advanced collaboration features","Real-time editing with presence","Advanced commenting & suggestions","Audit log access","Priority support","Case management (30 docs, 50MB)","Workspace invitations & roles"],x=(u==null?void 0:u.plan)==="pro"?"Pro":"Free";return b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-950/60 px-4 py-6 backdrop-blur-sm",children:b.jsxs("div",{className:"w-full max-w-4xl overflow-hidden rounded-3xl border border-neutral-200/70 bg-[#fdfcf8] shadow-2xl max-h-[90vh] flex flex-col",children:[b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[b.jsxs("div",{className:"flex items-start justify-between border-b border-neutral-200/70 bg-white/70 px-8 py-6",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.4em] text-neutral-400",children:[b.jsx(si,{className:"h-4 w-4 text-indigo-500"}),"Upgrade"]}),b.jsx("h2",{className:"mt-4 text-3xl font-semibold text-neutral-900",children:"Upgrade to Pro"}),t?b.jsxs("p",{className:"mt-2 text-sm text-neutral-500",children:["You've reached your free tier limit for ",t," (",r,"/",s,"). Unlock more usage by upgrading."]}):b.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Move beyond the basics with unlimited AI research, collaboration tools, and premium case management features."}),b.jsxs("p",{className:"mt-4 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:["Current Plan  ",x]})]}),b.jsx("button",{onClick:e,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700","aria-label":"Close subscription modal",children:b.jsx(Uo,{className:"h-5 w-5"})})]}),d&&b.jsxs("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-8 py-6",children:[b.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Usage Snapshot"}),b.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[{label:"AI Questions",value:`${d.aiQuestions}/10`},{label:"Tasks",value:`${d.tasksCreated}/3`},{label:"Documents",value:`${d.documentsCreated}/5`},{label:"PDF Exports",value:`${d.pdfExports}/1`},{label:"Calendar Events",value:`${d.calendarEvents}/3`},{label:"File Uploads",value:`${d.fileUploads}/5`}].map(v=>b.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 shadow-sm",children:[b.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:v.label}),b.jsx("p",{className:"mt-2 text-lg font-semibold text-neutral-900",children:v.value})]},v.label))})]}),b.jsx("div",{className:"px-8 py-8",children:b.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[b.jsxs("div",{className:"rounded-3xl border border-neutral-200 bg-white/80 p-6 shadow-sm",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Free"}),b.jsx("h3",{className:"mt-2 text-3xl font-semibold text-neutral-900",children:"$0"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"per month"})]}),b.jsx("ul",{className:"mt-6 space-y-3",children:p.map(v=>b.jsxs("li",{className:"flex items-start gap-3 text-sm text-neutral-600",children:[b.jsx(Pc,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),b.jsx("span",{children:v})]},v))}),b.jsx("button",{disabled:!0,className:"mt-6 w-full rounded-full border border-neutral-200 bg-white px-4 py-2 text-sm font-medium text-neutral-400",children:"Current Plan"})]}),b.jsxs("div",{className:"relative rounded-3xl border-2 border-neutral-900 bg-white p-6 shadow-lg",children:[b.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 rounded-full border border-neutral-900 bg-neutral-900 px-4 py-1 text-xs font-semibold uppercase tracking-[0.4em] text-white",children:"Pro"}),b.jsxs("div",{className:"text-center",children:[b.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Professional"}),b.jsx("h3",{className:"mt-2 text-3xl font-semibold text-neutral-900",children:"$30"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"per month"})]}),b.jsx("ul",{className:"mt-6 space-y-3",children:m.map(v=>b.jsxs("li",{className:"flex items-start gap-3 text-sm text-neutral-600",children:[b.jsx(Pc,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),b.jsx("span",{children:v})]},v))}),b.jsx("button",{onClick:h,disabled:o,className:"mt-6 inline-flex w-full items-center justify-center gap-2 rounded-full bg-neutral-900 px-4 py-3 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:opacity-40",children:o?b.jsx("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-neutral-100 border-t-transparent"}):b.jsxs(b.Fragment,{children:[b.jsx(z5,{className:"h-5 w-5"}),"Upgrade to Pro"]})})]})]})})]}),b.jsx("div",{className:"border-t border-neutral-200/70 bg-white/80 px-8 py-4 text-right",children:b.jsx("button",{onClick:e,className:"inline-flex items-center rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Close"})})]})})}function V8({selectedDocumentId:n,onSelectDocument:e}){const[t,r]=N.useState(""),[s,o]=N.useState(!1),[l,u]=N.useState(""),[d,h]=N.useState(!1),[p,m]=N.useState("all"),[x,v]=N.useState(!1),[w,S]=N.useState(null),[C,T]=N.useState(""),[L,R]=N.useState(""),[k,j]=N.useState(null),[H,U]=N.useState(!1),J=It(ze.documents.listUserDocuments)||[],re=It(ze.documents.searchDocuments,t.length>2?{query:t}:"skip")||[],fe=It(ze.folders.listUserFolders)||[],be=It(ze.subscriptions.getUserSubscription),ae=It(ze.subscriptions.checkUsageLimit,{feature:"documentsCreated"}),ce=_t(ze.documents.createDocument),ve=_t(ze.subscriptions.incrementUsage),pe=_t(ze.documents.setDocumentFolder),z=_t(ze.folders.createFolder),D=_t(ze.folders.updateFolder),$=_t(ze.folders.deleteFolder),B=t.length>2?re:J,ee=N.useMemo(()=>B.filter(Boolean).slice().sort((ye,Qe)=>((Qe==null?void 0:Qe.lastModifiedAt)||0)-((ye==null?void 0:ye.lastModifiedAt)||0)),[B]),M=N.useMemo(()=>p==="all"?ee:p==="ungrouped"?ee.filter(ye=>!ye.folderId):ee.filter(ye=>ye.folderId===p),[ee,p]),q=p!=="all"&&p!=="ungrouped"?fe.find(ye=>ye._id===p):null,W=N.useMemo(()=>J.filter(ye=>!(ye!=null&&ye.folderId)).length,[J]),ie=async ye=>{if(ye.preventDefault(),!!l.trim()){if(ae&&!ae.allowed){U(!0);return}try{const Qe=await ce({title:l,content:"",isPublic:d,folderId:q==null?void 0:q._id});(be==null?void 0:be.plan)==="free"&&await ve({feature:"documentsCreated"}),u(""),h(!1),o(!1),e(Qe)}catch(Qe){console.error("Failed to create document",Qe),qe.error("Unable to create document. Please try again.")}}},le=()=>{S(null),T(""),R(""),v(!0)},we=ye=>{const Qe=fe.find(Ut=>Ut._id===ye);Qe&&(S(Qe._id),T(Qe.name),R(Qe.description||""),v(!0))},He=()=>{v(!1),S(null),T(""),R("")},Re=async ye=>{if(ye.preventDefault(),!!C.trim())try{if(w)await D({folderId:w,name:C,description:L}),qe.success("Folder updated");else{const Qe=await z({name:C,description:L});qe.success("Folder created"),m(Qe)}He()}catch(Qe){console.error("Failed to save folder",Qe),qe.error("Unable to save folder")}},de=async ye=>{if(confirm("Deleting a folder keeps the documents but removes their grouping. Continue?"))try{await $({folderId:ye}),p===ye&&m("all"),qe.success("Folder deleted")}catch(Qe){console.error("Failed to delete folder",Qe),qe.error("Unable to delete folder")}},Je=async(ye,Qe)=>{try{await pe({documentId:ye,folderId:Qe??null}),j(null),qe.success(Qe?"Document added to folder":"Document removed from folder")}catch(Ut){console.error("Failed to update folder assignment",Ut),qe.error("Unable to update folder")}};return b.jsxs("aside",{className:"flex w-96 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[b.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[b.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Documents"}),q&&b.jsxs("p",{className:"text-xs text-neutral-500",children:["New documents will be added to ",b.jsx("span",{className:"font-medium",children:q.name})]})]}),b.jsx("button",{onClick:()=>o(!s),className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",children:b.jsx(jo,{className:"h-4 w-4"})})]}),s&&b.jsxs("form",{onSubmit:ie,className:"mb-4 space-y-3 rounded-lg border border-neutral-200 bg-white p-3",children:[b.jsx("input",{type:"text",placeholder:"Document title",value:l,onChange:ye=>u(ye.target.value),className:"w-full rounded-md border border-neutral-200 px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",autoFocus:!0}),b.jsxs("label",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[b.jsx("input",{type:"checkbox",checked:d,onChange:ye=>h(ye.target.checked),className:"rounded border-neutral-300 text-neutral-900 focus:ring-neutral-400"}),"Make public"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"submit",className:"inline-flex flex-1 items-center justify-center rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:"Create"}),b.jsx("button",{type:"button",onClick:()=>o(!1),className:"inline-flex flex-1 items-center justify-center rounded-md border border-neutral-200 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100",children:"Cancel"})]}),ae&&!ae.allowed&&b.jsxs("p",{className:"text-xs text-red-500",children:[ae.reason,". Upgrade to unlock more documents."]})]}),b.jsxs("div",{className:"relative",children:[b.jsx(J5,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-300"}),b.jsx("input",{type:"text",placeholder:"Search documents...",value:t,onChange:ye=>r(ye.target.value),className:"w-full rounded-md border border-neutral-200 bg-white pl-9 pr-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400 focus:ring-0"})]})]}),b.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[b.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"text-sm font-semibold text-neutral-700",children:"Folders"}),b.jsx("p",{className:"text-xs text-neutral-500",children:"Group related documents"})]}),b.jsx("button",{onClick:le,className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:bg-white",children:"New"})]}),x&&b.jsxs("form",{onSubmit:Re,className:"mb-4 space-y-2 rounded-lg border border-neutral-200 bg-white p-3 text-sm",children:[b.jsx("input",{type:"text",value:C,onChange:ye=>T(ye.target.value),placeholder:"Folder name",className:"w-full rounded-md border border-neutral-200 px-3 py-2 outline-none transition focus:border-neutral-400"}),b.jsx("textarea",{value:L,onChange:ye=>R(ye.target.value),placeholder:"Description (optional)",className:"h-16 w-full rounded-md border border-neutral-200 px-3 py-2 outline-none transition focus:border-neutral-400"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{type:"submit",className:"inline-flex flex-1 items-center justify-center rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:w?"Save":"Create"}),b.jsx("button",{type:"button",onClick:He,className:"inline-flex flex-1 items-center justify-center rounded-md border border-neutral-200 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100",children:"Cancel"})]})]}),b.jsxs("div",{className:"space-y-1 text-sm",children:[b.jsxs("button",{onClick:()=>m("all"),className:`flex w-full items-center justify-between rounded-md px-3 py-2 ${p==="all"?"bg-white font-semibold text-neutral-900 shadow-sm":"text-neutral-600 hover:bg-white/50"}`,children:[b.jsx("span",{children:"All documents"}),b.jsx("span",{className:"text-xs text-neutral-500",children:J.length})]}),b.jsxs("button",{onClick:()=>m("ungrouped"),className:`flex w-full items-center justify-between rounded-md px-3 py-2 ${p==="ungrouped"?"bg-white font-semibold text-neutral-900 shadow-sm":"text-neutral-600 hover:bg-white/50"}`,children:[b.jsx("span",{children:"Unsorted"}),b.jsx("span",{className:"text-xs text-neutral-500",children:W})]})]}),b.jsxs("div",{className:"mt-4 space-y-2",children:[fe.length===0&&b.jsx("p",{className:"text-xs text-neutral-500",children:"No folders yet. Create one to start organizing."}),fe.map(ye=>b.jsxs("div",{className:`flex items-center justify-between rounded-md px-3 py-2 text-sm ${p===ye._id?"bg-white shadow-sm":"text-neutral-600 hover:bg-white/60"}`,children:[b.jsxs("button",{onClick:()=>m(ye._id),className:"flex flex-1 items-center gap-2 text-left",children:[b.jsx(qc,{className:"h-4 w-4"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-medium text-neutral-800",children:ye.name}),ye.description&&b.jsx("p",{className:"text-xs text-neutral-500",children:ye.description})]}),b.jsx("span",{className:"text-xs text-neutral-500",children:ye.documentCount})]}),b.jsxs("div",{className:"flex gap-1 pl-2",children:[b.jsx("button",{onClick:()=>we(ye._id),className:"rounded-md border border-neutral-200 p-1 text-neutral-500 transition hover:bg-white",title:"Rename folder",children:b.jsx(V0,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>de(ye._id),className:"rounded-md border border-neutral-200 p-1 text-red-500 transition hover:bg-white",title:"Delete folder",children:b.jsx(Ho,{className:"h-4 w-4"})})]})]},ye._id))]})]}),b.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:M.length===0?b.jsxs("div",{className:"rounded-lg border border-dashed border-neutral-200 bg-white/70 px-4 py-10 text-center text-neutral-400",children:[b.jsx(qc,{className:"mx-auto mb-3 h-6 w-6"}),b.jsx("p",{className:"text-sm",children:t.length>2?"No documents match your search":"Create a document to get started"})]}):b.jsx("div",{className:"space-y-2",children:M.map(ye=>{const Qe=n===ye._id;return b.jsxs("div",{className:`rounded-lg border px-3 py-3 ${Qe?"border-neutral-400 bg-white shadow-sm":"border-transparent bg-transparent hover:border-neutral-200 hover:bg-white"}`,children:[b.jsxs("button",{className:"flex w-full items-start justify-between text-left",onClick:()=>e(ye._id),children:[b.jsxs("div",{className:"min-w-0 flex-1",children:[b.jsx("h4",{className:"truncate text-sm font-medium text-neutral-800",children:ye.title}),b.jsx("p",{className:"mt-1 text-xs text-neutral-400",children:new Date(ye.lastModifiedAt).toLocaleDateString()})]}),b.jsx("div",{className:"ml-3 flex items-center",children:ye.isPublic?b.jsx(F5,{className:"h-4 w-4 text-neutral-500",title:"Public"}):b.jsx(Y5,{className:"h-4 w-4 text-neutral-300",title:"Private"})})]}),b.jsxs("div",{className:"mt-3",children:[b.jsx("button",{onClick:()=>j(k===ye._id?null:ye._id),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-900",children:ye.folderId?"Move to a different folder":"Add to folder"}),k===ye._id&&b.jsxs("div",{className:"mt-2 space-y-1 rounded-md border border-neutral-200 bg-white p-2 text-sm",children:[b.jsx("button",{onClick:()=>Je(ye._id,null),className:"w-full rounded-md px-2 py-1 text-left text-neutral-600 transition hover:bg-neutral-100",children:"No folder"}),fe.length===0&&b.jsx("p",{className:"px-2 py-1 text-xs text-neutral-400",children:"Create a folder to organize this document"}),fe.map(Ut=>b.jsx("button",{onClick:()=>Je(ye._id,Ut._id),className:`w-full rounded-md px-2 py-1 text-left transition ${ye.folderId===Ut._id?"bg-neutral-900 text-white":"text-neutral-600 hover:bg-neutral-100"}`,children:Ut.name},Ut._id))]})]})]},ye._id)})})}),b.jsx(pT,{isOpen:H,onClose:()=>U(!1),feature:ae&&!ae.allowed?"document creation":void 0,currentUsage:ae==null?void 0:ae.currentUsage,limit:ae==null?void 0:ae.limit})]})}function F8({documentId:n,onDocumentChange:e,currentUserName:t}){const[r,s]=N.useState(""),[o,l]=N.useState(""),[u,d]=N.useState(!1),[h,p]=N.useState(!1),[m,x]=N.useState(!1),[v,w]=N.useState(!1),[S,C]=N.useState(""),[T,L]=N.useState(!1),[R,k]=N.useState(null),[j,H]=N.useState(!1),U=N.useRef(null),J=N.useRef(""),re=N.useRef(""),fe=It(ze.documents.getDocument,n?{documentId:n}:"skip"),be=It(ze.documents.getDocumentVersions,n?{documentId:n}:"skip")||[],ae=It(ze.comments.getDocumentComments,n?{documentId:n}:"skip")||[],ce=_t(ze.documents.updateDocument),ve=_t(ze.documents.generateShareableLink),pe=_t(ze.documents.rollbackToVersion),z=_t(ze.comments.addComment),D=_t(ze.documents.deleteDocument);N.useEffect(()=>{if(fe){const de=hT(fe.content);s(de),l(fe.title),J.current=de,re.current=fe.title,d(!1),L(!1),k(new Date(fe.lastModifiedAt))}},[fe]);const $=N.useCallback(async()=>{if(!n||!T)return;const de=r!==J.current,Je=o!==re.current;if(!de&&!Je){L(!1);return}H(!0);try{await ce({documentId:n,title:Je?o:void 0,content:de?r:void 0,changeDescription:"Auto-saved changes"}),J.current=r,re.current=o,L(!1),k(new Date)}catch(ye){console.error("Auto-save failed:",ye),qe.error("Auto-save failed")}finally{H(!1)}},[n,r,o,T,ce]);N.useEffect(()=>(T&&(U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{$()},3e4)),()=>{U.current&&clearTimeout(U.current)}),[T,$]);const B=N.useCallback(de=>{s(de),de!==J.current&&L(!0)},[J]),ee=N.useMemo(()=>{if(!r)return"";if(typeof window>"u")return r.replace(/<[^>]+>/g," ").trim();const de=document.createElement("div");return de.innerHTML=r,de.textContent||de.innerText||""},[r]),M=de=>{l(de),d(!0),L(!0)},q=async()=>{if(n)try{await ce({documentId:n,title:o,content:r,changeDescription:"Manual save"}),J.current=r,re.current=o,d(!1),L(!1),k(new Date),qe.success("Document saved successfully")}catch(de){qe.error("Failed to save document"),console.error("Save error:",de)}},W=async()=>{if(n)try{const de=await ve({documentId:n}),Je=`${window.location.origin}/shared/${de}`;await navigator.clipboard.writeText(Je),qe.success("Shareable link copied to clipboard")}catch(de){qe.error("Failed to generate shareable link"),console.error("Share error:",de)}},ie=async de=>{if(n)try{await pe({documentId:n,version:de}),qe.success(`Rolled back to version ${de}`),p(!1),L(!1)}catch(Je){qe.error("Failed to rollback document"),console.error("Rollback error:",Je)}},le=async de=>{if(de.preventDefault(),!(!n||!S.trim()))try{await z({documentId:n,content:S}),C(""),qe.success("Comment added")}catch(Je){qe.error("Failed to add comment"),console.error("Comment error:",Je)}},we=async()=>{if(n&&confirm("Are you sure you want to delete this document? This action cannot be undone."))try{await D({documentId:n}),e(null),qe.success("Document deleted")}catch(de){qe.error("Failed to delete document"),console.error("Delete error:",de)}},He=()=>{if(!fe)return;const de=window.open("","_blank");de&&(de.document.write(`
        <html>
          <head>
            <title>${fe.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content { font-size: 16px; line-height: 1.75; color: #27272a; }
              .content h1, .content h2, .content h3, .content h4 { margin-top: 32px; }
              .content ul, .content ol { padding-left: 20px; }
              .content blockquote { border-left: 4px solid #d4d4d8; padding-left: 16px; color: #52525b; }
              .content pre { background: #111827; color: #f8fafc; padding: 16px; border-radius: 12px; }
              .content code { background: #f4f4f5; padding: 4px 6px; border-radius: 6px; }
            </style>
          </head>
          <body>
            <h1>${fe.title}</h1>
            <div class="content">${r}</div>
          </body>
        </html>
      `),de.document.close(),de.print())},Re=de=>b.jsxs("div",{className:"flex h-full overflow-hidden bg-[#fdfcf8]",children:[b.jsx(V8,{selectedDocumentId:n,onSelectDocument:e}),b.jsx("div",{className:"flex-1 overflow-hidden",children:de})]});return Re(n?fe?b.jsxs("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:[b.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/80 px-10 py-5 backdrop-blur",children:b.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[b.jsxs("div",{className:"min-w-0 flex-1",children:[u?b.jsx("input",{type:"text",value:o,onChange:de=>M(de.target.value),className:"mt-3 w-full border-none bg-transparent text-3xl font-semibold text-neutral-900 outline-none focus:ring-1 focus:ring-neutral-400",onBlur:q,onKeyDown:de=>de.key==="Enter"&&q(),autoFocus:!0}):b.jsx("h1",{className:"mt-3 cursor-text text-3xl font-semibold text-neutral-900 transition hover:text-neutral-700",onClick:()=>d(!0),children:fe.title}),b.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs text-neutral-500",children:[b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),R?`Last edited ${R.toLocaleString()}`:"Never saved"]}),b.jsx("span",{className:"text-neutral-300",children:""}),b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx(Z1,{className:"h-4 w-4 text-neutral-400"}),t?`${t}`:"Shared workspace"]}),b.jsx("span",{className:"text-neutral-300",children:""}),b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx(P5,{className:"h-4 w-4 text-neutral-400"}),fe.isPublic?"Public page":"Private page"]}),j&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-neutral-300",children:""}),b.jsx("span",{className:"text-neutral-500",children:"Auto-saving"})]})]})]}),b.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[b.jsxs("button",{onClick:()=>p(!h),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${h?"bg-white shadow-sm":"bg-transparent"}`,children:[b.jsx(Ec,{className:"h-4 w-4"}),"Versions"]}),b.jsxs("button",{onClick:()=>x(!m),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${m?"bg-white shadow-sm":"bg-transparent"}`,children:[b.jsx(Fg,{className:"h-4 w-4"}),"Comments (",ae.length,")"]}),b.jsxs("button",{onClick:()=>w(!v),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium transition hover:bg-white ${v?"border-purple-300 bg-purple-50 text-purple-700 shadow-sm":"text-neutral-600 hover:text-neutral-700"}`,children:[b.jsx(si,{className:"h-4 w-4"}),"AI Assistant"]}),b.jsxs("button",{onClick:He,className:"inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700",children:[b.jsx(wf,{className:"h-4 w-4"}),"Export"]}),b.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-1.5 font-medium text-neutral-100 transition hover:bg-neutral-700",children:[b.jsx(yD,{className:"h-4 w-4"}),"Share"]}),b.jsxs("button",{onClick:we,className:"inline-flex items-center gap-2 rounded-md border border-red-200 bg-red-50 px-3 py-1.5 font-medium text-red-600 transition hover:bg-red-100",children:[b.jsx(Ho,{className:"h-4 w-4"}),"Delete"]})]})]})}),b.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[b.jsx("div",{className:"flex-1 overflow-y-auto",children:b.jsxs("div",{className:"mx-auto w-full max-w-4xl px-10 pb-24 pt-12",children:[b.jsxs("div",{className:"mb-10 flex items-center gap-3 text-sm text-neutral-500",children:[b.jsx(Z1,{className:"h-5 w-5 text-neutral-400"}),b.jsx("span",{children:"Collaborate with your team and keep every update in one place. Use / to use styling"})]}),b.jsx($8,{value:r,onChange:B,placeholder:"Type '/' for commands or start writing..."},n??"new-document")]})}),h&&b.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-[#f7f6f3]",children:[b.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:b.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Document versions"})}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:be.map(de=>b.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("span",{className:"font-medium text-neutral-700",children:["Version ",de.version]}),de.version!==fe.version&&b.jsx("button",{onClick:()=>ie(de.version),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-800",children:"Restore"})]}),b.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:new Date(de.createdAt).toLocaleString()}),de.changeDescription&&b.jsx("p",{className:"mt-2 text-xs text-neutral-600",children:de.changeDescription})]},de._id))})]}),m&&b.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-[#f7f6f3]",children:[b.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:b.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Comments"})}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:ae.map(de=>{var Je,ye,Qe;return b.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-900 text-xs font-semibold text-neutral-100",children:((ye=(Je=de.author)==null?void 0:Je.name)==null?void 0:ye[0])||"U"}),b.jsxs("div",{children:[b.jsx("p",{className:"font-medium text-neutral-700",children:((Qe=de.author)==null?void 0:Qe.name)||"Unknown user"}),b.jsx("p",{className:"text-xs text-neutral-500",children:new Date(de.createdAt).toLocaleString()})]})]}),b.jsx("p",{className:"mt-3 text-sm leading-relaxed text-neutral-700",children:de.content})]},de._id)})}),b.jsxs("form",{onSubmit:le,className:"border-t border-neutral-200 px-4 py-3",children:[b.jsx("textarea",{value:S,onChange:de=>C(de.target.value),placeholder:"Leave a note...",className:"w-full resize-none rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",rows:3}),b.jsx("button",{type:"submit",disabled:!S.trim(),className:"mt-3 w-full rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:"Add comment"})]})]}),b.jsx(ND,{isOpen:v,onClose:()=>w(!1),documentId:n,documentContent:ee})]}),T&&b.jsxs("div",{className:"flex items-center justify-between border-t border-neutral-200 bg-[#f7f6f3]/90 px-10 py-3 text-sm text-neutral-600",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{children:"Unsaved changes"}),j&&b.jsx("span",{className:"text-neutral-500",children:"Auto-saving in progress"})]}),b.jsxs("button",{onClick:q,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[b.jsx(Pc,{className:"h-4 w-4"}),"Save now"]})]})]}):b.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#fdfcf8]",children:b.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-neutral-300 border-t-neutral-700"})}):b.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#fdfcf8]",children:b.jsxs("div",{className:"text-center",children:[b.jsx(wf,{className:"mx-auto mb-4 h-16 w-16 text-neutral-300"}),b.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"No document selected"}),b.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Choose a page from the sidebar to begin editing."})]})}))}function G8({documentId:n}){const[e,t]=N.useState(!1),[r,s]=N.useState({title:"",description:"",priority:"medium",dueDate:"",startTime:"",endTime:"",location:""}),[o,l]=N.useState(null),[u,d]=N.useState(!1),[h,p]=N.useState("priority"),[m,x]=N.useState({description:"",priority:"medium",dueDate:"",startTime:"",endTime:"",location:""}),v=It(ze.tasks.getUserTasks,{includeCompleted:!0})||[],w=It(ze.tasks.getDocumentTasks,n?{documentId:n}:"skip")||[],S=_t(ze.tasks.createTask),C=_t(ze.tasks.updateTaskStatus),T=_t(ze.tasks.updateTaskDetails),L=_t(ze.tasks.deleteTask),R=B=>B?new Date(B).getTime():void 0,k=B=>B?new Date(B).toISOString().slice(0,16):"",j=B=>B?new Date(B).toLocaleDateString(void 0,{dateStyle:"medium"}):"No due date",H=B=>B?new Date(B).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null,U=async B=>{if(B.preventDefault(),!!r.title.trim())try{await S({title:r.title,description:r.description||void 0,priority:r.priority,dueDate:R(r.dueDate),startTime:R(r.startTime),endTime:R(r.endTime),location:r.location||void 0,documentId:n||void 0}),s({title:"",description:"",priority:"medium",dueDate:"",startTime:"",endTime:"",location:""}),t(!1),qe.success("Goal created successfully")}catch(ee){qe.error("Failed to create task"),console.error("Create task error:",ee)}},J=B=>{l(B._id),x({description:B.description||"",priority:B.priority,dueDate:B.dueDate?new Date(B.dueDate).toISOString().slice(0,10):"",startTime:k(B.startTime),endTime:k(B.endTime),location:B.location||""})},re=async B=>{if(B.preventDefault(),!!o)try{await T({taskId:o,description:m.description||void 0,priority:m.priority,dueDate:R(m.dueDate),startTime:R(m.startTime),endTime:R(m.endTime),location:m.location||void 0}),qe.success("Goal updated"),l(null)}catch(ee){console.error("Update task error:",ee),qe.error("Failed to update task")}},fe=async B=>{if(window.confirm("Delete this task? This cannot be undone."))try{await L({taskId:B}),qe.success("Goal deleted"),o===B&&l(null)}catch(M){console.error("Delete task error:",M),qe.error("Failed to delete task")}},be=async(B,ee,M)=>{try{await C({taskId:B,status:ee}),qe.success(M||"Goal status updated")}catch(q){qe.error("Failed to update task status"),console.error("Update task error:",q)}},ae=async B=>{await be(B,"in_progress","Goal restored to In Progress")},ce=B=>{switch(B){case"high":return"text-rose-600 bg-rose-50 border border-rose-200";case"medium":return"text-amber-600 bg-amber-50 border border-amber-200";case"low":return"text-emerald-600 bg-emerald-50 border border-emerald-200";default:return"text-neutral-600 bg-neutral-50 border border-neutral-200"}},ve=B=>{switch(B){case"completed":return"text-emerald-600 bg-emerald-50";case"in_progress":return"text-blue-600 bg-blue-50";case"todo":return"text-neutral-500 bg-neutral-100";default:return"text-neutral-500 bg-neutral-100"}},pe=n?w:v,z=pe.filter(B=>B.status==="completed"),D={high:0,medium:1,low:2},$=pe.filter(B=>B.status!=="completed").slice().sort((B,ee)=>{if(h==="created")return ee.createdAt-B.createdAt;if(h==="status"){const ie={in_progress:0,todo:1,completed:2},le=ie[B.status]-ie[ee.status];if(le!==0)return le}const M=D[B.priority]-D[ee.priority];if(M!==0)return M;const q=B.dueDate||Number.MAX_SAFE_INTEGER,W=ee.dueDate||Number.MAX_SAFE_INTEGER;return q-W});return b.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:b.jsx("div",{className:"flex-1 overflow-hidden",children:b.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[b.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Goals":"My Goals"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Track progress and collaborate on goals connected to this document.":"Manage your personal and shared objectives across the workspace."})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-2 text-sm font-medium text-neutral-600",children:[b.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-neutral-400",children:"Sort by"}),b.jsxs("select",{value:h,onChange:B=>p(B.target.value),className:"rounded-full border border-neutral-200 bg-white px-3 py-1 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",children:[b.jsx("option",{value:"priority",children:"Priority"}),b.jsx("option",{value:"created",children:"Creation date"}),b.jsx("option",{value:"status",children:"Status"})]})]}),b.jsxs("button",{onClick:()=>d(!u),className:`inline-flex items-center gap-2 rounded-full border px-5 py-2 text-sm font-medium transition ${u?"border-neutral-900 text-neutral-900":"border-neutral-200 text-neutral-600 hover:border-neutral-300 hover:text-neutral-800"}`,children:["Archive",z.length>0&&b.jsx("span",{className:"rounded-full bg-neutral-900 px-2 py-0.5 text-xs font-semibold text-white",children:z.length})]}),b.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[b.jsx(jo,{className:"h-4 w-4"}),"New Goal"]})]})]})}),b.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[e&&b.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-6",children:b.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Goal Title"}),b.jsx("input",{type:"text",value:r.title,onChange:B=>s({...r,title:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"Outline the goal...",required:!0})]}),b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),b.jsx("textarea",{value:r.description,onChange:B=>s({...r,description:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,placeholder:"Provide helpful context for collaborators..."})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),b.jsxs("select",{value:r.priority,onChange:B=>s({...r,priority:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",children:[b.jsx("option",{value:"low",children:"Low"}),b.jsx("option",{value:"medium",children:"Medium"}),b.jsx("option",{value:"high",children:"High"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),b.jsx("input",{type:"date",value:r.dueDate,onChange:B=>s({...r,dueDate:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start Time"}),b.jsx("input",{type:"datetime-local",value:r.startTime,onChange:B=>s({...r,startTime:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End Time"}),b.jsx("input",{type:"datetime-local",value:r.endTime,onChange:B=>s({...r,endTime:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),b.jsx("input",{type:"text",value:r.location,onChange:B=>s({...r,location:B.target.value}),placeholder:"Add a room, link, or address",className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),b.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[b.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[b.jsx(q0,{className:"h-4 w-4"}),"Create Goal"]}),b.jsx("button",{type:"button",onClick:()=>t(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:"Cancel"})]})]})}),b.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:[$.length===0?b.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[b.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:b.jsx(nC,{className:"h-8 w-8 text-neutral-400"})}),b.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No goals yet"}),b.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:n?"Create goals linked to this document to align your team and track progress.":"Capture your next objectives and assign work to teammates to keep momentum."}),b.jsxs("button",{onClick:()=>t(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[b.jsx(jo,{className:"h-4 w-4"}),"Add your first goal"]})]}):b.jsx("div",{className:"space-y-4",children:$.map(B=>{const ee=o===B._id;return b.jsxs("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-5 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:[b.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[b.jsxs("div",{className:"flex-1",children:[b.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[b.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:B.title}),b.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${ce(B.priority)}`,children:["Priority  ",B.priority.charAt(0).toUpperCase()+B.priority.slice(1)]})]}),B.description&&b.jsx("p",{className:"mt-3 text-sm text-neutral-600",children:B.description}),b.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs font-medium uppercase tracking-[0.2em] text-neutral-400",children:[B.creator&&b.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[b.jsx(J1,{className:"h-4 w-4 text-neutral-400"}),"Created by ",B.creator.name]}),B.assignee&&b.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[b.jsx(J1,{className:"h-4 w-4 text-neutral-400"}),"Assigned to ",B.assignee.name]}),b.jsxs("div",{className:"inline-flex flex-wrap items-center gap-2 text-neutral-500 normal-case tracking-normal",children:[b.jsxs("span",{className:"inline-flex items-center gap-1",children:[b.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),j(B.dueDate)]}),b.jsxs("span",{className:"ml-1 flex gap-1",children:[b.jsx("button",{onClick:()=>J(B),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-neutral-700",title:"Edit task",children:b.jsx(V0,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>fe(B._id),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-red-500",title:"Delete task",children:b.jsx(Ho,{className:"h-4 w-4"})})]})]}),B.startTime&&b.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[b.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),"Start  ",H(B.startTime)]}),B.endTime&&b.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[b.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),"End  ",H(B.endTime)]}),B.location&&b.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[b.jsx(eD,{className:"h-4 w-4 text-neutral-400"}),B.location]})]})]}),b.jsxs("div",{className:"flex flex-col items-stretch gap-3 md:w-56",children:[b.jsx("span",{className:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${ve(B.status)}`,children:B.status.replace("_"," ").replace(/\b\w/g,M=>M.toUpperCase())}),b.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[b.jsx("button",{onClick:()=>be(B._id,"todo"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${B.status==="todo"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"To Do"}),b.jsx("button",{onClick:()=>be(B._id,"in_progress"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${B.status==="in_progress"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"In Progress"}),b.jsx("button",{onClick:()=>be(B._id,"completed"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${B.status==="completed"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"Done"})]})]})]}),ee&&b.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-[#f7f6f3]/60 px-4 py-4",children:[b.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[b.jsx("h4",{className:"text-sm font-semibold text-neutral-700",children:"Edit Goal"}),b.jsx("button",{onClick:()=>l(null),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-200",title:"Close editor",children:b.jsx(Uo,{className:"h-4 w-4"})})]}),b.jsxs("form",{onSubmit:re,className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),b.jsx("textarea",{value:m.description,onChange:M=>x({...m,description:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",rows:3})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),b.jsxs("select",{value:m.priority,onChange:M=>x({...m,priority:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",children:[b.jsx("option",{value:"low",children:"Low"}),b.jsx("option",{value:"medium",children:"Medium"}),b.jsx("option",{value:"high",children:"High"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),b.jsx("input",{type:"date",value:m.dueDate,onChange:M=>x({...m,dueDate:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start Time"}),b.jsx("input",{type:"datetime-local",value:m.startTime,onChange:M=>x({...m,startTime:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End Time"}),b.jsx("input",{type:"datetime-local",value:m.endTime,onChange:M=>x({...m,endTime:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),b.jsxs("div",{className:"md:col-span-2",children:[b.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),b.jsx("input",{type:"text",value:m.location,onChange:M=>x({...m,location:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",placeholder:"Add a room, link, or address"})]}),b.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[b.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800",children:"Save changes"}),b.jsx("button",{type:"button",onClick:()=>l(null),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300",children:"Cancel"})]})]})]})]},B._id)})}),u&&b.jsxs("div",{className:"mt-8 rounded-2xl border border-neutral-200 bg-white px-5 py-5 shadow-sm",children:[b.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Archived Goals"}),b.jsx("p",{className:"text-sm text-neutral-500",children:"Goals marked as done are stored here. Restore them anytime."})]}),b.jsx("button",{onClick:()=>d(!1),className:"rounded-full border border-neutral-200 px-3 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",children:"Close"})]}),z.length===0?b.jsx("div",{className:"rounded-xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-4 py-6 text-center text-sm text-neutral-500",children:"No archived goals yet."}):b.jsx("div",{className:"space-y-3",children:z.map(B=>b.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 text-sm text-neutral-700 shadow-sm",children:b.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-base font-semibold text-neutral-900",children:B.title}),b.jsxs("p",{className:"text-xs text-neutral-500",children:["Completed on"," ",B.dueDate?new Date(B.dueDate).toLocaleDateString():new Date(B.createdAt).toLocaleDateString()]}),B.description&&b.jsx("p",{className:"mt-2 text-sm text-neutral-600",children:B.description})]}),b.jsx("button",{onClick:()=>ae(B._id),className:"inline-flex items-center justify-center rounded-full border border-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-neutral-900 transition hover:bg-neutral-900 hover:text-white",children:"Restore"})]})},B._id))})]})]})]})]})})})}function K8({selectedCaseId:n,onCaseSelect:e}){const[t,r]=N.useState(!1),[s,o]=N.useState(""),[l,u]=N.useState(""),[d,h]=N.useState(null),[p,m]=N.useState(""),[x,v]=N.useState(""),[w,S]=N.useState(!1),[C,T]=N.useState([]),[L,R]=N.useState(""),[k,j]=N.useState(!1),[H,U]=N.useState(!1),J=N.useRef(null),re=N.useRef(null),fe=It(ze.cases.getUserCases)||[],be=It(ze.cases.getCase,n?{caseId:n}:"skip"),ae=It(ze.cases.getCaseDocuments,n?{caseId:n}:"skip")||[],ce=It(ze.cases.getCaseMessages,n?{caseId:n}:"skip"),ve=It(ze.documents.listUserDocuments)||[],pe=It(ze.files.getCaseFiles,n?{caseId:n}:"skip")||[],z=_t(ze.cases.createCase),D=_t(ze.cases.updateCase),$=_t(ze.cases.deleteCase),B=_t(ze.cases.addDocumentToCase),ee=_t(ze.cases.removeDocumentFromCase),M=xf(ze.cases.sendMessageToCaseAI),q=_t(ze.files.generateUploadUrl),W=xf(ze.fileExtraction.convertUploadToDocument),ie=_t(ze.files.deleteFile);N.useEffect(()=>{if(!n){T([]),R("");return}},[n]),N.useEffect(()=>{if(!ce)return;const K=[...ce].sort((Ee,Ye)=>Ee.timestamp-Ye.timestamp).map(Ee=>({id:String(Ee._id??Ee.id??Ee.timestamp),role:Ee.isAI?"assistant":"user",text:Ee.content,createdAt:Ee.timestamp,sources:[]}));T(K)},[ce]);const le=C.length?`${C[C.length-1].id}-${C[C.length-1].pending??!1}`:"none";N.useEffect(()=>{w&&J.current&&J.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[le,w]);const we=async K=>{if(K.preventDefault(),!!s.trim())try{const Ee=await z({name:s,description:l||void 0});e(Ee),o(""),u(""),r(!1),qe.success("Case created successfully")}catch(Ee){qe.error("Failed to create case"),console.error("Create case error:",Ee)}},He=async K=>{try{await D({caseId:K,name:p,description:x||void 0}),h(null),qe.success("Case updated successfully")}catch(Ee){qe.error("Failed to update case"),console.error("Update case error:",Ee)}},Re=async(K,Ee)=>{if(confirm(`Are you sure you want to delete the case "${Ee}"? This will remove all documents from the case but won't delete the documents themselves.`))try{await $({caseId:K}),n===K&&e(null),qe.success("Case deleted successfully")}catch(Ye){qe.error("Failed to delete case"),console.error("Delete case error:",Ye)}},de=async K=>{if(n)try{await B({caseId:n,documentId:K}),qe.success("Document added to case")}catch(Ee){qe.error(Ee.message||"Failed to add document to case"),console.error("Add document error:",Ee)}},Je=async K=>{if(n)try{await ee({caseId:n,documentId:K}),qe.success("Document removed from case")}catch(Ee){qe.error("Failed to remove document from case"),console.error("Remove document error:",Ee)}},ye=async K=>{var Be;if(K==null||K.preventDefault(),!n)return;const Ee=L.trim();if(!Ee||ae.length===0&&pe.length===0)return;const Ye={id:`temp-${Date.now()}`,role:"user",text:Ee,createdAt:Date.now(),sources:[],pending:!0};T(lt=>[...lt,Ye]),R(""),j(!0),(Be=J.current)==null||Be.scrollIntoView({behavior:"smooth"});try{await M({caseId:n,content:Ee})}catch(lt){T(nt=>nt.filter(wn=>wn.id!==Ye.id)),qe.error((lt==null?void 0:lt.message)||"Failed to send message to Case AI")}finally{j(!1)}},Qe=async K=>{var Be;if(!n)return;const Ee=(Be=K.target.files)==null?void 0:Be[0];if(!Ee)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Ee.type)){qe.error("Only PDF or Word files can be uploaded"),K.target.value="";return}if(Ee.size>15*1024*1024){qe.error("File size must be less than 15MB"),K.target.value="";return}U(!0);try{const lt=await q(),nt=await fetch(lt,{method:"POST",headers:{"Content-Type":Ee.type},body:Ee});if(!nt.ok)throw new Error("Upload failed");const{storageId:wn}=await nt.json(),Bt=await W({storageId:wn,name:Ee.name,type:Ee.type,size:Ee.size,caseId:n});if(Bt.status==="ok")qe.success("File converted into a case document. Review it under Case Documents.");else throw new Error(Bt.message||"Could not convert file.")}catch(lt){console.error("Case file upload error",lt),qe.error((lt==null?void 0:lt.message)||"Failed to upload file")}finally{re.current&&(re.current.value=""),U(!1)}},Ut=async(K,Ee)=>{if(confirm(`Delete the file "${Ee}" from this case? This cannot be undone.`))try{await ie({fileId:K}),qe.success("File deleted")}catch(Ye){console.error("Delete case file error",Ye),qe.error("Failed to delete file")}},Lt=ve.filter(K=>K&&!K.caseId&&!ae.some(Ee=>Ee._id===K._id)),En=((be==null?void 0:be.documentCount)??ae.length)>=30,Ot=ae.length>0||pe.length>0,on=K=>{if(K===0)return"0 B";const Ee=1024,Ye=["B","KB","MB","GB"],Be=Math.floor(Math.log(K)/Math.log(Ee));return parseFloat((K/Math.pow(Ee,Be)).toFixed(2))+" "+Ye[Be]},Cn=K=>{if(!K)return"";const Ee=K.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return Ee.length>140?`${Ee.slice(0,140)}`:Ee};return b.jsx("div",{className:"flex h-full flex-col bg-[#fdfcf8]",children:b.jsx("div",{className:"flex-1 overflow-y-auto",children:b.jsxs("div",{className:"mx-auto flex min-h-full w-full max-w-6xl flex-col gap-6 px-6 py-8",children:[b.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:"Organize Your Matters"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Group related documents, collaborate with your team, and unlock AI insights per case."})]}),b.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[b.jsx(jo,{className:"h-4 w-4"}),"New Case"]})]})}),b.jsxs("div",{className:"flex flex-1 min-h-0 flex-col gap-6 lg:flex-row",children:[b.jsxs("div",{className:"flex w-full flex-col rounded-3xl border border-neutral-200/70 bg-white shadow-sm lg:max-w-xs",children:[b.jsx("div",{className:"border-b border-neutral-200/70 px-5 py-5",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Cases"}),b.jsxs("p",{className:"mt-1 text-sm text-neutral-500",children:[fe.length," active"]})]}),b.jsx("button",{onClick:()=>r(!0),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",title:"Create case",children:b.jsx(jo,{className:"h-4 w-4"})})]})}),t&&b.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-5 py-5",children:b.jsxs("form",{onSubmit:we,className:"space-y-3",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Case Name"}),b.jsx("input",{type:"text",value:s,onChange:K=>o(K.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"e.g. Johnson vs. State",autoFocus:!0,required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),b.jsx("textarea",{value:l,onChange:K=>u(K.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2,placeholder:"Optional context or notes"})]}),b.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-100 transition hover:bg-neutral-700",children:[b.jsx(Pc,{className:"h-3 w-3"}),"Save"]}),b.jsxs("button",{type:"button",onClick:()=>r(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:[b.jsx(Uo,{className:"h-3 w-3"}),"Cancel"]})]})]})}),b.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-5",children:fe.length===0?b.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-4 py-12 text-center",children:[b.jsx(qc,{className:"h-10 w-10 text-neutral-400"}),b.jsx("h3",{className:"mt-4 text-sm font-semibold text-neutral-900",children:"No cases yet"}),b.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Create your first case to start organizing documents and discussions."})]}):b.jsx("div",{className:"space-y-3",children:fe.map(K=>b.jsx("div",{className:`group rounded-2xl border px-4 py-4 transition ${n===K._id?"border-neutral-900 bg-neutral-900/90 text-neutral-100 shadow-sm":"border-neutral-200 bg-white hover:border-neutral-300 hover:shadow-md"}`,onClick:()=>e(K._id),children:b.jsx("div",{className:"flex items-start justify-between gap-3",children:b.jsx("div",{className:"min-w-0 flex-1",children:d===K._id?b.jsxs("div",{className:"space-y-2",onClick:Ee=>Ee.stopPropagation(),children:[b.jsx("input",{type:"text",value:p,onChange:Ee=>m(Ee.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"}),b.jsx("textarea",{value:x,onChange:Ee=>v(Ee.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>He(K._id),className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-neutral-900 text-neutral-100 transition hover:bg-neutral-700",children:b.jsx(Pc,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>h(null),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:b.jsx(Uo,{className:"h-4 w-4"})})]})]}):b.jsxs("div",{className:"space-y-2",children:[b.jsx("h4",{className:`truncate text-sm font-semibold ${n===K._id?"text-neutral-100":"text-neutral-900"}`,children:K.name}),K.description&&b.jsx("p",{className:`line-clamp-2 text-xs ${n===K._id?"text-neutral-200/90":"text-neutral-500"}`,children:K.description}),b.jsxs("div",{className:`flex items-center justify-between text-[11px] uppercase tracking-[0.25em] ${n===K._id?"text-neutral-200":"text-neutral-400"}`,children:[b.jsxs("span",{children:[K.documentCount,"/30 docs "," ",on(K.totalSize),"/50MB"]}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),h(K._id),m(K.name),v(K.description||"")},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===K._id?"border-neutral-700 text-neutral-200 hover:border-neutral-500":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,title:"Edit case",children:b.jsx(lD,{className:"h-3.5 w-3.5"})}),b.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),Re(K._id,K.name)},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===K._id?"border-neutral-700 text-rose-200 hover:border-rose-400":"border-neutral-200 text-rose-500 hover:border-rose-300 hover:text-rose-600"}`,title:"Delete case",children:b.jsx(Ho,{className:"h-3.5 w-3.5"})})]})]})]})})})},K._id))})})]}),b.jsx("div",{className:"flex-1 overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:be?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[b.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-5",children:b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-neutral-900",children:be.name}),be.description&&b.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:be.description}),b.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[b.jsxs("span",{children:[be.documentCount,"/30 Documents"]}),b.jsx("span",{children:""}),b.jsxs("span",{children:[on(be.totalSize),"/50MB Used"]}),be.documentCount>=30&&b.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-600",children:[b.jsx(P0,{className:"h-4 w-4"}),"Limit Reached"]})]})]}),b.jsxs("button",{onClick:()=>S(!w),className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition ${w?"border-indigo-400 bg-indigo-50 text-indigo-600":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:[b.jsx(si,{className:"h-4 w-4"}),"Case AI Chat"]})]})}),b.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[b.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[b.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200/60 px-5 py-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case Documents"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Documents linked to this case and analyzed by AI."})]}),b.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[ae.length,"/30"]})]}),b.jsx("div",{className:"max-h-[360px] space-y-3 overflow-y-auto px-5 py-4",children:ae.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/70 px-4 py-8 text-center",children:[b.jsx(yh,{className:"h-10 w-10 text-neutral-400"}),b.jsx("p",{className:"mt-3 text-sm font-semibold text-neutral-900",children:"No documents linked"}),b.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Use the Document Library to attach existing docs."})]}):ae.map(K=>b.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3 shadow-sm",children:[b.jsxs("div",{className:"min-w-0 flex-1",children:[b.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:K.title}),K.content&&b.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:Cn(K.content)}),K.lastModifiedAt&&b.jsxs("p",{className:"mt-1 text-[11px] uppercase tracking-[0.2em] text-neutral-400",children:["Updated"," ",new Date(K.lastModifiedAt).toLocaleDateString()]})]}),b.jsx("button",{onClick:()=>Je(String(K._id)),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-rose-200 text-rose-500 transition hover:border-rose-400 hover:text-rose-600",title:"Remove from case",children:b.jsx(Ho,{className:"h-4 w-4"})})]},K._id))})]}),b.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[b.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200/60 px-5 py-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Document Library"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Select personal or shared documents to add them to this case."})]}),En&&b.jsx("span",{className:"rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-700",children:"Limit Reached"})]}),b.jsx("div",{className:"max-h-[360px] space-y-3 overflow-y-auto px-5 py-4",children:Lt.length===0?b.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/70 px-4 py-8 text-center text-sm text-neutral-500",children:"No available documents. Create a document first or remove it from another case."}):Lt.map(K=>b.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3 shadow-sm",children:[b.jsxs("div",{className:"min-w-0 flex-1",children:[b.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:K.title}),b.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:["Updated ",new Date(K.lastModifiedAt).toLocaleDateString()]})]}),b.jsxs("button",{onClick:()=>de(String(K._id)),disabled:En,className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:[b.jsx(jo,{className:"h-3.5 w-3.5"}),"Add"]})]},K._id))})]})]}),b.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[b.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-neutral-200/60 px-5 py-4",children:[b.jsxs("div",{children:[b.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case Attachments"}),b.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Upload supporting PDF or Word files for this case (max 15MB)."})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("input",{ref:re,type:"file",accept:".pdf,.doc,.docx",className:"hidden",onChange:Qe}),b.jsxs("button",{type:"button",onClick:()=>{var K;return(K=re.current)==null?void 0:K.click()},disabled:H,className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900 disabled:cursor-not-allowed disabled:opacity-60",children:[b.jsx(b5,{className:"h-4 w-4"}),H?"Uploading...":"Upload file"]})]})]}),b.jsx("div",{className:"space-y-3 px-5 py-4 max-h-80 overflow-y-auto",children:pe.length===0?b.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/70 px-4 py-6 text-center text-sm text-neutral-500",children:"No attachments yet. Upload PDF or Word files that should stay with this case."}):pe.map(K=>b.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3",children:[b.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[b.jsx(sD,{className:"h-5 w-5 text-neutral-400"}),b.jsxs("div",{className:"min-w-0",children:[b.jsx("p",{className:"truncate text-sm font-semibold text-neutral-900",children:K.name}),b.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:[on(K.size),"  Uploaded"," ",new Date(K.uploadedAt).toLocaleDateString()]})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[K.url&&b.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",title:"Download",children:b.jsx(g5,{className:"h-4 w-4"})}),b.jsx("button",{onClick:()=>Ut(String(K._id),K.name),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-200 text-rose-500 transition hover:border-rose-400 hover:text-rose-600",title:"Delete file",children:b.jsx(Ho,{className:"h-4 w-4"})})]})]},K._id))})]})]})})]}),w&&b.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50 px-4 py-6",children:b.jsxs("div",{className:"flex h-[90vh] w-full max-w-4xl flex-col rounded-3xl bg-white shadow-2xl",children:[b.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 px-6 py-4",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx(si,{className:"h-5 w-5 text-indigo-500"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case AI Chat"}),b.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:be.name})]})]}),b.jsx("button",{onClick:()=>S(!1),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",title:"Close assistant",children:b.jsx(Uo,{className:"h-4 w-4"})})]}),b.jsx(W8,{messages:C,isSendingMessage:k,userMessage:L,setUserMessage:R,handleSendMessage:ye,canSendMessages:Ot,messagesEndRef:J})]})})]}):b.jsxs("div",{className:"flex h-full flex-col items-center justify-center px-6 py-12 text-center",children:[b.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-sm",children:b.jsx(qc,{className:"h-10 w-10 text-neutral-400"})}),b.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No Case Selected"}),b.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Select a case from the sidebar or create a new one to start organizing your legal materials."}),b.jsxs("button",{onClick:()=>r(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[b.jsx(jo,{className:"h-4 w-4"}),"Create a case"]})]})})]})]})})})}function W8({messages:n,isSendingMessage:e,userMessage:t,setUserMessage:r,handleSendMessage:s,canSendMessages:o,messagesEndRef:l}){return b.jsxs("div",{className:"flex h-full min-h-0 w-full flex-col overflow-hidden bg-white",children:[b.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-6 py-6",children:[n.length===0&&!e?b.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-2xl border border-dashed border-neutral-200 bg-white/80 px-3 py-2 text-xs text-neutral-500",children:[b.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-indigo-500"}),"Waiting for AI response..."]}):b.jsx("div",{className:"space-y-4",children:n.map(u=>{const d=u.role==="assistant",h=d?"text-neutral-400":"text-white/70";return b.jsx("div",{className:`flex ${d?"justify-start":"justify-end"}`,children:b.jsxs("div",{className:`w-full rounded-3xl border px-4 py-3 text-sm shadow-sm ${d?"border-neutral-200 bg-white text-neutral-800":"border-neutral-900 bg-neutral-900 text-white"}`,children:[b.jsx("p",{className:`text-[11px] font-semibold uppercase tracking-[0.3em] ${h}`,children:d?"Legal AI Assistant":"You"}),b.jsx("p",{className:"mt-2 whitespace-pre-wrap",children:u.text}),u.pending&&b.jsx("p",{className:`mt-2 text-[11px] uppercase tracking-[0.3em] ${h}`,children:"Processing..."}),u.createdAt&&b.jsx("p",{className:`mt-2 text-[11px] uppercase tracking-[0.3em] ${h}`,children:new Date(u.createdAt).toLocaleTimeString()})]})},u.id)})}),b.jsx("div",{ref:l})]}),b.jsx("div",{className:"border-t border-neutral-200/80 bg-[#f7f6f3]/60 px-6 py-4",children:o?b.jsxs("form",{onSubmit:s,className:"flex flex-col gap-3 md:flex-row md:items-end md:gap-4",children:[b.jsx("div",{className:"flex-1",children:b.jsx("textarea",{value:t,onChange:u=>r(u.target.value),placeholder:"Ask a question about this case...",rows:3,className:"w-full resize-none rounded-2xl border border-neutral-200 bg-white px-5 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",disabled:e})}),b.jsx("button",{type:"submit",disabled:e||!t.trim(),className:"inline-flex h-11 w-full items-center justify-center rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800 disabled:cursor-not-allowed disabled:bg-neutral-300 md:w-32",children:e?"Thinking...":"Send"})]}):b.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:b.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[b.jsx(P0,{className:"h-4 w-4"}),"Add at least one document or attachment to use the AI chat."]})})})]})}function Q8(){const n=It(ze.aiChats.listChats)??[],[e,t]=N.useState(null),[r,s]=N.useState(""),[o,l]=N.useState(""),[u,d]=N.useState(!1),h=N.useRef(null),p=_t(ze.aiChats.createChat),m=xf(ze.aiChats.sendMessage),x=_t(ze.aiChats.renameChat),v=_t(ze.aiChats.deleteChat),w=It(ze.aiChats.getMessages,e?{chatId:e}:"skip")??[],S=N.useMemo(()=>n.find(j=>j&&j._id===e),[n,e]),C=N.useMemo(()=>o.trim()?n.filter(j=>j&&j.title.toLowerCase().includes(o.trim().toLowerCase())):n,[n,o]);N.useEffect(()=>{var j,H;if(!(n!=null&&n.length)){t(null);return}e?n.some(J=>(J==null?void 0:J._id)===e)||t(((j=n[0])==null?void 0:j._id)??null):t(((H=n[0])==null?void 0:H._id)??null)},[n,e]),N.useEffect(()=>{var j;(j=h.current)==null||j.scrollIntoView({behavior:"smooth"})},[w,u]),N.useEffect(()=>{s("")},[e]);const T=async()=>{try{const j=await p({});t(j)}catch(j){console.error("Failed to create chat",j),qe.error("Unable to start a new chat right now.")}},L=async()=>{if(!(!e||!r.trim()||u))try{d(!0),await m({chatId:e,content:r.trim()}),s("")}catch(j){console.error("Failed to send chat message",j),qe.error("AI assistant is unavailable. Please try again.")}finally{d(!1)}},R=async(j,H)=>{const U=window.prompt("Rename chat",H||"Untitled chat");if(!(!U||!U.trim()))try{await x({chatId:j,title:U.trim()}),qe.success("Chat renamed")}catch(J){console.error("Failed to rename chat",J),qe.error("Could not rename chat")}},k=async j=>{if(window.confirm("Delete this chat? This action cannot be undone."))try{await v({chatId:j}),e===j&&t(null),qe.success("Chat deleted")}catch(U){console.error("Failed to delete chat",U),qe.error("Could not delete chat")}};return b.jsxs("div",{className:"flex h-full bg-[#f7f6f3] text-neutral-900",children:[b.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-white/80",children:[b.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("div",{children:b.jsx("p",{className:"text-sm font-semibold text-neutral-800",children:"WS Chat"})}),b.jsxs("button",{onClick:T,className:"inline-flex items-center gap-1 rounded-lg border border-neutral-200 px-3 py-1.5 text-xs font-medium text-neutral-600 transition hover:bg-neutral-50",children:[b.jsx(si,{className:"h-3.5 w-3.5"}),"New Chat"]})]}),b.jsx("div",{className:"mt-4",children:b.jsx("input",{type:"text",placeholder:"Search chats...",value:o,onChange:j=>l(j.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400"})})]}),b.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3",children:C.length===0?b.jsxs("div",{className:"rounded-xl border border-dashed border-neutral-200 bg-neutral-50 px-4 py-8 text-center",children:[b.jsx(N5,{className:"mx-auto mb-3 h-6 w-6 text-neutral-400"}),b.jsx("p",{className:"text-sm font-medium text-neutral-700",children:o?"No chats match that search":"No chats yet"}),b.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Start a conversation to see it here."})]}):b.jsx("div",{className:"space-y-2",children:C.map(j=>{if(!j)return null;const H=j._id===e;return b.jsxs("div",{className:`relative rounded-xl border px-3 py-2 text-left transition ${H?"border-neutral-900 bg-neutral-900 text-white shadow-sm":"border-neutral-200 bg-white/70 text-neutral-700 hover:border-neutral-300"}`,role:"button",tabIndex:0,onClick:()=>t(j._id),onKeyDown:U=>{(U.key==="Enter"||U.key===" ")&&(U.preventDefault(),t(j._id))},children:[b.jsx("button",{className:`absolute right-2 top-2 rounded-full p-1 text-neutral-400 transition ${H?"hover:text-white":"hover:text-neutral-700"}`,onClick:U=>{U.stopPropagation(),R(j._id,j.title)},title:"Rename chat",children:b.jsx(V0,{className:"h-4 w-4"})}),b.jsx("button",{className:"absolute right-2 top-7 rounded-full p-1 text-[10px] text-neutral-400 hover:text-red-300",onClick:U=>{U.stopPropagation(),k(j._id)},title:"Delete chat",children:b.jsx(Ho,{className:"h-4 w-4"})}),b.jsx("p",{className:"truncate text-sm font-semibold",children:j.title||"Untitled chat"}),b.jsx("p",{className:`mt-1 text-xs ${H?"text-neutral-300":"text-neutral-500"}`,children:j.lastMessagePreview||"No messages yet"})]},j._id)})})})]}),b.jsx("div",{className:"flex flex-1 flex-col",children:S?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"flex items-center justify-between border-b border-neutral-200 bg-white/70 px-8 py-5",children:b.jsx("div",{children:b.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:S.title||"Untitled chat"})})}),b.jsx("div",{className:"flex-1 overflow-y-auto px-8 py-6",children:w.length===0?b.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center text-neutral-500",children:[b.jsx(si,{className:"h-10 w-10 text-neutral-300"}),b.jsx("p",{className:"mt-4 text-lg font-medium text-neutral-800",children:"This chat is empty."}),b.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Ask a question to kick off the conversation or start a new chat."})]}):b.jsxs("div",{className:"space-y-4",children:[w.map(j=>b.jsx("div",{className:`flex ${j.role==="user"?"justify-end":"justify-start"}`,children:b.jsxs("div",{className:`max-w-2xl rounded-2xl px-5 py-3 text-sm leading-relaxed shadow-sm ${j.role==="user"?"bg-neutral-900 text-white":"bg-white text-neutral-800"}`,children:[b.jsx("p",{className:"whitespace-pre-wrap",children:j.content}),b.jsx("p",{className:`mt-2 text-[11px] ${j.role==="user"?"text-neutral-300":"text-neutral-500"}`,children:new Date(j.createdAt).toLocaleTimeString()})]})},j._id)),u&&b.jsx("div",{className:"flex justify-start",children:b.jsx("div",{className:"rounded-2xl bg-white px-4 py-2 text-xs text-neutral-500 shadow-sm",children:"AI is drafting a response..."})}),b.jsx("div",{ref:h})]})}),b.jsx("div",{className:"border-t border-neutral-200 bg-white/90 px-8 py-5",children:b.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 shadow-sm",children:[b.jsxs("form",{onSubmit:j=>{j.preventDefault(),L()},className:"flex items-end gap-3",children:[b.jsx("textarea",{value:r,onChange:j=>s(j.target.value),placeholder:"Ask a question about strategy, drafting, compliance, or research...",className:"h-24 flex-1 resize-none rounded-xl border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-800 outline-none transition focus:border-neutral-400",disabled:u,onKeyDown:j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),L())}}),b.jsx("button",{type:"submit",disabled:!r.trim()||u,className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-neutral-900 text-white transition hover:bg-neutral-800 disabled:opacity-40",children:b.jsx(q0,{className:"h-5 w-5"})})]}),b.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Press Enter to send. Shift + Enter adds a new line."})]})})]}):b.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-center text-neutral-500",children:[b.jsx(si,{className:"h-12 w-12 text-neutral-300"}),b.jsx("p",{className:"mt-4 text-lg font-semibold text-neutral-800",children:"Create your first chat"}),b.jsx("p",{className:"mt-2 max-w-sm text-sm",children:"Launch a WS Chat thread from the sidebar to brainstorm briefs, summarize documents, or get legal research inspiration."}),b.jsx("button",{onClick:T,className:"mt-6 rounded-full border border-neutral-300 bg-white px-4 py-2 text-sm font-medium text-neutral-700 transition hover:border-neutral-400",children:"Start chatting"})]})})]})}function Y8(){const{shareableLink:n}=FO(),[e,t]=N.useState(!1),r=It(ze.documents.getDocumentByShareableLink,n?{shareableLink:n}:"skip"),s=N.useMemo(()=>hT(r==null?void 0:r.content),[r==null?void 0:r.content]);N.useEffect(()=>{n&&r===null&&t(!0)},[r,n]);const o=()=>{if(!r)return;const l=window.open("","_blank");l&&(l.document.write(`
        <html>
          <head>
            <title>${r.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content p { margin: 0 0 1em; }
            </style>
          </head>
          <body>
            <h1>${r.title}</h1>
            <div class="content">${s||"<p>This document is empty.</p>"}</div>
          </body>
        </html>
      `),l.document.close(),l.print())};return e?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx(wf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Document Not Found"}),b.jsx("p",{className:"text-gray-600",children:"The shared document you're looking for doesn't exist or is no longer available."})]})}):r?b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kodex"}),b.jsx("span",{className:"ml-2 text-sm text-gray-500 font-medium",children:"v1.0"})]}),b.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[b.jsx(wf,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})}),b.jsx("div",{className:"max-w-4xl mx-auto py-8 px-6",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),b.jsxs("div",{className:"text-sm text-gray-500",children:["Last modified: ",new Date(r.lastModifiedAt).toLocaleString(),b.jsx("span",{className:"mx-2",children:""}),"Version ",r.version]})]}),b.jsx("div",{className:"prose max-w-none",children:b.jsx("div",{className:"text-gray-900 leading-relaxed",style:{fontFamily:"Georgia, serif"},dangerouslySetInnerHTML:{__html:s||"<p>This document is empty.</p>"}})})]})})]}):b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function X8({isOpen:n,onClose:e}){const[t,r]=N.useState(!1),s=It(ze.notifications.getUserNotifications,{limit:50,unreadOnly:t})||[],o=It(ze.notifications.getUnreadCount)||0,l=_t(ze.notifications.markNotificationAsRead),u=_t(ze.notifications.markAllNotificationsAsRead),d=async m=>{try{await l({notificationId:m})}catch(x){console.error("Failed to mark notification as read:",x)}},h=async()=>{try{await u()}catch(m){console.error("Failed to mark all notifications as read:",m)}},p=m=>{switch(m){case"mention":return b.jsx(Fg,{className:"w-5 h-5 text-blue-600"});case"assignment":return b.jsx(X1,{className:"w-5 h-5 text-green-600"});case"comment":return b.jsx(Fg,{className:"w-5 h-5 text-purple-600"});case"suggestion":return b.jsx(yh,{className:"w-5 h-5 text-orange-600"});case"deadline":return b.jsx(P0,{className:"w-5 h-5 text-red-600"});case"invitation":return b.jsx(X1,{className:"w-5 h-5 text-indigo-600"});default:return b.jsx(lf,{className:"w-5 h-5 text-gray-600"})}};return n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-end z-50 pt-16 pr-4",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-h-[80vh] flex flex-col",children:[b.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx(lf,{className:"w-5 h-5 text-gray-600 mr-2"}),b.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),o>0&&b.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:o})]}),b.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:b.jsx(Uo,{className:"w-4 h-4 text-gray-500"})})]}),b.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("label",{className:"flex items-center text-sm",children:[b.jsx("input",{type:"checkbox",checked:t,onChange:m=>r(m.target.checked),className:"mr-2"}),"Show unread only"]}),o>0&&b.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})]})}),b.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length===0?b.jsxs("div",{className:"text-center py-12 text-gray-500",children:[b.jsx(lf,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),b.jsx("p",{className:"text-sm",children:t?"No unread notifications":"No notifications yet"})]}):b.jsx("div",{className:"divide-y divide-gray-200",children:s.map(m=>b.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${m.isRead?"":"bg-blue-50"}`,onClick:()=>{m.isRead||d(m._id),m.actionUrl&&(window.location.href=m.actionUrl)},children:b.jsxs("div",{className:"flex items-start",children:[b.jsx("div",{className:"flex-shrink-0 mr-3",children:p(m.type)}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:m.title}),!m.isRead&&b.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full ml-2"})]}),b.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.message}),b.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(m.createdAt).toLocaleString()})]})]})},m._id))})})]})}):null}function J8(){const[n,e]=N.useState(!1),[t,r]=N.useState("editor"),[s,o]=N.useState(null),[l,u]=N.useState(null),[d,h]=N.useState(!1),[p,m]=N.useState(!1),x=It(ze.auth.loggedInUser),v=It(ze.notifications.getUnreadCount)||0,w=It(ze.subscriptions.checkUsageLimit,{feature:"documentsCreated"}),S={editor:"Documents",hub:"Hub",goals:"Goals",chat:"WS Chat"},C=()=>{switch(t){case"editor":return b.jsx(F8,{documentId:s,onDocumentChange:o,currentUserName:(x==null?void 0:x.name)||(x==null?void 0:x.email)||void 0});case"hub":return b.jsx(K8,{selectedCaseId:l,onCaseSelect:u});case"goals":return b.jsx(G8,{documentId:s});case"chat":return b.jsx(Q8,{});default:return null}};return b.jsxs("div",{className:"h-screen flex flex-col bg-[#f7f6f3] text-neutral-900",children:[b.jsx(sO,{children:b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f6f3] p-6",children:b.jsxs("div",{className:"max-w-md w-full",children:[b.jsxs("div",{className:"text-center mb-10",children:[b.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-neutral-400",children:b.jsx("span",{children:"Welcome"})}),b.jsx("h1",{className:"mt-6 text-4xl font-semibold text-neutral-900",children:"Sign in to continue"}),b.jsx("p",{className:"mt-3 text-sm text-neutral-500",children:"Unlock collaborative drafting, AI research, and case automation in one calm workspace."})]}),b.jsx("div",{className:"rounded-3xl border border-neutral-200 bg-white/90 p-6 shadow-sm",children:b.jsx(h5,{})})]})})}),b.jsx(iO,{children:b.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[b.jsx(CD,{collapsed:n,onToggleCollapse:()=>e(!n),activeView:t,onViewChange:r,selectedCaseId:l,onCaseSelect:u}),b.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[b.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-neutral-200/70 bg-[#f7f6f3]/90 px-6 backdrop-blur",children:[b.jsx("div",{className:"flex flex-col",children:b.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-neutral-500",children:[b.jsx("span",{className:"font-medium text-neutral-700",children:"Home"}),b.jsx("span",{className:"text-neutral-300",children:"/"}),b.jsx("span",{children:S[t]}),t==="editor"&&s&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-neutral-300",children:"/"}),b.jsx("span",{className:"truncate max-w-[240px] text-neutral-500",title:"Active document",children:"Document"})]})]})}),b.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-500",children:[b.jsxs("button",{onClick:()=>h(!0),className:"relative rounded-full border border-neutral-200 p-2 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800","aria-label":"Notifications",children:[b.jsx(lf,{className:"h-5 w-5"}),v>0&&b.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-semibold text-white",children:v>9?"9+":v})]}),b.jsx("button",{onClick:()=>m(!0),className:"rounded-full border border-neutral-200 px-4 py-1.5 text-sm font-medium text-neutral-700 transition hover:border-neutral-300 hover:text-neutral-900",children:"Upgrade"}),b.jsx(p5,{})]})]}),b.jsx("div",{className:"flex-1 overflow-hidden",children:C()})]})]})}),b.jsx(X8,{isOpen:d,onClose:()=>h(!1)}),b.jsx(pT,{isOpen:p,onClose:()=>m(!1),feature:w&&!w.allowed?"document creation":void 0,currentUsage:w==null?void 0:w.currentUsage,limit:w==null?void 0:w.limit})]})}function Z8(){return b.jsxs(MR,{children:[b.jsx(f5,{position:"top-right"}),b.jsxs(oR,{children:[b.jsx(Pg,{path:"/shared/:shareableLink",element:b.jsx(Y8,{})}),b.jsx(Pg,{path:"/*",element:b.jsx(J8,{})})]})]})}const mT=document.getElementById("root");if(!mT)throw new Error("Root element with id 'root' not found in the document.");const mE=Tk.createRoot(mT),gE="https://fleet-goat-249.convex.cloud";if(gE.length===0)console.error("VITE_CONVEX_URL is not defined. Make sure `convex dev` is running or provide the deployment URL in your environment."),mE.render(b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f6f3] text-neutral-900",children:b.jsxs("div",{className:"max-w-lg space-y-4 rounded-lg border border-neutral-200 bg-white p-8 shadow-sm",children:[b.jsx("h1",{className:"text-xl font-semibold",children:"Configuration required"}),b.jsxs("p",{className:"text-sm text-neutral-600",children:["The application cannot connect to Convex because the ",b.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"VITE_CONVEX_URL"}),"environment variable is missing. Start the backend with ",b.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"convex dev"})," or set the URL in a",b.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:".env.local"})," file."]}),b.jsx("p",{className:"text-sm text-neutral-600",children:"Once configured, restart the development server to continue."})]})}));else{const n=new GM(gE);mE.render(b.jsx(N.StrictMode,{children:b.jsx(hO,{client:n,children:b.jsx(Z8,{})})}))}
