(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function j0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $m={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function SA(){if(v1)return uc;v1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:l,ref:s!==void 0?s:null,props:o}}return uc.Fragment=e,uc.jsx=t,uc.jsxs=t,uc}var w1;function EA(){return w1||(w1=1,$m.exports=SA()),$m.exports}var y=EA(),qm={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function CA(){if(S1)return Qe;S1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(O,V,Y){this.props=O,this.context=V,this.refs=C,this.updater=Y||w}T.prototype.isReactComponent={},T.prototype.setState=function(O,V){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,V,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function j(){}j.prototype=T.prototype;function R(O,V,Y){this.props=O,this.context=V,this.refs=C,this.updater=Y||w}var A=R.prototype=new j;A.constructor=R,S(A,T.prototype),A.isPureReactComponent=!0;var L=Array.isArray;function I(){}var H={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function re(O,V,Y){var ce=Y.ref;return{$$typeof:n,type:O,key:V,ref:ce!==void 0?ce:null,props:Y}}function me(O,V){return re(O.type,V,O.props)}function xe(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function q(O){var V={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Y){return V[Y]})}var ie=/\/+/g;function te(O,V){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):V.toString(36)}function he(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(I,I):(O.status="pending",O.then(function(V){O.status==="pending"&&(O.status="fulfilled",O.value=V)},function(V){O.status==="pending"&&(O.status="rejected",O.reason=V)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,V,Y,ce,fe){var we=typeof O;(we==="undefined"||we==="boolean")&&(O=null);var Ue=!1;if(O===null)Ue=!0;else switch(we){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(O.$$typeof){case n:case e:Ue=!0;break;case p:return Ue=O._init,B(Ue(O._payload),V,Y,ce,fe)}}if(Ue)return fe=fe(O),Ue=ce===""?"."+te(O,0):ce,L(fe)?(Y="",Ue!=null&&(Y=Ue.replace(ie,"$&/")+"/"),B(fe,V,Y,"",function(pt){return pt})):fe!=null&&(xe(fe)&&(fe=me(fe,Y+(fe.key==null||O&&O.key===fe.key?"":(""+fe.key).replace(ie,"$&/")+"/")+Ue)),V.push(fe)),1;Ue=0;var ae=ce===""?".":ce+":";if(L(O))for(var $e=0;$e<O.length;$e++)ce=O[$e],we=ae+te(ce,$e),Ue+=B(ce,V,Y,we,fe);else if($e=v(O),typeof $e=="function")for(O=$e.call(O),$e=0;!(ce=O.next()).done;)ce=ce.value,we=ae+te(ce,$e++),Ue+=B(ce,V,Y,we,fe);else if(we==="object"){if(typeof O.then=="function")return B(he(O),V,Y,ce,fe);throw V=String(O),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function D(O,V,Y){if(O==null)return O;var ce=[],fe=0;return B(O,ce,"","",function(we){return V.call(Y,we,fe++)}),ce}function U(O){if(O._status===-1){var V=O._result;V=V(),V.then(function(Y){(O._status===0||O._status===-1)&&(O._status=1,O._result=Y)},function(Y){(O._status===0||O._status===-1)&&(O._status=2,O._result=Y)}),O._status===-1&&(O._status=0,O._result=V)}if(O._status===1)return O._result.default;throw O._result}var se=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ue={map:D,forEach:function(O,V,Y){D(O,function(){V.apply(this,arguments)},Y)},count:function(O){var V=0;return D(O,function(){V++}),V},toArray:function(O){return D(O,function(V){return V})||[]},only:function(O){if(!xe(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Qe.Activity=m,Qe.Children=ue,Qe.Component=T,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=R,Qe.StrictMode=r,Qe.Suspense=d,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return H.H.useMemoCache(O)}},Qe.cache=function(O){return function(){return O.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(O,V,Y){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ce=S({},O.props),fe=O.key;if(V!=null)for(we in V.key!==void 0&&(fe=""+V.key),V)!W.call(V,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&V.ref===void 0||(ce[we]=V[we]);var we=arguments.length-2;if(we===1)ce.children=Y;else if(1<we){for(var Ue=Array(we),ae=0;ae<we;ae++)Ue[ae]=arguments[ae+2];ce.children=Ue}return re(O.type,fe,ce)},Qe.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},Qe.createElement=function(O,V,Y){var ce,fe={},we=null;if(V!=null)for(ce in V.key!==void 0&&(we=""+V.key),V)W.call(V,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(fe[ce]=V[ce]);var Ue=arguments.length-2;if(Ue===1)fe.children=Y;else if(1<Ue){for(var ae=Array(Ue),$e=0;$e<Ue;$e++)ae[$e]=arguments[$e+2];fe.children=ae}if(O&&O.defaultProps)for(ce in Ue=O.defaultProps,Ue)fe[ce]===void 0&&(fe[ce]=Ue[ce]);return re(O,we,fe)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(O){return{$$typeof:u,render:O}},Qe.isValidElement=xe,Qe.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:U}},Qe.memo=function(O,V){return{$$typeof:h,type:O,compare:V===void 0?null:V}},Qe.startTransition=function(O){var V=H.T,Y={};H.T=Y;try{var ce=O(),fe=H.S;fe!==null&&fe(Y,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(I,se)}catch(we){se(we)}finally{V!==null&&Y.types!==null&&(V.types=Y.types),H.T=V}},Qe.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Qe.use=function(O){return H.H.use(O)},Qe.useActionState=function(O,V,Y){return H.H.useActionState(O,V,Y)},Qe.useCallback=function(O,V){return H.H.useCallback(O,V)},Qe.useContext=function(O){return H.H.useContext(O)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(O,V){return H.H.useDeferredValue(O,V)},Qe.useEffect=function(O,V){return H.H.useEffect(O,V)},Qe.useEffectEvent=function(O){return H.H.useEffectEvent(O)},Qe.useId=function(){return H.H.useId()},Qe.useImperativeHandle=function(O,V,Y){return H.H.useImperativeHandle(O,V,Y)},Qe.useInsertionEffect=function(O,V){return H.H.useInsertionEffect(O,V)},Qe.useLayoutEffect=function(O,V){return H.H.useLayoutEffect(O,V)},Qe.useMemo=function(O,V){return H.H.useMemo(O,V)},Qe.useOptimistic=function(O,V){return H.H.useOptimistic(O,V)},Qe.useReducer=function(O,V,Y){return H.H.useReducer(O,V,Y)},Qe.useRef=function(O){return H.H.useRef(O)},Qe.useState=function(O){return H.H.useState(O)},Qe.useSyncExternalStore=function(O,V,Y){return H.H.useSyncExternalStore(O,V,Y)},Qe.useTransition=function(){return H.H.useTransition()},Qe.version="19.2.0",Qe}var E1;function _0(){return E1||(E1=1,qm.exports=CA()),qm.exports}var N=_0();const oe=j0(N);var Pm={exports:{}},dc={},Vm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function NA(){return C1||(C1=1,function(n){function e(B,D){var U=B.length;B.push(D);e:for(;0<U;){var se=U-1>>>1,ue=B[se];if(0<s(ue,D))B[se]=D,B[U]=ue,U=se;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var D=B[0],U=B.pop();if(U!==D){B[0]=U;e:for(var se=0,ue=B.length,O=ue>>>1;se<O;){var V=2*(se+1)-1,Y=B[V],ce=V+1,fe=B[ce];if(0>s(Y,U))ce<ue&&0>s(fe,Y)?(B[se]=fe,B[ce]=U,se=ce):(B[se]=Y,B[V]=U,se=V);else if(ce<ue&&0>s(fe,U))B[se]=fe,B[ce]=U,se=ce;else break e}}return D}function s(B,D){var U=B.sortIndex-D.sortIndex;return U!==0?U:B.id-D.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,x=3,v=!1,w=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(B){for(var D=t(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=B)r(h),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(h)}}function L(B){if(S=!1,A(B),!w)if(t(d)!==null)w=!0,I||(I=!0,q());else{var D=t(h);D!==null&&he(L,D.startTime-B)}}var I=!1,H=-1,W=5,re=-1;function me(){return C?!0:!(n.unstable_now()-re<W)}function xe(){if(C=!1,I){var B=n.unstable_now();re=B;var D=!0;try{e:{w=!1,S&&(S=!1,j(H),H=-1),v=!0;var U=x;try{t:{for(A(B),m=t(d);m!==null&&!(m.expirationTime>B&&me());){var se=m.callback;if(typeof se=="function"){m.callback=null,x=m.priorityLevel;var ue=se(m.expirationTime<=B);if(B=n.unstable_now(),typeof ue=="function"){m.callback=ue,A(B),D=!0;break t}m===t(d)&&r(d),A(B)}else r(d);m=t(d)}if(m!==null)D=!0;else{var O=t(h);O!==null&&he(L,O.startTime-B),D=!1}}break e}finally{m=null,x=U,v=!1}D=void 0}}finally{D?q():I=!1}}}var q;if(typeof R=="function")q=function(){R(xe)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,te=ie.port2;ie.port1.onmessage=xe,q=function(){te.postMessage(null)}}else q=function(){T(xe,0)};function he(B,D){H=T(function(){B(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(B){switch(x){case 1:case 2:case 3:var D=3;break;default:D=x}var U=x;x=D;try{return B()}finally{x=U}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(B,D){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var U=x;x=B;try{return D()}finally{x=U}},n.unstable_scheduleCallback=function(B,D,U){var se=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?se+U:se):U=se,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=U+ue,B={id:p++,callback:D,priorityLevel:B,startTime:U,expirationTime:ue,sortIndex:-1},U>se?(B.sortIndex=U,e(h,B),t(d)===null&&B===t(h)&&(S?(j(H),H=-1):S=!0,he(L,U-se))):(B.sortIndex=ue,e(d,B),w||v||(w=!0,I||(I=!0,q()))),B},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(B){var D=x;return function(){var U=x;x=D;try{return B.apply(this,arguments)}finally{x=U}}}}(Fm)),Fm}var N1;function TA(){return N1||(N1=1,Vm.exports=NA()),Vm.exports}var Gm={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function kA(){if(T1)return Fn;T1=1;var n=_0();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,p)},Fn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},Fn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Fn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Fn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:v}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Fn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Fn.requestFormReset=function(d){r.d.r(d)},Fn.unstable_batchedUpdates=function(d,h){return d(h)},Fn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Fn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fn.version="19.2.0",Fn}var k1;function bE(){if(k1)return Gm.exports;k1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gm.exports=kA(),Gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1;function AA(){if(A1)return dc;A1=1;var n=TA(),e=_0(),t=bE();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return d(g),i;if(b===f)return d(g),a;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=b;else{for(var E=!1,k=g.child;k;){if(k===c){E=!0,c=g,f=b;break}if(k===f){E=!0,f=g,c=b;break}k=k.sibling}if(!E){for(k=b.child;k;){if(k===c){E=!0,c=b,f=g;break}if(k===f){E=!0,f=b,c=g;break}k=k.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=xe&&i[xe]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Symbol.for("react.client.reference");function te(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ie?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case re:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case R:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case A:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return a=i.displayName||null,a!==null?a:te(i.type)||"Memo";case W:a=i._payload,i=i._init;try{return te(i(a))}catch{}}return null}var he=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},se=[],ue=-1;function O(i){return{current:i}}function V(i){0>ue||(i.current=se[ue],se[ue]=null,ue--)}function Y(i,a){ue++,se[ue]=i.current,i.current=a}var ce=O(null),fe=O(null),we=O(null),Ue=O(null);function ae(i,a){switch(Y(we,a),Y(fe,i),Y(ce,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Pv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Pv(a),i=Vv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(ce),Y(ce,i)}function $e(){V(ce),V(fe),V(we)}function pt(i){i.memoizedState!==null&&Y(Ue,i);var a=ce.current,c=Vv(a,i.type);a!==c&&(Y(fe,i),Y(ce,c))}function It(i){fe.current===i&&(V(ce),V(fe)),Ue.current===i&&(V(Ue),oc._currentValue=U)}var rn,qn;function jt(i){if(rn===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);rn=a&&a[1]||"",qn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rn+i+qn}var Sn=!1;function At(i,a){if(!i||Sn)return"";Sn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(J){var G=J}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(J){G=J}i.call(ne.prototype)}}else{try{throw Error()}catch(J){G=J}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(J){if(J&&G&&typeof J.stack=="string")return[J.stack,G.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],k=b[1];if(E&&k){var _=E.split(`
`),F=k.split(`
`);for(g=f=0;f<_.length&&!_[f].includes("DetermineComponentFrameRoot");)f++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(f===_.length||g===F.length)for(f=_.length-1,g=F.length-1;1<=f&&0<=g&&_[f]!==F[g];)g--;for(;1<=f&&0<=g;f--,g--)if(_[f]!==F[g]){if(f!==1||g!==1)do if(f--,g--,0>g||_[f]!==F[g]){var Z=`
`+_[f].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=f&&0<=g);break}}}finally{Sn=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?jt(c):""}function sn(i,a){switch(i.tag){case 26:case 27:case 5:return jt(i.type);case 16:return jt("Lazy");case 13:return i.child!==a&&a!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return At(i.type,!1);case 11:return At(i.type.render,!1);case 1:return At(i.type,!0);case 31:return jt("Activity");default:return""}}function En(i){try{var a="",c=null;do a+=sn(i,c),c=i,i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var K=Object.prototype.hasOwnProperty,Se=n.unstable_scheduleCallback,We=n.unstable_cancelCallback,_e=n.unstable_shouldYield,st=n.unstable_requestPaint,Ze=n.unstable_now,vn=n.unstable_getCurrentPriorityLevel,_t=n.unstable_ImmediatePriority,ye=n.unstable_UserBlockingPriority,Ne=n.unstable_NormalPriority,Ke=n.unstable_LowPriority,Ye=n.unstable_IdlePriority,Ht=n.log,Xt=n.unstable_setDisableYieldValue,gr=null,X=null;function Ce(i){if(typeof Ht=="function"&&Xt(i),X&&typeof X.setStrictMode=="function")try{X.setStrictMode(gr,i)}catch{}}var ke=Math.clz32?Math.clz32:vt,dt=Math.log,Xe=Math.LN2;function vt(i){return i>>>=0,i===0?32:31-(dt(i)/Xe|0)|0}var Jt=256,Yn=262144,yr=4194304;function Ut(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function M(i,a,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,b=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var k=f&134217727;return k!==0?(f=k&~b,f!==0?g=Ut(f):(E&=k,E!==0?g=Ut(E):c||(c=k&~i,c!==0&&(g=Ut(c))))):(k=f&~b,k!==0?g=Ut(k):E!==0?g=Ut(E):c||(c=f&~i,c!==0&&(g=Ut(c)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:g}function Q(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function de(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oe(){var i=yr;return yr<<=1,(yr&62914560)===0&&(yr=4194304),i}function ht(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ve(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ee(i,a,c,f,g,b){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var k=i.entanglements,_=i.expirationTimes,F=i.hiddenUpdates;for(c=E&~c;0<c;){var Z=31-ke(c),ne=1<<Z;k[Z]=0,_[Z]=-1;var G=F[Z];if(G!==null)for(F[Z]=null,Z=0;Z<G.length;Z++){var J=G[Z];J!==null&&(J.lane&=-536870913)}c&=~ne}f!==0&&Te(i,f,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(E&~a))}function Te(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-ke(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function Re(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-ke(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}function mt(i,a){var c=a&-a;return c=(c&42)!==0?1:Mt(c),(c&(i.suspendedLanes|a))!==0?0:c}function Mt(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Dn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function uo(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:h1(i.type))}function oa(i,a){var c=D.p;try{return D.p=i,a()}finally{D.p=c}}var li=Math.random().toString(36).slice(2),on="__reactFiber$"+li,Pn="__reactProps$"+li,us="__reactContainer$"+li,yl="__reactEvents$"+li,pu="__reactListeners$"+li,aa="__reactHandles$"+li,mu="__reactResources$"+li,fo="__reactMarker$"+li;function bl(i){delete i[on],delete i[Pn],delete i[yl],delete i[pu],delete i[aa]}function Xn(i){var a=i[on];if(a)return a;for(var c=i.parentNode;c;){if(a=c[us]||c[on]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Xv(i);i!==null;){if(c=i[on])return c;i=Xv(i)}return a}i=c,c=i.parentNode}return null}function Oi(i){if(i=i[on]||i[us]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ds(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function fs(i){var a=i[mu];return a||(a=i[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function fn(i){i[fo]=!0}var gu=new Set,ho={};function Ri(i,a){pe(i,a),pe(i+"Capture",a)}function pe(i,a){for(ho[i]=a,i=0;i<a.length;i++)gu.add(a[i])}var ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},wt={};function an(i){return K.call(wt,i)?!0:K.call(it,i)?!1:ze.test(i)?wt[i]=!0:(it[i]=!0,!1)}function Vn(i,a,c){if(an(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function br(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function nr(i,a,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+f)}}function Lt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xr(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function yu(i,a,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,b=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,b.call(this,E)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function la(i){if(!i._valueTracker){var a=xr(i)?"checked":"value";i._valueTracker=yu(i,a,""+i[a])}}function xl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=xr(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function ca(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Uh=/[\n"\\]/g;function rr(i){return i.replace(Uh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vl(i,a,c,f,g,b,E,k){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Lt(a)):i.value!==""+Lt(a)&&(i.value=""+Lt(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?ua(i,E,Lt(a)):c!=null?ua(i,E,Lt(c)):f!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+Lt(k):i.removeAttribute("name")}function po(i,a,c,f,g,b,E,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){la(i);return}c=c!=null?""+Lt(c):"",a=a!=null?""+Lt(a):c,k||a===i.value||(i.value=a),i.defaultValue=a}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=k?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),la(i)}function ua(i,a,c){a==="number"&&ca(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function jn(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Lt(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function bu(i,a,c){if(a!=null&&(a=""+Lt(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+Lt(c):""}function da(i,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(he(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=Lt(a),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),la(i)}function Fe(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hn(i,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,c):typeof c!="number"||c===0||xu.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function St(i,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in a)f=a[g],a.hasOwnProperty(g)&&c[g]!==f&&hn(i,g,f)}else for(var b in a)a.hasOwnProperty(b)&&hn(i,b,a[b])}function hs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Di=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ps(i){return wl.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function be(){}var De=null;function Je(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var lt=null,Qt=null;function Dr(i){var a=Oi(i);if(a&&(i=a.stateNode)){var c=i[Pn]||null;e:switch(i=a.stateNode,a.type){case"input":if(vl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=f[Pn]||null;if(!g)throw Error(r(90));vl(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===i.form&&xl(f)}break e;case"textarea":bu(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&jn(i,!!c.multiple,a,!1)}}}var Sl=!1;function vu(i,a,c){if(Sl)return i(a,c);Sl=!0;try{var f=i(a);return f}finally{if(Sl=!1,(lt!==null||Qt!==null)&&(ad(),lt&&(a=lt,i=Qt,Qt=lt=null,Dr(a),i)))for(a=0;a<i.length;a++)Dr(i[a])}}function El(i,a){var c=i.stateNode;if(c===null)return null;var f=c[Pn]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$h=!1;if(ji)try{var Cl={};Object.defineProperty(Cl,"passive",{get:function(){$h=!0}}),window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{$h=!1}var ms=null,qh=null,wu=null;function Vy(){if(wu)return wu;var i,a=qh,c=a.length,f,g="value"in ms?ms.value:ms.textContent,b=g.length;for(i=0;i<c&&a[i]===g[i];i++);var E=c-i;for(f=1;f<=E&&a[c-f]===g[b-f];f++);return wu=g.slice(i,1<f?1-f:void 0)}function Su(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Eu(){return!0}function Fy(){return!1}function ir(i){function a(c,f,g,b,E){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(c=i[k],this[k]=c?c(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Eu:Fy,this.isPropagationStopped=Fy,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),a}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=ir(mo),Nl=m({},mo,{view:0,detail:0}),vT=ir(Nl),Ph,Vh,Tl,Nu=m({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Tl&&(Tl&&i.type==="mousemove"?(Ph=i.screenX-Tl.screenX,Vh=i.screenY-Tl.screenY):Vh=Ph=0,Tl=i),Ph)},movementY:function(i){return"movementY"in i?i.movementY:Vh}}),Gy=ir(Nu),wT=m({},Nu,{dataTransfer:0}),ST=ir(wT),ET=m({},Nl,{relatedTarget:0}),Fh=ir(ET),CT=m({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),NT=ir(CT),TT=m({},mo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),kT=ir(TT),AT=m({},mo,{data:0}),Ky=ir(AT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DT(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=RT[i])?!!a[i]:!1}function Gh(){return DT}var jT=m({},Nl,{key:function(i){if(i.key){var a=MT[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Su(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?OT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gh,charCode:function(i){return i.type==="keypress"?Su(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Su(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_T=ir(jT),LT=m({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wy=ir(LT),BT=m({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gh}),zT=ir(BT),IT=m({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),HT=ir(IT),UT=m({},Nu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$T=ir(UT),qT=m({},mo,{newState:0,oldState:0}),PT=ir(qT),VT=[9,13,27,32],Kh=ji&&"CompositionEvent"in window,kl=null;ji&&"documentMode"in document&&(kl=document.documentMode);var FT=ji&&"TextEvent"in window&&!kl,Qy=ji&&(!Kh||kl&&8<kl&&11>=kl),Yy=" ",Xy=!1;function Jy(i,a){switch(i){case"keyup":return VT.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var fa=!1;function GT(i,a){switch(i){case"compositionend":return Zy(a);case"keypress":return a.which!==32?null:(Xy=!0,Yy);case"textInput":return i=a.data,i===Yy&&Xy?null:i;default:return null}}function KT(i,a){if(fa)return i==="compositionend"||!Kh&&Jy(i,a)?(i=Vy(),wu=qh=ms=null,fa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Qy&&a.locale!=="ko"?null:a.data;default:return null}}var WT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eb(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!WT[i.type]:a==="textarea"}function tb(i,a,c,f){lt?Qt?Qt.push(f):Qt=[f]:lt=f,a=pd(a,"onChange"),0<a.length&&(c=new Cu("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Al=null,Ml=null;function QT(i){zv(i,0)}function Tu(i){var a=ds(i);if(xl(a))return i}function nb(i,a){if(i==="change")return a}var rb=!1;if(ji){var Wh;if(ji){var Qh="oninput"in document;if(!Qh){var ib=document.createElement("div");ib.setAttribute("oninput","return;"),Qh=typeof ib.oninput=="function"}Wh=Qh}else Wh=!1;rb=Wh&&(!document.documentMode||9<document.documentMode)}function sb(){Al&&(Al.detachEvent("onpropertychange",ob),Ml=Al=null)}function ob(i){if(i.propertyName==="value"&&Tu(Ml)){var a=[];tb(a,Ml,i,Je(i)),vu(QT,a)}}function YT(i,a,c){i==="focusin"?(sb(),Al=a,Ml=c,Al.attachEvent("onpropertychange",ob)):i==="focusout"&&sb()}function XT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tu(Ml)}function JT(i,a){if(i==="click")return Tu(a)}function ZT(i,a){if(i==="input"||i==="change")return Tu(a)}function ek(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vr=typeof Object.is=="function"?Object.is:ek;function Ol(i,a){if(vr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!K.call(a,g)||!vr(i[g],a[g]))return!1}return!0}function ab(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function lb(i,a){var c=ab(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ab(c)}}function cb(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?cb(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function ub(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=ca(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=ca(i.document)}return a}function Yh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var tk=ji&&"documentMode"in document&&11>=document.documentMode,ha=null,Xh=null,Rl=null,Jh=!1;function db(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Jh||ha==null||ha!==ca(f)||(f=ha,"selectionStart"in f&&Yh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Rl&&Ol(Rl,f)||(Rl=f,f=pd(Xh,"onSelect"),0<f.length&&(a=new Cu("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=ha)))}function go(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var pa={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionrun:go("Transition","TransitionRun"),transitionstart:go("Transition","TransitionStart"),transitioncancel:go("Transition","TransitionCancel"),transitionend:go("Transition","TransitionEnd")},Zh={},fb={};ji&&(fb=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function yo(i){if(Zh[i])return Zh[i];if(!pa[i])return i;var a=pa[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in fb)return Zh[i]=a[c];return i}var hb=yo("animationend"),pb=yo("animationiteration"),mb=yo("animationstart"),nk=yo("transitionrun"),rk=yo("transitionstart"),ik=yo("transitioncancel"),gb=yo("transitionend"),yb=new Map,ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ep.push("scrollEnd");function Zr(i,a){yb.set(i,a),Ri(a,[i])}var ku=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},jr=[],ma=0,tp=0;function Au(){for(var i=ma,a=tp=ma=0;a<i;){var c=jr[a];jr[a++]=null;var f=jr[a];jr[a++]=null;var g=jr[a];jr[a++]=null;var b=jr[a];if(jr[a++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}b!==0&&bb(c,g,b)}}function Mu(i,a,c,f){jr[ma++]=i,jr[ma++]=a,jr[ma++]=c,jr[ma++]=f,tp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function np(i,a,c,f){return Mu(i,a,c,f),Ou(i)}function bo(i,a){return Mu(i,null,null,a),Ou(i)}function bb(i,a,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,b=i.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&a!==null&&(g=31-ke(c),i=b.hiddenUpdates,f=i[g],f===null?i[g]=[a]:f.push(a),a.lane=c|536870912),b):null}function Ou(i){if(50<Zl)throw Zl=0,dm=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ga={};function sk(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(i,a,c,f){return new sk(i,a,c,f)}function rp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _i(i,a){var c=i.alternate;return c===null?(c=wr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function xb(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Ru(i,a,c,f,g,b){var E=0;if(f=i,typeof i=="function")rp(i)&&(E=1);else if(typeof i=="string")E=uA(i,c,ce.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case re:return i=wr(31,c,a,g),i.elementType=re,i.lanes=b,i;case S:return xo(c.children,g,b,a);case C:E=8,g|=24;break;case T:return i=wr(12,c,a,g|2),i.elementType=T,i.lanes=b,i;case L:return i=wr(13,c,a,g),i.elementType=L,i.lanes=b,i;case I:return i=wr(19,c,a,g),i.elementType=I,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:E=10;break e;case j:E=9;break e;case A:E=11;break e;case H:E=14;break e;case W:E=16,f=null;break e}E=29,c=Error(r(130,i===null?"null":typeof i,"")),f=null}return a=wr(E,c,a,g),a.elementType=i,a.type=f,a.lanes=b,a}function xo(i,a,c,f){return i=wr(7,i,f,a),i.lanes=c,i}function ip(i,a,c){return i=wr(6,i,null,a),i.lanes=c,i}function vb(i){var a=wr(18,null,null,0);return a.stateNode=i,a}function sp(i,a,c){return a=wr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var wb=new WeakMap;function _r(i,a){if(typeof i=="object"&&i!==null){var c=wb.get(i);return c!==void 0?c:(a={value:i,source:a,stack:En(a)},wb.set(i,a),a)}return{value:i,source:a,stack:En(a)}}var ya=[],ba=0,Du=null,Dl=0,Lr=[],Br=0,gs=null,ci=1,ui="";function Li(i,a){ya[ba++]=Dl,ya[ba++]=Du,Du=i,Dl=a}function Sb(i,a,c){Lr[Br++]=ci,Lr[Br++]=ui,Lr[Br++]=gs,gs=i;var f=ci;i=ui;var g=32-ke(f)-1;f&=~(1<<g),c+=1;var b=32-ke(a)+g;if(30<b){var E=g-g%5;b=(f&(1<<E)-1).toString(32),f>>=E,g-=E,ci=1<<32-ke(a)+g|c<<g|f,ui=b+i}else ci=1<<b|c<<g|f,ui=i}function op(i){i.return!==null&&(Li(i,1),Sb(i,1,0))}function ap(i){for(;i===Du;)Du=ya[--ba],ya[ba]=null,Dl=ya[--ba],ya[ba]=null;for(;i===gs;)gs=Lr[--Br],Lr[Br]=null,ui=Lr[--Br],Lr[Br]=null,ci=Lr[--Br],Lr[Br]=null}function Eb(i,a){Lr[Br++]=ci,Lr[Br++]=ui,Lr[Br++]=gs,ci=a.id,ui=a.overflow,gs=i}var _n=null,$t=null,ft=!1,ys=null,zr=!1,lp=Error(r(519));function bs(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(_r(a,i)),lp}function Cb(i){var a=i.stateNode,c=i.type,f=i.memoizedProps;switch(a[on]=i,a[Pn]=f,c){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(c=0;c<tc.length;c++)at(tc[c],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":at("invalid",a),po(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":at("invalid",a);break;case"textarea":at("invalid",a),da(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||$v(a.textContent,c)?(f.popover!=null&&(at("beforetoggle",a),at("toggle",a)),f.onScroll!=null&&at("scroll",a),f.onScrollEnd!=null&&at("scrollend",a),f.onClick!=null&&(a.onclick=be),a=!0):a=!1,a||bs(i,!0)}function Nb(i){for(_n=i.return;_n;)switch(_n.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:_n=_n.return}}function xa(i){if(i!==_n)return!1;if(!ft)return Nb(i),ft=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Tm(i.type,i.memoizedProps)),c=!c),c&&$t&&bs(i),Nb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));$t=Yv(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));$t=Yv(i)}else a===27?(a=$t,Ds(i.type)?(i=Rm,Rm=null,$t=i):$t=a):$t=_n?Hr(i.stateNode.nextSibling):null;return!0}function vo(){$t=_n=null,ft=!1}function cp(){var i=ys;return i!==null&&(lr===null?lr=i:lr.push.apply(lr,i),ys=null),i}function jl(i){ys===null?ys=[i]:ys.push(i)}var up=O(null),wo=null,Bi=null;function xs(i,a,c){Y(up,a._currentValue),a._currentValue=c}function zi(i){i._currentValue=up.current,V(up)}function dp(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function fp(i,a,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=g;for(var _=0;_<a.length;_++)if(k.context===a[_]){b.lanes|=c,k=b.alternate,k!==null&&(k.lanes|=c),dp(b.return,c,i),f||(E=null);break e}b=k.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=c,b=E.alternate,b!==null&&(b.lanes|=c),dp(E,c,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function va(i,a,c,f){i=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var k=g.type;vr(g.pendingProps.value,E.value)||(i!==null?i.push(k):i=[k])}}else if(g===Ue.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(oc):i=[oc])}g=g.return}i!==null&&fp(a,i,c,f),a.flags|=262144}function ju(i){for(i=i.firstContext;i!==null;){if(!vr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function So(i){wo=i,Bi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ln(i){return Tb(wo,i)}function _u(i,a){return wo===null&&So(i),Tb(i,a)}function Tb(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Bi===null){if(i===null)throw Error(r(308));Bi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Bi=Bi.next=a;return c}var ok=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},ak=n.unstable_scheduleCallback,lk=n.unstable_NormalPriority,pn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hp(){return{controller:new ok,data:new Map,refCount:0}}function _l(i){i.refCount--,i.refCount===0&&ak(lk,function(){i.controller.abort()})}var Ll=null,pp=0,wa=0,Sa=null;function ck(i,a){if(Ll===null){var c=Ll=[];pp=0,wa=ym(),Sa={status:"pending",value:void 0,then:function(f){c.push(f)}}}return pp++,a.then(kb,kb),a}function kb(){if(--pp===0&&Ll!==null){Sa!==null&&(Sa.status="fulfilled");var i=Ll;Ll=null,wa=0,Sa=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function uk(i,a){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var Ab=B.S;B.S=function(i,a){dv=Ze(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&ck(i,a),Ab!==null&&Ab(i,a)};var Eo=O(null);function mp(){var i=Eo.current;return i!==null?i:Ot.pooledCache}function Lu(i,a){a===null?Y(Eo,Eo.current):Y(Eo,a.pool)}function Mb(){var i=mp();return i===null?null:{parent:pn._currentValue,pool:i}}var Ea=Error(r(460)),gp=Error(r(474)),Bu=Error(r(542)),zu={then:function(){}};function Ob(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rb(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(be,be),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jb(i),i;default:if(typeof a.status=="string")a.then(be,be);else{if(i=Ot,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=f}},function(f){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,jb(i),i}throw No=a,Ea}}function Co(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(No=c,Ea):c}}var No=null;function Db(){if(No===null)throw Error(r(459));var i=No;return No=null,i}function jb(i){if(i===Ea||i===Bu)throw Error(r(483))}var Ca=null,Bl=0;function Iu(i){var a=Bl;return Bl+=1,Ca===null&&(Ca=[]),Rb(Ca,i,a)}function zl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Hu(i,a){throw a.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function _b(i){function a($,z){if(i){var P=$.deletions;P===null?($.deletions=[z],$.flags|=16):P.push(z)}}function c($,z){if(!i)return null;for(;z!==null;)a($,z),z=z.sibling;return null}function f($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function g($,z){return $=_i($,z),$.index=0,$.sibling=null,$}function b($,z,P){return $.index=P,i?(P=$.alternate,P!==null?(P=P.index,P<z?($.flags|=67108866,z):P):($.flags|=67108866,z)):($.flags|=1048576,z)}function E($){return i&&$.alternate===null&&($.flags|=67108866),$}function k($,z,P,ee){return z===null||z.tag!==6?(z=ip(P,$.mode,ee),z.return=$,z):(z=g(z,P),z.return=$,z)}function _($,z,P,ee){var Ie=P.type;return Ie===S?Z($,z,P.props.children,ee,P.key):z!==null&&(z.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===W&&Co(Ie)===z.type)?(z=g(z,P.props),zl(z,P),z.return=$,z):(z=Ru(P.type,P.key,P.props,null,$.mode,ee),zl(z,P),z.return=$,z)}function F($,z,P,ee){return z===null||z.tag!==4||z.stateNode.containerInfo!==P.containerInfo||z.stateNode.implementation!==P.implementation?(z=sp(P,$.mode,ee),z.return=$,z):(z=g(z,P.children||[]),z.return=$,z)}function Z($,z,P,ee,Ie){return z===null||z.tag!==7?(z=xo(P,$.mode,ee,Ie),z.return=$,z):(z=g(z,P),z.return=$,z)}function ne($,z,P){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ip(""+z,$.mode,P),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return P=Ru(z.type,z.key,z.props,null,$.mode,P),zl(P,z),P.return=$,P;case w:return z=sp(z,$.mode,P),z.return=$,z;case W:return z=Co(z),ne($,z,P)}if(he(z)||q(z))return z=xo(z,$.mode,P,null),z.return=$,z;if(typeof z.then=="function")return ne($,Iu(z),P);if(z.$$typeof===R)return ne($,_u($,z),P);Hu($,z)}return null}function G($,z,P,ee){var Ie=z!==null?z.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return Ie!==null?null:k($,z,""+P,ee);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case v:return P.key===Ie?_($,z,P,ee):null;case w:return P.key===Ie?F($,z,P,ee):null;case W:return P=Co(P),G($,z,P,ee)}if(he(P)||q(P))return Ie!==null?null:Z($,z,P,ee,null);if(typeof P.then=="function")return G($,z,Iu(P),ee);if(P.$$typeof===R)return G($,z,_u($,P),ee);Hu($,P)}return null}function J($,z,P,ee,Ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return $=$.get(P)||null,k(z,$,""+ee,Ie);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return $=$.get(ee.key===null?P:ee.key)||null,_(z,$,ee,Ie);case w:return $=$.get(ee.key===null?P:ee.key)||null,F(z,$,ee,Ie);case W:return ee=Co(ee),J($,z,P,ee,Ie)}if(he(ee)||q(ee))return $=$.get(P)||null,Z(z,$,ee,Ie,null);if(typeof ee.then=="function")return J($,z,P,Iu(ee),Ie);if(ee.$$typeof===R)return J($,z,P,_u(z,ee),Ie);Hu(z,ee)}return null}function Ae($,z,P,ee){for(var Ie=null,gt=null,je=z,tt=z=0,ut=null;je!==null&&tt<P.length;tt++){je.index>tt?(ut=je,je=null):ut=je.sibling;var yt=G($,je,P[tt],ee);if(yt===null){je===null&&(je=ut);break}i&&je&&yt.alternate===null&&a($,je),z=b(yt,z,tt),gt===null?Ie=yt:gt.sibling=yt,gt=yt,je=ut}if(tt===P.length)return c($,je),ft&&Li($,tt),Ie;if(je===null){for(;tt<P.length;tt++)je=ne($,P[tt],ee),je!==null&&(z=b(je,z,tt),gt===null?Ie=je:gt.sibling=je,gt=je);return ft&&Li($,tt),Ie}for(je=f(je);tt<P.length;tt++)ut=J(je,$,tt,P[tt],ee),ut!==null&&(i&&ut.alternate!==null&&je.delete(ut.key===null?tt:ut.key),z=b(ut,z,tt),gt===null?Ie=ut:gt.sibling=ut,gt=ut);return i&&je.forEach(function(zs){return a($,zs)}),ft&&Li($,tt),Ie}function qe($,z,P,ee){if(P==null)throw Error(r(151));for(var Ie=null,gt=null,je=z,tt=z=0,ut=null,yt=P.next();je!==null&&!yt.done;tt++,yt=P.next()){je.index>tt?(ut=je,je=null):ut=je.sibling;var zs=G($,je,yt.value,ee);if(zs===null){je===null&&(je=ut);break}i&&je&&zs.alternate===null&&a($,je),z=b(zs,z,tt),gt===null?Ie=zs:gt.sibling=zs,gt=zs,je=ut}if(yt.done)return c($,je),ft&&Li($,tt),Ie;if(je===null){for(;!yt.done;tt++,yt=P.next())yt=ne($,yt.value,ee),yt!==null&&(z=b(yt,z,tt),gt===null?Ie=yt:gt.sibling=yt,gt=yt);return ft&&Li($,tt),Ie}for(je=f(je);!yt.done;tt++,yt=P.next())yt=J(je,$,tt,yt.value,ee),yt!==null&&(i&&yt.alternate!==null&&je.delete(yt.key===null?tt:yt.key),z=b(yt,z,tt),gt===null?Ie=yt:gt.sibling=yt,gt=yt);return i&&je.forEach(function(wA){return a($,wA)}),ft&&Li($,tt),Ie}function kt($,z,P,ee){if(typeof P=="object"&&P!==null&&P.type===S&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case v:e:{for(var Ie=P.key;z!==null;){if(z.key===Ie){if(Ie=P.type,Ie===S){if(z.tag===7){c($,z.sibling),ee=g(z,P.props.children),ee.return=$,$=ee;break e}}else if(z.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===W&&Co(Ie)===z.type){c($,z.sibling),ee=g(z,P.props),zl(ee,P),ee.return=$,$=ee;break e}c($,z);break}else a($,z);z=z.sibling}P.type===S?(ee=xo(P.props.children,$.mode,ee,P.key),ee.return=$,$=ee):(ee=Ru(P.type,P.key,P.props,null,$.mode,ee),zl(ee,P),ee.return=$,$=ee)}return E($);case w:e:{for(Ie=P.key;z!==null;){if(z.key===Ie)if(z.tag===4&&z.stateNode.containerInfo===P.containerInfo&&z.stateNode.implementation===P.implementation){c($,z.sibling),ee=g(z,P.children||[]),ee.return=$,$=ee;break e}else{c($,z);break}else a($,z);z=z.sibling}ee=sp(P,$.mode,ee),ee.return=$,$=ee}return E($);case W:return P=Co(P),kt($,z,P,ee)}if(he(P))return Ae($,z,P,ee);if(q(P)){if(Ie=q(P),typeof Ie!="function")throw Error(r(150));return P=Ie.call(P),qe($,z,P,ee)}if(typeof P.then=="function")return kt($,z,Iu(P),ee);if(P.$$typeof===R)return kt($,z,_u($,P),ee);Hu($,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,z!==null&&z.tag===6?(c($,z.sibling),ee=g(z,P),ee.return=$,$=ee):(c($,z),ee=ip(P,$.mode,ee),ee.return=$,$=ee),E($)):c($,z)}return function($,z,P,ee){try{Bl=0;var Ie=kt($,z,P,ee);return Ca=null,Ie}catch(je){if(je===Ea||je===Bu)throw je;var gt=wr(29,je,null,$.mode);return gt.lanes=ee,gt.return=$,gt}finally{}}}var To=_b(!0),Lb=_b(!1),vs=!1;function yp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ws(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ss(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(bt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,a=Ou(i),bb(i,null,c),a}return Mu(i,f,a,c),Ou(i)}function Il(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Re(i,c)}}function xp(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,c=c.next}while(c!==null);b===null?g=b=a:b=b.next=a}else g=b=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var vp=!1;function Hl(){if(vp){var i=Sa;if(i!==null)throw i}}function Ul(i,a,c,f){vp=!1;var g=i.updateQueue;vs=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var _=k,F=_.next;_.next=null,E===null?b=F:E.next=F,E=_;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,k=Z.lastBaseUpdate,k!==E&&(k===null?Z.firstBaseUpdate=F:k.next=F,Z.lastBaseUpdate=_))}if(b!==null){var ne=g.baseState;E=0,Z=F=_=null,k=b;do{var G=k.lane&-536870913,J=G!==k.lane;if(J?(ct&G)===G:(f&G)===G){G!==0&&G===wa&&(vp=!0),Z!==null&&(Z=Z.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ae=i,qe=k;G=a;var kt=c;switch(qe.tag){case 1:if(Ae=qe.payload,typeof Ae=="function"){ne=Ae.call(kt,ne,G);break e}ne=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=qe.payload,G=typeof Ae=="function"?Ae.call(kt,ne,G):Ae,G==null)break e;ne=m({},ne,G);break e;case 2:vs=!0}}G=k.callback,G!==null&&(i.flags|=64,J&&(i.flags|=8192),J=g.callbacks,J===null?g.callbacks=[G]:J.push(G))}else J={lane:G,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Z===null?(F=Z=J,_=ne):Z=Z.next=J,E|=G;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;J=k,k=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);Z===null&&(_=ne),g.baseState=_,g.firstBaseUpdate=F,g.lastBaseUpdate=Z,b===null&&(g.shared.lanes=0),ks|=E,i.lanes=E,i.memoizedState=ne}}function Bb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function zb(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Bb(c[i],a)}var Na=O(null),Uu=O(0);function Ib(i,a){i=Gi,Y(Uu,i),Y(Na,a),Gi=i|a.baseLanes}function wp(){Y(Uu,Gi),Y(Na,Na.current)}function Sp(){Gi=Uu.current,V(Na),V(Uu)}var Sr=O(null),Ir=null;function Es(i){var a=i.alternate;Y(ln,ln.current&1),Y(Sr,i),Ir===null&&(a===null||Na.current!==null||a.memoizedState!==null)&&(Ir=i)}function Ep(i){Y(ln,ln.current),Y(Sr,i),Ir===null&&(Ir=i)}function Hb(i){i.tag===22?(Y(ln,ln.current),Y(Sr,i),Ir===null&&(Ir=i)):Cs()}function Cs(){Y(ln,ln.current),Y(Sr,Sr.current)}function Er(i){V(Sr),Ir===i&&(Ir=null),V(ln)}var ln=O(0);function $u(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Mm(c)||Om(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ii=0,et=null,Nt=null,mn=null,qu=!1,Ta=!1,ko=!1,Pu=0,$l=0,ka=null,dk=0;function Zt(){throw Error(r(321))}function Cp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!vr(i[c],a[c]))return!1;return!0}function Np(i,a,c,f,g,b){return Ii=b,et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,B.H=i===null||i.memoizedState===null?Sx:Up,ko=!1,b=c(f,g),ko=!1,Ta&&(b=$b(a,c,f,g)),Ub(i),b}function Ub(i){B.H=Vl;var a=Nt!==null&&Nt.next!==null;if(Ii=0,mn=Nt=et=null,qu=!1,$l=0,ka=null,a)throw Error(r(300));i===null||gn||(i=i.dependencies,i!==null&&ju(i)&&(gn=!0))}function $b(i,a,c,f){et=i;var g=0;do{if(Ta&&(ka=null),$l=0,Ta=!1,25<=g)throw Error(r(301));if(g+=1,mn=Nt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}B.H=Ex,b=a(c,f)}while(Ta);return b}function fk(){var i=B.H,a=i.useState()[0];return a=typeof a.then=="function"?ql(a):a,i=i.useState()[0],(Nt!==null?Nt.memoizedState:null)!==i&&(et.flags|=1024),a}function Tp(){var i=Pu!==0;return Pu=0,i}function kp(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Ap(i){if(qu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}qu=!1}Ii=0,mn=Nt=et=null,Ta=!1,$l=Pu=0,ka=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?et.memoizedState=mn=i:mn=mn.next=i,mn}function cn(){if(Nt===null){var i=et.alternate;i=i!==null?i.memoizedState:null}else i=Nt.next;var a=mn===null?et.memoizedState:mn.next;if(a!==null)mn=a,Nt=i;else{if(i===null)throw et.alternate===null?Error(r(467)):Error(r(310));Nt=i,i={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},mn===null?et.memoizedState=mn=i:mn=mn.next=i}return mn}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(i){var a=$l;return $l+=1,ka===null&&(ka=[]),i=Rb(ka,i,a),a=et,(mn===null?a.memoizedState:mn.next)===null&&(a=a.alternate,B.H=a===null||a.memoizedState===null?Sx:Up),i}function Fu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ql(i);if(i.$$typeof===R)return Ln(i)}throw Error(r(438,String(i)))}function Mp(i){var a=null,c=et.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=et.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Vu(),et.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),f=0;f<i;f++)c[f]=me;return a.index++,c}function Hi(i,a){return typeof a=="function"?a(i):a}function Gu(i){var a=cn();return Op(a,Nt,i)}function Op(i,a,c){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=i.baseQueue,b=f.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}a.baseQueue=g=b,f.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{a=g.next;var k=E=null,_=null,F=a,Z=!1;do{var ne=F.lane&-536870913;if(ne!==F.lane?(ct&ne)===ne:(Ii&ne)===ne){var G=F.revertLane;if(G===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ne===wa&&(Z=!0);else if((Ii&G)===G){F=F.next,G===wa&&(Z=!0);continue}else ne={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},_===null?(k=_=ne,E=b):_=_.next=ne,et.lanes|=G,ks|=G;ne=F.action,ko&&c(b,ne),b=F.hasEagerState?F.eagerState:c(b,ne)}else G={lane:ne,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},_===null?(k=_=G,E=b):_=_.next=G,et.lanes|=ne,ks|=ne;F=F.next}while(F!==null&&F!==a);if(_===null?E=b:_.next=k,!vr(b,i.memoizedState)&&(gn=!0,Z&&(c=Sa,c!==null)))throw c;i.memoizedState=b,i.baseState=E,i.baseQueue=_,f.lastRenderedState=b}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Rp(i){var a=cn(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,b=a.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do b=i(b,E.action),E=E.next;while(E!==g);vr(b,a.memoizedState)||(gn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,f]}function qb(i,a,c){var f=et,g=cn(),b=ft;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=a();var E=!vr((Nt||g).memoizedState,c);if(E&&(g.memoizedState=c,gn=!0),g=g.queue,_p(Fb.bind(null,f,g,i),[i]),g.getSnapshot!==a||E||mn!==null&&mn.memoizedState.tag&1){if(f.flags|=2048,Aa(9,{destroy:void 0},Vb.bind(null,f,g,c,a),null),Ot===null)throw Error(r(349));b||(Ii&127)!==0||Pb(f,a,c)}return c}function Pb(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=et.updateQueue,a===null?(a=Vu(),et.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function Vb(i,a,c,f){a.value=c,a.getSnapshot=f,Gb(a)&&Kb(i)}function Fb(i,a,c){return c(function(){Gb(a)&&Kb(i)})}function Gb(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!vr(i,c)}catch{return!0}}function Kb(i){var a=bo(i,2);a!==null&&cr(a,i,2)}function Dp(i){var a=Jn();if(typeof i=="function"){var c=i;if(i=c(),ko){Ce(!0);try{c()}finally{Ce(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:i},a}function Wb(i,a,c,f){return i.baseState=c,Op(i,Nt,typeof f=="function"?f:Hi)}function hk(i,a,c,f,g){if(Qu(i))throw Error(r(485));if(i=a.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};B.T!==null?c(!0):b.isTransition=!1,f(b),c=a.pending,c===null?(b.next=a.pending=b,Qb(a,b)):(b.next=c.next,a.pending=c.next=b)}}function Qb(i,a){var c=a.action,f=a.payload,g=i.state;if(a.isTransition){var b=B.T,E={};B.T=E;try{var k=c(g,f),_=B.S;_!==null&&_(E,k),Yb(i,a,k)}catch(F){jp(i,a,F)}finally{b!==null&&E.types!==null&&(b.types=E.types),B.T=b}}else try{b=c(g,f),Yb(i,a,b)}catch(F){jp(i,a,F)}}function Yb(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Xb(i,a,f)},function(f){return jp(i,a,f)}):Xb(i,a,c)}function Xb(i,a,c){a.status="fulfilled",a.value=c,Jb(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,Qb(i,c)))}function jp(i,a,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,Jb(a),a=a.next;while(a!==f)}i.action=null}function Jb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Zb(i,a){return a}function ex(i,a){if(ft){var c=Ot.formState;if(c!==null){e:{var f=et;if(ft){if($t){t:{for(var g=$t,b=zr;g.nodeType!==8;){if(!b){g=null;break t}if(g=Hr(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){$t=Hr(g.nextSibling),f=g.data==="F!";break e}}bs(f)}f=!1}f&&(a=c[0])}}return c=Jn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:a},c.queue=f,c=xx.bind(null,et,f),f.dispatch=c,f=Dp(!1),b=Hp.bind(null,et,!1,f.queue),f=Jn(),g={state:a,dispatch:null,action:i,pending:null},f.queue=g,c=hk.bind(null,et,g,b,c),g.dispatch=c,f.memoizedState=i,[a,c,!1]}function tx(i){var a=cn();return nx(a,Nt,i)}function nx(i,a,c){if(a=Op(i,a,Zb)[0],i=Gu(Hi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=ql(a)}catch(E){throw E===Ea?Bu:E}else f=a;a=cn();var g=a.queue,b=g.dispatch;return c!==a.memoizedState&&(et.flags|=2048,Aa(9,{destroy:void 0},pk.bind(null,g,c),null)),[f,b,i]}function pk(i,a){i.action=a}function rx(i){var a=cn(),c=Nt;if(c!==null)return nx(a,c,i);cn(),a=a.memoizedState,c=cn();var f=c.queue.dispatch;return c.memoizedState=i,[a,f,!1]}function Aa(i,a,c,f){return i={tag:i,create:c,deps:f,inst:a,next:null},a=et.updateQueue,a===null&&(a=Vu(),et.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i),i}function ix(){return cn().memoizedState}function Ku(i,a,c,f){var g=Jn();et.flags|=i,g.memoizedState=Aa(1|a,{destroy:void 0},c,f===void 0?null:f)}function Wu(i,a,c,f){var g=cn();f=f===void 0?null:f;var b=g.memoizedState.inst;Nt!==null&&f!==null&&Cp(f,Nt.memoizedState.deps)?g.memoizedState=Aa(a,b,c,f):(et.flags|=i,g.memoizedState=Aa(1|a,b,c,f))}function sx(i,a){Ku(8390656,8,i,a)}function _p(i,a){Wu(2048,8,i,a)}function mk(i){et.flags|=4;var a=et.updateQueue;if(a===null)a=Vu(),et.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function ox(i){var a=cn().memoizedState;return mk({ref:a,nextImpl:i}),function(){if((bt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function ax(i,a){return Wu(4,2,i,a)}function lx(i,a){return Wu(4,4,i,a)}function cx(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function ux(i,a,c){c=c!=null?c.concat([i]):null,Wu(4,4,cx.bind(null,a,i),c)}function Lp(){}function dx(i,a){var c=cn();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Cp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function fx(i,a){var c=cn();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Cp(a,f[1]))return f[0];if(f=i(),ko){Ce(!0);try{i()}finally{Ce(!1)}}return c.memoizedState=[f,a],f}function Bp(i,a,c){return c===void 0||(Ii&1073741824)!==0&&(ct&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=hv(),et.lanes|=i,ks|=i,c)}function hx(i,a,c,f){return vr(c,a)?c:Na.current!==null?(i=Bp(i,c,f),vr(i,a)||(gn=!0),i):(Ii&42)===0||(Ii&1073741824)!==0&&(ct&261930)===0?(gn=!0,i.memoizedState=c):(i=hv(),et.lanes|=i,ks|=i,a)}function px(i,a,c,f,g){var b=D.p;D.p=b!==0&&8>b?b:8;var E=B.T,k={};B.T=k,Hp(i,!1,a,c);try{var _=g(),F=B.S;if(F!==null&&F(k,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var Z=uk(_,f);Pl(i,a,Z,Tr(i))}else Pl(i,a,f,Tr(i))}catch(ne){Pl(i,a,{then:function(){},status:"rejected",reason:ne},Tr())}finally{D.p=b,E!==null&&k.types!==null&&(E.types=k.types),B.T=E}}function gk(){}function zp(i,a,c,f){if(i.tag!==5)throw Error(r(476));var g=mx(i).queue;px(i,g,a,U,c===null?gk:function(){return gx(i),c(f)})}function mx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:U},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function gx(i){var a=mx(i);a.next===null&&(a=i.alternate.memoizedState),Pl(i,a.next.queue,{},Tr())}function Ip(){return Ln(oc)}function yx(){return cn().memoizedState}function bx(){return cn().memoizedState}function yk(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Tr();i=ws(c);var f=Ss(a,i,c);f!==null&&(cr(f,a,c),Il(f,a,c)),a={cache:hp()},i.payload=a;return}a=a.return}}function bk(i,a,c){var f=Tr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qu(i)?vx(a,c):(c=np(i,a,c,f),c!==null&&(cr(c,i,f),wx(c,a,f)))}function xx(i,a,c){var f=Tr();Pl(i,a,c,f)}function Pl(i,a,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Qu(i))vx(a,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var E=a.lastRenderedState,k=b(E,c);if(g.hasEagerState=!0,g.eagerState=k,vr(k,E))return Mu(i,a,g,0),Ot===null&&Au(),!1}catch{}finally{}if(c=np(i,a,g,f),c!==null)return cr(c,i,f),wx(c,a,f),!0}return!1}function Hp(i,a,c,f){if(f={lane:2,revertLane:ym(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Qu(i)){if(a)throw Error(r(479))}else a=np(i,c,f,2),a!==null&&cr(a,i,2)}function Qu(i){var a=i.alternate;return i===et||a!==null&&a===et}function vx(i,a){Ta=qu=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function wx(i,a,c){if((c&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Re(i,c)}}var Vl={readContext:Ln,use:Fu,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};Vl.useEffectEvent=Zt;var Sx={readContext:Ln,use:Fu,useCallback:function(i,a){return Jn().memoizedState=[i,a===void 0?null:a],i},useContext:Ln,useEffect:sx,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,Ku(4194308,4,cx.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Ku(4194308,4,i,a)},useInsertionEffect:function(i,a){Ku(4,2,i,a)},useMemo:function(i,a){var c=Jn();a=a===void 0?null:a;var f=i();if(ko){Ce(!0);try{i()}finally{Ce(!1)}}return c.memoizedState=[f,a],f},useReducer:function(i,a,c){var f=Jn();if(c!==void 0){var g=c(a);if(ko){Ce(!0);try{c(a)}finally{Ce(!1)}}}else g=a;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=bk.bind(null,et,i),[f.memoizedState,i]},useRef:function(i){var a=Jn();return i={current:i},a.memoizedState=i},useState:function(i){i=Dp(i);var a=i.queue,c=xx.bind(null,et,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:Lp,useDeferredValue:function(i,a){var c=Jn();return Bp(c,i,a)},useTransition:function(){var i=Dp(!1);return i=px.bind(null,et,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var f=et,g=Jn();if(ft){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Ot===null)throw Error(r(349));(ct&127)!==0||Pb(f,a,c)}g.memoizedState=c;var b={value:c,getSnapshot:a};return g.queue=b,sx(Fb.bind(null,f,b,i),[i]),f.flags|=2048,Aa(9,{destroy:void 0},Vb.bind(null,f,b,c,a),null),c},useId:function(){var i=Jn(),a=Ot.identifierPrefix;if(ft){var c=ui,f=ci;c=(f&~(1<<32-ke(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Pu++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=dk++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Ip,useFormState:ex,useActionState:ex,useOptimistic:function(i){var a=Jn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Hp.bind(null,et,!0,c),c.dispatch=a,[i,a]},useMemoCache:Mp,useCacheRefresh:function(){return Jn().memoizedState=yk.bind(null,et)},useEffectEvent:function(i){var a=Jn(),c={impl:i};return a.memoizedState=c,function(){if((bt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Up={readContext:Ln,use:Fu,useCallback:dx,useContext:Ln,useEffect:_p,useImperativeHandle:ux,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:fx,useReducer:Gu,useRef:ix,useState:function(){return Gu(Hi)},useDebugValue:Lp,useDeferredValue:function(i,a){var c=cn();return hx(c,Nt.memoizedState,i,a)},useTransition:function(){var i=Gu(Hi)[0],a=cn().memoizedState;return[typeof i=="boolean"?i:ql(i),a]},useSyncExternalStore:qb,useId:yx,useHostTransitionStatus:Ip,useFormState:tx,useActionState:tx,useOptimistic:function(i,a){var c=cn();return Wb(c,Nt,i,a)},useMemoCache:Mp,useCacheRefresh:bx};Up.useEffectEvent=ox;var Ex={readContext:Ln,use:Fu,useCallback:dx,useContext:Ln,useEffect:_p,useImperativeHandle:ux,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:fx,useReducer:Rp,useRef:ix,useState:function(){return Rp(Hi)},useDebugValue:Lp,useDeferredValue:function(i,a){var c=cn();return Nt===null?Bp(c,i,a):hx(c,Nt.memoizedState,i,a)},useTransition:function(){var i=Rp(Hi)[0],a=cn().memoizedState;return[typeof i=="boolean"?i:ql(i),a]},useSyncExternalStore:qb,useId:yx,useHostTransitionStatus:Ip,useFormState:rx,useActionState:rx,useOptimistic:function(i,a){var c=cn();return Nt!==null?Wb(c,Nt,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Mp,useCacheRefresh:bx};Ex.useEffectEvent=ox;function $p(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var qp={enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Tr(),g=ws(f);g.payload=a,c!=null&&(g.callback=c),a=Ss(i,g,f),a!==null&&(cr(a,i,f),Il(a,i,f))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Tr(),g=ws(f);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Ss(i,g,f),a!==null&&(cr(a,i,f),Il(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Tr(),f=ws(c);f.tag=2,a!=null&&(f.callback=a),a=Ss(i,f,c),a!==null&&(cr(a,i,c),Il(a,i,c))}};function Cx(i,a,c,f,g,b,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,E):a.prototype&&a.prototype.isPureReactComponent?!Ol(c,f)||!Ol(g,b):!0}function Nx(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&qp.enqueueReplaceState(a,a.state,null)}function Ao(i,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Tx(i){ku(i)}function kx(i){console.error(i)}function Ax(i){ku(i)}function Yu(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Mx(i,a,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Pp(i,a,c){return c=ws(c),c.tag=3,c.payload={element:null},c.callback=function(){Yu(i,a)},c}function Ox(i){return i=ws(i),i.tag=3,i}function Rx(i,a,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;i.payload=function(){return g(b)},i.callback=function(){Mx(a,c,f)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Mx(a,c,f),typeof g!="function"&&(As===null?As=new Set([this]):As.add(this));var k=f.stack;this.componentDidCatch(f.value,{componentStack:k!==null?k:""})})}function xk(i,a,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&va(a,c,g,!0),c=Sr.current,c!==null){switch(c.tag){case 31:case 13:return Ir===null?ld():c.alternate===null&&en===0&&(en=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===zu?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),pm(i,f,g)),!1;case 22:return c.flags|=65536,f===zu?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),pm(i,f,g)),!1}throw Error(r(435,c.tag))}return pm(i,f,g),ld(),!1}if(ft)return a=Sr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,f!==lp&&(i=Error(r(422),{cause:f}),jl(_r(i,c)))):(f!==lp&&(a=Error(r(423),{cause:f}),jl(_r(a,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=_r(f,c),g=Pp(i.stateNode,f,g),xp(i,g),en!==4&&(en=2)),!1;var b=Error(r(520),{cause:f});if(b=_r(b,c),Jl===null?Jl=[b]:Jl.push(b),en!==4&&(en=2),a===null)return!0;f=_r(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=Pp(c.stateNode,f,i),xp(c,i),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(As===null||!As.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Ox(g),Rx(g,i,c,f),xp(c,g),!1}c=c.return}while(c!==null);return!1}var Vp=Error(r(461)),gn=!1;function Bn(i,a,c,f){a.child=i===null?Lb(a,null,c,f):To(a,i.child,c,f)}function Dx(i,a,c,f,g){c=c.render;var b=a.ref;if("ref"in f){var E={};for(var k in f)k!=="ref"&&(E[k]=f[k])}else E=f;return So(a),f=Np(i,a,c,E,b,g),k=Tp(),i!==null&&!gn?(kp(i,a,g),Ui(i,a,g)):(ft&&k&&op(a),a.flags|=1,Bn(i,a,f,g),a.child)}function jx(i,a,c,f,g){if(i===null){var b=c.type;return typeof b=="function"&&!rp(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,_x(i,a,b,f,g)):(i=Ru(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!Jp(i,g)){var E=b.memoizedProps;if(c=c.compare,c=c!==null?c:Ol,c(E,f)&&i.ref===a.ref)return Ui(i,a,g)}return a.flags|=1,i=_i(b,f),i.ref=a.ref,i.return=a,a.child=i}function _x(i,a,c,f,g){if(i!==null){var b=i.memoizedProps;if(Ol(b,f)&&i.ref===a.ref)if(gn=!1,a.pendingProps=f=b,Jp(i,g))(i.flags&131072)!==0&&(gn=!0);else return a.lanes=i.lanes,Ui(i,a,g)}return Fp(i,a,c,f,g)}function Lx(i,a,c,f){var g=f.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(f=a.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~b}else f=0,a.child=null;return Bx(i,a,b,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Lu(a,b!==null?b.cachePool:null),b!==null?Ib(a,b):wp(),Hb(a);else return f=a.lanes=536870912,Bx(i,a,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(Lu(a,b.cachePool),Ib(a,b),Cs(),a.memoizedState=null):(i!==null&&Lu(a,null),wp(),Cs());return Bn(i,a,g,c),a.child}function Fl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Bx(i,a,c,f,g){var b=mp();return b=b===null?null:{parent:pn._currentValue,pool:b},a.memoizedState={baseLanes:c,cachePool:b},i!==null&&Lu(a,null),wp(),Hb(a),i!==null&&va(i,a,f,!0),a.childLanes=g,null}function Xu(i,a){return a=Zu({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function zx(i,a,c){return To(a,i.child,null,c),i=Xu(a,a.pendingProps),i.flags|=2,Er(a),a.memoizedState=null,i}function vk(i,a,c){var f=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(ft){if(f.mode==="hidden")return i=Xu(a,f),a.lanes=536870912,Fl(null,i);if(Ep(a),(i=$t)?(i=Qv(i,zr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:gs!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},c=vb(i),c.return=a,a.child=c,_n=a,$t=null)):i=null,i===null)throw bs(a);return a.lanes=536870912,null}return Xu(a,f)}var b=i.memoizedState;if(b!==null){var E=b.dehydrated;if(Ep(a),g)if(a.flags&256)a.flags&=-257,a=zx(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(gn||va(i,a,c,!1),g=(c&i.childLanes)!==0,gn||g){if(f=Ot,f!==null&&(E=mt(f,c),E!==0&&E!==b.retryLane))throw b.retryLane=E,bo(i,E),cr(f,i,E),Vp;ld(),a=zx(i,a,c)}else i=b.treeContext,$t=Hr(E.nextSibling),_n=a,ft=!0,ys=null,zr=!1,i!==null&&Eb(a,i),a=Xu(a,f),a.flags|=4096;return a}return i=_i(i.child,{mode:f.mode,children:f.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Ju(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function Fp(i,a,c,f,g){return So(a),c=Np(i,a,c,f,void 0,g),f=Tp(),i!==null&&!gn?(kp(i,a,g),Ui(i,a,g)):(ft&&f&&op(a),a.flags|=1,Bn(i,a,c,g),a.child)}function Ix(i,a,c,f,g,b){return So(a),a.updateQueue=null,c=$b(a,f,c,g),Ub(i),f=Tp(),i!==null&&!gn?(kp(i,a,b),Ui(i,a,b)):(ft&&f&&op(a),a.flags|=1,Bn(i,a,c,b),a.child)}function Hx(i,a,c,f,g){if(So(a),a.stateNode===null){var b=ga,E=c.contextType;typeof E=="object"&&E!==null&&(b=Ln(E)),b=new c(f,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=qp,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=f,b.state=a.memoizedState,b.refs={},yp(a),E=c.contextType,b.context=typeof E=="object"&&E!==null?Ln(E):ga,b.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&($p(a,c,E,f),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&qp.enqueueReplaceState(b,b.state,null),Ul(a,f,b,g),Hl(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){b=a.stateNode;var k=a.memoizedProps,_=Ao(c,k);b.props=_;var F=b.context,Z=c.contextType;E=ga,typeof Z=="object"&&Z!==null&&(E=Ln(Z));var ne=c.getDerivedStateFromProps;Z=typeof ne=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,Z||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||F!==E)&&Nx(a,b,f,E),vs=!1;var G=a.memoizedState;b.state=G,Ul(a,f,b,g),Hl(),F=a.memoizedState,k||G!==F||vs?(typeof ne=="function"&&($p(a,c,ne,f),F=a.memoizedState),(_=vs||Cx(a,c,_,f,G,F,E))?(Z||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),b.props=f,b.state=F,b.context=E,f=_):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{b=a.stateNode,bp(i,a),E=a.memoizedProps,Z=Ao(c,E),b.props=Z,ne=a.pendingProps,G=b.context,F=c.contextType,_=ga,typeof F=="object"&&F!==null&&(_=Ln(F)),k=c.getDerivedStateFromProps,(F=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==ne||G!==_)&&Nx(a,b,f,_),vs=!1,G=a.memoizedState,b.state=G,Ul(a,f,b,g),Hl();var J=a.memoizedState;E!==ne||G!==J||vs||i!==null&&i.dependencies!==null&&ju(i.dependencies)?(typeof k=="function"&&($p(a,c,k,f),J=a.memoizedState),(Z=vs||Cx(a,c,Z,f,G,J,_)||i!==null&&i.dependencies!==null&&ju(i.dependencies))?(F||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,J,_),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,J,_)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=J),b.props=f,b.state=J,b.context=_,f=Z):(typeof b.componentDidUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),f=!1)}return b=f,Ju(i,a),f=(a.flags&128)!==0,b||f?(b=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&f?(a.child=To(a,i.child,null,g),a.child=To(a,null,c,g)):Bn(i,a,c,g),a.memoizedState=b.state,i=a.child):i=Ui(i,a,g),i}function Ux(i,a,c,f){return vo(),a.flags|=256,Bn(i,a,c,f),a.child}var Gp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kp(i){return{baseLanes:i,cachePool:Mb()}}function Wp(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Nr),i}function $x(i,a,c){var f=a.pendingProps,g=!1,b=(a.flags&128)!==0,E;if((E=b)||(E=i!==null&&i.memoizedState===null?!1:(ln.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(ft){if(g?Es(a):Cs(),(i=$t)?(i=Qv(i,zr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:gs!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},c=vb(i),c.return=a,a.child=c,_n=a,$t=null)):i=null,i===null)throw bs(a);return Om(i)?a.lanes=32:a.lanes=536870912,null}var k=f.children;return f=f.fallback,g?(Cs(),g=a.mode,k=Zu({mode:"hidden",children:k},g),f=xo(f,g,c,null),k.return=a,f.return=a,k.sibling=f,a.child=k,f=a.child,f.memoizedState=Kp(c),f.childLanes=Wp(i,E,c),a.memoizedState=Gp,Fl(null,f)):(Es(a),Qp(a,k))}var _=i.memoizedState;if(_!==null&&(k=_.dehydrated,k!==null)){if(b)a.flags&256?(Es(a),a.flags&=-257,a=Yp(i,a,c)):a.memoizedState!==null?(Cs(),a.child=i.child,a.flags|=128,a=null):(Cs(),k=f.fallback,g=a.mode,f=Zu({mode:"visible",children:f.children},g),k=xo(k,g,c,null),k.flags|=2,f.return=a,k.return=a,f.sibling=k,a.child=f,To(a,i.child,null,c),f=a.child,f.memoizedState=Kp(c),f.childLanes=Wp(i,E,c),a.memoizedState=Gp,a=Fl(null,f));else if(Es(a),Om(k)){if(E=k.nextSibling&&k.nextSibling.dataset,E)var F=E.dgst;E=F,f=Error(r(419)),f.stack="",f.digest=E,jl({value:f,source:null,stack:null}),a=Yp(i,a,c)}else if(gn||va(i,a,c,!1),E=(c&i.childLanes)!==0,gn||E){if(E=Ot,E!==null&&(f=mt(E,c),f!==0&&f!==_.retryLane))throw _.retryLane=f,bo(i,f),cr(E,i,f),Vp;Mm(k)||ld(),a=Yp(i,a,c)}else Mm(k)?(a.flags|=192,a.child=i.child,a=null):(i=_.treeContext,$t=Hr(k.nextSibling),_n=a,ft=!0,ys=null,zr=!1,i!==null&&Eb(a,i),a=Qp(a,f.children),a.flags|=4096);return a}return g?(Cs(),k=f.fallback,g=a.mode,_=i.child,F=_.sibling,f=_i(_,{mode:"hidden",children:f.children}),f.subtreeFlags=_.subtreeFlags&65011712,F!==null?k=_i(F,k):(k=xo(k,g,c,null),k.flags|=2),k.return=a,f.return=a,f.sibling=k,a.child=f,Fl(null,f),f=a.child,k=i.child.memoizedState,k===null?k=Kp(c):(g=k.cachePool,g!==null?(_=pn._currentValue,g=g.parent!==_?{parent:_,pool:_}:g):g=Mb(),k={baseLanes:k.baseLanes|c,cachePool:g}),f.memoizedState=k,f.childLanes=Wp(i,E,c),a.memoizedState=Gp,Fl(i.child,f)):(Es(a),c=i.child,i=c.sibling,c=_i(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=c,a.memoizedState=null,c)}function Qp(i,a){return a=Zu({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Zu(i,a){return i=wr(22,i,null,a),i.lanes=0,i}function Yp(i,a,c){return To(a,i.child,null,c),i=Qp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function qx(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),dp(i.return,a,c)}function Xp(i,a,c,f,g,b){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:b}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=c,E.tailMode=g,E.treeForkCount=b)}function Px(i,a,c){var f=a.pendingProps,g=f.revealOrder,b=f.tail;f=f.children;var E=ln.current,k=(E&2)!==0;if(k?(E=E&1|2,a.flags|=128):E&=1,Y(ln,E),Bn(i,a,f,c),f=ft?Dl:0,!k&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&qx(i,c,a);else if(i.tag===19)qx(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&$u(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Xp(a,!1,g,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&$u(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Xp(a,!0,c,null,b,f);break;case"together":Xp(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Ui(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),ks|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(va(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,c=_i(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=_i(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Jp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&ju(i)))}function wk(i,a,c){switch(a.tag){case 3:ae(a,a.stateNode.containerInfo),xs(a,pn,i.memoizedState.cache),vo();break;case 27:case 5:pt(a);break;case 4:ae(a,a.stateNode.containerInfo);break;case 10:xs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ep(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Es(a),a.flags|=128,null):(c&a.child.childLanes)!==0?$x(i,a,c):(Es(a),i=Ui(i,a,c),i!==null?i.sibling:null);Es(a);break;case 19:var g=(i.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(va(i,a,c,!1),f=(c&a.childLanes)!==0),g){if(f)return Px(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Y(ln,ln.current),f)break;return null;case 22:return a.lanes=0,Lx(i,a,c,a.pendingProps);case 24:xs(a,pn,i.memoizedState.cache)}return Ui(i,a,c)}function Vx(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)gn=!0;else{if(!Jp(i,c)&&(a.flags&128)===0)return gn=!1,wk(i,a,c);gn=(i.flags&131072)!==0}else gn=!1,ft&&(a.flags&1048576)!==0&&Sb(a,Dl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(i=Co(a.elementType),a.type=i,typeof i=="function")rp(i)?(f=Ao(i,f),a.tag=1,a=Hx(null,a,i,f,c)):(a.tag=0,a=Fp(null,a,i,f,c));else{if(i!=null){var g=i.$$typeof;if(g===A){a.tag=11,a=Dx(null,a,i,f,c);break e}else if(g===H){a.tag=14,a=jx(null,a,i,f,c);break e}}throw a=te(i)||i,Error(r(306,a,""))}}return a;case 0:return Fp(i,a,a.type,a.pendingProps,c);case 1:return f=a.type,g=Ao(f,a.pendingProps),Hx(i,a,f,g,c);case 3:e:{if(ae(a,a.stateNode.containerInfo),i===null)throw Error(r(387));f=a.pendingProps;var b=a.memoizedState;g=b.element,bp(i,a),Ul(a,f,null,c);var E=a.memoizedState;if(f=E.cache,xs(a,pn,f),f!==b.cache&&fp(a,[pn],c,!0),Hl(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Ux(i,a,f,c);break e}else if(f!==g){g=_r(Error(r(424)),a),jl(g),a=Ux(i,a,f,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for($t=Hr(i.firstChild),_n=a,ft=!0,ys=null,zr=!0,c=Lb(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(vo(),f===g){a=Ui(i,a,c);break e}Bn(i,a,f,c)}a=a.child}return a;case 26:return Ju(i,a),i===null?(c=t1(a.type,null,a.pendingProps,null))?a.memoizedState=c:ft||(c=a.type,i=a.pendingProps,f=md(we.current).createElement(c),f[on]=a,f[Pn]=i,zn(f,c,i),fn(f),a.stateNode=f):a.memoizedState=t1(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return pt(a),i===null&&ft&&(f=a.stateNode=Jv(a.type,a.pendingProps,we.current),_n=a,zr=!0,g=$t,Ds(a.type)?(Rm=g,$t=Hr(f.firstChild)):$t=g),Bn(i,a,a.pendingProps.children,c),Ju(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ft&&((g=f=$t)&&(f=Xk(f,a.type,a.pendingProps,zr),f!==null?(a.stateNode=f,_n=a,$t=Hr(f.firstChild),zr=!1,g=!0):g=!1),g||bs(a)),pt(a),g=a.type,b=a.pendingProps,E=i!==null?i.memoizedProps:null,f=b.children,Tm(g,b)?f=null:E!==null&&Tm(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Np(i,a,fk,null,null,c),oc._currentValue=g),Ju(i,a),Bn(i,a,f,c),a.child;case 6:return i===null&&ft&&((i=c=$t)&&(c=Jk(c,a.pendingProps,zr),c!==null?(a.stateNode=c,_n=a,$t=null,i=!0):i=!1),i||bs(a)),null;case 13:return $x(i,a,c);case 4:return ae(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=To(a,null,f,c):Bn(i,a,f,c),a.child;case 11:return Dx(i,a,a.type,a.pendingProps,c);case 7:return Bn(i,a,a.pendingProps,c),a.child;case 8:return Bn(i,a,a.pendingProps.children,c),a.child;case 12:return Bn(i,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,xs(a,a.type,f.value),Bn(i,a,f.children,c),a.child;case 9:return g=a.type._context,f=a.pendingProps.children,So(a),g=Ln(g),f=f(g),a.flags|=1,Bn(i,a,f,c),a.child;case 14:return jx(i,a,a.type,a.pendingProps,c);case 15:return _x(i,a,a.type,a.pendingProps,c);case 19:return Px(i,a,c);case 31:return vk(i,a,c);case 22:return Lx(i,a,c,a.pendingProps);case 24:return So(a),f=Ln(pn),i===null?(g=mp(),g===null&&(g=Ot,b=hp(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),a.memoizedState={parent:f,cache:g},yp(a),xs(a,pn,g)):((i.lanes&c)!==0&&(bp(i,a),Ul(a,null,null,c),Hl()),g=i.memoizedState,b=a.memoizedState,g.parent!==f?(g={parent:f,cache:f},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),xs(a,pn,f)):(f=b.cache,xs(a,pn,f),f!==g.cache&&fp(a,[pn],c,!0))),Bn(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function $i(i){i.flags|=4}function Zp(i,a,c,f,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(yv())i.flags|=8192;else throw No=zu,gp}else i.flags&=-16777217}function Fx(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!o1(a))if(yv())i.flags|=8192;else throw No=zu,gp}function ed(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Oe():536870912,i.lanes|=a,Da|=a)}function Gl(i,a){if(!ft)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function qt(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function Sk(i,a,c){var f=a.pendingProps;switch(ap(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(a),null;case 1:return qt(a),null;case 3:return c=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),zi(pn),$e(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(xa(a)?$i(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,cp())),qt(a),null;case 26:var g=a.type,b=a.memoizedState;return i===null?($i(a),b!==null?(qt(a),Fx(a,b)):(qt(a),Zp(a,g,null,f,c))):b?b!==i.memoizedState?($i(a),qt(a),Fx(a,b)):(qt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==f&&$i(a),qt(a),Zp(a,g,i,f,c)),null;case 27:if(It(a),c=we.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&$i(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return qt(a),null}i=ce.current,xa(a)?Cb(a):(i=Jv(g,f,c),a.stateNode=i,$i(a))}return qt(a),null;case 5:if(It(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&$i(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return qt(a),null}if(b=ce.current,xa(a))Cb(a);else{var E=md(we.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?E.createElement(g,{is:f.is}):E.createElement(g)}}b[on]=a,b[Pn]=f;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=b;e:switch(zn(b,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&$i(a)}}return qt(a),Zp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&$i(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(i=we.current,xa(a)){if(i=a.stateNode,c=a.memoizedProps,f=null,g=_n,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[on]=a,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||$v(i.nodeValue,c)),i||bs(a,!0)}else i=md(i).createTextNode(f),i[on]=a,a.stateNode=i}return qt(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(f=xa(a),c!==null){if(i===null){if(!f)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[on]=a}else vo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qt(a),i=!1}else c=cp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(Er(a),a):(Er(a),null);if((a.flags&128)!==0)throw Error(r(558))}return qt(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=xa(a),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[on]=a}else vo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qt(a),g=!1}else g=cp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Er(a),a):(Er(a),null)}return Er(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=a.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),ed(a,a.updateQueue),qt(a),null);case 4:return $e(),i===null&&wm(a.stateNode.containerInfo),qt(a),null;case 10:return zi(a.type),qt(a),null;case 19:if(V(ln),f=a.memoizedState,f===null)return qt(a),null;if(g=(a.flags&128)!==0,b=f.rendering,b===null)if(g)Gl(f,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=$u(i),b!==null){for(a.flags|=128,Gl(f,!1),i=b.updateQueue,a.updateQueue=i,ed(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)xb(c,i),c=c.sibling;return Y(ln,ln.current&1|2),ft&&Li(a,f.treeForkCount),a.child}i=i.sibling}f.tail!==null&&Ze()>sd&&(a.flags|=128,g=!0,Gl(f,!1),a.lanes=4194304)}else{if(!g)if(i=$u(b),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,ed(a,i),Gl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!ft)return qt(a),null}else 2*Ze()-f.renderingStartTime>sd&&c!==536870912&&(a.flags|=128,g=!0,Gl(f,!1),a.lanes=4194304);f.isBackwards?(b.sibling=a.child,a.child=b):(i=f.last,i!==null?i.sibling=b:a.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ze(),i.sibling=null,c=ln.current,Y(ln,g?c&1|2:c&1),ft&&Li(a,f.treeForkCount),i):(qt(a),null);case 22:case 23:return Er(a),Sp(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(qt(a),a.subtreeFlags&6&&(a.flags|=8192)):qt(a),c=a.updateQueue,c!==null&&ed(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),i!==null&&V(Eo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),zi(pn),qt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function Ek(i,a){switch(ap(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return zi(pn),$e(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return It(a),null;case 31:if(a.memoizedState!==null){if(Er(a),a.alternate===null)throw Error(r(340));vo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Er(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));vo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return V(ln),null;case 4:return $e(),null;case 10:return zi(a.type),null;case 22:case 23:return Er(a),Sp(),i!==null&&V(Eo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return zi(pn),null;case 25:return null;default:return null}}function Gx(i,a){switch(ap(a),a.tag){case 3:zi(pn),$e();break;case 26:case 27:case 5:It(a);break;case 4:$e();break;case 31:a.memoizedState!==null&&Er(a);break;case 13:Er(a);break;case 19:V(ln);break;case 10:zi(a.type);break;case 22:case 23:Er(a),Sp(),i!==null&&V(Eo);break;case 24:zi(pn)}}function Kl(i,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var b=c.create,E=c.inst;f=b(),E.destroy=f}c=c.next}while(c!==g)}}catch(k){Ct(a,a.return,k)}}function Ns(i,a,c){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&i)===i){var E=f.inst,k=E.destroy;if(k!==void 0){E.destroy=void 0,g=a;var _=c,F=k;try{F()}catch(Z){Ct(g,_,Z)}}}f=f.next}while(f!==b)}}catch(Z){Ct(a,a.return,Z)}}function Kx(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{zb(a,c)}catch(f){Ct(i,i.return,f)}}}function Wx(i,a,c){c.props=Ao(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){Ct(i,a,f)}}function Wl(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){Ct(i,a,g)}}function di(i,a){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){Ct(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ct(i,a,g)}else c.current=null}function Qx(i){var a=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){Ct(i,i.return,g)}}function em(i,a,c){try{var f=i.stateNode;Fk(f,i.type,c,a),f[Pn]=a}catch(g){Ct(i,i.return,g)}}function Yx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ds(i.type)||i.tag===4}function tm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ds(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=be));else if(f!==4&&(f===27&&Ds(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(nm(i,a,c),i=i.sibling;i!==null;)nm(i,a,c),i=i.sibling}function td(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(f===27&&Ds(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(td(i,a,c),i=i.sibling;i!==null;)td(i,a,c),i=i.sibling}function Xx(i){var a=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);zn(a,f,c),a[on]=i,a[Pn]=c}catch(b){Ct(i,i.return,b)}}var qi=!1,yn=!1,rm=!1,Jx=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function Ck(i,a){if(i=i.containerInfo,Cm=Sd,i=ub(i),Yh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var E=0,k=-1,_=-1,F=0,Z=0,ne=i,G=null;t:for(;;){for(var J;ne!==c||g!==0&&ne.nodeType!==3||(k=E+g),ne!==b||f!==0&&ne.nodeType!==3||(_=E+f),ne.nodeType===3&&(E+=ne.nodeValue.length),(J=ne.firstChild)!==null;)G=ne,ne=J;for(;;){if(ne===i)break t;if(G===c&&++F===g&&(k=E),G===b&&++Z===f&&(_=E),(J=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=J}c=k===-1||_===-1?null:{start:k,end:_}}else c=null}c=c||{start:0,end:0}}else c=null;for(Nm={focusedElem:i,selectionRange:c},Sd=!1,Cn=a;Cn!==null;)if(a=Cn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Cn=i;else for(;Cn!==null;){switch(a=Cn,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=a,g=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var Ae=Ao(c.type,g);i=f.getSnapshotBeforeUpdate(Ae,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(qe){Ct(c,c.return,qe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)Am(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Am(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Cn=i;break}Cn=a.return}}function Zx(i,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Vi(i,c),f&4&&Kl(5,c);break;case 1:if(Vi(i,c),f&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(E){Ct(c,c.return,E)}else{var g=Ao(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){Ct(c,c.return,E)}}f&64&&Kx(c),f&512&&Wl(c,c.return);break;case 3:if(Vi(i,c),f&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{zb(i,a)}catch(E){Ct(c,c.return,E)}}break;case 27:a===null&&f&4&&Xx(c);case 26:case 5:Vi(i,c),a===null&&f&4&&Qx(c),f&512&&Wl(c,c.return);break;case 12:Vi(i,c);break;case 31:Vi(i,c),f&4&&nv(i,c);break;case 13:Vi(i,c),f&4&&rv(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=jk.bind(null,c),Zk(i,c))));break;case 22:if(f=c.memoizedState!==null||qi,!f){a=a!==null&&a.memoizedState!==null||yn,g=qi;var b=yn;qi=f,(yn=a)&&!b?Fi(i,c,(c.subtreeFlags&8772)!==0):Vi(i,c),qi=g,yn=b}break;case 30:break;default:Vi(i,c)}}function ev(i){var a=i.alternate;a!==null&&(i.alternate=null,ev(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&bl(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ft=null,sr=!1;function Pi(i,a,c){for(c=c.child;c!==null;)tv(i,a,c),c=c.sibling}function tv(i,a,c){if(X&&typeof X.onCommitFiberUnmount=="function")try{X.onCommitFiberUnmount(gr,c)}catch{}switch(c.tag){case 26:yn||di(c,a),Pi(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:yn||di(c,a);var f=Ft,g=sr;Ds(c.type)&&(Ft=c.stateNode,sr=!1),Pi(i,a,c),rc(c.stateNode),Ft=f,sr=g;break;case 5:yn||di(c,a);case 6:if(f=Ft,g=sr,Ft=null,Pi(i,a,c),Ft=f,sr=g,Ft!==null)if(sr)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(c.stateNode)}catch(b){Ct(c,a,b)}else try{Ft.removeChild(c.stateNode)}catch(b){Ct(c,a,b)}break;case 18:Ft!==null&&(sr?(i=Ft,Kv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ua(i)):Kv(Ft,c.stateNode));break;case 4:f=Ft,g=sr,Ft=c.stateNode.containerInfo,sr=!0,Pi(i,a,c),Ft=f,sr=g;break;case 0:case 11:case 14:case 15:Ns(2,c,a),yn||Ns(4,c,a),Pi(i,a,c);break;case 1:yn||(di(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Wx(c,a,f)),Pi(i,a,c);break;case 21:Pi(i,a,c);break;case 22:yn=(f=yn)||c.memoizedState!==null,Pi(i,a,c),yn=f;break;default:Pi(i,a,c)}}function nv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ua(i)}catch(c){Ct(a,a.return,c)}}}function rv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ua(i)}catch(c){Ct(a,a.return,c)}}function Nk(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Jx),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Jx),a;default:throw Error(r(435,i.tag))}}function nd(i,a){var c=Nk(i);a.forEach(function(f){if(!c.has(f)){c.add(f);var g=_k.bind(null,i,f);f.then(g,g)}})}function or(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],b=i,E=a,k=E;e:for(;k!==null;){switch(k.tag){case 27:if(Ds(k.type)){Ft=k.stateNode,sr=!1;break e}break;case 5:Ft=k.stateNode,sr=!1;break e;case 3:case 4:Ft=k.stateNode.containerInfo,sr=!0;break e}k=k.return}if(Ft===null)throw Error(r(160));tv(b,E,g),Ft=null,sr=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)iv(a,i),a=a.sibling}var ei=null;function iv(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(a,i),ar(i),f&4&&(Ns(3,i,i.return),Kl(3,i),Ns(5,i,i.return));break;case 1:or(a,i),ar(i),f&512&&(yn||c===null||di(c,c.return)),f&64&&qi&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=ei;if(or(a,i),ar(i),f&512&&(yn||c===null||di(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[fo]||b[on]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),zn(b,f,c),b[on]=i,fn(b),f=b;break e;case"link":var E=i1("link","href",g).get(f+(c.href||""));if(E){for(var k=0;k<E.length;k++)if(b=E[k],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(k,1);break t}}b=g.createElement(f),zn(b,f,c),g.head.appendChild(b);break;case"meta":if(E=i1("meta","content",g).get(f+(c.content||""))){for(k=0;k<E.length;k++)if(b=E[k],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(k,1);break t}}b=g.createElement(f),zn(b,f,c),g.head.appendChild(b);break;default:throw Error(r(468,f))}b[on]=i,fn(b),f=b}i.stateNode=f}else s1(g,i.type,i.stateNode);else i.stateNode=r1(g,f,i.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?s1(g,i.type,i.stateNode):r1(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&em(i,i.memoizedProps,c.memoizedProps)}break;case 27:or(a,i),ar(i),f&512&&(yn||c===null||di(c,c.return)),c!==null&&f&4&&em(i,i.memoizedProps,c.memoizedProps);break;case 5:if(or(a,i),ar(i),f&512&&(yn||c===null||di(c,c.return)),i.flags&32){g=i.stateNode;try{Fe(g,"")}catch(Ae){Ct(i,i.return,Ae)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,em(i,g,c!==null?c.memoizedProps:g)),f&1024&&(rm=!0);break;case 6:if(or(a,i),ar(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Ae){Ct(i,i.return,Ae)}}break;case 3:if(bd=null,g=ei,ei=gd(a.containerInfo),or(a,i),ei=g,ar(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ua(a.containerInfo)}catch(Ae){Ct(i,i.return,Ae)}rm&&(rm=!1,sv(i));break;case 4:f=ei,ei=gd(i.stateNode.containerInfo),or(a,i),ar(i),ei=f;break;case 12:or(a,i),ar(i);break;case 31:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,nd(i,f)));break;case 13:or(a,i),ar(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(id=Ze()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,nd(i,f)));break;case 22:g=i.memoizedState!==null;var _=c!==null&&c.memoizedState!==null,F=qi,Z=yn;if(qi=F||g,yn=Z||_,or(a,i),yn=Z,qi=F,ar(i),f&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||_||qi||yn||Mo(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){_=c=a;try{if(b=_.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{k=_.stateNode;var ne=_.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;k.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Ae){Ct(_,_.return,Ae)}}}else if(a.tag===6){if(c===null){_=a;try{_.stateNode.nodeValue=g?"":_.memoizedProps}catch(Ae){Ct(_,_.return,Ae)}}}else if(a.tag===18){if(c===null){_=a;try{var J=_.stateNode;g?Wv(J,!0):Wv(_.stateNode,!1)}catch(Ae){Ct(_,_.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,nd(i,c))));break;case 19:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,nd(i,f)));break;case 30:break;case 21:break;default:or(a,i),ar(i)}}function ar(i){var a=i.flags;if(a&2){try{for(var c,f=i.return;f!==null;){if(Yx(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,b=tm(i);td(i,b,g);break;case 5:var E=c.stateNode;c.flags&32&&(Fe(E,""),c.flags&=-33);var k=tm(i);td(i,k,E);break;case 3:case 4:var _=c.stateNode.containerInfo,F=tm(i);nm(i,F,_);break;default:throw Error(r(161))}}catch(Z){Ct(i,i.return,Z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function sv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;sv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Vi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Zx(i,a.alternate,a),a=a.sibling}function Mo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ns(4,a,a.return),Mo(a);break;case 1:di(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Wx(a,a.return,c),Mo(a);break;case 27:rc(a.stateNode);case 26:case 5:di(a,a.return),Mo(a);break;case 22:a.memoizedState===null&&Mo(a);break;case 30:Mo(a);break;default:Mo(a)}i=i.sibling}}function Fi(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,g=i,b=a,E=b.flags;switch(b.tag){case 0:case 11:case 15:Fi(g,b,c),Kl(4,b);break;case 1:if(Fi(g,b,c),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){Ct(f,f.return,F)}if(f=b,g=f.updateQueue,g!==null){var k=f.stateNode;try{var _=g.shared.hiddenCallbacks;if(_!==null)for(g.shared.hiddenCallbacks=null,g=0;g<_.length;g++)Bb(_[g],k)}catch(F){Ct(f,f.return,F)}}c&&E&64&&Kx(b),Wl(b,b.return);break;case 27:Xx(b);case 26:case 5:Fi(g,b,c),c&&f===null&&E&4&&Qx(b),Wl(b,b.return);break;case 12:Fi(g,b,c);break;case 31:Fi(g,b,c),c&&E&4&&nv(g,b);break;case 13:Fi(g,b,c),c&&E&4&&rv(g,b);break;case 22:b.memoizedState===null&&Fi(g,b,c),Wl(b,b.return);break;case 30:break;default:Fi(g,b,c)}a=a.sibling}}function im(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&_l(c))}function sm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&_l(i))}function ti(i,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ov(i,a,c,f),a=a.sibling}function ov(i,a,c,f){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ti(i,a,c,f),g&2048&&Kl(9,a);break;case 1:ti(i,a,c,f);break;case 3:ti(i,a,c,f),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&_l(i)));break;case 12:if(g&2048){ti(i,a,c,f),i=a.stateNode;try{var b=a.memoizedProps,E=b.id,k=b.onPostCommit;typeof k=="function"&&k(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(_){Ct(a,a.return,_)}}else ti(i,a,c,f);break;case 31:ti(i,a,c,f);break;case 13:ti(i,a,c,f);break;case 23:break;case 22:b=a.stateNode,E=a.alternate,a.memoizedState!==null?b._visibility&2?ti(i,a,c,f):Ql(i,a):b._visibility&2?ti(i,a,c,f):(b._visibility|=2,Ma(i,a,c,f,(a.subtreeFlags&10256)!==0||!1)),g&2048&&im(E,a);break;case 24:ti(i,a,c,f),g&2048&&sm(a.alternate,a);break;default:ti(i,a,c,f)}}function Ma(i,a,c,f,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,E=a,k=c,_=f,F=E.flags;switch(E.tag){case 0:case 11:case 15:Ma(b,E,k,_,g),Kl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Ma(b,E,k,_,g):Ql(b,E):(Z._visibility|=2,Ma(b,E,k,_,g)),g&&F&2048&&im(E.alternate,E);break;case 24:Ma(b,E,k,_,g),g&&F&2048&&sm(E.alternate,E);break;default:Ma(b,E,k,_,g)}a=a.sibling}}function Ql(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,f=a,g=f.flags;switch(f.tag){case 22:Ql(c,f),g&2048&&im(f.alternate,f);break;case 24:Ql(c,f),g&2048&&sm(f.alternate,f);break;default:Ql(c,f)}a=a.sibling}}var Yl=8192;function Oa(i,a,c){if(i.subtreeFlags&Yl)for(i=i.child;i!==null;)av(i,a,c),i=i.sibling}function av(i,a,c){switch(i.tag){case 26:Oa(i,a,c),i.flags&Yl&&i.memoizedState!==null&&dA(c,ei,i.memoizedState,i.memoizedProps);break;case 5:Oa(i,a,c);break;case 3:case 4:var f=ei;ei=gd(i.stateNode.containerInfo),Oa(i,a,c),ei=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Yl,Yl=16777216,Oa(i,a,c),Yl=f):Oa(i,a,c));break;default:Oa(i,a,c)}}function lv(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Xl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Cn=f,uv(f,i)}lv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cv(i),i=i.sibling}function cv(i){switch(i.tag){case 0:case 11:case 15:Xl(i),i.flags&2048&&Ns(9,i,i.return);break;case 3:Xl(i);break;case 12:Xl(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,rd(i)):Xl(i);break;default:Xl(i)}}function rd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Cn=f,uv(f,i)}lv(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ns(8,a,a.return),rd(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,rd(a));break;default:rd(a)}i=i.sibling}}function uv(i,a){for(;Cn!==null;){var c=Cn;switch(c.tag){case 0:case 11:case 15:Ns(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:_l(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Cn=f;else e:for(c=i;Cn!==null;){f=Cn;var g=f.sibling,b=f.return;if(ev(f),f===c){Cn=null;break e}if(g!==null){g.return=b,Cn=g;break e}Cn=b}}}var Tk={getCacheForType:function(i){var a=Ln(pn),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Ln(pn).controller.signal}},kk=typeof WeakMap=="function"?WeakMap:Map,bt=0,Ot=null,ot=null,ct=0,Et=0,Cr=null,Ts=!1,Ra=!1,om=!1,Gi=0,en=0,ks=0,Oo=0,am=0,Nr=0,Da=0,Jl=null,lr=null,lm=!1,id=0,dv=0,sd=1/0,od=null,As=null,wn=0,Ms=null,ja=null,Ki=0,cm=0,um=null,fv=null,Zl=0,dm=null;function Tr(){return(bt&2)!==0&&ct!==0?ct&-ct:B.T!==null?ym():uo()}function hv(){if(Nr===0)if((ct&536870912)===0||ft){var i=Yn;Yn<<=1,(Yn&3932160)===0&&(Yn=262144),Nr=i}else Nr=536870912;return i=Sr.current,i!==null&&(i.flags|=32),Nr}function cr(i,a,c){(i===Ot&&(Et===2||Et===9)||i.cancelPendingCommit!==null)&&(_a(i,0),Os(i,ct,Nr,!1)),Ve(i,c),((bt&2)===0||i!==Ot)&&(i===Ot&&((bt&2)===0&&(Oo|=c),en===4&&Os(i,ct,Nr,!1)),fi(i))}function pv(i,a,c){if((bt&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&i.expiredLanes)===0||Q(i,a),g=f?Ok(i,a):hm(i,a,!0),b=f;do{if(g===0){Ra&&!f&&Os(i,a,0,!1);break}else{if(c=i.current.alternate,b&&!Ak(c)){g=hm(i,a,!1),b=!1;continue}if(g===2){if(b=a,i.errorRecoveryDisabledLanes&b)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var k=i;g=Jl;var _=k.current.memoizedState.isDehydrated;if(_&&(_a(k,E).flags|=256),E=hm(k,E,!1),E!==2){if(om&&!_){k.errorRecoveryDisabledLanes|=b,Oo|=b,g=4;break e}b=lr,lr=g,b!==null&&(lr===null?lr=b:lr.push.apply(lr,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){_a(i,0),Os(i,a,0,!0);break}e:{switch(f=i,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Os(f,a,Nr,!Ts);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=id+300-Ze(),10<g)){if(Os(f,a,Nr,!Ts),M(f,0,!0)!==0)break e;Ki=a,f.timeoutHandle=Fv(mv.bind(null,f,c,lr,od,lm,a,Nr,Oo,Da,Ts,b,"Throttled",-0,0),g);break e}mv(f,c,lr,od,lm,a,Nr,Oo,Da,Ts,b,null,-0,0)}}break}while(!0);fi(i)}function mv(i,a,c,f,g,b,E,k,_,F,Z,ne,G,J){if(i.timeoutHandle=-1,ne=a.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:be},av(a,b,ne);var Ae=(b&62914560)===b?id-Ze():(b&4194048)===b?dv-Ze():0;if(Ae=fA(ne,Ae),Ae!==null){Ki=b,i.cancelPendingCommit=Ae(Ev.bind(null,i,a,b,c,f,g,E,k,_,Z,ne,null,G,J)),Os(i,b,E,!F);return}}Ev(i,a,b,c,f,g,E,k,_)}function Ak(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],b=g.getSnapshot;g=g.value;try{if(!vr(b(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Os(i,a,c,f){a&=~am,a&=~Oo,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var g=a;0<g;){var b=31-ke(g),E=1<<b;f[b]=-1,g&=~E}c!==0&&Te(i,c,a)}function ad(){return(bt&6)===0?(ec(0),!1):!0}function fm(){if(ot!==null){if(Et===0)var i=ot.return;else i=ot,Bi=wo=null,Ap(i),Ca=null,Bl=0,i=ot;for(;i!==null;)Gx(i.alternate,i),i=i.return;ot=null}}function _a(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,Wk(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ki=0,fm(),Ot=i,ot=c=_i(i.current,null),ct=a,Et=0,Cr=null,Ts=!1,Ra=Q(i,a),om=!1,Da=Nr=am=Oo=ks=en=0,lr=Jl=null,lm=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var g=31-ke(f),b=1<<g;a|=i[g],f&=~b}return Gi=a,Au(),c}function gv(i,a){et=null,B.H=Vl,a===Ea||a===Bu?(a=Db(),Et=3):a===gp?(a=Db(),Et=4):Et=a===Vp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Cr=a,ot===null&&(en=1,Yu(i,_r(a,i.current)))}function yv(){var i=Sr.current;return i===null?!0:(ct&4194048)===ct?Ir===null:(ct&62914560)===ct||(ct&536870912)!==0?i===Ir:!1}function bv(){var i=B.H;return B.H=Vl,i===null?Vl:i}function xv(){var i=B.A;return B.A=Tk,i}function ld(){en=4,Ts||(ct&4194048)!==ct&&Sr.current!==null||(Ra=!0),(ks&134217727)===0&&(Oo&134217727)===0||Ot===null||Os(Ot,ct,Nr,!1)}function hm(i,a,c){var f=bt;bt|=2;var g=bv(),b=xv();(Ot!==i||ct!==a)&&(od=null,_a(i,a)),a=!1;var E=en;e:do try{if(Et!==0&&ot!==null){var k=ot,_=Cr;switch(Et){case 8:fm(),E=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(a=!0);var F=Et;if(Et=0,Cr=null,La(i,k,_,F),c&&Ra){E=0;break e}break;default:F=Et,Et=0,Cr=null,La(i,k,_,F)}}Mk(),E=en;break}catch(Z){gv(i,Z)}while(!0);return a&&i.shellSuspendCounter++,Bi=wo=null,bt=f,B.H=g,B.A=b,ot===null&&(Ot=null,ct=0,Au()),E}function Mk(){for(;ot!==null;)vv(ot)}function Ok(i,a){var c=bt;bt|=2;var f=bv(),g=xv();Ot!==i||ct!==a?(od=null,sd=Ze()+500,_a(i,a)):Ra=Q(i,a);e:do try{if(Et!==0&&ot!==null){a=ot;var b=Cr;t:switch(Et){case 1:Et=0,Cr=null,La(i,a,b,1);break;case 2:case 9:if(Ob(b)){Et=0,Cr=null,wv(a);break}a=function(){Et!==2&&Et!==9||Ot!==i||(Et=7),fi(i)},b.then(a,a);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:Ob(b)?(Et=0,Cr=null,wv(a)):(Et=0,Cr=null,La(i,a,b,7));break;case 5:var E=null;switch(ot.tag){case 26:E=ot.memoizedState;case 5:case 27:var k=ot;if(E?o1(E):k.stateNode.complete){Et=0,Cr=null;var _=k.sibling;if(_!==null)ot=_;else{var F=k.return;F!==null?(ot=F,cd(F)):ot=null}break t}}Et=0,Cr=null,La(i,a,b,5);break;case 6:Et=0,Cr=null,La(i,a,b,6);break;case 8:fm(),en=6;break e;default:throw Error(r(462))}}Rk();break}catch(Z){gv(i,Z)}while(!0);return Bi=wo=null,B.H=f,B.A=g,bt=c,ot!==null?0:(Ot=null,ct=0,Au(),en)}function Rk(){for(;ot!==null&&!_e();)vv(ot)}function vv(i){var a=Vx(i.alternate,i,Gi);i.memoizedProps=i.pendingProps,a===null?cd(i):ot=a}function wv(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Ix(c,a,a.pendingProps,a.type,void 0,ct);break;case 11:a=Ix(c,a,a.pendingProps,a.type.render,a.ref,ct);break;case 5:Ap(a);default:Gx(c,a),a=ot=xb(a,Gi),a=Vx(c,a,Gi)}i.memoizedProps=i.pendingProps,a===null?cd(i):ot=a}function La(i,a,c,f){Bi=wo=null,Ap(a),Ca=null,Bl=0;var g=a.return;try{if(xk(i,g,a,c,ct)){en=1,Yu(i,_r(c,i.current)),ot=null;return}}catch(b){if(g!==null)throw ot=g,b;en=1,Yu(i,_r(c,i.current)),ot=null;return}a.flags&32768?(ft||f===1?i=!0:Ra||(ct&536870912)!==0?i=!1:(Ts=i=!0,(f===2||f===9||f===3||f===6)&&(f=Sr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Sv(a,i)):cd(a)}function cd(i){var a=i;do{if((a.flags&32768)!==0){Sv(a,Ts);return}i=a.return;var c=Sk(a.alternate,a,Gi);if(c!==null){ot=c;return}if(a=a.sibling,a!==null){ot=a;return}ot=a=i}while(a!==null);en===0&&(en=5)}function Sv(i,a){do{var c=Ek(i.alternate,i);if(c!==null){c.flags&=32767,ot=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){ot=i;return}ot=i=c}while(i!==null);en=6,ot=null}function Ev(i,a,c,f,g,b,E,k,_){i.cancelPendingCommit=null;do ud();while(wn!==0);if((bt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=tp,Ee(i,c,b,E,k,_),i===Ot&&(ot=Ot=null,ct=0),ja=a,Ms=i,Ki=c,cm=b,um=g,fv=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Lk(Ne,function(){return Av(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,g=D.p,D.p=2,E=bt,bt|=4;try{Ck(i,a,c)}finally{bt=E,D.p=g,B.T=f}}wn=1,Cv(),Nv(),Tv()}}function Cv(){if(wn===1){wn=0;var i=Ms,a=ja,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var f=D.p;D.p=2;var g=bt;bt|=4;try{iv(a,i);var b=Nm,E=ub(i.containerInfo),k=b.focusedElem,_=b.selectionRange;if(E!==k&&k&&k.ownerDocument&&cb(k.ownerDocument.documentElement,k)){if(_!==null&&Yh(k)){var F=_.start,Z=_.end;if(Z===void 0&&(Z=F),"selectionStart"in k)k.selectionStart=F,k.selectionEnd=Math.min(Z,k.value.length);else{var ne=k.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var J=G.getSelection(),Ae=k.textContent.length,qe=Math.min(_.start,Ae),kt=_.end===void 0?qe:Math.min(_.end,Ae);!J.extend&&qe>kt&&(E=kt,kt=qe,qe=E);var $=lb(k,qe),z=lb(k,kt);if($&&z&&(J.rangeCount!==1||J.anchorNode!==$.node||J.anchorOffset!==$.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var P=ne.createRange();P.setStart($.node,$.offset),J.removeAllRanges(),qe>kt?(J.addRange(P),J.extend(z.node,z.offset)):(P.setEnd(z.node,z.offset),J.addRange(P))}}}}for(ne=[],J=k;J=J.parentNode;)J.nodeType===1&&ne.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ne.length;k++){var ee=ne[k];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Sd=!!Cm,Nm=Cm=null}finally{bt=g,D.p=f,B.T=c}}i.current=a,wn=2}}function Nv(){if(wn===2){wn=0;var i=Ms,a=ja,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var f=D.p;D.p=2;var g=bt;bt|=4;try{Zx(i,a.alternate,a)}finally{bt=g,D.p=f,B.T=c}}wn=3}}function Tv(){if(wn===4||wn===3){wn=0,st();var i=Ms,a=ja,c=Ki,f=fv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?wn=5:(wn=0,ja=Ms=null,kv(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(As=null),Dn(c),a=a.stateNode,X&&typeof X.onCommitFiberRoot=="function")try{X.onCommitFiberRoot(gr,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=B.T,g=D.p,D.p=2,B.T=null;try{for(var b=i.onRecoverableError,E=0;E<f.length;E++){var k=f[E];b(k.value,{componentStack:k.stack})}}finally{B.T=a,D.p=g}}(Ki&3)!==0&&ud(),fi(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===dm?Zl++:(Zl=0,dm=i):Zl=0,ec(0)}}function kv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,_l(a)))}function ud(){return Cv(),Nv(),Tv(),Av()}function Av(){if(wn!==5)return!1;var i=Ms,a=cm;cm=0;var c=Dn(Ki),f=B.T,g=D.p;try{D.p=32>c?32:c,B.T=null,c=um,um=null;var b=Ms,E=Ki;if(wn=0,ja=Ms=null,Ki=0,(bt&6)!==0)throw Error(r(331));var k=bt;if(bt|=4,cv(b.current),ov(b,b.current,E,c),bt=k,ec(0,!1),X&&typeof X.onPostCommitFiberRoot=="function")try{X.onPostCommitFiberRoot(gr,b)}catch{}return!0}finally{D.p=g,B.T=f,kv(i,a)}}function Mv(i,a,c){a=_r(c,a),a=Pp(i.stateNode,a,2),i=Ss(i,a,2),i!==null&&(Ve(i,2),fi(i))}function Ct(i,a,c){if(i.tag===3)Mv(i,i,c);else for(;a!==null;){if(a.tag===3){Mv(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(As===null||!As.has(f))){i=_r(c,i),c=Ox(2),f=Ss(a,c,2),f!==null&&(Rx(c,f,a,i),Ve(f,2),fi(f));break}}a=a.return}}function pm(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new kk;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(om=!0,g.add(c),i=Dk.bind(null,i,a,c),a.then(i,i))}function Dk(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Ot===i&&(ct&c)===c&&(en===4||en===3&&(ct&62914560)===ct&&300>Ze()-id?(bt&2)===0&&_a(i,0):am|=c,Da===ct&&(Da=0)),fi(i)}function Ov(i,a){a===0&&(a=Oe()),i=bo(i,a),i!==null&&(Ve(i,a),fi(i))}function jk(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),Ov(i,c)}function _k(i,a){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),Ov(i,c)}function Lk(i,a){return Se(i,a)}var dd=null,Ba=null,mm=!1,fd=!1,gm=!1,Rs=0;function fi(i){i!==Ba&&i.next===null&&(Ba===null?dd=Ba=i:Ba=Ba.next=i),fd=!0,mm||(mm=!0,zk())}function ec(i,a){if(!gm&&fd){gm=!0;do for(var c=!1,f=dd;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var E=f.suspendedLanes,k=f.pingedLanes;b=(1<<31-ke(42|i)+1)-1,b&=g&~(E&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,_v(f,b))}else b=ct,b=M(f,f===Ot?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Q(f,b)||(c=!0,_v(f,b));f=f.next}while(c);gm=!1}}function Bk(){Rv()}function Rv(){fd=mm=!1;var i=0;Rs!==0&&Kk()&&(i=Rs);for(var a=Ze(),c=null,f=dd;f!==null;){var g=f.next,b=Dv(f,a);b===0?(f.next=null,c===null?dd=g:c.next=g,g===null&&(Ba=c)):(c=f,(i!==0||(b&3)!==0)&&(fd=!0)),f=g}wn!==0&&wn!==5||ec(i),Rs!==0&&(Rs=0)}function Dv(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var E=31-ke(b),k=1<<E,_=g[E];_===-1?((k&c)===0||(k&f)!==0)&&(g[E]=de(k,a)):_<=a&&(i.expiredLanes|=k),b&=~k}if(a=Ot,c=ct,c=M(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===a&&(Et===2||Et===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&We(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Q(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(f!==null&&We(f),Dn(c)){case 2:case 8:c=ye;break;case 32:c=Ne;break;case 268435456:c=Ye;break;default:c=Ne}return f=jv.bind(null,i),c=Se(c,f),i.callbackPriority=a,i.callbackNode=c,a}return f!==null&&f!==null&&We(f),i.callbackPriority=2,i.callbackNode=null,2}function jv(i,a){if(wn!==0&&wn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ud()&&i.callbackNode!==c)return null;var f=ct;return f=M(i,i===Ot?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(pv(i,f,a),Dv(i,Ze()),i.callbackNode!=null&&i.callbackNode===c?jv.bind(null,i):null)}function _v(i,a){if(ud())return null;pv(i,a,!0)}function zk(){Qk(function(){(bt&6)!==0?Se(_t,Bk):Rv()})}function ym(){if(Rs===0){var i=wa;i===0&&(i=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Rs=i}return Rs}function Lv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ps(""+i)}function Bv(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function Ik(i,a,c,f,g){if(a==="submit"&&c&&c.stateNode===g){var b=Lv((g[Pn]||null).action),E=f.submitter;E&&(a=(a=E[Pn]||null)?Lv(a.formAction):E.getAttribute("formAction"),a!==null&&(b=a,E=null));var k=new Cu("action","action",null,f,g);i.push({event:k,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Rs!==0){var _=E?Bv(g,E):new FormData(g);zp(c,{pending:!0,data:_,method:g.method,action:b},null,_)}}else typeof b=="function"&&(k.preventDefault(),_=E?Bv(g,E):new FormData(g),zp(c,{pending:!0,data:_,method:g.method,action:b},b,_))},currentTarget:g}]})}}for(var bm=0;bm<ep.length;bm++){var xm=ep[bm],Hk=xm.toLowerCase(),Uk=xm[0].toUpperCase()+xm.slice(1);Zr(Hk,"on"+Uk)}Zr(hb,"onAnimationEnd"),Zr(pb,"onAnimationIteration"),Zr(mb,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(nk,"onTransitionRun"),Zr(rk,"onTransitionStart"),Zr(ik,"onTransitionCancel"),Zr(gb,"onTransitionEnd"),pe("onMouseEnter",["mouseout","mouseover"]),pe("onMouseLeave",["mouseout","mouseover"]),pe("onPointerEnter",["pointerout","pointerover"]),pe("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$k=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function zv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var b=void 0;if(a)for(var E=f.length-1;0<=E;E--){var k=f[E],_=k.instance,F=k.currentTarget;if(k=k.listener,_!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=F;try{b(g)}catch(Z){ku(Z)}g.currentTarget=null,b=_}else for(E=0;E<f.length;E++){if(k=f[E],_=k.instance,F=k.currentTarget,k=k.listener,_!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=F;try{b(g)}catch(Z){ku(Z)}g.currentTarget=null,b=_}}}}function at(i,a){var c=a[yl];c===void 0&&(c=a[yl]=new Set);var f=i+"__bubble";c.has(f)||(Iv(a,i,2,!1),c.add(f))}function vm(i,a,c){var f=0;a&&(f|=4),Iv(c,i,f,a)}var hd="_reactListening"+Math.random().toString(36).slice(2);function wm(i){if(!i[hd]){i[hd]=!0,gu.forEach(function(c){c!=="selectionchange"&&($k.has(c)||vm(c,!1,i),vm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[hd]||(a[hd]=!0,vm("selectionchange",!1,a))}}function Iv(i,a,c,f){switch(h1(a)){case 2:var g=mA;break;case 8:g=gA;break;default:g=Bm}c=g.bind(null,a,c,i),g=void 0,!$h||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function Sm(i,a,c,f,g){var b=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var k=f.stateNode.containerInfo;if(k===g)break;if(E===4)for(E=f.return;E!==null;){var _=E.tag;if((_===3||_===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;k!==null;){if(E=Xn(k),E===null)return;if(_=E.tag,_===5||_===6||_===26||_===27){f=b=E;continue e}k=k.parentNode}}f=f.return}vu(function(){var F=b,Z=Je(c),ne=[];e:{var G=yb.get(i);if(G!==void 0){var J=Cu,Ae=i;switch(i){case"keypress":if(Su(c)===0)break e;case"keydown":case"keyup":J=_T;break;case"focusin":Ae="focus",J=Fh;break;case"focusout":Ae="blur",J=Fh;break;case"beforeblur":case"afterblur":J=Fh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ST;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=zT;break;case hb:case pb:case mb:J=NT;break;case gb:J=HT;break;case"scroll":case"scrollend":J=vT;break;case"wheel":J=$T;break;case"copy":case"cut":case"paste":J=kT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Wy;break;case"toggle":case"beforetoggle":J=PT}var qe=(a&4)!==0,kt=!qe&&(i==="scroll"||i==="scrollend"),$=qe?G!==null?G+"Capture":null:G;qe=[];for(var z=F,P;z!==null;){var ee=z;if(P=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||P===null||$===null||(ee=El(z,$),ee!=null&&qe.push(nc(z,ee,P))),kt)break;z=z.return}0<qe.length&&(G=new J(G,Ae,null,c,Z),ne.push({event:G,listeners:qe}))}}if((a&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",G&&c!==De&&(Ae=c.relatedTarget||c.fromElement)&&(Xn(Ae)||Ae[us]))break e;if((J||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,J?(Ae=c.relatedTarget||c.toElement,J=F,Ae=Ae?Xn(Ae):null,Ae!==null&&(kt=o(Ae),qe=Ae.tag,Ae!==kt||qe!==5&&qe!==27&&qe!==6)&&(Ae=null)):(J=null,Ae=F),J!==Ae)){if(qe=Gy,ee="onMouseLeave",$="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(qe=Wy,ee="onPointerLeave",$="onPointerEnter",z="pointer"),kt=J==null?G:ds(J),P=Ae==null?G:ds(Ae),G=new qe(ee,z+"leave",J,c,Z),G.target=kt,G.relatedTarget=P,ee=null,Xn(Z)===F&&(qe=new qe($,z+"enter",Ae,c,Z),qe.target=P,qe.relatedTarget=kt,ee=qe),kt=ee,J&&Ae)t:{for(qe=qk,$=J,z=Ae,P=0,ee=$;ee;ee=qe(ee))P++;ee=0;for(var Ie=z;Ie;Ie=qe(Ie))ee++;for(;0<P-ee;)$=qe($),P--;for(;0<ee-P;)z=qe(z),ee--;for(;P--;){if($===z||z!==null&&$===z.alternate){qe=$;break t}$=qe($),z=qe(z)}qe=null}else qe=null;J!==null&&Hv(ne,G,J,qe,!1),Ae!==null&&kt!==null&&Hv(ne,kt,Ae,qe,!0)}}e:{if(G=F?ds(F):window,J=G.nodeName&&G.nodeName.toLowerCase(),J==="select"||J==="input"&&G.type==="file")var gt=nb;else if(eb(G))if(rb)gt=ZT;else{gt=XT;var je=YT}else J=G.nodeName,!J||J.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&hs(F.elementType)&&(gt=nb):gt=JT;if(gt&&(gt=gt(i,F))){tb(ne,gt,c,Z);break e}je&&je(i,G,F),i==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&ua(G,"number",G.value)}switch(je=F?ds(F):window,i){case"focusin":(eb(je)||je.contentEditable==="true")&&(ha=je,Xh=F,Rl=null);break;case"focusout":Rl=Xh=ha=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,db(ne,c,Z);break;case"selectionchange":if(tk)break;case"keydown":case"keyup":db(ne,c,Z)}var tt;if(Kh)e:{switch(i){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else fa?Jy(i,c)&&(ut="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ut="onCompositionStart");ut&&(Qy&&c.locale!=="ko"&&(fa||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&fa&&(tt=Vy()):(ms=Z,qh="value"in ms?ms.value:ms.textContent,fa=!0)),je=pd(F,ut),0<je.length&&(ut=new Ky(ut,i,null,c,Z),ne.push({event:ut,listeners:je}),tt?ut.data=tt:(tt=Zy(c),tt!==null&&(ut.data=tt)))),(tt=FT?GT(i,c):KT(i,c))&&(ut=pd(F,"onBeforeInput"),0<ut.length&&(je=new Ky("onBeforeInput","beforeinput",null,c,Z),ne.push({event:je,listeners:ut}),je.data=tt)),Ik(ne,i,F,c,Z)}zv(ne,a)})}function nc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function pd(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=El(i,c),g!=null&&f.unshift(nc(i,g,b)),g=El(i,a),g!=null&&f.push(nc(i,g,b))),i.tag===3)return f;i=i.return}return[]}function qk(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Hv(i,a,c,f,g){for(var b=a._reactName,E=[];c!==null&&c!==f;){var k=c,_=k.alternate,F=k.stateNode;if(k=k.tag,_!==null&&_===f)break;k!==5&&k!==26&&k!==27||F===null||(_=F,g?(F=El(c,b),F!=null&&E.unshift(nc(c,F,_))):g||(F=El(c,b),F!=null&&E.push(nc(c,F,_)))),c=c.return}E.length!==0&&i.push({event:a,listeners:E})}var Pk=/\r\n?/g,Vk=/\u0000|\uFFFD/g;function Uv(i){return(typeof i=="string"?i:""+i).replace(Pk,`
`).replace(Vk,"")}function $v(i,a){return a=Uv(a),Uv(i)===a}function Tt(i,a,c,f,g,b){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Fe(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Fe(i,""+f);break;case"className":br(i,"class",f);break;case"tabIndex":br(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":br(i,c,f);break;case"style":St(i,f,b);break;case"data":if(a!=="object"){br(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=ps(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&Tt(i,a,"name",g.name,g,null),Tt(i,a,"formEncType",g.formEncType,g,null),Tt(i,a,"formMethod",g.formMethod,g,null),Tt(i,a,"formTarget",g.formTarget,g,null)):(Tt(i,a,"encType",g.encType,g,null),Tt(i,a,"method",g.method,g,null),Tt(i,a,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=ps(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=be);break;case"onScroll":f!=null&&at("scroll",i);break;case"onScrollEnd":f!=null&&at("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=ps(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":at("beforetoggle",i),at("toggle",i),Vn(i,"popover",f);break;case"xlinkActuate":nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":nr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":nr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":nr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":nr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Vn(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Di.get(c)||c,Vn(i,c,f))}}function Em(i,a,c,f,g,b){switch(c){case"style":St(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Fe(i,f):(typeof f=="number"||typeof f=="bigint")&&Fe(i,""+f);break;case"onScroll":f!=null&&at("scroll",i);break;case"onScrollEnd":f!=null&&at("scrollend",i);break;case"onClick":f!=null&&(i.onclick=be);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ho.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),b=i[Pn]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(a,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):Vn(i,c,f)}}}function zn(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",i),at("load",i);var f=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var E=c[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(i,a,b,E,c,null)}}g&&Tt(i,a,"srcSet",c.srcSet,c,null),f&&Tt(i,a,"src",c.src,c,null);return;case"input":at("invalid",i);var k=b=E=g=null,_=null,F=null;for(f in c)if(c.hasOwnProperty(f)){var Z=c[f];if(Z!=null)switch(f){case"name":g=Z;break;case"type":E=Z;break;case"checked":_=Z;break;case"defaultChecked":F=Z;break;case"value":b=Z;break;case"defaultValue":k=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:Tt(i,a,f,Z,c,null)}}po(i,b,k,_,F,E,g,!1);return;case"select":at("invalid",i),f=E=b=null;for(g in c)if(c.hasOwnProperty(g)&&(k=c[g],k!=null))switch(g){case"value":b=k;break;case"defaultValue":E=k;break;case"multiple":f=k;default:Tt(i,a,g,k,c,null)}a=b,c=E,i.multiple=!!f,a!=null?jn(i,!!f,a,!1):c!=null&&jn(i,!!f,c,!0);return;case"textarea":at("invalid",i),b=g=f=null;for(E in c)if(c.hasOwnProperty(E)&&(k=c[E],k!=null))switch(E){case"value":f=k;break;case"defaultValue":g=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:Tt(i,a,E,k,c,null)}da(i,f,g,b);return;case"option":for(_ in c)if(c.hasOwnProperty(_)&&(f=c[_],f!=null))switch(_){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Tt(i,a,_,f,c,null)}return;case"dialog":at("beforetoggle",i),at("toggle",i),at("cancel",i),at("close",i);break;case"iframe":case"object":at("load",i);break;case"video":case"audio":for(f=0;f<tc.length;f++)at(tc[f],i);break;case"image":at("error",i),at("load",i);break;case"details":at("toggle",i);break;case"embed":case"source":case"link":at("error",i),at("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in c)if(c.hasOwnProperty(F)&&(f=c[F],f!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(i,a,F,f,c,null)}return;default:if(hs(a)){for(Z in c)c.hasOwnProperty(Z)&&(f=c[Z],f!==void 0&&Em(i,a,Z,f,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(f=c[k],f!=null&&Tt(i,a,k,f,c,null))}function Fk(i,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,k=null,_=null,F=null,Z=null;for(J in c){var ne=c[J];if(c.hasOwnProperty(J)&&ne!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":_=ne;default:f.hasOwnProperty(J)||Tt(i,a,J,null,f,ne)}}for(var G in f){var J=f[G];if(ne=c[G],f.hasOwnProperty(G)&&(J!=null||ne!=null))switch(G){case"type":b=J;break;case"name":g=J;break;case"checked":F=J;break;case"defaultChecked":Z=J;break;case"value":E=J;break;case"defaultValue":k=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:J!==ne&&Tt(i,a,G,J,f,ne)}}vl(i,E,k,_,F,Z,b,g);return;case"select":J=E=k=G=null;for(b in c)if(_=c[b],c.hasOwnProperty(b)&&_!=null)switch(b){case"value":break;case"multiple":J=_;default:f.hasOwnProperty(b)||Tt(i,a,b,null,f,_)}for(g in f)if(b=f[g],_=c[g],f.hasOwnProperty(g)&&(b!=null||_!=null))switch(g){case"value":G=b;break;case"defaultValue":k=b;break;case"multiple":E=b;default:b!==_&&Tt(i,a,g,b,f,_)}a=k,c=E,f=J,G!=null?jn(i,!!c,G,!1):!!f!=!!c&&(a!=null?jn(i,!!c,a,!0):jn(i,!!c,c?[]:"",!1));return;case"textarea":J=G=null;for(k in c)if(g=c[k],c.hasOwnProperty(k)&&g!=null&&!f.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Tt(i,a,k,null,f,g)}for(E in f)if(g=f[E],b=c[E],f.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":G=g;break;case"defaultValue":J=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&Tt(i,a,E,g,f,b)}bu(i,G,J);return;case"option":for(var Ae in c)if(G=c[Ae],c.hasOwnProperty(Ae)&&G!=null&&!f.hasOwnProperty(Ae))switch(Ae){case"selected":i.selected=!1;break;default:Tt(i,a,Ae,null,f,G)}for(_ in f)if(G=f[_],J=c[_],f.hasOwnProperty(_)&&G!==J&&(G!=null||J!=null))switch(_){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Tt(i,a,_,G,f,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in c)G=c[qe],c.hasOwnProperty(qe)&&G!=null&&!f.hasOwnProperty(qe)&&Tt(i,a,qe,null,f,G);for(F in f)if(G=f[F],J=c[F],f.hasOwnProperty(F)&&G!==J&&(G!=null||J!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,a));break;default:Tt(i,a,F,G,f,J)}return;default:if(hs(a)){for(var kt in c)G=c[kt],c.hasOwnProperty(kt)&&G!==void 0&&!f.hasOwnProperty(kt)&&Em(i,a,kt,void 0,f,G);for(Z in f)G=f[Z],J=c[Z],!f.hasOwnProperty(Z)||G===J||G===void 0&&J===void 0||Em(i,a,Z,G,f,J);return}}for(var $ in c)G=c[$],c.hasOwnProperty($)&&G!=null&&!f.hasOwnProperty($)&&Tt(i,a,$,null,f,G);for(ne in f)G=f[ne],J=c[ne],!f.hasOwnProperty(ne)||G===J||G==null&&J==null||Tt(i,a,ne,G,f,J)}function qv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gk(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],b=g.transferSize,E=g.initiatorType,k=g.duration;if(b&&k&&qv(E)){for(E=0,k=g.responseEnd,f+=1;f<c.length;f++){var _=c[f],F=_.startTime;if(F>k)break;var Z=_.transferSize,ne=_.initiatorType;Z&&qv(ne)&&(_=_.responseEnd,E+=Z*(_<k?1:(k-F)/(_-F)))}if(--f,a+=8*(b+E)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Cm=null,Nm=null;function md(i){return i.nodeType===9?i:i.ownerDocument}function Pv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Tm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var km=null;function Kk(){var i=window.event;return i&&i.type==="popstate"?i===km?!1:(km=i,!0):(km=null,!1)}var Fv=typeof setTimeout=="function"?setTimeout:void 0,Wk=typeof clearTimeout=="function"?clearTimeout:void 0,Gv=typeof Promise=="function"?Promise:void 0,Qk=typeof queueMicrotask=="function"?queueMicrotask:typeof Gv<"u"?function(i){return Gv.resolve(null).then(i).catch(Yk)}:Fv;function Yk(i){setTimeout(function(){throw i})}function Ds(i){return i==="head"}function Kv(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(g),Ua(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")rc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,rc(c);for(var b=c.firstChild;b;){var E=b.nextSibling,k=b.nodeName;b[fo]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=E}}else c==="body"&&rc(i.ownerDocument.body);c=g}while(c);Ua(a)}function Wv(i,a){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Am(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Am(c),bl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function Xk(i,a,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[fo])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Hr(i.nextSibling),i===null)break}return null}function Jk(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Hr(i.nextSibling),i===null))return null;return i}function Qv(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hr(i.nextSibling),i===null))return null;return i}function Mm(i){return i.data==="$?"||i.data==="$~"}function Om(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Zk(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Hr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Rm=null;function Yv(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return Hr(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function Xv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function Jv(i,a,c){switch(a=md(c),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function rc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);bl(i)}var Ur=new Map,Zv=new Set;function gd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Wi=D.d;D.d={f:eA,r:tA,D:nA,C:rA,L:iA,m:sA,X:aA,S:oA,M:lA};function eA(){var i=Wi.f(),a=ad();return i||a}function tA(i){var a=Oi(i);a!==null&&a.tag===5&&a.type==="form"?gx(a):Wi.r(i)}var za=typeof document>"u"?null:document;function e1(i,a,c){var f=za;if(f&&typeof a=="string"&&a){var g=rr(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Zv.has(g)||(Zv.add(g),i={rel:i,crossOrigin:c,href:a},f.querySelector(g)===null&&(a=f.createElement("link"),zn(a,"link",i),fn(a),f.head.appendChild(a)))}}function nA(i){Wi.D(i),e1("dns-prefetch",i,null)}function rA(i,a){Wi.C(i,a),e1("preconnect",i,a)}function iA(i,a,c){Wi.L(i,a,c);var f=za;if(f&&i&&a){var g='link[rel="preload"][as="'+rr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+rr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+rr(c.imageSizes)+'"]')):g+='[href="'+rr(i)+'"]';var b=g;switch(a){case"style":b=Ia(i);break;case"script":b=Ha(i)}Ur.has(b)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Ur.set(b,i),f.querySelector(g)!==null||a==="style"&&f.querySelector(ic(b))||a==="script"&&f.querySelector(sc(b))||(a=f.createElement("link"),zn(a,"link",i),fn(a),f.head.appendChild(a)))}}function sA(i,a){Wi.m(i,a);var c=za;if(c&&i){var f=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+rr(f)+'"][href="'+rr(i)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ha(i)}if(!Ur.has(b)&&(i=m({rel:"modulepreload",href:i},a),Ur.set(b,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(sc(b)))return}f=c.createElement("link"),zn(f,"link",i),fn(f),c.head.appendChild(f)}}}function oA(i,a,c){Wi.S(i,a,c);var f=za;if(f&&i){var g=fs(f).hoistableStyles,b=Ia(i);a=a||"default";var E=g.get(b);if(!E){var k={loading:0,preload:null};if(E=f.querySelector(ic(b)))k.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Ur.get(b))&&Dm(i,c);var _=E=f.createElement("link");fn(_),zn(_,"link",i),_._p=new Promise(function(F,Z){_.onload=F,_.onerror=Z}),_.addEventListener("load",function(){k.loading|=1}),_.addEventListener("error",function(){k.loading|=2}),k.loading|=4,yd(E,a,f)}E={type:"stylesheet",instance:E,count:1,state:k},g.set(b,E)}}}function aA(i,a){Wi.X(i,a);var c=za;if(c&&i){var f=fs(c).hoistableScripts,g=Ha(i),b=f.get(g);b||(b=c.querySelector(sc(g)),b||(i=m({src:i,async:!0},a),(a=Ur.get(g))&&jm(i,a),b=c.createElement("script"),fn(b),zn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function lA(i,a){Wi.M(i,a);var c=za;if(c&&i){var f=fs(c).hoistableScripts,g=Ha(i),b=f.get(g);b||(b=c.querySelector(sc(g)),b||(i=m({src:i,async:!0,type:"module"},a),(a=Ur.get(g))&&jm(i,a),b=c.createElement("script"),fn(b),zn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function t1(i,a,c,f){var g=(g=we.current)?gd(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Ia(c.href),c=fs(g).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Ia(c.href);var b=fs(g).hoistableStyles,E=b.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,E),(b=g.querySelector(ic(i)))&&!b._p&&(E.instance=b,E.state.loading=5),Ur.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ur.set(i,c),b||cA(g,i,c,E.state))),a&&f===null)throw Error(r(528,""));return E}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ha(c),c=fs(g).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ia(i){return'href="'+rr(i)+'"'}function ic(i){return'link[rel="stylesheet"]['+i+"]"}function n1(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function cA(i,a,c,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),zn(a,"link",c),fn(a),i.head.appendChild(a))}function Ha(i){return'[src="'+rr(i)+'"]'}function sc(i){return"script[async]"+i}function r1(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+rr(c.href)+'"]');if(f)return a.instance=f,fn(f),f;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),fn(f),zn(f,"style",g),yd(f,c.precedence,i),a.instance=f;case"stylesheet":g=Ia(c.href);var b=i.querySelector(ic(g));if(b)return a.state.loading|=4,a.instance=b,fn(b),b;f=n1(c),(g=Ur.get(g))&&Dm(f,g),b=(i.ownerDocument||i).createElement("link"),fn(b);var E=b;return E._p=new Promise(function(k,_){E.onload=k,E.onerror=_}),zn(b,"link",f),a.state.loading|=4,yd(b,c.precedence,i),a.instance=b;case"script":return b=Ha(c.src),(g=i.querySelector(sc(b)))?(a.instance=g,fn(g),g):(f=c,(g=Ur.get(b))&&(f=m({},c),jm(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),fn(g),zn(g,"link",f),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,yd(f,c.precedence,i));return a.instance}function yd(i,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,E=0;E<f.length;E++){var k=f[E];if(k.dataset.precedence===a)b=k;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Dm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function jm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var bd=null;function i1(i,a,c){if(bd===null){var f=new Map,g=bd=new Map;g.set(c,f)}else g=bd,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var b=c[g];if(!(b[fo]||b[on]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(a)||"";E=i+E;var k=f.get(E);k?k.push(b):f.set(E,[b])}}return f}function s1(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function uA(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function o1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function dA(i,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Ia(f.href),b=a.querySelector(ic(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=xd.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=b,fn(b);return}b=a.ownerDocument||a,f=n1(f),(g=Ur.get(g))&&Dm(f,g),b=b.createElement("link"),fn(b);var E=b;E._p=new Promise(function(k,_){E.onload=k,E.onerror=_}),zn(b,"link",f),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=xd.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var _m=0;function fA(i,a){return i.stylesheets&&i.count===0&&wd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&wd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&_m===0&&(_m=62500*Gk());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&wd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>_m?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var vd=null;function wd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,vd=new Map,a.forEach(hA,i),vd=null,xd.call(i))}function hA(i,a){if(!(a.state.loading&4)){var c=vd.get(i);if(c)var f=c.get(null);else{c=new Map,vd.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),f=E)}f&&c.set(null,f)}g=a.instance,E=g.getAttribute("data-precedence"),b=c.get(E)||f,b===f&&c.set(null,g),c.set(E,g),this.count++,f=xd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var oc={$$typeof:R,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function pA(i,a,c,f,g,b,E,k,_){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.hiddenUpdates=ht(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function a1(i,a,c,f,g,b,E,k,_,F,Z,ne){return i=new pA(i,a,c,E,_,F,Z,ne,k),a=1,b===!0&&(a|=24),b=wr(3,null,null,a),i.current=b,b.stateNode=i,a=hp(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:a},yp(b),i}function l1(i){return i?(i=ga,i):ga}function c1(i,a,c,f,g,b){g=l1(g),f.context===null?f.context=g:f.pendingContext=g,f=ws(a),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=Ss(i,f,a),c!==null&&(cr(c,i,a),Il(c,i,a))}function u1(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Lm(i,a){u1(i,a),(i=i.alternate)&&u1(i,a)}function d1(i){if(i.tag===13||i.tag===31){var a=bo(i,67108864);a!==null&&cr(a,i,67108864),Lm(i,67108864)}}function f1(i){if(i.tag===13||i.tag===31){var a=Tr();a=Mt(a);var c=bo(i,a);c!==null&&cr(c,i,a),Lm(i,a)}}var Sd=!0;function mA(i,a,c,f){var g=B.T;B.T=null;var b=D.p;try{D.p=2,Bm(i,a,c,f)}finally{D.p=b,B.T=g}}function gA(i,a,c,f){var g=B.T;B.T=null;var b=D.p;try{D.p=8,Bm(i,a,c,f)}finally{D.p=b,B.T=g}}function Bm(i,a,c,f){if(Sd){var g=zm(f);if(g===null)Sm(i,a,f,Ed,c),p1(i,f);else if(bA(g,i,a,c,f))f.stopPropagation();else if(p1(i,f),a&4&&-1<yA.indexOf(i)){for(;g!==null;){var b=Oi(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=Ut(b.pendingLanes);if(E!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;E;){var _=1<<31-ke(E);k.entanglements[1]|=_,E&=~_}fi(b),(bt&6)===0&&(sd=Ze()+500,ec(0))}}break;case 31:case 13:k=bo(b,2),k!==null&&cr(k,b,2),ad(),Lm(b,2)}if(b=zm(f),b===null&&Sm(i,a,f,Ed,c),b===g)break;g=b}g!==null&&f.stopPropagation()}else Sm(i,a,f,null,c)}}function zm(i){return i=Je(i),Im(i)}var Ed=null;function Im(i){if(Ed=null,i=Xn(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Ed=i,null}function h1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case _t:return 2;case ye:return 8;case Ne:case Ke:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var Hm=!1,js=null,_s=null,Ls=null,ac=new Map,lc=new Map,Bs=[],yA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p1(i,a){switch(i){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":ac.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(a.pointerId)}}function cc(i,a,c,f,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},a!==null&&(a=Oi(a),a!==null&&d1(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function bA(i,a,c,f,g){switch(a){case"focusin":return js=cc(js,i,a,c,f,g),!0;case"dragenter":return _s=cc(_s,i,a,c,f,g),!0;case"mouseover":return Ls=cc(Ls,i,a,c,f,g),!0;case"pointerover":var b=g.pointerId;return ac.set(b,cc(ac.get(b)||null,i,a,c,f,g)),!0;case"gotpointercapture":return b=g.pointerId,lc.set(b,cc(lc.get(b)||null,i,a,c,f,g)),!0}return!1}function m1(i){var a=Xn(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,oa(i.priority,function(){f1(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,oa(i.priority,function(){f1(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=zm(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);De=f,c.target.dispatchEvent(f),De=null}else return a=Oi(c),a!==null&&d1(a),i.blockedOn=c,!1;a.shift()}return!0}function g1(i,a,c){Cd(i)&&c.delete(a)}function xA(){Hm=!1,js!==null&&Cd(js)&&(js=null),_s!==null&&Cd(_s)&&(_s=null),Ls!==null&&Cd(Ls)&&(Ls=null),ac.forEach(g1),lc.forEach(g1)}function Nd(i,a){i.blockedOn===a&&(i.blockedOn=null,Hm||(Hm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xA)))}var Td=null;function y1(i){Td!==i&&(Td=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Td===i&&(Td=null);for(var a=0;a<i.length;a+=3){var c=i[a],f=i[a+1],g=i[a+2];if(typeof f!="function"){if(Im(f||c)===null)continue;break}var b=Oi(c);b!==null&&(i.splice(a,3),a-=3,zp(b,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function Ua(i){function a(_){return Nd(_,i)}js!==null&&Nd(js,i),_s!==null&&Nd(_s,i),Ls!==null&&Nd(Ls,i),ac.forEach(a),lc.forEach(a);for(var c=0;c<Bs.length;c++){var f=Bs[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Bs.length&&(c=Bs[0],c.blockedOn===null);)m1(c),c.blockedOn===null&&Bs.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],b=c[f+1],E=g[Pn]||null;if(typeof b=="function")E||y1(c);else if(E){var k=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[Pn]||null)k=E.formAction;else if(Im(g)!==null)continue}else k=E.action;typeof k=="function"?c[f+1]=k:(c.splice(f,3),f-=3),y1(c)}}}function b1(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Um(i){this._internalRoot=i}kd.prototype.render=Um.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=Tr();c1(c,f,i,a,null,null)},kd.prototype.unmount=Um.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;c1(i.current,2,null,i,null,null),ad(),a[us]=null}};function kd(i){this._internalRoot=i}kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=uo();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Bs.length&&a!==0&&a<Bs[c].priority;c++);Bs.splice(c,0,i),c===0&&m1(i)}};var x1=e.version;if(x1!=="19.2.0")throw Error(r(527,x1,"19.2.0"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var vA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{gr=Ad.inject(vA),X=Ad}catch{}}return dc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var c=!1,f="",g=Tx,b=kx,E=Ax;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=a1(i,1,!1,null,null,c,f,null,g,b,E,b1),i[us]=a.current,wm(i),new Um(a)},dc.hydrateRoot=function(i,a,c){if(!s(i))throw Error(r(299));var f=!1,g="",b=Tx,E=kx,k=Ax,_=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(_=c.formState)),a=a1(i,1,!0,a,c??null,f,g,_,b,E,k,b1),a.context=l1(null),c=a.current,f=Tr(),f=Mt(f),g=ws(f),g.callback=null,Ss(c,g,f),c=f,a.current.lanes=c,Ve(a,c),fi(a),i[us]=a.current,wm(i),new kd(a)},dc.version="19.2.0",dc}var M1;function MA(){if(M1)return Pm.exports;M1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pm.exports=AA(),Pm.exports}var OA=MA();const jo="1.29.1";var xi=[],Vr=[],RA=Uint8Array,Km="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $a=0,DA=Km.length;$a<DA;++$a)xi[$a]=Km[$a],Vr[Km.charCodeAt($a)]=$a;Vr[45]=62;Vr[95]=63;function jA(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function _A(n,e,t){return(e+t)*3/4-t}function zc(n){var e,t=jA(n),r=t[0],s=t[1],o=new RA(_A(n,r,s)),l=0,u=s>0?r-4:r,d;for(d=0;d<u;d+=4)e=Vr[n.charCodeAt(d)]<<18|Vr[n.charCodeAt(d+1)]<<12|Vr[n.charCodeAt(d+2)]<<6|Vr[n.charCodeAt(d+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=e&255;return s===2&&(e=Vr[n.charCodeAt(d)]<<2|Vr[n.charCodeAt(d+1)]>>4,o[l++]=e&255),s===1&&(e=Vr[n.charCodeAt(d)]<<10|Vr[n.charCodeAt(d+1)]<<4|Vr[n.charCodeAt(d+2)]>>2,o[l++]=e>>8&255,o[l++]=e&255),o}function LA(n){return xi[n>>18&63]+xi[n>>12&63]+xi[n>>6&63]+xi[n&63]}function BA(n,e,t){for(var r,s=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),s.push(LA(r));return s.join("")}function Ic(n){for(var e,t=n.length,r=t%3,s=[],o=16383,l=0,u=t-r;l<u;l+=o)s.push(BA(n,l,l+o>u?u:l+o));return r===1?(e=n[t-1],s.push(xi[e>>2]+xi[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],s.push(xi[e>>10]+xi[e>>4&63]+xi[e<<2&63]+"=")),s.join("")}function dr(n){if(n===void 0)return{};if(!vE(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function xE(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function vE(n){var s;const e=typeof n=="object",t=Object.getPrototypeOf(n),r=t===null||t===Object.prototype||((s=t==null?void 0:t.constructor)==null?void 0:s.name)==="Object";return e&&r}const wE=!0,el=BigInt("-9223372036854775808"),L0=BigInt("9223372036854775807"),Ug=BigInt("0"),zA=BigInt("8"),IA=BigInt("256");function SE(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function HA(n){n<Ug&&(n-=el+el);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let r=0;for(const s of e.match(/.{2}/g).reverse())t.set([parseInt(s,16)],r++),n>>=zA;return Ic(t)}function UA(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=Ug,r=Ug;for(const s of e)t+=BigInt(s)*IA**r,r++;return t>L0&&(t+=el+el),t}function $A(n){if(n<el||L0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),Ic(new Uint8Array(e))}function qA(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const PA=DataView.prototype.setBigInt64?$A:HA,VA=DataView.prototype.getBigInt64?qA:UA,O1=1024;function EE(n){if(n.length>O1)throw new Error(`Field name ${n} exceeds maximum field name length ${O1}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function ri(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(r=>ri(r));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return zc(n.$bytes).buffer}if(r==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return VA(n.$integer)}if(r==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const s=zc(n.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const l=new DataView(s.buffer).getFloat64(0,wE);if(!SE(l))throw new Error(`Float ${l} should be encoded as a number`);return l}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[r,s]of Object.entries(n))EE(r),t[r]=ri(s);return t}const R1=16384;function wc(n){const e=JSON.stringify(n,(t,r)=>r===void 0?"undefined":typeof r=="bigint"?`${r.toString()}n`:r);if(e.length>R1){const t="[...truncated]";let r=R1-t.length;const s=e.codePointAt(r-1);return s!==void 0&&s>65535&&(r-=1),e.substring(0,r)+t}return e}function $g(n,e,t,r){var l;if(n===void 0){const u=t&&` (present at path ${t} in original object ${wc(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<el||L0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:PA(n)}}if(typeof n=="number")if(SE(n)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,n,wE),{$float:Ic(new Uint8Array(u))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:Ic(new Uint8Array(n))};if(Array.isArray(n))return n.map((u,d)=>$g(u,e,t+`[${d}]`));if(n instanceof Set)throw new Error(Wm(t,"Set",[...n],e));if(n instanceof Map)throw new Error(Wm(t,"Map",[...n],e));if(!vE(n)){const u=(l=n==null?void 0:n.constructor)==null?void 0:l.name,d=u?`${u} `:"";throw new Error(Wm(t,d,n,e))}const s={},o=Object.entries(n);o.sort(([u,d],[h,p])=>u===h?0:u<h?-1:1);for(const[u,d]of o)d!==void 0&&(EE(u),s[u]=$g(d,e,t+`.${u}`));return s}function Wm(n,e,t,r){return n?`${e}${wc(t)} is not a supported Convex type (present at path ${n} in original object ${wc(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${wc(t)} is not a supported Convex type.`}function Kr(n){return $g(n,n,"")}var FA=Object.defineProperty,GA=(n,e,t)=>e in n?FA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qm=(n,e,t)=>GA(n,typeof e!="symbol"?e+"":e,t),D1,j1;const KA=Symbol.for("ConvexError");class Bo extends(j1=Error,D1=KA,j1){constructor(e){super(typeof e=="string"?e:wc(e)),Qm(this,"name","ConvexError"),Qm(this,"data"),Qm(this,D1,!0),this.data=e}}const CE=()=>Array.from({length:4},()=>0);CE();CE();var WA=Object.defineProperty,QA=(n,e,t)=>e in n?WA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_1=(n,e,t)=>QA(n,typeof e!="symbol"?e+"":e,t);const YA="color:rgb(0, 145, 255)";function NE(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class TE{constructor(e){_1(this,"_onLogLineFuncs"),_1(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[t]!==void 0;r++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function B0(n){const e=new TE(n);return e.addLogLineListener((t,...r)=>{switch(t){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function z0(n){return new TE(n)}function Ks(n,e,t,r,s){const o=NE(t);if(typeof s=="object"&&(s=`ConvexError ${JSON.stringify(s.errorData,null,2)}`),e==="info"){const l=s.match(/^\[.*?\] /);if(l===null){n.error(`[CONVEX ${o}(${r})] Could not parse console.log`);return}const u=s.slice(1,l[0].length-2),d=s.slice(l[0].length);n.log(`%c[CONVEX ${o}(${r})] [${u}]`,YA,d)}else n.error(`[CONVEX ${o}(${r})] ${s}`)}function XA(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function Qa(n,e,t){return`[CONVEX ${NE(n)}(${e})] ${t.errorMessage}
  Called by client`}function qg(n,e){return e.data=n.errorData,e}function mf(n){const e=n.split(":");let t,r;return e.length===1?(t=e[0],r="default"):(t=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function Uo(n,e){return JSON.stringify({udfPath:mf(n),args:Kr(e)})}var JA=Object.defineProperty,ZA=(n,e,t)=>e in n?JA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hi=(n,e,t)=>ZA(n,typeof e!="symbol"?e+"":e,t);class eM{constructor(){hi(this,"nextQueryId"),hi(this,"querySetVersion"),hi(this,"querySet"),hi(this,"queryIdToToken"),hi(this,"identityVersion"),hi(this,"auth"),hi(this,"outstandingQueriesOlderThanRestart"),hi(this,"outstandingAuthOlderThanRestart"),hi(this,"paused"),hi(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,s){const o=mf(e),l=Uo(o,t),u=this.querySet.get(l);if(u!==void 0)return u.numSubscribers+=1,{queryToken:l,modification:null,unsubscribe:()=>this.removeSubscriber(l)};{const d=this.nextQueryId++,h={id:d,canonicalizedUdfPath:o,args:t,numSubscribers:1,journal:r,componentPath:s};this.querySet.set(l,h),this.queryIdToToken.set(d,l);const p=this.querySetVersion,m=this.querySetVersion+1,x={type:"Add",queryId:d,udfPath:o,args:[Kr(t)],journal:r,componentPath:s};return this.paused?this.pendingQuerySetModifications.set(d,x):this.querySetVersion=m,{queryToken:l,modification:{type:"ModifyQuerySet",baseVersion:p,newVersion:m,modifications:[x]},unsubscribe:()=>this.removeSubscriber(l)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const r=t.journal;if(r!==void 0){const s=this.queryIdToToken.get(t.queryId);s!==void 0&&(this.querySet.get(s).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const r=mf(e),s=Uo(r,t),o=this.querySet.get(s);return o!==void 0?o.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}getAuth(){return this.auth}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;const s=this.identityVersion;return this.paused||(this.identityVersion=s+1),{type:"Authenticate",baseVersion:s,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var t;return((t=this.auth)==null?void 0:t.value)!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var t;return(t=this.querySet.get(e))==null?void 0:t.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const o of this.querySet.values()){const l={type:"Add",queryId:o.id,udfPath:o.canonicalizedUdfPath,args:[Kr(o.args)],journal:o.journal,componentPath:o.componentPath};t.push(l),e.has(o.id)||this.outstandingQueriesOlderThanRestart.add(o.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const s={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,s]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const r=this.querySetVersion,s=this.querySetVersion+1,o={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,o):this.querySetVersion=s,{type:"ModifyQuerySet",baseVersion:r,newVersion:s,modifications:[o]}}}}var tM=Object.defineProperty,nM=(n,e,t)=>e in n?tM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Md=(n,e,t)=>nM(n,typeof e!="symbol"?e+"":e,t);class rM{constructor(e,t){this.logger=e,this.markConnectionStateDirty=t,Md(this,"inflightRequests"),Md(this,"requestsOlderThanRestart"),Md(this,"inflightMutationsCount",0),Md(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){const r=new Promise(s=>{const o=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:o,requestedAt:new Date,onResult:s}}),e.type==="Mutation"?this.inflightMutationsCount++:e.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),r}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const r=t.message.type==="Mutation"?"mutation":"action",s=t.message.udfPath;for(const d of e.logLines)Ks(this.logger,"info",r,s,d);const o=t.status;let l,u;if(e.success)l={success:!0,logLines:e.logLines,value:ri(e.result)},u=()=>o.onResult(l);else{const d=e.result,{errorData:h}=e;Ks(this.logger,"error",r,s,d),l={success:!1,errorMessage:d,errorData:h!==void 0?ri(h):void 0,logLines:e.logLines},u=()=>o.onResult(l)}return e.type==="ActionResponse"||!e.success?(u(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),t.message.type==="Action"?this.inflightActionsCount--:t.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:e.requestId,result:l}):(t.status={status:"Completed",result:l,ts:e.ts,onResolve:u},null)}removeCompleted(e){const t=new Map;for(const[r,s]of this.inflightRequests.entries()){const o=s.status;o.status==="Completed"&&o.ts.lessThanOrEqual(e)&&(o.onResolve(),t.set(r,o.result),s.message.type==="Mutation"?this.inflightMutationsCount--:s.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t.size>0&&this.markConnectionStateDirty(),t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else if(r.message.type==="Action"){if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),this.inflightActionsCount--,r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const Hc=Symbol.for("functionName"),kE=Symbol.for("toReferencePath");function iM(n){return n[kE]??null}function sM(n){return n.startsWith("function://")}function oM(n){let e;if(typeof n=="string")sM(n)?e={functionHandle:n}:e={name:n};else if(n[Hc])e={name:n[Hc]};else{const t=iM(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function Tn(n){const e=oM(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[Hc];if(!t)throw new Error(`${n} is not a functionReference`);return t}function I0(n){return{[Hc]:n}}function AE(n=[]){const e={get(t,r){if(typeof r=="string"){const s=[...n,r];return AE(s)}else if(r===Hc){if(n.length<2){const l=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${l}\``)}const s=n.slice(0,-1).join("/"),o=n[n.length-1];return o==="default"?s:s+":"+o}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const aM=AE();var lM=Object.defineProperty,cM=(n,e,t)=>e in n?lM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gf=(n,e,t)=>cM(n,typeof e!="symbol"?e+"":e,t);class Uc{constructor(e){gf(this,"queryResults"),gf(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const r=dr(t[0]),s=Tn(e),o=this.queryResults.get(Uo(s,r));if(o!==void 0)return Uc.queryValue(o.result)}getAllQueries(e){const t=[],r=Tn(e);for(const s of this.queryResults.values())s.udfPath===mf(r)&&t.push({args:s.args,value:Uc.queryValue(s.result)});return t}setQuery(e,t,r){const s=dr(t),o=Tn(e),l=Uo(o,s);let u;r===void 0?u=void 0:u={success:!0,value:r,logLines:[]};const d={udfPath:o,args:s,result:u};this.queryResults.set(l,d),this.modifiedQueries.push(l)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class uM{constructor(){gf(this,"queryResults"),gf(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(l=>!t.has(l.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const s=new Uc(this.queryResults);for(const l of this.optimisticUpdates)l.update(s);const o=[];for(const[l,u]of this.queryResults){const d=r.get(l);(d===void 0||d.result!==u.result)&&o.push(l)}return o}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const r=new Uc(this.queryResults);return e(r),r.modifiedQueries}rawQueryResult(e){return this.queryResults.get(e)}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const r=t.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?qg(r,new Bo(Qa("query",t.udfPath,r))):new Error(Qa("query",t.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const t=this.queryResults.get(e);return(r=t==null?void 0:t.result)==null?void 0:r.logLines}}var dM=Object.defineProperty,fM=(n,e,t)=>e in n?dM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ym=(n,e,t)=>fM(n,typeof e!="symbol"?e+"":e,t);class kr{constructor(e,t){Ym(this,"low"),Ym(this,"high"),Ym(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new kr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?L1:e>=hM?pM:new kr(e%Sc|0,e/Sc|0)}toString(){return(BigInt(this.high)*BigInt(Sc)+BigInt(this.low)).toString()}equals(e){return kr.isLong(e)||(e=kr.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return kr.isLong(e)||(e=kr.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?kr.fromNumber(e):new kr(e.low,e.high)}}const L1=new kr(0,0),B1=65536,Sc=B1*B1,hM=Sc*Sc,pM=new kr(-1,-1);var mM=Object.defineProperty,gM=(n,e,t)=>e in n?mM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Od=(n,e,t)=>gM(n,typeof e!="symbol"?e+"":e,t);class z1{constructor(e,t){Od(this,"version"),Od(this,"remoteQuerySet"),Od(this,"queryPath"),Od(this,"logger"),this.version={querySet:0,ts:kr.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}:${t.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Ks(this.logger,"info","query",s,l);const o=ri(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:o,logLines:r.logLines});break}case"QueryFailed":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Ks(this.logger,"info","query",s,l);const{errorData:o}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:o!==void 0?ri(o):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Xm(n){const e=zc(n);return kr.fromBytesLE(Array.from(e))}function yM(n){const e=new Uint8Array(n.toBytesLE());return Ic(e)}function I1(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Xm(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Xm(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Xm(n.endVersion.ts)}}}}function bM(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:yM(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var xM=Object.defineProperty,vM=(n,e,t)=>e in n?xM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,In=(n,e,t)=>vM(n,typeof e!="symbol"?e+"":e,t);const wM=1e3,SM=1001,EM=1005,CM=4040;let nf;function rf(){return nf===void 0&&(nf=Date.now()),typeof performance>"u"||!performance.now?Date.now():Math.round(nf+performance.now())}function H1(){return`t=${Math.round((rf()-nf)/100)/10}s`}const ME={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function NM(n){if(n===void 0)return"Unknown";for(const e of Object.keys(ME))if(n.startsWith(e))return e;return"Unknown"}class TM{constructor(e,t,r,s,o,l){this.markConnectionStateDirty=o,this.debug=l,In(this,"socket"),In(this,"connectionCount"),In(this,"_hasEverConnected",!1),In(this,"lastCloseReason"),In(this,"transitionChunkBuffer",null),In(this,"defaultInitialBackoff"),In(this,"maxBackoff"),In(this,"retries"),In(this,"serverInactivityThreshold"),In(this,"reconnectDueToServerInactivityTimeout"),In(this,"uri"),In(this,"onOpen"),In(this,"onResume"),In(this,"onMessage"),In(this,"webSocketConstructor"),In(this,"logger"),In(this,"onServerDisconnectError"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.onServerDisconnectError=t.onServerDisconnectError,this.logger=s,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(e){if(e.partNumber<0||e.partNumber>=e.totalParts||e.totalParts===0||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==e.totalParts||this.transitionChunkBuffer.transitionId!==e.transitionId))throw this.transitionChunkBuffer=null,new Error("Invalid TransitionChunk");if(this.transitionChunkBuffer===null&&(this.transitionChunkBuffer={chunks:[],totalParts:e.totalParts,transitionId:e.transitionId}),e.partNumber!==this.transitionChunkBuffer.chunks.length){const t=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,new Error(`TransitionChunk received out of order: expected part ${t}, got ${e.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(e.chunk),this.transitionChunkBuffer.chunks.length===e.totalParts){const t=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;const r=I1(JSON.parse(t));if(r.type!=="Transition")throw new Error(`Expected Transition, got ${r.type} after assembling chunks`);return r}return null}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:rf()})),this.lastCloseReason!=="InitialConnect"&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",H1(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",H1())),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{this.transitionChunkBuffer=null;const r=t.message;r&&this.logger.log(`WebSocket error message: ${r}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const r=t.data.length;let s=I1(JSON.parse(t.data));if(this._logVerbose(`received ws message with type ${s.type}`),s.type==="Ping")return;if(s.type==="TransitionChunk"){const l=this.assembleTransition(s);if(!l)return;s=l,this._logVerbose(`assembled full ws message of type ${s.type}`)}this.transitionChunkBuffer!==null&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${s.type} while buffering TransitionChunks`)),s.type==="Transition"&&this.reportLargeTransition({messageLength:r,transition:s}),this.onMessage(s).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,this.lastCloseReason===null&&(this.lastCloseReason=t.reason||`closed with code ${t.code}`),t.code!==wM&&t.code!==SM&&t.code!==EM&&t.code!==CM){let s=`WebSocket closed with code ${t.code}`;t.reason&&(s+=`: ${t.reason}`),this.logger.log(s),this.onServerDisconnectError&&t.reason&&this.onServerDisconnectError(s)}const r=NM(t.reason);this.scheduleReconnect(r)}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const r=bM(e),s=JSON.stringify(r);let o=!1;try{this.socket.ws.send(s),o=!0}catch(l){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${l}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${o?"sent":"failed to send"} message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(e){this.socket={state:"disconnected"};const t=this.nextBackoff(e);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(t)}ms`),setTimeout(()=>this.connect(),t)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return e.onmessage=t=>{this._logVerbose("Ignoring message received after close")},new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws;e.onmessage=r=>{this._logVerbose("Ignoring message received after close")};const t=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:rf()})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(e){const r=(e==="client"?100:e==="Unknown"?this.defaultInitialBackoff:ME[e].timeout)*Math.pow(2,this.retries);this.retries+=1;const s=Math.min(r,this.maxBackoff),o=s*(Math.random()-.5);return s+o}reportLargeTransition({transition:e,messageLength:t}){if(e.clientClockSkew===void 0||e.serverTs===void 0)return;const r=rf()-e.clientClockSkew-e.serverTs/1e6,s=`${Math.round(r)}ms`,o=`${Math.round(t/1e4)/100}MB`,l=t/(r/1e3),u=`${Math.round(l/1e4)/100}MB per second`;this._logVerbose(`received ${o} transition in ${s} at ${u}`),t>2e7?this.logger.log(`received query results totaling more that 20MB (${o}) which will take a long time to download on slower connections`):r>2e4&&this.logger.log(`received query results totaling ${o} which took more than 20s to arrive (${s})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:r,messageLength:t}})}}function kM(){return AM()}function AM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class gc extends Error{}gc.prototype.name="InvalidTokenError";function MM(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function OM(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return MM(e)}catch{return atob(e)}}function OE(n,e){if(typeof n!="string")throw new gc("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,r=n.split(".")[t];if(typeof r!="string")throw new gc(`Invalid token specified: missing part #${t+1}`);let s;try{s=OM(r)}catch(o){throw new gc(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new gc(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}var RM=Object.defineProperty,DM=(n,e,t)=>e in n?RM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$r=(n,e,t)=>DM(n,typeof e!="symbol"?e+"":e,t);const jM=20*24*60*60*1e3,U1=2;class _M{constructor(e,t,r){$r(this,"authState",{state:"noAuth"}),$r(this,"configVersion",0),$r(this,"syncState"),$r(this,"authenticate"),$r(this,"stopSocket"),$r(this,"tryRestartSocket"),$r(this,"pauseSocket"),$r(this,"resumeSocket"),$r(this,"clearAuth"),$r(this,"logger"),$r(this,"refreshTokenLeewaySeconds"),$r(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=U1){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${U1-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:s}=t;if(!r||!s){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const o=s-r;if(o<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let l=Math.min(jM,(o-this.refreshTokenLeewaySeconds)*1e3);l<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${o}s`),l=0);const u=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},l);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:u,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${l}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const r=++this.configVersion;this._logVerbose(`fetching token with config version ${r}`);const s=await e(t);return this.configVersion!==r?(this._logVerbose(`stale config version, expected ${r}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:s}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return OE(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const LM=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function BM(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function zM(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function IM(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of LM){const r=performance.getEntriesByName(t).filter(s=>s.entryType==="mark").filter(s=>s.detail.sessionId===n);e.push(...r)}return e.map(zM)}var HM=Object.defineProperty,UM=(n,e,t)=>e in n?HM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bn=(n,e,t)=>UM(n,typeof e!="symbol"?e+"":e,t);class $M{constructor(e,t,r){if(bn(this,"address"),bn(this,"state"),bn(this,"requestManager"),bn(this,"webSocketManager"),bn(this,"authenticationManager"),bn(this,"remoteQuerySet"),bn(this,"optimisticQueryResults"),bn(this,"_transitionHandlerCounter",0),bn(this,"_nextRequestId"),bn(this,"_onTransitionFns",new Map),bn(this,"_sessionId"),bn(this,"firstMessageReceived",!1),bn(this,"debug"),bn(this,"logger"),bn(this,"maxObservedTimestamp"),bn(this,"connectionStateSubscribers",new Map),bn(this,"nextConnectionStateSubscriberId",0),bn(this,"_lastPublishedConnectionState"),bn(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const v=this.connectionState();if(JSON.stringify(v)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=v;for(const w of this.connectionStateSubscribers.values())w(v)}})}),bn(this,"mark",v=>{this.debug&&BM(v,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&xE(e),r={...r};const s=r.authRefreshTokenLeewaySeconds??2;let o=r.webSocketConstructor;if(!o&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");o=o||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger===!1?z0({verbose:r.verbose??!1}):r.logger!==!0&&r.logger?r.logger:B0({verbose:r.verbose??!1});const l=e.search("://");if(l===-1)throw new Error("Provided address was not an absolute URL.");const u=e.substring(l+3),d=e.substring(0,l);let h;if(d==="http")h="ws";else if(d==="https")h="wss";else throw new Error(`Unknown parent protocol ${d}`);const p=`${h}://${u}/api/${jo}/sync`;this.state=new eM,this.remoteQuerySet=new z1(v=>this.state.queryPath(v),this.logger),this.requestManager=new rM(this.logger,this.markConnectionStateDirty);const m=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new _M(this.state,{authenticate:v=>{const w=this.state.setAuth(v);return this.webSocketManager.sendMessage(w),w.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:m,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:s}),this.optimisticQueryResults=new uM,this.addOnTransitionHandler(v=>{t(v.queries.map(w=>w.token))}),this._nextRequestId=0,this._sessionId=kM();const{unsavedChangesWarning:x}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(x===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else x!==!1&&window.addEventListener("beforeunload",v=>{if(this.requestManager.hasIncompleteRequests()){v.preventDefault();const w="Are you sure you want to leave? Your changes may not be saved.";return(v||window.event).returnValue=w,w}});this.webSocketManager=new TM(p,{onOpen:v=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...v,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const w=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new z1(T=>this.state.queryPath(T),this.logger);const[S,C]=this.state.restart(w);C&&this.webSocketManager.sendMessage(C),this.webSocketManager.sendMessage(S);for(const T of this.requestManager.restart())this.webSocketManager.sendMessage(T)},onResume:()=>{const[v,w]=this.state.resume();w&&this.webSocketManager.sendMessage(w),v&&this.webSocketManager.sendMessage(v);for(const S of this.requestManager.resume())this.webSocketManager.sendMessage(S)},onMessage:v=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),v.type){case"Transition":{this.observedTimestamp(v.endVersion.ts),this.authenticationManager.onTransition(v),this.remoteQuerySet.transition(v),this.state.transition(v);const w=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(w);break}case"MutationResponse":{v.success&&this.observedTimestamp(v.ts);const w=this.requestManager.onResponse(v);w!==null&&this.notifyOnQueryResultChanges(new Map([[w.requestId,w.result]]));break}case"ActionResponse":{this.requestManager.onResponse(v);break}case"AuthError":{this.authenticationManager.onAuthError(v);break}case"FatalError":{const w=XA(this.logger,v.error);throw this.webSocketManager.terminate(),w}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:r.onServerDisconnectError},o,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),r.expectAuth&&m()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[o,l]of t){const u=this.state.queryToken(o);if(u!==null){const d={result:l,udfPath:this.state.queryPath(o),args:this.state.queryArgs(o)};r.set(u,d)}}const s=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:s.map(o=>{const l=this.optimisticQueryResults.rawQueryResult(o);return{token:o,modification:{kind:"Updated",result:l.result}}}),reflectedMutations:Array.from(e).map(([o,l])=>({requestId:o,result:l})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}getCurrentAuthClaims(){const e=this.state.getAuth();let t={};if(e&&e.tokenType==="User")try{t=e?OE(e.value):{}}catch{t={}}else return;return{token:e.value,decoded:t}}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){const s=dr(t),{modification:o,queryToken:l,unsubscribe:u}=this.state.subscribe(e,s,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return o!==null&&this.webSocketManager.sendMessage(o),{queryToken:l,unsubscribe:()=>{const d=u();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(e,t){const r=dr(t),s=Uo(e,r);return this.optimisticQueryResults.queryResult(s)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const r=dr(t),s=Uo(e,r);return this.optimisticQueryResults.queryLogs(s)}queryJournal(e,t){const r=dr(t),s=Uo(e,r);return this.state.queryJournal(s)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(e){const t=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(t,e),()=>{this.connectionStateSubscribers.delete(t)}}async mutation(e,t,r){const s=await this.mutationInternal(e,t,r);if(!s.success)throw s.errorData!==void 0?qg(s,new Bo(Qa("mutation",e,s))):new Error(Qa("mutation",e,s));return s.value}async mutationInternal(e,t,r,s){const{mutationPromise:o}=this.enqueueMutation(e,t,r,s);return o}enqueueMutation(e,t,r,s){const o=dr(t);this.tryReportLongDisconnect();const l=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const p=r.optimisticUpdate;if(p!==void 0){const m=w=>{p(w,o)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},v=this.optimisticQueryResults.applyOptimisticUpdate(m,l).map(w=>{const S=this.localQueryResultByToken(w);return{token:w,modification:{kind:"Updated",result:S===void 0?void 0:{success:!0,value:S,logLines:[]}}}});this.handleTransition({queries:v,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const u={type:"Mutation",requestId:l,udfPath:e,componentPath:s,args:[Kr(o)]},d=this.webSocketManager.sendMessage(u),h=this.requestManager.request(u,d);return{requestId:l,mutationPromise:h}}async action(e,t){const r=await this.actionInternal(e,t);if(!r.success)throw r.errorData!==void 0?qg(r,new Bo(Qa("action",e,r))):new Error(Qa("action",e,r));return r.value}async actionInternal(e,t,r){const s=dr(t),o=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const l={type:"Action",requestId:o,udfPath:e,componentPath:r,args:[Kr(s)]},u=this.webSocketManager.sendMessage(l);return this.requestManager.request(l,u)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=IM(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${jo}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var qM=Object.defineProperty,PM=(n,e,t)=>e in n?qM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qi=(n,e,t)=>PM(n,typeof e!="symbol"?e+"":e,t);const Rd=560;class VM{constructor(e,t){if(Qi(this,"address"),Qi(this,"auth"),Qi(this,"adminAuth"),Qi(this,"encodedTsPromise"),Qi(this,"debug"),Qi(this,"fetchOptions"),Qi(this,"logger"),Qi(this,"mutationQueue",[]),Qi(this,"isProcessingQueue",!1),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");(t??{}).skipConvexDeploymentUrlCheck!==!0&&xE(e),this.logger=(t==null?void 0:t.logger)===!1?z0({verbose:!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:B0({verbose:!1}),this.address=e,this.debug=!0,this.auth=void 0,this.adminAuth=void 0,t!=null&&t.auth&&this.setAuth(t.auth)}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const r=new TextEncoder().encode(JSON.stringify(t)),s=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${s}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const r=dr(t[0]),s=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:s})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${jo}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!r.ok)throw new Error(await r.text());const{ts:s}=await r.json();return s}async query(e,...t){const r=dr(t[0]);return await this.queryInner(e,r,{})}async queryInner(e,t,r){const s=Tn(e),o=[Kr(t)],l={"Content-Type":"application/json","Convex-Client":`npm-${jo}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const u=fetch,d=r.timestampPromise?await r.timestampPromise:void 0,h=JSON.stringify({path:s,format:"convex_encoded_json",args:o,...d?{ts:d}:{}}),p=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,m=await u(p,{...this.fetchOptions,body:h,method:"POST",headers:l});if(!m.ok&&m.status!==Rd)throw new Error(await m.text());const x=await m.json();if(this.debug)for(const v of x.logLines??[])Ks(this.logger,"info","query",s,v);switch(x.status){case"success":return ri(x.value);case"error":throw x.errorData!==void 0?Dd(x.errorData,new Bo(x.errorMessage)):new Error(x.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(x)}`)}}async mutationInner(e,t){const r=Tn(e),s=JSON.stringify({path:r,format:"convex_encoded_json",args:[Kr(t)]}),o={"Content-Type":"application/json","Convex-Client":`npm-${jo}`};this.adminAuth?o.Authorization=`Convex ${this.adminAuth}`:this.auth&&(o.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:s,method:"POST",headers:o});if(!u.ok&&u.status!==Rd)throw new Error(await u.text());const d=await u.json();if(this.debug)for(const h of d.logLines??[])Ks(this.logger,"info","mutation",r,h);switch(d.status){case"success":return ri(d.value);case"error":throw d.errorData!==void 0?Dd(d.errorData,new Bo(d.errorMessage)):new Error(d.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(d)}`)}}async processMutationQueue(){if(!this.isProcessingQueue){for(this.isProcessingQueue=!0;this.mutationQueue.length>0;){const{mutation:e,args:t,resolve:r,reject:s}=this.mutationQueue.shift();try{const o=await this.mutationInner(e,t);r(o)}catch(o){s(o)}}this.isProcessingQueue=!1}}enqueueMutation(e,t){return new Promise((r,s)=>{this.mutationQueue.push({mutation:e,args:t,resolve:r,reject:s}),this.processMutationQueue()})}async mutation(e,...t){const[r,s]=t,o=dr(r);return s!=null&&s.skipQueue?await this.mutationInner(e,o):await this.enqueueMutation(e,o)}async action(e,...t){const r=dr(t[0]),s=Tn(e),o=JSON.stringify({path:s,format:"convex_encoded_json",args:[Kr(r)]}),l={"Content-Type":"application/json","Convex-Client":`npm-${jo}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:o,method:"POST",headers:l});if(!d.ok&&d.status!==Rd)throw new Error(await d.text());const h=await d.json();if(this.debug)for(const p of h.logLines??[])Ks(this.logger,"info","action",s,p);switch(h.status){case"success":return ri(h.value);case"error":throw h.errorData!==void 0?Dd(h.errorData,new Bo(h.errorMessage)):new Error(h.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(h)}`)}}async function(e,t,...r){const s=dr(r[0]),o=typeof e=="string"?e:Tn(e),l=JSON.stringify({componentPath:t,path:o,format:"convex_encoded_json",args:Kr(s)}),u={"Content-Type":"application/json","Convex-Client":`npm-${jo}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const h=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!h.ok&&h.status!==Rd)throw new Error(await h.text());const p=await h.json();if(this.debug)for(const m of p.logLines??[])Ks(this.logger,"info","any",o,m);switch(p.status){case"success":return ri(p.value);case"error":throw p.errorData!==void 0?Dd(p.errorData,new Bo(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}}function Dd(n,e){return e.data=ri(n),e}function FM({getCurrentValue:n,subscribe:e}){const[t,r]=N.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let s=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(s=n(),r({getCurrentValue:n,subscribe:e,value:s})),N.useEffect(()=>{let o=!1;const l=()=>{o||r(d=>{if(d.getCurrentValue!==n||d.subscribe!==e)return d;const h=n();return d.value===h?d:{...d,value:h}})},u=e(l);return l(),()=>{o=!0,u()}},[n,e]),s}var GM=Object.defineProperty,KM=(n,e,t)=>e in n?GM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Is=(n,e,t)=>KM(n,typeof e!="symbol"?e+"":e,t);const WM=5e3;if(typeof oe>"u")throw new Error("Required dependency 'react' not found");function RE(n,e,t){function r(s){return ZM(s),e.mutation(n,s,{optimisticUpdate:t})}return r.withOptimisticUpdate=function(o){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${Tn(n)}`);return RE(n,e,o)},r}function QM(n,e){return function(t){return e.action(n,t)}}class YM{constructor(e,t){if(Is(this,"address"),Is(this,"cachedSync"),Is(this,"listeners"),Is(this,"options"),Is(this,"closed",!1),Is(this,"_logger"),Is(this,"adminAuth"),Is(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(t==null?void 0:t.logger)===!1?z0({verbose:(t==null?void 0:t.verbose)??!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:B0({verbose:(t==null?void 0:t.verbose)??!1}),this.options={...t,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new $M(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[r,s]=t,o=Tn(e);return{onUpdate:l=>{const{queryToken:u,unsubscribe:d}=this.sync.subscribe(o,r,s),h=this.listeners.get(u);return h!==void 0?h.add(l):this.listeners.set(u,new Set([l])),()=>{if(this.closed)return;const p=this.listeners.get(u);p.delete(l),p.size===0&&this.listeners.delete(u),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(o,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(o,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(o,r)}}}prewarmQuery(e){const t=e.extendSubscriptionFor??WM,s=this.watchQuery(e.query,e.args||{}).onUpdate(()=>{});setTimeout(s,t)}mutation(e,...t){const[r,s]=t,o=Tn(e);return this.sync.mutation(o,r,s)}action(e,...t){const r=Tn(e);return this.sync.action(r,...t)}query(e,...t){const r=this.watchQuery(e,...t),s=r.localQueryResult();return s!==void 0?Promise.resolve(s):new Promise((o,l)=>{const u=r.onUpdate(()=>{u();try{o(r.localQueryResult())}catch(d){l(d)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(e){return this.sync.subscribeToConnectionState(e)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){for(const t of e){const r=this.listeners.get(t);if(r)for(const s of r)s()}}}const mh=oe.createContext(void 0);function XM(){return N.useContext(mh)}const JM=({client:n,children:e})=>oe.createElement(mh.Provider,{value:n},e);function Rt(n,...e){const t=e[0]==="skip",r=e[0]==="skip"?{}:dr(e[0]),s=typeof n=="string"?I0(n):n,o=Tn(s),l=N.useMemo(()=>t?{}:{query:{query:s,args:r}},[JSON.stringify(Kr(r)),o,t]),d=rO(l).query;if(d instanceof Error)throw d;return d}function Bt(n){const e=typeof n=="string"?I0(n):n,t=N.useContext(mh);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return N.useMemo(()=>RE(e,t),[t,Tn(e)])}function yf(n){const e=N.useContext(mh),t=typeof n=="string"?I0(n):n;if(e===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return N.useMemo(()=>QM(t,e),[e,Tn(t)])}function ZM(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var eO=Object.defineProperty,tO=(n,e,t)=>e in n?eO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jm=(n,e,t)=>tO(n,typeof e!="symbol"?e+"":e,t);class nO{constructor(e){Jm(this,"createWatch"),Jm(this,"queries"),Jm(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:r,args:s}=e[t];if(Tn(r),this.queries[t]===void 0)this.addQuery(t,r,s);else{const o=this.queries[t];(Tn(r)!==Tn(o.query)||JSON.stringify(Kr(s))!==JSON.stringify(Kr(o.args)))&&(this.removeQuery(t),this.addQuery(t,r,s))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const r of Object.keys(e)){const{query:s,args:o}=e[r];Tn(s);const l=this.createWatch(s,o);let u;try{u=l.localQueryResult()}catch(d){if(d instanceof Error)u=d;else throw d}t[r]=u}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:r,args:s,watch:o}=this.queries[t],l=o.journal();this.removeQuery(t),this.addQuery(t,r,s,l)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,s){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const o=this.createWatch(t,r,s),l=o.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:o,unsubscribe:l}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function rO(n){const e=XM();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=N.useMemo(()=>(r,s,o)=>e.watchQuery(r,s,o?{journal:o}:{}),[e]);return iO(n,t)}function iO(n,e){const[t]=N.useState(()=>new nO(e));t.createWatch!==e&&t.setCreateWatch(e),N.useEffect(()=>()=>t.destroy(),[t]);const r=N.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:s=>(t.setQueries(n),t.subscribe(s))}),[t,n]);return FM(r)}const DE=N.createContext(void 0);function H0(){const n=N.useContext(DE);if(n===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return n}function sO({children:n,client:e,useAuth:t}){const{isLoading:r,isAuthenticated:s,fetchAccessToken:o}=t(),[l,u]=N.useState(null);return r&&l!==null&&u(null),!r&&!s&&l!==!1&&u(!1),oe.createElement(DE.Provider,{value:{isLoading:l===null,isAuthenticated:s&&(l??!1)}},oe.createElement(oO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}),oe.createElement(JM,{client:e},n),oe.createElement(aO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}))}function oO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return N.useEffect(()=>{let o=!0;if(n)return r.setAuth(e,l=>{o&&s(()=>l)}),()=>{o=!1,s(l=>l?!1:null)}},[n,e,t,r,s]),null}function aO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return N.useEffect(()=>{if(n)return()=>{r.clearAuth(),s(()=>null)}},[n,e,t,r,s]),null}function lO({children:n}){const{isLoading:e,isAuthenticated:t}=H0();return e||!t?null:oe.createElement(oe.Fragment,null,n)}function cO({children:n}){const{isLoading:e,isAuthenticated:t}=H0();return e||t?null:oe.createElement(oe.Fragment,null,n)}const jE=N.createContext(void 0),_E=N.createContext(void 0);function uO(){return N.useContext(_E)}const dO=N.createContext(null),Zm="__convexAuthOAuthVerifier",jd="__convexAuthJWT",_d="__convexAuthRefreshToken",$1="__convexAuthServerStateFetchTime";function fO({client:n,serverState:e,onChange:t,storage:r,storageNamespace:s,replaceURL:o,children:l}){const u=N.useRef((e==null?void 0:e._state.token)??null),[d,h]=N.useState(u.current===null),[p,m]=N.useState(u.current),x=n.verbose??!1,v=N.useCallback(ie=>{x&&console.debug(`${new Date().toISOString()} ${ie}`)},[x]),{storageSet:w,storageGet:S,storageRemove:C,storageKey:T}=hO(r,s),[j,R]=N.useState(!1),A=N.useCallback(async ie=>{const te=u.current!==null;let he;if(ie.tokens===null)u.current=null,ie.shouldStore&&(await C(jd),await C(_d)),he=null;else{const{token:B}=ie.tokens;if(u.current=B,ie.shouldStore){const{refreshToken:D}=ie.tokens;await w(jd,B),await w(_d,D)}he=B}te!==(he!==null)&&await(t==null?void 0:t()),m(he),h(!1)},[w,C]);N.useEffect(()=>{const ie=async te=>{if(j){te.preventDefault();const he="Are you sure you want to leave? Your changes may not be saved.";return te.returnValue=!0,he}};return q1("beforeunload",ie),()=>{P1("beforeunload",ie)}}),N.useEffect(()=>{const ie=te=>{(async()=>{if(te.storageArea===r&&te.key===T(jd)){const he=te.newValue;v(`synced access token, is null: ${he===null}`),await A({shouldStore:!1,tokens:he===null?null:{token:he}})}})()};return q1("storage",ie),()=>P1("storage",ie)},[A]);const L=N.useCallback(async ie=>{const{tokens:te}=await n.unauthenticatedCall("auth:signIn","code"in ie?{params:{code:ie.code},verifier:ie.verifier}:ie);return v(`retrieved tokens, is null: ${te===null}`),await A({shouldStore:!0,tokens:te??null}),te!==null},[n,A]),I=N.useCallback(async(ie,te)=>{const he=te instanceof FormData?Array.from(te.entries()).reduce((U,[se,ue])=>(U[se]=ue,U),{}):te??{},B=await S(Zm)??void 0;await C(Zm);const D=await n.authenticatedCall("auth:signIn",{provider:ie,params:he,verifier:B});if(D.redirect!==void 0){const U=new URL(D.redirect);return await w(Zm,D.verifier),window.location!==void 0&&(window.location.href=U.toString()),{signingIn:!1,redirect:U}}else if(D.tokens!==void 0){const{tokens:U}=D;return v(`signed in and got tokens, is null: ${U===null}`),await A({shouldStore:!0,tokens:U}),{signingIn:D.tokens!==null}}return{signingIn:!1}},[n,A,S]),H=N.useCallback(async()=>{try{await n.authenticatedCall("auth:signOut")}catch{}v("signed out, erasing tokens"),await A({shouldStore:!0,tokens:null})},[A,n]),W=N.useCallback(async({forceRefreshToken:ie})=>{if(ie){const te=u.current;return await mO(_d,async()=>{const he=u.current;if(he!==te)return v(`returning synced token, is null: ${he===null}`),he;const B=await S(_d)??null;return B!==null?(R(!0),await L({refreshToken:B}).finally(()=>{R(!1)}),v(`returning retrieved token, is null: ${he===null}`),u.current):(R(!1),v("returning null, there is no refresh token"),null)})}return u.current},[L,H,S]),re=N.useRef(!1);N.useEffect(()=>{if(r===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ie=async()=>{const he=await S(jd)??null;v(`retrieved token from storage, is null: ${he===null}`),await A({shouldStore:!1,tokens:he===null?null:{token:he}})};if(e!==void 0){const he=S($1),B=D=>{if(!D||e._timeFetched>+D){const{token:U,refreshToken:se}=e._state,ue=U===null||se===null?null:{token:U,refreshToken:se};w($1,e._timeFetched.toString()),A({tokens:ue,shouldStore:!0})}else ie()};he instanceof Promise?he.then(B):B(he);return}const te=typeof(window==null?void 0:window.location)<"u"?new URLSearchParams(window.location.search).get("code"):null;if(re.current||te){if(te&&!re.current){re.current=!0;const he=new URL(window.location.href);he.searchParams.delete("code"),(async()=>(await o(he.pathname+he.search+he.hash),await I(void 0,{code:te}),re.current=!1))()}}else ie()},[n,S]);const me=N.useMemo(()=>({signIn:I,signOut:H}),[I,H]),xe=p!==null,q=N.useMemo(()=>({isLoading:d,isAuthenticated:xe,fetchAccessToken:W}),[W,d,xe]);return y.jsx(_E.Provider,{value:q,children:y.jsx(jE.Provider,{value:me,children:y.jsx(dO.Provider,{value:p,children:l})})})}function hO(n,e){const t=pO(),r=N.useMemo(()=>n??t(),[n]),s=e.replace(/[^a-zA-Z0-9]/g,""),o=N.useCallback(h=>`${h}_${s}`,[e]),l=N.useCallback((h,p)=>r.setItem(o(h),p),[r,o]),u=N.useCallback(h=>r.getItem(o(h)),[r,o]),d=N.useCallback(h=>r.removeItem(o(h)),[r,o]);return{storageSet:l,storageGet:u,storageRemove:d,storageKey:o}}function pO(){const[n,e]=N.useState({});return()=>({getItem:t=>n[t],setItem:(t,r)=>{e(s=>({...s,[t]:r}))},removeItem:t=>{e(r=>{const{[t]:s,...o}=r;return o})}})}async function mO(n,e){var r;const t=(r=window==null?void 0:window.navigator)==null?void 0:r.locks;return t!==void 0?await t.request(n,e):await gO(n,e)}function Ld(n){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[n];return e===void 0&&(globalThis.__convexAuthMutexes[n]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[n],e}function eg(n,e){globalThis.__convexAuthMutexes[n]=e}async function LE(n,e){const t=Ld(n);t.currentlyRunning===null?eg(n,{currentlyRunning:e().finally(()=>{const r=Ld(n).waiting.shift();Ld(n).currentlyRunning=null,eg(n,{...Ld(n),currentlyRunning:r===void 0?null:LE(n,r)})}),waiting:[]}):eg(n,{...t,waiting:[...t.waiting,e]})}async function gO(n,e){return new Promise((r,s)=>{LE(n,()=>e().then(l=>r(l)).catch(l=>s(l)))})}function q1(n,e,t){var r;(r=window.addEventListener)==null||r.call(window,n,e,t)}function P1(n,e,t){var r;(r=window.removeEventListener)==null||r.call(window,n,e,t)}function BE(){return N.useContext(jE)}function yO(n){const{client:e,storage:t,storageNamespace:r,replaceURL:s,children:o}=n,l=N.useMemo(()=>{var u;return{authenticatedCall(d,h){return e.action(d,h)},unauthenticatedCall(d,h){return new VM(e.address).action(d,h)},verbose:(u=e.options)==null?void 0:u.verbose}},[e]);return y.jsx(fO,{client:l,storage:t??(typeof window>"u"||window==null?void 0:window.localStorage),storageNamespace:r??e.address,replaceURL:s??(u=>{window.history.replaceState({},"",u)}),children:y.jsx(sO,{client:e,useAuth:uO,children:o})})}/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var V1="popstate";function bO(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Pg("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:$c(s)}return vO(e,t,null,n)}function Yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xO(){return Math.random().toString(36).substring(2,10)}function F1(n,e){return{usr:n.state,key:n.key,idx:e}}function Pg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:t,key:e&&e.key||r||xO()}}function $c({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function dl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function vO(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let C=p(),T=C==null?null:C-h;h=C,d&&d({action:u,location:S.location,delta:T})}function x(C,T){u="PUSH";let j=Pg(S.location,C,T);h=p()+1;let R=F1(j,h),A=S.createHref(j);try{l.pushState(R,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(A)}o&&d&&d({action:u,location:S.location,delta:1})}function v(C,T){u="REPLACE";let j=Pg(S.location,C,T);h=p();let R=F1(j,h),A=S.createHref(j);l.replaceState(R,"",A),o&&d&&d({action:u,location:S.location,delta:0})}function w(C){return wO(C)}let S={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(V1,m),d=C,()=>{s.removeEventListener(V1,m),d=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let T=w(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:v,go(C){return l.go(C)}};return S}function wO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Yt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:$c(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function zE(n,e,t="/"){return SO(n,e,t,!1)}function SO(n,e,t,r){let s=typeof e=="string"?dl(e):e,o=ls(s.pathname||"/",t);if(o==null)return null;let l=IE(n);EO(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=_O(o);u=DO(l[d],h,r)}return u}function IE(n,e=[],t=[],r="",s=!1){let o=(l,u,d=s,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Yt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=is([r,p.relativePath]),x=t.concat(p);l.children&&l.children.length>0&&(Yt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),IE(l.children,e,x,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:OO(m,l.index),routesMeta:x})};return n.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let h of HE(l.path))o(l,u,!0,h)}),e}function HE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=HE(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function EO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CO=/^:[\w-]+$/,NO=3,TO=2,kO=1,AO=10,MO=-2,G1=n=>n==="*";function OO(n,e){let t=n.split("/"),r=t.length;return t.some(G1)&&(r+=MO),e&&(r+=TO),t.filter(s=>!G1(s)).reduce((s,o)=>s+(CO.test(o)?NO:o===""?kO:AO),r)}function RO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function DO(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=bf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),x=d.route;if(!m&&h&&t&&!r[r.length-1].route.index&&(m=bf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:is([o,m.pathname]),pathnameBase:HO(is([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=is([o,m.pathnameBase]))}return l}function bf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=jO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},x)=>{if(p==="*"){let w=u[x]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[x];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function jO(n,e=!1,t=!0){oi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _O(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ls(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var LO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BO=n=>LO.test(n);function zO(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?dl(n):n,o;if(t)if(BO(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),oi(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=K1(t.substring(1),"/"):o=K1(t,e)}else o=e;return{pathname:o,search:UO(r),hash:$O(s)}}function K1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function tg(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function UE(n){let e=IO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function $E(n,e,t,r=!1){let s;typeof n=="string"?s=dl(n):(s={...n},Yt(!s.pathname||!s.pathname.includes("?"),tg("?","pathname","search",s)),Yt(!s.pathname||!s.pathname.includes("#"),tg("#","pathname","hash",s)),Yt(!s.search||!s.search.includes("#"),tg("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;s.pathname=x.join("/")}u=m>=0?e[m]:"/"}let d=zO(s,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var is=n=>n.join("/").replace(/\/\/+/g,"/"),HO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$O=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qE=["POST","PUT","PATCH","DELETE"];new Set(qE);var PO=["GET",...qE];new Set(PO);var fl=N.createContext(null);fl.displayName="DataRouter";var gh=N.createContext(null);gh.displayName="DataRouterState";N.createContext(!1);var PE=N.createContext({isTransitioning:!1});PE.displayName="ViewTransition";var VO=N.createContext(new Map);VO.displayName="Fetchers";var FO=N.createContext(null);FO.displayName="Await";var ki=N.createContext(null);ki.displayName="Navigation";var ou=N.createContext(null);ou.displayName="Location";var Ai=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var U0=N.createContext(null);U0.displayName="RouteError";function GO(n,{relative:e}={}){Yt(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(ki),{hash:s,pathname:o,search:l}=lu(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:is([t,o])),r.createHref({pathname:u,search:l,hash:s})}function au(){return N.useContext(ou)!=null}function na(){return Yt(au(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(ou).location}var VE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FE(n){N.useContext(ki).static||N.useLayoutEffect(n)}function KO(){let{isDataRoute:n}=N.useContext(Ai);return n?aR():WO()}function WO(){Yt(au(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(fl),{basename:e,navigator:t}=N.useContext(ki),{matches:r}=N.useContext(Ai),{pathname:s}=na(),o=JSON.stringify(UE(r)),l=N.useRef(!1);return FE(()=>{l.current=!0}),N.useCallback((d,h={})=>{if(oi(l.current,VE),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=$E(d,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:is([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,o,s,n])}N.createContext(null);function QO(){let{matches:n}=N.useContext(Ai),e=n[n.length-1];return e?e.params:{}}function lu(n,{relative:e}={}){let{matches:t}=N.useContext(Ai),{pathname:r}=na(),s=JSON.stringify(UE(t));return N.useMemo(()=>$E(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function YO(n,e){return GE(n,e)}function GE(n,e,t,r,s){var j;Yt(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(ki),{matches:l}=N.useContext(Ai),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let R=m&&m.path||"";KE(h,!m||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=na(),v;if(e){let R=typeof e=="string"?dl(e):e;Yt(p==="/"||((j=R.pathname)==null?void 0:j.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=x;let w=v.pathname||"/",S=w;if(p!=="/"){let R=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=zE(n,{pathname:S});oi(m||C!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),oi(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=tR(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:is([p,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:is([p,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),l,t,r,s);return e&&T?N.createElement(ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function XO(){let n=oR(),e=qO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var JO=N.createElement(XO,null),ZO=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?N.createElement(Ai.Provider,{value:this.props.routeContext},N.createElement(U0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eR({routeContext:n,match:e,children:t}){let r=N.useContext(fl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ai.Provider,{value:n},t)}function tR(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Yt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:x,errors:v}=t,w=m.route.loader&&!x.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=t&&r?(p,m)=>{var x,v;r(p,{location:t.location,params:((v=(x=t.matches)==null?void 0:x[0])==null?void 0:v.params)??{},errorInfo:m})}:void 0;return o.reduceRight((p,m,x)=>{let v,w=!1,S=null,C=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||JO,u&&(d<0&&x===0?(KE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):d===x&&(w=!0,C=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,x+1)),j=()=>{let R;return v?R=S:w?R=C:m.route.Component?R=N.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,N.createElement(eR,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?N.createElement(ZO,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:j(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):j()},null)}function $0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nR(n){let e=N.useContext(fl);return Yt(e,$0(n)),e}function rR(n){let e=N.useContext(gh);return Yt(e,$0(n)),e}function iR(n){let e=N.useContext(Ai);return Yt(e,$0(n)),e}function q0(n){let e=iR(n),t=e.matches[e.matches.length-1];return Yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function sR(){return q0("useRouteId")}function oR(){var r;let n=N.useContext(U0),e=rR("useRouteError"),t=q0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function aR(){let{router:n}=nR("useNavigate"),e=q0("useNavigate"),t=N.useRef(!1);return FE(()=>{t.current=!0}),N.useCallback(async(s,o={})=>{oi(t.current,VE),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var W1={};function KE(n,e,t){!e&&!W1[n]&&(W1[n]=!0,oi(!1,t))}N.memo(lR);function lR({routes:n,future:e,state:t,unstable_onError:r}){return GE(n,void 0,t,r,e)}function Vg(n){Yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Yt(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=dl(t));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=t,v=N.useMemo(()=>{let w=ls(d,l);return w==null?null:{location:{pathname:w,search:h,hash:p,state:m,key:x},navigationType:r}},[l,d,h,p,m,x,r]);return oi(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:N.createElement(ki.Provider,{value:u},N.createElement(ou.Provider,{children:e,value:v}))}function uR({children:n,location:e}){return YO(Fg(n),e)}function Fg(n,e=[]){let t=[];return N.Children.forEach(n,(r,s)=>{if(!N.isValidElement(r))return;let o=[...e,s];if(r.type===N.Fragment){t.push.apply(t,Fg(r.props.children,o));return}Yt(r.type===Vg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Fg(r.props.children,o)),t.push(l)}),t}var sf="get",of="application/x-www-form-urlencoded";function yh(n){return n!=null&&typeof n.tagName=="string"}function dR(n){return yh(n)&&n.tagName.toLowerCase()==="button"}function fR(n){return yh(n)&&n.tagName.toLowerCase()==="form"}function hR(n){return yh(n)&&n.tagName.toLowerCase()==="input"}function pR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mR(n,e){return n.button===0&&(!e||e==="_self")&&!pR(n)}var Bd=null;function gR(){if(Bd===null)try{new FormData(document.createElement("form"),0),Bd=!1}catch{Bd=!0}return Bd}var yR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ng(n){return n!=null&&!yR.has(n)?(oi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):n}function bR(n,e){let t,r,s,o,l;if(fR(n)){let u=n.getAttribute("action");r=u?ls(u,e):null,t=n.getAttribute("method")||sf,s=ng(n.getAttribute("enctype"))||of,o=new FormData(n)}else if(dR(n)||hR(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?ls(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||sf,s=ng(n.getAttribute("formenctype"))||ng(u.getAttribute("enctype"))||of,o=new FormData(u,n),!gR()){let{name:h,type:p,value:m}=n;if(p==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,m)}}else{if(yh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sf,r=null,s=of,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function P0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ls(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function vR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function SR(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await vR(o,t);return l.links?l.links():[]}return[]}));return TR(r.flat(1).filter(wR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Q1(n,e,t,r,s,o){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var p;return t[h].pathname!==d.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var m;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function ER(n,e,{includeHydrateFallback:t}={}){return CR(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function CR(n){return[...new Set(n)]}function NR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function TR(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(NR(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function WE(){let n=N.useContext(fl);return P0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kR(){let n=N.useContext(gh);return P0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var V0=N.createContext(void 0);V0.displayName="FrameworkContext";function QE(){let n=N.useContext(V0);return P0(n,"You must render this element inside a <HydratedRouter> element"),n}function AR(n,e){let t=N.useContext(V0),[r,s]=N.useState(!1),[o,l]=N.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,x=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let S=T=>{T.forEach(j=>{l(j.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return x.current&&C.observe(x.current),()=>{C.disconnect()}}},[n]),N.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let v=()=>{s(!0)},w=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,x,{}]:[o,x,{onFocus:fc(u,v),onBlur:fc(d,w),onMouseEnter:fc(h,v),onMouseLeave:fc(p,w),onTouchStart:fc(m,v)}]:[!1,x,{}]}function fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function MR({page:n,...e}){let{router:t}=WE(),r=N.useMemo(()=>zE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(RR,{page:n,matches:r,...e}):null}function OR(n){let{manifest:e,routeModules:t}=QE(),[r,s]=N.useState([]);return N.useEffect(()=>{let o=!1;return SR(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function RR({page:n,matches:e,...t}){let r=na(),{manifest:s,routeModules:o}=QE(),{basename:l}=WE(),{loaderData:u,matches:d}=kR(),h=N.useMemo(()=>Q1(n,e,d,s,r,"data"),[n,e,d,s,r]),p=N.useMemo(()=>Q1(n,e,d,s,r,"assets"),[n,e,d,s,r]),m=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(T=>{var R;let j=s.routes[T.route.id];!j||!j.hasLoader||(!h.some(A=>A.route.id===T.route.id)&&T.route.id in u&&((R=o[T.route.id])!=null&&R.shouldRevalidate)||j.hasClientLoader?S=!0:w.add(T.route.id))}),w.size===0)return[];let C=xR(n,l,"data");return S&&w.size>0&&C.searchParams.set("_routes",e.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[l,u,r,s,h,e,n,o]),x=N.useMemo(()=>ER(p,s),[p,s]),v=OR(p);return N.createElement(N.Fragment,null,m.map(w=>N.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>N.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:S})=>N.createElement("link",{key:w,nonce:t.nonce,...S})))}function DR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YE&&(window.__reactRouterVersion="7.9.6")}catch{}function jR({basename:n,children:e,window:t}){let r=N.useRef();r.current==null&&(r.current=bO({window:t,v5Compat:!0}));let s=r.current,[o,l]=N.useState({action:s.action,location:s.location}),u=N.useCallback(d=>{N.startTransition(()=>l(d))},[l]);return N.useLayoutEffect(()=>s.listen(u),[s,u]),N.createElement(cR,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var XE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JE=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,...x},v){let{basename:w}=N.useContext(ki),S=typeof h=="string"&&XE.test(h),C,T=!1;if(typeof h=="string"&&S&&(C=h,YE))try{let re=new URL(window.location.href),me=h.startsWith("//")?new URL(re.protocol+h):new URL(h),xe=ls(me.pathname,w);me.origin===re.origin&&xe!=null?h=xe+me.search+me.hash:T=!0}catch{oi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=GO(h,{relative:s}),[R,A,L]=AR(r,x),I=zR(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:m});function H(re){e&&e(re),re.defaultPrevented||I(re)}let W=N.createElement("a",{...x,...L,href:C||j,onClick:T||o?e:H,ref:DR(v,A),target:d,"data-discover":!S&&t==="render"?"true":void 0});return R&&!S?N.createElement(N.Fragment,null,W,N.createElement(MR,{page:j})):W});JE.displayName="Link";var _R=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...h},p){let m=lu(l,{relative:h.relative}),x=na(),v=N.useContext(gh),{navigator:w,basename:S}=N.useContext(ki),C=v!=null&&qR(m)&&u===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,j=x.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(j=j.toLowerCase(),R=R?R.toLowerCase():null,T=T.toLowerCase()),R&&S&&(R=ls(R,S)||R);const A=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=j===T||!s&&j.startsWith(T)&&j.charAt(A)==="/",I=R!=null&&(R===T||!s&&R.startsWith(T)&&R.charAt(T.length)==="/"),H={isActive:L,isPending:I,isTransitioning:C},W=L?e:void 0,re;typeof r=="function"?re=r(H):re=[r,L?"active":null,I?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let me=typeof o=="function"?o(H):o;return N.createElement(JE,{...h,"aria-current":W,className:re,ref:p,style:me,to:l,viewTransition:u},typeof d=="function"?d(H):d)});_R.displayName="NavLink";var LR=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=sf,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...x},v)=>{let w=UR(),S=$R(u,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&XE.test(u),j=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let A=R.nativeEvent.submitter,L=(A==null?void 0:A.getAttribute("formmethod"))||l;w(A||R.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:s,state:o,relative:h,preventScrollReset:p,viewTransition:m})};return N.createElement("form",{ref:v,method:C,action:S,onSubmit:r?d:j,...x,"data-discover":!T&&n==="render"?"true":void 0})});LR.displayName="Form";function BR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZE(n){let e=N.useContext(fl);return Yt(e,BR(n)),e}function zR(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=KO(),d=na(),h=lu(n,{relative:o});return N.useCallback(p=>{if(mR(p,e)){p.preventDefault();let m=t!==void 0?t:$c(d)===$c(h);u(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,h,t,r,e,n,s,o,l])}var IR=0,HR=()=>`__${String(++IR)}__`;function UR(){let{router:n}=ZE("useSubmit"),{basename:e}=N.useContext(ki),t=sR();return N.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=bR(r,e);if(s.navigate===!1){let p=s.fetcherKey||HR();await n.fetch(p,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function $R(n,{relative:e}={}){let{basename:t}=N.useContext(ki),r=N.useContext(Ai);Yt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...lu(n||".",{relative:e})},l=na();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:is([t,o.pathname])),$c(o)}function qR(n,{relative:e}={}){let t=N.useContext(PE);Yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ZE("useViewTransitionState"),s=lu(n,{relative:e});if(!t.isTransitioning)return!1;let o=ls(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ls(t.nextLocation.pathname,r)||t.nextLocation.pathname;return bf(s.pathname,l)!=null||bf(s.pathname,o)!=null}var e2=bE();const t2=j0(e2);function n2(n,e){const t={get(r,s){if(typeof s=="string"){const o=[...e,s];return n2(n,o)}else if(s===kE){if(e.length<1){const o=[n,...e].join(".");throw new Error(`API path is expected to be of the form \`${n}.childComponent.functionName\`. Found: \`${o}\``)}return"_reference/childComponent/"+e.join("/")}else return}};return new Proxy({},t)}const PR=()=>n2("components",[]),Le=aM;PR();function VR(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const FR=n=>{switch(n){case"success":return WR;case"info":return YR;case"warning":return QR;case"error":return XR;default:return null}},GR=Array(12).fill(0),KR=({visible:n,className:e})=>oe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},oe.createElement("div",{className:"sonner-spinner"},GR.map((t,r)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),WR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),QR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),YR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),XR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),JR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ZR=()=>{const[n,e]=oe.useState(document.hidden);return oe.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Gg=1;class e5{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Gg++,l=this.toasts.find(d=>d.id===o),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...e,id:o,title:r}),{...d,...e,id:o,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const u=s.then(async h=>{if(l=["resolve",h],oe.isValidElement(h))o=!1,this.create({id:r,type:"default",message:h});else if(n5(h)&&!h.ok){o=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,x=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:x,...w})}else if(h instanceof Error){o=!1;const m=typeof t.error=="function"?await t.error(h):t.error,x=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:x,...w})}else if(t.success!==void 0){o=!1;const m=typeof t.success=="function"?await t.success(h):t.success,x=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:x,...w})}}).catch(async h=>{if(l=["reject",h],t.error!==void 0){o=!1;const p=typeof t.error=="function"?await t.error(h):t.error,m=typeof t.description=="function"?await t.description(h):t.description,v=typeof p=="object"&&!oe.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...v})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((h,p)=>u.then(()=>l[0]==="reject"?p(l[1]):h(l[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Gg++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ur=new e5,t5=(n,e)=>{const t=(e==null?void 0:e.id)||Gg++;return ur.addToast({title:n,...e,id:t}),t},n5=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",r5=t5,i5=()=>ur.toasts,s5=()=>ur.getActiveToasts(),Ge=Object.assign(r5,{success:ur.success,info:ur.info,warning:ur.warning,error:ur.error,custom:ur.custom,message:ur.message,promise:ur.promise,dismiss:ur.dismiss,loading:ur.loading},{getHistory:i5,getToasts:s5});VR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function zd(n){return n.label!==void 0}const o5=3,a5="24px",l5="16px",Y1=4e3,c5=356,u5=14,d5=45,f5=200;function pi(...n){return n.filter(Boolean).join(" ")}function h5(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const p5=n=>{var e,t,r,s,o,l,u,d,h;const{invert:p,toast:m,unstyled:x,interacting:v,setHeights:w,visibleToasts:S,heights:C,index:T,toasts:j,expanded:R,removeToast:A,defaultRichColors:L,closeButton:I,style:H,cancelButtonStyle:W,actionButtonStyle:re,className:me="",descriptionClassName:xe="",duration:q,position:ie,gap:te,expandByDefault:he,classNames:B,icons:D,closeButtonAriaLabel:U="Close toast"}=n,[se,ue]=oe.useState(null),[O,V]=oe.useState(null),[Y,ce]=oe.useState(!1),[fe,we]=oe.useState(!1),[Ue,ae]=oe.useState(!1),[$e,pt]=oe.useState(!1),[It,rn]=oe.useState(!1),[qn,jt]=oe.useState(0),[Sn,At]=oe.useState(0),sn=oe.useRef(m.duration||q||Y1),En=oe.useRef(null),K=oe.useRef(null),Se=T===0,We=T+1<=S,_e=m.type,st=m.dismissible!==!1,Ze=m.className||"",vn=m.descriptionClassName||"",_t=oe.useMemo(()=>C.findIndex(M=>M.toastId===m.id)||0,[C,m.id]),ye=oe.useMemo(()=>{var M;return(M=m.closeButton)!=null?M:I},[m.closeButton,I]),Ne=oe.useMemo(()=>m.duration||q||Y1,[m.duration,q]),Ke=oe.useRef(0),Ye=oe.useRef(0),Ht=oe.useRef(0),Xt=oe.useRef(null),[gr,X]=ie.split("-"),Ce=oe.useMemo(()=>C.reduce((M,Q,de)=>de>=_t?M:M+Q.height,0),[C,_t]),ke=ZR(),dt=m.invert||p,Xe=_e==="loading";Ye.current=oe.useMemo(()=>_t*te+Ce,[_t,Ce]),oe.useEffect(()=>{sn.current=Ne},[Ne]),oe.useEffect(()=>{ce(!0)},[]),oe.useEffect(()=>{const M=K.current;if(M){const Q=M.getBoundingClientRect().height;return At(Q),w(de=>[{toastId:m.id,height:Q,position:m.position},...de]),()=>w(de=>de.filter(Oe=>Oe.toastId!==m.id))}},[w,m.id]),oe.useLayoutEffect(()=>{if(!Y)return;const M=K.current,Q=M.style.height;M.style.height="auto";const de=M.getBoundingClientRect().height;M.style.height=Q,At(de),w(Oe=>Oe.find(Ve=>Ve.toastId===m.id)?Oe.map(Ve=>Ve.toastId===m.id?{...Ve,height:de}:Ve):[{toastId:m.id,height:de,position:m.position},...Oe])},[Y,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const vt=oe.useCallback(()=>{we(!0),jt(Ye.current),w(M=>M.filter(Q=>Q.toastId!==m.id)),setTimeout(()=>{A(m)},f5)},[m,A,w,Ye]);oe.useEffect(()=>{if(m.promise&&_e==="loading"||m.duration===1/0||m.type==="loading")return;let M;return R||v||ke?(()=>{if(Ht.current<Ke.current){const Oe=new Date().getTime()-Ke.current;sn.current=sn.current-Oe}Ht.current=new Date().getTime()})():(()=>{sn.current!==1/0&&(Ke.current=new Date().getTime(),M=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),vt()},sn.current))})(),()=>clearTimeout(M)},[R,v,m,_e,ke,vt]),oe.useEffect(()=>{m.delete&&(vt(),m.onDismiss==null||m.onDismiss.call(m,m))},[vt,m.delete]);function Jt(){var M;if(D!=null&&D.loading){var Q;return oe.createElement("div",{className:pi(B==null?void 0:B.loader,m==null||(Q=m.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":_e==="loading"},D.loading)}return oe.createElement(KR,{className:pi(B==null?void 0:B.loader,m==null||(M=m.classNames)==null?void 0:M.loader),visible:_e==="loading"})}const Yn=m.icon||(D==null?void 0:D[_e])||FR(_e);var yr,Ut;return oe.createElement("li",{tabIndex:0,ref:K,className:pi(me,Ze,B==null?void 0:B.toast,m==null||(e=m.classNames)==null?void 0:e.toast,B==null?void 0:B.default,B==null?void 0:B[_e],m==null||(t=m.classNames)==null?void 0:t[_e]),"data-sonner-toast":"","data-rich-colors":(yr=m.richColors)!=null?yr:L,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":Y,"data-promise":!!m.promise,"data-swiped":It,"data-removed":fe,"data-visible":We,"data-y-position":gr,"data-x-position":X,"data-index":T,"data-front":Se,"data-swiping":Ue,"data-dismissible":st,"data-type":_e,"data-invert":dt,"data-swipe-out":$e,"data-swipe-direction":O,"data-expanded":!!(R||he&&Y),"data-testid":m.testId,style:{"--index":T,"--toasts-before":T,"--z-index":j.length-T,"--offset":`${fe?qn:Ye.current}px`,"--initial-height":he?"auto":`${Sn}px`,...H,...m.style},onDragEnd:()=>{ae(!1),ue(null),Xt.current=null},onPointerDown:M=>{M.button!==2&&(Xe||!st||(En.current=new Date,jt(Ye.current),M.target.setPointerCapture(M.pointerId),M.target.tagName!=="BUTTON"&&(ae(!0),Xt.current={x:M.clientX,y:M.clientY})))},onPointerUp:()=>{var M,Q,de;if($e||!st)return;Xt.current=null;const Oe=Number(((M=K.current)==null?void 0:M.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ht=Number(((Q=K.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ve=new Date().getTime()-((de=En.current)==null?void 0:de.getTime()),Ee=se==="x"?Oe:ht,Te=Math.abs(Ee)/Ve;if(Math.abs(Ee)>=d5||Te>.11){jt(Ye.current),m.onDismiss==null||m.onDismiss.call(m,m),V(se==="x"?Oe>0?"right":"left":ht>0?"down":"up"),vt(),pt(!0);return}else{var Re,mt;(Re=K.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(mt=K.current)==null||mt.style.setProperty("--swipe-amount-y","0px")}rn(!1),ae(!1),ue(null)},onPointerMove:M=>{var Q,de,Oe;if(!Xt.current||!st||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;const Ve=M.clientY-Xt.current.y,Ee=M.clientX-Xt.current.x;var Te;const Re=(Te=n.swipeDirections)!=null?Te:h5(ie);!se&&(Math.abs(Ee)>1||Math.abs(Ve)>1)&&ue(Math.abs(Ee)>Math.abs(Ve)?"x":"y");let mt={x:0,y:0};const Mt=Dn=>1/(1.5+Math.abs(Dn)/20);if(se==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&Ve<0||Re.includes("bottom")&&Ve>0)mt.y=Ve;else{const Dn=Ve*Mt(Ve);mt.y=Math.abs(Dn)<Math.abs(Ve)?Dn:Ve}}else if(se==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&Ee<0||Re.includes("right")&&Ee>0)mt.x=Ee;else{const Dn=Ee*Mt(Ee);mt.x=Math.abs(Dn)<Math.abs(Ee)?Dn:Ee}(Math.abs(mt.x)>0||Math.abs(mt.y)>0)&&rn(!0),(de=K.current)==null||de.style.setProperty("--swipe-amount-x",`${mt.x}px`),(Oe=K.current)==null||Oe.style.setProperty("--swipe-amount-y",`${mt.y}px`)}},ye&&!m.jsx&&_e!=="loading"?oe.createElement("button",{"aria-label":U,"data-disabled":Xe,"data-close-button":!0,onClick:Xe||!st?()=>{}:()=>{vt(),m.onDismiss==null||m.onDismiss.call(m,m)},className:pi(B==null?void 0:B.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(Ut=D==null?void 0:D.close)!=null?Ut:JR):null,(_e||m.icon||m.promise)&&m.icon!==null&&((D==null?void 0:D[_e])!==null||m.icon)?oe.createElement("div",{"data-icon":"",className:pi(B==null?void 0:B.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Jt():null,m.type!=="loading"?Yn:null):null,oe.createElement("div",{"data-content":"",className:pi(B==null?void 0:B.content,m==null||(o=m.classNames)==null?void 0:o.content)},oe.createElement("div",{"data-title":"",className:pi(B==null?void 0:B.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?oe.createElement("div",{"data-description":"",className:pi(xe,vn,B==null?void 0:B.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),oe.isValidElement(m.cancel)?m.cancel:m.cancel&&zd(m.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||W,onClick:M=>{zd(m.cancel)&&st&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,M),vt())},className:pi(B==null?void 0:B.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,oe.isValidElement(m.action)?m.action:m.action&&zd(m.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||re,onClick:M=>{zd(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,M),!M.defaultPrevented&&vt())},className:pi(B==null?void 0:B.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function X1(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function m5(n,e){const t={};return[n,e].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",u=o?l5:a5;function d(h){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?t[`${l}-${h}`]=u:t[`${l}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(u)}),t}const g5=oe.forwardRef(function(e,t){const{id:r,invert:s,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:h,offset:p,mobileOffset:m,theme:x="light",richColors:v,duration:w,style:S,visibleToasts:C=o5,toastOptions:T,dir:j=X1(),gap:R=u5,icons:A,containerAriaLabel:L="Notifications"}=e,[I,H]=oe.useState([]),W=oe.useMemo(()=>r?I.filter(Y=>Y.toasterId===r):I.filter(Y=>!Y.toasterId),[I,r]),re=oe.useMemo(()=>Array.from(new Set([o].concat(W.filter(Y=>Y.position).map(Y=>Y.position)))),[W,o]),[me,xe]=oe.useState([]),[q,ie]=oe.useState(!1),[te,he]=oe.useState(!1),[B,D]=oe.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=oe.useRef(null),se=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),ue=oe.useRef(null),O=oe.useRef(!1),V=oe.useCallback(Y=>{H(ce=>{var fe;return(fe=ce.find(we=>we.id===Y.id))!=null&&fe.delete||ur.dismiss(Y.id),ce.filter(({id:we})=>we!==Y.id)})},[]);return oe.useEffect(()=>ur.subscribe(Y=>{if(Y.dismiss){requestAnimationFrame(()=>{H(ce=>ce.map(fe=>fe.id===Y.id?{...fe,delete:!0}:fe))});return}setTimeout(()=>{t2.flushSync(()=>{H(ce=>{const fe=ce.findIndex(we=>we.id===Y.id);return fe!==-1?[...ce.slice(0,fe),{...ce[fe],...Y},...ce.slice(fe+1)]:[Y,...ce]})})})}),[I]),oe.useEffect(()=>{if(x!=="system"){D(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;const Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:ce})=>{D(ce?"dark":"light")})}catch{Y.addListener(({matches:fe})=>{try{D(fe?"dark":"light")}catch(we){console.error(we)}})}},[x]),oe.useEffect(()=>{I.length<=1&&ie(!1)},[I]),oe.useEffect(()=>{const Y=ce=>{var fe;if(l.every(ae=>ce[ae]||ce.code===ae)){var Ue;ie(!0),(Ue=U.current)==null||Ue.focus()}ce.code==="Escape"&&(document.activeElement===U.current||(fe=U.current)!=null&&fe.contains(document.activeElement))&&ie(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[l]),oe.useEffect(()=>{if(U.current)return()=>{ue.current&&(ue.current.focus({preventScroll:!0}),ue.current=null,O.current=!1)}},[U.current]),oe.createElement("section",{ref:t,"aria-label":`${L} ${se}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},re.map((Y,ce)=>{var fe;const[we,Ue]=Y.split("-");return W.length?oe.createElement("ol",{key:Y,dir:j==="auto"?X1():j,tabIndex:-1,ref:U,className:h,"data-sonner-toaster":!0,"data-sonner-theme":B,"data-y-position":we,"data-x-position":Ue,style:{"--front-toast-height":`${((fe=me[0])==null?void 0:fe.height)||0}px`,"--width":`${c5}px`,"--gap":`${R}px`,...S,...m5(p,m)},onBlur:ae=>{O.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(O.current=!1,ue.current&&(ue.current.focus({preventScroll:!0}),ue.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||O.current||(O.current=!0,ue.current=ae.relatedTarget)},onMouseEnter:()=>ie(!0),onMouseMove:()=>ie(!0),onMouseLeave:()=>{te||ie(!1)},onDragEnd:()=>ie(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||he(!0)},onPointerUp:()=>he(!1)},W.filter(ae=>!ae.position&&ce===0||ae.position===Y).map((ae,$e)=>{var pt,It;return oe.createElement(p5,{key:ae.id,icons:A,index:$e,toast:ae,defaultRichColors:v,duration:(pt=T==null?void 0:T.duration)!=null?pt:w,className:T==null?void 0:T.className,descriptionClassName:T==null?void 0:T.descriptionClassName,invert:s,visibleToasts:C,closeButton:(It=T==null?void 0:T.closeButton)!=null?It:d,interacting:te,position:Y,style:T==null?void 0:T.style,unstyled:T==null?void 0:T.unstyled,classNames:T==null?void 0:T.classNames,cancelButtonStyle:T==null?void 0:T.cancelButtonStyle,actionButtonStyle:T==null?void 0:T.actionButtonStyle,closeButtonAriaLabel:T==null?void 0:T.closeButtonAriaLabel,removeToast:V,toasts:W.filter(rn=>rn.position==ae.position),heights:me.filter(rn=>rn.position==ae.position),setHeights:xe,expandByDefault:u,gap:R,expanded:q,swipeDirections:e.swipeDirections})})):null}))});function y5(){const{signIn:n}=BE(),[e,t]=N.useState("signIn"),[r,s]=N.useState(!1);return y.jsxs("div",{className:"w-full",children:[y.jsxs("form",{className:"flex flex-col gap-form-field",onSubmit:o=>{o.preventDefault(),s(!0);const l=new FormData(o.target);l.set("flow",e),n("password",l).catch(u=>{let d="";u.message.includes("Invalid password")?d="Invalid password. Please try again.":d=e==="signIn"?"Could not sign in, did you mean to sign up?":"Could not sign up, did you mean to sign in?",Ge.error(d),s(!1)})},children:[y.jsx("input",{className:"auth-input-field",type:"email",name:"email",placeholder:"Email",required:!0}),y.jsx("input",{className:"auth-input-field",type:"password",name:"password",placeholder:"Password",required:!0}),y.jsx("button",{className:"auth-button",type:"submit",disabled:r,children:e==="signIn"?"Sign in":"Sign up"}),y.jsxs("div",{className:"text-center text-sm text-secondary",children:[y.jsx("span",{children:e==="signIn"?"Don't have an account? ":"Already have an account? "}),y.jsx("button",{type:"button",className:"text-primary hover:text-primary-hover hover:underline font-medium cursor-pointer",onClick:()=>t(e==="signIn"?"signUp":"signIn"),children:e==="signIn"?"Sign up instead":"Sign in instead"})]})]}),y.jsxs("div",{className:"flex items-center justify-center my-3",children:[y.jsx("hr",{className:"my-4 grow border-gray-200"}),y.jsx("span",{className:"mx-4 text-secondary",children:"or"}),y.jsx("hr",{className:"my-4 grow border-gray-200"})]}),y.jsx("button",{className:"auth-button",onClick:()=>void n("anonymous"),children:"Sign in anonymously"})]})}function b5(){const{isAuthenticated:n}=H0(),{signOut:e}=BE();return n?y.jsx("button",{className:"rounded-md border border-neutral-200 px-3 py-1.5 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 hover:text-neutral-800",onClick:()=>void e(),children:"Sign out"}):null}function x5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const v5=N.forwardRef(x5);function w5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const S5=N.forwardRef(w5);function E5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const C5=N.forwardRef(E5);function N5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25"}))}const T5=N.forwardRef(N5);function k5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Ec=N.forwardRef(k5);function A5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const r2=N.forwardRef(A5);function M5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const O5=N.forwardRef(M5);function R5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const xf=N.forwardRef(R5);function D5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const i2=N.forwardRef(D5);function j5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const qc=N.forwardRef(j5);function _5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const L5=N.forwardRef(_5);function B5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const z5=N.forwardRef(B5);function I5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Kg=N.forwardRef(I5);function H5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const vf=N.forwardRef(H5);function U5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const $5=N.forwardRef(U5);function q5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const P5=N.forwardRef(q5);function V5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const wf=N.forwardRef(V5);function F5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const bh=N.forwardRef(F5);function G5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const F0=N.forwardRef(G5);function K5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const s2=N.forwardRef(K5);function W5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Sf=N.forwardRef(W5);function Q5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Y5=N.forwardRef(Q5);function X5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const J5=N.forwardRef(X5);function Z5({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const J1=N.forwardRef(Z5);function eD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const tD=N.forwardRef(eD);function nD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const rD=N.forwardRef(nD);function iD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const sD=N.forwardRef(iD);function oD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const aD=N.forwardRef(oD);function lD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const xh=N.forwardRef(lD);function cD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const uD=N.forwardRef(cD);function dD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const G0=N.forwardRef(dD);function fD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const o2=N.forwardRef(fD);function hD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const pD=N.forwardRef(hD);function mD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const vi=N.forwardRef(mD);function gD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"}))}const yD=N.forwardRef(gD);function bD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const xD=N.forwardRef(bD);function vD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const a2=N.forwardRef(vD);function wD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const si=N.forwardRef(wD);function SD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Js=N.forwardRef(SD);function ED({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Z1=N.forwardRef(ED);function CD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ew=N.forwardRef(CD);function ND({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Wg=N.forwardRef(ND);function TD({title:n,titleId:e,...t},r){return N.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?N.createElement("title",{id:e},n):null,N.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Zs=N.forwardRef(TD);function kD({isOpen:n,onClose:e}){const[t,r]=N.useState(!1),s=Rt(Le.notifications.getUserNotifications,{limit:50,unreadOnly:t})||[],o=Rt(Le.notifications.getUnreadCount)||0,l=Bt(Le.notifications.markNotificationAsRead),u=Bt(Le.notifications.markAllNotificationsAsRead),d=async m=>{try{await l({notificationId:m})}catch(x){console.error("Failed to mark notification as read:",x)}},h=async()=>{try{await u()}catch(m){console.error("Failed to mark all notifications as read:",m)}},p=m=>{switch(m){case"mention":return y.jsx(xf,{className:"w-5 h-5 text-blue-600"});case"assignment":return y.jsx(Z1,{className:"w-5 h-5 text-green-600"});case"comment":return y.jsx(xf,{className:"w-5 h-5 text-purple-600"});case"suggestion":return y.jsx(bh,{className:"w-5 h-5 text-orange-600"});case"deadline":return y.jsx(F0,{className:"w-5 h-5 text-red-600"});case"invitation":return y.jsx(Z1,{className:"w-5 h-5 text-indigo-600"});default:return y.jsx(Ec,{className:"w-5 h-5 text-gray-600"})}};return n?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-end z-50 pt-16 pr-4",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-h-[80vh] flex flex-col",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx(Ec,{className:"w-5 h-5 text-gray-600 mr-2"}),y.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),o>0&&y.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:o})]}),y.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:y.jsx(Zs,{className:"w-4 h-4 text-gray-500"})})]}),y.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("label",{className:"flex items-center text-sm",children:[y.jsx("input",{type:"checkbox",checked:t,onChange:m=>r(m.target.checked),className:"mr-2"}),"Show unread only"]}),o>0&&y.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})]})}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length===0?y.jsxs("div",{className:"text-center py-12 text-gray-500",children:[y.jsx(Ec,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),y.jsx("p",{className:"text-sm",children:t?"No unread notifications":"No notifications yet"})]}):y.jsx("div",{className:"divide-y divide-gray-200",children:s.map(m=>y.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${m.isRead?"":"bg-blue-50"}`,onClick:()=>{m.isRead||d(m._id),m.actionUrl&&(window.location.href=m.actionUrl)},children:y.jsxs("div",{className:"flex items-start",children:[y.jsx("div",{className:"flex-shrink-0 mr-3",children:p(m.type)}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:m.title}),!m.isRead&&y.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full ml-2"})]}),y.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.message}),y.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(m.createdAt).toLocaleString()})]})]})},m._id))})})]})}):null}function AD({isOpen:n,onClose:e,feature:t,currentUsage:r,limit:s}){const[o,l]=N.useState(!1),u=Rt(Le.subscriptions.getUserSubscription),d=Rt(Le.subscriptions.getUserUsage,{});if(!n)return null;const h=async()=>{l(!0),alert("Stripe integration would be implemented here. For demo purposes, this would redirect to payment."),l(!1)},p=["10 AI chatbot questions per month","3 tasks","5 document creations","1 PDF export","3 calendar events","5 file uploads","Basic document editing","Public document sharing"],m=["Unlimited AI chatbot questions","Unlimited tasks","Unlimited document creations","Unlimited PDF exports","Unlimited calendar events","Unlimited file uploads","Advanced collaboration features","Real-time editing with presence","Advanced commenting & suggestions","Audit log access","Priority support","Case management (30 docs, 50MB)","Workspace invitations & roles"],x=(u==null?void 0:u.plan)==="pro"?"Pro":"Free";return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-950/60 px-4 py-6 backdrop-blur-sm",children:y.jsxs("div",{className:"w-full max-w-4xl overflow-hidden rounded-3xl border border-neutral-200/70 bg-[#fdfcf8] shadow-2xl max-h-[90vh] flex flex-col",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto",children:[y.jsxs("div",{className:"flex items-start justify-between border-b border-neutral-200/70 bg-white/70 px-8 py-6",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.4em] text-neutral-400",children:[y.jsx(si,{className:"h-4 w-4 text-indigo-500"}),"Upgrade"]}),y.jsx("h2",{className:"mt-4 text-3xl font-semibold text-neutral-900",children:"Upgrade to Pro"}),t?y.jsxs("p",{className:"mt-2 text-sm text-neutral-500",children:["You've reached your free tier limit for ",t," (",r,"/",s,"). Unlock more usage by upgrading."]}):y.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Move beyond the basics with unlimited AI research, collaboration tools, and premium case management features."}),y.jsxs("p",{className:"mt-4 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:["Current Plan  ",x]})]}),y.jsx("button",{onClick:e,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700","aria-label":"Close subscription modal",children:y.jsx(Zs,{className:"h-5 w-5"})})]}),d&&y.jsxs("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-8 py-6",children:[y.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Usage Snapshot"}),y.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[{label:"AI Questions",value:`${d.aiQuestions}/10`},{label:"Tasks",value:`${d.tasksCreated}/3`},{label:"Documents",value:`${d.documentsCreated}/5`},{label:"PDF Exports",value:`${d.pdfExports}/1`},{label:"Calendar Events",value:`${d.calendarEvents}/3`},{label:"File Uploads",value:`${d.fileUploads}/5`}].map(v=>y.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 shadow-sm",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:v.label}),y.jsx("p",{className:"mt-2 text-lg font-semibold text-neutral-900",children:v.value})]},v.label))})]}),y.jsx("div",{className:"px-8 py-8",children:y.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[y.jsxs("div",{className:"rounded-3xl border border-neutral-200 bg-white/80 p-6 shadow-sm",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Free"}),y.jsx("h3",{className:"mt-2 text-3xl font-semibold text-neutral-900",children:"$0"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"per month"})]}),y.jsx("ul",{className:"mt-6 space-y-3",children:p.map(v=>y.jsxs("li",{className:"flex items-start gap-3 text-sm text-neutral-600",children:[y.jsx(qc,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),y.jsx("span",{children:v})]},v))}),y.jsx("button",{disabled:!0,className:"mt-6 w-full rounded-full border border-neutral-200 bg-white px-4 py-2 text-sm font-medium text-neutral-400",children:"Current Plan"})]}),y.jsxs("div",{className:"relative rounded-3xl border-2 border-neutral-900 bg-white p-6 shadow-lg",children:[y.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 rounded-full border border-neutral-900 bg-neutral-900 px-4 py-1 text-xs font-semibold uppercase tracking-[0.4em] text-white",children:"Pro"}),y.jsxs("div",{className:"text-center",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Professional"}),y.jsx("h3",{className:"mt-2 text-3xl font-semibold text-neutral-900",children:"$30"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"per month"})]}),y.jsx("ul",{className:"mt-6 space-y-3",children:m.map(v=>y.jsxs("li",{className:"flex items-start gap-3 text-sm text-neutral-600",children:[y.jsx(qc,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),y.jsx("span",{children:v})]},v))}),y.jsx("button",{onClick:h,disabled:o,className:"mt-6 inline-flex w-full items-center justify-center gap-2 rounded-full bg-neutral-900 px-4 py-3 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:opacity-40",children:o?y.jsx("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-neutral-100 border-t-transparent"}):y.jsxs(y.Fragment,{children:[y.jsx(P5,{className:"h-5 w-5"}),"Upgrade to Pro"]})})]})]})})]}),y.jsx("div",{className:"border-t border-neutral-200/70 bg-white/80 px-8 py-4 text-right",children:y.jsx("button",{onClick:e,className:"inline-flex items-center rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Close"})})]})})}function MD({collapsed:n,onToggleCollapse:e,activeView:t,onViewChange:r,selectedDocumentId:s,onDocumentSelect:o,selectedCaseId:l,onCaseSelect:u}){const[d,h]=N.useState(""),[p,m]=N.useState(!1),[x,v]=N.useState(""),[w,S]=N.useState(!1),[C,T]=N.useState(!1),[j,R]=N.useState(!1),A=Rt(Le.documents.listUserDocuments)||[],L=Rt(Le.documents.searchDocuments,d.length>2?{query:d}:"skip")||[],I=Rt(Le.notifications.getUnreadCount)||0,H=Rt(Le.subscriptions.getUserSubscription),W=Rt(Le.subscriptions.checkUsageLimit,{feature:"documentsCreated"}),re=Bt(Le.documents.createDocument),me=Bt(Le.subscriptions.incrementUsage),xe=async te=>{if(te.preventDefault(),!!x.trim()){if(W&&!W.allowed){R(!0);return}try{const he=await re({title:x,content:"",isPublic:w});(H==null?void 0:H.plan)==="free"&&await me({feature:"documentsCreated"}),o(he),v(""),S(!1),m(!1),r("editor")}catch(he){console.error("Failed to create document:",he)}}},q=d.length>2?L:A,ie=[{id:"editor",label:"Editor",icon:bh},{id:"cases",label:"Cases",icon:Sf},{id:"tasks",label:"Tasks",icon:i2},{id:"calendar",label:"Calendar",icon:r2},{id:"audit",label:"Audit Log",icon:Kg},{id:"chat",label:"WS Chat",icon:si}];return n?y.jsxs("div",{className:"flex w-16 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[y.jsx("button",{onClick:e,className:"flex h-12 items-center justify-center border-b border-neutral-200 text-neutral-500 transition hover:bg-neutral-100",children:y.jsx(z5,{className:"h-5 w-5"})}),y.jsx("nav",{className:"flex-1 py-4",children:ie.map(te=>y.jsxs("button",{onClick:()=>r(te.id),className:`relative flex h-12 w-full items-center justify-center transition ${t===te.id?"bg-neutral-100 text-neutral-900":"text-neutral-500 hover:bg-neutral-100"}`,title:te.label,children:[y.jsx(te.icon,{className:"h-5 w-5"}),t===te.id&&y.jsx("span",{className:"absolute inset-y-0 left-0 w-1 rounded-tr rounded-br bg-neutral-900"})]},te.id))}),y.jsx("div",{className:"border-t border-neutral-200 p-2",children:y.jsxs("button",{onClick:()=>T(!0),className:"relative flex h-10 w-full items-center justify-center rounded-md text-neutral-500 transition hover:bg-neutral-100",title:"Notifications",children:[y.jsx(Ec,{className:"h-5 w-5"}),I>0&&y.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-medium text-white",children:I>9?"9+":I})]})})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[y.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[y.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[y.jsx("div",{}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:()=>T(!0),className:"relative rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",title:"Notifications",children:[y.jsx(Ec,{className:"h-4 w-4"}),I>0&&y.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-medium text-white",children:I>9?"9+":I})]}),H&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-medium uppercase tracking-wide ${H.plan==="pro"?"bg-purple-100 text-purple-700":"bg-neutral-100 text-neutral-600"}`,children:H.plan==="pro"?"Pro":"Free"}),H.plan==="free"&&y.jsx("button",{onClick:()=>R(!0),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-900",children:"Upgrade"})]}),y.jsx("button",{onClick:e,className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",children:y.jsx(L5,{className:"h-4 w-4"})})]})]}),y.jsx("nav",{className:"space-y-1",children:ie.map(te=>y.jsxs("button",{onClick:()=>r(te.id),className:`flex w-full items-center gap-3 rounded-md px-3 py-2 text-sm transition ${t===te.id?"bg-white text-neutral-900 shadow-sm":"text-neutral-600 hover:bg-neutral-100"}`,children:[y.jsx(te.icon,{className:"h-4 w-4"}),te.label]},te.id))})]}),y.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[y.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[y.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[y.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Documents"}),y.jsx("button",{onClick:()=>m(!p),className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",title:"Create new document",children:y.jsx(vi,{className:"h-4 w-4"})})]}),p&&y.jsxs("form",{onSubmit:xe,className:"mb-4 rounded-lg border border-neutral-200 bg-white p-3",children:[y.jsx("input",{type:"text",placeholder:"Document title",value:x,onChange:te=>v(te.target.value),className:"mb-2 w-full rounded-md border border-neutral-200 px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",autoFocus:!0}),y.jsxs("label",{className:"mb-3 flex items-center gap-2 text-xs text-neutral-500",children:[y.jsx("input",{type:"checkbox",checked:w,onChange:te=>S(te.target.checked),className:"rounded border-neutral-300 text-neutral-900 focus:ring-neutral-400"}),"Make public"]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"submit",className:"inline-flex flex-1 items-center justify-center rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:"Create"}),y.jsx("button",{type:"button",onClick:()=>m(!1),className:"inline-flex flex-1 items-center justify-center rounded-md border border-neutral-200 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100",children:"Cancel"})]}),W&&!W.allowed&&y.jsxs("p",{className:"mt-3 text-xs text-red-500",children:[W.reason,". Upgrade to Pro for unlimited documents."]})]}),y.jsxs("div",{className:"relative",children:[y.jsx(rD,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-300"}),y.jsx("input",{type:"text",placeholder:"Search documents...",value:d,onChange:te=>h(te.target.value),className:"w-full rounded-md border border-neutral-200 bg-white pl-9 pr-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400 focus:ring-0"})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:y.jsx("div",{className:"space-y-1 px-3 py-4",children:q.length===0?y.jsxs("div",{className:"rounded-lg border border-dashed border-neutral-200 bg-white/60 px-4 py-10 text-center text-neutral-400",children:[y.jsx(Sf,{className:"mx-auto mb-3 h-6 w-6"}),y.jsx("p",{className:"text-sm",children:d.length>2?"No documents found":"Create your first document to get started"})]}):q.filter(Boolean).map(te=>{if(!te)return null;const he=s===te._id;return y.jsxs("button",{onClick:()=>{o(te._id),r("editor")},className:`flex w-full items-start justify-between rounded-lg border px-3 py-3 text-left transition ${he?"border-neutral-400 bg-white shadow-sm":"border-transparent bg-transparent hover:border-neutral-200 hover:bg-white"}`,children:[y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsx("h4",{className:"truncate text-sm font-medium text-neutral-800",children:te.title}),y.jsx("p",{className:"mt-1 text-xs text-neutral-400",children:new Date(te.lastModifiedAt).toLocaleDateString()})]}),y.jsx("div",{className:"ml-3 flex items-center",children:te.isPublic?y.jsx(Y5,{className:"h-4 w-4 text-neutral-500",title:"Public"}):y.jsx(tD,{className:"h-4 w-4 text-neutral-300",title:"Private"})})]},te._id)})})})]})]}),y.jsx(kD,{isOpen:C,onClose:()=>T(!1)}),y.jsx(AD,{isOpen:j,onClose:()=>R(!1),feature:W&&!W.allowed?"document creation":void 0,currentUsage:W==null?void 0:W.currentUsage,limit:W==null?void 0:W.limit})]})}function OD({isOpen:n,onClose:e,documentId:t,documentContent:r}){const[s,o]=N.useState(""),[l,u]=N.useState([]),[d,h]=N.useState(!1),p=N.useRef(null),m=yf(Le.chat.generateAIResponse);N.useEffect(()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})},[l]);const x=async w=>{if(w.preventDefault(),!s.trim()||d)return;const S={id:Date.now().toString(),type:"user",content:s,timestamp:Date.now()};u(T=>[...T,S]);const C=s;o(""),h(!0);try{let T=C;r&&r.trim()&&(T=`Document context: "${r.substring(0,500)}${r.length>500?"...":""}"

User question: ${C}`);const j=await m({userMessage:T,documentId:t});if(j){const R={id:(Date.now()+1).toString(),type:"ai",content:j,timestamp:Date.now()};u(A=>[...A,R])}}catch(T){console.error("AI response error:",T),Ge.error("Failed to get AI response");const j={id:(Date.now()+1).toString(),type:"ai",content:"I apologize, but I'm currently unable to provide a response. Please try again later.",timestamp:Date.now()};u(R=>[...R,j])}finally{h(!1)}},v=w=>{o(w)};return n?y.jsxs("div",{className:"w-96 border-l border-gray-200 bg-[#f7f6f3] flex flex-col transition-all duration-300 ease-in-out",children:[y.jsx("div",{className:"px-6 py-5 border-b border-gray-200 bg-[#f7f6f3]",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-xl border border-gray-200 bg-white flex items-center justify-center shadow-sm",children:y.jsx(si,{className:"w-5 h-5 text-slate-500"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-slate-900 font-sans",children:"Legal AI Assistant"}),y.jsx("p",{className:"text-xs text-slate-500 mt-1 font-sans",children:"Get instant legal insights and document analysis"})]})]}),y.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white border border-transparent hover:border-gray-200 rounded-lg transition-colors","aria-label":"Close AI Assistant",children:y.jsx(Zs,{className:"w-4 h-4 text-slate-400"})})]})}),y.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-4 min-h-0",children:[l.length===0?y.jsxs("div",{className:"text-center py-16",children:[y.jsx("div",{className:"w-14 h-14 rounded-xl border border-gray-200 bg-white flex items-center justify-center mx-auto mb-5 shadow-sm",children:y.jsx(si,{className:"w-6 h-6 text-slate-500"})}),y.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2 font-sans",children:"Welcome to Legal AI Assistant"}),y.jsx("p",{className:"text-xs text-slate-500 max-w-xs mx-auto leading-relaxed font-sans",children:"Ask questions about legal concepts, document analysis, compliance requirements, or get help with your legal research."}),y.jsxs("div",{className:"mt-8 space-y-2 text-left",children:[y.jsx("p",{className:"text-xs font-medium text-slate-600 font-sans",children:"Try asking:"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("button",{onClick:()=>v("What are the key elements of a valid contract?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are the key elements of a valid contract?"'}),y.jsx("button",{onClick:()=>v("Help me review this document for compliance issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Help me review this document for compliance issues"'}),y.jsx("button",{onClick:()=>v("What are common legal risks in business agreements?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are common legal risks in business agreements?"'}),r&&y.jsx("button",{onClick:()=>v("Analyze this document for potential legal issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Analyze this document for potential legal issues"'})]})]})]}):y.jsxs(y.Fragment,{children:[l.map(w=>y.jsx("div",{className:`flex ${w.type==="user"?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`max-w-sm px-4 py-3 rounded-2xl shadow-sm ${w.type==="user"?"bg-slate-900 text-white":"bg-white border border-gray-200 text-slate-800"}`,children:[y.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap font-sans",children:w.content}),y.jsx("p",{className:`text-[11px] mt-2 font-sans ${w.type==="user"?"text-slate-300":"text-slate-400"}`,children:new Date(w.timestamp).toLocaleTimeString()})]})},w.id)),d&&y.jsx("div",{className:"flex justify-start",children:y.jsx("div",{className:"bg-white border border-gray-200 text-slate-700 shadow-sm px-4 py-3 rounded-2xl max-w-sm",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsxs("div",{className:"flex space-x-1",children:[y.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),y.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),y.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),y.jsx("span",{className:"text-sm text-slate-600 font-sans",children:"AI is thinking..."})]})})})]}),y.jsx("div",{ref:p})]}),y.jsxs("div",{className:"px-6 py-5 border-t border-gray-200 bg-[#f7f6f3]",children:[y.jsxs("form",{onSubmit:x,className:"flex items-end space-x-3",children:[y.jsx("div",{className:"flex-1",children:y.jsx("textarea",{value:s,onChange:w=>o(w.target.value),placeholder:"Ask about legal concepts, document analysis, compliance...",className:"w-full px-4 py-3 text-sm border border-gray-200 rounded-xl bg-white resize-none focus:outline-none focus:ring-2 focus:ring-slate-900/10 font-sans leading-relaxed shadow-sm",rows:2,disabled:d,onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),x(w))}})}),y.jsx("button",{type:"submit",disabled:!s.trim()||d,className:"p-3 rounded-xl bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200 shadow-sm","aria-label":"Send message",children:y.jsx(xh,{className:"w-4 h-4"})})]}),y.jsx("p",{className:"text-xs text-slate-500 mt-3 font-sans leading-relaxed",children:"Press Enter to send, Shift+Enter for new line. AI responses are for informational purposes only."})]})]}):null}function Hn(n){this.content=n}Hn.prototype={constructor:Hn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),o=r.content.slice();return s==-1?o.push(t||n,e):(o[s+1]=e,t&&(o[s]=t)),new Hn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Hn(t)},addToStart:function(n,e){return new Hn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Hn(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),o=r.find(n);return s.splice(o==-1?s.length:o,0,e,t),new Hn(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Hn.from(n),n.size?new Hn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Hn.from(n),n.size?new Hn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Hn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Hn.from=function(n){if(n instanceof Hn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Hn(e)};function l2(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let l=0;s.text[l]==o.text[l];l++)t++;return t}if(s.content.size||o.content.size){let l=l2(s.content,o.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function c2(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let l=n.child(--s),u=e.child(--o),d=l.nodeSize;if(l==u){t-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=c2(l.content,u.content,t-1,r-1);if(h)return h}t-=d,r-=d}}class le{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let l=0,u=0;u<t;l++){let d=this.content[l],h=u+d.nodeSize;if(h>e&&r(d,s+u,o||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,t-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",l=!0;return this.nodesBetween(e,t,(u,d)=>{let h=u.isText?u.text.slice(Math.max(e,d)-d,t-d):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new le(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],d=l+u.nodeSize;d>e&&((l<e||d>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),s+=u.nodeSize),l=d}return new le(r,s)}cutByIndex(e,t){return e==t?le.empty:e==0&&t==this.content.length?this:new le(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new le(s,o)}addToStart(e){return new le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return l2(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return c2(this,e,t,r)}findIndex(e){if(e==0)return Id(0,e);if(e==this.size)return Id(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),o=r+s.nodeSize;if(o>=e)return o==e?Id(t+1,o):Id(t,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return le.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new le(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return le.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new le(t||e,r)}static from(e){if(!e)return le.empty;if(e instanceof le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}le.empty=new le([],0);const rg={index:0,offset:0};function Id(n,e){return rg.index=n,rg.offset=e,rg}function Ef(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ef(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ef(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Dt=class Qg{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ef(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Qg.none;if(e instanceof Qg)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Dt.none=[];class Cf extends Error{}class ve{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=d2(this.content,e+this.openStart,t);return r&&new ve(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ve(u2(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ve.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ve(le.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new ve(e,r,s)}}ve.empty=new ve(le.empty,0,0);function u2(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(s==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(u2(o.content,e-s-1,t-s-1)))}function d2(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),l=n.maybeChild(s);if(o==e||l.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=d2(l.content,e-o-1,t,l);return u&&n.replaceChild(s,l.copy(u))}function RD(n,e,t){if(t.openStart>n.depth)throw new Cf("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Cf("Inconsistent open depths");return f2(n,e,t,0)}function f2(n,e,t,r){let s=n.index(r),o=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=f2(n,e,t,r+1);return o.copy(o.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return qo(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=DD(t,n);return qo(o,p2(n,l,u,e,r))}else return qo(o,Nf(n,e,r))}function h2(n,e){if(!e.type.compatibleContent(n.type))throw new Cf("Cannot join "+e.type.name+" onto "+n.type.name)}function Yg(n,e,t){let r=n.node(t);return h2(r,e.node(t)),r}function $o(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Cc(n,e,t,r){let s=(e||n).node(t),o=0,l=e?e.index(t):s.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&($o(n.nodeAfter,r),o++));for(let u=o;u<l;u++)$o(s.child(u),r);e&&e.depth==t&&e.textOffset&&$o(e.nodeBefore,r)}function qo(n,e){return n.type.checkContent(e),n.copy(e)}function p2(n,e,t,r,s){let o=n.depth>s&&Yg(n,e,s+1),l=r.depth>s&&Yg(t,r,s+1),u=[];return Cc(null,n,s,u),o&&l&&e.index(s)==t.index(s)?(h2(o,l),$o(qo(o,p2(n,e,t,r,s+1)),u)):(o&&$o(qo(o,Nf(n,e,s+1)),u),Cc(e,t,s,u),l&&$o(qo(l,Nf(t,r,s+1)),u)),Cc(r,null,s,u),new le(u)}function Nf(n,e,t){let r=[];if(Cc(null,n,t,r),n.depth>t){let s=Yg(n,e,t+1);$o(qo(s,Nf(n,e,t+1)),r)}return Cc(e,null,t,r),new le(r)}function DD(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)s=e.node(o).copy(le.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Pc{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Dt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!s||!o[l].isInSet(s.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Tf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,o=t;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(o),h=o-d;if(r.push(l,u,s+d),!h||(l=l.child(u),l.isText))break;o=h-1,s+=d+1}return new Pc(t,r,o)}static resolveCached(e,t){let r=tw.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else tw.set(e,r=new jD);let s=r.elts[r.i]=Pc.resolve(e,t);return r.i=(r.i+1)%_D,s}}class jD{constructor(){this.elts=[],this.i=0}}const _D=12,tw=new WeakMap;class Tf{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const LD=Object.create(null);let eo=class Xg{constructor(e,t,r,s=Dt.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ef(this.attrs,t||e.defaultAttrs||LD)&&Dt.sameSet(this.marks,r||Dt.none)}copy(e=null){return e==this.content?this:new Xg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Xg(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ve.empty;let s=this.resolve(e),o=this.resolve(t),l=r?0:s.sharedDepth(t),u=s.start(l),h=s.node(l).content.cut(s.pos-u,o.pos-u);return new ve(h,s.depth-l,o.depth-l)}replace(e,t,r){return RD(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Pc.resolveCached(this,e)}resolveNoCache(e){return Pc.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),m2(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=le.empty,s=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let d=s;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Dt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Dt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=le.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};eo.prototype.text=void 0;class kf extends eo{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):m2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new kf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new kf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function m2(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Qo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new BD(e,t);if(r.next==null)return Qo.empty;let s=g2(r);r.next&&r.err("Unexpected trailing text");let o=PD(qD(s));return VD(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let o=t;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function o(l,u){let d=l.matchFragment(e,r);if(d&&(!t||d.validEnd))return le.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let x=o(m,u.concat(p));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Qo.empty=new Qo(!0);class BD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function g2(n){let e=[];do e.push(zD(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function zD(n){let e=[];do e.push(ID(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ID(n){let e=$D(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=HD(n,e);else break;return e}function nw(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function HD(n,e){let t=nw(n),r=t;return n.eat(",")&&(n.next!="}"?r=nw(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function UD(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let o in t){let l=t[o];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function $D(n){if(n.eat("(")){let e=g2(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=UD(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function qD(n){let e=[[]];return s(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,d){let h={term:d,to:u};return e[l].push(h),h}function s(l,u){l.forEach(d=>d.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],u);if(d==l.exprs.length-1)return h;s(h,u=t())}else if(l.type=="star"){let d=t();return r(u,d),s(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=t();return s(o(l.expr,u),d),s(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=t();s(o(l.expr,d),p),d=p}if(l.max==-1)s(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=t();r(d,p),s(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function y2(n,e){return e-n}function rw(n,e){let t=[];return r(e),t.sort(y2);function r(s){let o=n[s];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(s);for(let l=0;l<o.length;l++){let{term:u,to:d}=o[l];!u&&t.indexOf(d)==-1&&r(d)}}}function PD(n){let e=Object.create(null);return t(rw(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);rw(n,d).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new Qo(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(y2);o.next.push({type:s[l][0],next:e[u.join(",")]||t(u)})}return o}}function VD(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],o=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:d,next:h}=s.next[u];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function b2(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function x2(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let o=n[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function v2(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let o=n[s];o.validate&&o.validate(e[s])}}function w2(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new GD(n,r,e[r]);return t}let iw=class S2{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=w2(e,r.attrs),this.defaultAttrs=b2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Qo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:x2(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new eo(this,this.computeAttrs(e),le.from(t),Dt.setFrom(r))}createChecked(e=null,t,r){return t=le.from(t),this.checkContent(t),new eo(this,this.computeAttrs(e),t,Dt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=le.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),o=s&&s.fillBefore(le.empty,!0);return o?new eo(this,e,t.append(o),Dt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){v2(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Dt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new S2(o,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function FD(n,e,t){let r=t.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class GD{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?FD(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class vh{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=w2(e,s.attrs),this.excluded=null;let o=b2(this.attrs);this.instance=o?new Dt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Dt(this,x2(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((o,l)=>r[o]=new vh(o,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){v2(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class E2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Hn.from(e.nodes),t.marks=Hn.from(e.marks||{}),this.nodes=iw.compile(this.spec.nodes,this),this.marks=vh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Qo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?sw(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:sw(this,l.split(" "))}this.nodeFromJSON=s=>eo.fromJSON(this,s),this.markFromJSON=s=>Dt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof iw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new kf(r,r.defaultAttrs,e,Dt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function sw(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],o=n.marks[s],l=o;if(o)t.push(o);else for(let u in n.marks){let d=n.marks[u];(s=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function KD(n){return n.tag!=null}function WD(n){return n.style!=null}class to{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(KD(s))this.tags.push(s);else if(WD(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new aw(this,t,!1);return r.addAll(e,Dt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new aw(this,t,!0);return r.addAll(e,Dt.none,t.from,t.to),ve.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(XD(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let d=l.getAttrs(t);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(l=>{r(l=lw(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(l=>{r(l=lw(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new to(e,to.schemaRules(e)))}}const C2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},QD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},N2={ol:!0,ul:!0},Vc=1,Jg=2,Nc=4;function ow(n,e,t){return e!=null?(e?Vc:0)|(e==="full"?Jg:0):n&&n.whitespace=="pre"?Vc|Jg:t&~Nc}class Hd{constructor(e,t,r,s,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=Dt.none,this.match=o||(l&Nc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(le.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Vc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=le.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(le.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!C2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class aw{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,o,l=ow(null,t.preserveWhitespace,0)|(r?Nc:0);s?o=new Hd(s.type,s.attrs,Dt.none,!0,t.topMatch||s.type.contentMatch,l):r?o=new Hd(null,null,Dt.none,!0,null,l):o=new Hd(e.schema.topNodeType,null,Dt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,o=s.options&Jg?"full":this.localPreserveWS||(s.options&Vc)>0,{schema:l}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),t,!0),u[d]&&this.insertNode(l.text(u[d]),t,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;N2.hasOwnProperty(l)&&this.parser.normalizeLists&&YD(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:QD.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(C2.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=d&&d.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(o,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return t}addElementByRule(e,t,r,s){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,t.attrs||null,r,t.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,s){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t,r){let s,o;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,o=d,!h.length))break;if(d.solid){if(r)break;u+=2}}if(!s)return null;this.sync(o);for(let l=0;l<s.length;l++)t=this.enterInner(s[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Dt.none;for(let u of s.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):cw(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,s){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,s)),o}enterInner(e,t,r,s=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=ow(e,o,l.options);l.options&Nc&&l.content.length==0&&(u|=Nc);let d=Dt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):cw(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Hd(e,t,d,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Vc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),l=(u,d)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;d>=o;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&s?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function YD(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&N2.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function XD(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function lw(n){let e={};for(let t in n)e[t]=n[t];return e}function cw(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(s.contentMatch))return!0}}class ra{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ig(t).createDocumentFragment());let s=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,d=0;for(;u<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<o.length;)s=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,t);p&&(o.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=af(ig(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&af(ig(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return af(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ra(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=uw(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return uw(e.marks)}}function uw(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ig(n){return n.document||window.document}const dw=new WeakMap;function JD(n){let e=dw.get(n);return e===void 0&&dw.set(n,e=ZD(n)),e}function ZD(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function af(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=JD(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let u,d=t?n.createElementNS(t,s):n.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let x=m.indexOf(" ");x>0?d.setAttributeNS(m.slice(0,x),m.slice(x+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let x=e[m];if(x===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:w}=af(n,x,t,r);if(d.appendChild(v),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:d,contentDOM:u}}const T2=65535,k2=Math.pow(2,16);function e3(n,e){return n+e*k2}function fw(n){return n&T2}function t3(n){return(n-(n&T2))/k2}const A2=1,M2=2,lf=4,O2=8;class Zg{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&O2)>0}get deletedBefore(){return(this.delInfo&(A2|lf))>0}get deletedAfter(){return(this.delInfo&(M2|lf))>0}get deletedAcross(){return(this.delInfo&lf)>0}}class Ar{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Ar.empty)return Ar.empty}recover(e){let t=0,r=fw(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+t3(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=d+h;if(e<=m){let x=h?e==d?-1:e==m?1:t:t,v=d+s+(x<0?0:p);if(r)return v;let w=e==(t<0?d:m)?null:e3(u/3,e-d),S=e==d?M2:e==m?A2:lf;return(t<0?e!=d:e!=m)&&(S|=O2),new Zg(v,S,w)}s+=p-h}return r?e+s:new Zg(e+s,0,null)}touches(e,t){let r=0,s=fw(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[u+o],p=d+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[s+t],p=this.ranges[s+r];e(u,u+h,d,d+p),o+=p-h}}invert(){return new Ar(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ar.empty:new Ar(e<0?[0,-e,0]:[0,0,e])}}Ar.empty=new Ar([]);class Fc{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Fc(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Fc;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new Zg(e,s,null)}}const sg=Object.create(null);class Qn{getMap(){return Ar.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=sg[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in sg)throw new RangeError("Duplicate use of step JSON ID "+e);return sg[e]=t,t.prototype.jsonID=e,t}}class xn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new xn(e,null)}static fail(e){return new xn(null,e)}static fromReplace(e,t,r,s){try{return xn.ok(e.replace(t,r,s))}catch(o){if(o instanceof Cf)return xn.fail(o.message);throw o}}}function K0(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(K0(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return le.fromArray(r)}class Ws extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new ve(K0(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return xn.fromReplace(e,this.from,this.to,o)}invert(){return new wi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ws(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ws&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ws(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ws(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("addMark",Ws);class wi extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ve(K0(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return xn.fromReplace(e,this.from,this.to,r)}invert(){return new Ws(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new wi(t.pos,r.pos,this.mark)}merge(e){return e instanceof wi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new wi(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("removeMark",wi);class Qs extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return xn.fromReplace(e,this.pos,this.pos+1,new ve(le.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Qs(this.pos,t.marks[s]);return new Qs(this.pos,this.mark)}}return new Yo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qs(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("addNodeMark",Qs);class Yo extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return xn.fromReplace(e,this.pos,this.pos+1,new ve(le.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Qs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Yo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yo(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("removeNodeMark",Yo);class Nn extends Qn{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&e0(e,this.from,this.to)?xn.fail("Structure replace would overwrite content"):xn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ar([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Nn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Nn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ve.empty:new ve(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ve.empty:new ve(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nn(t.from,t.to,ve.fromJSON(e,t.slice),!!t.structure)}}Qn.jsonID("replace",Nn);class An extends Qn{constructor(e,t,r,s,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(e0(e,this.from,this.gapFrom)||e0(e,this.gapTo,this.to)))return xn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return xn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?xn.fromReplace(e,this.from,this.to,r):xn.fail("Content does not fit in gap")}getMap(){return new Ar([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new An(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new An(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new An(t.from,t.to,t.gapFrom,t.gapTo,ve.fromJSON(e,t.slice),t.insert,!!t.structure)}}Qn.jsonID("replaceAround",An);function e0(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function n3(n,e,t,r){let s=[],o=[],l,u;n.doc.nodesBetween(e,t,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let x=Math.max(h,e),v=Math.min(h+d.nodeSize,t),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==x&&l.mark.eq(m[S])?l.to=v:s.push(l=new wi(x,v,m[S])));u&&u.to==x?u.to=v:o.push(u=new Ws(x,v,r))}}),s.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function r3(n,e,t,r){let s=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof vh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,t);for(let p=0;p<d.length;p++){let m=d[p],x;for(let v=0;v<s.length;v++){let w=s[v];w.step==o-1&&m.eq(s[v].style)&&(x=w)}x?(x.to=h,x.step=o):s.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),s.forEach(l=>n.step(new wi(l.from,l.to,l.style)))}function W0(n,e,t,r=t.contentMatch,s=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new Nn(u,p,ve.empty));else{r=m;for(let x=0;x<h.marks.length;x++)t.allowsMarkType(h.marks[x].type)||n.step(new wi(u,p,h.marks[x]));if(s&&h.isText&&t.whitespace!="pre"){let x,v=/\r?\n|\r/g,w;for(;x=v.exec(h.text);)w||(w=new ve(le.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new Nn(u+x.index,u+x.index+x[0].length,w))}}u=p}if(!r.validEnd){let d=r.fillBefore(le.empty,!0);n.replace(u,u,new ve(d,0,0))}for(let d=l.length-1;d>=0;d--)n.step(l[d])}function i3(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,s=0,o=0;;--r){let l=n.$from.node(r),u=n.$from.index(r)+s,d=n.$to.indexAfter(r)-o;if(r<n.depth&&l.canReplace(u,d,t))return r;if(r==0||l.type.spec.isolating||!i3(l,u,d))break;u&&(s=1),d<l.childCount&&(o=1)}return null}function s3(n,e,t){let{$from:r,$to:s,depth:o}=e,l=r.before(o+1),u=s.after(o+1),d=l,h=u,p=le.empty,m=0;for(let w=o,S=!1;w>t;w--)S||r.index(w)>0?(S=!0,p=le.from(r.node(w).copy(p)),m++):d--;let x=le.empty,v=0;for(let w=o,S=!1;w>t;w--)S||s.after(w+1)<s.end(w)?(S=!0,x=le.from(s.node(w).copy(x)),v++):h++;n.step(new An(d,h,l,u,new ve(p.append(x),m,v),p.size-m,!0))}function Q0(n,e,t=null,r=n){let s=o3(n,e),o=s&&a3(r,e);return o?s.map(hw).concat({type:e,attrs:t}).concat(o.map(hw)):null}function hw(n){return{type:n,attrs:null}}function o3(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,s,l)?o:null}function a3(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<s;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:l}function l3(n,e,t){let r=le.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=le.from(t[l].type.create(t[l].attrs,r))}let s=e.start,o=e.end;n.step(new An(s,o,s,o,new ve(r,0,0),t.length,!0))}function c3(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let d=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,d)&&u3(n.doc,n.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&D2(n,l,u,o),W0(n,n.mapping.slice(o).map(u,1),r,void 0,h===null);let p=n.mapping.slice(o),m=p.map(u,1),x=p.map(u+l.nodeSize,1);return n.step(new An(m,x,m+1,x-1,new ve(le.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&R2(n,l,u,o),!1}})}function R2(n,e,t,r){e.forEach((s,o)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let d=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function D2(n,e,t,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function u3(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function d3(n,e,t,r,s){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,s||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new An(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ve(le.from(l),0,0),1,!0))}function ss(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,l=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=t-2;h>o;h--,p--){let m=s.node(h),x=s.index(h);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(x,m.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(x+1,m.childCount)||!S.type.validContent(v))return!1}let u=s.indexAfter(o),d=r&&r[0];return s.node(o).canReplaceWith(u,u,d?d.type:s.node(o+1).type)}function f3(n,e,t=1,r){let s=n.doc.resolve(e),o=le.empty,l=le.empty;for(let u=s.depth,d=s.depth-t,h=t-1;u>d;u--,h--){o=le.from(s.node(u).copy(o));let p=r&&r[h];l=le.from(p?p.type.create(p.attrs,l):s.node(u).copy(l))}n.step(new Nn(e,e,new ve(o.append(l),t,t),!0))}function oo(n,e){let t=n.resolve(e),r=t.index();return j2(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function h3(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function j2(n,e){return!!(n&&e&&!n.isLeaf&&h3(n,e))}function wh(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,l,u=r.index(s);if(s==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(o=r.node(s).maybeChild(u-1),l=r.node(s+1)),o&&!o.isTextblock&&j2(o,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function p3(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(s&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);D2(n,p.node(),p.before(),u)}l.inlineContent&&W0(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let d=n.mapping.slice(u),h=d.map(e-t);if(n.step(new Nn(h,d.map(e+t,-1),ve.empty,!0)),r===!0){let p=n.doc.resolve(h);R2(n,p.node(),p.before(),n.steps.length)}return n}function m3(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,t))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,t))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function _2(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let o=0;o<t.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(d,d,s);else{let m=h.contentMatchAt(d).findWrapping(s.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Sh(n,e,t=e,r=ve.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return L2(s,o,r)?new Nn(e,t,r):new g3(s,o,r).fit()}function L2(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class g3{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=le.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=le.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,l=r.depth,u=s.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let d=new ve(o,l,u);return e>-1?new An(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new Nn(r.pos,s.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=og(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,m=null;if(t==1&&(l?h.matchType(l.type)||(m=h.fillBefore(le.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(t==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=og(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ve(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=og(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new ve(yc(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new ve(yc(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:m,type:x}=this.frontier[t];if(s){for(let S=0;S<s.childCount;S++)p.push(s.child(S));m=m.matchFragment(s)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let S=u.child(h),C=m.matchType(S.type);if(!C)break;h++,(h>1||d==0||S.content.size)&&(m=C,p.push(B2(S.mark(x.allowedMarks(S.marks)),h==1?d:0,h==u.childCount?v:-1)))}let w=h==u.childCount;w||(v=-1),this.placed=bc(this.placed,t,le.from(p)),this.frontier[t].match=m,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,C=u;S<v;S++){let T=C.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),C=T.content}this.unplaced=w?e==0?ve.empty:new ve(yc(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new ve(yc(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ag(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=ag(e,t,s,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=ag(e,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=bc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=bc(this.placed,this.depth,le.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(le.empty,!0);t.childCount&&(this.placed=bc(this.placed,this.frontier.length,t))}}function yc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(yc(n.firstChild.content,e-1,t)))}function bc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(bc(n.lastChild.content,e-1,t)))}function og(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function B2(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,B2(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(le.empty,!0)))),n.copy(r)}function ag(n,e,t,r,s){let o=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!y3(t,o.content,l)?u:null}function y3(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function b3(n){return n.spec.defining||n.spec.definingForContent}function x3(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),o=n.doc.resolve(t);if(L2(s,o,r))return n.step(new Nn(e,t,r));let l=I2(s,o);l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let x=s.depth,v=s.pos-1;x>0;x--,v--){let w=s.node(x).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(x)>-1?u=x:s.before(x)==v&&l.splice(1,0,-x)}let d=l.indexOf(u),h=[],p=r.openStart;for(let x=r.content,v=0;;v++){let w=x.firstChild;if(h.push(w),v==r.openStart)break;x=w.content}for(let x=p-1;x>=0;x--){let v=h[x],w=b3(v.type);if(w&&!v.sameMarkup(s.node(Math.abs(u)-1)))p=x;else if(w||!v.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let v=(x+p+1)%(r.openStart+1),w=h[v];if(w)for(let S=0;S<l.length;S++){let C=l[(S+d)%l.length],T=!0;C<0&&(T=!1,C=-C);let j=s.node(C-1),R=s.index(C-1);if(j.canReplaceWith(R,R,w.type,w.marks))return n.replace(s.before(C),T?o.after(C):t,new ve(z2(r.content,0,r.openStart,v),v,r.openEnd))}}let m=n.steps.length;for(let x=l.length-1;x>=0&&(n.replace(e,t,r),!(n.steps.length>m));x--){let v=l[x];v<0||(e=s.before(v),t=o.after(v))}}function z2(n,e,t,r,s){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(z2(o.content,e+1,t,r,o)))}if(e>r){let o=s.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(le.empty,!0))}return n}function v3(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=m3(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new ve(le.from(r),0,0))}function w3(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),o=I2(r,s);for(let l=0;l<o.length;l++){let u=o[l],d=l==o.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function I2(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let o=n.start(s);if(o<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&t.push(s)}return t}class Ja extends Qn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return xn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return xn.fromReplace(e,this.pos,this.pos+1,new ve(le.from(s),0,t.isLeaf?0:1))}getMap(){return Ar.empty}invert(e){return new Ja(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ja(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ja(t.pos,t.attr,t.value)}}Qn.jsonID("attr",Ja);class Gc extends Qn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return xn.ok(r)}getMap(){return Ar.empty}invert(e){return new Gc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gc(t.attr,t.value)}}Qn.jsonID("docAttr",Gc);let tl=class extends Error{};tl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};tl.prototype=Object.create(Error.prototype);tl.prototype.constructor=tl;tl.prototype.name="TransformError";class Y0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Fc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ve.empty){let s=Sh(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new ve(le.from(r),0,0))}delete(e,t){return this.replace(e,t,ve.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return x3(this,e,t,r),this}replaceRangeWith(e,t,r){return v3(this,e,t,r),this}deleteRange(e,t){return w3(this,e,t),this}lift(e,t){return s3(this,e,t),this}join(e,t=1){return p3(this,e,t),this}wrap(e,t){return l3(this,e,t),this}setBlockType(e,t=e,r,s=null){return c3(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return d3(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new Ja(e,t,r)),this}setDocAttribute(e,t){return this.step(new Gc(e,t)),this}addNodeMark(e,t){return this.step(new Qs(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Dt)t.isInSet(r.marks)&&this.step(new Yo(e,t));else{let s=r.marks,o,l=[];for(;o=t.isInSet(s);)l.push(new Yo(e,o)),s=o.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,t=1,r){return f3(this,e,t,r),this}addMark(e,t,r){return n3(this,e,t,r),this}removeMark(e,t,r){return r3(this,e,t,r),this}clearIncompatible(e,t,r){return W0(this,e,t,r),this}}const lg=Object.create(null);class Pe{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new H2(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ve.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(h.pos),u?ve.empty:t),u==0&&gw(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),gw(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new He(e):Fa(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let l=t<0?Fa(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Fa(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Or(e.node(0))}static atStart(e){return Fa(e,e,0,0,1)||new Or(e)}static atEnd(e){return Fa(e,e,e.content.size,e.childCount,-1)||new Or(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=lg[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in lg)throw new RangeError("Duplicate use of selection JSON ID "+e);return lg[e]=t,t.prototype.jsonID=e,t}getBookmark(){return He.between(this.$anchor,this.$head).getBookmark()}}Pe.prototype.visible=!0;class H2{constructor(e,t){this.$from=e,this.$to=t}}let pw=!1;function mw(n){!pw&&!n.parent.inlineContent&&(pw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class He extends Pe{constructor(e,t=e){mw(e),mw(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Pe.near(r);let s=e.resolve(t.map(this.anchor));return new He(s.parent.inlineContent?s:r,r)}replace(e,t=ve.empty){if(super.replace(e,t),t==ve.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof He&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Eh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new He(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=Pe.findFrom(t,r,!0)||Pe.findFrom(t,-r,!0);if(o)t=o.$head;else return Pe.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Pe.findFrom(e,-r,!0)||Pe.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new He(e,t)}}Pe.jsonID("text",He);class Eh{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Eh(e.map(this.anchor),e.map(this.head))}resolve(e){return He.between(e.resolve(this.anchor),e.resolve(this.head))}}class Be extends Pe{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?Pe.near(o):new Be(o)}content(){return new ve(le.from(this.node),0,0)}eq(e){return e instanceof Be&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new X0(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Be(e.resolve(t.anchor))}static create(e,t){return new Be(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Be.prototype.visible=!1;Pe.jsonID("node",Be);class X0{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Eh(r,r):new X0(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Be.isSelectable(r)?new Be(t):Pe.near(t)}}class Or extends Pe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ve.empty){if(t==ve.empty){e.delete(0,e.doc.content.size);let r=Pe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Or(e)}map(e){return new Or(e)}eq(e){return e instanceof Or}getBookmark(){return S3}}Pe.jsonID("all",Or);const S3={map(){return this},resolve(n){return new Or(n)}};function Fa(n,e,t,r,s,o=!1){if(e.inlineContent)return He.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!o&&Be.isSelectable(u))return Be.create(n,t-(s<0?u.nodeSize:0))}else{let d=Fa(n,u,t+s,s<0?u.childCount:0,s,o);if(d)return d}t+=u.nodeSize*s}return null}function gw(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof Nn||s instanceof An))return;let o=n.mapping.maps[r],l;o.forEach((u,d,h,p)=>{l==null&&(l=p)}),n.setSelection(Pe.near(n.doc.resolve(l),t))}const yw=1,Ud=2,bw=4;class E3 extends Y0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|yw)&~Ud,this.storedMarks=null,this}get selectionSet(){return(this.updated&yw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ud,this}ensureMarks(e){return Dt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ud)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Ud,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Dt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Pe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=bw,this}get scrolledIntoView(){return(this.updated&bw)>0}}function xw(n,e){return!e||!n?n:n.bind(e)}class xc{constructor(e,t,r){this.name=e,this.init=xw(t.init,r),this.apply=xw(t.apply,r)}}const C3=[new xc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new xc("selection",{init(n,e){return n.selection||Pe.atStart(e.doc)},apply(n){return n.selection}}),new xc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new xc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class cg{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=C3.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xc(r.key,r.spec.state,r))})}}class Ya{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=s?s[l].n:0,h=s?s[l].state:this,p=d<t.length&&u.spec.appendTransaction.call(u,d?t.slice(d):t,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<l?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),o=!0}s&&(s[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ya(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new E3(this)}static create(e){let t=new cg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ya(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new cg(this.schema,e.plugins),r=t.fields,s=new Ya(t);for(let o=0;o<r.length;o++){let l=r[o].name;s[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new cg(e.schema,e.plugins),o=new Ya(s);return s.fields.forEach(l=>{if(l.name=="doc")o.doc=eo.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=Pe.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=h.fromJSON.call(d,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function U2(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=U2(s,e,{})),t[r]=s}return t}class Wt{constructor(e){this.spec=e,this.props={},e.props&&U2(e.props,this,this.props),this.key=e.key?e.key.key:$2("plugin")}getState(e){return e[this.key]}}const ug=Object.create(null);function $2(n){return n in ug?n+"$"+ ++ug[n]:(ug[n]=0,n+"$")}class dn{constructor(e="key"){this.key=$2(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Un=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},nl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let t0=null;const ts=function(n,e,t){let r=t0||(t0=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},N3=function(){t0=null},Xo=function(n,e,t,r){return t&&(vw(n,e,t,r,-1)||vw(n,e,t,r,1))},T3=/^(img|br|input|textarea|hr)$/i;function vw(n,e,t,r,s){for(var o;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Gr(n))){let l=n.parentNode;if(!l||l.nodeType!=1||cu(n)||T3.test(n.nodeName)||n.contentEditable=="false")return!1;e=Un(n)+(s<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else n=l,e=s<0?Gr(n):0}else return!1}}function Gr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function k3(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Gr(n)}else if(n.parentNode&&!cu(n))e=Un(n),n=n.parentNode;else return null}}function A3(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!cu(n))e=Un(n)+1,n=n.parentNode;else return null}}function M3(n,e,t){for(let r=e==0,s=e==Gr(n);r||s;){if(n==t)return!0;let o=Un(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,s=s&&o==Gr(n)}}function cu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Ch=function(n){return n.focusNode&&Xo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function _o(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function O3(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function R3(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Gr(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Gr(r.startContainer),r.startOffset)}}}const Ei=typeof navigator<"u"?navigator:null,ww=typeof document<"u"?document:null,ao=Ei&&Ei.userAgent||"",n0=/Edge\/(\d+)/.exec(ao),q2=/MSIE \d/.exec(ao),r0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ao),hr=!!(q2||r0||n0),no=q2?document.documentMode:r0?+r0[1]:n0?+n0[1]:0,Wr=!hr&&/gecko\/(\d+)/i.test(ao);Wr&&+(/Firefox\/(\d+)/.exec(ao)||[0,0])[1];const i0=!hr&&/Chrome\/(\d+)/.exec(ao),Kn=!!i0,P2=i0?+i0[1]:0,Zn=!hr&&!!Ei&&/Apple Computer/.test(Ei.vendor),rl=Zn&&(/Mobile\/\w+/.test(ao)||!!Ei&&Ei.maxTouchPoints>2),Fr=rl||(Ei?/Mac/.test(Ei.platform):!1),D3=Ei?/Win/.test(Ei.platform):!1,ns=/Android \d/.test(ao),uu=!!ww&&"webkitFontSmoothing"in ww.documentElement.style,j3=uu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function _3(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Yi(n,e){return typeof n=="number"?n:n[e]}function L3(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Sw(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=nl(l);continue}let u=l,d=u==o.body,h=d?_3(o):L3(u),p=0,m=0;if(e.top<h.top+Yi(r,"top")?m=-(h.top-e.top+Yi(s,"top")):e.bottom>h.bottom-Yi(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+Yi(s,"top")-h.top:e.bottom-h.bottom+Yi(s,"bottom")),e.left<h.left+Yi(r,"left")?p=-(h.left-e.left+Yi(s,"left")):e.right>h.right-Yi(r,"right")&&(p=e.right-h.right+Yi(s,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let v=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-v,C=u.scrollTop-w;e={left:e.left-S,top:e.top-C,right:e.right-S,bottom:e.bottom-C}}let x=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(x))break;l=x=="absolute"?l.offsetParent:nl(l)}}function B3(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=t-20){r=u,s=d.top;break}}return{refDOM:r,refTop:s,stack:V2(n.dom)}}function V2(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=nl(r));return e}function z3({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;F2(t,r==0?0:r-e)}function F2(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:o}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let qa=null;function I3(n){if(n.setActive)return n.setActive();if(qa)return n.focus(qa);let e=V2(n);n.focus(qa==null?{get preventScroll(){return qa={preventScroll:!0},!0}}:void 0),qa||(qa=!1,F2(e,0))}function G2(n,e){let t,r=2e8,s,o=0,l=e.top,u=e.top,d,h;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let x;if(p.nodeType==1)x=p.getClientRects();else if(p.nodeType==3)x=ts(p).getClientRects();else continue;for(let v=0;v<x.length;v++){let w=x[v];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){t=p,r=S,s=S&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!t&&d&&(t=d,s=h,r=0),t&&t.nodeType==3?H3(t,s):!t||r&&t.nodeType==1?{node:n,offset:o}:G2(t,s)}function H3(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=Us(r,1);if(o.top!=o.bottom&&J0(e,o))return{node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function J0(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function U3(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function $3(n,e,t){let{node:r,offset:s}=G2(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,o)}function q3(n,e,t,r){let s=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?s=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function K2(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=s;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(J0(e,h))return K2(l,e,h)}}if((o=(o+1)%r)==s)break}return n}function P3(n,e){let t=n.dom.ownerDocument,r,s=0,o=R3(t,e.left,e.top);o&&({node:r,offset:s}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!J0(e,h)||(l=K2(n.dom,e,h),!l))return null}if(Zn)for(let h=l;r&&h;h=nl(h))h.draggable&&(r=void 0);if(l=U3(l,e),r){if(Wr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let h;uu&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=q3(n,r,s,e))}u==null&&(u=$3(n,l,e));let d=n.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function Ew(n){return n.top<n.bottom||n.left<n.right}function Us(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Ew(r))return r}return Array.prototype.find.call(t,Ew)||n.getBoundingClientRect()}const V3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function W2(n,e,t){let{node:r,offset:s,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=uu||Wr;if(r.nodeType==3)if(l&&(V3.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let d=Us(ts(r,s,s),t);if(Wr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Us(ts(r,s-1,s-1),-1);if(h.top==d.top){let p=Us(ts(r,s,s+1),-1);if(p.top!=d.top)return hc(p,p.left<h.left)}}return d}else{let d=s,h=s,p=t<0?1:-1;return t<0&&!s?(h++,p=-1):t>=0&&s==r.nodeValue.length?(d--,p=1):t<0?d--:h++,hc(Us(ts(r,d,h),p),p<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1];if(d.nodeType==1)return dg(d.getBoundingClientRect(),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];if(d.nodeType==1)return dg(d.getBoundingClientRect(),!0)}return dg(r.getBoundingClientRect(),t>=0)}if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1],h=d.nodeType==3?ts(d,Gr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return hc(Us(h,1),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?ts(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return hc(Us(h,-1),!0)}return hc(Us(r.nodeType==3?ts(r):r,-t),t>=0)}function hc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function dg(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Q2(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function F3(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return Q2(n,e,()=>{let{node:o}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=W2(n,s.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=ts(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(t=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const G3=/[\u0590-\u08ac]/;function K3(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,l=s==r.parent.content.size,u=n.domSelection();return u?!G3.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:Q2(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),x=u.caretBidiLevel;u.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:S}=n.domSelectionRange(),C=w&&!v.contains(w.nodeType==1?w:w.parentNode)||d==w&&h==S;try{u.collapse(p,m),d&&(d!=p||h!=m)&&u.extend&&u.extend(d,h)}catch{}return x!=null&&(u.caretBidiLevel=x),C}):r.pos==r.start()||r.pos==r.end()}let Cw=null,Nw=null,Tw=!1;function W3(n,e,t){return Cw==e&&Nw==t?Tw:(Cw=e,Nw=t,Tw=t=="up"||t=="down"?F3(n,e,t):K3(n,e,t))}const Qr=0,kw=1,zo=2,Ci=3;class du{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Qr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Un(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof X2){s=e-o;break}o=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Y2&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Un(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Un(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let l=r,u=0;;u++){let d=this.children[u],h=l+d.size;if(s==-1&&e<=h){let p=l+d.border;if(e>=p&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,p);e=l;for(let m=u;m>0;m--){let x=this.children[m-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){s=Un(x.dom)+1;break}e-=x.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Un(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let v=0,w=0;v<this.children.length;v++){let S=this.children[v],C=w+S.size;if(o>w&&l<C)return S.setSelection(e-w-S.border,t-w-S.border,r,s);w=C}let u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Wr||Zn)&&e==t){let{node:v,offset:w}=u;if(v.nodeType==3){if(m=!!(w&&v.nodeValue[w-1]==`
`),m&&w==v.nodeValue.length)for(let S=v,C;S;S=S.parentNode){if(C=S.nextSibling){C.nodeName=="BR"&&(u=d={node:C.parentNode,offset:Un(C)+1});break}let T=S.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let S=v.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Wr&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||m&&Zn)&&Xo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Xo(d.node,d.offset,p.focusNode,p.focusOffset))return;let x=!1;if((h.extend||e==t)&&!(m&&Wr)){h.collapse(u.node,u.offset);try{e!=t&&h.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>t){let w=u;u=d,d=w}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,d=l-o.border;if(e>=u&&t<=d){this.dirty=e==r||t==l?zo:kw,e==u&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ci:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?zo:Ci}r=l}this.dirty=zo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?zo:kw;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Y2 extends du{constructor(e,t,r,s){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Qr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Q3 extends du{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Jo extends du{constructor(e,t,r,s,o){super(e,[],r,s),this.mark=t,this.spec=o}static create(e,t,r,s){let o=s.nodeViews[t.type.name],l=o&&o(t,s,r);return(!l||!l.dom)&&(l=ra.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Jo(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ci||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ci&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Qr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qr}}slice(e,t,r){let s=Jo.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=o0(o,t,l,r)),e>0&&(o=o0(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ro extends du{constructor(e,t,r,s,o,l,u,d,h){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,o,l){let u=o.nodeViews[t.type.name],d,h=u&&u(t,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,s),p=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=ra.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let x=p;return p=eC(p,r,t),h?d=new Y3(e,t,r,s,p,m||null,x,h,o,l+1):t.isText?new Nh(e,t,r,s,p,x,o):new ro(e,t,r,s,p,m||null,x,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>le.empty)}return e}matchesNode(e,t,r){return this.dirty==Qr&&e.eq(this.node)&&Af(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,d=new J3(this,l&&l.node,e);t4(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?Dt.none:this.node.child(p).marks,r,e),d.placeWidget(h,e,s)},(h,p,m,x)=>{d.syncToMarks(h.marks,r,e);let v;d.findNodeMatch(h,p,m,x)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,v,e)||d.updateNextNode(h,p,m,e,x,s)||d.addNode(h,p,m,e,s),s+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==zo)&&(l&&this.protectLocalComposition(e,l),J2(this.contentDOM,this.children,e),rl&&n4(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof He)||r<t||s>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=r4(this.node.content,l,r-t,s-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new Q3(this,o,t,s);e.input.compositionNodes.push(l),this.children=o0(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==Ci||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Qr}updateOuterDeco(e){if(Af(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Z2(this.dom,this.nodeDOM,s0(this.outerDeco,this.node,t),s0(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Aw(n,e,t,r,s){eC(r,e,n);let o=new ro(void 0,n,e,t,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Nh extends ro{constructor(e,t,r,s,o,l,u){super(e,t,r,s,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Ci||this.dirty!=Qr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Qr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Qr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),o=document.createTextNode(s.text);return new Nh(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ci)}get domAtom(){return!1}isText(e){return this.node.text==e}}class X2 extends du{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Y3 extends ro{constructor(e,t,r,s,o,l,u,d,h,p){super(e,t,r,s,o,l,u,h,p),this.spec=d}update(e,t,r,s){if(this.dirty==Ci)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function J2(n,e,t){let r=n.firstChild,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=Mw(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(l instanceof Jo){let d=r?r.previousSibling:n.lastChild;J2(l.contentDOM,l.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=Mw(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Tc=function(n){n&&(this.nodeName=n)};Tc.prototype=Object.create(null);const Io=[new Tc];function s0(n,e,t){if(n.length==0)return Io;let r=t?Io[0]:new Tc,s=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&s.push(r=new Tc(l.nodeName));for(let u in l){let d=l[u];d!=null&&(t&&s.length==1&&s.push(r=new Tc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return s}function Z2(n,e,t,r){if(t==Io&&r==Io)return e;let s=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let d;u&&u.nodeName==l.nodeName&&s!=n&&(d=s.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(s),u=Io[0]),s=d}X3(s,u||Io[0],l)}return s}function X3(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&n.classList.add(s[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function eC(n,e,t){return Z2(n,n,Io,s0(e,t,n.nodeType!=1))}function Af(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Mw(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class J3{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Z3(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;s<l&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Qr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=d;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let d=Jo.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,s){let o=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,s,o){let l=this.top.children[s];return l.dirty==Ci&&l.dom==l.contentDOM&&(l.dirty=zo),l.update(e,t,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,o,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof ro){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,x=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Ci&&Af(t,d.outerDeco));if(!x&&d.update(e,t,r,s))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!x&&(m=this.recreateWrapper(d,e,t,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=zo,m.updateChildren(s,l+1),m.dirty=Qr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Af(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=ro.create(this.top,t,r,s,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,t,r,s,o){let l=ro.create(this.top,e,t,r,s,o);l.contentDOM&&l.updateChildren(s,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new Y2(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Jo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Nh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Zn||Kn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new X2(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Z3(n,e){let t=e,r=t.children.length,s=n.childCount,o=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof Jo)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=u.node;if(d){if(d!=n.child(s-1))break;--s,o.set(u,s),l.push(u)}}return{index:s,matched:o,matches:l.reverse()}}function e4(n,e){return n.type.side-e.type.side}function t4(n,e,t,r){let s=e.locals(n),o=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,s,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,m;for(;l<s.length&&s[l].to==o;){let C=s[l++];C.widget&&(p?(m||(m=[p])).push(C):p=C)}if(p)if(m){m.sort(e4);for(let C=0;C<m.length;C++)t(m[C],h,!!d)}else t(p,h,!!d);let x,v;if(d)v=-1,x=d,d=null;else if(h<n.childCount)v=h,x=n.child(h++);else break;for(let C=0;C<u.length;C++)u[C].to<=o&&u.splice(C--,1);for(;l<s.length&&s[l].from<=o&&s[l].to>o;)u.push(s[l++]);let w=o+x.nodeSize;if(x.isText){let C=w;l<s.length&&s[l].from<C&&(C=s[l].from);for(let T=0;T<u.length;T++)u[T].to<C&&(C=u[T].to);C<w&&(d=x.cut(C-o),x=x.cut(0,C-o),w=C,v=-1)}else for(;l<s.length&&s[l].to<w;)l++;let S=x.isInline&&!x.isLeaf?u.filter(C=>!C.inline):u.slice();r(x,S,e.forChild(o,x),v),o=w}}function n4(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function r4(n,e,t,r){for(let s=0,o=0;s<n.childCount&&o<=r;){let l=n.child(s++),u=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;s<n.childCount;){let h=n.child(s++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?d.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function o0(n,e,t,r,s){let o=[];for(let l=0,u=0;l<n.length;l++){let d=n[l],h=u,p=u+=d.size;h>=t||p<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,r)),s&&(o.push(s),s=void 0),p>t&&o.push(d.slice(t-h,d.size,r)))}return o}function Z0(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),o=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,h;if(Ch(t)){for(d=l;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&Be.isSelectable(m)&&s.parent&&!(m.isInline&&M3(t.focusNode,t.focusOffset,s.dom))){let x=s.posBefore;h=new Be(l==x?u:r.resolve(x))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=l,x=l;for(let v=0;v<t.rangeCount;v++){let w=t.getRangeAt(v);m=Math.min(m,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),x=Math.max(x,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=x==n.state.selection.anchor?[x,m]:[m,x],u=r.resolve(l)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let m=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=ey(n,p,u,m)}return h}function tC(n){return n.editable?n.hasFocus():rC(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function as(n,e=!1){let t=n.state.selection;if(nC(n,t),!!tC(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Kn){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Xo(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)s4(n);else{let{anchor:r,head:s}=t,o,l;Ow&&!(t instanceof He)&&(t.$from.parent.inlineContent||(o=Rw(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=Rw(n,t.to))),n.docView.setSelection(r,s,n,e),Ow&&(o&&Dw(o),l&&Dw(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&i4(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Ow=Zn||Kn&&P2<63;function Rw(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Zn&&s&&s.contentEditable=="false")return fg(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return fg(s);if(o)return fg(o)}}function fg(n){return n.contentEditable="true",Zn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Dw(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function i4(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!tC(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function s4(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Un(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&hr&&no<=11&&(t.disabled=!0,t.disabled=!1)}function nC(n,e){if(e instanceof Be){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(jw(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else jw(n)}function jw(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function ey(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||He.between(e,t,r)}function _w(n){return n.editable&&!n.hasFocus()?!1:rC(n)}function rC(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function o4(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Xo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function a0(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),o=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return o&&Pe.findFrom(o,e)}function $s(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Lw(n,e,t){let r=n.state.selection;if(r instanceof He)if(t.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return $s(n,new He(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=a0(n.state,e);return s&&s instanceof Be?$s(n,s):!1}else if(!(Fr&&t.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?Be.isSelectable(o)?$s(n,new Be(e<0?n.state.doc.resolve(s.pos-o.nodeSize):s)):uu?$s(n,new He(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Be&&r.node.isInline)return $s(n,new He(e>0?r.$to:r.$from));{let s=a0(n.state,e);return s?$s(n,s):!1}}}function Mf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function kc(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Pa(n,e){return e<0?a4(n):l4(n)}function a4(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,o,l=!1;for(Wr&&t.nodeType==1&&r<Mf(t)&&kc(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(kc(u,-1))s=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(iC(t))break;{let u=t.previousSibling;for(;u&&kc(u,-1);)s=t.parentNode,o=Un(u),u=u.previousSibling;if(u)t=u,r=Mf(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?l0(n,t,r):s&&l0(n,s,o)}function l4(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=Mf(t),o,l;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(kc(u,1))o=t,l=++r;else break}else{if(iC(t))break;{let u=t.nextSibling;for(;u&&kc(u,1);)o=u.parentNode,l=Un(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=Mf(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}o&&l0(n,o,l)}function iC(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function c4(n,e){for(;n&&e==n.childNodes.length&&!cu(n);)e=Un(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function u4(n,e){for(;n&&!e&&!cu(n);)e=Un(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function l0(n,e,t){if(e.nodeType!=3){let o,l;(l=c4(e,t))?(e=l,t=0):(o=u4(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Ch(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&as(n)},50)}function Bw(n,e){let t=n.state.doc.resolve(e);if(!(Kn||D3)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function zw(n,e,t){let r=n.state.selection;if(r instanceof He&&!r.empty||t.indexOf("s")>-1||Fr&&t.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=a0(n.state,e);if(l&&l instanceof Be)return $s(n,l)}if(!s.parent.inlineContent){let l=e<0?s:o,u=r instanceof Or?Pe.near(l,e):Pe.findFrom(l,e);return u?$s(n,u):!1}return!1}function Iw(n,e){if(!(n.state.selection instanceof He))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function Hw(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function d4(n){if(!Zn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Hw(n,r,"true"),setTimeout(()=>Hw(n,r,"false"),20)}return!1}function f4(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function h4(n,e){let t=e.keyCode,r=f4(e);if(t==8||Fr&&t==72&&r=="c")return Iw(n,-1)||Pa(n,-1);if(t==46&&!e.shiftKey||Fr&&t==68&&r=="c")return Iw(n,1)||Pa(n,1);if(t==13||t==27)return!0;if(t==37||Fr&&t==66&&r=="c"){let s=t==37?Bw(n,n.state.selection.from)=="ltr"?-1:1:-1;return Lw(n,s,r)||Pa(n,s)}else if(t==39||Fr&&t==70&&r=="c"){let s=t==39?Bw(n,n.state.selection.from)=="ltr"?1:-1:1;return Lw(n,s,r)||Pa(n,s)}else{if(t==38||Fr&&t==80&&r=="c")return zw(n,-1,r)||Pa(n,-1);if(t==40||Fr&&t==78&&r=="c")return d4(n)||zw(n,1,r)||Pa(n,1);if(r==(Fr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function ty(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=n.someProp("clipboardSerializer")||ra.fromSchema(n.state.schema),u=uC(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=cC[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=u.createElement(p[v]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let x=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function sC(n,e,t,r,s){let o=s.parent.type.spec.code,l,u;if(!t&&!e)return null;let d=!!e&&(r||o||!t);if(d){if(n.someProp("transformPastedText",x=>{e=x(e,o||r,n)}),o)return u=new ve(le.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",x=>{u=x(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",x=>x(e,s,r,n));if(m)u=m;else{let x=s.marks(),{schema:v}=n.state,w=ra.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let C=l.appendChild(document.createElement("p"));S&&C.appendChild(w.serializeNode(v.text(S,x)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),l=y4(t),uu&&b4(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let x=l.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;l=x}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||to.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:s,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!p4.test(x.parentNode.nodeName)?{ignore:!0}:null}})),p)u=x4(Uw(u,+p[1],+p[2]),p[4]);else if(u=ve.maxOpen(m4(u.content,s),!0),u.openStart||u.openEnd){let m=0,x=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;x<u.openEnd&&!v.type.spec.isolating;x++,v=v.lastChild);u=Uw(u,m,x)}return n.someProp("transformPasted",m=>{u=m(u,n,d)}),u}const p4=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function m4(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let d=s.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&o.length&&aC(d,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=lC(l[l.length-1],o.length));let p=oC(u,d);l.push(p),s=s.matchType(p.type),o=d}}),l)return le.from(l)}return n}function oC(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,le.from(n));return n}function aC(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let o=aC(n,e,t,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(le.from(oC(t,n,s+1))))}}function lC(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,lC(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(le.empty,!0);return n.copy(t.append(r))}function c0(n,e,t,r,s,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),s<r-1&&(u=c0(u,e,t,r,s+1,o)),s>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(le.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function Uw(n,e,t){return e<n.openStart&&(n=new ve(c0(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ve(c0(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const cC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $w=null;function uC(){return $w||($w=document.implementation.createHTMLDocument("title"))}let hg=null;function g4(n){let e=window.trustedTypes;return e?(hg||(hg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),hg.createHTML(n)):n}function y4(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=uC().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&cC[r[1].toLowerCase()])&&(n=s.map(o=>"<"+o+">").join("")+n+s.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=g4(n),s)for(let o=0;o<s.length;o++)t=t.querySelector(s[o])||t;return t}function b4(n){let e=n.querySelectorAll(Kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function x4(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let d=t.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;s=le.from(d.create(r[u+1],s)),o++,l++}return new ve(s,o,l)}const er={},tr={},v4={touchstart:!0,touchmove:!0};class w4{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function S4(n){for(let e in er){let t=er[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{C4(n,r)&&!ny(n,r)&&(n.editable||!(r.type in tr))&&t(n,r)},v4[e]?{passive:!0}:void 0)}Zn&&n.dom.addEventListener("input",()=>null),u0(n)}function Ys(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function E4(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function u0(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>ny(n,r))})}function ny(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function C4(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function N4(n,e){!ny(n,e)&&er[e.type]&&(n.editable||!(e.type in tr))&&er[e.type](n,e)}tr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!fC(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ns&&Kn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),rl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,_o(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||h4(n,t)?t.preventDefault():Ys(n,"key")};tr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};tr.keypress=(n,e)=>{let t=e;if(fC(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fr&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof He)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,s,o))&&n.dispatch(o()),t.preventDefault()}};function Th(n){return{left:n.clientX,top:n.clientY}}function T4(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ry(n,e,t,r,s){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),s,!0):u(n,t,o.node(l),o.before(l),s,!1)))return!0;return!1}function Za(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function k4(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Be.isSelectable(r)?(Za(n,new Be(t)),!0):!1}function A4(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof Be&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(Be.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?s=o.before(t.$from.depth):s=o.before(l);break}}return s!=null?(Za(n,Be.create(n.state.doc,s)),!0):!1}function M4(n,e,t,r,s){return ry(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(s?A4(n,t):k4(n,t))}function O4(n,e,t,r){return ry(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function R4(n,e,t,r){return ry(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||D4(n,t,r)}function D4(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Za(n,He.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o),u=s.before(o);if(l.inlineContent)Za(n,He.create(r,u+1,u+1+l.content.size));else if(Be.isSelectable(l))Za(n,Be.create(r,u));else continue;return!0}}function iy(n){return Of(n)}const dC=Fr?"metaKey":"ctrlKey";er.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=iy(n),s=Date.now(),o="singleClick";s-n.input.lastClick.time<500&&T4(t,n.input.lastClick)&&!t[dC]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=n.posAtCoords(Th(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new j4(n,l,t,!!r)):(o=="doubleClick"?O4:R4)(n,l.pos,l.inside,t)?t.preventDefault():Ys(n,"pointer"))};class j4{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[dC],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let p=e.state.doc.resolve(t.pos);o=p.parent,l=p.depth?p.before():0}const u=s?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof Be&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ys(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>as(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Th(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ys(this.view,"pointer"):M4(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Zn&&this.mightDrag&&!this.mightDrag.node.isAtom||Kn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Za(this.view,Pe.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ys(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ys(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}er.touchstart=n=>{n.input.lastTouch=Date.now(),iy(n),Ys(n,"pointer")};er.touchmove=n=>{n.input.lastTouch=Date.now(),Ys(n,"pointer")};er.contextmenu=n=>iy(n);function fC(n,e){return n.composing?!0:Zn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const _4=ns?5e3:-1;tr.compositionstart=tr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof He&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Of(n,!0),n.markCursor=null;else if(Of(n,!e.selection.empty),Wr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let l=o<0?s.lastChild:s.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,o=-1}}n.input.composing=!0}hC(n,_4)};tr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,hC(n,20))};function hC(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Of(n),e))}function pC(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=B4());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function L4(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=k3(e.focusNode,e.focusOffset),r=A3(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function B4(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Of(n,e=!1){if(!(ns&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),pC(n),e||n.docView&&n.docView.dirty){let t=Z0(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function z4(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Kc=hr&&no<15||rl&&j3<604;er.copy=tr.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let o=Kc?null:t.clipboardData,l=r.content(),{dom:u,text:d}=ty(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",d)):z4(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function I4(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function H4(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Wc(n,r.value,null,s,e):Wc(n,r.textContent,r.innerHTML,s,e)},50)}function Wc(n,e,t,r,s){let o=sC(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,s,o||ve.empty)))return!0;if(!o)return!1;let l=I4(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mC(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}tr.paste=(n,e)=>{let t=e;if(n.composing&&!ns)return;let r=Kc?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Wc(n,mC(r),r.getData("text/html"),s,t)?t.preventDefault():H4(n,t)};class gC{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const U4=Fr?"altKey":"ctrlKey";function yC(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[U4]}er.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,o=s.empty?null:n.posAtCoords(Th(t)),l;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof Be?s.to-1:s.to))){if(r&&r.mightDrag)l=Be.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(l=Be.create(n.state.doc,m.posBefore))}}let u=(l||n.state.selection).content(),{dom:d,text:h,slice:p}=ty(n,u);(!t.dataTransfer.files.length||!Kn||P2>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Kc?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Kc||t.dataTransfer.setData("text/plain",h),n.dragging=new gC(p,yC(n,t),l)};er.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};tr.dragover=tr.dragenter=(n,e)=>e.preventDefault();tr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Th(t));if(!s)return;let o=n.state.doc.resolve(s.pos),l=r&&r.slice;l?n.someProp("transformPasted",w=>{l=w(l,n,!1)}):l=sC(n,mC(t.dataTransfer),Kc?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&yC(n,t));if(n.someProp("handleDrop",w=>w(n,t,l||ve.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let d=l?_2(n.state.doc,o.pos,l):o.pos;d==null&&(d=o.pos);let h=n.state.tr;if(u){let{node:w}=r;w?w.replace(h):h.deleteSelection()}let p=h.mapping.map(d),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,x=h.doc;if(m?h.replaceRangeWith(p,p,l.content.firstChild):h.replaceRange(p,p,l),h.doc.eq(x))return;let v=h.doc.resolve(p);if(m&&Be.isSelectable(l.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new Be(v));else{let w=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((S,C,T,j)=>w=j),h.setSelection(ey(n,v,h.doc.resolve(w)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};er.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&as(n)},20))};er.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};er.beforeinput=(n,e)=>{if(Kn&&ns&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,_o(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in tr)er[n]=tr[n];function Qc(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Rf{constructor(e,t){this.toDOM=e,this.spec=t||Po,this.side=this.spec.side||0}map(e,t,r,s){let{pos:o,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new kn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Rf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Qc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class io{constructor(e,t){this.attrs=e,this.spec=t||Po}map(e,t,r,s){let o=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new kn(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof io&&Qc(this.attrs,e.attrs)&&Qc(this.spec,e.spec)}static is(e){return e.type instanceof io}destroy(){}}class sy{constructor(e,t){this.attrs=e,this.spec=t||Po}map(e,t,r,s){let o=e.mapResult(t.from+s,1);if(o.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=o.pos?null:new kn(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),o;return s==t.from&&!(o=e.child(r)).isText&&s+o.nodeSize==t.to}eq(e){return this==e||e instanceof sy&&Qc(this.attrs,e.attrs)&&Qc(this.spec,e.spec)}destroy(){}}class kn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new kn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new kn(e,e,new Rf(t,r))}static inline(e,t,r,s){return new kn(e,t,new io(r,s))}static node(e,t,r,s){return new kn(e,t,new sy(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof io}get widget(){return this.type instanceof Rf}}const Ga=[],Po={};class Vt{constructor(e,t){this.local=e.length?e:Ga,this.children=t.length?t:Ga}static create(e,t){return t.length?Df(t,e,0,Po):Gn}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,s+u,o)}}map(e,t,r){return this==Gn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Po)}mapInner(e,t,r,s,o){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,s);d&&d.type.valid(t,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?$4(this.children,l||[],e,t,r,s,o):l?new Vt(l.sort(Vo),Ga):Gn}add(e,t){return t.length?this==Gn?Vt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,o=0;e.forEach((u,d)=>{let h=d+r,p;if(p=xC(t,u,h)){for(s||(s=this.children.slice());o<s.length&&s[o]<d;)o+=3;s[o]==d?s[o+2]=s[o+2].addInner(u,p,h+1):s.splice(o,0,d,d+u.nodeSize,Df(p,u,h+1,Po)),o+=3}});let l=bC(o?vC(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Vt(l.length?this.local.concat(l).sort(Vo):this.local,s||this.children)}remove(e){return e.length==0||this==Gn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,d=r[o+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=Gn?r[o+2]=h:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<s.length;u++)s[u].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Vt(s,r):Gn}forChild(e,t){if(this==Gn)return this;if(t.isLeaf)return Vt.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>o&&d.type instanceof io){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(s||(s=[])).push(d.copy(h,p))}}if(s){let u=new Vt(s.sort(Vo),Ga);return r?new Vs([u,r]):u}return r||Gn}eq(e){if(this==e)return!0;if(!(e instanceof Vt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return oy(this.localsInner(e))}localsInner(e){if(this==Gn)return Ga;if(e.inlineContent||!this.local.some(io.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof io||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Vt.empty=new Vt([],[]);Vt.removeOverlap=oy;const Gn=Vt.empty;class Vs{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,Po));return Vs.from(r)}forChild(e,t){if(t.isLeaf)return Vt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,t);o!=Gn&&(o instanceof Vs?r=r.concat(o.members):r.push(o))}return Vs.from(r)}eq(e){if(!(e instanceof Vs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?oy(r?t:t.sort(Vo)):Ga}static from(e){switch(e.length){case 0:return Gn;case 1:return e[0];default:return new Vs(e.every(t=>t instanceof Vt)?e:e.reduce((t,r)=>t.concat(r instanceof Vt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function $4(n,e,t,r,s,o,l){let u=n.slice();for(let h=0,p=o;h<t.maps.length;h++){let m=0;t.maps[h].forEach((x,v,w,S)=>{let C=S-w-(v-x);for(let T=0;T<u.length;T+=3){let j=u[T+1];if(j<0||x>j+p-m)continue;let R=u[T]+p-m;v>=R?u[T+1]=x<=R?-2:-1:x>=p&&C&&(u[T]+=C,u[T+1]+=C)}m+=C}),p=t.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=t.map(n[h]+o),m=p-s;if(m<0||m>=r.content.size){d=!0;continue}let x=t.map(n[h+1]+o,-1),v=x-s,{index:w,offset:S}=r.content.findIndex(m),C=r.maybeChild(w);if(C&&S==m&&S+C.nodeSize==v){let T=u[h+2].mapInner(t,C,p+1,n[h]+o+1,l);T!=Gn?(u[h]=m,u[h+1]=v,u[h+2]=T):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=q4(u,n,e,t,s,o,l),p=Df(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,x=0;m<p.children.length;m+=3){let v=p.children[m];for(;x<u.length&&u[x]<v;)x+=3;u.splice(x,0,p.children[m],p.children[m+1],p.children[m+2])}}return new Vt(e.sort(Vo),u)}function bC(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new kn(s.from+e,s.to+e,s.type))}return t}function q4(n,e,t,r,s,o,l){function u(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,s,h);m?t.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&u(n[d+2],e[d]+o+1);return t}function xC(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[o]=null);return s}function vC(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Df(n,e,t,r){let s=[],o=!1;e.forEach((u,d)=>{let h=xC(n,u,d+t);if(h){o=!0;let p=Df(h,u,t+d+1,r);p!=Gn&&s.push(d,d+u.nodeSize,p)}});let l=bC(o?vC(n):n,-t).sort(Vo);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new Vt(l,s):Gn}function Vo(n,e){return n.from-e.from||n.to-e.to}function oy(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[s]=o.copy(o.from,r.to),qw(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),qw(e,s,r.copy(o.from,r.to)));break}}}return e}function qw(n,e,t){for(;e<n.length&&Vo(t,n[e])>0;)e++;n.splice(e,0,t)}function pg(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Gn&&e.push(r)}),n.cursorWrapper&&e.push(Vt.create(n.state.doc,[n.cursorWrapper.deco])),Vs.from(e)}const P4={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},V4=hr&&no<=11;class F4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class G4{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new F4,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);hr&&no<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),V4&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,P4)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_w(this.view)){if(this.suppressingSelectionUpdates)return as(this.view);if(hr&&no<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=nl(o))t.add(o);for(let o=e.anchorNode;o;o=nl(o))if(t.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&_w(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(Wr&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,x]=p;m.parentNode&&m.parentNode.parentNode==x.parentNode?x.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let x of p){let v=x.parentNode;v&&v.nodeName=="LI"&&(!m||Q4(e,m)!=v)&&x.remove()}}}let h=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ch(r)&&(h=Z0(e))&&h.eq(Pe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,as(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,l),K4(e)),this.handleDOMChange(o,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||as(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(hr&&no<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:x}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let l=s&&s.parentNode==e.target?Un(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?Un(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Pw=new WeakMap,Vw=!1;function K4(n){if(!Pw.has(n)&&(Pw.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Wr,Vw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Vw=!0}}function Fw(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Xo(l.node,l.offset,s,o)&&([t,r,s,o]=[s,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:o}}function W4(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Fw(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Fw(n,t):null}function Q4(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function Y4(n,e,t){let{node:r,fromOffset:s,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,p=d.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],Ch(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Kn&&n.input.lastKeyCode===8)for(let C=o;C>s;C--){let T=r.childNodes[C-1],j=T.pmViewDesc;if(T.nodeName=="BR"&&!j){o=C;break}if(!j||j.size)break}let m=n.state.doc,x=n.someProp("domParser")||to.fromSchema(n.state.schema),v=m.resolve(l),w=null,S=x.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:X4,context:v});if(h&&h[0].pos!=null){let C=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=C),w={anchor:C+l,head:T+l}}return{doc:S,sel:w,from:l,to:u}}function X4(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Zn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Zn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const J4=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Z4(n,e,t,r,s){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let H=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,W=Z0(n,H);if(W&&!n.state.selection.eq(W)){if(Kn&&ns&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",me=>me(n,_o(13,"Enter"))))return;let re=n.state.tr.setSelection(W);H=="pointer"?re.setMeta("pointer",!0):H=="key"&&re.scrollIntoView(),o&&re.setMeta("composition",o),n.dispatch(re)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let d=n.state.selection,h=Y4(n,e,t),p=n.state.doc,m=p.slice(h.from,h.to),x,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(x=n.state.selection.to,v="end"):(x=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let w=nj(m.content,h.doc.content,h.from,x,v);if(w&&n.input.domChangeCount++,(rl&&n.input.lastIOSEnter>Date.now()-225||ns)&&s.some(H=>H.nodeType==1&&!J4.test(H.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",H=>H(n,_o(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof He&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let H=Gw(n,n.state.doc,h.sel);if(H&&!H.eq(n.state.selection)){let W=n.state.tr.setSelection(H);o&&W.setMeta("composition",o),n.dispatch(W)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof He&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),hr&&no<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=h.doc.resolveNoCache(w.start-h.from),C=h.doc.resolveNoCache(w.endB-h.from),T=p.resolve(w.start),j=S.sameParent(C)&&S.parent.inlineContent&&T.end()>=w.endA;if((rl&&n.input.lastIOSEnter>Date.now()-225&&(!j||s.some(H=>H.nodeName=="DIV"||H.nodeName=="P"))||!j&&S.pos<h.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&S.pos<C.pos&&!/\S/.test(h.doc.textBetween(S.pos,C.pos,"","")))&&n.someProp("handleKeyDown",H=>H(n,_o(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&tj(p,w.start,w.endA,S,C)&&n.someProp("handleKeyDown",H=>H(n,_o(8,"Backspace")))){ns&&Kn&&n.domObserver.suppressSelectionUpdates();return}Kn&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),ns&&!j&&S.start()!=C.start()&&C.parentOffset==0&&S.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,C=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(H){return H(n,_o(13,"Enter"))})},20));let R=w.start,A=w.endA,L=H=>{let W=H||n.state.tr.replace(R,A,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let re=Gw(n,W.doc,h.sel);re&&!(Kn&&n.composing&&re.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(re.head==R||re.head==W.mapping.map(A)-1)||hr&&re.empty&&re.head==R)&&W.setSelection(re)}return o&&W.setMeta("composition",o),W.scrollIntoView()},I;if(j)if(S.pos==C.pos){hr&&no<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>as(n),20));let H=L(n.state.tr.delete(R,A)),W=p.resolve(w.start).marksAcross(p.resolve(w.endA));W&&H.ensureMarks(W),n.dispatch(H)}else if(w.endA==w.endB&&(I=ej(S.parent.content.cut(S.parentOffset,C.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let H=L(n.state.tr);I.type=="add"?H.addMark(R,A,I.mark):H.removeMark(R,A,I.mark),n.dispatch(H)}else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){let H=S.parent.textBetween(S.parentOffset,C.parentOffset),W=()=>L(n.state.tr.insertText(H,R,A));n.someProp("handleTextInput",re=>re(n,R,A,H,W))||n.dispatch(W())}else n.dispatch(L());else n.dispatch(L())}function Gw(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:ey(n,e.resolve(t.anchor),e.resolve(t.head))}function ej(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,o=r,l,u,d;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<t.length;p++)o=t[p].removeFromSet(o);if(s.length==1&&o.length==0)u=s[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&o.length==1)u=o[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(le.from(h).eq(n))return{mark:u,type:l}}function tj(n,e,t,r,s){if(t-e<=s.pos-r.pos||mg(r,!0,!1)<s.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(mg(o,!0,!0));return!l.parent.isTextblock||l.pos>t||mg(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function mg(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function nj(n,e,t,r,s){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let d=Math.max(0,o-Math.min(l,u));r-=l+d-o}if(l<o&&n.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&Kw(e.textBetween(o-1,o+1))&&(o+=d?1:-1),u=o+(u-l),l=o}else if(u<o){let d=r<=o&&r>=u?o-r:0;o-=d,o&&o<n.size&&Kw(n.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function Kw(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class wC{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new w4,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Jw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Yw(this),Qw(this),this.nodeViews=Xw(this),this.docView=Aw(this.state.doc,Ww(this),pg(this),this.dom,this),this.domObserver=new G4(this,(r,s,o,l)=>Z4(this,r,s,o,l)),this.domObserver.start(),S4(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&u0(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Jw),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(pC(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=Xw(this);ij(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&u0(this),this.editable=Yw(this),Qw(this);let d=pg(this),h=Ww(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,d);(m||!e.selection.eq(s.selection))&&(l=!0);let x=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&B3(this);if(l){this.domObserver.stop();let v=m&&(hr||Kn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&rj(s.selection,e.selection);if(m){let w=Kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=L4(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Aw(e.doc,h,d,this.dom,this)),w&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&o4(this))?as(this,v):(nC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():x&&z3(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Be){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Sw(this,t.getBoundingClientRect(),e)}else Sw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new gC(e.slice,e.move,s<0?void 0:Be.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=t?t(u):u))return s}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(hr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&I3(this.dom),as(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return P3(this,e)}coordsAtPos(e,t=1){return W2(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return W3(this,t||this.state,e)}pasteHTML(e,t){return Wc(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Wc(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return ty(this,e)}destroy(){this.docView&&(E4(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],pg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,N3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return N4(this,e)}domSelectionRange(){let e=this.domSelection();return e?Zn&&this.root.nodeType===11&&O3(this.dom.ownerDocument)==this.dom&&W4(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}wC.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Ww(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[kn.node(0,n.state.doc.content.size,e)]}function Qw(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:kn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Yw(n){return!n.someProp("editable",e=>e(n.state)===!1)}function rj(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Xw(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function ij(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Jw(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var so={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},sj=typeof navigator<"u"&&/Mac/.test(navigator.platform),oj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $n=0;$n<10;$n++)so[48+$n]=so[96+$n]=String($n);for(var $n=1;$n<=24;$n++)so[$n+111]="F"+$n;for(var $n=65;$n<=90;$n++)so[$n]=String.fromCharCode($n+32),jf[$n]=String.fromCharCode($n);for(var gg in so)jf.hasOwnProperty(gg)||(jf[gg]=so[gg]);function aj(n){var e=sj&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||oj&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?jf:so)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const lj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),cj=typeof navigator<"u"&&/Win/.test(navigator.platform);function uj(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))lj?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function dj(n){let e=Object.create(null);for(let t in n)e[uj(t)]=n[t];return e}function yg(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function fj(n){return new Wt({props:{handleKeyDown:ay(n)}})}function ay(n){let e=dj(n);return function(t,r){let s=aj(r),o,l=e[yg(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[yg(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(cj&&r.ctrlKey&&r.altKey)&&(o=so[r.keyCode])&&o!=s){let u=e[yg(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const ly=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function SC(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const EC=(n,e,t)=>{let r=SC(n,t);if(!r)return!1;let s=cy(r);if(!s){let l=r.blockRange(),u=l&&hl(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=s.nodeBefore;if(DC(n,s,e,-1))return!0;if(r.parent.content.size==0&&(il(o,"end")||Be.isSelectable(o)))for(let l=r.depth;;l--){let u=Sh(n.doc,r.before(l),r.after(l),ve.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=n.tr.step(u);d.setSelection(il(o,"end")?Pe.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):Be.create(d.doc,s.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},hj=(n,e,t)=>{let r=SC(n,t);if(!r)return!1;let s=cy(r);return s?CC(n,s,e):!1},pj=(n,e,t)=>{let r=TC(n,t);if(!r)return!1;let s=uy(r);return s?CC(n,s,e):!1};function CC(n,e,t){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Sh(n.doc,o,d,ve.empty);if(!h||h.from!=o||h instanceof Nn&&h.slice.size>=d-o)return!1;if(t){let p=n.tr.step(h);p.setSelection(He.create(p.doc,o)),t(p.scrollIntoView())}return!0}function il(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const NC=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=cy(r)}let l=o&&o.nodeBefore;return!l||!Be.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Be.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function cy(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function TC(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const kC=(n,e,t)=>{let r=TC(n,t);if(!r)return!1;let s=uy(r);if(!s)return!1;let o=s.nodeAfter;if(DC(n,s,e,1))return!0;if(r.parent.content.size==0&&(il(o,"start")||Be.isSelectable(o))){let l=Sh(n.doc,r.before(),r.after(),ve.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(il(o,"start")?Pe.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):Be.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},AC=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=uy(r)}let l=o&&o.nodeAfter;return!l||!Be.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Be.create(n.doc,o.pos)).scrollIntoView()),!0)};function uy(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const mj=(n,e)=>{let t=n.selection,r=t instanceof Be,s;if(r){if(t.node.isTextblock||!oo(n.doc,t.from))return!1;s=t.from}else if(s=wh(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(Be.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},gj=(n,e)=>{let t=n.selection,r;if(t instanceof Be){if(t.node.isTextblock||!oo(n.doc,t.to))return!1;r=t.to}else if(r=wh(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},yj=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&hl(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},MC=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function dy(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const bj=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),l=dy(s.contentMatchAt(o));if(!l||!s.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),d=n.tr.replaceWith(u,u,l.createAndFill());d.setSelection(Pe.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},OC=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof Or||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=dy(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(He.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},RC=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(ss(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&hl(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function xj(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Be&&e.selection.node.isBlock)return!r.parentOffset||!ss(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,d=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){d=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=dy(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(d&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof He||e.selection instanceof Or)&&p.deleteSelection();let m=p.mapping.map(r.pos),x=ss(p.doc,m,o.length,o);if(x||(o[0]=u?{type:u}:null,x=ss(p.doc,m,o.length,o)),!x)return!1;if(p.split(m,o.length,o),!d&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),w=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return t&&t(p.scrollIntoView()),!0}}const vj=xj(),wj=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(Be.create(n.doc,s))),!0)};function Sj(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||oo(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function DC(n,e,t,r){let s=e.nodeBefore,o=e.nodeAfter,l,u,d=s.type.spec.isolating||o.type.spec.isolating;if(!d&&Sj(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,w=le.empty;for(let T=l.length-1;T>=0;T--)w=le.from(l[T].create(null,w));w=le.from(s.copy(w));let S=n.tr.step(new An(e.pos-1,v,e.pos,v,new ve(w,1,0),l.length,!0)),C=S.doc.resolve(v+2*l.length);C.nodeAfter&&C.nodeAfter.type==s.type&&oo(S.doc,C.pos)&&S.join(C.pos),t(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:Pe.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),x=m&&hl(m);if(x!=null&&x>=e.depth)return t&&t(n.tr.lift(m,x).scrollIntoView()),!0;if(h&&il(o,"start",!0)&&il(s,"end")){let v=s,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let S=o,C=1;for(;!S.isTextblock;S=S.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,S.content)){if(t){let T=le.empty;for(let R=w.length-1;R>=0;R--)T=le.from(w[R].copy(T));let j=n.tr.step(new An(e.pos-w.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new ve(T,w.length,0),0,!0));t(j.scrollIntoView())}return!0}}return!1}function jC(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(He.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const Ej=jC(-1),Cj=jC(1);function Nj(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o),u=l&&Q0(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function Zw(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(d,h)=>{if(s)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)s=!0;else{let p=t.doc.resolve(h),m=p.index();s=p.parent.canReplaceWith(m,m+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=t.selection.ranges[l];o.setBlockType(u,d,n,e)}r(o.scrollIntoView())}return!0}}function fy(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}fy(ly,EC,NC);fy(ly,kC,AC);fy(MC,OC,RC,vj);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Tj(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o);if(!l)return!1;let u=r?t.tr:null;return kj(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function kj(n,e,t,r=null){let s=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new Tf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Tf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=Q0(o,t,r,e);return u?(n&&Aj(n,e,u,s,t),!0):!1}function Aj(n,e,t,r,s){let o=le.empty;for(let p=t.length-1;p>=0;p--)o=le.from(t[p].type.create(t[p].attrs,o));n.step(new An(e.start-(r?2:0),e.end,e.start,e.end,new ve(o,0,0),t.length,!0));let l=0;for(let p=0;p<t.length;p++)t[p].type==s&&(l=p+1);let u=t.length-l,d=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,x=!0;p<m;p++,x=!1)!x&&ss(n.doc,d,u)&&(n.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return n}function Mj(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?Oj(e,t,n,o):Rj(e,t,o):!0:!1}}function Oj(n,e,t,r){let s=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(s.step(new An(o-1,l,o,l,new ve(le.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Tf(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=hl(r);if(u==null)return!1;s.lift(r,u);let d=s.doc.resolve(s.mapping.map(o,-1)-1);return oo(s.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&s.join(d.pos),e(s.scrollIntoView()),!0}function Rj(n,e,t){let r=n.tr,s=t.parent;for(let v=t.end,w=t.endIndex-1,S=t.startIndex;w>S;w--)v-=s.child(w).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,d=t.endIndex==s.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?le.empty:le.from(s))))return!1;let m=o.pos,x=m+l.nodeSize;return r.step(new An(m-(u?1:0),x+(d?1:0),m+1,x-1,new ve((u?le.empty:le.from(s.copy(le.empty))).append(d?le.empty:le.from(s.copy(le.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function Dj(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,d=u.child(l-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==u.type,p=le.from(h?n.create():null),m=new ve(le.from(n.create(null,le.from(u.type.create(null,p)))),h?3:1,0),x=o.start,v=o.end;t(e.tr.step(new An(x-(h?3:1),v,x,v,m,1,!0)).scrollIntoView())}return!0}}function kh(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}class Ah{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...p)=>{const m=d(...p)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u=[],d=!!e,h=e||o.tr,p=()=>(!d&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(h),u.every(x=>x===!0)),m={...Object.fromEntries(Object.entries(r).map(([x,v])=>[x,(...S)=>{const C=this.buildProps(h,t),T=v(...S)(C);return u.push(T),m}])),run:p};return m}createCan(e){const{rawCommands:t,state:r}=this,s=!1,o=e||r.tr,l=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(t).map(([d,h])=>[d,(...p)=>h(...p)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u={tr:e,editor:s,view:l,state:kh({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...p)=>h(...p)(u)]))}};return u}}class jj{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Me(n,e,t){return n.config[e]===void 0&&n.parent?Me(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Me(n.parent,e,t):null}):n.config[e]}function Mh(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function _C(n){const e=[],{nodeExtensions:t,markExtensions:r}=Mh(n),s=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:s},d=Me(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([x,v])=>{e.push({type:m,name:x,attribute:{...o,...v}})})})})}),s.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=Me(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const x={...o,...m};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:l.name,name:p,attribute:x})})}),e}function On(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function xt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const u=o?String(o).split(" "):[],d=r[s]?r[s].split(" "):[],h=u.filter(p=>!d.includes(p));r[s]=[...d,...h].join(" ")}else if(s==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,x]=p.split(":").map(v=>v.trim());h.set(m,x)}),u.forEach(p=>{const[m,x]=p.split(":").map(v=>v.trim());h.set(m,x)}),r[s]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=o}),r},{})}function _f(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>xt(t,r),{})}function LC(n){return typeof n=="function"}function rt(n,e=void 0,...t){return LC(n)?e?n.bind(e)(...t):n(...t):n}function _j(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Lj(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function eS(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):Lj(t.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...s}}}}function tS(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&_j(t)?!1:t!=null))}function Bj(n,e){var t;const r=_C(n),{nodeExtensions:s,markExtensions:o}=Mh(n),l=(t=s.find(h=>Me(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(T=>T.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((T,j)=>{const R=Me(j,"extendNodeSchema",m);return{...T,...R?R(h):{}}},{}),v=tS({...x,content:rt(Me(h,"content",m)),marks:rt(Me(h,"marks",m)),group:rt(Me(h,"group",m)),inline:rt(Me(h,"inline",m)),atom:rt(Me(h,"atom",m)),selectable:rt(Me(h,"selectable",m)),draggable:rt(Me(h,"draggable",m)),code:rt(Me(h,"code",m)),whitespace:rt(Me(h,"whitespace",m)),linebreakReplacement:rt(Me(h,"linebreakReplacement",m)),defining:rt(Me(h,"defining",m)),isolating:rt(Me(h,"isolating",m)),attrs:Object.fromEntries(p.map(T=>{var j;return[T.name,{default:(j=T==null?void 0:T.attribute)===null||j===void 0?void 0:j.default}]}))}),w=rt(Me(h,"parseHTML",m));w&&(v.parseDOM=w.map(T=>eS(T,p)));const S=Me(h,"renderHTML",m);S&&(v.toDOM=T=>S({node:T,HTMLAttributes:_f(T,p)}));const C=Me(h,"renderText",m);return C&&(v.toText=C),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const p=r.filter(C=>C.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},x=n.reduce((C,T)=>{const j=Me(T,"extendMarkSchema",m);return{...C,...j?j(h):{}}},{}),v=tS({...x,inclusive:rt(Me(h,"inclusive",m)),excludes:rt(Me(h,"excludes",m)),group:rt(Me(h,"group",m)),spanning:rt(Me(h,"spanning",m)),code:rt(Me(h,"code",m)),attrs:Object.fromEntries(p.map(C=>{var T;return[C.name,{default:(T=C==null?void 0:C.attribute)===null||T===void 0?void 0:T.default}]}))}),w=rt(Me(h,"parseHTML",m));w&&(v.parseDOM=w.map(C=>eS(C,p)));const S=Me(h,"renderHTML",m);return S&&(v.toDOM=C=>S({mark:C,HTMLAttributes:_f(C,p)})),[h.name,v]}));return new E2({topNode:l,nodes:u,marks:d})}function bg(n,e){return e.nodes[n]||e.marks[n]||null}function nS(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function hy(n,e){const t=ra.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const zj=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,o,l,u)=>{var d,h;const p=((h=(d=s.type.spec).toText)===null||h===void 0?void 0:h.call(d,{node:s,pos:o,parent:l,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-o))}),t};function py(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Oh{constructor(e){this.find=e.find,this.handler=e.handler}}const Ij=(n,e)=>{if(py(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function $d(n){var e;const{editor:t,from:r,to:s,text:o,rules:l,plugin:u}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(x=>x.type.spec.code))return!1;let p=!1;const m=zj(h)+o;return l.forEach(x=>{if(p)return;const v=Ij(m,x.find);if(!v)return;const w=d.state.tr,S=kh({state:d.state,transaction:w}),C={from:r-(v[0].length-o.length),to:s},{commands:T,chain:j,can:R}=new Ah({editor:t,state:S});x.handler({state:S,range:C,match:v,commands:T,chain:j,can:R})===null||!w.steps.length||(w.setMeta(u,{transform:w,from:r,to:s,text:o}),d.dispatch(w),p=!0)}),p}function Hj(n){const{editor:e,rules:t}=n,r=new Wt({state:{init(){return null},apply(s,o,l){const u=s.getMeta(r);if(u)return u;const d=s.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=hy(le.from(p),l.schema);const{from:m}=d,x=m+p.length;$d({editor:e,from:m,to:x,text:p,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,l,u){return $d({editor:e,from:o,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&$d({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?$d({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Uj(n){return Object.prototype.toString.call(n).slice(8,-1)}function qd(n){return Uj(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Rh(n,e){const t={...n};return qd(n)&&qd(e)&&Object.keys(e).forEach(r=>{qd(e[r])&&qd(n[r])?t[r]=Rh(n[r],e[r]):t[r]=e[r]}),t}class Ni{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=rt(Me(this,"addOptions",{name:this.name}))),this.storage=rt(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ni(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Rh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ni(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=rt(Me(t,"addOptions",{name:t.name})),t.storage=rt(Me(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const d=l.find(h=>(h==null?void 0:h.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function $j(n){return typeof n=="number"}class qj{constructor(e){this.find=e.find,this.handler=e.handler}}const Pj=(n,e,t)=>{if(py(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=n,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function Vj(n){const{editor:e,state:t,from:r,to:s,rule:o,pasteEvent:l,dropEvent:u}=n,{commands:d,chain:h,can:p}=new Ah({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,s,(v,w)=>{if(!v.isTextblock||v.type.spec.code)return;const S=Math.max(r,w),C=Math.min(s,w+v.content.size),T=v.textBetween(S-w,C-w,void 0,"");Pj(T,o.find,l).forEach(R=>{if(R.index===void 0)return;const A=S+R.index+1,L=A+R[0].length,I={from:t.tr.mapping.map(A),to:t.tr.mapping.map(L)},H=o.handler({state:t,range:I,match:R,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(H)})}),m.every(v=>v!==null)}let Pd=null;const Fj=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function Gj(n){const{editor:e,rules:t}=n;let r=null,s=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:x,rule:v,pasteEvt:w})=>{const S=p.tr,C=kh({state:p,transaction:S});if(!(!Vj({editor:e,state:C,from:Math.max(m-1,0),to:x.b-1,rule:v,pasteEvent:w,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new Wt({view(m){const x=w=>{var S;r=!((S=m.dom.parentElement)===null||S===void 0)&&S.contains(w.target)?m.dom.parentElement:null,r&&(Pd=e)},v=()=>{Pd&&(Pd=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,x)=>{if(o=r===m.dom.parentElement,u=x,!o){const v=Pd;v!=null&&v.isEditable&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,x)=>{var v;const w=(v=x.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return l=x,s=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(m,x,v)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!s,C=w.getMeta("uiEvent")==="drop"&&!o,T=w.getMeta("applyPasteRules"),j=!!T;if(!S&&!C&&!j)return;if(j){let{text:L}=T;typeof L=="string"?L=L:L=hy(le.from(L),v.schema);const{from:I}=T,H=I+L.length,W=Fj(L);return d({rule:p,state:v,from:I,to:{b:H},pasteEvt:W})}const R=x.doc.content.findDiffStart(v.doc.content),A=x.doc.content.findDiffEnd(v.doc.content);if(!(!$j(R)||!A||R===A.b))return d({rule:p,state:v,from:R,to:A,pasteEvt:l})}}))}function Kj(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Xa{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Xa.resolve(e),this.schema=Bj(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Xa.sort(Xa.flatten(e)),r=Kj(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=Me(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=Me(r,"priority")||100,l=Me(s,"priority")||100;return o>l?-1:o<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:bg(t.name,this.schema)},s=Me(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Xa.sort([...this.extensions].reverse()),r=[],s=[],o=t.map(l=>{const u={name:l.name,options:l.options,storage:l.storage,editor:e,type:bg(l.name,this.schema)},d=[],h=Me(l,"addKeyboardShortcuts",u);let p={};if(l.type==="mark"&&Me(l,"exitable",u)&&(p.ArrowRight=()=>Ni.handleExit({editor:e,mark:l})),h){const S=Object.fromEntries(Object.entries(h()).map(([C,T])=>[C,()=>T({editor:e})]));p={...p,...S}}const m=fj(p);d.push(m);const x=Me(l,"addInputRules",u);nS(l,e.options.enableInputRules)&&x&&r.push(...x());const v=Me(l,"addPasteRules",u);nS(l,e.options.enablePasteRules)&&v&&s.push(...v());const w=Me(l,"addProseMirrorPlugins",u);if(w){const S=w();d.push(...S)}return d}).flat();return[Hj({editor:e,rules:r}),...Gj({editor:e,rules:s}),...o]}get attributes(){return _C(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Mh(this.extensions);return Object.fromEntries(t.filter(r=>!!Me(r,"addNodeView")).map(r=>{const s=this.attributes.filter(d=>d.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:On(r.name,this.schema)},l=Me(r,"addNodeView",o);if(!l)return[];const u=(d,h,p,m,x)=>{const v=_f(d,s);return l()({node:d,view:h,getPos:p,decorations:m,innerDecorations:x,editor:e,extension:r,HTMLAttributes:v})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:bg(e.name,this.schema)};e.type==="mark"&&(!((t=rt(Me(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=Me(e,"onBeforeCreate",r),o=Me(e,"onCreate",r),l=Me(e,"onUpdate",r),u=Me(e,"onSelectionUpdate",r),d=Me(e,"onTransaction",r),h=Me(e,"onFocus",r),p=Me(e,"onBlur",r),m=Me(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}}class Rn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=rt(Me(this,"addOptions",{name:this.name}))),this.storage=rt(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Rn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Rh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Rn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=rt(Me(t,"addOptions",{name:t.name})),t.storage=rt(Me(t,"addStorage",{name:t.name,options:t.options})),t}}function BC(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,s,(d,h,p,m)=>{var x;d.isBlock&&h>r&&(u+=o);const v=l==null?void 0:l[d.type.name];if(v)return p&&(u+=v({node:d,pos:h,parent:p,index:m,range:e})),!1;d.isText&&(u+=(x=d==null?void 0:d.text)===null||x===void 0?void 0:x.slice(Math.max(r,h)-h,s-h))}),u}function zC(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Wj=Rn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Wt({key:new dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),d=zC(t);return BC(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),Qj=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),Yj=(n=!1)=>({commands:e})=>e.setContent("",n),Xj=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(d)),x=h.resolve(p.map(d+u.nodeSize)),v=m.blockRange(x);if(!v)return;const w=hl(v);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,S)}(w||w===0)&&e.lift(v,w)})}),!0},Jj=n=>e=>n(e),Zj=()=>({state:n,dispatch:e})=>OC(n,e),e_=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,o=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new He(r.doc.resolve(Math.max(l-1,0)))),!0},t_=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const u=s.before(o),d=s.after(o);n.delete(u,d).scrollIntoView()}return!0}return!1},n_=n=>({tr:e,state:t,dispatch:r})=>{const s=On(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===s){if(r){const d=o.before(l),h=o.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},r_=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},i_=()=>({state:n,dispatch:e})=>ly(n,e),s_=()=>({commands:n})=>n.keyboardShortcut("Enter"),o_=()=>({state:n,dispatch:e})=>bj(n,e);function Lf(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:py(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function IC(n,e,t={}){return n.find(r=>r.type===e&&Lf(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function rS(n,e,t={}){return!!IC(n,e,t)}function my(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!IC([...s.node.marks],e,t)))return;let l=s.index,u=n.start()+s.offset,d=l+1,h=u+s.node.nodeSize;for(;l>0&&rS([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;d<n.parent.childCount&&rS([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function lo(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const a_=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=lo(n,r.schema),{doc:l,selection:u}=t,{$from:d,from:h,to:p}=u;if(s){const m=my(d,o,e);if(m&&m.from<=h&&m.to>=p){const x=He.create(l,m.from,m.to);t.setSelection(x)}}return!0},l_=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function gy(n){return n instanceof He}function rs(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function HC(n,e=null){if(!e)return null;const t=Pe.atStart(n),r=Pe.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?He.create(n,rs(0,s,o),rs(n.content.size,s,o)):He.create(n,rs(e,s,o),rs(e,s,o))}function UC(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Dh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const c_=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Dh()||UC())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!gy(t.state.selection))return l(),!0;const u=HC(s.doc,n)||t.state.selection,d=t.state.selection.eq(u);return o&&(d||s.setSelection(u),d&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},u_=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),d_=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),$C=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&$C(r)}return n};function Vd(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return $C(t)}function Yc(n,e,t){if(n instanceof eo||n instanceof le)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return le.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Yc("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,u="";const d=new E2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?to.fromSchema(d).parseSlice(Vd(n),t.parseOptions):to.fromSchema(d).parse(Vd(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=to.fromSchema(e);return t.slice?o.parseSlice(Vd(n),t.parseOptions).content:o.parse(Vd(n),t.parseOptions)}return Yc("",e,t)}function f_(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof Nn||s instanceof An))return;const o=n.mapping.maps[r];let l=0;o.forEach((u,d,h,p)=>{l===0&&(l=p)}),n.setSelection(Pe.near(n.doc.resolve(l),t))}const h_=n=>!("type"in n),p_=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{var l;if(s){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const d=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Yc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(C){d(C)}try{u=Yc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck})}catch(C){return d(C),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},x=!0,v=!0;if((h_(u)?u:[u]).forEach(C=>{C.check(),x=x?C.isText&&C.marks.length===0:!1,v=v?C.isBlock:!1}),p===m&&v){const{parent:C}=r.doc.resolve(p);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(p-=1,m+=1)}let S;if(x){if(Array.isArray(e))S=e.map(C=>C.text||"").join("");else if(e instanceof le){let C="";e.forEach(T=>{T.text&&(C+=T.text)}),S=C}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else S=u,r.replaceWith(p,m,S);t.updateSelection&&f_(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},m_=()=>({state:n,dispatch:e})=>mj(n,e),g_=()=>({state:n,dispatch:e})=>gj(n,e),y_=()=>({state:n,dispatch:e})=>EC(n,e),b_=()=>({state:n,dispatch:e})=>kC(n,e),x_=()=>({state:n,dispatch:e,tr:t})=>{try{const r=wh(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},v_=()=>({state:n,dispatch:e,tr:t})=>{try{const r=wh(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},w_=()=>({state:n,dispatch:e})=>hj(n,e),S_=()=>({state:n,dispatch:e})=>pj(n,e);function qC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function E_(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Dh()||qC()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const C_=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=E_(n).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return d==null||d.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function Xc(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,l=e?On(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(m,x)=>{if(m.isText)return;const v=Math.max(r,x),w=Math.min(s,x+m.nodeSize);u.push({node:m,from:v,to:w})});const d=s-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>Lf(m.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((m,x)=>m+x.to-x.from,0)>=d}const N_=(n,e={})=>({state:t,dispatch:r})=>{const s=On(n,t.schema);return Xc(t,s,e)?yj(t,r):!1},T_=()=>({state:n,dispatch:e})=>RC(n,e),k_=n=>({state:e,dispatch:t})=>{const r=On(n,e.schema);return Mj(r)(e,t)},A_=()=>({state:n,dispatch:e})=>MC(n,e);function jh(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function iS(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const M_=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=jh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=On(n,r.schema)),u==="mark"&&(l=lo(n,r.schema)),s&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,p)=>{o&&o===h.type&&t.setNodeMarkup(p,void 0,iS(h.attrs,e)),l&&h.marks.length&&h.marks.forEach(m=>{l===m.type&&t.addMark(p,p+h.nodeSize,l.create(iS(m.attrs,e)))})})}),!0):!1},O_=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),R_=()=>({tr:n,dispatch:e})=>{if(e){const t=new Or(n.doc);n.setSelection(t)}return!0},D_=()=>({state:n,dispatch:e})=>NC(n,e),j_=()=>({state:n,dispatch:e})=>AC(n,e),__=()=>({state:n,dispatch:e})=>wj(n,e),L_=()=>({state:n,dispatch:e})=>Cj(n,e),B_=()=>({state:n,dispatch:e})=>Ej(n,e);function d0(n,e,t={},r={}){return Yc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const z_=(n,e=!1,t={},r={})=>({editor:s,tr:o,dispatch:l,commands:u})=>{var d,h;const{doc:p}=o;if(t.preserveWhitespace!=="full"){const m=d0(n,s.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck});return l&&o.replaceWith(0,p.content.size,m).setMeta("preventUpdate",!e),!0}return l&&o.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:s.options.enableContentCheck})};function PC(n,e){const t=lo(e,n.schema),{from:r,to:s,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===t.name);return u?{...u.attrs}:{}}function I_(n,e){const t=new Y0(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function yy(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Fo(n,e){const t=[];return n.descendants((r,s)=>{e(r)&&t.push({node:r,pos:s})}),t}function H_(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,o)=>{t(s)&&r.push({node:s,pos:o})}),r}function VC(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function pl(n){return e=>VC(e.$from,n)}function U_(n,e){const t={from:0,to:n.content.size};return BC(n,t,e)}function $_(n,e){const t=On(e,n.schema),{from:r,to:s}=n.selection,o=[];n.doc.nodesBetween(r,s,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function FC(n,e){const t=jh(typeof e=="string"?e:e.name,n.schema);return t==="node"?$_(n,e):t==="mark"?PC(n,e):{}}function q_(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function P_(n){const e=q_(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,l)=>l!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function V_(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,o)=>{const l=[];if(s.ranges.length)s.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=t[o];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(d),m=e.invert().map(h,-1),x=e.invert().map(p);r.push({oldRange:{from:m,to:x},newRange:{from:h,to:p}})})}),P_(r)}function by(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const o=t.resolve(n),l=my(o,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(l=>({from:o,to:o+s.nodeSize,mark:l})))}),r}function cf(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function f0(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?lo(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>Lf(m.attrs,t,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:m,$to:x})=>{const v=m.pos,w=x.pos;n.doc.nodesBetween(v,w,(S,C)=>{if(!S.isText&&!S.marks.length)return;const T=Math.max(v,C),j=Math.min(w,C+S.nodeSize),R=j-T;l+=R,u.push(...S.marks.map(A=>({mark:A,from:T,to:j})))})}),l===0)return!1;const d=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>Lf(m.mark.attrs,t,{strict:!1})).reduce((m,x)=>m+x.to-x.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,x)=>m+x.to-x.from,0);return(d>0?d+h:d)>=l}function GC(n,e,t={}){if(!e)return Xc(n,null,t)||f0(n,null,t);const r=jh(e,n.schema);return r==="node"?Xc(n,e,t):r==="mark"?f0(n,e,t):!1}function sS(n,e){const{nodeExtensions:t}=Mh(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=rt(Me(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function _h(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(o=>{s!==!1&&(_h(o,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function KC(n){return n instanceof Be}function F_(n,e,t){const s=n.state.doc.content.size,o=rs(e,0,s),l=rs(t,0,s),u=n.coordsAtPos(o),d=n.coordsAtPos(l,-1),h=Math.min(u.top,d.top),p=Math.max(u.bottom,d.bottom),m=Math.min(u.left,d.left),x=Math.max(u.right,d.right),v=x-m,w=p-h,T={top:h,bottom:p,left:m,right:x,width:v,height:w,x:m,y:h};return{...T,toJSON:()=>T}}function G_(n,e,t){var r;const{selection:s}=e;let o=null;if(gy(s)&&(o=s.$cursor),o){const u=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(u)||!u.some(d=>d.type.excludes(t))}const{ranges:l}=s;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,d.pos,(p,m,x)=>{if(h)return!1;if(p.isInline){const v=!x||x.type.allowsMarkType(t),w=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));h=v&&w}return!h}),h})}const K_=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:l,ranges:u}=o,d=lo(n,r.schema);if(s)if(l){const h=PC(r,d);t.addStoredMark(d.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(x,v)=>{const w=Math.max(v,p),S=Math.min(v+x.nodeSize,m);x.marks.find(T=>T.type===d)?x.marks.forEach(T=>{d===T.type&&t.addMark(w,S,d.create({...T.attrs,...e}))}):t.addMark(w,S,d.create(e))})});return G_(r,t,d)},W_=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Q_=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=On(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:u})=>Zw(o,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>Zw(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Y_=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=rs(n,0,r.content.size),o=Be.create(r,s);e.setSelection(o)}return!0},X_=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,l=He.atStart(r).from,u=He.atEnd(r).to,d=rs(s,l,u),h=rs(o,l,u),p=He.create(r,d,h);e.setSelection(p)}return!0},J_=n=>({state:e,dispatch:t})=>{const r=On(n,e.schema);return Dj(r)(e,t)};function oS(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const Z_=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:l}=e,{$from:u,$to:d}=o,h=s.extensionManager.attributes,p=cf(h,u.node().type.name,u.node().attrs);if(o instanceof Be&&o.node.isBlock)return!u.parentOffset||!ss(l,u.pos)?!1:(r&&(n&&oS(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,x=u.depth===0?void 0:yy(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&x?[{type:x,attrs:p}]:void 0,w=ss(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!w&&ss(e.doc,e.mapping.map(u.pos),1,x?[{type:x}]:void 0)&&(w=!0,v=x?[{type:x,attrs:p}]:void 0),r){if(w&&(o instanceof He&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),x&&!m&&!u.parentOffset&&u.parent.type!==x)){const S=e.mapping.map(u.before()),C=e.doc.resolve(S);u.node(-1).canReplaceWith(C.index(),C.index()+1,x)&&e.setNodeMarkup(e.mapping.map(u.before()),x)}n&&oS(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return w},eL=(n,e={})=>({tr:t,state:r,dispatch:s,editor:o})=>{var l;const u=On(n,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==u)return!1;const x=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(s){let T=le.empty;const j=d.index(-1)?1:d.index(-2)?2:3;for(let W=d.depth-j;W>=d.depth-3;W-=1)T=le.from(d.node(W).copy(T));const R=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,A={...cf(x,d.node().type.name,d.node().attrs),...e},L=((l=u.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(A))||void 0;T=T.append(le.from(u.createAndFill(null,L)||void 0));const I=d.before(d.depth-(j-1));t.replace(I,d.after(-R),new ve(T,4-j,0));let H=-1;t.doc.nodesBetween(I,t.doc.content.size,(W,re)=>{if(H>-1)return!1;W.isTextblock&&W.content.size===0&&(H=re+1)}),H>-1&&t.setSelection(He.near(t.doc.resolve(H))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...cf(x,m.type.name,m.attrs),...e},S={...cf(x,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const C=v?[{type:u,attrs:w},{type:v,attrs:S}]:[{type:u,attrs:w}];if(!ss(t.doc,d.pos,2))return!1;if(s){const{selection:T,storedMarks:j}=r,{splittableMarks:R}=o.extensionManager,A=j||T.$to.parentOffset&&T.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!A||!s)return!0;const L=A.filter(I=>R.includes(I.type.name));t.ensureMarks(L)}return!0},xg=(n,e)=>{const t=pl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&oo(n.doc,t.pos)&&n.join(t.pos),!0},vg=(n,e)=>{const t=pl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&oo(n.doc,r)&&n.join(r),!0},tL=(n,e,t,r={})=>({editor:s,tr:o,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:x}=s.extensionManager,v=On(n,l.schema),w=On(e,l.schema),{selection:S,storedMarks:C}=l,{$from:T,$to:j}=S,R=T.blockRange(j),A=C||S.$to.parentOffset&&S.$from.marks();if(!R)return!1;const L=pl(I=>sS(I.type.name,m))(S);if(R.depth>=1&&L&&R.depth-L.depth<=1){if(L.node.type===v)return h.liftListItem(w);if(sS(L.node.type.name,m)&&v.validContent(L.node.content)&&u)return d().command(()=>(o.setNodeMarkup(L.pos,v),!0)).command(()=>xg(o,v)).command(()=>vg(o,v)).run()}return!t||!A||!u?d().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>xg(o,v)).command(()=>vg(o,v)).run():d().command(()=>{const I=p().wrapInList(v,r),H=A.filter(W=>x.includes(W.type.name));return o.ensureMarks(H),I?!0:h.clearNodes()}).wrapInList(v,r).command(()=>xg(o,v)).command(()=>vg(o,v)).run()},nL=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,l=lo(n,r.schema);return f0(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:o}):s.setMark(l,e)},rL=(n,e,t={})=>({state:r,commands:s})=>{const o=On(n,r.schema),l=On(e,r.schema),u=Xc(r,o,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?s.setNode(l,d):s.setNode(o,{...d,...t})},iL=(n,e={})=>({state:t,commands:r})=>{const s=On(n,t.schema);return Xc(t,s,e)?r.lift(s):r.wrapIn(s,e)},sL=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const l=n.tr,u=o.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},oL=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},aL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,d=lo(n,r.schema),{$from:h,empty:p,ranges:m}=u;if(!s)return!0;if(p&&l){let{from:x,to:v}=u;const w=(o=h.marks().find(C=>C.type===d))===null||o===void 0?void 0:o.attrs,S=my(h,d,w);S&&(x=S.from,v=S.to),t.removeMark(x,v,d)}else m.forEach(x=>{t.removeMark(x.$from.pos,x.$to.pos,d)});return t.removeStoredMark(d),!0},lL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=jh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=On(n,r.schema)),u==="mark"&&(l=lo(n,r.schema)),s&&t.selection.ranges.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;let m,x,v,w;t.selection.empty?r.doc.nodesBetween(h,p,(S,C)=>{o&&o===S.type&&(v=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,x=S)}):r.doc.nodesBetween(h,p,(S,C)=>{C<h&&o&&o===S.type&&(v=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,x=S),C>=h&&C<=p&&(o&&o===S.type&&t.setNodeMarkup(C,void 0,{...S.attrs,...e}),l&&S.marks.length&&S.marks.forEach(T=>{if(l===T.type){const j=Math.max(C,h),R=Math.min(C+S.nodeSize,p);t.addMark(j,R,l.create({...T.attrs,...e}))}}))}),x&&(m!==void 0&&t.setNodeMarkup(m,void 0,{...x.attrs,...e}),l&&x.marks.length&&x.marks.forEach(S=>{l===S.type&&t.addMark(v,w,l.create({...S.attrs,...e}))}))}),!0):!1},cL=(n,e={})=>({state:t,dispatch:r})=>{const s=On(n,t.schema);return Nj(s,e)(t,r)},uL=(n,e={})=>({state:t,dispatch:r})=>{const s=On(n,t.schema);return Tj(s,e)(t,r)};var dL=Object.freeze({__proto__:null,blur:Qj,clearContent:Yj,clearNodes:Xj,command:Jj,createParagraphNear:Zj,cut:e_,deleteCurrentNode:t_,deleteNode:n_,deleteRange:r_,deleteSelection:i_,enter:s_,exitCode:o_,extendMarkRange:a_,first:l_,focus:c_,forEach:u_,insertContent:d_,insertContentAt:p_,joinBackward:y_,joinDown:g_,joinForward:b_,joinItemBackward:x_,joinItemForward:v_,joinTextblockBackward:w_,joinTextblockForward:S_,joinUp:m_,keyboardShortcut:C_,lift:N_,liftEmptyBlock:T_,liftListItem:k_,newlineInCode:A_,resetAttributes:M_,scrollIntoView:O_,selectAll:R_,selectNodeBackward:D_,selectNodeForward:j_,selectParentNode:__,selectTextblockEnd:L_,selectTextblockStart:B_,setContent:z_,setMark:K_,setMeta:W_,setNode:Q_,setNodeSelection:Y_,setTextSelection:X_,sinkListItem:J_,splitBlock:Z_,splitListItem:eL,toggleList:tL,toggleMark:nL,toggleNode:rL,toggleWrap:iL,undoInputRule:sL,unsetAllMarks:oL,unsetMark:aL,updateAttributes:lL,wrapIn:cL,wrapInList:uL});const fL=Rn.create({name:"commands",addCommands(){return{...dL}}}),hL=Rn.create({name:"drop",addProseMirrorPlugins(){return[new Wt({key:new dn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),pL=Rn.create({name:"editable",addProseMirrorPlugins(){return[new Wt({key:new dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mL=new dn("focusEvents"),gL=Rn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Wt({key:mL,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),yL=Rn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:m}=d,{pos:x,parent:v}=m,w=m.parent.isTextblock&&x>0?u.doc.resolve(x-1):m,S=w.parent.type.spec.isolating,C=m.pos-m.parentOffset,T=S&&w.parent.childCount===1?C===m.pos:Pe.atStart(h).from===x;return!p||!v.type.isTextblock||v.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Dh()||qC()?o:s},addProseMirrorPlugins(){return[new Wt({key:new dn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),s=n.some(S=>S.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:l,to:u}=e.selection,d=Pe.atStart(e.doc).from,h=Pe.atEnd(e.doc).to;if(o||!(l===d&&u===h)||!_h(t.doc))return;const x=t.tr,v=kh({state:t,transaction:x}),{commands:w}=new Ah({editor:this.editor,state:v});if(w.clearNodes(),!!x.steps.length)return x}})]}}),bL=Rn.create({name:"paste",addProseMirrorPlugins(){return[new Wt({key:new dn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),xL=Rn.create({name:"tabindex",addProseMirrorPlugins(){return[new Wt({key:new dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Lo{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Lo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Lo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Lo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!s&&u.depth<=this.depth)return;const d=new Lo(u,this.editor,s,s?t:null);s&&(d.actualDepth=this.depth+1),e.push(new Lo(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const o=s.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const d=l[u];if(o[d]!==t[d])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&o.every(d=>t[d]===l.node.attrs[d])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const vL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function wL(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class SL extends jj{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=wL(vL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=LC(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const l=typeof o=="string"?`${o}$`:o.key;r=r.filter(u=>!u.key.startsWith(l))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[pL,Wj.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),fL,gL,yL,xL,hL,bL].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Xa(s,this)}createCommandManager(){this.commandManager=new Ah({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=d0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=d0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=HC(t,this.options.autofocus);this.view=new wC(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ya.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(l)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return FC(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return GC(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return hy(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return U_(this.state.doc,{blockSeparator:t,textSerializers:{...zC(this.schema),...r}})}get isEmpty(){return _h(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Lo(t,this)}get $doc(){return this.$pos(0)}}function sl(n){return new Oh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=rt(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),h=t.from+u.indexOf(l),p=h+l.length;if(by(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===n.type&&S!==v.mark.type)).filter(v=>v.to>h).length)return null;p<t.to&&o.delete(p,t.to),h>t.from&&o.delete(t.from+d,h);const x=t.from+d+l.length;o.addMark(t.from+d,x,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function WC(n){return new Oh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=rt(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let u=t.to;const d=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,d)}else if(r[0]){const h=n.type.isInline?l:l-1;o.insert(h,n.type.create(s)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()}})}function h0(n){return new Oh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),o=rt(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function Jc(n){return new Oh({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const o=rt(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),d=l.doc.resolve(t.from).blockRange(),h=d&&Q0(d,n.type,o);if(!h)return null;if(l.wrap(d,h),n.keepMarks&&n.editor){const{selection:m,storedMarks:x}=e,{splittableMarks:v}=n.editor.extensionManager,w=x||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(C=>v.includes(C.type.name));l.ensureMarks(S)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,o).run()}const p=l.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&oo(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&l.join(t.from-1)}})}class Kt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=rt(Me(this,"addOptions",{name:this.name}))),this.storage=rt(Me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Kt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Rh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Kt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=rt(Me(t,"addOptions",{name:t.name})),t.storage=rt(Me(t,"addStorage",{name:t.name,options:t.options})),t}}class EL{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,s,o,l,u,d;const{view:h}=this.editor,p=e.target,m=p.nodeType===3?(t=p.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):p.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(p)||!m)return;let x=0,v=0;if(this.dom!==m){const j=this.dom.getBoundingClientRect(),R=m.getBoundingClientRect(),A=(s=e.offsetX)!==null&&s!==void 0?s:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,L=(l=e.offsetY)!==null&&l!==void 0?l:(u=e.nativeEvent)===null||u===void 0?void 0:u.offsetY;x=R.x-j.x+A,v=R.y-j.y+L}const w=this.dom.cloneNode(!0);(d=e.dataTransfer)===null||d===void 0||d.setDragImage(w,x,v);const S=this.getPos();if(typeof S!="number")return;const C=Be.create(h.state.doc,S),T=h.state.tr.setSelection(C);h.dispatch(T)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(r))))return!1;const o=e.type.startsWith("drag"),l=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!l&&!o)return!0;const{isEditable:d}=this.editor,{isDragging:h}=this,p=!!this.node.type.spec.draggable,m=Be.isSelectable(this.node),x=e.type==="copy",v=e.type==="paste",w=e.type==="cut",S=e.type==="mousedown";if(!p&&m&&o&&e.target===this.dom&&e.preventDefault(),p&&o&&!h&&e.target===this.dom)return e.preventDefault(),!1;if(p&&d&&!h&&S){const C=r.closest("[data-drag-handle]");C&&(this.dom===C||this.dom.contains(C))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(h||l||x||v||w||S&&m)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Dh()||UC())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function Zo(n){return new qj({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const o=rt(n.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let h=t.to;if(u){const p=d.search(/\S/),m=t.from+d.indexOf(u),x=m+u.length;if(by(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(C=>C===n.type&&C!==w.mark.type)).filter(w=>w.to>m).length)return null;x<t.to&&l.delete(x,t.to),m>t.from&&l.delete(t.from+p,m),h=t.from+p+u.length,l.addMark(t.from+p,h,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function CL(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof Be){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}function NL(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var pr="top",Xr="bottom",Jr="right",mr="left",xy="auto",fu=[pr,Xr,Jr,mr],ol="start",Zc="end",TL="clippingParents",QC="viewport",pc="popper",kL="reference",aS=fu.reduce(function(n,e){return n.concat([e+"-"+ol,e+"-"+Zc])},[]),YC=[].concat(fu,[xy]).reduce(function(n,e){return n.concat([e,e+"-"+ol,e+"-"+Zc])},[]),AL="beforeRead",ML="read",OL="afterRead",RL="beforeMain",DL="main",jL="afterMain",_L="beforeWrite",LL="write",BL="afterWrite",zL=[AL,ML,OL,RL,DL,jL,_L,LL,BL];function Ti(n){return n?(n.nodeName||"").toLowerCase():null}function Rr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function ea(n){var e=Rr(n).Element;return n instanceof e||n instanceof Element}function Yr(n){var e=Rr(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function vy(n){if(typeof ShadowRoot>"u")return!1;var e=Rr(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function IL(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},o=e.elements[t];!Yr(o)||!Ti(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(l){var u=s[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function HL(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),u=l.reduce(function(d,h){return d[h]="",d},{});!Yr(s)||!Ti(s)||(Object.assign(s.style,u),Object.keys(o).forEach(function(d){s.removeAttribute(d)}))})}}const XC={name:"applyStyles",enabled:!0,phase:"write",fn:IL,effect:HL,requires:["computeStyles"]};function Si(n){return n.split("-")[0]}var Go=Math.max,Bf=Math.min,al=Math.round;function p0(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function JC(){return!/^((?!chrome|android).)*safari/i.test(p0())}function ll(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&Yr(n)&&(s=n.offsetWidth>0&&al(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&al(r.height)/n.offsetHeight||1);var l=ea(n)?Rr(n):window,u=l.visualViewport,d=!JC()&&t,h=(r.left+(d&&u?u.offsetLeft:0))/s,p=(r.top+(d&&u?u.offsetTop:0))/o,m=r.width/s,x=r.height/o;return{width:m,height:x,top:p,right:h+m,bottom:p+x,left:h,x:h,y:p}}function wy(n){var e=ll(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function ZC(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&vy(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function cs(n){return Rr(n).getComputedStyle(n)}function UL(n){return["table","td","th"].indexOf(Ti(n))>=0}function co(n){return((ea(n)?n.ownerDocument:n.document)||window.document).documentElement}function Lh(n){return Ti(n)==="html"?n:n.assignedSlot||n.parentNode||(vy(n)?n.host:null)||co(n)}function lS(n){return!Yr(n)||cs(n).position==="fixed"?null:n.offsetParent}function $L(n){var e=/firefox/i.test(p0()),t=/Trident/i.test(p0());if(t&&Yr(n)){var r=cs(n);if(r.position==="fixed")return null}var s=Lh(n);for(vy(s)&&(s=s.host);Yr(s)&&["html","body"].indexOf(Ti(s))<0;){var o=cs(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function hu(n){for(var e=Rr(n),t=lS(n);t&&UL(t)&&cs(t).position==="static";)t=lS(t);return t&&(Ti(t)==="html"||Ti(t)==="body"&&cs(t).position==="static")?e:t||$L(n)||e}function Sy(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Ac(n,e,t){return Go(n,Bf(e,t))}function qL(n,e,t){var r=Ac(n,e,t);return r>t?t:r}function eN(){return{top:0,right:0,bottom:0,left:0}}function tN(n){return Object.assign({},eN(),n)}function nN(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var PL=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,tN(typeof e!="number"?e:nN(e,fu))};function VL(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,u=Si(t.placement),d=Sy(u),h=[mr,Jr].indexOf(u)>=0,p=h?"height":"width";if(!(!o||!l)){var m=PL(s.padding,t),x=wy(o),v=d==="y"?pr:mr,w=d==="y"?Xr:Jr,S=t.rects.reference[p]+t.rects.reference[d]-l[d]-t.rects.popper[p],C=l[d]-t.rects.reference[d],T=hu(o),j=T?d==="y"?T.clientHeight||0:T.clientWidth||0:0,R=S/2-C/2,A=m[v],L=j-x[p]-m[w],I=j/2-x[p]/2+R,H=Ac(A,I,L),W=d;t.modifiersData[r]=(e={},e[W]=H,e.centerOffset=H-I,e)}}function FL(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||ZC(e.elements.popper,s)&&(e.elements.arrow=s))}const GL={name:"arrow",enabled:!0,phase:"main",fn:VL,effect:FL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cl(n){return n.split("-")[1]}var KL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function WL(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:al(t*s)/s||0,y:al(r*s)/s||0}}function cS(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,u=n.position,d=n.gpuAcceleration,h=n.adaptive,p=n.roundOffsets,m=n.isFixed,x=l.x,v=x===void 0?0:x,w=l.y,S=w===void 0?0:w,C=typeof p=="function"?p({x:v,y:S}):{x:v,y:S};v=C.x,S=C.y;var T=l.hasOwnProperty("x"),j=l.hasOwnProperty("y"),R=mr,A=pr,L=window;if(h){var I=hu(t),H="clientHeight",W="clientWidth";if(I===Rr(t)&&(I=co(t),cs(I).position!=="static"&&u==="absolute"&&(H="scrollHeight",W="scrollWidth")),I=I,s===pr||(s===mr||s===Jr)&&o===Zc){A=Xr;var re=m&&I===L&&L.visualViewport?L.visualViewport.height:I[H];S-=re-r.height,S*=d?1:-1}if(s===mr||(s===pr||s===Xr)&&o===Zc){R=Jr;var me=m&&I===L&&L.visualViewport?L.visualViewport.width:I[W];v-=me-r.width,v*=d?1:-1}}var xe=Object.assign({position:u},h&&KL),q=p===!0?WL({x:v,y:S},Rr(t)):{x:v,y:S};if(v=q.x,S=q.y,d){var ie;return Object.assign({},xe,(ie={},ie[A]=j?"0":"",ie[R]=T?"0":"",ie.transform=(L.devicePixelRatio||1)<=1?"translate("+v+"px, "+S+"px)":"translate3d("+v+"px, "+S+"px, 0)",ie))}return Object.assign({},xe,(e={},e[A]=j?S+"px":"",e[R]=T?v+"px":"",e.transform="",e))}function QL(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,u=t.roundOffsets,d=u===void 0?!0:u,h={placement:Si(e.placement),variation:cl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,cS(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,cS(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const YL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:QL,data:{}};var Fd={passive:!0};function XL(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,u=l===void 0?!0:l,d=Rr(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(p){p.addEventListener("scroll",t.update,Fd)}),u&&d.addEventListener("resize",t.update,Fd),function(){o&&h.forEach(function(p){p.removeEventListener("scroll",t.update,Fd)}),u&&d.removeEventListener("resize",t.update,Fd)}}const JL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:XL,data:{}};var ZL={left:"right",right:"left",bottom:"top",top:"bottom"};function uf(n){return n.replace(/left|right|bottom|top/g,function(e){return ZL[e]})}var e6={start:"end",end:"start"};function uS(n){return n.replace(/start|end/g,function(e){return e6[e]})}function Ey(n){var e=Rr(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Cy(n){return ll(co(n)).left+Ey(n).scrollLeft}function t6(n,e){var t=Rr(n),r=co(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;var h=JC();(h||!h&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}return{width:o,height:l,x:u+Cy(n),y:d}}function n6(n){var e,t=co(n),r=Ey(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=Go(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Go(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-r.scrollLeft+Cy(n),d=-r.scrollTop;return cs(s||t).direction==="rtl"&&(u+=Go(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:u,y:d}}function Ny(n){var e=cs(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function rN(n){return["html","body","#document"].indexOf(Ti(n))>=0?n.ownerDocument.body:Yr(n)&&Ny(n)?n:rN(Lh(n))}function Mc(n,e){var t;e===void 0&&(e=[]);var r=rN(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Rr(r),l=s?[o].concat(o.visualViewport||[],Ny(r)?r:[]):r,u=e.concat(l);return s?u:u.concat(Mc(Lh(l)))}function m0(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function r6(n,e){var t=ll(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function dS(n,e,t){return e===QC?m0(t6(n,t)):ea(e)?r6(e,t):m0(n6(co(n)))}function i6(n){var e=Mc(Lh(n)),t=["absolute","fixed"].indexOf(cs(n).position)>=0,r=t&&Yr(n)?hu(n):n;return ea(r)?e.filter(function(s){return ea(s)&&ZC(s,r)&&Ti(s)!=="body"}):[]}function s6(n,e,t,r){var s=e==="clippingParents"?i6(n):[].concat(e),o=[].concat(s,[t]),l=o[0],u=o.reduce(function(d,h){var p=dS(n,h,r);return d.top=Go(p.top,d.top),d.right=Bf(p.right,d.right),d.bottom=Bf(p.bottom,d.bottom),d.left=Go(p.left,d.left),d},dS(n,l,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function iN(n){var e=n.reference,t=n.element,r=n.placement,s=r?Si(r):null,o=r?cl(r):null,l=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,d;switch(s){case pr:d={x:l,y:e.y-t.height};break;case Xr:d={x:l,y:e.y+e.height};break;case Jr:d={x:e.x+e.width,y:u};break;case mr:d={x:e.x-t.width,y:u};break;default:d={x:e.x,y:e.y}}var h=s?Sy(s):null;if(h!=null){var p=h==="y"?"height":"width";switch(o){case ol:d[h]=d[h]-(e[p]/2-t[p]/2);break;case Zc:d[h]=d[h]+(e[p]/2-t[p]/2);break}}return d}function eu(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,u=t.boundary,d=u===void 0?TL:u,h=t.rootBoundary,p=h===void 0?QC:h,m=t.elementContext,x=m===void 0?pc:m,v=t.altBoundary,w=v===void 0?!1:v,S=t.padding,C=S===void 0?0:S,T=tN(typeof C!="number"?C:nN(C,fu)),j=x===pc?kL:pc,R=n.rects.popper,A=n.elements[w?j:x],L=s6(ea(A)?A:A.contextElement||co(n.elements.popper),d,p,l),I=ll(n.elements.reference),H=iN({reference:I,element:R,placement:s}),W=m0(Object.assign({},R,H)),re=x===pc?W:I,me={top:L.top-re.top+T.top,bottom:re.bottom-L.bottom+T.bottom,left:L.left-re.left+T.left,right:re.right-L.right+T.right},xe=n.modifiersData.offset;if(x===pc&&xe){var q=xe[s];Object.keys(me).forEach(function(ie){var te=[Jr,Xr].indexOf(ie)>=0?1:-1,he=[pr,Xr].indexOf(ie)>=0?"y":"x";me[ie]+=q[he]*te})}return me}function o6(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,u=t.flipVariations,d=t.allowedAutoPlacements,h=d===void 0?YC:d,p=cl(r),m=p?u?aS:aS.filter(function(w){return cl(w)===p}):fu,x=m.filter(function(w){return h.indexOf(w)>=0});x.length===0&&(x=m);var v=x.reduce(function(w,S){return w[S]=eu(n,{placement:S,boundary:s,rootBoundary:o,padding:l})[Si(S)],w},{});return Object.keys(v).sort(function(w,S){return v[w]-v[S]})}function a6(n){if(Si(n)===xy)return[];var e=uf(n);return[uS(n),e,uS(e)]}function l6(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!0:l,d=t.fallbackPlacements,h=t.padding,p=t.boundary,m=t.rootBoundary,x=t.altBoundary,v=t.flipVariations,w=v===void 0?!0:v,S=t.allowedAutoPlacements,C=e.options.placement,T=Si(C),j=T===C,R=d||(j||!w?[uf(C)]:a6(C)),A=[C].concat(R).reduce(function(ce,fe){return ce.concat(Si(fe)===xy?o6(e,{placement:fe,boundary:p,rootBoundary:m,padding:h,flipVariations:w,allowedAutoPlacements:S}):fe)},[]),L=e.rects.reference,I=e.rects.popper,H=new Map,W=!0,re=A[0],me=0;me<A.length;me++){var xe=A[me],q=Si(xe),ie=cl(xe)===ol,te=[pr,Xr].indexOf(q)>=0,he=te?"width":"height",B=eu(e,{placement:xe,boundary:p,rootBoundary:m,altBoundary:x,padding:h}),D=te?ie?Jr:mr:ie?Xr:pr;L[he]>I[he]&&(D=uf(D));var U=uf(D),se=[];if(o&&se.push(B[q]<=0),u&&se.push(B[D]<=0,B[U]<=0),se.every(function(ce){return ce})){re=xe,W=!1;break}H.set(xe,se)}if(W)for(var ue=w?3:1,O=function(fe){var we=A.find(function(Ue){var ae=H.get(Ue);if(ae)return ae.slice(0,fe).every(function($e){return $e})});if(we)return re=we,"break"},V=ue;V>0;V--){var Y=O(V);if(Y==="break")break}e.placement!==re&&(e.modifiersData[r]._skip=!0,e.placement=re,e.reset=!0)}}const c6={name:"flip",enabled:!0,phase:"main",fn:l6,requiresIfExists:["offset"],data:{_skip:!1}};function fS(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function hS(n){return[pr,Jr,Xr,mr].some(function(e){return n[e]>=0})}function u6(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=eu(e,{elementContext:"reference"}),u=eu(e,{altBoundary:!0}),d=fS(l,r),h=fS(u,s,o),p=hS(d),m=hS(h);e.modifiersData[t]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const d6={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:u6};function f6(n,e,t){var r=Si(n),s=[mr,pr].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],u=o[1];return l=l||0,u=(u||0)*s,[mr,Jr].indexOf(r)>=0?{x:u,y:l}:{x:l,y:u}}function h6(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=YC.reduce(function(p,m){return p[m]=f6(m,e.rects,o),p},{}),u=l[e.placement],d=u.x,h=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=l}const p6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:h6};function m6(n){var e=n.state,t=n.name;e.modifiersData[t]=iN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const g6={name:"popperOffsets",enabled:!0,phase:"read",fn:m6,data:{}};function y6(n){return n==="x"?"y":"x"}function b6(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!1:l,d=t.boundary,h=t.rootBoundary,p=t.altBoundary,m=t.padding,x=t.tether,v=x===void 0?!0:x,w=t.tetherOffset,S=w===void 0?0:w,C=eu(e,{boundary:d,rootBoundary:h,padding:m,altBoundary:p}),T=Si(e.placement),j=cl(e.placement),R=!j,A=Sy(T),L=y6(A),I=e.modifiersData.popperOffsets,H=e.rects.reference,W=e.rects.popper,re=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,me=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),xe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,q={x:0,y:0};if(I){if(o){var ie,te=A==="y"?pr:mr,he=A==="y"?Xr:Jr,B=A==="y"?"height":"width",D=I[A],U=D+C[te],se=D-C[he],ue=v?-W[B]/2:0,O=j===ol?H[B]:W[B],V=j===ol?-W[B]:-H[B],Y=e.elements.arrow,ce=v&&Y?wy(Y):{width:0,height:0},fe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:eN(),we=fe[te],Ue=fe[he],ae=Ac(0,H[B],ce[B]),$e=R?H[B]/2-ue-ae-we-me.mainAxis:O-ae-we-me.mainAxis,pt=R?-H[B]/2+ue+ae+Ue+me.mainAxis:V+ae+Ue+me.mainAxis,It=e.elements.arrow&&hu(e.elements.arrow),rn=It?A==="y"?It.clientTop||0:It.clientLeft||0:0,qn=(ie=xe==null?void 0:xe[A])!=null?ie:0,jt=D+$e-qn-rn,Sn=D+pt-qn,At=Ac(v?Bf(U,jt):U,D,v?Go(se,Sn):se);I[A]=At,q[A]=At-D}if(u){var sn,En=A==="x"?pr:mr,K=A==="x"?Xr:Jr,Se=I[L],We=L==="y"?"height":"width",_e=Se+C[En],st=Se-C[K],Ze=[pr,mr].indexOf(T)!==-1,vn=(sn=xe==null?void 0:xe[L])!=null?sn:0,_t=Ze?_e:Se-H[We]-W[We]-vn+me.altAxis,ye=Ze?Se+H[We]+W[We]-vn-me.altAxis:st,Ne=v&&Ze?qL(_t,Se,ye):Ac(v?_t:_e,Se,v?ye:st);I[L]=Ne,q[L]=Ne-Se}e.modifiersData[r]=q}}const x6={name:"preventOverflow",enabled:!0,phase:"main",fn:b6,requiresIfExists:["offset"]};function v6(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function w6(n){return n===Rr(n)||!Yr(n)?Ey(n):v6(n)}function S6(n){var e=n.getBoundingClientRect(),t=al(e.width)/n.offsetWidth||1,r=al(e.height)/n.offsetHeight||1;return t!==1||r!==1}function E6(n,e,t){t===void 0&&(t=!1);var r=Yr(e),s=Yr(e)&&S6(e),o=co(e),l=ll(n,s,t),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&((Ti(e)!=="body"||Ny(o))&&(u=w6(e)),Yr(e)?(d=ll(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=Cy(o))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function C6(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!t.has(u)){var d=e.get(u);d&&s(d)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function N6(n){var e=C6(n);return zL.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function T6(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function k6(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var pS={placement:"bottom",modifiers:[],strategy:"absolute"};function mS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function A6(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?pS:s;return function(u,d,h){h===void 0&&(h=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},pS,o),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],x=!1,v={state:p,setOptions:function(T){var j=typeof T=="function"?T(p.options):T;S(),p.options=Object.assign({},o,p.options,j),p.scrollParents={reference:ea(u)?Mc(u):u.contextElement?Mc(u.contextElement):[],popper:Mc(d)};var R=N6(k6([].concat(r,p.options.modifiers)));return p.orderedModifiers=R.filter(function(A){return A.enabled}),w(),v.update()},forceUpdate:function(){if(!x){var T=p.elements,j=T.reference,R=T.popper;if(mS(j,R)){p.rects={reference:E6(j,hu(R),p.options.strategy==="fixed"),popper:wy(R)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(me){return p.modifiersData[me.name]=Object.assign({},me.data)});for(var A=0;A<p.orderedModifiers.length;A++){if(p.reset===!0){p.reset=!1,A=-1;continue}var L=p.orderedModifiers[A],I=L.fn,H=L.options,W=H===void 0?{}:H,re=L.name;typeof I=="function"&&(p=I({state:p,options:W,name:re,instance:v})||p)}}}},update:T6(function(){return new Promise(function(C){v.forceUpdate(),C(p)})}),destroy:function(){S(),x=!0}};if(!mS(u,d))return v;v.setOptions(h).then(function(C){!x&&h.onFirstUpdate&&h.onFirstUpdate(C)});function w(){p.orderedModifiers.forEach(function(C){var T=C.name,j=C.options,R=j===void 0?{}:j,A=C.effect;if(typeof A=="function"){var L=A({state:p,name:T,instance:v,options:R}),I=function(){};m.push(L||I)}})}function S(){m.forEach(function(C){return C()}),m=[]}return v}}var M6=[JL,g6,YL,XC,p6,c6,x6,GL,d6],O6=A6({defaultModifiers:M6}),R6="tippy-box",sN="tippy-content",D6="tippy-backdrop",oN="tippy-arrow",aN="tippy-svg-arrow",Do={passive:!0,capture:!0},lN=function(){return document.body};function wg(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function Ty(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function cN(n,e){return typeof n=="function"?n.apply(void 0,e):n}function gS(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function j6(n){return n.split(/\s+/).filter(Boolean)}function Ka(n){return[].concat(n)}function yS(n,e){n.indexOf(e)===-1&&n.push(e)}function _6(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function L6(n){return n.split("-")[0]}function zf(n){return[].slice.call(n)}function bS(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Oc(){return document.createElement("div")}function Bh(n){return["Element","Fragment"].some(function(e){return Ty(n,e)})}function B6(n){return Ty(n,"NodeList")}function z6(n){return Ty(n,"MouseEvent")}function I6(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function H6(n){return Bh(n)?[n]:B6(n)?zf(n):Array.isArray(n)?n:zf(document.querySelectorAll(n))}function Sg(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function xS(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function U6(n){var e,t=Ka(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function $6(n,e){var t=e.clientX,r=e.clientY;return n.every(function(s){var o=s.popperRect,l=s.popperState,u=s.props,d=u.interactiveBorder,h=L6(l.placement),p=l.modifiersData.offset;if(!p)return!0;var m=h==="bottom"?p.top.y:0,x=h==="top"?p.bottom.y:0,v=h==="right"?p.left.x:0,w=h==="left"?p.right.x:0,S=o.top-r+m>d,C=r-o.bottom-x>d,T=o.left-t+v>d,j=t-o.right-w>d;return S||C||T||j})}function Eg(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){n[r](s,t)})}function vS(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var bi={isTouch:!1},wS=0;function q6(){bi.isTouch||(bi.isTouch=!0,window.performance&&document.addEventListener("mousemove",uN))}function uN(){var n=performance.now();n-wS<20&&(bi.isTouch=!1,document.removeEventListener("mousemove",uN)),wS=n}function P6(){var n=document.activeElement;if(I6(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function V6(){document.addEventListener("touchstart",q6,Do),window.addEventListener("blur",P6)}var F6=typeof window<"u"&&typeof document<"u",G6=F6?!!window.msCrypto:!1,K6={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},W6={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ii=Object.assign({appendTo:lN,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},K6,W6),Q6=Object.keys(ii),Y6=function(e){var t=Object.keys(e);t.forEach(function(r){ii[r]=e[r]})};function dN(n){var e=n.plugins||[],t=e.reduce(function(r,s){var o=s.name,l=s.defaultValue;if(o){var u;r[o]=n[o]!==void 0?n[o]:(u=ii[o])!=null?u:l}return r},{});return Object.assign({},n,t)}function X6(n,e){var t=e?Object.keys(dN(Object.assign({},ii,{plugins:e}))):Q6,r=t.reduce(function(s,o){var l=(n.getAttribute("data-tippy-"+o)||"").trim();if(!l)return s;if(o==="content")s[o]=l;else try{s[o]=JSON.parse(l)}catch{s[o]=l}return s},{});return r}function SS(n,e){var t=Object.assign({},e,{content:cN(e.content,[n])},e.ignoreAttributes?{}:X6(n,e.plugins));return t.aria=Object.assign({},ii.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var J6=function(){return"innerHTML"};function g0(n,e){n[J6()]=e}function ES(n){var e=Oc();return n===!0?e.className=oN:(e.className=aN,Bh(n)?e.appendChild(n):g0(e,n)),e}function CS(n,e){Bh(e.content)?(g0(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?g0(n,e.content):n.textContent=e.content)}function y0(n){var e=n.firstElementChild,t=zf(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(sN)}),arrow:t.find(function(r){return r.classList.contains(oN)||r.classList.contains(aN)}),backdrop:t.find(function(r){return r.classList.contains(D6)})}}function fN(n){var e=Oc(),t=Oc();t.className=R6,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Oc();r.className=sN,r.setAttribute("data-state","hidden"),CS(r,n.props),e.appendChild(t),t.appendChild(r),s(n.props,n.props);function s(o,l){var u=y0(e),d=u.box,h=u.content,p=u.arrow;l.theme?d.setAttribute("data-theme",l.theme):d.removeAttribute("data-theme"),typeof l.animation=="string"?d.setAttribute("data-animation",l.animation):d.removeAttribute("data-animation"),l.inertia?d.setAttribute("data-inertia",""):d.removeAttribute("data-inertia"),d.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?d.setAttribute("role",l.role):d.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&CS(h,n.props),l.arrow?p?o.arrow!==l.arrow&&(d.removeChild(p),d.appendChild(ES(l.arrow))):d.appendChild(ES(l.arrow)):p&&d.removeChild(p)}return{popper:e,onUpdate:s}}fN.$$tippy=!0;var Z6=1,Gd=[],Cg=[];function eB(n,e){var t=SS(n,Object.assign({},ii,dN(bS(e)))),r,s,o,l=!1,u=!1,d=!1,h=!1,p,m,x,v=[],w=gS(jt,t.interactiveDebounce),S,C=Z6++,T=null,j=_6(t.plugins),R={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},A={id:C,reference:n,popper:Oc(),popperInstance:T,props:t,state:R,plugins:j,clearDelayTimeouts:_t,setProps:ye,setContent:Ne,show:Ke,hide:Ye,hideWithInteractivity:Ht,enable:Ze,disable:vn,unmount:Xt,destroy:gr};if(!t.render)return A;var L=t.render(A),I=L.popper,H=L.onUpdate;I.setAttribute("data-tippy-root",""),I.id="tippy-"+A.id,A.popper=I,n._tippy=A,I._tippy=A;var W=j.map(function(X){return X.fn(A)}),re=n.hasAttribute("aria-expanded");return It(),ue(),D(),U("onCreate",[A]),t.showOnCreate&&_e(),I.addEventListener("mouseenter",function(){A.props.interactive&&A.state.isVisible&&A.clearDelayTimeouts()}),I.addEventListener("mouseleave",function(){A.props.interactive&&A.props.trigger.indexOf("mouseenter")>=0&&te().addEventListener("mousemove",w)}),A;function me(){var X=A.props.touch;return Array.isArray(X)?X:[X,0]}function xe(){return me()[0]==="hold"}function q(){var X;return!!((X=A.props.render)!=null&&X.$$tippy)}function ie(){return S||n}function te(){var X=ie().parentNode;return X?U6(X):document}function he(){return y0(I)}function B(X){return A.state.isMounted&&!A.state.isVisible||bi.isTouch||p&&p.type==="focus"?0:wg(A.props.delay,X?0:1,ii.delay)}function D(X){X===void 0&&(X=!1),I.style.pointerEvents=A.props.interactive&&!X?"":"none",I.style.zIndex=""+A.props.zIndex}function U(X,Ce,ke){if(ke===void 0&&(ke=!0),W.forEach(function(Xe){Xe[X]&&Xe[X].apply(Xe,Ce)}),ke){var dt;(dt=A.props)[X].apply(dt,Ce)}}function se(){var X=A.props.aria;if(X.content){var Ce="aria-"+X.content,ke=I.id,dt=Ka(A.props.triggerTarget||n);dt.forEach(function(Xe){var vt=Xe.getAttribute(Ce);if(A.state.isVisible)Xe.setAttribute(Ce,vt?vt+" "+ke:ke);else{var Jt=vt&&vt.replace(ke,"").trim();Jt?Xe.setAttribute(Ce,Jt):Xe.removeAttribute(Ce)}})}}function ue(){if(!(re||!A.props.aria.expanded)){var X=Ka(A.props.triggerTarget||n);X.forEach(function(Ce){A.props.interactive?Ce.setAttribute("aria-expanded",A.state.isVisible&&Ce===ie()?"true":"false"):Ce.removeAttribute("aria-expanded")})}}function O(){te().removeEventListener("mousemove",w),Gd=Gd.filter(function(X){return X!==w})}function V(X){if(!(bi.isTouch&&(d||X.type==="mousedown"))){var Ce=X.composedPath&&X.composedPath()[0]||X.target;if(!(A.props.interactive&&vS(I,Ce))){if(Ka(A.props.triggerTarget||n).some(function(ke){return vS(ke,Ce)})){if(bi.isTouch||A.state.isVisible&&A.props.trigger.indexOf("click")>=0)return}else U("onClickOutside",[A,X]);A.props.hideOnClick===!0&&(A.clearDelayTimeouts(),A.hide(),u=!0,setTimeout(function(){u=!1}),A.state.isMounted||we())}}}function Y(){d=!0}function ce(){d=!1}function fe(){var X=te();X.addEventListener("mousedown",V,!0),X.addEventListener("touchend",V,Do),X.addEventListener("touchstart",ce,Do),X.addEventListener("touchmove",Y,Do)}function we(){var X=te();X.removeEventListener("mousedown",V,!0),X.removeEventListener("touchend",V,Do),X.removeEventListener("touchstart",ce,Do),X.removeEventListener("touchmove",Y,Do)}function Ue(X,Ce){$e(X,function(){!A.state.isVisible&&I.parentNode&&I.parentNode.contains(I)&&Ce()})}function ae(X,Ce){$e(X,Ce)}function $e(X,Ce){var ke=he().box;function dt(Xe){Xe.target===ke&&(Eg(ke,"remove",dt),Ce())}if(X===0)return Ce();Eg(ke,"remove",m),Eg(ke,"add",dt),m=dt}function pt(X,Ce,ke){ke===void 0&&(ke=!1);var dt=Ka(A.props.triggerTarget||n);dt.forEach(function(Xe){Xe.addEventListener(X,Ce,ke),v.push({node:Xe,eventType:X,handler:Ce,options:ke})})}function It(){xe()&&(pt("touchstart",qn,{passive:!0}),pt("touchend",Sn,{passive:!0})),j6(A.props.trigger).forEach(function(X){if(X!=="manual")switch(pt(X,qn),X){case"mouseenter":pt("mouseleave",Sn);break;case"focus":pt(G6?"focusout":"blur",At);break;case"focusin":pt("focusout",At);break}})}function rn(){v.forEach(function(X){var Ce=X.node,ke=X.eventType,dt=X.handler,Xe=X.options;Ce.removeEventListener(ke,dt,Xe)}),v=[]}function qn(X){var Ce,ke=!1;if(!(!A.state.isEnabled||sn(X)||u)){var dt=((Ce=p)==null?void 0:Ce.type)==="focus";p=X,S=X.currentTarget,ue(),!A.state.isVisible&&z6(X)&&Gd.forEach(function(Xe){return Xe(X)}),X.type==="click"&&(A.props.trigger.indexOf("mouseenter")<0||l)&&A.props.hideOnClick!==!1&&A.state.isVisible?ke=!0:_e(X),X.type==="click"&&(l=!ke),ke&&!dt&&st(X)}}function jt(X){var Ce=X.target,ke=ie().contains(Ce)||I.contains(Ce);if(!(X.type==="mousemove"&&ke)){var dt=We().concat(I).map(function(Xe){var vt,Jt=Xe._tippy,Yn=(vt=Jt.popperInstance)==null?void 0:vt.state;return Yn?{popperRect:Xe.getBoundingClientRect(),popperState:Yn,props:t}:null}).filter(Boolean);$6(dt,X)&&(O(),st(X))}}function Sn(X){var Ce=sn(X)||A.props.trigger.indexOf("click")>=0&&l;if(!Ce){if(A.props.interactive){A.hideWithInteractivity(X);return}st(X)}}function At(X){A.props.trigger.indexOf("focusin")<0&&X.target!==ie()||A.props.interactive&&X.relatedTarget&&I.contains(X.relatedTarget)||st(X)}function sn(X){return bi.isTouch?xe()!==X.type.indexOf("touch")>=0:!1}function En(){K();var X=A.props,Ce=X.popperOptions,ke=X.placement,dt=X.offset,Xe=X.getReferenceClientRect,vt=X.moveTransition,Jt=q()?y0(I).arrow:null,Yn=Xe?{getBoundingClientRect:Xe,contextElement:Xe.contextElement||ie()}:n,yr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Q){var de=Q.state;if(q()){var Oe=he(),ht=Oe.box;["placement","reference-hidden","escaped"].forEach(function(Ve){Ve==="placement"?ht.setAttribute("data-placement",de.placement):de.attributes.popper["data-popper-"+Ve]?ht.setAttribute("data-"+Ve,""):ht.removeAttribute("data-"+Ve)}),de.attributes.popper={}}}},Ut=[{name:"offset",options:{offset:dt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!vt}},yr];q()&&Jt&&Ut.push({name:"arrow",options:{element:Jt,padding:3}}),Ut.push.apply(Ut,(Ce==null?void 0:Ce.modifiers)||[]),A.popperInstance=O6(Yn,I,Object.assign({},Ce,{placement:ke,onFirstUpdate:x,modifiers:Ut}))}function K(){A.popperInstance&&(A.popperInstance.destroy(),A.popperInstance=null)}function Se(){var X=A.props.appendTo,Ce,ke=ie();A.props.interactive&&X===lN||X==="parent"?Ce=ke.parentNode:Ce=cN(X,[ke]),Ce.contains(I)||Ce.appendChild(I),A.state.isMounted=!0,En()}function We(){return zf(I.querySelectorAll("[data-tippy-root]"))}function _e(X){A.clearDelayTimeouts(),X&&U("onTrigger",[A,X]),fe();var Ce=B(!0),ke=me(),dt=ke[0],Xe=ke[1];bi.isTouch&&dt==="hold"&&Xe&&(Ce=Xe),Ce?r=setTimeout(function(){A.show()},Ce):A.show()}function st(X){if(A.clearDelayTimeouts(),U("onUntrigger",[A,X]),!A.state.isVisible){we();return}if(!(A.props.trigger.indexOf("mouseenter")>=0&&A.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(X.type)>=0&&l)){var Ce=B(!1);Ce?s=setTimeout(function(){A.state.isVisible&&A.hide()},Ce):o=requestAnimationFrame(function(){A.hide()})}}function Ze(){A.state.isEnabled=!0}function vn(){A.hide(),A.state.isEnabled=!1}function _t(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)}function ye(X){if(!A.state.isDestroyed){U("onBeforeUpdate",[A,X]),rn();var Ce=A.props,ke=SS(n,Object.assign({},Ce,bS(X),{ignoreAttributes:!0}));A.props=ke,It(),Ce.interactiveDebounce!==ke.interactiveDebounce&&(O(),w=gS(jt,ke.interactiveDebounce)),Ce.triggerTarget&&!ke.triggerTarget?Ka(Ce.triggerTarget).forEach(function(dt){dt.removeAttribute("aria-expanded")}):ke.triggerTarget&&n.removeAttribute("aria-expanded"),ue(),D(),H&&H(Ce,ke),A.popperInstance&&(En(),We().forEach(function(dt){requestAnimationFrame(dt._tippy.popperInstance.forceUpdate)})),U("onAfterUpdate",[A,X])}}function Ne(X){A.setProps({content:X})}function Ke(){var X=A.state.isVisible,Ce=A.state.isDestroyed,ke=!A.state.isEnabled,dt=bi.isTouch&&!A.props.touch,Xe=wg(A.props.duration,0,ii.duration);if(!(X||Ce||ke||dt)&&!ie().hasAttribute("disabled")&&(U("onShow",[A],!1),A.props.onShow(A)!==!1)){if(A.state.isVisible=!0,q()&&(I.style.visibility="visible"),D(),fe(),A.state.isMounted||(I.style.transition="none"),q()){var vt=he(),Jt=vt.box,Yn=vt.content;Sg([Jt,Yn],0)}x=function(){var Ut;if(!(!A.state.isVisible||h)){if(h=!0,I.offsetHeight,I.style.transition=A.props.moveTransition,q()&&A.props.animation){var M=he(),Q=M.box,de=M.content;Sg([Q,de],Xe),xS([Q,de],"visible")}se(),ue(),yS(Cg,A),(Ut=A.popperInstance)==null||Ut.forceUpdate(),U("onMount",[A]),A.props.animation&&q()&&ae(Xe,function(){A.state.isShown=!0,U("onShown",[A])})}},Se()}}function Ye(){var X=!A.state.isVisible,Ce=A.state.isDestroyed,ke=!A.state.isEnabled,dt=wg(A.props.duration,1,ii.duration);if(!(X||Ce||ke)&&(U("onHide",[A],!1),A.props.onHide(A)!==!1)){if(A.state.isVisible=!1,A.state.isShown=!1,h=!1,l=!1,q()&&(I.style.visibility="hidden"),O(),we(),D(!0),q()){var Xe=he(),vt=Xe.box,Jt=Xe.content;A.props.animation&&(Sg([vt,Jt],dt),xS([vt,Jt],"hidden"))}se(),ue(),A.props.animation?q()&&Ue(dt,A.unmount):A.unmount()}}function Ht(X){te().addEventListener("mousemove",w),yS(Gd,w),w(X)}function Xt(){A.state.isVisible&&A.hide(),A.state.isMounted&&(K(),We().forEach(function(X){X._tippy.unmount()}),I.parentNode&&I.parentNode.removeChild(I),Cg=Cg.filter(function(X){return X!==A}),A.state.isMounted=!1,U("onHidden",[A]))}function gr(){A.state.isDestroyed||(A.clearDelayTimeouts(),A.unmount(),rn(),delete n._tippy,A.state.isDestroyed=!0,U("onDestroy",[A]))}}function ml(n,e){e===void 0&&(e={});var t=ii.plugins.concat(e.plugins||[]);V6();var r=Object.assign({},e,{plugins:t}),s=H6(n),o=s.reduce(function(l,u){var d=u&&eB(u,r);return d&&l.push(d),l},[]);return Bh(n)?o[0]:o}ml.defaultProps=ii;ml.setDefaultProps=Y6;ml.currentInput=bi;Object.assign({},XC,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});ml.setDefaultProps({render:fN});class tB{constructor({editor:e,element:t,view:r,tippyOptions:s={},updateDelay:o=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:u,state:d,from:h,to:p})=>{const{doc:m,selection:x}=d,{empty:v}=x,w=!m.textBetween(h,p).length&&gy(d.selection),S=this.element.contains(document.activeElement);return!(!(u.hasFocus()||S)||v||w||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var d;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&(!((d=this.element.parentNode)===null||d===void 0)&&d.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=u=>{this.blurHandler({event:u})},this.handleDebouncedUpdate=(u,d)=>{const h=!(d!=null&&d.selection.eq(u.state.selection)),p=!(d!=null&&d.doc.eq(u.state.doc));!h&&!p||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,h,p,d)},this.updateDelay))},this.updateHandler=(u,d,h,p)=>{var m,x,v;const{state:w,composing:S}=u,{selection:C}=w;if(S||!d&&!h)return;this.createTooltip();const{ranges:j}=C,R=Math.min(...j.map(I=>I.$from.pos)),A=Math.max(...j.map(I=>I.$to.pos));if(!((m=this.shouldShow)===null||m===void 0?void 0:m.call(this,{editor:this.editor,element:this.element,view:u,state:w,oldState:p,from:R,to:A}))){this.hide();return}(x=this.tippy)===null||x===void 0||x.setProps({getReferenceClientRect:((v=this.tippyOptions)===null||v===void 0?void 0:v.getReferenceClientRect)||(()=>{if(KC(w.selection)){let I=u.nodeDOM(R);if(I){const H=I.dataset.nodeViewWrapper?I:I.querySelector("[data-node-view-wrapper]");if(H&&(I=H.firstChild),I)return I.getBoundingClientRect()}}return F_(u,R,A)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!t)&&(this.tippy=ml(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,s=r.selection.from!==r.selection.to;if(this.updateDelay>0&&s){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),l=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,l,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const hN=n=>new Wt({key:typeof n.pluginKey=="string"?new dn(n.pluginKey):n.pluginKey,view:e=>new tB({view:e,...n})});Rn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[hN({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function nB(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pN={exports:{}},Ng={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function rB(){if(NS)return Ng;NS=1;var n=oe;function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(m,x){var v=x(),w=r({inst:{value:v,getSnapshot:x}}),S=w[0].inst,C=w[1];return o(function(){S.value=v,S.getSnapshot=x,d(S)&&C({inst:S})},[m,v,x]),s(function(){return d(S)&&C({inst:S}),m(function(){d(S)&&C({inst:S})})},[m]),l(v),v}function d(m){var x=m.getSnapshot;m=m.value;try{var v=x();return!t(m,v)}catch{return!0}}function h(m,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Ng.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Ng}pN.exports=rB();var ky=pN.exports;const iB=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},sB=({contentComponent:n})=>{const e=ky.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return oe.createElement(oe.Fragment,null,Object.values(e))};function oB(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:t2.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class aB extends oe.Component{constructor(e){var t;super(e),this.editorContentRef=oe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=oB(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return oe.createElement(oe.Fragment,null,oe.createElement("div",{ref:iB(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&oe.createElement(sB,{contentComponent:e.contentComponent}))}}const lB=N.forwardRef((n,e)=>{const t=oe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return oe.createElement(aB,{key:t,innerRef:e,...n})}),cB=oe.memo(lB);var uB=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=r;s--!==0;){var l=o[s];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},dB=nB(uB),mN={exports:{}},Tg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function fB(){if(TS)return Tg;TS=1;var n=oe,e=ky;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return Tg.useSyncExternalStoreWithSelector=function(h,p,m,x,v){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function T(I){if(!j){if(j=!0,R=I,I=x(I),v!==void 0&&S.hasValue){var H=S.value;if(v(H,I))return A=H}return A=I}if(H=A,r(R,I))return H;var W=x(I);return v!==void 0&&v(H,W)?H:(R=I,A=W)}var j=!1,R,A,L=m===void 0?null:m;return[function(){return T(p())},L===null?void 0:function(){return T(L())}]},[p,m,x,v]);var C=s(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=C},[C]),d(C),C},Tg}mN.exports=fB();var hB=mN.exports;const pB=typeof window<"u"?N.useLayoutEffect:N.useEffect;class mB{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function gB(n){var e;const[t]=N.useState(()=>new mB(n.editor)),r=hB.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:dB);return pB(()=>t.watch(n.editor),[n.editor,t]),N.useDebugValue(r),r}const yB=!1,b0=typeof window>"u",bB=b0||!!(typeof window<"u"&&window.next);class Ay{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?b0||bB?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)===null||o===void 0?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)===null||o===void 0?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)===null||o===void 0?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)===null||o===void 0?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)===null||o===void 0?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)===null||o===void 0?void 0:o.call(s,...r)}};return new SL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,o)=>{var l;return s===((l=t.extensions)===null||l===void 0?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Ay.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function xB(n={},e=[]){const t=N.useRef(n);t.current=n;const[r]=N.useState(()=>new Ay(t)),s=ky.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return N.useDebugValue(s),N.useEffect(r.onRender(e)),gB({editor:s,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&o===0?0:o+1}),s}const gN=N.createContext({editor:null});gN.Consumer;const vB=()=>N.useContext(gN),yN=n=>{const[e,t]=N.useState(null),{editor:r}=vB();return N.useEffect(()=>{var s;if(!e||!((s=n.editor)===null||s===void 0)&&s.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:l,tippyOptions:u={},updateDelay:d,shouldShow:h=null}=n,p=l||r;if(!p){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=hN({updateDelay:d,editor:p,element:e,pluginKey:o,shouldShow:h,tippyOptions:u});return p.registerPlugin(m),()=>{p.unregisterPlugin(o)}},[n.editor,r,e]),oe.createElement("div",{ref:t,className:n.className,style:{visibility:"hidden"}},n.children)},bN=N.createContext({onDragStart:void 0}),xN=()=>N.useContext(bN),wB=n=>{const e=n.as||"div",{nodeViewContentRef:t}=xN();return oe.createElement(e,{...n,ref:t,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style}})},vN=oe.forwardRef((n,e)=>{const{onDragStart:t}=xN(),r=n.as||"div";return oe.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function kS(n){return!!(typeof n=="function"&&n.prototype&&n.prototype.isReactComponent)}function AS(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.forward_ref)"||n.$$typeof.description==="react.forward_ref"))}function SB(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.memo)"||n.$$typeof.description==="react.memo"))}function EB(n){if(kS(n)||AS(n))return!0;if(SB(n)){const e=n.type;if(e)return kS(e)||AS(e)}return!1}function CB(){try{if(N.version)return parseInt(N.version.split(".")[0],10)>=19}catch{}return!1}class wN{constructor(e,{editor:t,props:r={},as:s="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(s),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?e2.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,s=this.editor,o=CB(),l=EB(t),u={...r};u.ref&&!(o||l)&&delete u.ref,!u.ref&&(o||l)&&(u.ref=d=>{this.ref=d}),this.reactElement=oe.createElement(t,{...u}),(e=s==null?void 0:s.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class NB extends EL{constructor(e,t,r){if(super(e,t,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const s=this.dom.querySelector("[data-node-view-content]");if(!s)return;s.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(h={})=>this.updateAttributes(h),deleteNode:()=>this.deleteNode(),ref:N.createRef()};if(!this.component.displayName){const h=p=>p.charAt(0).toUpperCase()+p.substring(1);this.component.displayName=h(this.extension.name)}const s={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:h=>{h&&this.contentDOMElement&&h.firstChild!==this.contentDOMElement&&(h.hasAttribute("data-node-view-wrapper")&&h.removeAttribute("data-node-view-wrapper"),h.appendChild(this.contentDOMElement))}},o=this.component,l=N.memo(h=>oe.createElement(bN.Provider,{value:s},N.createElement(o,h)));l.displayName="ReactNodeView";let u=this.node.isInline?"span":"div";this.options.as&&(u=this.options.as);const{className:d=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new wN(l,{editor:this.editor,props:e,as:u,className:`node-${this.node.type.name} ${d}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,r){const s=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,l=this.decorations,u=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:o,oldDecorations:l,newNode:e,newDecorations:t,oldInnerDecorations:u,innerDecorations:r,updateProps:()=>s({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,s({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=_f(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function SN(n,e){return t=>t.editor.contentComponent?new NB(n,t,e):{}}const TB=/^\s*>\s$/,kB=Kt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Jc({find:TB,type:this.type})]}}),AB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,MB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,OB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,RB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,DB=Ni.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[sl({find:AB,type:this.type}),sl({find:OB,type:this.type})]},addPasteRules(){return[Zo({find:MB,type:this.type}),Zo({find:RB,type:this.type})]}}),jB="listItem",MS="textStyle",OS=/^\s*([-+*])\s$/,_B=Kt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jB,this.editor.getAttributes(MS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Jc({find:OS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Jc({find:OS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(MS),editor:this.editor})),[n]}}),LB=/(^|[^`])`([^`]+)`(?!`)/,BB=/(^|[^`])`([^`]+)`(?!`)/g,zB=Ni.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[sl({find:LB,type:this.type})]},addPasteRules(){return[Zo({find:BB,type:this.type})]}}),IB=/^```([a-z]+)?[\s\n]$/,HB=/^~~~([a-z]+)?[\s\n]$/,EN=Kt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",xt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(Pe.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[h0({find:IB,type:this.type,getAttributes:n=>({language:n[1]})}),h0({find:HB,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Wt({key:new dn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!t||!o)return!1;const{tr:l,schema:u}=n.state,d=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(He.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),UB=Kt.create({name:"doc",topNode:!0,content:"block+"});function $B(n={}){return new Wt({view(e){return new qB(e,n)}})}class qB{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=l=>{this[s](l)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),l=o.width/s.offsetWidth,u=o.height/s.offsetHeight;if(t){let m=e.nodeBefore,x=e.nodeAfter;if(m||x){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let w=v.getBoundingClientRect(),S=m?w.bottom:w.top;m&&x&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*u;r={left:w.left,right:w.right,top:S-C,bottom:S+C}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*l;r={left:m.left-x,right:m.left+x,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),x=m.width/d.offsetWidth,v=m.height/d.offsetHeight;h=m.left-d.scrollLeft*x,p=m.top-d.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=_2(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const PB=Rn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[$B(this.options)]}});class Gt extends Pe{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Gt.valid(r)?new Gt(r):Pe.near(r)}content(){return ve.empty}eq(e){return e instanceof Gt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Gt(e.resolve(t.pos))}getBookmark(){return new My(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!VB(e)||!FB(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Gt.valid(e))return e;let s=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let d=e.doc.resolve(s);if(Gt.valid(d))return d}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!Be.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*t),r=!1;continue e}break}o=l,s+=t;let u=e.doc.resolve(s);if(Gt.valid(u))return u}return null}}}Gt.prototype.visible=!1;Gt.findFrom=Gt.findGapCursorFrom;Pe.jsonID("gapcursor",Gt);class My{constructor(e){this.pos=e}map(e){return new My(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Gt.valid(t)?new Gt(t):Pe.near(t)}}function CN(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function VB(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||CN(s.type))return!0;if(s.inlineContent)return!1}}return!0}function FB(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||CN(s.type))return!0;if(s.inlineContent)return!1}}return!0}function GB(){return new Wt({props:{decorations:YB,createSelectionBetween(n,e,t){return e.pos==t.pos&&Gt.valid(t)?new Gt(t):null},handleClick:WB,handleKeyDown:KB,handleDOMEvents:{beforeinput:QB}}})}const KB=ay({ArrowLeft:Kd("horiz",-1),ArrowRight:Kd("horiz",1),ArrowUp:Kd("vert",-1),ArrowDown:Kd("vert",1)});function Kd(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof He){if(!o.endOfTextblock(t)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Gt.findGapCursorFrom(u,e,d);return h?(s&&s(r.tr.setSelection(new Gt(h))),!0):!1}}function WB(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Gt.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&Be.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Gt(r))),!0)}function QB(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Gt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=le.empty;for(let l=r.length-1;l>=0;l--)s=le.from(r[l].createAndFill(null,s));let o=n.state.tr.replace(t.pos,t.pos,new ve(s,0,0));return o.setSelection(He.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function YB(n){if(!(n.selection instanceof Gt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Vt.create(n.doc,[kn.widget(n.selection.head,e,{key:"gapcursor"})])}const XB=Rn.create({name:"gapCursor",addProseMirrorPlugins(){return[GB()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=rt(Me(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),JB=Kt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",xt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:o}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(x=>u.includes(x.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ZB=Kt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,xt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>h0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var If=200,Mn=function(){};Mn.prototype.append=function(e){return e.length?(e=Mn.from(e),!this.length&&e||e.length<If&&this.leafAppend(e)||this.length<If&&e.leafPrepend(this)||this.appendInner(e)):this};Mn.prototype.prepend=function(e){return e.length?Mn.from(e).append(this):this};Mn.prototype.appendInner=function(e){return new ez(this,e)};Mn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Mn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Mn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Mn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Mn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,l){return s.push(e(o,l))},t,r),s};Mn.from=function(e){return e instanceof Mn?e:e&&e.length?new NN(e):Mn.empty};var NN=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,l,u){for(var d=o;d<l;d++)if(s(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,l,u){for(var d=o-1;d>=l;d--)if(s(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=If)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=If)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Mn);Mn.empty=new NN([]);var ez=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(s,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Mn);const tz=500;class ni{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;t&&(s=this.remapping(r,this.items.length),o=s.maps.length);let l=e.tr,u,d,h=[],p=[];return this.items.forEach((m,x)=>{if(!m.step){s||(s=this.remapping(r,x+1),o=s.maps.length),o--,p.push(m);return}if(s){p.push(new mi(m.map));let v=m.step.map(s.slice(o)),w;v&&l.maybeStep(v).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new mi(w,void 0,void 0,h.length+p.length))),o--,w&&s.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(o)):m.selection,d=new ni(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,t,r,s){let o=[],l=this.eventCount,u=this.items,d=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),x=new mi(e.mapping.maps[p],m,t),v;(v=d&&d.merge(x))&&(x=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(x),t&&(l++,t=void 0),s||(d=x)}let h=l-r.depth;return h>rz&&(u=nz(u,h),l-=h),new ni(u.append(o),l)}remapping(e,t){let r=new Fc;return this.items.forEach((s,o)=>{let l=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new ni(this.items.append(e.map(t=>new mi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(x=>{x.selection&&u--},s);let d=t;this.items.forEach(x=>{let v=o.getMirror(--d);if(v==null)return;l=Math.min(l,v);let w=o.maps[v];if(x.step){let S=e.steps[v].invert(e.docs[v]),C=x.selection&&x.selection.map(o.slice(d+1,v));C&&u++,r.push(new mi(w,S,C))}else r.push(new mi(w))},s);let h=[];for(let x=t;x<l;x++)h.push(new mi(o.maps[x]));let p=this.items.slice(0,s).append(h).append(r),m=new ni(p,u);return m.emptyItemCount()>tz&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(t.slice(r)),h=d&&d.getMap();if(r--,h&&t.appendMap(h,r),d){let p=l.selection&&l.selection.map(t.slice(r));p&&o++;let m=new mi(h.invert(),d,p),x,v=s.length-1;(x=s.length&&s[v].merge(m))?s[v]=x:s.push(m)}}else l.map&&r--},this.items.length,0),new ni(Mn.from(s.reverse()),o)}}ni.empty=new ni(Mn.empty,0);function nz(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class mi{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new mi(t.getMap().invert(),t,this.selection)}}}class qs{constructor(e,t,r,s,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const rz=20;function iz(n,e,t,r){let s=t.getMeta(Ko),o;if(s)return s.historyState;t.getMeta(az)&&(n=new qs(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Ko))return l.getMeta(Ko).redo?new qs(n.done.addTransform(t,void 0,r,df(e)),n.undone,RS(t.mapping.maps),n.prevTime,n.prevComposition):new qs(n.done,n.undone.addTransform(t,void 0,r,df(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),d=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!sz(t,n.prevRanges)),h=l?kg(n.prevRanges,t.mapping):RS(t.mapping.maps);return new qs(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,df(e)),ni.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new qs(n.done.rebased(t,o),n.undone.rebased(t,o),kg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new qs(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),kg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function sz(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(t=!0)}),t}function RS(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,o,l)=>e.push(o,l));return e}function kg(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),o=e.map(n[r+1],-1);s<=o&&t.push(s,o)}return t}function oz(n,e,t){let r=df(e),s=Ko.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),d=new qs(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Ko,{redo:t,historyState:d})}let Ag=!1,DS=null;function df(n){let e=n.plugins;if(DS!=e){Ag=!1,DS=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ag=!0;break}}return Ag}const Ko=new dn("history"),az=new dn("closeHistory");function lz(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Wt({key:Ko,state:{init(){return new qs(ni.empty,ni.empty,null,0,-1)},apply(e,t,r){return iz(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?kN:r=="historyRedo"?AN:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function TN(n,e){return(t,r)=>{let s=Ko.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let o=oz(s,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const kN=TN(!1,!0),AN=TN(!0,!0),cz=Rn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>kN(n,e),redo:()=>({state:n,dispatch:e})=>AN(n,e)}},addProseMirrorPlugins(){return[lz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),uz=Kt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",xt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!CL(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:s}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):KC(t)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:l,dispatch:u})=>{var d;if(u){const{$to:h}=l.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?l.setSelection(He.create(l.doc,h.pos+1)):h.nodeAfter.isBlock?l.setSelection(Be.create(l.doc,h.pos)):l.setSelection(He.create(l.doc,h.pos));else{const m=(d=h.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();m&&(l.insert(p,m),l.setSelection(He.create(l.doc,p+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[WC({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),dz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,fz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,hz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,pz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,mz=Ni.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[sl({find:dz,type:this.type}),sl({find:hz,type:this.type})]},addPasteRules(){return[Zo({find:fz,type:this.type}),Zo({find:pz,type:this.type})]}}),gz=Kt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",xt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),yz="listItem",jS="textStyle",_S=/^(\d+)\.\s$/,bz=Kt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",xt(this.options.HTMLAttributes,t),0]:["ol",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yz,this.editor.getAttributes(jS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Jc({find:_S,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Jc({find:_S,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(jS)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),xz=Kt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),vz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,wz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Sz=Ni.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[sl({find:vz,type:this.type})]},addPasteRules(){return[Zo({find:wz,type:this.type})]}}),Ez=Kt.create({name:"text",group:"inline"}),Cz=Rn.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(DB.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(kB.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(_B.configure(this.options.bulletList)),this.options.code!==!1&&n.push(zB.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(EN.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(UB.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(PB.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(XB.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(JB.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(ZB.configure(this.options.heading)),this.options.history!==!1&&n.push(cz.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(uz.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(mz.configure(this.options.italic)),this.options.listItem!==!1&&n.push(gz.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(bz.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(xz.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(Sz.configure(this.options.strike)),this.options.text!==!1&&n.push(Ez.configure(this.options.text)),n}}),Nz=Rn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Wt({key:new dn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((l,u)=>{const d=r>=u&&r<=u+l.nodeSize,h=!l.isLeaf&&_h(l);if((d||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const m=kn.node(u,u+l.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:d}):this.options.placeholder});s.push(m)}return this.options.includeChildren}),Vt.create(n,s)}}})]}}),Tz=Ni.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),kz="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Az="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",x0="numeric",v0="ascii",w0="alpha",Rc="asciinumeric",vc="alphanumeric",S0="domain",MN="emoji",Mz="scheme",Oz="slashscheme",Mg="whitespace";function Rz(n,e){return n in e||(e[n]=[]),e[n]}function Ho(n,e,t){e[x0]&&(e[Rc]=!0,e[vc]=!0),e[v0]&&(e[Rc]=!0,e[w0]=!0),e[Rc]&&(e[vc]=!0),e[w0]&&(e[vc]=!0),e[vc]&&(e[S0]=!0),e[MN]&&(e[S0]=!0);for(const r in e){const s=Rz(r,t);s.indexOf(n)<0&&s.push(n)}}function Dz(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function fr(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}fr.groups={};fr.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||fr.groups;let s;return e&&e.j?s=e:(s=new fr(e),t&&r&&Ho(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const o=n.length;if(!o)return s;for(let l=0;l<o-1;l++)s=s.tt(n[l]);return s.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||fr.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const o=e;let l,u=s.go(n);if(u?(l=new fr,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new fr,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(Dz(l.t,r),t);Ho(o,d,r)}else t&&Ho(o,t,r);l.t=o}return s.j[n]=l,l}};const nt=(n,e,t,r,s)=>n.ta(e,t,r,s),tn=(n,e,t,r,s)=>n.tr(e,t,r,s),LS=(n,e,t,r,s)=>n.ts(e,t,r,s),ge=(n,e,t,r,s)=>n.tt(e,t,r,s),Zi="WORD",E0="UWORD",ON="ASCIINUMERICAL",RN="ALPHANUMERICAL",tu="LOCALHOST",C0="TLD",N0="UTLD",ff="SCHEME",Wa="SLASH_SCHEME",Oy="NUM",T0="WS",Ry="NL",Dc="OPENBRACE",jc="CLOSEBRACE",Hf="OPENBRACKET",Uf="CLOSEBRACKET",$f="OPENPAREN",qf="CLOSEPAREN",Pf="OPENANGLEBRACKET",Vf="CLOSEANGLEBRACKET",Ff="FULLWIDTHLEFTPAREN",Gf="FULLWIDTHRIGHTPAREN",Kf="LEFTCORNERBRACKET",Wf="RIGHTCORNERBRACKET",Qf="LEFTWHITECORNERBRACKET",Yf="RIGHTWHITECORNERBRACKET",Xf="FULLWIDTHLESSTHAN",Jf="FULLWIDTHGREATERTHAN",Zf="AMPERSAND",eh="APOSTROPHE",th="ASTERISK",Ps="AT",nh="BACKSLASH",rh="BACKTICK",ih="CARET",Fs="COLON",Dy="COMMA",sh="DOLLAR",gi="DOT",oh="EQUALS",jy="EXCLAMATION",Pr="HYPHEN",_c="PERCENT",ah="PIPE",lh="PLUS",ch="POUND",Lc="QUERY",_y="QUOTE",DN="FULLWIDTHMIDDLEDOT",Ly="SEMI",yi="SLASH",Bc="TILDE",uh="UNDERSCORE",jN="EMOJI",dh="SYM";var _N=Object.freeze({__proto__:null,ALPHANUMERICAL:RN,AMPERSAND:Zf,APOSTROPHE:eh,ASCIINUMERICAL:ON,ASTERISK:th,AT:Ps,BACKSLASH:nh,BACKTICK:rh,CARET:ih,CLOSEANGLEBRACKET:Vf,CLOSEBRACE:jc,CLOSEBRACKET:Uf,CLOSEPAREN:qf,COLON:Fs,COMMA:Dy,DOLLAR:sh,DOT:gi,EMOJI:jN,EQUALS:oh,EXCLAMATION:jy,FULLWIDTHGREATERTHAN:Jf,FULLWIDTHLEFTPAREN:Ff,FULLWIDTHLESSTHAN:Xf,FULLWIDTHMIDDLEDOT:DN,FULLWIDTHRIGHTPAREN:Gf,HYPHEN:Pr,LEFTCORNERBRACKET:Kf,LEFTWHITECORNERBRACKET:Qf,LOCALHOST:tu,NL:Ry,NUM:Oy,OPENANGLEBRACKET:Pf,OPENBRACE:Dc,OPENBRACKET:Hf,OPENPAREN:$f,PERCENT:_c,PIPE:ah,PLUS:lh,POUND:ch,QUERY:Lc,QUOTE:_y,RIGHTCORNERBRACKET:Wf,RIGHTWHITECORNERBRACKET:Yf,SCHEME:ff,SEMI:Ly,SLASH:yi,SLASH_SCHEME:Wa,SYM:dh,TILDE:Bc,TLD:C0,UNDERSCORE:uh,UTLD:N0,UWORD:E0,WORD:Zi,WS:T0});const Xi=/[a-z]/,mc=new RegExp("\\p{L}","u"),Og=new RegExp("\\p{Emoji}","u"),Ji=/\d/,Rg=/\s/,BS="\r",Dg=`
`,jz="",_z="",jg="";let Wd=null,Qd=null;function Lz(n=[]){const e={};fr.groups=e;const t=new fr;Wd==null&&(Wd=zS(kz)),Qd==null&&(Qd=zS(Az)),ge(t,"'",eh),ge(t,"{",Dc),ge(t,"}",jc),ge(t,"[",Hf),ge(t,"]",Uf),ge(t,"(",$f),ge(t,")",qf),ge(t,"<",Pf),ge(t,">",Vf),ge(t,"",Ff),ge(t,"",Gf),ge(t,"",Kf),ge(t,"",Wf),ge(t,"",Qf),ge(t,"",Yf),ge(t,"",Xf),ge(t,"",Jf),ge(t,"&",Zf),ge(t,"*",th),ge(t,"@",Ps),ge(t,"`",rh),ge(t,"^",ih),ge(t,":",Fs),ge(t,",",Dy),ge(t,"$",sh),ge(t,".",gi),ge(t,"=",oh),ge(t,"!",jy),ge(t,"-",Pr),ge(t,"%",_c),ge(t,"|",ah),ge(t,"+",lh),ge(t,"#",ch),ge(t,"?",Lc),ge(t,'"',_y),ge(t,"/",yi),ge(t,";",Ly),ge(t,"~",Bc),ge(t,"_",uh),ge(t,"\\",nh),ge(t,"",DN);const r=tn(t,Ji,Oy,{[x0]:!0});tn(r,Ji,r);const s=tn(r,Xi,ON,{[Rc]:!0}),o=tn(r,mc,RN,{[vc]:!0}),l=tn(t,Xi,Zi,{[v0]:!0});tn(l,Ji,s),tn(l,Xi,l),tn(s,Ji,s),tn(s,Xi,s);const u=tn(t,mc,E0,{[w0]:!0});tn(u,Xi),tn(u,Ji,o),tn(u,mc,u),tn(o,Ji,o),tn(o,Xi),tn(o,mc,o);const d=ge(t,Dg,Ry,{[Mg]:!0}),h=ge(t,BS,T0,{[Mg]:!0}),p=tn(t,Rg,T0,{[Mg]:!0});ge(t,jg,p),ge(h,Dg,d),ge(h,jg,p),tn(h,Rg,p),ge(p,BS),ge(p,Dg),tn(p,Rg,p),ge(p,jg,p);const m=tn(t,Og,jN,{[MN]:!0});ge(m,"#"),tn(m,Og,m),ge(m,jz,m);const x=ge(m,_z);ge(x,"#"),tn(x,Og,m);const v=[[Xi,l],[Ji,s]],w=[[Xi,null],[mc,u],[Ji,o]];for(let S=0;S<Wd.length;S++)Hs(t,Wd[S],C0,Zi,v);for(let S=0;S<Qd.length;S++)Hs(t,Qd[S],N0,E0,w);Ho(C0,{tld:!0,ascii:!0},e),Ho(N0,{utld:!0,alpha:!0},e),Hs(t,"file",ff,Zi,v),Hs(t,"mailto",ff,Zi,v),Hs(t,"http",Wa,Zi,v),Hs(t,"https",Wa,Zi,v),Hs(t,"ftp",Wa,Zi,v),Hs(t,"ftps",Wa,Zi,v),Ho(ff,{scheme:!0,ascii:!0},e),Ho(Wa,{slashscheme:!0,ascii:!0},e),n=n.sort((S,C)=>S[0]>C[0]?1:-1);for(let S=0;S<n.length;S++){const C=n[S][0],j=n[S][1]?{[Mz]:!0}:{[Oz]:!0};C.indexOf("-")>=0?j[S0]=!0:Xi.test(C)?Ji.test(C)?j[Rc]=!0:j[v0]=!0:j[x0]=!0,LS(t,C,C,j)}return LS(t,"localhost",tu,{ascii:!0}),t.jd=new fr(dh),{start:t,tokens:Object.assign({groups:e},_N)}}function LN(n,e){const t=Bz(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let o=0,l=0;for(;l<r;){let u=n,d=null,h=0,p=null,m=-1,x=-1;for(;l<r&&(d=u.go(t[l]));)u=d,u.accepts()?(m=0,x=0,p=u):m>=0&&(m+=t[l].length,x++),h+=t[l].length,o+=t[l].length,l++;o-=m,l-=x,h-=m,s.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return s}function Bz(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),o,l=s<55296||s>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Hs(n,e,t,r,s){let o;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];n.j[d]?o=n.j[d]:(o=new fr(r),o.jr=s.slice(),n.j[d]=o),n=o}return o=new fr(t),o.jr=s.slice(),n.j[e[l-1]]=o,o}function zS(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let o=0;for(;s.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+o),10);l>0;l--)t.pop();r+=o}else t.push(n[r]),r++}return e}const nu={defaultProtocol:"http",events:null,format:IS,formatHref:IS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function By(n,e=null){let t=Object.assign({},nu);n&&(t=Object.assign(t,n instanceof By?n.o:n));const r=t.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}By.prototype={o:nu,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:nu[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function IS(n){return n}function BN(n,e){this.t="token",this.v=n,this.tk=e}BN.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=nu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),o=this.toFormattedString(n),l={},u=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:s,attributes:l,content:o,eventListeners:m}}};function zh(n,e){class t extends BN{constructor(s,o){super(s,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const HS=zh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),US=zh("text"),zz=zh("nl"),Yd=zh("url",{isLink:!0,toHref(n=nu.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==tu&&n[1].t===Fs}}),qr=n=>new fr(n);function Iz({groups:n}){const e=n.domain.concat([Zf,th,Ps,nh,rh,ih,sh,oh,Pr,Oy,_c,ah,lh,ch,yi,dh,Bc,uh]),t=[eh,Fs,Dy,gi,jy,_c,Lc,_y,Ly,Pf,Vf,Dc,jc,Uf,Hf,$f,qf,Ff,Gf,Kf,Wf,Qf,Yf,Xf,Jf],r=[Zf,eh,th,nh,rh,ih,sh,oh,Pr,Dc,jc,_c,ah,lh,ch,Lc,yi,dh,Bc,uh],s=qr(),o=ge(s,Bc);nt(o,r,o),nt(o,n.domain,o);const l=qr(),u=qr(),d=qr();nt(s,n.domain,l),nt(s,n.scheme,u),nt(s,n.slashscheme,d),nt(l,r,o),nt(l,n.domain,l);const h=ge(l,Ps);ge(o,Ps,h),ge(u,Ps,h),ge(d,Ps,h);const p=ge(o,gi);nt(p,r,o),nt(p,n.domain,o);const m=qr();nt(h,n.domain,m),nt(m,n.domain,m);const x=ge(m,gi);nt(x,n.domain,m);const v=qr(HS);nt(x,n.tld,v),nt(x,n.utld,v),ge(h,tu,v);const w=ge(m,Pr);ge(w,Pr,w),nt(w,n.domain,m),nt(v,n.domain,m),ge(v,gi,x),ge(v,Pr,w);const S=ge(v,Fs);nt(S,n.numeric,HS);const C=ge(l,Pr),T=ge(l,gi);ge(C,Pr,C),nt(C,n.domain,l),nt(T,r,o),nt(T,n.domain,l);const j=qr(Yd);nt(T,n.tld,j),nt(T,n.utld,j),nt(j,n.domain,l),nt(j,r,o),ge(j,gi,T),ge(j,Pr,C),ge(j,Ps,h);const R=ge(j,Fs),A=qr(Yd);nt(R,n.numeric,A);const L=qr(Yd),I=qr();nt(L,e,L),nt(L,t,I),nt(I,e,L),nt(I,t,I),ge(j,yi,L),ge(A,yi,L);const H=ge(u,Fs),W=ge(d,Fs),re=ge(W,yi),me=ge(re,yi);nt(u,n.domain,l),ge(u,gi,T),ge(u,Pr,C),nt(d,n.domain,l),ge(d,gi,T),ge(d,Pr,C),nt(H,n.domain,L),ge(H,yi,L),ge(H,Lc,L),nt(me,n.domain,L),nt(me,e,L),ge(me,yi,L);const xe=[[Dc,jc],[Hf,Uf],[$f,qf],[Pf,Vf],[Ff,Gf],[Kf,Wf],[Qf,Yf],[Xf,Jf]];for(let q=0;q<xe.length;q++){const[ie,te]=xe[q],he=ge(L,ie);ge(I,ie,he),ge(he,te,L);const B=qr(Yd);nt(he,e,B);const D=qr();nt(he,t),nt(B,e,B),nt(B,t,D),nt(D,e,B),nt(D,t,D),ge(B,te,L),ge(D,te,L)}return ge(s,tu,j),ge(s,Ry,zz),{start:s,tokens:_N}}function Hz(n,e,t){let r=t.length,s=0,o=[],l=[];for(;s<r;){let u=n,d=null,h=null,p=0,m=null,x=-1;for(;s<r&&!(d=u.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=d||u.go(t[s].t));)d=null,u=h,u.accepts()?(x=0,m=u):x>=0&&x++,s++,p++;if(x<0)s-=p,s<r&&(l.push(t[s]),s++);else{l.length>0&&(o.push(_g(US,e,l)),l=[]),s-=x,p-=x;const v=m.t,w=t.slice(s-p,s);o.push(_g(v,e,w))}}return l.length>0&&o.push(_g(US,e,l)),o}function _g(n,e,t){const r=t[0].s,s=t[t.length-1].e,o=e.slice(r,s);return new n(o,t)}const Uz=typeof console<"u"&&console&&console.warn||(()=>{}),$z="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function qz(){return fr.groups={},Pt.scanner=null,Pt.parser=null,Pt.tokenQueue=[],Pt.pluginQueue=[],Pt.customSchemes=[],Pt.initialized=!1,Pt}function $S(n,e=!1){if(Pt.initialized&&Uz(`linkifyjs: already initialized - will not register custom scheme "${n}" ${$z}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Pt.customSchemes.push([n,e])}function Pz(){Pt.scanner=Lz(Pt.customSchemes);for(let n=0;n<Pt.tokenQueue.length;n++)Pt.tokenQueue[n][1]({scanner:Pt.scanner});Pt.parser=Iz(Pt.scanner.tokens);for(let n=0;n<Pt.pluginQueue.length;n++)Pt.pluginQueue[n][1]({scanner:Pt.scanner,parser:Pt.parser});return Pt.initialized=!0,Pt}function zy(n){return Pt.initialized||Pz(),Hz(Pt.parser.start,n,LN(Pt.scanner.start,n))}zy.scan=LN;function zN(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new By(t),s=zy(n),o=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}const Iy="[\0- -\u2029]",Vz=new RegExp(Iy),Fz=new RegExp(`${Iy}$`),Gz=new RegExp(Iy,"g");function Kz(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function Wz(n){return new Wt({key:new dn("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!s||o)return;const{tr:l}=r,u=I_(t.doc,[...e]);if(V_(u).forEach(({newRange:h})=>{const p=H_(r.doc,h,v=>v.isTextblock);let m,x;if(p.length>1)m=p[0],x=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!Fz.test(v))return;m=p[0],x=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&x){const v=x.split(Vz).filter(Boolean);if(v.length<=0)return!1;const w=v[v.length-1],S=m.pos+x.lastIndexOf(w);if(!w)return!1;const C=zy(w).map(T=>T.toObject(n.defaultProtocol));if(!Kz(C))return!1;C.filter(T=>T.isLink).map(T=>({...T,from:S+T.start+1,to:S+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>n.validate(T.value)).filter(T=>n.shouldAutoLink(T.value)).forEach(T=>{by(T.from,T.to,r.doc).some(j=>j.mark.type===n.type)||l.addMark(T.from,T.to,n.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function Qz(n){return new Wt({key:new dn("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let l=r.target;const u=[];for(;l.nodeName!=="DIV";)u.push(l),l=l.parentNode;if(!u.find(x=>x.nodeName==="A"))return!1;const d=FC(e.state,n.type.name),h=r.target,p=(s=h==null?void 0:h.href)!==null&&s!==void 0?s:d.href,m=(o=h==null?void 0:h.target)!==null&&o!==void 0?o:d.target;return h&&p?(window.open(p,m),!0):!1}}})}function Yz(n){return new Wt({key:new dn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const d=zN(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!d?!1:n.editor.commands.setMark(n.type,{href:d.href})}}})}function Ro(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(Gz,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Xz=Ni.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){$S(n);return}$S(n.scheme,n.optionalSlashes)})},onDestroy(){qz()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Ro(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Ro(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Ro(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",xt(this.options.HTMLAttributes,n),0]:["a",xt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Ro(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Ro(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Zo({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=zN(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!Ro(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(Wz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Ro(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(Qz({type:this.type})),this.options.linkOnPaste&&n.push(Yz({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),Jz=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Zz=Kt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",xt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[WC({find:Jz,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}});var k0,A0;if(typeof WeakMap<"u"){let n=new WeakMap;k0=e=>n.get(e),A0=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;k0=r=>{for(let s=0;s<n.length;s+=2)if(n[s]==r)return n[s+1]},A0=(r,s)=>(t==10&&(t=0),n[t++]=r,n[t++]=s)}var nn=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,s=e/this.width|0;let o=r+1,l=s+1;for(let u=1;o<this.width&&this.map[e+u]==t;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==t;u++)l++;return{left:r,top:s,right:o,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:s,top:o,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:s==this.width)?null:this.map[o*this.width+(t<0?r-1:s)]:(t<0?o==0:l==this.height)?null:this.map[r+this.width*(t<0?o-1:l)]}rectBetween(n,e){const{left:t,right:r,top:s,bottom:o}=this.findCell(n),{left:l,right:u,top:d,bottom:h}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(s,d),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let s=n.left;s<n.right;s++){const o=r*this.width+s,l=this.map[o];t[l]||(t[l]=!0,!(s==n.left&&s&&this.map[o-1]==l||r==n.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,s=0;;r++){const o=s+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const u=(n+1)*this.width;for(;l<u&&this.map[l]<s;)l++;return l==u?o-1:this.map[l]}s=o}}static get(n){return k0(n)||A0(n,e7(n))}};function e7(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=t7(n),t=n.childCount,r=[];let s=0,o=null;const l=[];for(let h=0,p=e*t;h<p;h++)r[h]=0;for(let h=0,p=0;h<t;h++){const m=n.child(h);p++;for(let w=0;;w++){for(;s<r.length&&r[s]!=0;)s++;if(w==m.childCount)break;const S=m.child(w),{colspan:C,rowspan:T,colwidth:j}=S.attrs;for(let R=0;R<T;R++){if(R+h>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:T-R});break}const A=s+R*e;for(let L=0;L<C;L++){r[A+L]==0?r[A+L]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:C-L});const I=j&&j[L];if(I){const H=(A+L)%e*2,W=l[H];W==null||W!=I&&l[H+1]==1?(l[H]=I,l[H+1]=1):W==I&&l[H+1]++}}}s+=C,p+=S.nodeSize}const x=(h+1)*e;let v=0;for(;s<x;)r[s++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||t===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new nn(e,t,r,o);let d=!1;for(let h=0;!d&&h<l.length;h+=2)l[h]!=null&&l[h+1]<t&&(d=!0);return d&&n7(u,l,n),u}function t7(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const s=n.child(r);let o=0;if(t)for(let l=0;l<r;l++){const u=n.child(l);for(let d=0;d<u.childCount;d++){const h=u.child(d);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<s.childCount;l++){const u=s.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function n7(n,e,t){n.problems||(n.problems=[]);const r={};for(let s=0;s<n.map.length;s++){const o=n.map[s];if(r[o])continue;r[o]=!0;const l=t.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const d=l.attrs;for(let h=0;h<d.colspan;h++){const p=(s+h)%n.width,m=e[p*2];m!=null&&(!d.colwidth||d.colwidth[h]!=m)&&((u||(u=r7(d)))[h]=m)}u&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function r7(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Wn(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var Gs=new dn("selectingCells");function gl(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function i7(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function ai(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Ih(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=gl(e.$head)||s7(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function s7(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function M0(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function o7(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function Hy(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function IN(n,e,t){const r=n.node(-1),s=nn.get(r),o=n.start(-1),l=s.nextCell(n.pos-o,e,t);return l==null?null:n.node(0).resolve(o+l)}function ta(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function HN(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<t;s++)r.colwidth.splice(e,0,0)}return r}function a7(n,e,t){const r=Wn(e.type.schema).header_cell;for(let s=0;s<n.height;s++)if(e.nodeAt(n.map[t+s*n.width]).type!=r)return!1;return!0}var zt=class es extends Pe{constructor(e,t=e){const r=e.node(-1),s=nn.get(r),o=e.start(-1),l=s.rectBetween(e.pos-o,t.pos-o),u=e.node(0),d=s.cellsInRect(l).filter(p=>p!=t.pos-o);d.unshift(t.pos-o);const h=d.map(p=>{const m=r.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const x=o+p+1;return new H2(u.resolve(x),u.resolve(x+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),s=e.resolve(t.map(this.$headCell.pos));if(M0(r)&&M0(s)&&Hy(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?es.rowSelection(r,s):o&&this.isColSelection()?es.colSelection(r,s):new es(r,s)}return He.between(r,s)}content(){const e=this.$anchorCell.node(-1),t=nn.get(e),r=this.$anchorCell.start(-1),s=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=s.top;d<s.bottom;d++){const h=[];for(let p=d*t.width+s.left,m=s.left;m<s.right;m++,p++){const x=t.map[p];if(o[x])continue;o[x]=!0;const v=t.findCell(x);let w=e.nodeAt(x);if(!w)throw RangeError(`No cell with offset ${x} found`);const S=s.left-v.left,C=v.right-s.right;if(S>0||C>0){let T=w.attrs;if(S>0&&(T=ta(T,0,S)),C>0&&(T=ta(T,T.colspan-C,C)),v.left<s.left){if(w=w.type.createAndFill(T),!w)throw RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else w=w.type.create(T,w.content)}if(v.top<s.top||v.bottom>s.bottom){const T={...w.attrs,rowspan:Math.min(v.bottom,s.bottom)-Math.max(v.top,s.top)};v.top<s.top?w=w.type.createAndFill(T):w=w.type.create(T,w.content)}h.push(w)}l.push(e.child(d).copy(le.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new ve(le.from(u),1,1)}replace(e,t=ve.empty){const r=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){const{$from:u,$to:d}=s[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(d.pos),l?ve.empty:t)}const o=Pe.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new ve(le.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=nn.get(t),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let l=0;l<o.length;l++)e(t.nodeAt(o[l]),s+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),s=nn.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.top<=u.top?(l.top>0&&(e=d.resolve(o+s.map[l.left])),u.bottom<s.height&&(t=d.resolve(o+s.map[s.width*(s.height-1)+u.right-1]))):(u.top>0&&(t=d.resolve(o+s.map[u.left])),l.bottom<s.height&&(e=d.resolve(o+s.map[s.width*(s.height-1)+l.right-1]))),new es(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=nn.get(e),r=this.$anchorCell.start(-1),s=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const l=s+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==t.width}eq(e){return e instanceof es&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),s=nn.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.left<=u.left?(l.left>0&&(e=d.resolve(o+s.map[l.top*s.width])),u.right<s.width&&(t=d.resolve(o+s.map[s.width*(u.top+1)-1]))):(u.left>0&&(t=d.resolve(o+s.map[u.top*s.width])),l.right<s.width&&(e=d.resolve(o+s.map[s.width*(l.top+1)-1]))),new es(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new es(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new es(e.resolve(t),e.resolve(r))}getBookmark(){return new l7(this.$anchorCell.pos,this.$headCell.pos)}};zt.prototype.visible=!1;Pe.jsonID("cell",zt);var l7=class UN{constructor(e,t){this.anchor=e,this.head=t}map(e){return new UN(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&Hy(t,r)?new zt(t,r):Pe.near(r,1)}};function c7(n){if(!(n.selection instanceof zt))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(kn.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Vt.create(n.doc,e)}function u7({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,s=n.depth;for(;s>=0&&!(n.after(s+1)<n.end(s));s--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(s).type.spec.tableRole)}function d7({$from:n,$to:e}){let t,r;for(let s=n.depth;s>0;s--){const o=n.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let s=e.depth;s>0;s--){const o=e.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function f7(n,e,t){const r=(e||n).selection,s=(e||n).doc;let o,l;if(r instanceof Be&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=zt.create(s,r.from);else if(l=="row"){const u=s.resolve(r.from+1);o=zt.rowSelection(u,u)}else if(!t){const u=nn.get(r.node),d=r.from+1,h=d+u.map[u.width*u.height-1];o=zt.create(s,d+1,h)}}else r instanceof He&&u7(r)?o=He.create(s,r.from):r instanceof He&&d7(r)&&(o=He.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var h7=new dn("fix-tables");function $N(n,e,t,r){const s=n.childCount,o=e.childCount;e:for(let l=0,u=0;l<o;l++){const d=e.child(l);for(let h=u,p=Math.min(s,l+3);h<p;h++)if(n.child(h)==d){u=h+1,t+=d.nodeSize;continue e}r(d,t),u<s&&n.child(u).sameMarkup(d)?$N(n.child(u),d,t+1,r):d.nodesBetween(0,d.content.size,r,t+1),t+=d.nodeSize}}function qN(n,e){let t;const r=(s,o)=>{s.type.spec.tableRole=="table"&&(t=p7(n,s,o,t))};return e?e.doc!=n.doc&&$N(e.doc,n.doc,0,r):n.doc.descendants(r),t}function p7(n,e,t,r){const s=nn.get(e);if(!s.problems)return r;r||(r=n.tr);const o=[];for(let d=0;d<s.height;d++)o.push(0);for(let d=0;d<s.problems.length;d++){const h=s.problems[d];if(h.type=="collision"){const p=e.nodeAt(h.pos);if(!p)continue;const m=p.attrs;for(let x=0;x<m.rowspan;x++)o[h.row+x]+=h.n;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,ta(m,m.colspan-h.n,h.n))}else if(h.type=="missing")o[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const p=r.mapping.map(t);r.delete(p,p+e.nodeSize)}}let l,u;for(let d=0;d<o.length;d++)o[d]&&(l==null&&(l=d),u=d);for(let d=0,h=t+1;d<s.height;d++){const p=e.child(d),m=h+p.nodeSize,x=o[d];if(x>0){let v="cell";p.firstChild&&(v=p.firstChild.type.spec.tableRole);const w=[];for(let C=0;C<x;C++){const T=Wn(n.schema)[v].createAndFill();T&&w.push(T)}const S=(d==0||l==d-1)&&u==d?h+1:m-1;r.insert(r.mapping.map(S),w)}h=m}return r.setMeta(h7,{fixTables:!0})}function Mi(n){const e=n.selection,t=Ih(n),r=t.node(-1),s=t.start(-1),o=nn.get(r);return{...e instanceof zt?o.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):o.findCell(t.pos-s),tableStart:s,map:o,table:r}}function PN(n,{map:e,tableStart:t,table:r},s){let o=s>0?-1:0;a7(e,r,s+o)&&(o=s==0||s==e.width?null:0);for(let l=0;l<e.height;l++){const u=l*e.width+s;if(s>0&&s<e.width&&e.map[u-1]==e.map[u]){const d=e.map[u],h=r.nodeAt(d);n.setNodeMarkup(n.mapping.map(t+d),null,HN(h.attrs,s-e.colCount(d))),l+=h.attrs.rowspan-1}else{const d=o==null?Wn(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,h=e.positionAt(l,s,r);n.insert(n.mapping.map(t+h),d.createAndFill())}}return n}function m7(n,e){if(!ai(n))return!1;if(e){const t=Mi(n);e(PN(n.tr,t,t.left))}return!0}function g7(n,e){if(!ai(n))return!1;if(e){const t=Mi(n);e(PN(n.tr,t,t.right))}return!0}function y7(n,{map:e,table:t,tableStart:r},s){const o=n.mapping.maps.length;for(let l=0;l<e.height;){const u=l*e.width+s,d=e.map[u],h=t.nodeAt(d),p=h.attrs;if(s>0&&e.map[u-1]==d||s<e.width-1&&e.map[u+1]==d)n.setNodeMarkup(n.mapping.slice(o).map(r+d),null,ta(p,s-e.colCount(d)));else{const m=n.mapping.slice(o).map(r+d);n.delete(m,m+h.nodeSize)}l+=p.rowspan}}function b7(n,e){if(!ai(n))return!1;if(e){const t=Mi(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let s=t.right-1;y7(r,t,s),s!=t.left;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=nn.get(o)}e(r)}return!0}function x7(n,e,t){var r;const s=Wn(e.type.schema).header_cell;for(let o=0;o<n.width;o++)if(((r=e.nodeAt(n.map[o+t*n.width]))==null?void 0:r.type)!=s)return!1;return!0}function VN(n,{map:e,tableStart:t,table:r},s){var o;let l=t;for(let h=0;h<s;h++)l+=r.child(h).nodeSize;const u=[];let d=s>0?-1:0;x7(e,r,s+d)&&(d=s==0||s==e.height?null:0);for(let h=0,p=e.width*s;h<e.width;h++,p++)if(s>0&&s<e.height&&e.map[p]==e.map[p-e.width]){const m=e.map[p],x=r.nodeAt(m).attrs;n.setNodeMarkup(t+m,null,{...x,rowspan:x.rowspan+1}),h+=x.colspan-1}else{const m=d==null?Wn(r.type.schema).cell:(o=r.nodeAt(e.map[p+d*e.width]))==null?void 0:o.type,x=m==null?void 0:m.createAndFill();x&&u.push(x)}return n.insert(l,Wn(r.type.schema).row.create(null,u)),n}function v7(n,e){if(!ai(n))return!1;if(e){const t=Mi(n);e(VN(n.tr,t,t.top))}return!0}function w7(n,e){if(!ai(n))return!1;if(e){const t=Mi(n);e(VN(n.tr,t,t.bottom))}return!0}function S7(n,{map:e,table:t,tableStart:r},s){let o=0;for(let h=0;h<s;h++)o+=t.child(h).nodeSize;const l=o+t.child(s).nodeSize,u=n.mapping.maps.length;n.delete(o+r,l+r);const d=new Set;for(let h=0,p=s*e.width;h<e.width;h++,p++){const m=e.map[p];if(!d.has(m)){if(d.add(m),s>0&&m==e.map[p-e.width]){const x=t.nodeAt(m).attrs;n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...x,rowspan:x.rowspan-1}),h+=x.colspan-1}else if(s<e.height&&m==e.map[p+e.width]){const x=t.nodeAt(m),v=x.attrs,w=x.type.create({...v,rowspan:x.attrs.rowspan-1},x.content),S=e.positionAt(s+1,h,t);n.insert(n.mapping.slice(u).map(r+S),w),h+=v.colspan-1}}}}function E7(n,e){if(!ai(n))return!1;if(e){const t=Mi(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let s=t.bottom-1;S7(r,t,s),s!=t.top;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=nn.get(t.table)}e(r)}return!0}function qS(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function C7({width:n,height:e,map:t},r){let s=r.top*n+r.left,o=s,l=(r.bottom-1)*n+r.left,u=s+(r.right-r.left-1);for(let d=r.top;d<r.bottom;d++){if(r.left>0&&t[o]==t[o-1]||r.right<n&&t[u]==t[u+1])return!0;o+=n,u+=n}for(let d=r.left;d<r.right;d++){if(r.top>0&&t[s]==t[s-n]||r.bottom<e&&t[l]==t[l+n])return!0;s++,l++}return!1}function PS(n,e){const t=n.selection;if(!(t instanceof zt)||t.$anchorCell.pos==t.$headCell.pos)return!1;const r=Mi(n),{map:s}=r;if(C7(s,r))return!1;if(e){const o=n.tr,l={};let u=le.empty,d,h;for(let p=r.top;p<r.bottom;p++)for(let m=r.left;m<r.right;m++){const x=s.map[p*s.width+m],v=r.table.nodeAt(x);if(!(l[x]||!v))if(l[x]=!0,d==null)d=x,h=v;else{qS(v)||(u=u.append(v.content));const w=o.mapping.map(x+r.tableStart);o.delete(w,w+v.nodeSize)}}if(d==null||h==null)return!0;if(o.setNodeMarkup(d+r.tableStart,null,{...HN(h.attrs,h.attrs.colspan,r.right-r.left-h.attrs.colspan),rowspan:r.bottom-r.top}),u.size){const p=d+1+h.content.size,m=qS(h)?d+1:p;o.replaceWith(m+r.tableStart,p+r.tableStart,u)}o.setSelection(new zt(o.doc.resolve(d+r.tableStart))),e(o)}return!0}function VS(n,e){const t=Wn(n.schema);return N7(({node:r})=>t[r.type.spec.tableRole])(n,e)}function N7(n){return(e,t)=>{var r;const s=e.selection;let o,l;if(s instanceof zt){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;o=s.$anchorCell.nodeAfter,l=s.$anchorCell.pos}else{if(o=i7(s.$from),!o)return!1;l=(r=gl(s.$from))==null?void 0:r.pos}if(o==null||l==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(t){let u=o.attrs;const d=[],h=u.colwidth;u.rowspan>1&&(u={...u,rowspan:1}),u.colspan>1&&(u={...u,colspan:1});const p=Mi(e),m=e.tr;for(let v=0;v<p.right-p.left;v++)d.push(h?{...u,colwidth:h&&h[v]?[h[v]]:null}:u);let x;for(let v=p.top;v<p.bottom;v++){let w=p.map.positionAt(v,p.left,p.table);v==p.top&&(w+=o.nodeSize);for(let S=p.left,C=0;S<p.right;S++,C++)S==p.left&&v==p.top||m.insert(x=m.mapping.map(w+p.tableStart,1),n({node:o,row:v,col:S}).createAndFill(d[C]))}m.setNodeMarkup(l,n({node:o,row:p.top,col:p.left}),d[0]),s instanceof zt&&m.setSelection(new zt(m.doc.resolve(s.$anchorCell.pos),x?m.doc.resolve(x):void 0)),t(m)}return!0}}function T7(n,e){return function(t,r){if(!ai(t))return!1;const s=Ih(t);if(s.nodeAfter.attrs[n]===e)return!1;if(r){const o=t.tr;t.selection instanceof zt?t.selection.forEachCell((l,u)=>{l.attrs[n]!==e&&o.setNodeMarkup(u,null,{...l.attrs,[n]:e})}):o.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[n]:e}),r(o)}return!0}}function k7(n){return function(e,t){if(!ai(e))return!1;if(t){const r=Wn(e.schema),s=Mi(e),o=e.tr,l=s.map.cellsInRect(n=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:n=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),u=l.map(d=>s.table.nodeAt(d));for(let d=0;d<l.length;d++)u[d].type==r.header_cell&&o.setNodeMarkup(s.tableStart+l[d],r.cell,u[d].attrs);if(o.steps.length==0)for(let d=0;d<l.length;d++)o.setNodeMarkup(s.tableStart+l[d],r.header_cell,u[d].attrs);t(o)}return!0}}function FS(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const o=e.table.nodeAt(r[s]);if(o&&o.type!==t.header_cell)return!1}return!0}function ru(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?k7(n):function(t,r){if(!ai(t))return!1;if(r){const s=Wn(t.schema),o=Mi(t),l=t.tr,u=FS("row",o,s),d=FS("column",o,s),p=(n==="column"?u:n==="row"?d:!1)?1:0,m=n=="column"?{left:0,top:p,right:1,bottom:o.map.height}:n=="row"?{left:p,top:0,right:o.map.width,bottom:1}:o,x=n=="column"?d?s.cell:s.header_cell:n=="row"?u?s.cell:s.header_cell:s.cell;o.map.cellsInRect(m).forEach(v=>{const w=v+o.tableStart,S=l.doc.nodeAt(w);S&&l.setNodeMarkup(w,x,S.attrs)}),r(l)}return!0}}ru("row",{useDeprecatedLogic:!0});ru("column",{useDeprecatedLogic:!0});var A7=ru("cell",{useDeprecatedLogic:!0});function M7(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,s=n.before();r>=0;r--){const o=n.node(-1).child(r),l=o.lastChild;if(l)return s-1-l.nodeSize;s-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),s=n.after();r<t.childCount;r++){const o=t.child(r);if(o.childCount)return s+1;s+=o.nodeSize}}return null}function GS(n){return function(e,t){if(!ai(e))return!1;const r=M7(Ih(e),n);if(r==null)return!1;if(t){const s=e.doc.resolve(r);t(e.tr.setSelection(He.between(s,o7(s))).scrollIntoView())}return!0}}function O7(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Xd(n,e){const t=n.selection;if(!(t instanceof zt))return!1;if(e){const r=n.tr,s=Wn(n.schema).cell.createAndFill().content;t.forEachCell((o,l)=>{o.content.eq(s)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new ve(s,0,0))}),r.docChanged&&e(r)}return!0}function R7(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const s=e.child(0),o=s.type.spec.tableRole,l=s.type.schema,u=[];if(o=="row")for(let d=0;d<e.childCount;d++){let h=e.child(d).content;const p=d?0:Math.max(0,t-1),m=d<e.childCount-1?0:Math.max(0,r-1);(p||m)&&(h=O0(Wn(l).row,new ve(h,p,m)).content),u.push(h)}else if(o=="cell"||o=="header_cell")u.push(t||r?O0(Wn(l).row,new ve(e,t,r)).content:e);else return null;return D7(l,u)}function D7(n,e){const t=[];for(let s=0;s<e.length;s++){const o=e[s];for(let l=o.childCount-1;l>=0;l--){const{rowspan:u,colspan:d}=o.child(l).attrs;for(let h=s;h<s+u;h++)t[h]=(t[h]||0)+d}}let r=0;for(let s=0;s<t.length;s++)r=Math.max(r,t[s]);for(let s=0;s<t.length;s++)if(s>=e.length&&e.push(le.empty),t[s]<r){const o=Wn(n).cell.createAndFill(),l=[];for(let u=t[s];u<r;u++)l.push(o);e[s]=e[s].append(le.from(l))}return{height:e.length,width:r,rows:e}}function O0(n,e){const t=n.createAndFill();return new Y0(t).replace(0,t.content.size,e).doc}function j7({width:n,height:e,rows:t},r,s){if(n!=r){const o=[],l=[];for(let u=0;u<t.length;u++){const d=t[u],h=[];for(let p=o[u]||0,m=0;p<r;m++){let x=d.child(m%d.childCount);p+x.attrs.colspan>r&&(x=x.type.createChecked(ta(x.attrs,x.attrs.colspan,p+x.attrs.colspan-r),x.content)),h.push(x),p+=x.attrs.colspan;for(let v=1;v<x.attrs.rowspan;v++)o[u+v]=(o[u+v]||0)+x.attrs.colspan}l.push(le.from(h))}t=l,n=r}if(e!=s){const o=[];for(let l=0,u=0;l<s;l++,u++){const d=[],h=t[u%e];for(let p=0;p<h.childCount;p++){let m=h.child(p);l+m.attrs.rowspan>s&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,s-m.attrs.rowspan)},m.content)),d.push(m)}o.push(le.from(d))}t=o,e=s}return{width:n,height:e,rows:t}}function _7(n,e,t,r,s,o,l){const u=n.doc.type.schema,d=Wn(u);let h,p;if(s>e.width)for(let m=0,x=0;m<e.height;m++){const v=t.child(m);x+=v.nodeSize;const w=[];let S;v.lastChild==null||v.lastChild.type==d.cell?S=h||(h=d.cell.createAndFill()):S=p||(p=d.header_cell.createAndFill());for(let C=e.width;C<s;C++)w.push(S);n.insert(n.mapping.slice(l).map(x-1+r),w)}if(o>e.height){const m=[];for(let w=0,S=(e.height-1)*e.width;w<Math.max(e.width,s);w++){const C=w>=e.width?!1:t.nodeAt(e.map[S+w]).type==d.header_cell;m.push(C?p||(p=d.header_cell.createAndFill()):h||(h=d.cell.createAndFill()))}const x=d.row.create(null,le.from(m)),v=[];for(let w=e.height;w<o;w++)v.push(x);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),v)}return!!(h||p)}function KS(n,e,t,r,s,o,l,u){if(l==0||l==e.height)return!1;let d=!1;for(let h=s;h<o;h++){const p=l*e.width+h,m=e.map[p];if(e.map[p-e.width]==m){d=!0;const x=t.nodeAt(m),{top:v,left:w}=e.findCell(m);n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...x.attrs,rowspan:l-v}),n.insert(n.mapping.slice(u).map(e.positionAt(l,w,t)),x.type.createAndFill({...x.attrs,rowspan:v+x.attrs.rowspan-l})),h+=x.attrs.colspan-1}}return d}function WS(n,e,t,r,s,o,l,u){if(l==0||l==e.width)return!1;let d=!1;for(let h=s;h<o;h++){const p=h*e.width+l,m=e.map[p];if(e.map[p-1]==m){d=!0;const x=t.nodeAt(m),v=e.colCount(m),w=n.mapping.slice(u).map(m+r);n.setNodeMarkup(w,null,ta(x.attrs,l-v,x.attrs.colspan-(l-v))),n.insert(w+x.nodeSize,x.type.createAndFill(ta(x.attrs,0,l-v))),h+=x.attrs.rowspan-1}}return d}function QS(n,e,t,r,s){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let l=nn.get(o);const{top:u,left:d}=r,h=d+s.width,p=u+s.height,m=n.tr;let x=0;function v(){if(o=t?m.doc.nodeAt(t-1):m.doc,!o)throw new Error("No table found");l=nn.get(o),x=m.mapping.maps.length}_7(m,l,o,t,h,p,x)&&v(),KS(m,l,o,t,d,h,u,x)&&v(),KS(m,l,o,t,d,h,p,x)&&v(),WS(m,l,o,t,u,p,d,x)&&v(),WS(m,l,o,t,u,p,h,x)&&v();for(let w=u;w<p;w++){const S=l.positionAt(w,d,o),C=l.positionAt(w,h,o);m.replace(m.mapping.slice(x).map(S+t),m.mapping.slice(x).map(C+t),new ve(s.rows[w-u],0,0))}v(),m.setSelection(new zt(m.doc.resolve(t+l.positionAt(u,d,o)),m.doc.resolve(t+l.positionAt(p-1,h-1,o)))),e(m)}var L7=ay({ArrowLeft:Jd("horiz",-1),ArrowRight:Jd("horiz",1),ArrowUp:Jd("vert",-1),ArrowDown:Jd("vert",1),"Shift-ArrowLeft":Zd("horiz",-1),"Shift-ArrowRight":Zd("horiz",1),"Shift-ArrowUp":Zd("vert",-1),"Shift-ArrowDown":Zd("vert",1),Backspace:Xd,"Mod-Backspace":Xd,Delete:Xd,"Mod-Delete":Xd});function hf(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Jd(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;if(o instanceof zt)return hf(t,r,Pe.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const l=FN(s,n,e);if(l==null)return!1;if(n=="horiz")return hf(t,r,Pe.near(t.doc.resolve(o.head+e),e));{const u=t.doc.resolve(l),d=IN(u,n,e);let h;return d?h=Pe.near(d,1):e<0?h=Pe.near(t.doc.resolve(u.before(-1)),-1):h=Pe.near(t.doc.resolve(u.after(-1)),1),hf(t,r,h)}}}function Zd(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;let l;if(o instanceof zt)l=o;else{const d=FN(s,n,e);if(d==null)return!1;l=new zt(t.doc.resolve(d))}const u=IN(l.$headCell,n,e);return u?hf(t,r,new zt(l.$anchorCell,u)):!1}}function B7(n,e){const t=n.state.doc,r=gl(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new zt(r))),!0):!1}function z7(n,e,t){if(!ai(n.state))return!1;let r=R7(t);const s=n.state.selection;if(s instanceof zt){r||(r={width:1,height:1,rows:[le.from(O0(Wn(n.state.schema).cell,t))]});const o=s.$anchorCell.node(-1),l=s.$anchorCell.start(-1),u=nn.get(o).rectBetween(s.$anchorCell.pos-l,s.$headCell.pos-l);return r=j7(r,u.right-u.left,u.bottom-u.top),QS(n.state,n.dispatch,l,u,r),!0}else if(r){const o=Ih(n.state),l=o.start(-1);return QS(n.state,n.dispatch,l,nn.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function I7(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=YS(n,e.target);let s;if(e.shiftKey&&n.state.selection instanceof zt)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=gl(n.state.selection.$anchor))!=null&&((t=Lg(n,e))==null?void 0:t.pos)!=s.pos)o(s,e),e.preventDefault();else if(!r)return;function o(d,h){let p=Lg(n,h);const m=Gs.getState(n.state)==null;if(!p||!Hy(d,p))if(m)p=d;else return;const x=new zt(d,p);if(m||!n.state.selection.eq(x)){const v=n.state.tr.setSelection(x);m&&v.setMeta(Gs,d.pos),n.dispatch(v)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",u),Gs.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Gs,-1))}function u(d){const h=d,p=Gs.getState(n.state);let m;if(p!=null)m=n.state.doc.resolve(p);else if(YS(n,h.target)!=r&&(m=Lg(n,e),!m))return l();m&&o(m,h)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",u)}function FN(n,e,t){if(!(n.state.selection instanceof He))return null;const{$head:r}=n.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((t<0?r.index(s):r.indexAfter(s))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(s),d=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(d)?u:null}}return null}function YS(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Lg(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?gl(n.state.doc.resolve(t.pos)):null}var H7=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),R0(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,R0(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function R0(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p){for(let m=0,x=0;m<p.childCount;m++){const{colspan:v,colwidth:w}=p.child(m).attrs;for(let S=0;S<v;S++,x++){const C=s==x?o:w&&w[S],T=C?C+"px":"";if(u+=C||r,C||(d=!1),h)h.style.width!=T&&(h.style.width=T),h=h.nextSibling;else{const j=document.createElement("col");j.style.width=T,e.appendChild(j)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)==null||l.removeChild(h),h=m}d?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var Mr=new dn("tableColumnResizing");function U7({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=H7,lastColumnResizable:s=!0}={}){const o=new Wt({key:Mr,state:{init(l,u){var d,h;const p=(h=(d=o.spec)==null?void 0:d.props)==null?void 0:h.nodeViews,m=Wn(u.schema).table.name;return r&&p&&(p[m]=(x,v)=>new r(x,t,v)),new $7(-1,!1)},apply(l,u){return u.apply(l)}},props:{attributes:l=>{const u=Mr.getState(l);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,u)=>{q7(l,u,n,s)},mouseleave:l=>{P7(l)},mousedown:(l,u)=>{V7(l,u,e,t)}},decorations:l=>{const u=Mr.getState(l);if(u&&u.activeHandle>-1)return Q7(l,u.activeHandle)},nodeViews:{}}});return o}var $7=class pf{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(Mr);if(r&&r.setHandle!=null)return new pf(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new pf(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let s=e.mapping.map(t.activeHandle,-1);return M0(e.doc.resolve(s))||(s=-1),new pf(s,t.dragging)}return t}};function q7(n,e,t,r){if(!n.editable)return;const s=Mr.getState(n.state);if(s&&!s.dragging){const o=G7(e.target);let l=-1;if(o){const{left:u,right:d}=o.getBoundingClientRect();e.clientX-u<=t?l=XS(n,e,"left",t):d-e.clientX<=t&&(l=XS(n,e,"right",t))}if(l!=s.activeHandle){if(!r&&l!==-1){const u=n.state.doc.resolve(l),d=u.node(-1),h=nn.get(d),p=u.start(-1);if(h.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==h.width-1)return}GN(n,l)}}}function P7(n){if(!n.editable)return;const e=Mr.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&GN(n,-1)}function V7(n,e,t,r){var s;if(!n.editable)return!1;const o=(s=n.dom.ownerDocument.defaultView)!=null?s:window,l=Mr.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const u=n.state.doc.nodeAt(l.activeHandle),d=F7(n,l.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(Mr,{setDragging:{startX:e.clientX,startWidth:d}}));function h(m){o.removeEventListener("mouseup",h),o.removeEventListener("mousemove",p);const x=Mr.getState(n.state);x!=null&&x.dragging&&(K7(n,x.activeHandle,JS(x.dragging,m,t)),n.dispatch(n.state.tr.setMeta(Mr,{setDragging:null})))}function p(m){if(!m.which)return h(m);const x=Mr.getState(n.state);if(x&&x.dragging){const v=JS(x.dragging,m,t);ZS(n,x.activeHandle,v,r)}}return ZS(n,l.activeHandle,d,r),o.addEventListener("mouseup",h),o.addEventListener("mousemove",p),e.preventDefault(),!0}function F7(n,e,{colspan:t,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const o=n.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,d=t;if(r)for(let h=0;h<t;h++)r[h]&&(u-=r[h],d--);return u/d}function G7(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function XS(n,e,t,r){const s=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+s,top:e.clientY});if(!o)return-1;const{pos:l}=o,u=gl(n.state.doc.resolve(l));if(!u)return-1;if(t=="right")return u.pos;const d=nn.get(u.node(-1)),h=u.start(-1),p=d.map.indexOf(u.pos-h);return p%d.width==0?-1:h+d.map[p-1]}function JS(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function GN(n,e){n.dispatch(n.state.tr.setMeta(Mr,{setHandle:e}))}function K7(n,e,t){const r=n.state.doc.resolve(e),s=r.node(-1),o=nn.get(s),l=r.start(-1),u=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,d=n.state.tr;for(let h=0;h<o.height;h++){const p=h*o.width+u;if(h&&o.map[p]==o.map[p-o.width])continue;const m=o.map[p],x=s.nodeAt(m).attrs,v=x.colspan==1?0:u-o.colCount(m);if(x.colwidth&&x.colwidth[v]==t)continue;const w=x.colwidth?x.colwidth.slice():W7(x.colspan);w[v]=t,d.setNodeMarkup(l+m,null,{...x,colwidth:w})}d.docChanged&&n.dispatch(d)}function ZS(n,e,t,r){const s=n.state.doc.resolve(e),o=s.node(-1),l=s.start(-1),u=nn.get(o).colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1;let d=n.domAtPos(s.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&R0(o,d.firstChild,d,r,u,t)}function W7(n){return Array(n).fill(0)}function Q7(n,e){var t;const r=[],s=n.doc.resolve(e),o=s.node(-1);if(!o)return Vt.empty;const l=nn.get(o),u=s.start(-1),d=l.colCount(s.pos-u)+s.nodeAfter.attrs.colspan-1;for(let h=0;h<l.height;h++){const p=d+h*l.width;if((d==l.width-1||l.map[p]!=l.map[p+1])&&(h==0||l.map[p]!=l.map[p-l.width])){const m=l.map[p],x=u+m+o.nodeAt(m).nodeSize-1,v=document.createElement("div");v.className="column-resize-handle",(t=Mr.getState(n))!=null&&t.dragging&&r.push(kn.node(u+m,u+m+o.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),r.push(kn.widget(x,v))}}return Vt.create(n.doc,r)}function Y7({allowTableNodeSelection:n=!1}={}){return new Wt({key:Gs,state:{init(){return null},apply(e,t){const r=e.getMeta(Gs);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:s,pos:o}=e.mapping.mapResult(t);return s?null:o}},props:{decorations:c7,handleDOMEvents:{mousedown:I7},createSelectionBetween(e){return Gs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:B7,handleKeyDown:L7,handlePaste:z7},appendTransaction(e,t,r){return f7(r,qN(r,t),n)}})}function D0(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function eE(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p!==null)for(let m=0,x=0;m<p.childCount;m+=1){const{colspan:v,colwidth:w}=p.child(m).attrs;for(let S=0;S<v;S+=1,x+=1){const C=s===x?o:w&&w[S],T=C?`${C}px`:"";if(u+=C||r,C||(d=!1),h){if(h.style.width!==T){const[j,R]=D0(r,C);h.style.setProperty(j,R)}h=h.nextSibling}else{const j=document.createElement("col"),[R,A]=D0(r,C);j.style.setProperty(R,A),e.appendChild(j)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)===null||l===void 0||l.removeChild(h),h=m}d?(t.style.width=`${u}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${u}px`)}class X7{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),eE(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,eE(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function J7(n,e,t,r){let s=0,o=!0;const l=[],u=n.firstChild;if(!u)return{};for(let m=0,x=0;m<u.childCount;m+=1){const{colspan:v,colwidth:w}=u.child(m).attrs;for(let S=0;S<v;S+=1,x+=1){const C=t===x?r:w&&w[S];s+=C||e,C||(o=!1);const[T,j]=D0(e,C);l.push(["col",{style:`${T}: ${j}`}])}}const d=o?`${s}px`:"",h=o?"":`${s}px`;return{colgroup:["colgroup",{},...l],tableWidth:d,tableMinWidth:h}}function tE(n,e){return n.createAndFill()}function Z7(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function e8(n,e,t,r,s){const o=Z7(n),l=[],u=[];for(let h=0;h<t;h+=1){const p=tE(o.cell);if(p&&u.push(p),r){const m=tE(o.header_cell);m&&l.push(m)}}const d=[];for(let h=0;h<e;h+=1)d.push(o.row.createChecked(null,r&&h===0?l:u));return o.table.createChecked(null,d)}function t8(n){return n instanceof zt}const ef=({editor:n})=>{const{selection:e}=n.state;if(!t8(e))return!1;let t=0;const r=VC(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},n8=Kt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:X7,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:r,tableMinWidth:s}=J7(n,this.options.cellMinWidth),o=["table",xt(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),t,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},o]:o},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:s,editor:o})=>{const l=e8(o.schema,n,e,t);if(s){const u=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(He.near(r.doc.resolve(u)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>m7(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>g7(n,e),deleteColumn:()=>({state:n,dispatch:e})=>b7(n,e),addRowBefore:()=>({state:n,dispatch:e})=>v7(n,e),addRowAfter:()=>({state:n,dispatch:e})=>w7(n,e),deleteRow:()=>({state:n,dispatch:e})=>E7(n,e),deleteTable:()=>({state:n,dispatch:e})=>O7(n,e),mergeCells:()=>({state:n,dispatch:e})=>PS(n,e),splitCell:()=>({state:n,dispatch:e})=>VS(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>ru("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>ru("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>A7(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>PS(n,e)?!0:VS(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>T7(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>GS(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>GS(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&qN(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=zt.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:ef,"Mod-Backspace":ef,Delete:ef,"Mod-Delete":ef}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[U7({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Y7({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:rt(Me(n,"tableRole",e))}}}),r8=Kt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",xt(this.options.HTMLAttributes,n),0]}}),i8=Kt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",xt(this.options.HTMLAttributes,n),0]}}),s8=Kt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",xt(this.options.HTMLAttributes,n),0]}}),fh=(n,e)=>e.view.domAtPos(n).node.offsetParent!==null,o8=(n,e,t)=>{for(let r=n.depth;r>0;r-=1){const s=n.node(r),o=e(s),l=fh(n.start(r),t);if(o&&l)return{pos:r>0?n.before(r):0,start:n.start(r),depth:r,node:s}}},nE=(n,e)=>{const{state:t,view:r,extensionManager:s}=n,{schema:o,selection:l}=t,{empty:u,$anchor:d}=l,h=!!s.extensions.find(T=>T.name==="gapCursor");if(!u||d.parent.type!==o.nodes.detailsSummary||!h||e==="right"&&d.parentOffset!==d.parent.nodeSize-2)return!1;const p=pl(T=>T.type===o.nodes.details)(l);if(!p)return!1;const m=Fo(p.node,T=>T.type===o.nodes.detailsContent);if(!m.length||fh(p.start+m[0].pos+1,n))return!1;const v=t.doc.resolve(p.pos+p.node.nodeSize),w=Gt.findFrom(v,1,!1);if(!w)return!1;const{tr:S}=t,C=new Gt(w);return S.setSelection(C),S.scrollIntoView(),r.dispatch(S),!0},a8=Kt.create({name:"details",content:"detailsSummary detailsContent",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,addOptions(){return{persist:!1,openClassName:"is-open",HTMLAttributes:{}}},addAttributes(){return this.options.persist?{open:{default:!1,parseHTML:n=>n.hasAttribute("open"),renderHTML:({open:n})=>n?{open:""}:{}}}:[]},parseHTML(){return[{tag:"details"}]},renderHTML({HTMLAttributes:n}){return["details",xt(this.options.HTMLAttributes,n),0]},addNodeView(){return({editor:n,getPos:e,node:t,HTMLAttributes:r})=>{const s=document.createElement("div"),o=xt(this.options.HTMLAttributes,r,{"data-type":this.name});Object.entries(o).forEach(([h,p])=>s.setAttribute(h,p));const l=document.createElement("button");l.type="button",s.append(l);const u=document.createElement("div");s.append(u);const d=h=>{if(h!==void 0)if(h){if(s.classList.contains(this.options.openClassName))return;s.classList.add(this.options.openClassName)}else{if(!s.classList.contains(this.options.openClassName))return;s.classList.remove(this.options.openClassName)}else s.classList.toggle(this.options.openClassName);const p=new Event("toggleDetailsContent"),m=u.querySelector(':scope > div[data-type="detailsContent"]');m==null||m.dispatchEvent(p)};return t.attrs.open&&setTimeout(()=>d()),l.addEventListener("click",()=>{if(d(),!this.options.persist){n.commands.focus(void 0,{scrollIntoView:!1});return}if(n.isEditable&&typeof e=="function"){const{from:h,to:p}=n.state.selection;n.chain().command(({tr:m})=>{const x=e(),v=m.doc.nodeAt(x);return(v==null?void 0:v.type)!==this.type?!1:(m.setNodeMarkup(x,void 0,{open:!v.attrs.open}),!0)}).setTextSelection({from:h,to:p}).focus(void 0,{scrollIntoView:!1}).run()}}),{dom:s,contentDOM:u,ignoreMutation(h){return h.type==="selection"?!1:!s.contains(h.target)||s===h.target},update:h=>h.type!==this.type?!1:(h.attrs.open!==void 0&&d(h.attrs.open),!0)}}},addCommands(){return{setDetails:()=>({state:n,chain:e})=>{var t;const{schema:r,selection:s}=n,{$from:o,$to:l}=s,u=o.blockRange(l);if(!u)return!1;const d=n.doc.slice(u.start,u.end);if(!r.nodes.detailsContent.contentMatch.matchFragment(d.content))return!1;const p=((t=d.toJSON())===null||t===void 0?void 0:t.content)||[];return e().insertContentAt({from:u.start,to:u.end},{type:this.name,content:[{type:"detailsSummary"},{type:"detailsContent",content:p}]}).setTextSelection(u.start+2).run()},unsetDetails:()=>({state:n,chain:e})=>{const{selection:t,schema:r}=n,s=pl(T=>T.type===this.type)(t);if(!s)return!1;const o=Fo(s.node,T=>T.type===r.nodes.detailsSummary),l=Fo(s.node,T=>T.type===r.nodes.detailsContent);if(!o.length||!l.length)return!1;const u=o[0],d=l[0],h=s.pos,p=n.doc.resolve(h),m=h+s.node.nodeSize,x={from:h,to:m},v=d.node.content.toJSON()||[],w=p.parent.type.contentMatch.defaultType,C=[w==null?void 0:w.create(null,u.node.content).toJSON(),...v];return e().insertContentAt(x,C).setTextSelection(h+1).run()}}},addKeyboardShortcuts(){return{Backspace:()=>{const{schema:n,selection:e}=this.editor.state,{empty:t,$anchor:r}=e;return!t||r.parent.type!==n.nodes.detailsSummary?!1:r.parentOffset!==0?this.editor.commands.command(({tr:s})=>{const o=r.pos-1,l=r.pos;return s.delete(o,l),!0}):this.editor.commands.unsetDetails()},Enter:({editor:n})=>{const{state:e,view:t}=n,{schema:r,selection:s}=e,{$head:o}=s;if(o.parent.type!==r.nodes.detailsSummary)return!1;const l=fh(o.after()+1,n),u=l?e.doc.nodeAt(o.after()):o.node(-2);if(!u)return!1;const d=l?0:o.indexAfter(-1),h=yy(u.contentMatchAt(d));if(!h||!u.canReplaceWith(d,d,h))return!1;const p=h.createAndFill();if(!p)return!1;const m=l?o.after()+1:o.after(-1),x=e.tr.replaceWith(m,m,p),v=x.doc.resolve(m),w=Pe.near(v,1);return x.setSelection(w),x.scrollIntoView(),t.dispatch(x),!0},ArrowRight:({editor:n})=>nE(n,"right"),ArrowDown:({editor:n})=>nE(n,"down")}},addProseMirrorPlugins(){return[new Wt({key:new dn("detailsSelection"),appendTransaction:(n,e,t)=>{const{editor:r,type:s}=this;if(!n.some(C=>C.selectionSet)||!e.selection.empty||!t.selection.empty||!GC(t,s.name))return;const{$from:u}=t.selection;if(fh(u.pos,r))return;const h=o8(u,C=>C.type===s,r);if(!h)return;const p=Fo(h.node,C=>C.type===t.schema.nodes.detailsSummary);if(!p.length)return;const m=p[0],v=(e.selection.from<t.selection.from?"forward":"backward")==="forward"?h.start+m.pos:h.pos+m.pos+m.node.nodeSize,w=He.create(t.doc,v);return t.tr.setSelection(w)}})]}}),l8=Kt.create({name:"detailsSummary",content:"text*",defining:!0,selectable:!1,isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"summary"}]},renderHTML({HTMLAttributes:n}){return["summary",xt(this.options.HTMLAttributes,n),0]}}),c8=Kt.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){return["div",xt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addNodeView(){return({HTMLAttributes:n})=>{const e=document.createElement("div"),t=xt(this.options.HTMLAttributes,n,{"data-type":this.name,hidden:"hidden"});return Object.entries(t).forEach(([r,s])=>e.setAttribute(r,s)),e.addEventListener("toggleDetailsContent",()=>{e.toggleAttribute("hidden")}),{dom:e,contentDOM:e,ignoreMutation(r){return r.type==="selection"?!1:!e.contains(r.target)||e===r.target},update:r=>r.type===this.type}}},addKeyboardShortcuts(){return{Enter:({editor:n})=>{const{state:e,view:t}=n,{selection:r}=e,{$from:s,empty:o}=r,l=pl(xe=>xe.type===this.type)(r);if(!o||!l||!l.node.childCount)return!1;const u=s.index(l.depth),{childCount:d}=l.node;if(!(d===u+1))return!1;const p=l.node.type.contentMatch.defaultType,m=p==null?void 0:p.createAndFill();if(!m)return!1;const x=e.doc.resolve(l.pos+1),v=d-1,w=l.node.child(v),S=x.posAtIndex(v,l.depth);if(!w.eq(m))return!1;const T=s.node(-3);if(!T)return!1;const j=s.indexAfter(-3),R=yy(T.contentMatchAt(j));if(!R||!T.canReplaceWith(j,j,R))return!1;const A=R.createAndFill();if(!A)return!1;const{tr:L}=e,I=s.after(-2);L.replaceWith(I,I,A);const H=L.doc.resolve(I),W=Pe.near(H,1);L.setSelection(W);const re=S,me=S+w.nodeSize;return L.delete(re,me),L.scrollIntoView(),t.dispatch(L),!0}}}});function u8(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function KN(n){return n instanceof Map?n.clear=n.delete=n.set=function(){throw new Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=function(){throw new Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{const t=n[e],r=typeof t;(r==="object"||r==="function")&&!Object.isFrozen(t)&&KN(t)}),n}class rE{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function WN(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Xs(n,...e){const t=Object.create(null);for(const r in n)t[r]=n[r];return e.forEach(function(r){for(const s in r)t[s]=r[s]}),t}const d8="</span>",iE=n=>!!n.scope,f8=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){const t=n.split(".");return[`${e}${t.shift()}`,...t.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${n}`};class h8{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=WN(e)}openNode(e){if(!iE(e))return;const t=f8(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){iE(e)&&(this.buffer+=d8)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const sE=(n={})=>{const e={children:[]};return Object.assign(e,n),e};class Uy{constructor(){this.rootNode=sE(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=sE({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(r=>this._walk(e,r)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{Uy._collapse(t)}))}}class p8 extends Uy{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const r=e.root;t&&(r.scope=`language:${t}`),this.add(r)}toHTML(){return new h8(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function iu(n){return n?typeof n=="string"?n:n.source:null}function QN(n){return ia("(?=",n,")")}function m8(n){return ia("(?:",n,")*")}function g8(n){return ia("(?:",n,")?")}function ia(...n){return n.map(t=>iu(t)).join("")}function y8(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function $y(...n){return"("+(y8(n).capture?"":"?:")+n.map(r=>iu(r)).join("|")+")"}function YN(n){return new RegExp(n.toString()+"|").exec("").length-1}function b8(n,e){const t=n&&n.exec(e);return t&&t.index===0}const x8=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function qy(n,{joinWith:e}){let t=0;return n.map(r=>{t+=1;const s=t;let o=iu(r),l="";for(;o.length>0;){const u=x8.exec(o);if(!u){l+=o;break}l+=o.substring(0,u.index),o=o.substring(u.index+u[0].length),u[0][0]==="\\"&&u[1]?l+="\\"+String(Number(u[1])+s):(l+=u[0],u[0]==="("&&t++)}return l}).map(r=>`(${r})`).join(e)}const v8=/\b\B/,XN="[a-zA-Z]\\w*",Py="[a-zA-Z_]\\w*",JN="\\b\\d+(\\.\\d+)?",ZN="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",eT="\\b(0b[01]+)",w8="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",S8=(n={})=>{const e=/^#![ ]*\//;return n.binary&&(n.begin=ia(e,/.*\b/,n.binary,/\b.*/)),Xs({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,r)=>{t.index!==0&&r.ignoreMatch()}},n)},su={begin:"\\\\[\\s\\S]",relevance:0},E8={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[su]},C8={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[su]},N8={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Hh=function(n,e,t={}){const r=Xs({scope:"comment",begin:n,end:e,contains:[]},t);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=$y("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:ia(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},T8=Hh("//","$"),k8=Hh("/\\*","\\*/"),A8=Hh("#","$"),M8={scope:"number",begin:JN,relevance:0},O8={scope:"number",begin:ZN,relevance:0},R8={scope:"number",begin:eT,relevance:0},D8={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[su,{begin:/\[/,end:/\]/,relevance:0,contains:[su]}]},j8={scope:"title",begin:XN,relevance:0},_8={scope:"title",begin:Py,relevance:0},L8={begin:"\\.\\s*"+Py,relevance:0},B8=function(n){return Object.assign(n,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var tf=Object.freeze({__proto__:null,APOS_STRING_MODE:E8,BACKSLASH_ESCAPE:su,BINARY_NUMBER_MODE:R8,BINARY_NUMBER_RE:eT,COMMENT:Hh,C_BLOCK_COMMENT_MODE:k8,C_LINE_COMMENT_MODE:T8,C_NUMBER_MODE:O8,C_NUMBER_RE:ZN,END_SAME_AS_BEGIN:B8,HASH_COMMENT_MODE:A8,IDENT_RE:XN,MATCH_NOTHING_RE:v8,METHOD_GUARD:L8,NUMBER_MODE:M8,NUMBER_RE:JN,PHRASAL_WORDS_MODE:N8,QUOTE_STRING_MODE:C8,REGEXP_MODE:D8,RE_STARTERS_RE:w8,SHEBANG:S8,TITLE_MODE:j8,UNDERSCORE_IDENT_RE:Py,UNDERSCORE_TITLE_MODE:_8});function z8(n,e){n.input[n.index-1]==="."&&e.ignoreMatch()}function I8(n,e){n.className!==void 0&&(n.scope=n.className,delete n.className)}function H8(n,e){e&&n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",n.__beforeBegin=z8,n.keywords=n.keywords||n.beginKeywords,delete n.beginKeywords,n.relevance===void 0&&(n.relevance=0))}function U8(n,e){Array.isArray(n.illegal)&&(n.illegal=$y(...n.illegal))}function $8(n,e){if(n.match){if(n.begin||n.end)throw new Error("begin & end are not supported with match");n.begin=n.match,delete n.match}}function q8(n,e){n.relevance===void 0&&(n.relevance=1)}const P8=(n,e)=>{if(!n.beforeMatch)return;if(n.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},n);Object.keys(n).forEach(r=>{delete n[r]}),n.keywords=t.keywords,n.begin=ia(t.beforeMatch,QN(t.begin)),n.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},n.relevance=0,delete t.beforeMatch},V8=["of","and","for","in","not","or","if","then","parent","list","value"],F8="keyword";function tT(n,e,t=F8){const r=Object.create(null);return typeof n=="string"?s(t,n.split(" ")):Array.isArray(n)?s(t,n):Object.keys(n).forEach(function(o){Object.assign(r,tT(n[o],e,o))}),r;function s(o,l){e&&(l=l.map(u=>u.toLowerCase())),l.forEach(function(u){const d=u.split("|");r[d[0]]=[o,G8(d[0],d[1])]})}}function G8(n,e){return e?Number(e):K8(n)?0:1}function K8(n){return V8.includes(n.toLowerCase())}const oE={},Wo=n=>{console.error(n)},aE=(n,...e)=>{console.log(`WARN: ${n}`,...e)},Va=(n,e)=>{oE[`${n}/${e}`]||(console.log(`Deprecated as of ${n}. ${e}`),oE[`${n}/${e}`]=!0)},hh=new Error;function nT(n,e,{key:t}){let r=0;const s=n[t],o={},l={};for(let u=1;u<=e.length;u++)l[u+r]=s[u],o[u+r]=!0,r+=YN(e[u-1]);n[t]=l,n[t]._emit=o,n[t]._multi=!0}function W8(n){if(Array.isArray(n.begin)){if(n.skip||n.excludeBegin||n.returnBegin)throw Wo("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),hh;if(typeof n.beginScope!="object"||n.beginScope===null)throw Wo("beginScope must be object"),hh;nT(n,n.begin,{key:"beginScope"}),n.begin=qy(n.begin,{joinWith:""})}}function Q8(n){if(Array.isArray(n.end)){if(n.skip||n.excludeEnd||n.returnEnd)throw Wo("skip, excludeEnd, returnEnd not compatible with endScope: {}"),hh;if(typeof n.endScope!="object"||n.endScope===null)throw Wo("endScope must be object"),hh;nT(n,n.end,{key:"endScope"}),n.end=qy(n.end,{joinWith:""})}}function Y8(n){n.scope&&typeof n.scope=="object"&&n.scope!==null&&(n.beginScope=n.scope,delete n.scope)}function X8(n){Y8(n),typeof n.beginScope=="string"&&(n.beginScope={_wrap:n.beginScope}),typeof n.endScope=="string"&&(n.endScope={_wrap:n.endScope}),W8(n),Q8(n)}function J8(n){function e(l,u){return new RegExp(iu(l),"m"+(n.case_insensitive?"i":"")+(n.unicodeRegex?"u":"")+(u?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(u,d){d.position=this.position++,this.matchIndexes[this.matchAt]=d,this.regexes.push([d,u]),this.matchAt+=YN(u)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const u=this.regexes.map(d=>d[1]);this.matcherRe=e(qy(u,{joinWith:"|"}),!0),this.lastIndex=0}exec(u){this.matcherRe.lastIndex=this.lastIndex;const d=this.matcherRe.exec(u);if(!d)return null;const h=d.findIndex((m,x)=>x>0&&m!==void 0),p=this.matchIndexes[h];return d.splice(0,h),Object.assign(d,p)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(u){if(this.multiRegexes[u])return this.multiRegexes[u];const d=new t;return this.rules.slice(u).forEach(([h,p])=>d.addRule(h,p)),d.compile(),this.multiRegexes[u]=d,d}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(u,d){this.rules.push([u,d]),d.type==="begin"&&this.count++}exec(u){const d=this.getMatcher(this.regexIndex);d.lastIndex=this.lastIndex;let h=d.exec(u);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const p=this.getMatcher(0);p.lastIndex=this.lastIndex+1,h=p.exec(u)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(l){const u=new r;return l.contains.forEach(d=>u.addRule(d.begin,{rule:d,type:"begin"})),l.terminatorEnd&&u.addRule(l.terminatorEnd,{type:"end"}),l.illegal&&u.addRule(l.illegal,{type:"illegal"}),u}function o(l,u){const d=l;if(l.isCompiled)return d;[I8,$8,X8,P8].forEach(p=>p(l,u)),n.compilerExtensions.forEach(p=>p(l,u)),l.__beforeBegin=null,[H8,U8,q8].forEach(p=>p(l,u)),l.isCompiled=!0;let h=null;return typeof l.keywords=="object"&&l.keywords.$pattern&&(l.keywords=Object.assign({},l.keywords),h=l.keywords.$pattern,delete l.keywords.$pattern),h=h||/\w+/,l.keywords&&(l.keywords=tT(l.keywords,n.case_insensitive)),d.keywordPatternRe=e(h,!0),u&&(l.begin||(l.begin=/\B|\b/),d.beginRe=e(d.begin),!l.end&&!l.endsWithParent&&(l.end=/\B|\b/),l.end&&(d.endRe=e(d.end)),d.terminatorEnd=iu(d.end)||"",l.endsWithParent&&u.terminatorEnd&&(d.terminatorEnd+=(l.end?"|":"")+u.terminatorEnd)),l.illegal&&(d.illegalRe=e(l.illegal)),l.contains||(l.contains=[]),l.contains=[].concat(...l.contains.map(function(p){return Z8(p==="self"?l:p)})),l.contains.forEach(function(p){o(p,d)}),l.starts&&o(l.starts,u),d.matcher=s(d),d}if(n.compilerExtensions||(n.compilerExtensions=[]),n.contains&&n.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return n.classNameAliases=Xs(n.classNameAliases||{}),o(n)}function rT(n){return n?n.endsWithParent||rT(n.starts):!1}function Z8(n){return n.variants&&!n.cachedVariants&&(n.cachedVariants=n.variants.map(function(e){return Xs(n,{variants:null},e)})),n.cachedVariants?n.cachedVariants:rT(n)?Xs(n,{starts:n.starts?Xs(n.starts):null}):Object.isFrozen(n)?Xs(n):n}var eI="11.10.0";class tI extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const Bg=WN,lE=Xs,cE=Symbol("nomatch"),nI=7,iT=function(n){const e=Object.create(null),t=Object.create(null),r=[];let s=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let u={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p8};function d(D){return u.noHighlightRe.test(D)}function h(D){let U=D.className+" ";U+=D.parentNode?D.parentNode.className:"";const se=u.languageDetectRe.exec(U);if(se){const ue=re(se[1]);return ue||(aE(o.replace("{}",se[1])),aE("Falling back to no-highlight mode for this block.",D)),ue?se[1]:"no-highlight"}return U.split(/\s+/).find(ue=>d(ue)||re(ue))}function p(D,U,se){let ue="",O="";typeof U=="object"?(ue=D,se=U.ignoreIllegals,O=U.language):(Va("10.7.0","highlight(lang, code, ...args) has been deprecated."),Va("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),O=D,ue=U),se===void 0&&(se=!0);const V={code:ue,language:O};he("before:highlight",V);const Y=V.result?V.result:m(V.language,V.code,se);return Y.code=V.code,he("after:highlight",Y),Y}function m(D,U,se,ue){const O=Object.create(null);function V(ye,Ne){return ye.keywords[Ne]}function Y(){if(!K.keywords){We.addText(_e);return}let ye=0;K.keywordPatternRe.lastIndex=0;let Ne=K.keywordPatternRe.exec(_e),Ke="";for(;Ne;){Ke+=_e.substring(ye,Ne.index);const Ye=At.case_insensitive?Ne[0].toLowerCase():Ne[0],Ht=V(K,Ye);if(Ht){const[Xt,gr]=Ht;if(We.addText(Ke),Ke="",O[Ye]=(O[Ye]||0)+1,O[Ye]<=nI&&(st+=gr),Xt.startsWith("_"))Ke+=Ne[0];else{const X=At.classNameAliases[Xt]||Xt;we(Ne[0],X)}}else Ke+=Ne[0];ye=K.keywordPatternRe.lastIndex,Ne=K.keywordPatternRe.exec(_e)}Ke+=_e.substring(ye),We.addText(Ke)}function ce(){if(_e==="")return;let ye=null;if(typeof K.subLanguage=="string"){if(!e[K.subLanguage]){We.addText(_e);return}ye=m(K.subLanguage,_e,!0,Se[K.subLanguage]),Se[K.subLanguage]=ye._top}else ye=v(_e,K.subLanguage.length?K.subLanguage:null);K.relevance>0&&(st+=ye.relevance),We.__addSublanguage(ye._emitter,ye.language)}function fe(){K.subLanguage!=null?ce():Y(),_e=""}function we(ye,Ne){ye!==""&&(We.startScope(Ne),We.addText(ye),We.endScope())}function Ue(ye,Ne){let Ke=1;const Ye=Ne.length-1;for(;Ke<=Ye;){if(!ye._emit[Ke]){Ke++;continue}const Ht=At.classNameAliases[ye[Ke]]||ye[Ke],Xt=Ne[Ke];Ht?we(Xt,Ht):(_e=Xt,Y(),_e=""),Ke++}}function ae(ye,Ne){return ye.scope&&typeof ye.scope=="string"&&We.openNode(At.classNameAliases[ye.scope]||ye.scope),ye.beginScope&&(ye.beginScope._wrap?(we(_e,At.classNameAliases[ye.beginScope._wrap]||ye.beginScope._wrap),_e=""):ye.beginScope._multi&&(Ue(ye.beginScope,Ne),_e="")),K=Object.create(ye,{parent:{value:K}}),K}function $e(ye,Ne,Ke){let Ye=b8(ye.endRe,Ke);if(Ye){if(ye["on:end"]){const Ht=new rE(ye);ye["on:end"](Ne,Ht),Ht.isMatchIgnored&&(Ye=!1)}if(Ye){for(;ye.endsParent&&ye.parent;)ye=ye.parent;return ye}}if(ye.endsWithParent)return $e(ye.parent,Ne,Ke)}function pt(ye){return K.matcher.regexIndex===0?(_e+=ye[0],1):(_t=!0,0)}function It(ye){const Ne=ye[0],Ke=ye.rule,Ye=new rE(Ke),Ht=[Ke.__beforeBegin,Ke["on:begin"]];for(const Xt of Ht)if(Xt&&(Xt(ye,Ye),Ye.isMatchIgnored))return pt(Ne);return Ke.skip?_e+=Ne:(Ke.excludeBegin&&(_e+=Ne),fe(),!Ke.returnBegin&&!Ke.excludeBegin&&(_e=Ne)),ae(Ke,ye),Ke.returnBegin?0:Ne.length}function rn(ye){const Ne=ye[0],Ke=U.substring(ye.index),Ye=$e(K,ye,Ke);if(!Ye)return cE;const Ht=K;K.endScope&&K.endScope._wrap?(fe(),we(Ne,K.endScope._wrap)):K.endScope&&K.endScope._multi?(fe(),Ue(K.endScope,ye)):Ht.skip?_e+=Ne:(Ht.returnEnd||Ht.excludeEnd||(_e+=Ne),fe(),Ht.excludeEnd&&(_e=Ne));do K.scope&&We.closeNode(),!K.skip&&!K.subLanguage&&(st+=K.relevance),K=K.parent;while(K!==Ye.parent);return Ye.starts&&ae(Ye.starts,ye),Ht.returnEnd?0:Ne.length}function qn(){const ye=[];for(let Ne=K;Ne!==At;Ne=Ne.parent)Ne.scope&&ye.unshift(Ne.scope);ye.forEach(Ne=>We.openNode(Ne))}let jt={};function Sn(ye,Ne){const Ke=Ne&&Ne[0];if(_e+=ye,Ke==null)return fe(),0;if(jt.type==="begin"&&Ne.type==="end"&&jt.index===Ne.index&&Ke===""){if(_e+=U.slice(Ne.index,Ne.index+1),!s){const Ye=new Error(`0 width match regex (${D})`);throw Ye.languageName=D,Ye.badRule=jt.rule,Ye}return 1}if(jt=Ne,Ne.type==="begin")return It(Ne);if(Ne.type==="illegal"&&!se){const Ye=new Error('Illegal lexeme "'+Ke+'" for mode "'+(K.scope||"<unnamed>")+'"');throw Ye.mode=K,Ye}else if(Ne.type==="end"){const Ye=rn(Ne);if(Ye!==cE)return Ye}if(Ne.type==="illegal"&&Ke==="")return 1;if(vn>1e5&&vn>Ne.index*3)throw new Error("potential infinite loop, way more iterations than matches");return _e+=Ke,Ke.length}const At=re(D);if(!At)throw Wo(o.replace("{}",D)),new Error('Unknown language: "'+D+'"');const sn=J8(At);let En="",K=ue||sn;const Se={},We=new u.__emitter(u);qn();let _e="",st=0,Ze=0,vn=0,_t=!1;try{if(At.__emitTokens)At.__emitTokens(U,We);else{for(K.matcher.considerAll();;){vn++,_t?_t=!1:K.matcher.considerAll(),K.matcher.lastIndex=Ze;const ye=K.matcher.exec(U);if(!ye)break;const Ne=U.substring(Ze,ye.index),Ke=Sn(Ne,ye);Ze=ye.index+Ke}Sn(U.substring(Ze))}return We.finalize(),En=We.toHTML(),{language:D,value:En,relevance:st,illegal:!1,_emitter:We,_top:K}}catch(ye){if(ye.message&&ye.message.includes("Illegal"))return{language:D,value:Bg(U),illegal:!0,relevance:0,_illegalBy:{message:ye.message,index:Ze,context:U.slice(Ze-100,Ze+100),mode:ye.mode,resultSoFar:En},_emitter:We};if(s)return{language:D,value:Bg(U),illegal:!1,relevance:0,errorRaised:ye,_emitter:We,_top:K};throw ye}}function x(D){const U={value:Bg(D),illegal:!1,relevance:0,_top:l,_emitter:new u.__emitter(u)};return U._emitter.addText(D),U}function v(D,U){U=U||u.languages||Object.keys(e);const se=x(D),ue=U.filter(re).filter(xe).map(fe=>m(fe,D,!1));ue.unshift(se);const O=ue.sort((fe,we)=>{if(fe.relevance!==we.relevance)return we.relevance-fe.relevance;if(fe.language&&we.language){if(re(fe.language).supersetOf===we.language)return 1;if(re(we.language).supersetOf===fe.language)return-1}return 0}),[V,Y]=O,ce=V;return ce.secondBest=Y,ce}function w(D,U,se){const ue=U&&t[U]||se;D.classList.add("hljs"),D.classList.add(`language-${ue}`)}function S(D){let U=null;const se=h(D);if(d(se))return;if(he("before:highlightElement",{el:D,language:se}),D.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",D);return}if(D.children.length>0&&(u.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(D)),u.throwUnescapedHTML))throw new tI("One of your code blocks includes unescaped HTML.",D.innerHTML);U=D;const ue=U.textContent,O=se?p(ue,{language:se,ignoreIllegals:!0}):v(ue);D.innerHTML=O.value,D.dataset.highlighted="yes",w(D,se,O.language),D.result={language:O.language,re:O.relevance,relevance:O.relevance},O.secondBest&&(D.secondBest={language:O.secondBest.language,relevance:O.secondBest.relevance}),he("after:highlightElement",{el:D,result:O,text:ue})}function C(D){u=lE(u,D)}const T=()=>{A(),Va("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function j(){A(),Va("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let R=!1;function A(){if(document.readyState==="loading"){R=!0;return}document.querySelectorAll(u.cssSelector).forEach(S)}function L(){R&&A()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",L,!1);function I(D,U){let se=null;try{se=U(n)}catch(ue){if(Wo("Language definition for '{}' could not be registered.".replace("{}",D)),s)Wo(ue);else throw ue;se=l}se.name||(se.name=D),e[D]=se,se.rawDefinition=U.bind(null,n),se.aliases&&me(se.aliases,{languageName:D})}function H(D){delete e[D];for(const U of Object.keys(t))t[U]===D&&delete t[U]}function W(){return Object.keys(e)}function re(D){return D=(D||"").toLowerCase(),e[D]||e[t[D]]}function me(D,{languageName:U}){typeof D=="string"&&(D=[D]),D.forEach(se=>{t[se.toLowerCase()]=U})}function xe(D){const U=re(D);return U&&!U.disableAutodetect}function q(D){D["before:highlightBlock"]&&!D["before:highlightElement"]&&(D["before:highlightElement"]=U=>{D["before:highlightBlock"](Object.assign({block:U.el},U))}),D["after:highlightBlock"]&&!D["after:highlightElement"]&&(D["after:highlightElement"]=U=>{D["after:highlightBlock"](Object.assign({block:U.el},U))})}function ie(D){q(D),r.push(D)}function te(D){const U=r.indexOf(D);U!==-1&&r.splice(U,1)}function he(D,U){const se=D;r.forEach(function(ue){ue[se]&&ue[se](U)})}function B(D){return Va("10.7.0","highlightBlock will be removed entirely in v12.0"),Va("10.7.0","Please use highlightElement now."),S(D)}Object.assign(n,{highlight:p,highlightAuto:v,highlightAll:A,highlightElement:S,highlightBlock:B,configure:C,initHighlighting:T,initHighlightingOnLoad:j,registerLanguage:I,unregisterLanguage:H,listLanguages:W,getLanguage:re,registerAliases:me,autoDetection:xe,inherit:lE,addPlugin:ie,removePlugin:te}),n.debugMode=function(){s=!1},n.safeMode=function(){s=!0},n.versionString=eI,n.regex={concat:ia,lookahead:QN,either:$y,optional:g8,anyNumberOfTimes:m8};for(const D in tf)typeof tf[D]=="object"&&KN(tf[D]);return Object.assign(n,tf),n},ul=iT({});ul.newInstance=()=>iT({});var rI=ul;ul.HighlightJS=ul;ul.default=ul;var iI=u8(rI);function sT(n,e=[]){return n.map(t=>{const r=[...e,...t.properties?t.properties.className:[]];return t.children?sT(t.children,r):{text:t.value,classes:r}}).flat()}function uE(n){return n.value||n.children||[]}function sI(n){return!!iI.getLanguage(n)}function dE({doc:n,name:e,lowlight:t,defaultLanguage:r}){const s=[];return Fo(n,o=>o.type.name===e).forEach(o=>{var l;let u=o.pos+1;const d=o.node.attrs.language||r,h=t.listLanguages(),p=d&&(h.includes(d)||sI(d)||!((l=t.registered)===null||l===void 0)&&l.call(t,d))?uE(t.highlight(d,o.node.textContent)):uE(t.highlightAuto(o.node.textContent));sT(p).forEach(m=>{const x=u+m.text.length;if(m.classes.length){const v=kn.inline(u,x,{class:m.classes.join(" ")});s.push(v)}u=x})}),Vt.create(n,s)}function oI(n){return typeof n=="function"}function aI({name:n,lowlight:e,defaultLanguage:t}){if(!["highlight","highlightAuto","listLanguages"].every(s=>oI(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Wt({key:new dn("lowlight"),state:{init:(s,{doc:o})=>dE({doc:o,name:n,lowlight:e,defaultLanguage:t}),apply:(s,o,l,u)=>{const d=l.selection.$head.parent.type.name,h=u.selection.$head.parent.type.name,p=Fo(l.doc,x=>x.type.name===n),m=Fo(u.doc,x=>x.type.name===n);return s.docChanged&&([d,h].includes(n)||m.length!==p.length||s.steps.some(x=>x.from!==void 0&&x.to!==void 0&&p.some(v=>v.pos>=x.from&&v.pos+v.node.nodeSize<=x.to)))?dE({doc:s.doc,name:n,lowlight:e,defaultLanguage:t}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}const lI=EN.extend({addOptions(){var n;return{...(n=this.parent)===null||n===void 0?void 0:n.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var n;return[...((n=this.parent)===null||n===void 0?void 0:n.call(this))||[],aI({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),cI=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),uI=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],dI=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],fI=[...uI,...dI],hI=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),pI=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),mI=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),gI=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function yI(n){const e=n.regex,t=cI(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",o=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",u=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+pI.join("|")+")"},{begin:":(:)?("+mI.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+gI.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...u,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...u,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:hI.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...u,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+fI.join("|")+")\\b"}]}}const fE="[A-Za-z$_][0-9A-Za-z$_]*",bI=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],xI=["true","false","null","undefined","NaN","Infinity"],oT=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],aT=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],lT=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],vI=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],wI=[].concat(lT,oT,aT);function SI(n){const e=n.regex,t=(U,{after:se})=>{const ue="</"+U[0].slice(1);return U.input.indexOf(ue,se)!==-1},r=fE,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(U,se)=>{const ue=U[0].length+U.index,O=U.input[ue];if(O==="<"||O===","){se.ignoreMatch();return}O===">"&&(t(U,{after:ue})||se.ignoreMatch());let V;const Y=U.input.substring(ue);if(V=Y.match(/^\s*=/)){se.ignoreMatch();return}if((V=Y.match(/^\s+extends\s+/))&&V.index===0){se.ignoreMatch();return}}},u={$pattern:fE,keyword:bI,literal:xI,built_in:wI,"variable.language":vI},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},v={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,x]},j={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},R=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,{match:/\$\d+/},m];x.contains=R.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(R)});const A=[].concat(j,x.contains),L=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(A)}]),I={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:L},H={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},W={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...oT,...aT]}},re={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},me={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[I],illegal:/%/},xe={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(U){return e.concat("(?!",U.join("|"),")")}const ie={match:e.concat(/\b/,q([...lT,"super","import"].map(U=>`${U}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},te={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},he={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},I]},B="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(B)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[I]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:L,CLASS_REFERENCE:W},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),re,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,j,{match:/\$\d+/},m,W,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[j,n.REGEXP_MODE,{className:"function",begin:B,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:L}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},me,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[I,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},te,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[I]},ie,xe,H,he,{match:/\$[(.]/}]}}function EI(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,t,n.QUOTE_STRING_MODE,s,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function CI(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],u={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:u,illegal:/#/},p={begin:/\{\{/,relevance:0},m={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,p,h]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},x="[0-9](_?[0-9])*",v=`(\\b(${x}))?\\.(${x})|\\b(${x})\\.`,w=`\\b|${r.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${x})|(${v}))[eE][+-]?(${x})[jJ]?(?=${w})`},{begin:`(${v})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${w})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${w})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${w})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${w})`},{begin:`\\b(${x})[jJ](?=${w})`}]},C={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:u,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},T={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",d,S,m,n.HASH_COMMENT_MODE]}]};return h.contains=[m,S,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:u,illegal:/(<\/|\?)|=>/,contains:[d,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,C,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[T]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,T,m]}]}}const ph="[A-Za-z$_][0-9A-Za-z$_]*",cT=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],uT=["true","false","null","undefined","NaN","Infinity"],dT=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],fT=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],hT=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],pT=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],mT=[].concat(hT,dT,fT);function NI(n){const e=n.regex,t=(U,{after:se})=>{const ue="</"+U[0].slice(1);return U.input.indexOf(ue,se)!==-1},r=ph,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(U,se)=>{const ue=U[0].length+U.index,O=U.input[ue];if(O==="<"||O===","){se.ignoreMatch();return}O===">"&&(t(U,{after:ue})||se.ignoreMatch());let V;const Y=U.input.substring(ue);if(V=Y.match(/^\s*=/)){se.ignoreMatch();return}if((V=Y.match(/^\s+extends\s+/))&&V.index===0){se.ignoreMatch();return}}},u={$pattern:ph,keyword:cT,literal:uT,built_in:mT,"variable.language":pT},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},x={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},v={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,x],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,x]},j={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},R=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,{match:/\$\d+/},m];x.contains=R.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(R)});const A=[].concat(j,x.contains),L=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(A)}]),I={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:L},H={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},W={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...dT,...fT]}},re={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},me={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[I],illegal:/%/},xe={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function q(U){return e.concat("(?!",U.join("|"),")")}const ie={match:e.concat(/\b/,q([...hT,"super","import"].map(U=>`${U}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},te={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},he={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},I]},B="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(B)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[I]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:L,CLASS_REFERENCE:W},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),re,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,j,{match:/\$\d+/},m,W,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[j,n.REGEXP_MODE,{className:"function",begin:B,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:L}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},me,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[I,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},te,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[I]},ie,xe,H,he,{match:/\$[(.]/}]}}function TI(n){const e=n.regex,t=NI(n),r=ph,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[t.exports.CLASS_REFERENCE]},u={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:ph,keyword:cT.concat(d),literal:uT,built_in:mT.concat(s),"variable.language":pT},p={className:"meta",begin:"@"+r},m=(S,C,T)=>{const j=S.contains.findIndex(R=>R.label===C);if(j===-1)throw new Error("can not find mode to replace");S.contains.splice(j,1,T)};Object.assign(t.keywords,h),t.exports.PARAMS_CONTAINS.push(p);const x=t.contains.find(S=>S.scope==="attr"),v=Object.assign({},x,{match:e.concat(r,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,x,v]),t.contains=t.contains.concat([p,o,l,v]),m(t,"shebang",n.SHEBANG()),m(t,"use_strict",u);const w=t.contains.find(S=>S.label==="func.def");return w.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function kI(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=n.inherit(o,{begin:/\(/,end:/\)/}),u=n.inherit(n.APOS_STRING_MODE,{className:"string"}),d=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,d,u,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,l,d,u]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}var zg,hE;function AI(){if(hE)return zg;hE=1;function n(M){return M instanceof Map?M.clear=M.delete=M.set=function(){throw new Error("map is read-only")}:M instanceof Set&&(M.add=M.clear=M.delete=function(){throw new Error("set is read-only")}),Object.freeze(M),Object.getOwnPropertyNames(M).forEach(Q=>{const de=M[Q],Oe=typeof de;(Oe==="object"||Oe==="function")&&!Object.isFrozen(de)&&n(de)}),M}class e{constructor(Q){Q.data===void 0&&(Q.data={}),this.data=Q.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(M){return M.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(M,...Q){const de=Object.create(null);for(const Oe in M)de[Oe]=M[Oe];return Q.forEach(function(Oe){for(const ht in Oe)de[ht]=Oe[ht]}),de}const s="</span>",o=M=>!!M.scope,l=(M,{prefix:Q})=>{if(M.startsWith("language:"))return M.replace("language:","language-");if(M.includes(".")){const de=M.split(".");return[`${Q}${de.shift()}`,...de.map((Oe,ht)=>`${Oe}${"_".repeat(ht+1)}`)].join(" ")}return`${Q}${M}`};class u{constructor(Q,de){this.buffer="",this.classPrefix=de.classPrefix,Q.walk(this)}addText(Q){this.buffer+=t(Q)}openNode(Q){if(!o(Q))return;const de=l(Q.scope,{prefix:this.classPrefix});this.span(de)}closeNode(Q){o(Q)&&(this.buffer+=s)}value(){return this.buffer}span(Q){this.buffer+=`<span class="${Q}">`}}const d=(M={})=>{const Q={children:[]};return Object.assign(Q,M),Q};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Q){this.top.children.push(Q)}openNode(Q){const de=d({scope:Q});this.add(de),this.stack.push(de)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Q){return this.constructor._walk(Q,this.rootNode)}static _walk(Q,de){return typeof de=="string"?Q.addText(de):de.children&&(Q.openNode(de),de.children.forEach(Oe=>this._walk(Q,Oe)),Q.closeNode(de)),Q}static _collapse(Q){typeof Q!="string"&&Q.children&&(Q.children.every(de=>typeof de=="string")?Q.children=[Q.children.join("")]:Q.children.forEach(de=>{h._collapse(de)}))}}class p extends h{constructor(Q){super(),this.options=Q}addText(Q){Q!==""&&this.add(Q)}startScope(Q){this.openNode(Q)}endScope(){this.closeNode()}__addSublanguage(Q,de){const Oe=Q.root;de&&(Oe.scope=`language:${de}`),this.add(Oe)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function m(M){return M?typeof M=="string"?M:M.source:null}function x(M){return S("(?=",M,")")}function v(M){return S("(?:",M,")*")}function w(M){return S("(?:",M,")?")}function S(...M){return M.map(de=>m(de)).join("")}function C(M){const Q=M[M.length-1];return typeof Q=="object"&&Q.constructor===Object?(M.splice(M.length-1,1),Q):{}}function T(...M){return"("+(C(M).capture?"":"?:")+M.map(Oe=>m(Oe)).join("|")+")"}function j(M){return new RegExp(M.toString()+"|").exec("").length-1}function R(M,Q){const de=M&&M.exec(Q);return de&&de.index===0}const A=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function L(M,{joinWith:Q}){let de=0;return M.map(Oe=>{de+=1;const ht=de;let Ve=m(Oe),Ee="";for(;Ve.length>0;){const Te=A.exec(Ve);if(!Te){Ee+=Ve;break}Ee+=Ve.substring(0,Te.index),Ve=Ve.substring(Te.index+Te[0].length),Te[0][0]==="\\"&&Te[1]?Ee+="\\"+String(Number(Te[1])+ht):(Ee+=Te[0],Te[0]==="("&&de++)}return Ee}).map(Oe=>`(${Oe})`).join(Q)}const I=/\b\B/,H="[a-zA-Z]\\w*",W="[a-zA-Z_]\\w*",re="\\b\\d+(\\.\\d+)?",me="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",xe="\\b(0b[01]+)",q="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ie=(M={})=>{const Q=/^#![ ]*\//;return M.binary&&(M.begin=S(Q,/.*\b/,M.binary,/\b.*/)),r({scope:"meta",begin:Q,end:/$/,relevance:0,"on:begin":(de,Oe)=>{de.index!==0&&Oe.ignoreMatch()}},M)},te={begin:"\\\\[\\s\\S]",relevance:0},he={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[te]},B={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[te]},D={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},U=function(M,Q,de={}){const Oe=r({scope:"comment",begin:M,end:Q,contains:[]},de);Oe.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ht=T("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Oe.contains.push({begin:S(/[ ]+/,"(",ht,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Oe},se=U("//","$"),ue=U("/\\*","\\*/"),O=U("#","$"),V={scope:"number",begin:re,relevance:0},Y={scope:"number",begin:me,relevance:0},ce={scope:"number",begin:xe,relevance:0},fe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[te,{begin:/\[/,end:/\]/,relevance:0,contains:[te]}]},we={scope:"title",begin:H,relevance:0},Ue={scope:"title",begin:W,relevance:0},ae={begin:"\\.\\s*"+W,relevance:0};var pt=Object.freeze({__proto__:null,APOS_STRING_MODE:he,BACKSLASH_ESCAPE:te,BINARY_NUMBER_MODE:ce,BINARY_NUMBER_RE:xe,COMMENT:U,C_BLOCK_COMMENT_MODE:ue,C_LINE_COMMENT_MODE:se,C_NUMBER_MODE:Y,C_NUMBER_RE:me,END_SAME_AS_BEGIN:function(M){return Object.assign(M,{"on:begin":(Q,de)=>{de.data._beginMatch=Q[1]},"on:end":(Q,de)=>{de.data._beginMatch!==Q[1]&&de.ignoreMatch()}})},HASH_COMMENT_MODE:O,IDENT_RE:H,MATCH_NOTHING_RE:I,METHOD_GUARD:ae,NUMBER_MODE:V,NUMBER_RE:re,PHRASAL_WORDS_MODE:D,QUOTE_STRING_MODE:B,REGEXP_MODE:fe,RE_STARTERS_RE:q,SHEBANG:ie,TITLE_MODE:we,UNDERSCORE_IDENT_RE:W,UNDERSCORE_TITLE_MODE:Ue});function It(M,Q){M.input[M.index-1]==="."&&Q.ignoreMatch()}function rn(M,Q){M.className!==void 0&&(M.scope=M.className,delete M.className)}function qn(M,Q){Q&&M.beginKeywords&&(M.begin="\\b("+M.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",M.__beforeBegin=It,M.keywords=M.keywords||M.beginKeywords,delete M.beginKeywords,M.relevance===void 0&&(M.relevance=0))}function jt(M,Q){Array.isArray(M.illegal)&&(M.illegal=T(...M.illegal))}function Sn(M,Q){if(M.match){if(M.begin||M.end)throw new Error("begin & end are not supported with match");M.begin=M.match,delete M.match}}function At(M,Q){M.relevance===void 0&&(M.relevance=1)}const sn=(M,Q)=>{if(!M.beforeMatch)return;if(M.starts)throw new Error("beforeMatch cannot be used with starts");const de=Object.assign({},M);Object.keys(M).forEach(Oe=>{delete M[Oe]}),M.keywords=de.keywords,M.begin=S(de.beforeMatch,x(de.begin)),M.starts={relevance:0,contains:[Object.assign(de,{endsParent:!0})]},M.relevance=0,delete de.beforeMatch},En=["of","and","for","in","not","or","if","then","parent","list","value"],K="keyword";function Se(M,Q,de=K){const Oe=Object.create(null);return typeof M=="string"?ht(de,M.split(" ")):Array.isArray(M)?ht(de,M):Object.keys(M).forEach(function(Ve){Object.assign(Oe,Se(M[Ve],Q,Ve))}),Oe;function ht(Ve,Ee){Q&&(Ee=Ee.map(Te=>Te.toLowerCase())),Ee.forEach(function(Te){const Re=Te.split("|");Oe[Re[0]]=[Ve,We(Re[0],Re[1])]})}}function We(M,Q){return Q?Number(Q):_e(M)?0:1}function _e(M){return En.includes(M.toLowerCase())}const st={},Ze=M=>{console.error(M)},vn=(M,...Q)=>{console.log(`WARN: ${M}`,...Q)},_t=(M,Q)=>{st[`${M}/${Q}`]||(console.log(`Deprecated as of ${M}. ${Q}`),st[`${M}/${Q}`]=!0)},ye=new Error;function Ne(M,Q,{key:de}){let Oe=0;const ht=M[de],Ve={},Ee={};for(let Te=1;Te<=Q.length;Te++)Ee[Te+Oe]=ht[Te],Ve[Te+Oe]=!0,Oe+=j(Q[Te-1]);M[de]=Ee,M[de]._emit=Ve,M[de]._multi=!0}function Ke(M){if(Array.isArray(M.begin)){if(M.skip||M.excludeBegin||M.returnBegin)throw Ze("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ye;if(typeof M.beginScope!="object"||M.beginScope===null)throw Ze("beginScope must be object"),ye;Ne(M,M.begin,{key:"beginScope"}),M.begin=L(M.begin,{joinWith:""})}}function Ye(M){if(Array.isArray(M.end)){if(M.skip||M.excludeEnd||M.returnEnd)throw Ze("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ye;if(typeof M.endScope!="object"||M.endScope===null)throw Ze("endScope must be object"),ye;Ne(M,M.end,{key:"endScope"}),M.end=L(M.end,{joinWith:""})}}function Ht(M){M.scope&&typeof M.scope=="object"&&M.scope!==null&&(M.beginScope=M.scope,delete M.scope)}function Xt(M){Ht(M),typeof M.beginScope=="string"&&(M.beginScope={_wrap:M.beginScope}),typeof M.endScope=="string"&&(M.endScope={_wrap:M.endScope}),Ke(M),Ye(M)}function gr(M){function Q(Ee,Te){return new RegExp(m(Ee),"m"+(M.case_insensitive?"i":"")+(M.unicodeRegex?"u":"")+(Te?"g":""))}class de{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Te,Re){Re.position=this.position++,this.matchIndexes[this.matchAt]=Re,this.regexes.push([Re,Te]),this.matchAt+=j(Te)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Te=this.regexes.map(Re=>Re[1]);this.matcherRe=Q(L(Te,{joinWith:"|"}),!0),this.lastIndex=0}exec(Te){this.matcherRe.lastIndex=this.lastIndex;const Re=this.matcherRe.exec(Te);if(!Re)return null;const mt=Re.findIndex((Dn,uo)=>uo>0&&Dn!==void 0),Mt=this.matchIndexes[mt];return Re.splice(0,mt),Object.assign(Re,Mt)}}class Oe{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Te){if(this.multiRegexes[Te])return this.multiRegexes[Te];const Re=new de;return this.rules.slice(Te).forEach(([mt,Mt])=>Re.addRule(mt,Mt)),Re.compile(),this.multiRegexes[Te]=Re,Re}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Te,Re){this.rules.push([Te,Re]),Re.type==="begin"&&this.count++}exec(Te){const Re=this.getMatcher(this.regexIndex);Re.lastIndex=this.lastIndex;let mt=Re.exec(Te);if(this.resumingScanAtSamePosition()&&!(mt&&mt.index===this.lastIndex)){const Mt=this.getMatcher(0);Mt.lastIndex=this.lastIndex+1,mt=Mt.exec(Te)}return mt&&(this.regexIndex+=mt.position+1,this.regexIndex===this.count&&this.considerAll()),mt}}function ht(Ee){const Te=new Oe;return Ee.contains.forEach(Re=>Te.addRule(Re.begin,{rule:Re,type:"begin"})),Ee.terminatorEnd&&Te.addRule(Ee.terminatorEnd,{type:"end"}),Ee.illegal&&Te.addRule(Ee.illegal,{type:"illegal"}),Te}function Ve(Ee,Te){const Re=Ee;if(Ee.isCompiled)return Re;[rn,Sn,Xt,sn].forEach(Mt=>Mt(Ee,Te)),M.compilerExtensions.forEach(Mt=>Mt(Ee,Te)),Ee.__beforeBegin=null,[qn,jt,At].forEach(Mt=>Mt(Ee,Te)),Ee.isCompiled=!0;let mt=null;return typeof Ee.keywords=="object"&&Ee.keywords.$pattern&&(Ee.keywords=Object.assign({},Ee.keywords),mt=Ee.keywords.$pattern,delete Ee.keywords.$pattern),mt=mt||/\w+/,Ee.keywords&&(Ee.keywords=Se(Ee.keywords,M.case_insensitive)),Re.keywordPatternRe=Q(mt,!0),Te&&(Ee.begin||(Ee.begin=/\B|\b/),Re.beginRe=Q(Re.begin),!Ee.end&&!Ee.endsWithParent&&(Ee.end=/\B|\b/),Ee.end&&(Re.endRe=Q(Re.end)),Re.terminatorEnd=m(Re.end)||"",Ee.endsWithParent&&Te.terminatorEnd&&(Re.terminatorEnd+=(Ee.end?"|":"")+Te.terminatorEnd)),Ee.illegal&&(Re.illegalRe=Q(Ee.illegal)),Ee.contains||(Ee.contains=[]),Ee.contains=[].concat(...Ee.contains.map(function(Mt){return Ce(Mt==="self"?Ee:Mt)})),Ee.contains.forEach(function(Mt){Ve(Mt,Re)}),Ee.starts&&Ve(Ee.starts,Te),Re.matcher=ht(Re),Re}if(M.compilerExtensions||(M.compilerExtensions=[]),M.contains&&M.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return M.classNameAliases=r(M.classNameAliases||{}),Ve(M)}function X(M){return M?M.endsWithParent||X(M.starts):!1}function Ce(M){return M.variants&&!M.cachedVariants&&(M.cachedVariants=M.variants.map(function(Q){return r(M,{variants:null},Q)})),M.cachedVariants?M.cachedVariants:X(M)?r(M,{starts:M.starts?r(M.starts):null}):Object.isFrozen(M)?r(M):M}var ke="11.11.1";class dt extends Error{constructor(Q,de){super(Q),this.name="HTMLInjectionError",this.html=de}}const Xe=t,vt=r,Jt=Symbol("nomatch"),Yn=7,yr=function(M){const Q=Object.create(null),de=Object.create(null),Oe=[];let ht=!0;const Ve="Could not find the language '{}', did you forget to load/include a language module?",Ee={disableAutodetect:!0,name:"Plain text",contains:[]};let Te={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function Re(pe){return Te.noHighlightRe.test(pe)}function mt(pe){let ze=pe.className+" ";ze+=pe.parentNode?pe.parentNode.className:"";const it=Te.languageDetectRe.exec(ze);if(it){const wt=Xn(it[1]);return wt||(vn(Ve.replace("{}",it[1])),vn("Falling back to no-highlight mode for this block.",pe)),wt?it[1]:"no-highlight"}return ze.split(/\s+/).find(wt=>Re(wt)||Xn(wt))}function Mt(pe,ze,it){let wt="",an="";typeof ze=="object"?(wt=pe,it=ze.ignoreIllegals,an=ze.language):(_t("10.7.0","highlight(lang, code, ...args) has been deprecated."),_t("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),an=pe,wt=ze),it===void 0&&(it=!0);const Vn={code:wt,language:an};ho("before:highlight",Vn);const br=Vn.result?Vn.result:Dn(Vn.language,Vn.code,it);return br.code=Vn.code,ho("after:highlight",br),br}function Dn(pe,ze,it,wt){const an=Object.create(null);function Vn(be,De){return be.keywords[De]}function br(){if(!Fe.keywords){hn.addText(St);return}let be=0;Fe.keywordPatternRe.lastIndex=0;let De=Fe.keywordPatternRe.exec(St),Je="";for(;De;){Je+=St.substring(be,De.index);const lt=jn.case_insensitive?De[0].toLowerCase():De[0],Qt=Vn(Fe,lt);if(Qt){const[Dr,Sl]=Qt;if(hn.addText(Je),Je="",an[lt]=(an[lt]||0)+1,an[lt]<=Yn&&(hs+=Sl),Dr.startsWith("_"))Je+=De[0];else{const vu=jn.classNameAliases[Dr]||Dr;xr(De[0],vu)}}else Je+=De[0];be=Fe.keywordPatternRe.lastIndex,De=Fe.keywordPatternRe.exec(St)}Je+=St.substring(be),hn.addText(Je)}function nr(){if(St==="")return;let be=null;if(typeof Fe.subLanguage=="string"){if(!Q[Fe.subLanguage]){hn.addText(St);return}be=Dn(Fe.subLanguage,St,!0,xu[Fe.subLanguage]),xu[Fe.subLanguage]=be._top}else be=oa(St,Fe.subLanguage.length?Fe.subLanguage:null);Fe.relevance>0&&(hs+=be.relevance),hn.__addSublanguage(be._emitter,be.language)}function Lt(){Fe.subLanguage!=null?nr():br(),St=""}function xr(be,De){be!==""&&(hn.startScope(De),hn.addText(be),hn.endScope())}function yu(be,De){let Je=1;const lt=De.length-1;for(;Je<=lt;){if(!be._emit[Je]){Je++;continue}const Qt=jn.classNameAliases[be[Je]]||be[Je],Dr=De[Je];Qt?xr(Dr,Qt):(St=Dr,br(),St=""),Je++}}function la(be,De){return be.scope&&typeof be.scope=="string"&&hn.openNode(jn.classNameAliases[be.scope]||be.scope),be.beginScope&&(be.beginScope._wrap?(xr(St,jn.classNameAliases[be.beginScope._wrap]||be.beginScope._wrap),St=""):be.beginScope._multi&&(yu(be.beginScope,De),St="")),Fe=Object.create(be,{parent:{value:Fe}}),Fe}function xl(be,De,Je){let lt=R(be.endRe,Je);if(lt){if(be["on:end"]){const Qt=new e(be);be["on:end"](De,Qt),Qt.isMatchIgnored&&(lt=!1)}if(lt){for(;be.endsParent&&be.parent;)be=be.parent;return be}}if(be.endsWithParent)return xl(be.parent,De,Je)}function ca(be){return Fe.matcher.regexIndex===0?(St+=be[0],1):(ps=!0,0)}function Uh(be){const De=be[0],Je=be.rule,lt=new e(Je),Qt=[Je.__beforeBegin,Je["on:begin"]];for(const Dr of Qt)if(Dr&&(Dr(be,lt),lt.isMatchIgnored))return ca(De);return Je.skip?St+=De:(Je.excludeBegin&&(St+=De),Lt(),!Je.returnBegin&&!Je.excludeBegin&&(St=De)),la(Je,be),Je.returnBegin?0:De.length}function rr(be){const De=be[0],Je=ze.substring(be.index),lt=xl(Fe,be,Je);if(!lt)return Jt;const Qt=Fe;Fe.endScope&&Fe.endScope._wrap?(Lt(),xr(De,Fe.endScope._wrap)):Fe.endScope&&Fe.endScope._multi?(Lt(),yu(Fe.endScope,be)):Qt.skip?St+=De:(Qt.returnEnd||Qt.excludeEnd||(St+=De),Lt(),Qt.excludeEnd&&(St=De));do Fe.scope&&hn.closeNode(),!Fe.skip&&!Fe.subLanguage&&(hs+=Fe.relevance),Fe=Fe.parent;while(Fe!==lt.parent);return lt.starts&&la(lt.starts,be),Qt.returnEnd?0:De.length}function vl(){const be=[];for(let De=Fe;De!==jn;De=De.parent)De.scope&&be.unshift(De.scope);be.forEach(De=>hn.openNode(De))}let po={};function ua(be,De){const Je=De&&De[0];if(St+=be,Je==null)return Lt(),0;if(po.type==="begin"&&De.type==="end"&&po.index===De.index&&Je===""){if(St+=ze.slice(De.index,De.index+1),!ht){const lt=new Error(`0 width match regex (${pe})`);throw lt.languageName=pe,lt.badRule=po.rule,lt}return 1}if(po=De,De.type==="begin")return Uh(De);if(De.type==="illegal"&&!it){const lt=new Error('Illegal lexeme "'+Je+'" for mode "'+(Fe.scope||"<unnamed>")+'"');throw lt.mode=Fe,lt}else if(De.type==="end"){const lt=rr(De);if(lt!==Jt)return lt}if(De.type==="illegal"&&Je==="")return St+=`
`,1;if(wl>1e5&&wl>De.index*3)throw new Error("potential infinite loop, way more iterations than matches");return St+=Je,Je.length}const jn=Xn(pe);if(!jn)throw Ze(Ve.replace("{}",pe)),new Error('Unknown language: "'+pe+'"');const bu=gr(jn);let da="",Fe=wt||bu;const xu={},hn=new Te.__emitter(Te);vl();let St="",hs=0,Di=0,wl=0,ps=!1;try{if(jn.__emitTokens)jn.__emitTokens(ze,hn);else{for(Fe.matcher.considerAll();;){wl++,ps?ps=!1:Fe.matcher.considerAll(),Fe.matcher.lastIndex=Di;const be=Fe.matcher.exec(ze);if(!be)break;const De=ze.substring(Di,be.index),Je=ua(De,be);Di=be.index+Je}ua(ze.substring(Di))}return hn.finalize(),da=hn.toHTML(),{language:pe,value:da,relevance:hs,illegal:!1,_emitter:hn,_top:Fe}}catch(be){if(be.message&&be.message.includes("Illegal"))return{language:pe,value:Xe(ze),illegal:!0,relevance:0,_illegalBy:{message:be.message,index:Di,context:ze.slice(Di-100,Di+100),mode:be.mode,resultSoFar:da},_emitter:hn};if(ht)return{language:pe,value:Xe(ze),illegal:!1,relevance:0,errorRaised:be,_emitter:hn,_top:Fe};throw be}}function uo(pe){const ze={value:Xe(pe),illegal:!1,relevance:0,_top:Ee,_emitter:new Te.__emitter(Te)};return ze._emitter.addText(pe),ze}function oa(pe,ze){ze=ze||Te.languages||Object.keys(Q);const it=uo(pe),wt=ze.filter(Xn).filter(ds).map(Lt=>Dn(Lt,pe,!1));wt.unshift(it);const an=wt.sort((Lt,xr)=>{if(Lt.relevance!==xr.relevance)return xr.relevance-Lt.relevance;if(Lt.language&&xr.language){if(Xn(Lt.language).supersetOf===xr.language)return 1;if(Xn(xr.language).supersetOf===Lt.language)return-1}return 0}),[Vn,br]=an,nr=Vn;return nr.secondBest=br,nr}function li(pe,ze,it){const wt=ze&&de[ze]||it;pe.classList.add("hljs"),pe.classList.add(`language-${wt}`)}function on(pe){let ze=null;const it=mt(pe);if(Re(it))return;if(ho("before:highlightElement",{el:pe,language:it}),pe.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",pe);return}if(pe.children.length>0&&(Te.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(pe)),Te.throwUnescapedHTML))throw new dt("One of your code blocks includes unescaped HTML.",pe.innerHTML);ze=pe;const wt=ze.textContent,an=it?Mt(wt,{language:it,ignoreIllegals:!0}):oa(wt);pe.innerHTML=an.value,pe.dataset.highlighted="yes",li(pe,it,an.language),pe.result={language:an.language,re:an.relevance,relevance:an.relevance},an.secondBest&&(pe.secondBest={language:an.secondBest.language,relevance:an.secondBest.relevance}),ho("after:highlightElement",{el:pe,result:an,text:wt})}function Pn(pe){Te=vt(Te,pe)}const us=()=>{aa(),_t("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function yl(){aa(),_t("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let pu=!1;function aa(){function pe(){aa()}if(document.readyState==="loading"){pu||window.addEventListener("DOMContentLoaded",pe,!1),pu=!0;return}document.querySelectorAll(Te.cssSelector).forEach(on)}function mu(pe,ze){let it=null;try{it=ze(M)}catch(wt){if(Ze("Language definition for '{}' could not be registered.".replace("{}",pe)),ht)Ze(wt);else throw wt;it=Ee}it.name||(it.name=pe),Q[pe]=it,it.rawDefinition=ze.bind(null,M),it.aliases&&Oi(it.aliases,{languageName:pe})}function fo(pe){delete Q[pe];for(const ze of Object.keys(de))de[ze]===pe&&delete de[ze]}function bl(){return Object.keys(Q)}function Xn(pe){return pe=(pe||"").toLowerCase(),Q[pe]||Q[de[pe]]}function Oi(pe,{languageName:ze}){typeof pe=="string"&&(pe=[pe]),pe.forEach(it=>{de[it.toLowerCase()]=ze})}function ds(pe){const ze=Xn(pe);return ze&&!ze.disableAutodetect}function fs(pe){pe["before:highlightBlock"]&&!pe["before:highlightElement"]&&(pe["before:highlightElement"]=ze=>{pe["before:highlightBlock"](Object.assign({block:ze.el},ze))}),pe["after:highlightBlock"]&&!pe["after:highlightElement"]&&(pe["after:highlightElement"]=ze=>{pe["after:highlightBlock"](Object.assign({block:ze.el},ze))})}function fn(pe){fs(pe),Oe.push(pe)}function gu(pe){const ze=Oe.indexOf(pe);ze!==-1&&Oe.splice(ze,1)}function ho(pe,ze){const it=pe;Oe.forEach(function(wt){wt[it]&&wt[it](ze)})}function Ri(pe){return _t("10.7.0","highlightBlock will be removed entirely in v12.0"),_t("10.7.0","Please use highlightElement now."),on(pe)}Object.assign(M,{highlight:Mt,highlightAuto:oa,highlightAll:aa,highlightElement:on,highlightBlock:Ri,configure:Pn,initHighlighting:us,initHighlightingOnLoad:yl,registerLanguage:mu,unregisterLanguage:fo,listLanguages:bl,getLanguage:Xn,registerAliases:Oi,autoDetection:ds,inherit:vt,addPlugin:fn,removePlugin:gu}),M.debugMode=function(){ht=!1},M.safeMode=function(){ht=!0},M.versionString=ke,M.regex={concat:S,lookahead:x,either:T,optional:w,anyNumberOfTimes:v};for(const pe in pt)typeof pt[pe]=="object"&&n(pt[pe]);return Object.assign(M,pt),M},Ut=yr({});return Ut.newInstance=()=>yr({}),zg=Ut,Ut.HighlightJS=Ut,Ut.default=Ut,zg}var MI=AI();const OI=j0(MI),pE={},RI="hljs-";function DI(n){const e=OI.newInstance();return{highlight:t,highlightAuto:r,listLanguages:s,register:o,registerAlias:l,registered:u};function t(d,h,p){const m=p||pE,x=typeof m.prefix=="string"?m.prefix:RI;if(!e.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");e.configure({__emitter:jI,classPrefix:x});const v=e.highlight(h,{ignoreIllegals:!0,language:d});if(v.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:v.errorRaised});const w=v._emitter.root,S=w.data;return S.language=v.language,S.relevance=v.relevance,w}function r(d,h){const m=(h||pE).subset||s();let x=-1,v=0,w;for(;++x<m.length;){const S=m[x];if(!e.getLanguage(S))continue;const C=t(S,d,h);C.data&&C.data.relevance!==void 0&&C.data.relevance>v&&(v=C.data.relevance,w=C)}return w||{type:"root",children:[],data:{language:void 0,relevance:v}}}function s(){return e.listLanguages()}function o(d,h){if(typeof d=="string")e.registerLanguage(d,h);else{let p;for(p in d)Object.hasOwn(d,p)&&e.registerLanguage(p,d[p])}}function l(d,h){if(typeof d=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let p;for(p in d)if(Object.hasOwn(d,p)){const m=d[p];e.registerAliases(typeof m=="string"?m:[...m],{languageName:p})}}}function u(d){return!!e.getLanguage(d)}}class jI{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],r=t.children[t.children.length-1];r&&r.type==="text"?r.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const r=this.stack[this.stack.length-1],s=e.root.children;t?r.children.push({type:"element",tagName:"span",properties:{className:[t]},children:s}):r.children.push(...s)}openNode(e){const t=this,r=e.split(".").map(function(l,u){return u?l+"_".repeat(u):t.options.classPrefix+l}),s=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}function gT(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=gT(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Ig(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=gT(n))&&(r&&(r+=" "),r+=e);return r}function _I(n){var e;const{char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:u}=n,d=r&&!s,h=NL(t),p=new RegExp(`\\s${h}$`),m=l?"^":"",x=s?"":h,v=d?new RegExp(`${m}${h}.*?(?=\\s${x}|$)`,"gm"):new RegExp(`${m}(?:^)?${h}[^\\s${x}]*`,"gm"),w=((e=u.nodeBefore)===null||e===void 0?void 0:e.isText)&&u.nodeBefore.text;if(!w)return null;const S=u.pos-w.length,C=Array.from(w.matchAll(v)).pop();if(!C||C.input===void 0||C.index===void 0)return null;const T=C.input.slice(Math.max(0,C.index-1),C.index),j=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(T);if(o!==null&&!j)return null;const R=S+C.index;let A=R+C[0].length;return d&&p.test(w.slice(A-1,A+1))&&(C[0]+=" ",A+=1),R<u.pos&&A>=u.pos?{range:{from:R,to:A},query:C[0].slice(t.length),text:C[0]}:null}const LI=new dn("suggestion");function BI({pluginKey:n=LI,editor:e,char:t="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:o=[" "],startOfLine:l=!1,decorationTag:u="span",decorationClass:d="suggestion",decorationContent:h="",decorationEmptyClass:p="is-empty",command:m=()=>null,items:x=()=>[],render:v=()=>({}),allow:w=()=>!0,findSuggestionMatch:S=_I}){let C;const T=v==null?void 0:v(),j=new Wt({key:n,view(){return{update:async(R,A)=>{var L,I,H,W,re,me,xe;const q=(L=this.key)===null||L===void 0?void 0:L.getState(A),ie=(I=this.key)===null||I===void 0?void 0:I.getState(R.state),te=q.active&&ie.active&&q.range.from!==ie.range.from,he=!q.active&&ie.active,B=q.active&&!ie.active,D=!he&&!B&&q.query!==ie.query,U=he||te&&D,se=D||te,ue=B||te&&D;if(!U&&!se&&!ue)return;const O=ue&&!U?q:ie,V=R.dom.querySelector(`[data-decoration-id="${O.decorationId}"]`);C={editor:e,range:O.range,query:O.query,text:O.text,items:[],command:Y=>m({editor:e,range:O.range,props:Y}),decorationNode:V,clientRect:V?()=>{var Y;const{decorationId:ce}=(Y=this.key)===null||Y===void 0?void 0:Y.getState(e.state),fe=R.dom.querySelector(`[data-decoration-id="${ce}"]`);return(fe==null?void 0:fe.getBoundingClientRect())||null}:null},U&&((H=T==null?void 0:T.onBeforeStart)===null||H===void 0||H.call(T,C)),se&&((W=T==null?void 0:T.onBeforeUpdate)===null||W===void 0||W.call(T,C)),(se||U)&&(C.items=await x({editor:e,query:O.query})),ue&&((re=T==null?void 0:T.onExit)===null||re===void 0||re.call(T,C)),se&&((me=T==null?void 0:T.onUpdate)===null||me===void 0||me.call(T,C)),U&&((xe=T==null?void 0:T.onStart)===null||xe===void 0||xe.call(T,C))},destroy:()=>{var R;C&&((R=T==null?void 0:T.onExit)===null||R===void 0||R.call(T,C))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(R,A,L,I){const{isEditable:H}=e,{composing:W}=e.view,{selection:re}=R,{empty:me,from:xe}=re,q={...A};if(q.composing=W,H&&(me||e.view.composing)){(xe<A.range.from||xe>A.range.to)&&!W&&!A.composing&&(q.active=!1);const ie=S({char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:re.$from}),te=`id_${Math.floor(Math.random()*4294967295)}`;ie&&w({editor:e,state:I,range:ie.range,isActive:A.active})?(q.active=!0,q.decorationId=A.decorationId?A.decorationId:te,q.range=ie.range,q.query=ie.query,q.text=ie.text):q.active=!1}else q.active=!1;return q.active||(q.decorationId=null,q.range={from:0,to:0},q.query=null,q.text=null),q}},props:{handleKeyDown(R,A){var L;const{active:I,range:H}=j.getState(R.state);return I&&((L=T==null?void 0:T.onKeyDown)===null||L===void 0?void 0:L.call(T,{view:R,event:A,range:H}))||!1},decorations(R){const{active:A,range:L,decorationId:I,query:H}=j.getState(R);if(!A)return null;const W=!(H!=null&&H.length),re=[d];return W&&re.push(p),Vt.create(R.doc,[kn.inline(L.from,L.to,{nodeName:u,class:re.join(" "),"data-decoration-id":I,"data-decoration-content":h})])}}});return j}const yT=N.forwardRef(({items:n,command:e},t)=>{const r=N.useRef(null),[s,o]=N.useState(0),l=N.useMemo(()=>h=>{const p=n[h];p&&e(p)},[n,e]),u=N.useMemo(()=>()=>{o(h=>{const p=h-1;return p<0?Math.max(n.length-1,0):p})},[n.length]),d=N.useMemo(()=>()=>{o(h=>{const p=h+1;return p>=n.length?0:p})},[n.length]);return N.useEffect(()=>{o(0)},[n]),N.useEffect(()=>{const h=r.current;if(!h)return;const p=h.querySelector(`[data-index="${s}"]`);p==null||p.scrollIntoView({block:"nearest"})},[s]),N.useImperativeHandle(t,()=>({onKeyDown:({event:h})=>h.key==="ArrowUp"?(u(),!0):h.key==="ArrowDown"?(d(),!0):h.key==="Enter"?(l(s),!0):!1}),[d,l,s,u]),n.length?y.jsx("div",{ref:r,className:"max-h-80 w-72 overflow-y-auto rounded-xl border border-neutral-200 bg-white p-1 shadow-xl",children:n.map((h,p)=>{const m=h.icon,x=p===s;return y.jsxs("button",{type:"button","data-index":p,onClick:()=>l(p),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition ${x?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[m?y.jsx(m,{className:"h-4 w-4 text-neutral-500"}):y.jsx("span",{className:"h-4 w-4","aria-hidden":!0}),y.jsxs("div",{className:"flex flex-col text-sm",children:[y.jsx("span",{className:"font-medium",children:h.title}),h.description?y.jsx("span",{className:"text-xs text-neutral-400",children:h.description}):null]})]},h.title)})}):y.jsx("div",{ref:r,className:"w-72 rounded-xl border border-neutral-200 bg-white p-4 text-sm text-neutral-500 shadow-xl",children:y.jsx("p",{children:"No matches. Keep typing to search commands."})})});yT.displayName="SlashCommandList";const zI=Rn.create({name:"slash-command",addOptions(){return{items:[]}},addProseMirrorPlugins(){return[BI({editor:this.editor,char:"/",command:n=>{const e=n==null?void 0:n.editor,t=n==null?void 0:n.range,r=n==null?void 0:n.props;if(!e||!t||!r)return!1;r.command({editor:e,range:t})},items:({query:n})=>{const e=n.toLowerCase();return this.options.items.filter(t=>t.disabled?!1:[t.title,t.description??"",...t.keywords??[]].join(" ").toLowerCase().includes(e)).slice(0,50)},render:()=>{let n=null,e=null;return{onStart(t){t!=null&&t.editor&&(n=new wN(yT,{props:{items:t.items,command:r=>t.command(r)},editor:t.editor}),e=ml("body",{getReferenceClientRect:t.clientRect,appendTo:()=>document.body,content:n.element,interactive:!0,trigger:"manual",placement:"left-start",arrow:!1,offset:[0,12]}),e[0].show())},onUpdate(t){t!=null&&t.editor&&(n==null||n.updateProps({items:t.items,command:r=>t.command(r)}),e==null||e[0].setProps({getReferenceClientRect:t.clientRect}))},onKeyDown(t){var s;return t!=null&&t.editor?t.event.key==="Escape"?(e==null||e[0].hide(),!0):!!((s=n==null?void 0:n.ref)==null?void 0:s.onKeyDown({event:t.event})):!1},onExit(){var t,r,s;(r=(t=e==null?void 0:e[0])==null?void 0:t.destroy)==null||r.call(t),e=null,(s=n==null?void 0:n.destroy)==null||s.call(n),n=null}}}})]}}),Hg={default:"border-neutral-200 bg-neutral-50",info:"border-blue-200 bg-blue-50",success:"border-emerald-200 bg-emerald-50",warning:"border-amber-200 bg-amber-50",danger:"border-rose-200 bg-rose-50"};function II({node:n,updateAttributes:e}){const{emoji:t="",color:r="default"}=n.attrs,s=Hg[r]??Hg.default,o=()=>{const u=window.prompt("Callout icon (emoji)",t??"");u&&e({emoji:u})},l=()=>{const u=window.prompt("Callout color (default, info, success, warning, danger)",r);if(!u)return;const d=u.toLowerCase();Hg[d]&&e({color:d})};return y.jsxs(vN,{as:"aside",className:`notion-callout group relative my-3 flex w-full items-start gap-3 rounded-xl border px-4 py-3 text-[15px] leading-7 text-neutral-800 ${s}`,"data-color":r,children:[y.jsx("button",{type:"button",onClick:o,className:"mt-1 inline-flex h-8 w-8 items-center justify-center rounded-lg text-xl transition hover:bg-white/70","aria-label":"Change callout icon",children:t}),y.jsx("div",{className:"flex-1",children:y.jsx(wB,{className:"notion-callout-content"})}),y.jsx("button",{type:"button",onClick:l,className:"absolute right-3 top-3 hidden rounded-md bg-white/80 px-2 py-1 text-xs font-medium text-neutral-500 shadow-sm transition hover:bg-white group-hover:flex",children:"Color"})]})}const HI=["youtube.com","youtu.be","player.vimeo.com"];function UI(n){try{const e=new URL(n);return HI.some(t=>e.hostname.includes(t))}catch{return!1}}function $I({node:n}){const{url:e,title:t}=n.attrs,r=UI(e),s=(()=>{try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e}})();return y.jsxs(vN,{className:"notion-embed my-4 w-full overflow-hidden rounded-xl border border-neutral-200 bg-white shadow-sm",children:[r?y.jsx("div",{className:"aspect-video w-full bg-neutral-950/5",children:y.jsx("iframe",{src:e,title:t??e,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):null,y.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 text-sm",children:[y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-neutral-200 bg-neutral-100 font-semibold text-neutral-500",children:s.slice(0,2).toUpperCase()}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"font-medium text-neutral-800",children:t??e}),y.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-neutral-500 underline-offset-2 hover:underline",children:s})]})]})]})}function qI({editor:n}){return y.jsx(yN,{editor:n,pluginKey:"table-bubble-menu",shouldShow:()=>n.isActive("table"),tippyOptions:{duration:150,offset:[0,16]},className:"rounded-xl border border-neutral-200 bg-white/95 px-3 py-2 text-sm shadow-2xl",children:y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Col"}),y.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Col "}),y.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Row"}),y.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Row "}),y.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteColumn().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Col"}),y.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteRow().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Row"}),y.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteTable().run(),className:"rounded-md border border-rose-200 px-2 py-1 text-xs font-medium text-rose-500 transition hover:bg-rose-50",children:"Delete"})]})})}const sa=DI();sa.register("javascript",SI);sa.register("typescript",TI);sa.register("css",yI);sa.register("html",kI);sa.register("json",EI);sa.register("python",CI);function un(n){return!n||n.isDestroyed?null:n.chain().focus()}function mE(n){try{return new URL(n),!0}catch{return!1}}const PI=a8.extend({name:"toggle"}).configure({HTMLAttributes:{class:"notion-toggle","data-type":"toggle"}}),VI=Kt.create({name:"callout",group:"block",content:"block+",defining:!0,isolating:!0,selectable:!0,addAttributes(){return{emoji:{default:""},color:{default:"default"}}},parseHTML(){return[{tag:"aside[data-type='callout']"}]},renderHTML({HTMLAttributes:n}){return["aside",xt(n,{"data-type":"callout"}),0]},addNodeView(){return SN(II)},addCommands(){return{setCallout:n=>({editor:e,range:t})=>{var l;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"callout",attrs:n??{},content:[{type:"paragraph"}]}),(l=un(e))==null||l.run(),!0}}}}),FI=Kt.create({name:"embed",group:"block",atom:!0,selectable:!0,addAttributes(){return{url:{default:""},title:{default:null}}},parseHTML(){return[{tag:"div[data-type='embed']"}]},renderHTML({HTMLAttributes:n}){return["div",xt(n,{"data-type":"embed"})]},addNodeView(){return SN($I)},addCommands(){return{setEmbed:n=>({editor:e,range:t})=>{var l;if(!(n!=null&&n.url))return!1;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"embed",attrs:n}),(l=un(e))==null||l.run(),!0}}}});function GI({value:n,onChange:e,placeholder:t="Type '/' for commands",editable:r=!0,className:s,editorClassName:o}){const l=N.useRef(n??""),u=N.useRef(null),d=N.useRef(null),h=N.useMemo(()=>[{title:"Text",description:"Plain text",icon:bh,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).setParagraph().run()}},{title:"Heading 1",description:"Large heading",icon:J5,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).setNode("heading",{level:1}).run()}},{title:"List",description:"Bulleted list",icon:C5,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).toggleBulletList().run()}},{title:"Ordered list",description:"Numbered",icon:yD,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).toggleOrderedList().run()}},{title:"Quote",description:"Blockquote",icon:si,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).toggleBlockquote().run()}},{title:"Code block",description:"Syntax highlighted",icon:$5,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).setCodeBlock().run()}},{title:"Divider",description:"Horizontal line",icon:aD,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).setHorizontalRule().run()}},{title:"Callout",description:"Highlighted block",icon:T5,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).setCallout().run()}},{title:"Table",description:"33 table",icon:xD,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}},{title:"Embed",description:"External link",icon:J1,command:({editor:v,range:w})=>{var C;const S=window.prompt("Embed URL");S&&((C=un(v))==null||C.deleteRange(w).setEmbed({url:S}).run())}},{title:"Image",description:"Upload",icon:pD,command:({editor:v,range:w})=>{var S;(S=un(v))==null||S.deleteRange(w).run(),setTimeout(()=>{var C;return(C=u.current)==null?void 0:C.click()},0)}}],[]),p=N.useCallback(async v=>{const w=d.current;if(!w||w.isDestroyed||!(v!=null&&v.length))return;const S=Array.from(v).filter(C=>C.type.startsWith("image/"));if(S.length)for(const C of S)await new Promise(T=>{const j=new FileReader;j.onload=R=>{var A,L;if(!d.current||d.current.isDestroyed)return T();typeof((A=R.target)==null?void 0:A.result)=="string"&&((L=un(d.current))==null||L.setImage({src:R.target.result,alt:C.name}).run()),T()},j.readAsDataURL(C)})},[]),m=xB({content:n,editable:r,extensions:[Cz.configure({codeBlock:!1,heading:{levels:[1,2,3]}}),Nz.configure({placeholder:t,showOnlyWhenEditable:!0}),Tz,Xz.configure({openOnClick:!1,autolink:!0,validate:v=>mE(v),HTMLAttributes:{class:"underline text-neutral-700 hover:text-neutral-900"}}),Zz.configure({allowBase64:!0}),n8.configure({resizable:!0,HTMLAttributes:{class:"notion-table w-full text-sm border border-neutral-200"}}),r8,i8.configure({HTMLAttributes:{class:"bg-neutral-100 font-semibold"}}),s8.configure({HTMLAttributes:{class:"border p-3 align-top"}}),lI.configure({lowlight:sa,HTMLAttributes:{class:"rounded-xl bg-neutral-950/90 p-4 font-mono text-[13px] text-neutral-100 overflow-x-auto"}}),PI,l8.configure({HTMLAttributes:{class:"cursor-pointer text-neutral-700 font-medium flex gap-2"}}),c8.configure({HTMLAttributes:{class:"pl-4 text-neutral-700"}}),VI,FI,zI.configure({items:h})],editorProps:{attributes:{class:Ig("notion-editor prose prose-neutral mx-auto min-h-[50vh] max-w-3xl text-[16px] leading-7 outline-none",o)},handlePaste:(v,w)=>{var T,j,R;const S=(T=w.clipboardData)==null?void 0:T.files;if(S!=null&&S.length)return p(S),!0;const C=(j=w.clipboardData)==null?void 0:j.getData("text/plain");return C&&mE(C)?((R=un(d.current))==null||R.setEmbed({url:C}).run(),!0):!1},handleDrop:(v,w)=>{var C;const S=(C=w.dataTransfer)==null?void 0:C.files;return S!=null&&S.length?(w.preventDefault(),p(S),!0):!1}},onUpdate({editor:v}){if(!v||v.isDestroyed)return;const w=v.isEmpty?"":v.getHTML();l.current!==w&&(l.current=w,e(w))}},[r,t]);N.useEffect(()=>{d.current=m??null},[m]),N.useEffect(()=>{!m||m.isDestroyed||m.isEditable!==r&&m.setEditable(r)},[m,r]),N.useEffect(()=>{var A;if(!m||m.isDestroyed)return;const v=n??"";if(l.current===v)return;if(m.getHTML()===v||m.isEmpty&&v===""){l.current=v;return}const S=m.state.selection,C=(S==null?void 0:S.from)??0,T=(S==null?void 0:S.to)??0;m.commands.setContent(v,!1);const j=m.state.doc.content.size,R=L=>Math.max(0,Math.min(L,j));(A=un(m))==null||A.setTextSelection({from:R(C),to:R(T)}).run(),l.current=v},[n,m]);const x=v=>Ig("flex h-8 w-8 items-center justify-center rounded-full text-[13px] transition",v?"bg-neutral-900 text-white":"text-neutral-100 hover:bg-white/10 hover:text-white");return y.jsxs("div",{className:Ig("relative rounded-2xl border border-neutral-200 bg-white px-6 py-5 shadow-sm",s),children:[y.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:v=>{p(v.target.files),v.target.value=""}}),m?y.jsxs(y.Fragment,{children:[y.jsx(yN,{editor:m,tippyOptions:{duration:100,offset:[0,8]},className:"rounded-full bg-neutral-900/95 px-2 py-1 shadow-xl",children:y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{type:"button",onClick:()=>{var v;return(v=un(m))==null?void 0:v.toggleBold().run()},className:x(m.isActive("bold")),children:y.jsx("strong",{children:"B"})}),y.jsx("button",{type:"button",onClick:()=>{var v;return(v=un(m))==null?void 0:v.toggleItalic().run()},className:x(m.isActive("italic")),children:y.jsx("em",{children:"I"})}),y.jsx("button",{type:"button",onClick:()=>{var v;return(v=un(m))==null?void 0:v.toggleUnderline().run()},className:x(m.isActive("underline")),children:y.jsx("span",{className:"underline",children:"U"})}),y.jsx("button",{type:"button",onClick:()=>{var v;return(v=un(m))==null?void 0:v.toggleStrike().run()},className:x(m.isActive("strike")),children:y.jsx("span",{className:"line-through",children:"S"})}),y.jsx("button",{type:"button",onClick:()=>{var w;const v=window.prompt("Enter URL:");v&&((w=un(m))==null||w.extendMarkRange("link").setLink({href:v}).run())},className:x(m.isActive("link")),children:y.jsx(J1,{className:"h-4 w-4"})})]})}),y.jsx(cB,{editor:m}),y.jsx(qI,{editor:m})]}):y.jsx("div",{className:"h-40 animate-pulse rounded-xl bg-neutral-200/80"})]})}const KI=/<\/?[a-z][^>]*>/i,WI=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),bT=n=>n?KI.test(n)?n:n.split(/\n{2,}/).map(t=>t.trim()?`<p>${t.split(/\n/).map(s=>WI(s.trimEnd())).join("<br />")}</p>`:"<p><br /></p>").join(""):"";function QI({documentId:n,onDocumentChange:e,currentUserName:t}){const[r,s]=N.useState(""),[o,l]=N.useState(""),[u,d]=N.useState(!1),[h,p]=N.useState(!1),[m,x]=N.useState(!1),[v,w]=N.useState(!1),[S,C]=N.useState(""),[T,j]=N.useState(!1),[R,A]=N.useState(null),[L,I]=N.useState(!1),H=N.useRef(null),W=N.useRef(""),re=N.useRef(""),me=Rt(Le.documents.getDocument,n?{documentId:n}:"skip"),xe=Rt(Le.documents.getDocumentVersions,n?{documentId:n}:"skip")||[],q=Rt(Le.comments.getDocumentComments,n?{documentId:n}:"skip")||[],ie=Bt(Le.documents.updateDocument),te=Bt(Le.documents.generateShareableLink),he=Bt(Le.documents.rollbackToVersion),B=Bt(Le.comments.addComment),D=Bt(Le.documents.deleteDocument);N.useEffect(()=>{if(me){const ae=bT(me.content);s(ae),l(me.title),W.current=ae,re.current=me.title,d(!1),j(!1),A(new Date(me.lastModifiedAt))}},[me]);const U=N.useCallback(async()=>{if(!n||!T)return;const ae=r!==W.current,$e=o!==re.current;if(!ae&&!$e){j(!1);return}I(!0);try{await ie({documentId:n,title:$e?o:void 0,content:ae?r:void 0,changeDescription:"Auto-saved changes"}),W.current=r,re.current=o,j(!1),A(new Date)}catch(pt){console.error("Auto-save failed:",pt),Ge.error("Auto-save failed")}finally{I(!1)}},[n,r,o,T,ie]);N.useEffect(()=>(T&&(H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{U()},3e4)),()=>{H.current&&clearTimeout(H.current)}),[T,U]);const se=N.useCallback(ae=>{s(ae),ae!==W.current&&j(!0)},[W]),ue=N.useMemo(()=>{if(!r)return"";if(typeof window>"u")return r.replace(/<[^>]+>/g," ").trim();const ae=document.createElement("div");return ae.innerHTML=r,ae.textContent||ae.innerText||""},[r]),O=ae=>{l(ae),d(!0),j(!0)},V=async()=>{if(n)try{await ie({documentId:n,title:o,content:r,changeDescription:"Manual save"}),W.current=r,re.current=o,d(!1),j(!1),A(new Date),Ge.success("Document saved successfully")}catch(ae){Ge.error("Failed to save document"),console.error("Save error:",ae)}},Y=async()=>{if(n)try{const ae=await te({documentId:n}),$e=`${window.location.origin}/shared/${ae}`;await navigator.clipboard.writeText($e),Ge.success("Shareable link copied to clipboard")}catch(ae){Ge.error("Failed to generate shareable link"),console.error("Share error:",ae)}},ce=async ae=>{if(n)try{await he({documentId:n,version:ae}),Ge.success(`Rolled back to version ${ae}`),p(!1),j(!1)}catch($e){Ge.error("Failed to rollback document"),console.error("Rollback error:",$e)}},fe=async ae=>{if(ae.preventDefault(),!(!n||!S.trim()))try{await B({documentId:n,content:S}),C(""),Ge.success("Comment added")}catch($e){Ge.error("Failed to add comment"),console.error("Comment error:",$e)}},we=async()=>{if(n&&confirm("Are you sure you want to delete this document? This action cannot be undone."))try{await D({documentId:n}),e(null),Ge.success("Document deleted")}catch(ae){Ge.error("Failed to delete document"),console.error("Delete error:",ae)}},Ue=()=>{if(!me)return;const ae=window.open("","_blank");ae&&(ae.document.write(`
        <html>
          <head>
            <title>${me.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content { font-size: 16px; line-height: 1.75; color: #27272a; }
              .content h1, .content h2, .content h3, .content h4 { margin-top: 32px; }
              .content ul, .content ol { padding-left: 20px; }
              .content blockquote { border-left: 4px solid #d4d4d8; padding-left: 16px; color: #52525b; }
              .content pre { background: #111827; color: #f8fafc; padding: 16px; border-radius: 12px; }
              .content code { background: #f4f4f5; padding: 4px 6px; border-radius: 6px; }
            </style>
          </head>
          <body>
            <h1>${me.title}</h1>
            <div class="content">${r}</div>
          </body>
        </html>
      `),ae.document.close(),ae.print())};return n?me?y.jsxs("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:[y.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/80 px-10 py-5 backdrop-blur",children:y.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2 text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:[y.jsx("span",{children:"Document"}),y.jsx("span",{className:"text-neutral-300",children:""}),y.jsxs("span",{children:["Version ",me.version]})]}),u?y.jsx("input",{type:"text",value:o,onChange:ae=>O(ae.target.value),className:"mt-3 w-full border-none bg-transparent text-3xl font-semibold text-neutral-900 outline-none focus:ring-1 focus:ring-neutral-400",onBlur:V,onKeyDown:ae=>ae.key==="Enter"&&V(),autoFocus:!0}):y.jsx("h1",{className:"mt-3 cursor-text text-3xl font-semibold text-neutral-900 transition hover:text-neutral-700",onClick:()=>d(!0),children:me.title}),y.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs text-neutral-500",children:[y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx(vf,{className:"h-4 w-4 text-neutral-400"}),R?`Last edited ${R.toLocaleString()}`:"Never saved"]}),y.jsx("span",{className:"text-neutral-300",children:""}),y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx(Wg,{className:"h-4 w-4 text-neutral-400"}),t?`${t}`:"Shared workspace"]}),y.jsx("span",{className:"text-neutral-300",children:""}),y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx(s2,{className:"h-4 w-4 text-neutral-400"}),me.isPublic?"Public page":"Private page"]}),L&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"text-neutral-300",children:""}),y.jsx("span",{className:"text-neutral-500",children:"Auto-saving"})]})]})]}),y.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[y.jsxs("button",{onClick:()=>p(!h),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${h?"bg-white shadow-sm":"bg-transparent"}`,children:[y.jsx(vf,{className:"h-4 w-4"}),"Versions"]}),y.jsxs("button",{onClick:()=>x(!m),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${m?"bg-white shadow-sm":"bg-transparent"}`,children:[y.jsx(xf,{className:"h-4 w-4"}),"Comments (",q.length,")"]}),y.jsxs("button",{onClick:()=>w(!v),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium transition hover:bg-white ${v?"border-purple-300 bg-purple-50 text-purple-700 shadow-sm":"text-neutral-600 hover:text-neutral-700"}`,children:[y.jsx(si,{className:"h-4 w-4"}),"AI Assistant"]}),y.jsxs("button",{onClick:Ue,className:"inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700",children:[y.jsx(wf,{className:"h-4 w-4"}),"Export"]}),y.jsxs("button",{onClick:Y,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-1.5 font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(a2,{className:"h-4 w-4"}),"Share"]}),y.jsxs("button",{onClick:we,className:"inline-flex items-center gap-2 rounded-md border border-red-200 bg-red-50 px-3 py-1.5 font-medium text-red-600 transition hover:bg-red-100",children:[y.jsx(Js,{className:"h-4 w-4"}),"Delete"]})]})]})}),y.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y.jsx("div",{className:"flex-1 overflow-y-auto",children:y.jsxs("div",{className:"mx-auto w-full max-w-4xl px-10 pb-24 pt-12",children:[y.jsxs("div",{className:"mb-10 flex items-center gap-3 text-sm text-neutral-500",children:[y.jsx(Wg,{className:"h-5 w-5 text-neutral-400"}),y.jsx("span",{children:"Collaborate with your team and keep every update in one place. Use / to use styling"})]}),y.jsx(GI,{value:r,onChange:se,placeholder:"Type '/' for commands or start writing..."},n??"new-document")]})}),h&&y.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-[#f7f6f3]",children:[y.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:y.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Document versions"})}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:xe.map(ae=>y.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"font-medium text-neutral-700",children:["Version ",ae.version]}),ae.version!==me.version&&y.jsx("button",{onClick:()=>ce(ae.version),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-800",children:"Restore"})]}),y.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:new Date(ae.createdAt).toLocaleString()}),ae.changeDescription&&y.jsx("p",{className:"mt-2 text-xs text-neutral-600",children:ae.changeDescription})]},ae._id))})]}),m&&y.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-[#f7f6f3]",children:[y.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:y.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Comments"})}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:q.map(ae=>{var $e,pt,It;return y.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-900 text-xs font-semibold text-neutral-100",children:((pt=($e=ae.author)==null?void 0:$e.name)==null?void 0:pt[0])||"U"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-neutral-700",children:((It=ae.author)==null?void 0:It.name)||"Unknown user"}),y.jsx("p",{className:"text-xs text-neutral-500",children:new Date(ae.createdAt).toLocaleString()})]})]}),y.jsx("p",{className:"mt-3 text-sm leading-relaxed text-neutral-700",children:ae.content})]},ae._id)})}),y.jsxs("form",{onSubmit:fe,className:"border-t border-neutral-200 px-4 py-3",children:[y.jsx("textarea",{value:S,onChange:ae=>C(ae.target.value),placeholder:"Leave a note...",className:"w-full resize-none rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",rows:3}),y.jsx("button",{type:"submit",disabled:!S.trim(),className:"mt-3 w-full rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:"Add comment"})]})]}),y.jsx(OD,{isOpen:v,onClose:()=>w(!1),documentId:n,documentContent:ue})]}),T&&y.jsxs("div",{className:"flex items-center justify-between border-t border-neutral-200 bg-[#f7f6f3]/90 px-10 py-3 text-sm text-neutral-600",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{children:"Unsaved changes"}),L&&y.jsx("span",{className:"text-neutral-500",children:"Auto-saving in progress"})]}),y.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(qc,{className:"h-4 w-4"}),"Save now"]})]})]}):y.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#fdfcf8]",children:y.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-neutral-300 border-t-neutral-700"})}):y.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#fdfcf8]",children:y.jsxs("div",{className:"text-center",children:[y.jsx(wf,{className:"mx-auto mb-4 h-16 w-16 text-neutral-300"}),y.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"No document selected"}),y.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Choose a page from the sidebar to begin editing."})]})})}function YI({documentId:n}){const[e,t]=N.useState(!1),[r,s]=N.useState({title:"",description:"",priority:"medium",dueDate:""}),[o,l]=N.useState(null),[u,d]=N.useState(!1),[h,p]=N.useState({description:"",priority:"medium",dueDate:""}),m=Rt(Le.tasks.getUserTasks,{includeCompleted:!0})||[],x=Rt(Le.tasks.getDocumentTasks,n?{documentId:n}:"skip")||[],v=Bt(Le.tasks.createTask),w=Bt(Le.tasks.updateTaskStatus),S=Bt(Le.tasks.updateTaskDetails),C=Bt(Le.tasks.deleteTask),T=async q=>{if(q.preventDefault(),!!r.title.trim())try{await v({title:r.title,description:r.description||void 0,priority:r.priority,dueDate:r.dueDate?new Date(r.dueDate).getTime():void 0,documentId:n}),s({title:"",description:"",priority:"medium",dueDate:""}),t(!1),Ge.success("Task created successfully")}catch(ie){Ge.error("Failed to create task"),console.error("Create task error:",ie)}},j=q=>{l(q._id),p({description:q.description||"",priority:q.priority,dueDate:q.dueDate?new Date(q.dueDate).toISOString().slice(0,10):""})},R=async q=>{if(q.preventDefault(),!!o)try{await S({taskId:o,description:h.description||void 0,priority:h.priority,dueDate:h.dueDate?new Date(h.dueDate).getTime():void 0}),Ge.success("Task updated"),l(null)}catch(ie){console.error("Update task error:",ie),Ge.error("Failed to update task")}},A=async q=>{if(window.confirm("Delete this task? This cannot be undone."))try{await C({taskId:q}),Ge.success("Task deleted"),o===q&&l(null)}catch(te){console.error("Delete task error:",te),Ge.error("Failed to delete task")}},L=async(q,ie,te)=>{try{await w({taskId:q,status:ie}),Ge.success(te||"Task status updated")}catch(he){Ge.error("Failed to update task status"),console.error("Update task error:",he)}},I=async q=>{await L(q,"in_progress","Task restored to In Progress")},H=q=>{switch(q){case"high":return"text-rose-600 bg-rose-50 border border-rose-200";case"medium":return"text-amber-600 bg-amber-50 border border-amber-200";case"low":return"text-emerald-600 bg-emerald-50 border border-emerald-200";default:return"text-neutral-600 bg-neutral-50 border border-neutral-200"}},W=q=>{switch(q){case"completed":return"text-emerald-600 bg-emerald-50";case"in_progress":return"text-blue-600 bg-blue-50";case"todo":return"text-neutral-500 bg-neutral-100";default:return"text-neutral-500 bg-neutral-100"}},re=n?x:m,me=re.filter(q=>q.status==="completed"),xe=re.filter(q=>q.status!=="completed");return y.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:y.jsx("div",{className:"flex-1 overflow-hidden",children:y.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[y.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Taskboard"}),y.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Tasks":"My Tasks"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Track progress and collaborate on tasks connected to this document.":"Manage your personal and shared assignments across the workspace."})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{onClick:()=>d(!u),className:`inline-flex items-center gap-2 rounded-full border px-5 py-2 text-sm font-medium transition ${u?"border-neutral-900 text-neutral-900":"border-neutral-200 text-neutral-600 hover:border-neutral-300 hover:text-neutral-800"}`,children:["Archive",me.length>0&&y.jsx("span",{className:"rounded-full bg-neutral-900 px-2 py-0.5 text-xs font-semibold text-white",children:me.length})]}),y.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(vi,{className:"h-4 w-4"}),"New Task"]})]})]})}),y.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[e&&y.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-6",children:y.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Task Title"}),y.jsx("input",{type:"text",value:r.title,onChange:q=>s({...r,title:q.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"Outline the task...",required:!0})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),y.jsx("textarea",{value:r.description,onChange:q=>s({...r,description:q.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,placeholder:"Provide helpful context for collaborators..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),y.jsxs("select",{value:r.priority,onChange:q=>s({...r,priority:q.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",children:[y.jsx("option",{value:"low",children:"Low"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"high",children:"High"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),y.jsx("input",{type:"date",value:r.dueDate,onChange:q=>s({...r,dueDate:q.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),y.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[y.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(xh,{className:"h-4 w-4"}),"Create Task"]}),y.jsx("button",{type:"button",onClick:()=>t(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:"Cancel"})]})]})}),y.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:[xe.length===0?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[y.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:y.jsx(i2,{className:"h-8 w-8 text-neutral-400"})}),y.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No tasks yet"}),y.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:n?"Create tasks linked to this document to align your team and track progress.":"Capture your next actions and assign work to teammates to keep momentum."}),y.jsxs("button",{onClick:()=>t(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[y.jsx(vi,{className:"h-4 w-4"}),"Add your first task"]})]}):y.jsx("div",{className:"space-y-4",children:xe.map(q=>{const ie=o===q._id;return y.jsxs("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-5 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:[y.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:q.title}),y.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${H(q.priority)}`,children:["Priority  ",q.priority.charAt(0).toUpperCase()+q.priority.slice(1)]})]}),q.description&&y.jsx("p",{className:"mt-3 text-sm text-neutral-600",children:q.description}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs font-medium uppercase tracking-[0.2em] text-neutral-400",children:[q.creator&&y.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[y.jsx(ew,{className:"h-4 w-4 text-neutral-400"}),"Created by ",q.creator.name]}),q.assignee&&y.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[y.jsx(ew,{className:"h-4 w-4 text-neutral-400"}),"Assigned to ",q.assignee.name]}),y.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[y.jsx(vf,{className:"h-4 w-4 text-neutral-400"}),q.dueDate?new Date(q.dueDate).toLocaleDateString():"No due date",y.jsxs("span",{className:"ml-1 flex gap-1",children:[y.jsx("button",{onClick:()=>j(q),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-neutral-700",title:"Edit task",children:y.jsx(G0,{className:"h-4 w-4"})}),y.jsx("button",{onClick:()=>A(q._id),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-red-500",title:"Delete task",children:y.jsx(Js,{className:"h-4 w-4"})})]})]})]})]}),y.jsxs("div",{className:"flex flex-col items-stretch gap-3 md:w-56",children:[y.jsx("span",{className:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${W(q.status)}`,children:q.status.replace("_"," ").replace(/\b\w/g,te=>te.toUpperCase())}),y.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[y.jsx("button",{onClick:()=>L(q._id,"todo"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${q.status==="todo"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"To Do"}),y.jsx("button",{onClick:()=>L(q._id,"in_progress"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${q.status==="in_progress"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"In Progress"}),y.jsx("button",{onClick:()=>L(q._id,"completed"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${q.status==="completed"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"Done"})]})]})]}),ie&&y.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-[#f7f6f3]/60 px-4 py-4",children:[y.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[y.jsx("h4",{className:"text-sm font-semibold text-neutral-700",children:"Edit Task"}),y.jsx("button",{onClick:()=>l(null),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-200",title:"Close editor",children:y.jsx(Zs,{className:"h-4 w-4"})})]}),y.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),y.jsx("textarea",{value:h.description,onChange:te=>p({...h,description:te.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",rows:3})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),y.jsxs("select",{value:h.priority,onChange:te=>p({...h,priority:te.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",children:[y.jsx("option",{value:"low",children:"Low"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"high",children:"High"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),y.jsx("input",{type:"date",value:h.dueDate,onChange:te=>p({...h,dueDate:te.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),y.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[y.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800",children:"Save changes"}),y.jsx("button",{type:"button",onClick:()=>l(null),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300",children:"Cancel"})]})]})]})]},q._id)})}),u&&y.jsxs("div",{className:"mt-8 rounded-2xl border border-neutral-200 bg-white px-5 py-5 shadow-sm",children:[y.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Archived Tasks"}),y.jsx("p",{className:"text-sm text-neutral-500",children:"Tasks marked as done are stored here. Restore them anytime."})]}),y.jsx("button",{onClick:()=>d(!1),className:"rounded-full border border-neutral-200 px-3 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",children:"Close"})]}),me.length===0?y.jsx("div",{className:"rounded-xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-4 py-6 text-center text-sm text-neutral-500",children:"No archived tasks yet."}):y.jsx("div",{className:"space-y-3",children:me.map(q=>y.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 text-sm text-neutral-700 shadow-sm",children:y.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-base font-semibold text-neutral-900",children:q.title}),y.jsxs("p",{className:"text-xs text-neutral-500",children:["Completed on"," ",q.dueDate?new Date(q.dueDate).toLocaleDateString():new Date(q.createdAt).toLocaleDateString()]}),q.description&&y.jsx("p",{className:"mt-2 text-sm text-neutral-600",children:q.description})]}),y.jsx("button",{onClick:()=>I(q._id),className:"inline-flex items-center justify-center rounded-full border border-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-neutral-900 transition hover:bg-neutral-900 hover:text-white",children:"Restore"})]})},q._id))})]})]})]})]})})})}function XI(){const[n,e]=N.useState(!1),[t,r]=N.useState({title:"",description:"",startTime:"",endTime:"",location:""}),[s,o]=N.useState(null),[l,u]=N.useState({title:"",description:"",startTime:"",endTime:"",location:""}),d=Rt(Le.calendar.getUserEvents,{})||[],h=Bt(Le.calendar.createEvent),p=Bt(Le.calendar.updateEvent),m=Bt(Le.calendar.deleteEvent),x=async C=>{if(C.preventDefault(),!(!t.title.trim()||!t.startTime||!t.endTime))try{await h({title:t.title,description:t.description||void 0,startTime:new Date(t.startTime).getTime(),endTime:new Date(t.endTime).getTime(),location:t.location||void 0}),r({title:"",description:"",startTime:"",endTime:"",location:""}),e(!1),Ge.success("Event created successfully")}catch(T){Ge.error("Failed to create event"),console.error("Create event error:",T)}},v=C=>{o(C._id),u({title:C.title,description:C.description||"",startTime:new Date(C.startTime).toISOString().slice(0,16),endTime:new Date(C.endTime).toISOString().slice(0,16),location:C.location||""})},w=async C=>{if(C.preventDefault(),!(!s||!l.title.trim()||!l.startTime||!l.endTime))try{await p({eventId:s,title:l.title,description:l.description||void 0,startTime:new Date(l.startTime).getTime(),endTime:new Date(l.endTime).getTime(),location:l.location||void 0}),Ge.success("Event updated"),o(null)}catch(T){console.error("Update event error:",T),Ge.error("Failed to update event")}},S=async C=>{if(window.confirm("Delete this event? This cannot be undone."))try{await m({eventId:C}),Ge.success("Event deleted"),s===C&&o(null)}catch(j){console.error("Delete event error:",j),Ge.error("Failed to delete event")}};return y.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:y.jsx("div",{className:"flex-1 overflow-hidden",children:y.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[y.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Calendar"}),y.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:"Workspace Schedule"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Keep your legal research, meetings, and deadlines aligned across the team."})]}),y.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(vi,{className:"h-4 w-4"}),"New Event"]})]})}),y.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[n&&y.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-6",children:y.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Event Title"}),y.jsx("input",{type:"text",value:t.title,onChange:C=>r({...t,title:C.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"What are we scheduling?",required:!0})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),y.jsx("textarea",{value:t.description,onChange:C=>r({...t,description:C.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,placeholder:"Add agenda or notes for collaborators..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start Time"}),y.jsx("input",{type:"datetime-local",value:t.startTime,onChange:C=>r({...t,startTime:C.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End Time"}),y.jsx("input",{type:"datetime-local",value:t.endTime,onChange:C=>r({...t,endTime:C.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",required:!0})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),y.jsx("input",{type:"text",value:t.location,onChange:C=>r({...t,location:C.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"Virtual link or meeting room (optional)"})]}),y.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[y.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(xh,{className:"h-4 w-4"}),"Create Event"]}),y.jsx("button",{type:"button",onClick:()=>e(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:"Cancel"})]})]})}),y.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:d.length===0?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[y.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:y.jsx(r2,{className:"h-8 w-8 text-neutral-400"})}),y.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No events scheduled"}),y.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:"Create your first event to align your workspace timeline."}),y.jsxs("button",{onClick:()=>e(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[y.jsx(vi,{className:"h-4 w-4"}),"Plan something new"]})]}):y.jsx("div",{className:"space-y-4",children:d.map(C=>{const T=s===C._id;return y.jsxs("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-5 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:[y.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-start justify-between gap-3",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:C.title}),C.description&&y.jsx("p",{className:"mt-3 text-sm text-neutral-600",children:C.description})]}),y.jsxs("div",{className:"flex gap-1",children:[y.jsx("button",{onClick:()=>v(C),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-neutral-700",title:"Edit event",children:y.jsx(G0,{className:"h-4 w-4"})}),y.jsx("button",{onClick:()=>S(C._id),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-red-500",title:"Delete event",children:y.jsx(Js,{className:"h-4 w-4"})})]})]}),y.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-sm text-neutral-500",children:[y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx(vf,{className:"h-4 w-4 text-neutral-400"}),new Date(C.startTime).toLocaleString(),"  ",new Date(C.endTime).toLocaleString()]}),C.location&&y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx(sD,{className:"h-4 w-4 text-neutral-400"}),C.location]}),C.creator&&y.jsxs("span",{className:"inline-flex items-center gap-1",children:[y.jsx(Wg,{className:"h-4 w-4 text-neutral-400"}),"Created by ",C.creator.name]})]})]}),y.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:new Date(C.startTime).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})})]}),T&&y.jsxs("div",{className:"mt-5 rounded-2xl border border-neutral-200 bg-[#f7f6f3]/70 px-4 py-4",children:[y.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[y.jsx("h4",{className:"text-sm font-semibold text-neutral-700",children:"Edit Event"}),y.jsx("button",{onClick:()=>o(null),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-200",title:"Close editor",children:y.jsx(Zs,{className:"h-4 w-4"})})]}),y.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Title"}),y.jsx("input",{type:"text",value:l.title,onChange:j=>u({...l,title:j.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",required:!0})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),y.jsx("textarea",{value:l.description,onChange:j=>u({...l,description:j.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",rows:3})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start time"}),y.jsx("input",{type:"datetime-local",value:l.startTime,onChange:j=>u({...l,startTime:j.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End time"}),y.jsx("input",{type:"datetime-local",value:l.endTime,onChange:j=>u({...l,endTime:j.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",required:!0})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),y.jsx("input",{type:"text",value:l.location,onChange:j=>u({...l,location:j.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),y.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[y.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800",children:"Save changes"}),y.jsx("button",{type:"button",onClick:()=>o(null),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300",children:"Cancel"})]})]})]})]},C._id)})})})]})]})})})}function JI({documentId:n}){const e=Rt(Le.audit.getDocumentAuditLog,n?{documentId:n}:"skip")||[],t=Rt(Le.audit.getUserAuditLog,{})||[],r=l=>{switch(l){case"view":return y.jsx(s2,{className:"w-4 h-4"});case"edit":return y.jsx(o2,{className:"w-4 h-4"});case"create":return y.jsx(vi,{className:"w-4 h-4"});case"delete":return y.jsx(Js,{className:"w-4 h-4"});case"share":return y.jsx(a2,{className:"w-4 h-4"});case"comment":return y.jsx(xf,{className:"w-4 h-4"});default:return y.jsx(Kg,{className:"w-4 h-4"})}},s=l=>{switch(l){case"view":return"text-blue-600 bg-blue-50";case"edit":return"text-green-600 bg-green-50";case"create":return"text-purple-600 bg-purple-50";case"delete":return"text-red-600 bg-red-50";case"share":return"text-orange-600 bg-orange-50";case"comment":return"text-indigo-600 bg-indigo-50";default:return"text-gray-600 bg-gray-50"}},o=n?e:t;return y.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:y.jsx("div",{className:"flex-1 overflow-hidden",children:y.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[y.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Audit Trail"}),y.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Audit Log":"My Activity Log"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Track every action taken on this document with full visibility.":"Review your recent activity across cases, documents, and collaboration."})]})}),y.jsx("div",{className:"flex-1 overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:y.jsx("div",{className:"h-full overflow-y-auto px-6 py-6",children:o.length===0?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[y.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:y.jsx(Kg,{className:"h-7 w-7 text-neutral-400"})}),y.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No activity yet"}),y.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:n?"As collaborators review or edit this document, their actions will be recorded here.":"Your activity across documents and cases will surface here once actions are recorded."})]}):y.jsx("div",{className:"space-y-4",children:o.map(l=>{var u,d;return y.jsx("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-4 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-full text-neutral-600 ${s(l.action)}`,children:r(l.action)}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm font-semibold text-neutral-900",children:[((u=l.user)==null?void 0:u.name)||"Unknown User"," ",l.action,"ed ",n?"this document":((d=l.document)==null?void 0:d.title)||"a document"]}),l.details&&y.jsx("p",{className:"text-sm text-neutral-500",children:l.details})]}),y.jsx("span",{className:"text-xs text-neutral-400",children:new Date(l.timestamp).toLocaleString()})]}),!n&&l.document&&y.jsxs("p",{className:"mt-2 text-xs uppercase tracking-[0.2em] text-neutral-400",children:["Document  ",l.document.title]})]})]})},l._id)})})})})]})})})}function ZI({selectedCaseId:n,onCaseSelect:e}){const[t,r]=N.useState(!1),[s,o]=N.useState(""),[l,u]=N.useState(""),[d,h]=N.useState(null),[p,m]=N.useState(""),[x,v]=N.useState(""),[w,S]=N.useState(!1),[C,T]=N.useState([]),[j,R]=N.useState(""),[A,L]=N.useState(!1),[I,H]=N.useState(!1),W=N.useRef(null),re=N.useRef(null),me=Rt(Le.cases.getUserCases)||[],xe=Rt(Le.cases.getCase,n?{caseId:n}:"skip"),q=Rt(Le.cases.getCaseDocuments,n?{caseId:n}:"skip")||[],ie=Rt(Le.cases.getCaseMessages,n?{caseId:n}:"skip"),te=Rt(Le.documents.listUserDocuments)||[],he=Rt(Le.files.getCaseFiles,n?{caseId:n}:"skip")||[],B=Bt(Le.cases.createCase),D=Bt(Le.cases.updateCase),U=Bt(Le.cases.deleteCase),se=Bt(Le.cases.addDocumentToCase),ue=Bt(Le.cases.removeDocumentFromCase),O=yf(Le.cases.sendMessageToCaseAI),V=Bt(Le.files.generateUploadUrl),Y=yf(Le.fileExtraction.convertUploadToDocument),ce=Bt(Le.files.deleteFile);N.useEffect(()=>{if(!n){T([]),R("");return}},[n]),N.useEffect(()=>{if(!ie)return;const K=[...ie].sort((Se,We)=>Se.timestamp-We.timestamp).map(Se=>({id:String(Se._id??Se.id??Se.timestamp),role:Se.isAI?"assistant":"user",text:Se.content,createdAt:Se.timestamp,sources:[]}));T(K)},[ie]);const fe=C.length?`${C[C.length-1].id}-${C[C.length-1].pending??!1}`:"none";N.useEffect(()=>{w&&W.current&&W.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[fe,w]);const we=async K=>{if(K.preventDefault(),!!s.trim())try{const Se=await B({name:s,description:l||void 0});e(Se),o(""),u(""),r(!1),Ge.success("Case created successfully")}catch(Se){Ge.error("Failed to create case"),console.error("Create case error:",Se)}},Ue=async K=>{try{await D({caseId:K,name:p,description:x||void 0}),h(null),Ge.success("Case updated successfully")}catch(Se){Ge.error("Failed to update case"),console.error("Update case error:",Se)}},ae=async(K,Se)=>{if(confirm(`Are you sure you want to delete the case "${Se}"? This will remove all documents from the case but won't delete the documents themselves.`))try{await U({caseId:K}),n===K&&e(null),Ge.success("Case deleted successfully")}catch(We){Ge.error("Failed to delete case"),console.error("Delete case error:",We)}},$e=async K=>{if(n)try{await se({caseId:n,documentId:K}),Ge.success("Document added to case")}catch(Se){Ge.error(Se.message||"Failed to add document to case"),console.error("Add document error:",Se)}},pt=async K=>{if(n)try{await ue({caseId:n,documentId:K}),Ge.success("Document removed from case")}catch(Se){Ge.error("Failed to remove document from case"),console.error("Remove document error:",Se)}},It=async K=>{var _e;if(K==null||K.preventDefault(),!n)return;const Se=j.trim();if(!Se||q.length===0&&he.length===0)return;const We={id:`temp-${Date.now()}`,role:"user",text:Se,createdAt:Date.now(),sources:[],pending:!0};T(st=>[...st,We]),R(""),L(!0),(_e=W.current)==null||_e.scrollIntoView({behavior:"smooth"});try{await O({caseId:n,content:Se})}catch(st){T(Ze=>Ze.filter(vn=>vn.id!==We.id)),Ge.error((st==null?void 0:st.message)||"Failed to send message to Case AI")}finally{L(!1)}},rn=async K=>{var _e;if(!n)return;const Se=(_e=K.target.files)==null?void 0:_e[0];if(!Se)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Se.type)){Ge.error("Only PDF or Word files can be uploaded"),K.target.value="";return}if(Se.size>15*1024*1024){Ge.error("File size must be less than 15MB"),K.target.value="";return}H(!0);try{const st=await V(),Ze=await fetch(st,{method:"POST",headers:{"Content-Type":Se.type},body:Se});if(!Ze.ok)throw new Error("Upload failed");const{storageId:vn}=await Ze.json(),_t=await Y({storageId:vn,name:Se.name,type:Se.type,size:Se.size,caseId:n});if(_t.status==="ok")Ge.success("File converted into a case document. Review it under Case Documents.");else throw new Error(_t.message||"Could not convert file.")}catch(st){console.error("Case file upload error",st),Ge.error((st==null?void 0:st.message)||"Failed to upload file")}finally{re.current&&(re.current.value=""),H(!1)}},qn=async(K,Se)=>{if(confirm(`Delete the file "${Se}" from this case? This cannot be undone.`))try{await ce({fileId:K}),Ge.success("File deleted")}catch(We){console.error("Delete case file error",We),Ge.error("Failed to delete file")}},jt=te.filter(K=>K&&!K.caseId&&!q.some(Se=>Se._id===K._id)),Sn=((xe==null?void 0:xe.documentCount)??q.length)>=30,At=q.length>0||he.length>0,sn=K=>{if(K===0)return"0 B";const Se=1024,We=["B","KB","MB","GB"],_e=Math.floor(Math.log(K)/Math.log(Se));return parseFloat((K/Math.pow(Se,_e)).toFixed(2))+" "+We[_e]},En=K=>{if(!K)return"";const Se=K.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return Se.length>140?`${Se.slice(0,140)}`:Se};return y.jsx("div",{className:"flex h-full flex-col bg-[#fdfcf8]",children:y.jsx("div",{className:"flex-1 overflow-y-auto",children:y.jsxs("div",{className:"mx-auto flex min-h-full w-full max-w-6xl flex-col gap-6 px-6 py-8",children:[y.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Case Management"}),y.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:"Organize Your Matters"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Group related documents, collaborate with your team, and unlock AI insights per case."})]}),y.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(vi,{className:"h-4 w-4"}),"New Case"]})]})}),y.jsxs("div",{className:"flex flex-1 min-h-0 flex-col gap-6 lg:flex-row",children:[y.jsxs("div",{className:"flex w-full flex-col rounded-3xl border border-neutral-200/70 bg-white shadow-sm lg:max-w-xs",children:[y.jsx("div",{className:"border-b border-neutral-200/70 px-5 py-5",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Cases"}),y.jsxs("p",{className:"mt-1 text-sm text-neutral-500",children:[me.length," active"]})]}),y.jsx("button",{onClick:()=>r(!0),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",title:"Create case",children:y.jsx(vi,{className:"h-4 w-4"})})]})}),t&&y.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-5 py-5",children:y.jsxs("form",{onSubmit:we,className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Case Name"}),y.jsx("input",{type:"text",value:s,onChange:K=>o(K.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"e.g. Johnson vs. State",autoFocus:!0,required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),y.jsx("textarea",{value:l,onChange:K=>u(K.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2,placeholder:"Optional context or notes"})]}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-100 transition hover:bg-neutral-700",children:[y.jsx(qc,{className:"h-3 w-3"}),"Save"]}),y.jsxs("button",{type:"button",onClick:()=>r(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:[y.jsx(Zs,{className:"h-3 w-3"}),"Cancel"]})]})]})}),y.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-5",children:me.length===0?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-4 py-12 text-center",children:[y.jsx(Sf,{className:"h-10 w-10 text-neutral-400"}),y.jsx("h3",{className:"mt-4 text-sm font-semibold text-neutral-900",children:"No cases yet"}),y.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Create your first case to start organizing documents and discussions."})]}):y.jsx("div",{className:"space-y-3",children:me.map(K=>y.jsx("div",{className:`group rounded-2xl border px-4 py-4 transition ${n===K._id?"border-neutral-900 bg-neutral-900/90 text-neutral-100 shadow-sm":"border-neutral-200 bg-white hover:border-neutral-300 hover:shadow-md"}`,onClick:()=>e(K._id),children:y.jsx("div",{className:"flex items-start justify-between gap-3",children:y.jsx("div",{className:"min-w-0 flex-1",children:d===K._id?y.jsxs("div",{className:"space-y-2",onClick:Se=>Se.stopPropagation(),children:[y.jsx("input",{type:"text",value:p,onChange:Se=>m(Se.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"}),y.jsx("textarea",{value:x,onChange:Se=>v(Se.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>Ue(K._id),className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-neutral-900 text-neutral-100 transition hover:bg-neutral-700",children:y.jsx(qc,{className:"h-4 w-4"})}),y.jsx("button",{onClick:()=>h(null),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:y.jsx(Zs,{className:"h-4 w-4"})})]})]}):y.jsxs("div",{className:"space-y-2",children:[y.jsx("h4",{className:`truncate text-sm font-semibold ${n===K._id?"text-neutral-100":"text-neutral-900"}`,children:K.name}),K.description&&y.jsx("p",{className:`line-clamp-2 text-xs ${n===K._id?"text-neutral-200/90":"text-neutral-500"}`,children:K.description}),y.jsxs("div",{className:`flex items-center justify-between text-[11px] uppercase tracking-[0.25em] ${n===K._id?"text-neutral-200":"text-neutral-400"}`,children:[y.jsxs("span",{children:[K.documentCount,"/30 docs "," ",sn(K.totalSize),"/50MB"]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:Se=>{Se.stopPropagation(),h(K._id),m(K.name),v(K.description||"")},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===K._id?"border-neutral-700 text-neutral-200 hover:border-neutral-500":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,title:"Edit case",children:y.jsx(o2,{className:"h-3.5 w-3.5"})}),y.jsx("button",{onClick:Se=>{Se.stopPropagation(),ae(K._id,K.name)},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===K._id?"border-neutral-700 text-rose-200 hover:border-rose-400":"border-neutral-200 text-rose-500 hover:border-rose-300 hover:text-rose-600"}`,title:"Delete case",children:y.jsx(Js,{className:"h-3.5 w-3.5"})})]})]})]})})})},K._id))})})]}),y.jsx("div",{className:"flex-1 overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:xe?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[y.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-5",children:y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold text-neutral-900",children:xe.name}),xe.description&&y.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:xe.description}),y.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[y.jsxs("span",{children:[xe.documentCount,"/30 Documents"]}),y.jsx("span",{children:""}),y.jsxs("span",{children:[sn(xe.totalSize),"/50MB Used"]}),xe.documentCount>=30&&y.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-600",children:[y.jsx(F0,{className:"h-4 w-4"}),"Limit Reached"]})]})]}),y.jsxs("button",{onClick:()=>S(!w),className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition ${w?"border-indigo-400 bg-indigo-50 text-indigo-600":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:[y.jsx(si,{className:"h-4 w-4"}),"Case AI Chat"]})]})}),y.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[y.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200/60 px-5 py-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case Documents"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Documents linked to this case and analyzed by AI."})]}),y.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[q.length,"/30"]})]}),y.jsx("div",{className:"max-h-[360px] space-y-3 overflow-y-auto px-5 py-4",children:q.length===0?y.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/70 px-4 py-8 text-center",children:[y.jsx(bh,{className:"h-10 w-10 text-neutral-400"}),y.jsx("p",{className:"mt-3 text-sm font-semibold text-neutral-900",children:"No documents linked"}),y.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Use the Document Library to attach existing docs."})]}):q.map(K=>y.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3 shadow-sm",children:[y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:K.title}),K.content&&y.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:En(K.content)}),K.lastModifiedAt&&y.jsxs("p",{className:"mt-1 text-[11px] uppercase tracking-[0.2em] text-neutral-400",children:["Updated"," ",new Date(K.lastModifiedAt).toLocaleDateString()]})]}),y.jsx("button",{onClick:()=>pt(String(K._id)),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-rose-200 text-rose-500 transition hover:border-rose-400 hover:text-rose-600",title:"Remove from case",children:y.jsx(Js,{className:"h-4 w-4"})})]},K._id))})]}),y.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200/60 px-5 py-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Document Library"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Select personal or shared documents to add them to this case."})]}),Sn&&y.jsx("span",{className:"rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-700",children:"Limit Reached"})]}),y.jsx("div",{className:"max-h-[360px] space-y-3 overflow-y-auto px-5 py-4",children:jt.length===0?y.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/70 px-4 py-8 text-center text-sm text-neutral-500",children:"No available documents. Create a document first or remove it from another case."}):jt.map(K=>y.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3 shadow-sm",children:[y.jsxs("div",{className:"min-w-0 flex-1",children:[y.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:K.title}),y.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:["Updated ",new Date(K.lastModifiedAt).toLocaleDateString()]})]}),y.jsxs("button",{onClick:()=>$e(String(K._id)),disabled:Sn,className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:[y.jsx(vi,{className:"h-3.5 w-3.5"}),"Add"]})]},K._id))})]})]}),y.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-neutral-200/60 px-5 py-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case Attachments"}),y.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Upload supporting PDF or Word files for this case (max 15MB)."})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{ref:re,type:"file",accept:".pdf,.doc,.docx",className:"hidden",onChange:rn}),y.jsxs("button",{type:"button",onClick:()=>{var K;return(K=re.current)==null?void 0:K.click()},disabled:I,className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900 disabled:cursor-not-allowed disabled:opacity-60",children:[y.jsx(S5,{className:"h-4 w-4"}),I?"Uploading...":"Upload file"]})]})]}),y.jsx("div",{className:"space-y-3 px-5 py-4 max-h-80 overflow-y-auto",children:he.length===0?y.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/70 px-4 py-6 text-center text-sm text-neutral-500",children:"No attachments yet. Upload PDF or Word files that should stay with this case."}):he.map(K=>y.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3",children:[y.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[y.jsx(uD,{className:"h-5 w-5 text-neutral-400"}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("p",{className:"truncate text-sm font-semibold text-neutral-900",children:K.name}),y.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:[sn(K.size),"  Uploaded"," ",new Date(K.uploadedAt).toLocaleDateString()]})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[K.url&&y.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",title:"Download",children:y.jsx(v5,{className:"h-4 w-4"})}),y.jsx("button",{onClick:()=>qn(String(K._id),K.name),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-200 text-rose-500 transition hover:border-rose-400 hover:text-rose-600",title:"Delete file",children:y.jsx(Js,{className:"h-4 w-4"})})]})]},K._id))})]})]})})]}),w&&y.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50 px-4 py-6",children:y.jsxs("div",{className:"flex h-[90vh] w-full max-w-4xl flex-col rounded-3xl bg-white shadow-2xl",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 px-6 py-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(si,{className:"h-5 w-5 text-indigo-500"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case AI Chat"}),y.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:xe.name})]})]}),y.jsx("button",{onClick:()=>S(!1),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",title:"Close assistant",children:y.jsx(Zs,{className:"h-4 w-4"})})]}),y.jsx(e9,{messages:C,isSendingMessage:A,userMessage:j,setUserMessage:R,handleSendMessage:It,canSendMessages:At,messagesEndRef:W})]})})]}):y.jsxs("div",{className:"flex h-full flex-col items-center justify-center px-6 py-12 text-center",children:[y.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-sm",children:y.jsx(Sf,{className:"h-10 w-10 text-neutral-400"})}),y.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No Case Selected"}),y.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Select a case from the sidebar or create a new one to start organizing your legal materials."}),y.jsxs("button",{onClick:()=>r(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[y.jsx(vi,{className:"h-4 w-4"}),"Create a case"]})]})})]})]})})})}function e9({messages:n,isSendingMessage:e,userMessage:t,setUserMessage:r,handleSendMessage:s,canSendMessages:o,messagesEndRef:l}){return y.jsxs("div",{className:"flex h-full min-h-0 w-full flex-col overflow-hidden bg-white",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-6 py-6",children:[n.length===0&&!e?y.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-2xl border border-dashed border-neutral-200 bg-white/80 px-3 py-2 text-xs text-neutral-500",children:[y.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-indigo-500"}),"Waiting for AI response..."]}):y.jsx("div",{className:"space-y-4",children:n.map(u=>{const d=u.role==="assistant",h=d?"text-neutral-400":"text-white/70";return y.jsx("div",{className:`flex ${d?"justify-start":"justify-end"}`,children:y.jsxs("div",{className:`w-full rounded-3xl border px-4 py-3 text-sm shadow-sm ${d?"border-neutral-200 bg-white text-neutral-800":"border-neutral-900 bg-neutral-900 text-white"}`,children:[y.jsx("p",{className:`text-[11px] font-semibold uppercase tracking-[0.3em] ${h}`,children:d?"Legal AI Assistant":"You"}),y.jsx("p",{className:"mt-2 whitespace-pre-wrap",children:u.text}),u.pending&&y.jsx("p",{className:`mt-2 text-[11px] uppercase tracking-[0.3em] ${h}`,children:"Processing..."}),u.createdAt&&y.jsx("p",{className:`mt-2 text-[11px] uppercase tracking-[0.3em] ${h}`,children:new Date(u.createdAt).toLocaleTimeString()})]})},u.id)})}),y.jsx("div",{ref:l})]}),y.jsx("div",{className:"border-t border-neutral-200/80 bg-[#f7f6f3]/60 px-6 py-4",children:o?y.jsxs("form",{onSubmit:s,className:"flex flex-col gap-3 md:flex-row md:items-end md:gap-4",children:[y.jsx("div",{className:"flex-1",children:y.jsx("textarea",{value:t,onChange:u=>r(u.target.value),placeholder:"Ask a question about this case...",rows:3,className:"w-full resize-none rounded-2xl border border-neutral-200 bg-white px-5 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",disabled:e})}),y.jsx("button",{type:"submit",disabled:e||!t.trim(),className:"inline-flex h-11 w-full items-center justify-center rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800 disabled:cursor-not-allowed disabled:bg-neutral-300 md:w-32",children:e?"Thinking...":"Send"})]}):y.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:y.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[y.jsx(F0,{className:"h-4 w-4"}),"Add at least one document or attachment to use the AI chat."]})})})]})}function t9(){const n=Rt(Le.aiChats.listChats)??[],[e,t]=N.useState(null),[r,s]=N.useState(""),[o,l]=N.useState(""),[u,d]=N.useState(!1),h=N.useRef(null),p=Bt(Le.aiChats.createChat),m=yf(Le.aiChats.sendMessage),x=Bt(Le.aiChats.renameChat),v=Bt(Le.aiChats.deleteChat),w=Rt(Le.aiChats.getMessages,e?{chatId:e}:"skip")??[],S=N.useMemo(()=>n.find(L=>L&&L._id===e),[n,e]),C=N.useMemo(()=>o.trim()?n.filter(L=>L&&L.title.toLowerCase().includes(o.trim().toLowerCase())):n,[n,o]);N.useEffect(()=>{var L,I;if(!(n!=null&&n.length)){t(null);return}e?n.some(W=>(W==null?void 0:W._id)===e)||t(((L=n[0])==null?void 0:L._id)??null):t(((I=n[0])==null?void 0:I._id)??null)},[n,e]),N.useEffect(()=>{var L;(L=h.current)==null||L.scrollIntoView({behavior:"smooth"})},[w,u]),N.useEffect(()=>{s("")},[e]);const T=async()=>{try{const L=await p({});t(L)}catch(L){console.error("Failed to create chat",L),Ge.error("Unable to start a new chat right now.")}},j=async()=>{if(!(!e||!r.trim()||u))try{d(!0),await m({chatId:e,content:r.trim()}),s("")}catch(L){console.error("Failed to send chat message",L),Ge.error("AI assistant is unavailable. Please try again.")}finally{d(!1)}},R=async(L,I)=>{const H=window.prompt("Rename chat",I||"Untitled chat");if(!(!H||!H.trim()))try{await x({chatId:L,title:H.trim()}),Ge.success("Chat renamed")}catch(W){console.error("Failed to rename chat",W),Ge.error("Could not rename chat")}},A=async L=>{if(window.confirm("Delete this chat? This action cannot be undone."))try{await v({chatId:L}),e===L&&t(null),Ge.success("Chat deleted")}catch(H){console.error("Failed to delete chat",H),Ge.error("Could not delete chat")}};return y.jsxs("div",{className:"flex h-full bg-[#f7f6f3] text-neutral-900",children:[y.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-white/80",children:[y.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Workspace"}),y.jsx("p",{className:"mt-1 text-sm font-semibold text-neutral-800",children:"WS Chat"})]}),y.jsxs("button",{onClick:T,className:"inline-flex items-center gap-1 rounded-lg border border-neutral-200 px-3 py-1.5 text-xs font-medium text-neutral-600 transition hover:bg-neutral-50",children:[y.jsx(si,{className:"h-3.5 w-3.5"}),"New Chat"]})]}),y.jsx("div",{className:"mt-4",children:y.jsx("input",{type:"text",placeholder:"Search chats...",value:o,onChange:L=>l(L.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400"})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3",children:C.length===0?y.jsxs("div",{className:"rounded-xl border border-dashed border-neutral-200 bg-neutral-50 px-4 py-8 text-center",children:[y.jsx(O5,{className:"mx-auto mb-3 h-6 w-6 text-neutral-400"}),y.jsx("p",{className:"text-sm font-medium text-neutral-700",children:o?"No chats match that search":"No chats yet"}),y.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Start a conversation to see it here."})]}):y.jsx("div",{className:"space-y-2",children:C.map(L=>{if(!L)return null;const I=L._id===e;return y.jsxs("div",{className:`relative rounded-xl border px-3 py-2 text-left transition ${I?"border-neutral-900 bg-neutral-900 text-white shadow-sm":"border-neutral-200 bg-white/70 text-neutral-700 hover:border-neutral-300"}`,role:"button",tabIndex:0,onClick:()=>t(L._id),onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),t(L._id))},children:[y.jsx("button",{className:`absolute right-2 top-2 rounded-full p-1 text-neutral-400 transition ${I?"hover:text-white":"hover:text-neutral-700"}`,onClick:H=>{H.stopPropagation(),R(L._id,L.title)},title:"Rename chat",children:y.jsx(G0,{className:"h-4 w-4"})}),y.jsx("button",{className:"absolute right-2 top-7 rounded-full p-1 text-[10px] text-neutral-400 hover:text-red-300",onClick:H=>{H.stopPropagation(),A(L._id)},title:"Delete chat",children:y.jsx(Js,{className:"h-4 w-4"})}),y.jsx("p",{className:"truncate text-sm font-semibold",children:L.title||"Untitled chat"}),y.jsx("p",{className:`mt-1 text-xs ${I?"text-neutral-300":"text-neutral-500"}`,children:L.lastMessagePreview||"No messages yet"})]},L._id)})})})]}),y.jsx("div",{className:"flex flex-1 flex-col",children:S?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 bg-white/70 px-8 py-5",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-neutral-400",children:"Conversation"}),y.jsx("h2",{className:"mt-1 text-xl font-semibold text-neutral-900",children:S.title||"Untitled chat"})]}),y.jsx("button",{onClick:T,className:"rounded-full border border-neutral-300 bg-white px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-400",children:"Start new chat"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto px-8 py-6",children:w.length===0?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center text-neutral-500",children:[y.jsx(si,{className:"h-10 w-10 text-neutral-300"}),y.jsx("p",{className:"mt-4 text-lg font-medium text-neutral-800",children:"This chat is empty."}),y.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Ask a question to kick off the conversation or start a new chat."})]}):y.jsxs("div",{className:"space-y-4",children:[w.map(L=>y.jsx("div",{className:`flex ${L.role==="user"?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`max-w-2xl rounded-2xl px-5 py-3 text-sm leading-relaxed shadow-sm ${L.role==="user"?"bg-neutral-900 text-white":"bg-white text-neutral-800"}`,children:[y.jsx("p",{className:"whitespace-pre-wrap",children:L.content}),y.jsx("p",{className:`mt-2 text-[11px] ${L.role==="user"?"text-neutral-300":"text-neutral-500"}`,children:new Date(L.createdAt).toLocaleTimeString()})]})},L._id)),u&&y.jsx("div",{className:"flex justify-start",children:y.jsx("div",{className:"rounded-2xl bg-white px-4 py-2 text-xs text-neutral-500 shadow-sm",children:"AI is drafting a response..."})}),y.jsx("div",{ref:h})]})}),y.jsx("div",{className:"border-t border-neutral-200 bg-white/90 px-8 py-5",children:y.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 shadow-sm",children:[y.jsxs("form",{onSubmit:L=>{L.preventDefault(),j()},className:"flex items-end gap-3",children:[y.jsx("textarea",{value:r,onChange:L=>s(L.target.value),placeholder:"Ask a question about strategy, drafting, compliance, or research...",className:"h-24 flex-1 resize-none rounded-xl border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-800 outline-none transition focus:border-neutral-400",disabled:u,onKeyDown:L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),j())}}),y.jsx("button",{type:"submit",disabled:!r.trim()||u,className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-neutral-900 text-white transition hover:bg-neutral-800 disabled:opacity-40",children:y.jsx(xh,{className:"h-5 w-5"})})]}),y.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Press Enter to send. Shift + Enter adds a new line."})]})})]}):y.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-center text-neutral-500",children:[y.jsx(si,{className:"h-12 w-12 text-neutral-300"}),y.jsx("p",{className:"mt-4 text-lg font-semibold text-neutral-800",children:"Create your first chat"}),y.jsx("p",{className:"mt-2 max-w-sm text-sm",children:"Launch a WS Chat thread from the sidebar to brainstorm briefs, summarize documents, or get legal research inspiration."}),y.jsx("button",{onClick:T,className:"mt-6 rounded-full border border-neutral-300 bg-white px-4 py-2 text-sm font-medium text-neutral-700 transition hover:border-neutral-400",children:"Start chatting"})]})})]})}function n9(){const{shareableLink:n}=QO(),[e,t]=N.useState(!1),r=Rt(Le.documents.getDocumentByShareableLink,n?{shareableLink:n}:"skip"),s=N.useMemo(()=>bT(r==null?void 0:r.content),[r==null?void 0:r.content]);N.useEffect(()=>{n&&r===null&&t(!0)},[r,n]);const o=()=>{if(!r)return;const l=window.open("","_blank");l&&(l.document.write(`
        <html>
          <head>
            <title>${r.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content p { margin: 0 0 1em; }
            </style>
          </head>
          <body>
            <h1>${r.title}</h1>
            <div class="content">${s||"<p>This document is empty.</p>"}</div>
          </body>
        </html>
      `),l.document.close(),l.print())};return e?y.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx(wf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),y.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Document Not Found"}),y.jsx("p",{className:"text-gray-600",children:"The shared document you're looking for doesn't exist or is no longer available."})]})}):r?y.jsxs("div",{className:"min-h-screen bg-gray-50",children:[y.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kodex"}),y.jsx("span",{className:"ml-2 text-sm text-gray-500 font-medium",children:"v1.0"})]}),y.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[y.jsx(wf,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})}),y.jsx("div",{className:"max-w-4xl mx-auto py-8 px-6",children:y.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),y.jsxs("div",{className:"text-sm text-gray-500",children:["Last modified: ",new Date(r.lastModifiedAt).toLocaleString(),y.jsx("span",{className:"mx-2",children:""}),"Version ",r.version]})]}),y.jsx("div",{className:"prose max-w-none",children:y.jsx("div",{className:"text-gray-900 leading-relaxed",style:{fontFamily:"Georgia, serif"},dangerouslySetInnerHTML:{__html:s||"<p>This document is empty.</p>"}})})]})})]}):y.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function r9(){const[n,e]=N.useState(!1),[t,r]=N.useState("editor"),[s,o]=N.useState(null),[l,u]=N.useState(null),d=Rt(Le.auth.loggedInUser),h={editor:"Documents",cases:"Cases",tasks:"Tasks",calendar:"Calendar",audit:"Audit Log",chat:"WS Chat"},p=()=>{switch(t){case"editor":return y.jsx(QI,{documentId:s,onDocumentChange:o,currentUserName:(d==null?void 0:d.name)||(d==null?void 0:d.email)||void 0});case"cases":return y.jsx(ZI,{selectedCaseId:l,onCaseSelect:u});case"tasks":return y.jsx(YI,{documentId:s});case"calendar":return y.jsx(XI,{});case"audit":return y.jsx(JI,{documentId:s});case"chat":return y.jsx(t9,{});default:return null}};return y.jsxs("div",{className:"h-screen flex flex-col bg-[#f7f6f3] text-neutral-900",children:[y.jsx(cO,{children:y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f6f3] p-6",children:y.jsxs("div",{className:"max-w-md w-full",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-neutral-400",children:y.jsx("span",{children:"Welcome"})}),y.jsx("h1",{className:"mt-6 text-4xl font-semibold text-neutral-900",children:"Sign in to continue"}),y.jsx("p",{className:"mt-3 text-sm text-neutral-500",children:"Unlock collaborative drafting, AI research, and case automation in one calm workspace."})]}),y.jsx("div",{className:"rounded-3xl border border-neutral-200 bg-white/90 p-6 shadow-sm",children:y.jsx(y5,{})})]})})}),y.jsx(lO,{children:y.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[y.jsx(MD,{collapsed:n,onToggleCollapse:()=>e(!n),activeView:t,onViewChange:r,selectedDocumentId:s,onDocumentSelect:o,selectedCaseId:l,onCaseSelect:u}),y.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[y.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-neutral-200/70 bg-[#f7f6f3]/90 px-6 backdrop-blur",children:[y.jsx("div",{className:"flex flex-col",children:y.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-neutral-500",children:[y.jsx("span",{className:"font-medium text-neutral-700",children:"Home"}),y.jsx("span",{className:"text-neutral-300",children:"/"}),y.jsx("span",{children:h[t]}),t==="editor"&&s&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"text-neutral-300",children:"/"}),y.jsx("span",{className:"truncate max-w-[240px] text-neutral-500",title:"Active document",children:"Document"})]})]})}),y.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-500",children:[d&&y.jsx("span",{className:"hidden sm:inline-flex max-w-[180px] truncate",children:d.name||d.email}),y.jsx(b5,{})]})]}),y.jsx("div",{className:"flex-1 overflow-hidden",children:p()})]})]})})]})}function i9(){return y.jsxs(jR,{children:[y.jsx(g5,{position:"top-right"}),y.jsxs(uR,{children:[y.jsx(Vg,{path:"/shared/:shareableLink",element:y.jsx(n9,{})}),y.jsx(Vg,{path:"/*",element:y.jsx(r9,{})})]})]})}const xT=document.getElementById("root");if(!xT)throw new Error("Root element with id 'root' not found in the document.");const gE=OA.createRoot(xT),yE="https://fleet-goat-249.convex.cloud";if(yE.length===0)console.error("VITE_CONVEX_URL is not defined. Make sure `convex dev` is running or provide the deployment URL in your environment."),gE.render(y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f6f3] text-neutral-900",children:y.jsxs("div",{className:"max-w-lg space-y-4 rounded-lg border border-neutral-200 bg-white p-8 shadow-sm",children:[y.jsx("h1",{className:"text-xl font-semibold",children:"Configuration required"}),y.jsxs("p",{className:"text-sm text-neutral-600",children:["The application cannot connect to Convex because the ",y.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"VITE_CONVEX_URL"}),"environment variable is missing. Start the backend with ",y.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"convex dev"})," or set the URL in a",y.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:".env.local"})," file."]}),y.jsx("p",{className:"text-sm text-neutral-600",children:"Once configured, restart the development server to continue."})]})}));else{const n=new YM(yE);gE.render(y.jsx(N.StrictMode,{children:y.jsx(yO,{client:n,children:y.jsx(i9,{})})}))}
