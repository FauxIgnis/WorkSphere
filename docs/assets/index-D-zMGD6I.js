(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function O0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Im={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function yk(){if(b1)return uc;b1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:l,ref:s!==void 0?s:null,props:o}}return uc.Fragment=e,uc.jsx=t,uc.jsxs=t,uc}var x1;function bk(){return x1||(x1=1,Im.exports=yk()),Im.exports}var v=bk(),Hm={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function xk(){if(v1)return Qe;v1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function N(M,P,W){this.props=M,this.context=P,this.refs=C,this.updater=W||w}N.prototype.isReactComponent={},N.prototype.setState=function(M,P){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,P,"setState")},N.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function L(){}L.prototype=N.prototype;function R(M,P,W){this.props=M,this.context=P,this.refs=C,this.updater=W||w}var k=R.prototype=new L;k.constructor=R,S(k,N.prototype),k.isPureReactComponent=!0;var j=Array.isArray;function H(){}var U={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function ie(M,P,W){var se=W.ref;return{$$typeof:n,type:M,key:P,ref:se!==void 0?se:null,props:W}}function ge(M,P){return ie(M.type,P,M.props)}function be(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function he(M){var P={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(W){return P[W]})}var ce=/\/+/g;function ve(M,P){return typeof M=="object"&&M!==null&&M.key!=null?he(""+M.key):P.toString(36)}function de(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(H,H):(M.status="pending",M.then(function(P){M.status==="pending"&&(M.status="fulfilled",M.value=P)},function(P){M.status==="pending"&&(M.status="rejected",M.reason=P)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function z(M,P,W,se,le){var Z=typeof M;(Z==="undefined"||Z==="boolean")&&(M=null);var Se=!1;if(M===null)Se=!0;else switch(Z){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(M.$$typeof){case n:case e:Se=!0;break;case p:return Se=M._init,z(Se(M._payload),P,W,se,le)}}if(Se)return le=le(M),Se=se===""?"."+ve(M,0):se,j(le)?(W="",Se!=null&&(W=Se.replace(ce,"$&/")+"/"),z(le,P,W,"",function(nt){return nt})):le!=null&&(be(le)&&(le=ge(le,W+(le.key==null||M&&M.key===le.key?"":(""+le.key).replace(ce,"$&/")+"/")+Se)),P.push(le)),1;Se=0;var ke=se===""?".":se+":";if(j(M))for(var fe=0;fe<M.length;fe++)se=M[fe],Z=ke+ve(se,fe),Se+=z(se,P,W,Z,le);else if(fe=x(M),typeof fe=="function")for(M=fe.call(M),fe=0;!(se=M.next()).done;)se=se.value,Z=ke+ve(se,fe++),Se+=z(se,P,W,Z,le);else if(Z==="object"){if(typeof M.then=="function")return z(de(M),P,W,se,le);throw P=String(M),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Se}function D(M,P,W){if(M==null)return M;var se=[],le=0;return z(M,se,"","",function(Z){return P.call(W,Z,le++)}),se}function $(M){if(M._status===-1){var P=M._result;P=P(),P.then(function(W){(M._status===0||M._status===-1)&&(M._status=1,M._result=W)},function(W){(M._status===0||M._status===-1)&&(M._status=2,M._result=W)}),M._status===-1&&(M._status=0,M._result=P)}if(M._status===1)return M._result.default;throw M._result}var B=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},te={map:D,forEach:function(M,P,W){D(M,function(){P.apply(this,arguments)},W)},count:function(M){var P=0;return D(M,function(){P++}),P},toArray:function(M){return D(M,function(P){return P})||[]},only:function(M){if(!be(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Qe.Activity=m,Qe.Children=te,Qe.Component=N,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=R,Qe.StrictMode=r,Qe.Suspense=d,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return U.H.useMemoCache(M)}},Qe.cache=function(M){return function(){return M.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(M,P,W){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=S({},M.props),le=M.key;if(P!=null)for(Z in P.key!==void 0&&(le=""+P.key),P)!J.call(P,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&P.ref===void 0||(se[Z]=P[Z]);var Z=arguments.length-2;if(Z===1)se.children=W;else if(1<Z){for(var Se=Array(Z),ke=0;ke<Z;ke++)Se[ke]=arguments[ke+2];se.children=Se}return ie(M.type,le,se)},Qe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Qe.createElement=function(M,P,W){var se,le={},Z=null;if(P!=null)for(se in P.key!==void 0&&(Z=""+P.key),P)J.call(P,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(le[se]=P[se]);var Se=arguments.length-2;if(Se===1)le.children=W;else if(1<Se){for(var ke=Array(Se),fe=0;fe<Se;fe++)ke[fe]=arguments[fe+2];le.children=ke}if(M&&M.defaultProps)for(se in Se=M.defaultProps,Se)le[se]===void 0&&(le[se]=Se[se]);return ie(M,Z,le)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(M){return{$$typeof:u,render:M}},Qe.isValidElement=be,Qe.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:$}},Qe.memo=function(M,P){return{$$typeof:h,type:M,compare:P===void 0?null:P}},Qe.startTransition=function(M){var P=U.T,W={};U.T=W;try{var se=M(),le=U.S;le!==null&&le(W,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(H,B)}catch(Z){B(Z)}finally{P!==null&&W.types!==null&&(P.types=W.types),U.T=P}},Qe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Qe.use=function(M){return U.H.use(M)},Qe.useActionState=function(M,P,W){return U.H.useActionState(M,P,W)},Qe.useCallback=function(M,P){return U.H.useCallback(M,P)},Qe.useContext=function(M){return U.H.useContext(M)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(M,P){return U.H.useDeferredValue(M,P)},Qe.useEffect=function(M,P){return U.H.useEffect(M,P)},Qe.useEffectEvent=function(M){return U.H.useEffectEvent(M)},Qe.useId=function(){return U.H.useId()},Qe.useImperativeHandle=function(M,P,W){return U.H.useImperativeHandle(M,P,W)},Qe.useInsertionEffect=function(M,P){return U.H.useInsertionEffect(M,P)},Qe.useLayoutEffect=function(M,P){return U.H.useLayoutEffect(M,P)},Qe.useMemo=function(M,P){return U.H.useMemo(M,P)},Qe.useOptimistic=function(M,P){return U.H.useOptimistic(M,P)},Qe.useReducer=function(M,P,W){return U.H.useReducer(M,P,W)},Qe.useRef=function(M){return U.H.useRef(M)},Qe.useState=function(M){return U.H.useState(M)},Qe.useSyncExternalStore=function(M,P,W){return U.H.useSyncExternalStore(M,P,W)},Qe.useTransition=function(){return U.H.useTransition()},Qe.version="19.2.0",Qe}var w1;function R0(){return w1||(w1=1,Hm.exports=xk()),Hm.exports}var T=R0();const oe=O0(T);var Um={exports:{}},dc={},$m={exports:{}},qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function vk(){return S1||(S1=1,function(n){function e(z,D){var $=z.length;z.push(D);e:for(;0<$;){var B=$-1>>>1,te=z[B];if(0<s(te,D))z[B]=D,z[$]=te,$=B;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var D=z[0],$=z.pop();if($!==D){z[0]=$;e:for(var B=0,te=z.length,M=te>>>1;B<M;){var P=2*(B+1)-1,W=z[P],se=P+1,le=z[se];if(0>s(W,$))se<te&&0>s(le,W)?(z[B]=le,z[se]=$,B=se):(z[B]=W,z[P]=$,B=P);else if(se<te&&0>s(le,$))z[B]=le,z[se]=$,B=se;else break e}}return D}function s(z,D){var $=z.sortIndex-D.sortIndex;return $!==0?$:z.id-D.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,b=3,x=!1,w=!1,S=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(z){for(var D=t(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=z)r(h),D.sortIndex=D.expirationTime,e(d,D);else break;D=t(h)}}function j(z){if(S=!1,k(z),!w)if(t(d)!==null)w=!0,H||(H=!0,he());else{var D=t(h);D!==null&&de(j,D.startTime-z)}}var H=!1,U=-1,J=5,ie=-1;function ge(){return C?!0:!(n.unstable_now()-ie<J)}function be(){if(C=!1,H){var z=n.unstable_now();ie=z;var D=!0;try{e:{w=!1,S&&(S=!1,L(U),U=-1),x=!0;var $=b;try{t:{for(k(z),m=t(d);m!==null&&!(m.expirationTime>z&&ge());){var B=m.callback;if(typeof B=="function"){m.callback=null,b=m.priorityLevel;var te=B(m.expirationTime<=z);if(z=n.unstable_now(),typeof te=="function"){m.callback=te,k(z),D=!0;break t}m===t(d)&&r(d),k(z)}else r(d);m=t(d)}if(m!==null)D=!0;else{var M=t(h);M!==null&&de(j,M.startTime-z),D=!1}}break e}finally{m=null,b=$,x=!1}D=void 0}}finally{D?he():H=!1}}}var he;if(typeof R=="function")he=function(){R(be)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ve=ce.port2;ce.port1.onmessage=be,he=function(){ve.postMessage(null)}}else he=function(){N(be,0)};function de(z,D){U=N(function(){z(n.unstable_now())},D)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(z){switch(b){case 1:case 2:case 3:var D=3;break;default:D=b}var $=b;b=D;try{return z()}finally{b=$}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=b;b=z;try{return D()}finally{b=$}},n.unstable_scheduleCallback=function(z,D,$){var B=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?B+$:B):$=B,z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=$+te,z={id:p++,callback:D,priorityLevel:z,startTime:$,expirationTime:te,sortIndex:-1},$>B?(z.sortIndex=$,e(h,z),t(d)===null&&z===t(h)&&(S?(L(U),U=-1):S=!0,de(j,$-B))):(z.sortIndex=te,e(d,z),w||x||(w=!0,H||(H=!0,he()))),z},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(z){var D=b;return function(){var $=b;b=D;try{return z.apply(this,arguments)}finally{b=$}}}}(qm)),qm}var E1;function wk(){return E1||(E1=1,$m.exports=vk()),$m.exports}var Pm={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1;function Sk(){if(C1)return Fn;C1=1;var n=R0();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,p)},Fn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},Fn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},Fn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Fn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:x}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:b,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},Fn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},Fn.requestFormReset=function(d){r.d.r(d)},Fn.unstable_batchedUpdates=function(d,h){return d(h)},Fn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},Fn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fn.version="19.2.0",Fn}var T1;function yE(){if(T1)return Pm.exports;T1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pm.exports=Sk(),Pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function Ek(){if(N1)return dc;N1=1;var n=wk(),e=R0(),t=yE();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return d(g),i;if(y===f)return d(g),a;y=y.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=y;else{for(var E=!1,A=g.child;A;){if(A===c){E=!0,c=g,f=y;break}if(A===f){E=!0,f=g,c=y;break}A=A.sibling}if(!E){for(A=y.child;A;){if(A===c){E=!0,c=y,f=g;break}if(A===f){E=!0,f=y,c=g;break}A=A.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=be&&i[be]||i["@@iterator"],typeof i=="function"?i:null)}var ce=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ce?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case N:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case H:return"SuspenseList";case ie:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case R:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case k:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return a=i.displayName||null,a!==null?a:ve(i.type)||"Memo";case J:a=i._payload,i=i._init;try{return ve(i(a))}catch{}}return null}var de=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},B=[],te=-1;function M(i){return{current:i}}function P(i){0>te||(i.current=B[te],B[te]=null,te--)}function W(i,a){te++,B[te]=i.current,i.current=a}var se=M(null),le=M(null),Z=M(null),Se=M(null);function ke(i,a){switch(W(Z,a),W(le,i),W(se,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?$v(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=$v(a),i=qv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}P(se),W(se,i)}function fe(){P(se),P(le),P(Z)}function nt(i){i.memoizedState!==null&&W(Se,i);var a=se.current,c=qv(a,i.type);a!==c&&(W(le,i),W(se,c))}function kt(i){le.current===i&&(P(se),P(le)),Se.current===i&&(P(Se),oc._currentValue=$)}var Vt,qn;function _t(i){if(Vt===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Vt=a&&a[1]||"",qn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vt+i+qn}var Sn=!1;function Mt(i,a){if(!i||Sn)return"";Sn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var G=X}Reflect.construct(i,[],re)}else{try{re.call()}catch(X){G=X}i.call(re.prototype)}}else{try{throw Error()}catch(X){G=X}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),E=y[0],A=y[1];if(E&&A){var _=E.split(`
`),F=A.split(`
`);for(g=f=0;f<_.length&&!_[f].includes("DetermineComponentFrameRoot");)f++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(f===_.length||g===F.length)for(f=_.length-1,g=F.length-1;1<=f&&0<=g&&_[f]!==F[g];)g--;for(;1<=f&&0<=g;f--,g--)if(_[f]!==F[g]){if(f!==1||g!==1)do if(f--,g--,0>g||_[f]!==F[g]){var ee=`
`+_[f].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=f&&0<=g);break}}}finally{Sn=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?_t(c):""}function rn(i,a){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return i.child!==a&&a!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return Mt(i.type,!1);case 11:return Mt(i.type.render,!1);case 1:return Mt(i.type,!0);case 31:return _t("Activity");default:return""}}function En(i){try{var a="",c=null;do a+=rn(i,c),c=i,i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var K=Object.prototype.hasOwnProperty,Ee=n.unstable_scheduleCallback,We=n.unstable_cancelCallback,Be=n.unstable_shouldYield,ot=n.unstable_requestPaint,Ze=n.unstable_now,vn=n.unstable_getCurrentPriorityLevel,jt=n.unstable_ImmediatePriority,ye=n.unstable_UserBlockingPriority,Ne=n.unstable_NormalPriority,Ke=n.unstable_LowPriority,Ye=n.unstable_IdlePriority,It=n.log,Xt=n.unstable_setDisableYieldValue,gr=null,Y=null;function Te(i){if(typeof It=="function"&&Xt(i),Y&&typeof Y.setStrictMode=="function")try{Y.setStrictMode(gr,i)}catch{}}var Me=Math.clz32?Math.clz32:vt,ft=Math.log,Xe=Math.LN2;function vt(i){return i>>>=0,i===0?32:31-(ft(i)/Xe|0)|0}var Jt=256,Yn=262144,yr=4194304;function Ht(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function O(i,a,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var A=f&134217727;return A!==0?(f=A&~y,f!==0?g=Ht(f):(E&=A,E!==0?g=Ht(E):c||(c=A&~i,c!==0&&(g=Ht(c))))):(A=f&~y,A!==0?g=Ht(A):E!==0?g=Ht(E):c||(c=f&~i,c!==0&&(g=Ht(c)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:g}function Q(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ue(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function De(){var i=yr;return yr<<=1,(yr&62914560)===0&&(yr=4194304),i}function pt(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Fe(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ce(i,a,c,f,g,y){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,_=i.expirationTimes,F=i.hiddenUpdates;for(c=E&~c;0<c;){var ee=31-Me(c),re=1<<ee;A[ee]=0,_[ee]=-1;var G=F[ee];if(G!==null)for(F[ee]=null,ee=0;ee<G.length;ee++){var X=G[ee];X!==null&&(X.lane&=-536870913)}c&=~re}f!==0&&Ae(i,f,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~a))}function Ae(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-Me(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function _e(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Me(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}function mt(i,a){var c=a&-a;return c=(c&42)!==0?1:Ot(c),(c&(i.suspendedLanes|a))!==0?0:c}function Ot(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Dn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ao(){var i=D.p;return i!==0?i:(i=window.event,i===void 0?32:d1(i.type))}function sa(i,a){var c=D.p;try{return D.p=i,a()}finally{D.p=c}}var ai=Math.random().toString(36).slice(2),sn="__reactFiber$"+ai,Pn="__reactProps$"+ai,cs="__reactContainer$"+ai,yl="__reactEvents$"+ai,pu="__reactListeners$"+ai,oa="__reactHandles$"+ai,mu="__reactResources$"+ai,lo="__reactMarker$"+ai;function bl(i){delete i[sn],delete i[Pn],delete i[yl],delete i[pu],delete i[oa]}function Xn(i){var a=i[sn];if(a)return a;for(var c=i.parentNode;c;){if(a=c[cs]||c[sn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Qv(i);i!==null;){if(c=i[sn])return c;i=Qv(i)}return a}i=c,c=i.parentNode}return null}function Mi(i){if(i=i[sn]||i[cs]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function us(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ds(i){var a=i[mu];return a||(a=i[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function fn(i){i[lo]=!0}var gu=new Set,co={};function Oi(i,a){pe(i,a),pe(i+"Capture",a)}function pe(i,a){for(co[i]=a,i=0;i<a.length;i++)gu.add(a[i])}var Ie=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},wt={};function on(i){return K.call(wt,i)?!0:K.call(st,i)?!1:Ie.test(i)?wt[i]=!0:(st[i]=!0,!1)}function Vn(i,a,c){if(on(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function br(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function nr(i,a,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+f)}}function Lt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xr(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function yu(i,a,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,y=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function aa(i){if(!i._valueTracker){var a=xr(i)?"checked":"value";i._valueTracker=yu(i,a,""+i[a])}}function xl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=xr(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function la(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var zh=/[\n"\\]/g;function rr(i){return i.replace(zh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vl(i,a,c,f,g,y,E,A){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Lt(a)):i.value!==""+Lt(a)&&(i.value=""+Lt(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?ca(i,E,Lt(a)):c!=null?ca(i,E,Lt(c)):f!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+Lt(A):i.removeAttribute("name")}function uo(i,a,c,f,g,y,E,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){aa(i);return}c=c!=null?""+Lt(c):"",a=a!=null?""+Lt(a):c,A||a===i.value||(i.value=a),i.defaultValue=a}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=A?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),aa(i)}function ca(i,a,c){a==="number"&&la(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function _n(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Lt(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function bu(i,a,c){if(a!=null&&(a=""+Lt(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+Lt(c):""}function ua(i,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(de(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=Lt(a),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),aa(i)}function Ge(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hn(i,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,c):typeof c!="number"||c===0||xu.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function St(i,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in a)f=a[g],a.hasOwnProperty(g)&&c[g]!==f&&hn(i,g,f)}else for(var y in a)a.hasOwnProperty(y)&&hn(i,y,a[y])}function fs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ri=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hs(i){return wl.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function xe(){}var je=null;function Je(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ct=null,Qt=null;function Dr(i){var a=Mi(i);if(a&&(i=a.stateNode)){var c=i[Pn]||null;e:switch(i=a.stateNode,a.type){case"input":if(vl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=f[Pn]||null;if(!g)throw Error(r(90));vl(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===i.form&&xl(f)}break e;case"textarea":bu(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&_n(i,!!c.multiple,a,!1)}}}var Sl=!1;function vu(i,a,c){if(Sl)return i(a,c);Sl=!0;try{var f=i(a);return f}finally{if(Sl=!1,(ct!==null||Qt!==null)&&(ad(),ct&&(a=ct,i=Qt,Qt=ct=null,Dr(a),i)))for(a=0;a<i.length;a++)Dr(i[a])}}function El(i,a){var c=i.stateNode;if(c===null)return null;var f=c[Pn]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ih=!1;if(Di)try{var Cl={};Object.defineProperty(Cl,"passive",{get:function(){Ih=!0}}),window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{Ih=!1}var ps=null,Hh=null,wu=null;function qy(){if(wu)return wu;var i,a=Hh,c=a.length,f,g="value"in ps?ps.value:ps.textContent,y=g.length;for(i=0;i<c&&a[i]===g[i];i++);var E=c-i;for(f=1;f<=E&&a[c-f]===g[y-f];f++);return wu=g.slice(i,1<f?1-f:void 0)}function Su(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Eu(){return!0}function Py(){return!1}function ir(i){function a(c,f,g,y,E){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Eu:Py,this.isPropagationStopped=Py,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),a}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=ir(fo),Tl=m({},fo,{view:0,detail:0}),mN=ir(Tl),Uh,$h,Nl,Tu=m({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Nl&&(Nl&&i.type==="mousemove"?(Uh=i.screenX-Nl.screenX,$h=i.screenY-Nl.screenY):$h=Uh=0,Nl=i),Uh)},movementY:function(i){return"movementY"in i?i.movementY:$h}}),Vy=ir(Tu),gN=m({},Tu,{dataTransfer:0}),yN=ir(gN),bN=m({},Tl,{relatedTarget:0}),qh=ir(bN),xN=m({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),vN=ir(xN),wN=m({},fo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),SN=ir(wN),EN=m({},fo,{data:0}),Fy=ir(EN),CN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AN(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=NN[i])?!!a[i]:!1}function Ph(){return AN}var kN=m({},Tl,{key:function(i){if(i.key){var a=CN[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Su(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?TN[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(i){return i.type==="keypress"?Su(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Su(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),MN=ir(kN),ON=m({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=ir(ON),RN=m({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),DN=ir(RN),_N=m({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),jN=ir(_N),LN=m({},Tu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),BN=ir(LN),zN=m({},fo,{newState:0,oldState:0}),IN=ir(zN),HN=[9,13,27,32],Vh=Di&&"CompositionEvent"in window,Al=null;Di&&"documentMode"in document&&(Al=document.documentMode);var UN=Di&&"TextEvent"in window&&!Al,Ky=Di&&(!Vh||Al&&8<Al&&11>=Al),Wy=" ",Qy=!1;function Yy(i,a){switch(i){case"keyup":return HN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var da=!1;function $N(i,a){switch(i){case"compositionend":return Xy(a);case"keypress":return a.which!==32?null:(Qy=!0,Wy);case"textInput":return i=a.data,i===Wy&&Qy?null:i;default:return null}}function qN(i,a){if(da)return i==="compositionend"||!Vh&&Yy(i,a)?(i=qy(),wu=Hh=ps=null,da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ky&&a.locale!=="ko"?null:a.data;default:return null}}var PN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!PN[i.type]:a==="textarea"}function Zy(i,a,c,f){ct?Qt?Qt.push(f):Qt=[f]:ct=f,a=pd(a,"onChange"),0<a.length&&(c=new Cu("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var kl=null,Ml=null;function VN(i){Lv(i,0)}function Nu(i){var a=us(i);if(xl(a))return i}function eb(i,a){if(i==="change")return a}var tb=!1;if(Di){var Fh;if(Di){var Gh="oninput"in document;if(!Gh){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),Gh=typeof nb.oninput=="function"}Fh=Gh}else Fh=!1;tb=Fh&&(!document.documentMode||9<document.documentMode)}function rb(){kl&&(kl.detachEvent("onpropertychange",ib),Ml=kl=null)}function ib(i){if(i.propertyName==="value"&&Nu(Ml)){var a=[];Zy(a,Ml,i,Je(i)),vu(VN,a)}}function FN(i,a,c){i==="focusin"?(rb(),kl=a,Ml=c,kl.attachEvent("onpropertychange",ib)):i==="focusout"&&rb()}function GN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Nu(Ml)}function KN(i,a){if(i==="click")return Nu(a)}function WN(i,a){if(i==="input"||i==="change")return Nu(a)}function QN(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vr=typeof Object.is=="function"?Object.is:QN;function Ol(i,a){if(vr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!K.call(a,g)||!vr(i[g],a[g]))return!1}return!0}function sb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ob(i,a){var c=sb(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=sb(c)}}function ab(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ab(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function lb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=la(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=la(i.document)}return a}function Kh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var YN=Di&&"documentMode"in document&&11>=document.documentMode,fa=null,Wh=null,Rl=null,Qh=!1;function cb(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qh||fa==null||fa!==la(f)||(f=fa,"selectionStart"in f&&Kh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Rl&&Ol(Rl,f)||(Rl=f,f=pd(Wh,"onSelect"),0<f.length&&(a=new Cu("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=fa)))}function ho(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var ha={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},Yh={},ub={};Di&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function po(i){if(Yh[i])return Yh[i];if(!ha[i])return i;var a=ha[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in ub)return Yh[i]=a[c];return i}var db=po("animationend"),fb=po("animationiteration"),hb=po("animationstart"),XN=po("transitionrun"),JN=po("transitionstart"),ZN=po("transitioncancel"),pb=po("transitionend"),mb=new Map,Xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xh.push("scrollEnd");function Zr(i,a){mb.set(i,a),Oi(a,[i])}var Au=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_r=[],pa=0,Jh=0;function ku(){for(var i=pa,a=Jh=pa=0;a<i;){var c=_r[a];_r[a++]=null;var f=_r[a];_r[a++]=null;var g=_r[a];_r[a++]=null;var y=_r[a];if(_r[a++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}y!==0&&gb(c,g,y)}}function Mu(i,a,c,f){_r[pa++]=i,_r[pa++]=a,_r[pa++]=c,_r[pa++]=f,Jh|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Zh(i,a,c,f){return Mu(i,a,c,f),Ou(i)}function mo(i,a){return Mu(i,null,null,a),Ou(i)}function gb(i,a,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,y=i.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&a!==null&&(g=31-Me(c),i=y.hiddenUpdates,f=i[g],f===null?i[g]=[a]:f.push(a),a.lane=c|536870912),y):null}function Ou(i){if(50<Zl)throw Zl=0,lm=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ma={};function eA(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(i,a,c,f){return new eA(i,a,c,f)}function ep(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _i(i,a){var c=i.alternate;return c===null?(c=wr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function yb(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Ru(i,a,c,f,g,y){var E=0;if(f=i,typeof i=="function")ep(i)&&(E=1);else if(typeof i=="string")E=sk(i,c,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ie:return i=wr(31,c,a,g),i.elementType=ie,i.lanes=y,i;case S:return go(c.children,g,y,a);case C:E=8,g|=24;break;case N:return i=wr(12,c,a,g|2),i.elementType=N,i.lanes=y,i;case j:return i=wr(13,c,a,g),i.elementType=j,i.lanes=y,i;case H:return i=wr(19,c,a,g),i.elementType=H,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:E=10;break e;case L:E=9;break e;case k:E=11;break e;case U:E=14;break e;case J:E=16,f=null;break e}E=29,c=Error(r(130,i===null?"null":typeof i,"")),f=null}return a=wr(E,c,a,g),a.elementType=i,a.type=f,a.lanes=y,a}function go(i,a,c,f){return i=wr(7,i,f,a),i.lanes=c,i}function tp(i,a,c){return i=wr(6,i,null,a),i.lanes=c,i}function bb(i){var a=wr(18,null,null,0);return a.stateNode=i,a}function np(i,a,c){return a=wr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var xb=new WeakMap;function jr(i,a){if(typeof i=="object"&&i!==null){var c=xb.get(i);return c!==void 0?c:(a={value:i,source:a,stack:En(a)},xb.set(i,a),a)}return{value:i,source:a,stack:En(a)}}var ga=[],ya=0,Du=null,Dl=0,Lr=[],Br=0,ms=null,li=1,ci="";function ji(i,a){ga[ya++]=Dl,ga[ya++]=Du,Du=i,Dl=a}function vb(i,a,c){Lr[Br++]=li,Lr[Br++]=ci,Lr[Br++]=ms,ms=i;var f=li;i=ci;var g=32-Me(f)-1;f&=~(1<<g),c+=1;var y=32-Me(a)+g;if(30<y){var E=g-g%5;y=(f&(1<<E)-1).toString(32),f>>=E,g-=E,li=1<<32-Me(a)+g|c<<g|f,ci=y+i}else li=1<<y|c<<g|f,ci=i}function rp(i){i.return!==null&&(ji(i,1),vb(i,1,0))}function ip(i){for(;i===Du;)Du=ga[--ya],ga[ya]=null,Dl=ga[--ya],ga[ya]=null;for(;i===ms;)ms=Lr[--Br],Lr[Br]=null,ci=Lr[--Br],Lr[Br]=null,li=Lr[--Br],Lr[Br]=null}function wb(i,a){Lr[Br++]=li,Lr[Br++]=ci,Lr[Br++]=ms,li=a.id,ci=a.overflow,ms=i}var jn=null,Ut=null,ht=!1,gs=null,zr=!1,sp=Error(r(519));function ys(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(jr(a,i)),sp}function Sb(i){var a=i.stateNode,c=i.type,f=i.memoizedProps;switch(a[sn]=i,a[Pn]=f,c){case"dialog":lt("cancel",a),lt("close",a);break;case"iframe":case"object":case"embed":lt("load",a);break;case"video":case"audio":for(c=0;c<tc.length;c++)lt(tc[c],a);break;case"source":lt("error",a);break;case"img":case"image":case"link":lt("error",a),lt("load",a);break;case"details":lt("toggle",a);break;case"input":lt("invalid",a),uo(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":lt("invalid",a);break;case"textarea":lt("invalid",a),ua(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||Hv(a.textContent,c)?(f.popover!=null&&(lt("beforetoggle",a),lt("toggle",a)),f.onScroll!=null&&lt("scroll",a),f.onScrollEnd!=null&&lt("scrollend",a),f.onClick!=null&&(a.onclick=xe),a=!0):a=!1,a||ys(i,!0)}function Eb(i){for(jn=i.return;jn;)switch(jn.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:jn=jn.return}}function ba(i){if(i!==jn)return!1;if(!ht)return Eb(i),ht=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Em(i.type,i.memoizedProps)),c=!c),c&&Ut&&ys(i),Eb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ut=Wv(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Ut=Wv(i)}else a===27?(a=Ut,Rs(i.type)?(i=km,km=null,Ut=i):Ut=a):Ut=jn?Hr(i.stateNode.nextSibling):null;return!0}function yo(){Ut=jn=null,ht=!1}function op(){var i=gs;return i!==null&&(lr===null?lr=i:lr.push.apply(lr,i),gs=null),i}function _l(i){gs===null?gs=[i]:gs.push(i)}var ap=M(null),bo=null,Li=null;function bs(i,a,c){W(ap,a._currentValue),a._currentValue=c}function Bi(i){i._currentValue=ap.current,P(ap)}function lp(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function cp(i,a,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var _=0;_<a.length;_++)if(A.context===a[_]){y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),lp(y.return,c,i),f||(E=null);break e}y=A.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),lp(E,c,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function xa(i,a,c,f){i=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=g.type;vr(g.pendingProps.value,E.value)||(i!==null?i.push(A):i=[A])}}else if(g===Se.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(oc):i=[oc])}g=g.return}i!==null&&cp(a,i,c,f),a.flags|=262144}function _u(i){for(i=i.firstContext;i!==null;){if(!vr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xo(i){bo=i,Li=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ln(i){return Cb(bo,i)}function ju(i,a){return bo===null&&xo(i),Cb(i,a)}function Cb(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Li===null){if(i===null)throw Error(r(308));Li=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Li=Li.next=a;return c}var tA=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},nA=n.unstable_scheduleCallback,rA=n.unstable_NormalPriority,pn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function up(){return{controller:new tA,data:new Map,refCount:0}}function jl(i){i.refCount--,i.refCount===0&&nA(rA,function(){i.controller.abort()})}var Ll=null,dp=0,va=0,wa=null;function iA(i,a){if(Ll===null){var c=Ll=[];dp=0,va=pm(),wa={status:"pending",value:void 0,then:function(f){c.push(f)}}}return dp++,a.then(Tb,Tb),a}function Tb(){if(--dp===0&&Ll!==null){wa!==null&&(wa.status="fulfilled");var i=Ll;Ll=null,va=0,wa=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function sA(i,a){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var Nb=z.S;z.S=function(i,a){cv=Ze(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&iA(i,a),Nb!==null&&Nb(i,a)};var vo=M(null);function fp(){var i=vo.current;return i!==null?i:Rt.pooledCache}function Lu(i,a){a===null?W(vo,vo.current):W(vo,a.pool)}function Ab(){var i=fp();return i===null?null:{parent:pn._currentValue,pool:i}}var Sa=Error(r(460)),hp=Error(r(474)),Bu=Error(r(542)),zu={then:function(){}};function kb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Mb(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(xe,xe),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Rb(i),i;default:if(typeof a.status=="string")a.then(xe,xe);else{if(i=Rt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=f}},function(f){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Rb(i),i}throw So=a,Sa}}function wo(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(So=c,Sa):c}}var So=null;function Ob(){if(So===null)throw Error(r(459));var i=So;return So=null,i}function Rb(i){if(i===Sa||i===Bu)throw Error(r(483))}var Ea=null,Bl=0;function Iu(i){var a=Bl;return Bl+=1,Ea===null&&(Ea=[]),Mb(Ea,i,a)}function zl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Hu(i,a){throw a.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Db(i){function a(q,I){if(i){var V=q.deletions;V===null?(q.deletions=[I],q.flags|=16):V.push(I)}}function c(q,I){if(!i)return null;for(;I!==null;)a(q,I),I=I.sibling;return null}function f(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function g(q,I){return q=_i(q,I),q.index=0,q.sibling=null,q}function y(q,I,V){return q.index=V,i?(V=q.alternate,V!==null?(V=V.index,V<I?(q.flags|=67108866,I):V):(q.flags|=67108866,I)):(q.flags|=1048576,I)}function E(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function A(q,I,V,ne){return I===null||I.tag!==6?(I=tp(V,q.mode,ne),I.return=q,I):(I=g(I,V),I.return=q,I)}function _(q,I,V,ne){var He=V.type;return He===S?ee(q,I,V.props.children,ne,V.key):I!==null&&(I.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===J&&wo(He)===I.type)?(I=g(I,V.props),zl(I,V),I.return=q,I):(I=Ru(V.type,V.key,V.props,null,q.mode,ne),zl(I,V),I.return=q,I)}function F(q,I,V,ne){return I===null||I.tag!==4||I.stateNode.containerInfo!==V.containerInfo||I.stateNode.implementation!==V.implementation?(I=np(V,q.mode,ne),I.return=q,I):(I=g(I,V.children||[]),I.return=q,I)}function ee(q,I,V,ne,He){return I===null||I.tag!==7?(I=go(V,q.mode,ne,He),I.return=q,I):(I=g(I,V),I.return=q,I)}function re(q,I,V){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=tp(""+I,q.mode,V),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case x:return V=Ru(I.type,I.key,I.props,null,q.mode,V),zl(V,I),V.return=q,V;case w:return I=np(I,q.mode,V),I.return=q,I;case J:return I=wo(I),re(q,I,V)}if(de(I)||he(I))return I=go(I,q.mode,V,null),I.return=q,I;if(typeof I.then=="function")return re(q,Iu(I),V);if(I.$$typeof===R)return re(q,ju(q,I),V);Hu(q,I)}return null}function G(q,I,V,ne){var He=I!==null?I.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return He!==null?null:A(q,I,""+V,ne);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return V.key===He?_(q,I,V,ne):null;case w:return V.key===He?F(q,I,V,ne):null;case J:return V=wo(V),G(q,I,V,ne)}if(de(V)||he(V))return He!==null?null:ee(q,I,V,ne,null);if(typeof V.then=="function")return G(q,I,Iu(V),ne);if(V.$$typeof===R)return G(q,I,ju(q,V),ne);Hu(q,V)}return null}function X(q,I,V,ne,He){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(V)||null,A(I,q,""+ne,He);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:return q=q.get(ne.key===null?V:ne.key)||null,_(I,q,ne,He);case w:return q=q.get(ne.key===null?V:ne.key)||null,F(I,q,ne,He);case J:return ne=wo(ne),X(q,I,V,ne,He)}if(de(ne)||he(ne))return q=q.get(V)||null,ee(I,q,ne,He,null);if(typeof ne.then=="function")return X(q,I,V,Iu(ne),He);if(ne.$$typeof===R)return X(q,I,V,ju(I,ne),He);Hu(I,ne)}return null}function Oe(q,I,V,ne){for(var He=null,gt=null,Le=I,tt=I=0,dt=null;Le!==null&&tt<V.length;tt++){Le.index>tt?(dt=Le,Le=null):dt=Le.sibling;var yt=G(q,Le,V[tt],ne);if(yt===null){Le===null&&(Le=dt);break}i&&Le&&yt.alternate===null&&a(q,Le),I=y(yt,I,tt),gt===null?He=yt:gt.sibling=yt,gt=yt,Le=dt}if(tt===V.length)return c(q,Le),ht&&ji(q,tt),He;if(Le===null){for(;tt<V.length;tt++)Le=re(q,V[tt],ne),Le!==null&&(I=y(Le,I,tt),gt===null?He=Le:gt.sibling=Le,gt=Le);return ht&&ji(q,tt),He}for(Le=f(Le);tt<V.length;tt++)dt=X(Le,q,tt,V[tt],ne),dt!==null&&(i&&dt.alternate!==null&&Le.delete(dt.key===null?tt:dt.key),I=y(dt,I,tt),gt===null?He=dt:gt.sibling=dt,gt=dt);return i&&Le.forEach(function(Bs){return a(q,Bs)}),ht&&ji(q,tt),He}function qe(q,I,V,ne){if(V==null)throw Error(r(151));for(var He=null,gt=null,Le=I,tt=I=0,dt=null,yt=V.next();Le!==null&&!yt.done;tt++,yt=V.next()){Le.index>tt?(dt=Le,Le=null):dt=Le.sibling;var Bs=G(q,Le,yt.value,ne);if(Bs===null){Le===null&&(Le=dt);break}i&&Le&&Bs.alternate===null&&a(q,Le),I=y(Bs,I,tt),gt===null?He=Bs:gt.sibling=Bs,gt=Bs,Le=dt}if(yt.done)return c(q,Le),ht&&ji(q,tt),He;if(Le===null){for(;!yt.done;tt++,yt=V.next())yt=re(q,yt.value,ne),yt!==null&&(I=y(yt,I,tt),gt===null?He=yt:gt.sibling=yt,gt=yt);return ht&&ji(q,tt),He}for(Le=f(Le);!yt.done;tt++,yt=V.next())yt=X(Le,q,tt,yt.value,ne),yt!==null&&(i&&yt.alternate!==null&&Le.delete(yt.key===null?tt:yt.key),I=y(yt,I,tt),gt===null?He=yt:gt.sibling=yt,gt=yt);return i&&Le.forEach(function(gk){return a(q,gk)}),ht&&ji(q,tt),He}function At(q,I,V,ne){if(typeof V=="object"&&V!==null&&V.type===S&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case x:e:{for(var He=V.key;I!==null;){if(I.key===He){if(He=V.type,He===S){if(I.tag===7){c(q,I.sibling),ne=g(I,V.props.children),ne.return=q,q=ne;break e}}else if(I.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===J&&wo(He)===I.type){c(q,I.sibling),ne=g(I,V.props),zl(ne,V),ne.return=q,q=ne;break e}c(q,I);break}else a(q,I);I=I.sibling}V.type===S?(ne=go(V.props.children,q.mode,ne,V.key),ne.return=q,q=ne):(ne=Ru(V.type,V.key,V.props,null,q.mode,ne),zl(ne,V),ne.return=q,q=ne)}return E(q);case w:e:{for(He=V.key;I!==null;){if(I.key===He)if(I.tag===4&&I.stateNode.containerInfo===V.containerInfo&&I.stateNode.implementation===V.implementation){c(q,I.sibling),ne=g(I,V.children||[]),ne.return=q,q=ne;break e}else{c(q,I);break}else a(q,I);I=I.sibling}ne=np(V,q.mode,ne),ne.return=q,q=ne}return E(q);case J:return V=wo(V),At(q,I,V,ne)}if(de(V))return Oe(q,I,V,ne);if(he(V)){if(He=he(V),typeof He!="function")throw Error(r(150));return V=He.call(V),qe(q,I,V,ne)}if(typeof V.then=="function")return At(q,I,Iu(V),ne);if(V.$$typeof===R)return At(q,I,ju(q,V),ne);Hu(q,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,I!==null&&I.tag===6?(c(q,I.sibling),ne=g(I,V),ne.return=q,q=ne):(c(q,I),ne=tp(V,q.mode,ne),ne.return=q,q=ne),E(q)):c(q,I)}return function(q,I,V,ne){try{Bl=0;var He=At(q,I,V,ne);return Ea=null,He}catch(Le){if(Le===Sa||Le===Bu)throw Le;var gt=wr(29,Le,null,q.mode);return gt.lanes=ne,gt.return=q,gt}finally{}}}var Eo=Db(!0),_b=Db(!1),xs=!1;function pp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function vs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ws(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(bt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,a=Ou(i),gb(i,null,c),a}return Mu(i,f,a,c),Ou(i)}function Il(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,_e(i,c)}}function gp(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var yp=!1;function Hl(){if(yp){var i=wa;if(i!==null)throw i}}function Ul(i,a,c,f){yp=!1;var g=i.updateQueue;xs=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var _=A,F=_.next;_.next=null,E===null?y=F:E.next=F,E=_;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==E&&(A===null?ee.firstBaseUpdate=F:A.next=F,ee.lastBaseUpdate=_))}if(y!==null){var re=g.baseState;E=0,ee=F=_=null,A=y;do{var G=A.lane&-536870913,X=G!==A.lane;if(X?(ut&G)===G:(f&G)===G){G!==0&&G===va&&(yp=!0),ee!==null&&(ee=ee.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Oe=i,qe=A;G=a;var At=c;switch(qe.tag){case 1:if(Oe=qe.payload,typeof Oe=="function"){re=Oe.call(At,re,G);break e}re=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=qe.payload,G=typeof Oe=="function"?Oe.call(At,re,G):Oe,G==null)break e;re=m({},re,G);break e;case 2:xs=!0}}G=A.callback,G!==null&&(i.flags|=64,X&&(i.flags|=8192),X=g.callbacks,X===null?g.callbacks=[G]:X.push(G))}else X={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(F=ee=X,_=re):ee=ee.next=X,E|=G;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;X=A,A=X.next,X.next=null,g.lastBaseUpdate=X,g.shared.pending=null}}while(!0);ee===null&&(_=re),g.baseState=_,g.firstBaseUpdate=F,g.lastBaseUpdate=ee,y===null&&(g.shared.lanes=0),Ns|=E,i.lanes=E,i.memoizedState=re}}function jb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Lb(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)jb(c[i],a)}var Ca=M(null),Uu=M(0);function Bb(i,a){i=Fi,W(Uu,i),W(Ca,a),Fi=i|a.baseLanes}function bp(){W(Uu,Fi),W(Ca,Ca.current)}function xp(){Fi=Uu.current,P(Ca),P(Uu)}var Sr=M(null),Ir=null;function Ss(i){var a=i.alternate;W(an,an.current&1),W(Sr,i),Ir===null&&(a===null||Ca.current!==null||a.memoizedState!==null)&&(Ir=i)}function vp(i){W(an,an.current),W(Sr,i),Ir===null&&(Ir=i)}function zb(i){i.tag===22?(W(an,an.current),W(Sr,i),Ir===null&&(Ir=i)):Es()}function Es(){W(an,an.current),W(Sr,Sr.current)}function Er(i){P(Sr),Ir===i&&(Ir=null),P(an)}var an=M(0);function $u(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Nm(c)||Am(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var zi=0,et=null,Tt=null,mn=null,qu=!1,Ta=!1,Co=!1,Pu=0,$l=0,Na=null,oA=0;function Zt(){throw Error(r(321))}function wp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!vr(i[c],a[c]))return!1;return!0}function Sp(i,a,c,f,g,y){return zi=y,et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=i===null||i.memoizedState===null?vx:zp,Co=!1,y=c(f,g),Co=!1,Ta&&(y=Hb(a,c,f,g)),Ib(i),y}function Ib(i){z.H=Vl;var a=Tt!==null&&Tt.next!==null;if(zi=0,mn=Tt=et=null,qu=!1,$l=0,Na=null,a)throw Error(r(300));i===null||gn||(i=i.dependencies,i!==null&&_u(i)&&(gn=!0))}function Hb(i,a,c,f){et=i;var g=0;do{if(Ta&&(Na=null),$l=0,Ta=!1,25<=g)throw Error(r(301));if(g+=1,mn=Tt=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}z.H=wx,y=a(c,f)}while(Ta);return y}function aA(){var i=z.H,a=i.useState()[0];return a=typeof a.then=="function"?ql(a):a,i=i.useState()[0],(Tt!==null?Tt.memoizedState:null)!==i&&(et.flags|=1024),a}function Ep(){var i=Pu!==0;return Pu=0,i}function Cp(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Tp(i){if(qu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}qu=!1}zi=0,mn=Tt=et=null,Ta=!1,$l=Pu=0,Na=null}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?et.memoizedState=mn=i:mn=mn.next=i,mn}function ln(){if(Tt===null){var i=et.alternate;i=i!==null?i.memoizedState:null}else i=Tt.next;var a=mn===null?et.memoizedState:mn.next;if(a!==null)mn=a,Tt=i;else{if(i===null)throw et.alternate===null?Error(r(467)):Error(r(310));Tt=i,i={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},mn===null?et.memoizedState=mn=i:mn=mn.next=i}return mn}function Vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(i){var a=$l;return $l+=1,Na===null&&(Na=[]),i=Mb(Na,i,a),a=et,(mn===null?a.memoizedState:mn.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?vx:zp),i}function Fu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ql(i);if(i.$$typeof===R)return Ln(i)}throw Error(r(438,String(i)))}function Np(i){var a=null,c=et.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=et.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Vu(),et.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),f=0;f<i;f++)c[f]=ge;return a.index++,c}function Ii(i,a){return typeof a=="function"?a(i):a}function Gu(i){var a=ln();return Ap(a,Tt,i)}function Ap(i,a,c){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=i.baseQueue,y=f.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}a.baseQueue=g=y,f.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{a=g.next;var A=E=null,_=null,F=a,ee=!1;do{var re=F.lane&-536870913;if(re!==F.lane?(ut&re)===re:(zi&re)===re){var G=F.revertLane;if(G===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),re===va&&(ee=!0);else if((zi&G)===G){F=F.next,G===va&&(ee=!0);continue}else re={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},_===null?(A=_=re,E=y):_=_.next=re,et.lanes|=G,Ns|=G;re=F.action,Co&&c(y,re),y=F.hasEagerState?F.eagerState:c(y,re)}else G={lane:re,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},_===null?(A=_=G,E=y):_=_.next=G,et.lanes|=re,Ns|=re;F=F.next}while(F!==null&&F!==a);if(_===null?E=y:_.next=A,!vr(y,i.memoizedState)&&(gn=!0,ee&&(c=wa,c!==null)))throw c;i.memoizedState=y,i.baseState=E,i.baseQueue=_,f.lastRenderedState=y}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function kp(i){var a=ln(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do y=i(y,E.action),E=E.next;while(E!==g);vr(y,a.memoizedState)||(gn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,f]}function Ub(i,a,c){var f=et,g=ln(),y=ht;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=a();var E=!vr((Tt||g).memoizedState,c);if(E&&(g.memoizedState=c,gn=!0),g=g.queue,Rp(Pb.bind(null,f,g,i),[i]),g.getSnapshot!==a||E||mn!==null&&mn.memoizedState.tag&1){if(f.flags|=2048,Aa(9,{destroy:void 0},qb.bind(null,f,g,c,a),null),Rt===null)throw Error(r(349));y||(zi&127)!==0||$b(f,a,c)}return c}function $b(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=et.updateQueue,a===null?(a=Vu(),et.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function qb(i,a,c,f){a.value=c,a.getSnapshot=f,Vb(a)&&Fb(i)}function Pb(i,a,c){return c(function(){Vb(a)&&Fb(i)})}function Vb(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!vr(i,c)}catch{return!0}}function Fb(i){var a=mo(i,2);a!==null&&cr(a,i,2)}function Mp(i){var a=Jn();if(typeof i=="function"){var c=i;if(i=c(),Co){Te(!0);try{c()}finally{Te(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},a}function Gb(i,a,c,f){return i.baseState=c,Ap(i,Tt,typeof f=="function"?f:Ii)}function lA(i,a,c,f,g){if(Qu(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};z.T!==null?c(!0):y.isTransition=!1,f(y),c=a.pending,c===null?(y.next=a.pending=y,Kb(a,y)):(y.next=c.next,a.pending=c.next=y)}}function Kb(i,a){var c=a.action,f=a.payload,g=i.state;if(a.isTransition){var y=z.T,E={};z.T=E;try{var A=c(g,f),_=z.S;_!==null&&_(E,A),Wb(i,a,A)}catch(F){Op(i,a,F)}finally{y!==null&&E.types!==null&&(y.types=E.types),z.T=y}}else try{y=c(g,f),Wb(i,a,y)}catch(F){Op(i,a,F)}}function Wb(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Qb(i,a,f)},function(f){return Op(i,a,f)}):Qb(i,a,c)}function Qb(i,a,c){a.status="fulfilled",a.value=c,Yb(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,Kb(i,c)))}function Op(i,a,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,Yb(a),a=a.next;while(a!==f)}i.action=null}function Yb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Xb(i,a){return a}function Jb(i,a){if(ht){var c=Rt.formState;if(c!==null){e:{var f=et;if(ht){if(Ut){t:{for(var g=Ut,y=zr;g.nodeType!==8;){if(!y){g=null;break t}if(g=Hr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Ut=Hr(g.nextSibling),f=g.data==="F!";break e}}ys(f)}f=!1}f&&(a=c[0])}}return c=Jn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xb,lastRenderedState:a},c.queue=f,c=yx.bind(null,et,f),f.dispatch=c,f=Mp(!1),y=Bp.bind(null,et,!1,f.queue),f=Jn(),g={state:a,dispatch:null,action:i,pending:null},f.queue=g,c=lA.bind(null,et,g,y,c),g.dispatch=c,f.memoizedState=i,[a,c,!1]}function Zb(i){var a=ln();return ex(a,Tt,i)}function ex(i,a,c){if(a=Ap(i,a,Xb)[0],i=Gu(Ii)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=ql(a)}catch(E){throw E===Sa?Bu:E}else f=a;a=ln();var g=a.queue,y=g.dispatch;return c!==a.memoizedState&&(et.flags|=2048,Aa(9,{destroy:void 0},cA.bind(null,g,c),null)),[f,y,i]}function cA(i,a){i.action=a}function tx(i){var a=ln(),c=Tt;if(c!==null)return ex(a,c,i);ln(),a=a.memoizedState,c=ln();var f=c.queue.dispatch;return c.memoizedState=i,[a,f,!1]}function Aa(i,a,c,f){return i={tag:i,create:c,deps:f,inst:a,next:null},a=et.updateQueue,a===null&&(a=Vu(),et.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i),i}function nx(){return ln().memoizedState}function Ku(i,a,c,f){var g=Jn();et.flags|=i,g.memoizedState=Aa(1|a,{destroy:void 0},c,f===void 0?null:f)}function Wu(i,a,c,f){var g=ln();f=f===void 0?null:f;var y=g.memoizedState.inst;Tt!==null&&f!==null&&wp(f,Tt.memoizedState.deps)?g.memoizedState=Aa(a,y,c,f):(et.flags|=i,g.memoizedState=Aa(1|a,y,c,f))}function rx(i,a){Ku(8390656,8,i,a)}function Rp(i,a){Wu(2048,8,i,a)}function uA(i){et.flags|=4;var a=et.updateQueue;if(a===null)a=Vu(),et.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function ix(i){var a=ln().memoizedState;return uA({ref:a,nextImpl:i}),function(){if((bt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function sx(i,a){return Wu(4,2,i,a)}function ox(i,a){return Wu(4,4,i,a)}function ax(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function lx(i,a,c){c=c!=null?c.concat([i]):null,Wu(4,4,ax.bind(null,a,i),c)}function Dp(){}function cx(i,a){var c=ln();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&wp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function ux(i,a){var c=ln();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&wp(a,f[1]))return f[0];if(f=i(),Co){Te(!0);try{i()}finally{Te(!1)}}return c.memoizedState=[f,a],f}function _p(i,a,c){return c===void 0||(zi&1073741824)!==0&&(ut&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=dv(),et.lanes|=i,Ns|=i,c)}function dx(i,a,c,f){return vr(c,a)?c:Ca.current!==null?(i=_p(i,c,f),vr(i,a)||(gn=!0),i):(zi&42)===0||(zi&1073741824)!==0&&(ut&261930)===0?(gn=!0,i.memoizedState=c):(i=dv(),et.lanes|=i,Ns|=i,a)}function fx(i,a,c,f,g){var y=D.p;D.p=y!==0&&8>y?y:8;var E=z.T,A={};z.T=A,Bp(i,!1,a,c);try{var _=g(),F=z.S;if(F!==null&&F(A,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var ee=sA(_,f);Pl(i,a,ee,Nr(i))}else Pl(i,a,f,Nr(i))}catch(re){Pl(i,a,{then:function(){},status:"rejected",reason:re},Nr())}finally{D.p=y,E!==null&&A.types!==null&&(E.types=A.types),z.T=E}}function dA(){}function jp(i,a,c,f){if(i.tag!==5)throw Error(r(476));var g=hx(i).queue;fx(i,g,a,$,c===null?dA:function(){return px(i),c(f)})}function hx(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:$},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function px(i){var a=hx(i);a.next===null&&(a=i.alternate.memoizedState),Pl(i,a.next.queue,{},Nr())}function Lp(){return Ln(oc)}function mx(){return ln().memoizedState}function gx(){return ln().memoizedState}function fA(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Nr();i=vs(c);var f=ws(a,i,c);f!==null&&(cr(f,a,c),Il(f,a,c)),a={cache:up()},i.payload=a;return}a=a.return}}function hA(i,a,c){var f=Nr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qu(i)?bx(a,c):(c=Zh(i,a,c,f),c!==null&&(cr(c,i,f),xx(c,a,f)))}function yx(i,a,c){var f=Nr();Pl(i,a,c,f)}function Pl(i,a,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Qu(i))bx(a,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,A=y(E,c);if(g.hasEagerState=!0,g.eagerState=A,vr(A,E))return Mu(i,a,g,0),Rt===null&&ku(),!1}catch{}finally{}if(c=Zh(i,a,g,f),c!==null)return cr(c,i,f),xx(c,a,f),!0}return!1}function Bp(i,a,c,f){if(f={lane:2,revertLane:pm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Qu(i)){if(a)throw Error(r(479))}else a=Zh(i,c,f,2),a!==null&&cr(a,i,2)}function Qu(i){var a=i.alternate;return i===et||a!==null&&a===et}function bx(i,a){Ta=qu=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function xx(i,a,c){if((c&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,_e(i,c)}}var Vl={readContext:Ln,use:Fu,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};Vl.useEffectEvent=Zt;var vx={readContext:Ln,use:Fu,useCallback:function(i,a){return Jn().memoizedState=[i,a===void 0?null:a],i},useContext:Ln,useEffect:rx,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,Ku(4194308,4,ax.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Ku(4194308,4,i,a)},useInsertionEffect:function(i,a){Ku(4,2,i,a)},useMemo:function(i,a){var c=Jn();a=a===void 0?null:a;var f=i();if(Co){Te(!0);try{i()}finally{Te(!1)}}return c.memoizedState=[f,a],f},useReducer:function(i,a,c){var f=Jn();if(c!==void 0){var g=c(a);if(Co){Te(!0);try{c(a)}finally{Te(!1)}}}else g=a;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=hA.bind(null,et,i),[f.memoizedState,i]},useRef:function(i){var a=Jn();return i={current:i},a.memoizedState=i},useState:function(i){i=Mp(i);var a=i.queue,c=yx.bind(null,et,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:Dp,useDeferredValue:function(i,a){var c=Jn();return _p(c,i,a)},useTransition:function(){var i=Mp(!1);return i=fx.bind(null,et,i.queue,!0,!1),Jn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var f=et,g=Jn();if(ht){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Rt===null)throw Error(r(349));(ut&127)!==0||$b(f,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,rx(Pb.bind(null,f,y,i),[i]),f.flags|=2048,Aa(9,{destroy:void 0},qb.bind(null,f,y,c,a),null),c},useId:function(){var i=Jn(),a=Rt.identifierPrefix;if(ht){var c=ci,f=li;c=(f&~(1<<32-Me(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Pu++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=oA++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Lp,useFormState:Jb,useActionState:Jb,useOptimistic:function(i){var a=Jn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Bp.bind(null,et,!0,c),c.dispatch=a,[i,a]},useMemoCache:Np,useCacheRefresh:function(){return Jn().memoizedState=fA.bind(null,et)},useEffectEvent:function(i){var a=Jn(),c={impl:i};return a.memoizedState=c,function(){if((bt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},zp={readContext:Ln,use:Fu,useCallback:cx,useContext:Ln,useEffect:Rp,useImperativeHandle:lx,useInsertionEffect:sx,useLayoutEffect:ox,useMemo:ux,useReducer:Gu,useRef:nx,useState:function(){return Gu(Ii)},useDebugValue:Dp,useDeferredValue:function(i,a){var c=ln();return dx(c,Tt.memoizedState,i,a)},useTransition:function(){var i=Gu(Ii)[0],a=ln().memoizedState;return[typeof i=="boolean"?i:ql(i),a]},useSyncExternalStore:Ub,useId:mx,useHostTransitionStatus:Lp,useFormState:Zb,useActionState:Zb,useOptimistic:function(i,a){var c=ln();return Gb(c,Tt,i,a)},useMemoCache:Np,useCacheRefresh:gx};zp.useEffectEvent=ix;var wx={readContext:Ln,use:Fu,useCallback:cx,useContext:Ln,useEffect:Rp,useImperativeHandle:lx,useInsertionEffect:sx,useLayoutEffect:ox,useMemo:ux,useReducer:kp,useRef:nx,useState:function(){return kp(Ii)},useDebugValue:Dp,useDeferredValue:function(i,a){var c=ln();return Tt===null?_p(c,i,a):dx(c,Tt.memoizedState,i,a)},useTransition:function(){var i=kp(Ii)[0],a=ln().memoizedState;return[typeof i=="boolean"?i:ql(i),a]},useSyncExternalStore:Ub,useId:mx,useHostTransitionStatus:Lp,useFormState:tx,useActionState:tx,useOptimistic:function(i,a){var c=ln();return Tt!==null?Gb(c,Tt,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Np,useCacheRefresh:gx};wx.useEffectEvent=ix;function Ip(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Hp={enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Nr(),g=vs(f);g.payload=a,c!=null&&(g.callback=c),a=ws(i,g,f),a!==null&&(cr(a,i,f),Il(a,i,f))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Nr(),g=vs(f);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=ws(i,g,f),a!==null&&(cr(a,i,f),Il(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Nr(),f=vs(c);f.tag=2,a!=null&&(f.callback=a),a=ws(i,f,c),a!==null&&(cr(a,i,c),Il(a,i,c))}};function Sx(i,a,c,f,g,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,E):a.prototype&&a.prototype.isPureReactComponent?!Ol(c,f)||!Ol(g,y):!0}function Ex(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Hp.enqueueReplaceState(a,a.state,null)}function To(i,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Cx(i){Au(i)}function Tx(i){console.error(i)}function Nx(i){Au(i)}function Yu(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Ax(i,a,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Up(i,a,c){return c=vs(c),c.tag=3,c.payload={element:null},c.callback=function(){Yu(i,a)},c}function kx(i){return i=vs(i),i.tag=3,i}function Mx(i,a,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;i.payload=function(){return g(y)},i.callback=function(){Ax(a,c,f)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Ax(a,c,f),typeof g!="function"&&(As===null?As=new Set([this]):As.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function pA(i,a,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&xa(a,c,g,!0),c=Sr.current,c!==null){switch(c.tag){case 31:case 13:return Ir===null?ld():c.alternate===null&&en===0&&(en=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===zu?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),dm(i,f,g)),!1;case 22:return c.flags|=65536,f===zu?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),dm(i,f,g)),!1}throw Error(r(435,c.tag))}return dm(i,f,g),ld(),!1}if(ht)return a=Sr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,f!==sp&&(i=Error(r(422),{cause:f}),_l(jr(i,c)))):(f!==sp&&(a=Error(r(423),{cause:f}),_l(jr(a,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=jr(f,c),g=Up(i.stateNode,f,g),gp(i,g),en!==4&&(en=2)),!1;var y=Error(r(520),{cause:f});if(y=jr(y,c),Jl===null?Jl=[y]:Jl.push(y),en!==4&&(en=2),a===null)return!0;f=jr(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=Up(c.stateNode,f,i),gp(c,i),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(As===null||!As.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=kx(g),Mx(g,i,c,f),gp(c,g),!1}c=c.return}while(c!==null);return!1}var $p=Error(r(461)),gn=!1;function Bn(i,a,c,f){a.child=i===null?_b(a,null,c,f):Eo(a,i.child,c,f)}function Ox(i,a,c,f,g){c=c.render;var y=a.ref;if("ref"in f){var E={};for(var A in f)A!=="ref"&&(E[A]=f[A])}else E=f;return xo(a),f=Sp(i,a,c,E,y,g),A=Ep(),i!==null&&!gn?(Cp(i,a,g),Hi(i,a,g)):(ht&&A&&rp(a),a.flags|=1,Bn(i,a,f,g),a.child)}function Rx(i,a,c,f,g){if(i===null){var y=c.type;return typeof y=="function"&&!ep(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,Dx(i,a,y,f,g)):(i=Ru(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Qp(i,g)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Ol,c(E,f)&&i.ref===a.ref)return Hi(i,a,g)}return a.flags|=1,i=_i(y,f),i.ref=a.ref,i.return=a,a.child=i}function Dx(i,a,c,f,g){if(i!==null){var y=i.memoizedProps;if(Ol(y,f)&&i.ref===a.ref)if(gn=!1,a.pendingProps=f=y,Qp(i,g))(i.flags&131072)!==0&&(gn=!0);else return a.lanes=i.lanes,Hi(i,a,g)}return qp(i,a,c,f,g)}function _x(i,a,c,f){var g=f.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,i!==null){for(f=a.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~y}else f=0,a.child=null;return jx(i,a,y,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Lu(a,y!==null?y.cachePool:null),y!==null?Bb(a,y):bp(),zb(a);else return f=a.lanes=536870912,jx(i,a,y!==null?y.baseLanes|c:c,c,f)}else y!==null?(Lu(a,y.cachePool),Bb(a,y),Es(),a.memoizedState=null):(i!==null&&Lu(a,null),bp(),Es());return Bn(i,a,g,c),a.child}function Fl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function jx(i,a,c,f,g){var y=fp();return y=y===null?null:{parent:pn._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},i!==null&&Lu(a,null),bp(),zb(a),i!==null&&xa(i,a,f,!0),a.childLanes=g,null}function Xu(i,a){return a=Zu({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function Lx(i,a,c){return Eo(a,i.child,null,c),i=Xu(a,a.pendingProps),i.flags|=2,Er(a),a.memoizedState=null,i}function mA(i,a,c){var f=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(ht){if(f.mode==="hidden")return i=Xu(a,f),a.lanes=536870912,Fl(null,i);if(vp(a),(i=Ut)?(i=Kv(i,zr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ms!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},c=bb(i),c.return=a,a.child=c,jn=a,Ut=null)):i=null,i===null)throw ys(a);return a.lanes=536870912,null}return Xu(a,f)}var y=i.memoizedState;if(y!==null){var E=y.dehydrated;if(vp(a),g)if(a.flags&256)a.flags&=-257,a=Lx(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(gn||xa(i,a,c,!1),g=(c&i.childLanes)!==0,gn||g){if(f=Rt,f!==null&&(E=mt(f,c),E!==0&&E!==y.retryLane))throw y.retryLane=E,mo(i,E),cr(f,i,E),$p;ld(),a=Lx(i,a,c)}else i=y.treeContext,Ut=Hr(E.nextSibling),jn=a,ht=!0,gs=null,zr=!1,i!==null&&wb(a,i),a=Xu(a,f),a.flags|=4096;return a}return i=_i(i.child,{mode:f.mode,children:f.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Ju(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function qp(i,a,c,f,g){return xo(a),c=Sp(i,a,c,f,void 0,g),f=Ep(),i!==null&&!gn?(Cp(i,a,g),Hi(i,a,g)):(ht&&f&&rp(a),a.flags|=1,Bn(i,a,c,g),a.child)}function Bx(i,a,c,f,g,y){return xo(a),a.updateQueue=null,c=Hb(a,f,c,g),Ib(i),f=Ep(),i!==null&&!gn?(Cp(i,a,y),Hi(i,a,y)):(ht&&f&&rp(a),a.flags|=1,Bn(i,a,c,y),a.child)}function zx(i,a,c,f,g){if(xo(a),a.stateNode===null){var y=ma,E=c.contextType;typeof E=="object"&&E!==null&&(y=Ln(E)),y=new c(f,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Hp,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=f,y.state=a.memoizedState,y.refs={},pp(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?Ln(E):ma,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Ip(a,c,E,f),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Hp.enqueueReplaceState(y,y.state,null),Ul(a,f,y,g),Hl(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){y=a.stateNode;var A=a.memoizedProps,_=To(c,A);y.props=_;var F=y.context,ee=c.contextType;E=ma,typeof ee=="object"&&ee!==null&&(E=Ln(ee));var re=c.getDerivedStateFromProps;ee=typeof re=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ee||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||F!==E)&&Ex(a,y,f,E),xs=!1;var G=a.memoizedState;y.state=G,Ul(a,f,y,g),Hl(),F=a.memoizedState,A||G!==F||xs?(typeof re=="function"&&(Ip(a,c,re,f),F=a.memoizedState),(_=xs||Sx(a,c,_,f,G,F,E))?(ee||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),y.props=f,y.state=F,y.context=E,f=_):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{y=a.stateNode,mp(i,a),E=a.memoizedProps,ee=To(c,E),y.props=ee,re=a.pendingProps,G=y.context,F=c.contextType,_=ma,typeof F=="object"&&F!==null&&(_=Ln(F)),A=c.getDerivedStateFromProps,(F=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==re||G!==_)&&Ex(a,y,f,_),xs=!1,G=a.memoizedState,y.state=G,Ul(a,f,y,g),Hl();var X=a.memoizedState;E!==re||G!==X||xs||i!==null&&i.dependencies!==null&&_u(i.dependencies)?(typeof A=="function"&&(Ip(a,c,A,f),X=a.memoizedState),(ee=xs||Sx(a,c,ee,f,G,X,_)||i!==null&&i.dependencies!==null&&_u(i.dependencies))?(F||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,X,_),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,X,_)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=X),y.props=f,y.state=X,y.context=_,f=ee):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&G===i.memoizedState||(a.flags|=1024),f=!1)}return y=f,Ju(i,a),f=(a.flags&128)!==0,y||f?(y=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&f?(a.child=Eo(a,i.child,null,g),a.child=Eo(a,null,c,g)):Bn(i,a,c,g),a.memoizedState=y.state,i=a.child):i=Hi(i,a,g),i}function Ix(i,a,c,f){return yo(),a.flags|=256,Bn(i,a,c,f),a.child}var Pp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vp(i){return{baseLanes:i,cachePool:Ab()}}function Fp(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Tr),i}function Hx(i,a,c){var f=a.pendingProps,g=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(an.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(ht){if(g?Ss(a):Es(),(i=Ut)?(i=Kv(i,zr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:ms!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},c=bb(i),c.return=a,a.child=c,jn=a,Ut=null)):i=null,i===null)throw ys(a);return Am(i)?a.lanes=32:a.lanes=536870912,null}var A=f.children;return f=f.fallback,g?(Es(),g=a.mode,A=Zu({mode:"hidden",children:A},g),f=go(f,g,c,null),A.return=a,f.return=a,A.sibling=f,a.child=A,f=a.child,f.memoizedState=Vp(c),f.childLanes=Fp(i,E,c),a.memoizedState=Pp,Fl(null,f)):(Ss(a),Gp(a,A))}var _=i.memoizedState;if(_!==null&&(A=_.dehydrated,A!==null)){if(y)a.flags&256?(Ss(a),a.flags&=-257,a=Kp(i,a,c)):a.memoizedState!==null?(Es(),a.child=i.child,a.flags|=128,a=null):(Es(),A=f.fallback,g=a.mode,f=Zu({mode:"visible",children:f.children},g),A=go(A,g,c,null),A.flags|=2,f.return=a,A.return=a,f.sibling=A,a.child=f,Eo(a,i.child,null,c),f=a.child,f.memoizedState=Vp(c),f.childLanes=Fp(i,E,c),a.memoizedState=Pp,a=Fl(null,f));else if(Ss(a),Am(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,f=Error(r(419)),f.stack="",f.digest=E,_l({value:f,source:null,stack:null}),a=Kp(i,a,c)}else if(gn||xa(i,a,c,!1),E=(c&i.childLanes)!==0,gn||E){if(E=Rt,E!==null&&(f=mt(E,c),f!==0&&f!==_.retryLane))throw _.retryLane=f,mo(i,f),cr(E,i,f),$p;Nm(A)||ld(),a=Kp(i,a,c)}else Nm(A)?(a.flags|=192,a.child=i.child,a=null):(i=_.treeContext,Ut=Hr(A.nextSibling),jn=a,ht=!0,gs=null,zr=!1,i!==null&&wb(a,i),a=Gp(a,f.children),a.flags|=4096);return a}return g?(Es(),A=f.fallback,g=a.mode,_=i.child,F=_.sibling,f=_i(_,{mode:"hidden",children:f.children}),f.subtreeFlags=_.subtreeFlags&65011712,F!==null?A=_i(F,A):(A=go(A,g,c,null),A.flags|=2),A.return=a,f.return=a,f.sibling=A,a.child=f,Fl(null,f),f=a.child,A=i.child.memoizedState,A===null?A=Vp(c):(g=A.cachePool,g!==null?(_=pn._currentValue,g=g.parent!==_?{parent:_,pool:_}:g):g=Ab(),A={baseLanes:A.baseLanes|c,cachePool:g}),f.memoizedState=A,f.childLanes=Fp(i,E,c),a.memoizedState=Pp,Fl(i.child,f)):(Ss(a),c=i.child,i=c.sibling,c=_i(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=c,a.memoizedState=null,c)}function Gp(i,a){return a=Zu({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Zu(i,a){return i=wr(22,i,null,a),i.lanes=0,i}function Kp(i,a,c){return Eo(a,i.child,null,c),i=Gp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Ux(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),lp(i.return,a,c)}function Wp(i,a,c,f,g,y){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:y}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=c,E.tailMode=g,E.treeForkCount=y)}function $x(i,a,c){var f=a.pendingProps,g=f.revealOrder,y=f.tail;f=f.children;var E=an.current,A=(E&2)!==0;if(A?(E=E&1|2,a.flags|=128):E&=1,W(an,E),Bn(i,a,f,c),f=ht?Dl:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ux(i,c,a);else if(i.tag===19)Ux(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&$u(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Wp(a,!1,g,c,y,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&$u(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Wp(a,!0,c,null,y,f);break;case"together":Wp(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Hi(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Ns|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(xa(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,c=_i(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=_i(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Qp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&_u(i)))}function gA(i,a,c){switch(a.tag){case 3:ke(a,a.stateNode.containerInfo),bs(a,pn,i.memoizedState.cache),yo();break;case 27:case 5:nt(a);break;case 4:ke(a,a.stateNode.containerInfo);break;case 10:bs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,vp(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Ss(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Hx(i,a,c):(Ss(a),i=Hi(i,a,c),i!==null?i.sibling:null);Ss(a);break;case 19:var g=(i.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(xa(i,a,c,!1),f=(c&a.childLanes)!==0),g){if(f)return $x(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(an,an.current),f)break;return null;case 22:return a.lanes=0,_x(i,a,c,a.pendingProps);case 24:bs(a,pn,i.memoizedState.cache)}return Hi(i,a,c)}function qx(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)gn=!0;else{if(!Qp(i,c)&&(a.flags&128)===0)return gn=!1,gA(i,a,c);gn=(i.flags&131072)!==0}else gn=!1,ht&&(a.flags&1048576)!==0&&vb(a,Dl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(i=wo(a.elementType),a.type=i,typeof i=="function")ep(i)?(f=To(i,f),a.tag=1,a=zx(null,a,i,f,c)):(a.tag=0,a=qp(null,a,i,f,c));else{if(i!=null){var g=i.$$typeof;if(g===k){a.tag=11,a=Ox(null,a,i,f,c);break e}else if(g===U){a.tag=14,a=Rx(null,a,i,f,c);break e}}throw a=ve(i)||i,Error(r(306,a,""))}}return a;case 0:return qp(i,a,a.type,a.pendingProps,c);case 1:return f=a.type,g=To(f,a.pendingProps),zx(i,a,f,g,c);case 3:e:{if(ke(a,a.stateNode.containerInfo),i===null)throw Error(r(387));f=a.pendingProps;var y=a.memoizedState;g=y.element,mp(i,a),Ul(a,f,null,c);var E=a.memoizedState;if(f=E.cache,bs(a,pn,f),f!==y.cache&&cp(a,[pn],c,!0),Hl(),f=E.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Ix(i,a,f,c);break e}else if(f!==g){g=jr(Error(r(424)),a),_l(g),a=Ix(i,a,f,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ut=Hr(i.firstChild),jn=a,ht=!0,gs=null,zr=!0,c=_b(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(yo(),f===g){a=Hi(i,a,c);break e}Bn(i,a,f,c)}a=a.child}return a;case 26:return Ju(i,a),i===null?(c=Zv(a.type,null,a.pendingProps,null))?a.memoizedState=c:ht||(c=a.type,i=a.pendingProps,f=md(Z.current).createElement(c),f[sn]=a,f[Pn]=i,zn(f,c,i),fn(f),a.stateNode=f):a.memoizedState=Zv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return nt(a),i===null&&ht&&(f=a.stateNode=Yv(a.type,a.pendingProps,Z.current),jn=a,zr=!0,g=Ut,Rs(a.type)?(km=g,Ut=Hr(f.firstChild)):Ut=g),Bn(i,a,a.pendingProps.children,c),Ju(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ht&&((g=f=Ut)&&(f=GA(f,a.type,a.pendingProps,zr),f!==null?(a.stateNode=f,jn=a,Ut=Hr(f.firstChild),zr=!1,g=!0):g=!1),g||ys(a)),nt(a),g=a.type,y=a.pendingProps,E=i!==null?i.memoizedProps:null,f=y.children,Em(g,y)?f=null:E!==null&&Em(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Sp(i,a,aA,null,null,c),oc._currentValue=g),Ju(i,a),Bn(i,a,f,c),a.child;case 6:return i===null&&ht&&((i=c=Ut)&&(c=KA(c,a.pendingProps,zr),c!==null?(a.stateNode=c,jn=a,Ut=null,i=!0):i=!1),i||ys(a)),null;case 13:return Hx(i,a,c);case 4:return ke(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Eo(a,null,f,c):Bn(i,a,f,c),a.child;case 11:return Ox(i,a,a.type,a.pendingProps,c);case 7:return Bn(i,a,a.pendingProps,c),a.child;case 8:return Bn(i,a,a.pendingProps.children,c),a.child;case 12:return Bn(i,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,bs(a,a.type,f.value),Bn(i,a,f.children,c),a.child;case 9:return g=a.type._context,f=a.pendingProps.children,xo(a),g=Ln(g),f=f(g),a.flags|=1,Bn(i,a,f,c),a.child;case 14:return Rx(i,a,a.type,a.pendingProps,c);case 15:return Dx(i,a,a.type,a.pendingProps,c);case 19:return $x(i,a,c);case 31:return mA(i,a,c);case 22:return _x(i,a,c,a.pendingProps);case 24:return xo(a),f=Ln(pn),i===null?(g=fp(),g===null&&(g=Rt,y=up(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:f,cache:g},pp(a),bs(a,pn,g)):((i.lanes&c)!==0&&(mp(i,a),Ul(a,null,null,c),Hl()),g=i.memoizedState,y=a.memoizedState,g.parent!==f?(g={parent:f,cache:f},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),bs(a,pn,f)):(f=y.cache,bs(a,pn,f),f!==g.cache&&cp(a,[pn],c,!0))),Bn(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ui(i){i.flags|=4}function Yp(i,a,c,f,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(mv())i.flags|=8192;else throw So=zu,hp}else i.flags&=-16777217}function Px(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!i1(a))if(mv())i.flags|=8192;else throw So=zu,hp}function ed(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?De():536870912,i.lanes|=a,Ra|=a)}function Gl(i,a){if(!ht)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function $t(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function yA(i,a,c){var f=a.pendingProps;switch(ip(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(a),null;case 1:return $t(a),null;case 3:return c=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Bi(pn),fe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ba(a)?Ui(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,op())),$t(a),null;case 26:var g=a.type,y=a.memoizedState;return i===null?(Ui(a),y!==null?($t(a),Px(a,y)):($t(a),Yp(a,g,null,f,c))):y?y!==i.memoizedState?(Ui(a),$t(a),Px(a,y)):($t(a),a.flags&=-16777217):(i=i.memoizedProps,i!==f&&Ui(a),$t(a),Yp(a,g,i,f,c)),null;case 27:if(kt(a),c=Z.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ui(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return $t(a),null}i=se.current,ba(a)?Sb(a):(i=Yv(g,f,c),a.stateNode=i,Ui(a))}return $t(a),null;case 5:if(kt(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Ui(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return $t(a),null}if(y=se.current,ba(a))Sb(a);else{var E=md(Z.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?y.multiple=!0:f.size&&(y.size=f.size);break;default:y=typeof f.is=="string"?E.createElement(g,{is:f.is}):E.createElement(g)}}y[sn]=a,y[Pn]=f;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=y;e:switch(zn(y,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ui(a)}}return $t(a),Yp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Ui(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(i=Z.current,ba(a)){if(i=a.stateNode,c=a.memoizedProps,f=null,g=jn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[sn]=a,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Hv(i.nodeValue,c)),i||ys(a,!0)}else i=md(i).createTextNode(f),i[sn]=a,a.stateNode=i}return $t(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(f=ba(a),c!==null){if(i===null){if(!f)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[sn]=a}else yo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$t(a),i=!1}else c=op(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(Er(a),a):(Er(a),null);if((a.flags&128)!==0)throw Error(r(558))}return $t(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=ba(a),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[sn]=a}else yo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$t(a),g=!1}else g=op(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Er(a),a):(Er(a),null)}return Er(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=a.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),ed(a,a.updateQueue),$t(a),null);case 4:return fe(),i===null&&bm(a.stateNode.containerInfo),$t(a),null;case 10:return Bi(a.type),$t(a),null;case 19:if(P(an),f=a.memoizedState,f===null)return $t(a),null;if(g=(a.flags&128)!==0,y=f.rendering,y===null)if(g)Gl(f,!1);else{if(en!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=$u(i),y!==null){for(a.flags|=128,Gl(f,!1),i=y.updateQueue,a.updateQueue=i,ed(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)yb(c,i),c=c.sibling;return W(an,an.current&1|2),ht&&ji(a,f.treeForkCount),a.child}i=i.sibling}f.tail!==null&&Ze()>sd&&(a.flags|=128,g=!0,Gl(f,!1),a.lanes=4194304)}else{if(!g)if(i=$u(y),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,ed(a,i),Gl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!ht)return $t(a),null}else 2*Ze()-f.renderingStartTime>sd&&c!==536870912&&(a.flags|=128,g=!0,Gl(f,!1),a.lanes=4194304);f.isBackwards?(y.sibling=a.child,a.child=y):(i=f.last,i!==null?i.sibling=y:a.child=y,f.last=y)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ze(),i.sibling=null,c=an.current,W(an,g?c&1|2:c&1),ht&&ji(a,f.treeForkCount),i):($t(a),null);case 22:case 23:return Er(a),xp(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&($t(a),a.subtreeFlags&6&&(a.flags|=8192)):$t(a),c=a.updateQueue,c!==null&&ed(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),i!==null&&P(vo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Bi(pn),$t(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function bA(i,a){switch(ip(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Bi(pn),fe(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return kt(a),null;case 31:if(a.memoizedState!==null){if(Er(a),a.alternate===null)throw Error(r(340));yo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Er(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));yo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return P(an),null;case 4:return fe(),null;case 10:return Bi(a.type),null;case 22:case 23:return Er(a),xp(),i!==null&&P(vo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Bi(pn),null;case 25:return null;default:return null}}function Vx(i,a){switch(ip(a),a.tag){case 3:Bi(pn),fe();break;case 26:case 27:case 5:kt(a);break;case 4:fe();break;case 31:a.memoizedState!==null&&Er(a);break;case 13:Er(a);break;case 19:P(an);break;case 10:Bi(a.type);break;case 22:case 23:Er(a),xp(),i!==null&&P(vo);break;case 24:Bi(pn)}}function Kl(i,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var y=c.create,E=c.inst;f=y(),E.destroy=f}c=c.next}while(c!==g)}}catch(A){Ct(a,a.return,A)}}function Cs(i,a,c){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&i)===i){var E=f.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,g=a;var _=c,F=A;try{F()}catch(ee){Ct(g,_,ee)}}}f=f.next}while(f!==y)}}catch(ee){Ct(a,a.return,ee)}}function Fx(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{Lb(a,c)}catch(f){Ct(i,i.return,f)}}}function Gx(i,a,c){c.props=To(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){Ct(i,a,f)}}function Wl(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){Ct(i,a,g)}}function ui(i,a){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){Ct(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ct(i,a,g)}else c.current=null}function Kx(i){var a=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){Ct(i,i.return,g)}}function Xp(i,a,c){try{var f=i.stateNode;UA(f,i.type,c,a),f[Pn]=a}catch(g){Ct(i,i.return,g)}}function Wx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Rs(i.type)||i.tag===4}function Jp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Rs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Zp(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=xe));else if(f!==4&&(f===27&&Rs(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(Zp(i,a,c),i=i.sibling;i!==null;)Zp(i,a,c),i=i.sibling}function td(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(f===27&&Rs(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(td(i,a,c),i=i.sibling;i!==null;)td(i,a,c),i=i.sibling}function Qx(i){var a=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);zn(a,f,c),a[sn]=i,a[Pn]=c}catch(y){Ct(i,i.return,y)}}var $i=!1,yn=!1,em=!1,Yx=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function xA(i,a){if(i=i.containerInfo,wm=Sd,i=lb(i),Kh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,A=-1,_=-1,F=0,ee=0,re=i,G=null;t:for(;;){for(var X;re!==c||g!==0&&re.nodeType!==3||(A=E+g),re!==y||f!==0&&re.nodeType!==3||(_=E+f),re.nodeType===3&&(E+=re.nodeValue.length),(X=re.firstChild)!==null;)G=re,re=X;for(;;){if(re===i)break t;if(G===c&&++F===g&&(A=E),G===y&&++ee===f&&(_=E),(X=re.nextSibling)!==null)break;re=G,G=re.parentNode}re=X}c=A===-1||_===-1?null:{start:A,end:_}}else c=null}c=c||{start:0,end:0}}else c=null;for(Sm={focusedElem:i,selectionRange:c},Sd=!1,Cn=a;Cn!==null;)if(a=Cn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Cn=i;else for(;Cn!==null;){switch(a=Cn,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var Oe=To(c.type,g);i=f.getSnapshotBeforeUpdate(Oe,y),f.__reactInternalSnapshotBeforeUpdate=i}catch(qe){Ct(c,c.return,qe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)Tm(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Tm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Cn=i;break}Cn=a.return}}function Xx(i,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Pi(i,c),f&4&&Kl(5,c);break;case 1:if(Pi(i,c),f&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(E){Ct(c,c.return,E)}else{var g=To(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){Ct(c,c.return,E)}}f&64&&Fx(c),f&512&&Wl(c,c.return);break;case 3:if(Pi(i,c),f&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Lb(i,a)}catch(E){Ct(c,c.return,E)}}break;case 27:a===null&&f&4&&Qx(c);case 26:case 5:Pi(i,c),a===null&&f&4&&Kx(c),f&512&&Wl(c,c.return);break;case 12:Pi(i,c);break;case 31:Pi(i,c),f&4&&ev(i,c);break;case 13:Pi(i,c),f&4&&tv(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=kA.bind(null,c),WA(i,c))));break;case 22:if(f=c.memoizedState!==null||$i,!f){a=a!==null&&a.memoizedState!==null||yn,g=$i;var y=yn;$i=f,(yn=a)&&!y?Vi(i,c,(c.subtreeFlags&8772)!==0):Pi(i,c),$i=g,yn=y}break;case 30:break;default:Pi(i,c)}}function Jx(i){var a=i.alternate;a!==null&&(i.alternate=null,Jx(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&bl(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ft=null,sr=!1;function qi(i,a,c){for(c=c.child;c!==null;)Zx(i,a,c),c=c.sibling}function Zx(i,a,c){if(Y&&typeof Y.onCommitFiberUnmount=="function")try{Y.onCommitFiberUnmount(gr,c)}catch{}switch(c.tag){case 26:yn||ui(c,a),qi(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:yn||ui(c,a);var f=Ft,g=sr;Rs(c.type)&&(Ft=c.stateNode,sr=!1),qi(i,a,c),rc(c.stateNode),Ft=f,sr=g;break;case 5:yn||ui(c,a);case 6:if(f=Ft,g=sr,Ft=null,qi(i,a,c),Ft=f,sr=g,Ft!==null)if(sr)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(c.stateNode)}catch(y){Ct(c,a,y)}else try{Ft.removeChild(c.stateNode)}catch(y){Ct(c,a,y)}break;case 18:Ft!==null&&(sr?(i=Ft,Fv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ha(i)):Fv(Ft,c.stateNode));break;case 4:f=Ft,g=sr,Ft=c.stateNode.containerInfo,sr=!0,qi(i,a,c),Ft=f,sr=g;break;case 0:case 11:case 14:case 15:Cs(2,c,a),yn||Cs(4,c,a),qi(i,a,c);break;case 1:yn||(ui(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Gx(c,a,f)),qi(i,a,c);break;case 21:qi(i,a,c);break;case 22:yn=(f=yn)||c.memoizedState!==null,qi(i,a,c),yn=f;break;default:qi(i,a,c)}}function ev(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ha(i)}catch(c){Ct(a,a.return,c)}}}function tv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ha(i)}catch(c){Ct(a,a.return,c)}}function vA(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Yx),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Yx),a;default:throw Error(r(435,i.tag))}}function nd(i,a){var c=vA(i);a.forEach(function(f){if(!c.has(f)){c.add(f);var g=MA.bind(null,i,f);f.then(g,g)}})}function or(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],y=i,E=a,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Rs(A.type)){Ft=A.stateNode,sr=!1;break e}break;case 5:Ft=A.stateNode,sr=!1;break e;case 3:case 4:Ft=A.stateNode.containerInfo,sr=!0;break e}A=A.return}if(Ft===null)throw Error(r(160));Zx(y,E,g),Ft=null,sr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)nv(a,i),a=a.sibling}var ei=null;function nv(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(a,i),ar(i),f&4&&(Cs(3,i,i.return),Kl(3,i),Cs(5,i,i.return));break;case 1:or(a,i),ar(i),f&512&&(yn||c===null||ui(c,c.return)),f&64&&$i&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=ei;if(or(a,i),ar(i),f&512&&(yn||c===null||ui(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[lo]||y[sn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),zn(y,f,c),y[sn]=i,fn(y),f=y;break e;case"link":var E=n1("link","href",g).get(f+(c.href||""));if(E){for(var A=0;A<E.length;A++)if(y=E[A],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(A,1);break t}}y=g.createElement(f),zn(y,f,c),g.head.appendChild(y);break;case"meta":if(E=n1("meta","content",g).get(f+(c.content||""))){for(A=0;A<E.length;A++)if(y=E[A],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(A,1);break t}}y=g.createElement(f),zn(y,f,c),g.head.appendChild(y);break;default:throw Error(r(468,f))}y[sn]=i,fn(y),f=y}i.stateNode=f}else r1(g,i.type,i.stateNode);else i.stateNode=t1(g,f,i.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?r1(g,i.type,i.stateNode):t1(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Xp(i,i.memoizedProps,c.memoizedProps)}break;case 27:or(a,i),ar(i),f&512&&(yn||c===null||ui(c,c.return)),c!==null&&f&4&&Xp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(or(a,i),ar(i),f&512&&(yn||c===null||ui(c,c.return)),i.flags&32){g=i.stateNode;try{Ge(g,"")}catch(Oe){Ct(i,i.return,Oe)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,Xp(i,g,c!==null?c.memoizedProps:g)),f&1024&&(em=!0);break;case 6:if(or(a,i),ar(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Oe){Ct(i,i.return,Oe)}}break;case 3:if(bd=null,g=ei,ei=gd(a.containerInfo),or(a,i),ei=g,ar(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ha(a.containerInfo)}catch(Oe){Ct(i,i.return,Oe)}em&&(em=!1,rv(i));break;case 4:f=ei,ei=gd(i.stateNode.containerInfo),or(a,i),ar(i),ei=f;break;case 12:or(a,i),ar(i);break;case 31:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,nd(i,f)));break;case 13:or(a,i),ar(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(id=Ze()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,nd(i,f)));break;case 22:g=i.memoizedState!==null;var _=c!==null&&c.memoizedState!==null,F=$i,ee=yn;if($i=F||g,yn=ee||_,or(a,i),yn=ee,$i=F,ar(i),f&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||_||$i||yn||No(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){_=c=a;try{if(y=_.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=_.stateNode;var re=_.memoizedProps.style,G=re!=null&&re.hasOwnProperty("display")?re.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Oe){Ct(_,_.return,Oe)}}}else if(a.tag===6){if(c===null){_=a;try{_.stateNode.nodeValue=g?"":_.memoizedProps}catch(Oe){Ct(_,_.return,Oe)}}}else if(a.tag===18){if(c===null){_=a;try{var X=_.stateNode;g?Gv(X,!0):Gv(_.stateNode,!1)}catch(Oe){Ct(_,_.return,Oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,nd(i,c))));break;case 19:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,nd(i,f)));break;case 30:break;case 21:break;default:or(a,i),ar(i)}}function ar(i){var a=i.flags;if(a&2){try{for(var c,f=i.return;f!==null;){if(Wx(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,y=Jp(i);td(i,y,g);break;case 5:var E=c.stateNode;c.flags&32&&(Ge(E,""),c.flags&=-33);var A=Jp(i);td(i,A,E);break;case 3:case 4:var _=c.stateNode.containerInfo,F=Jp(i);Zp(i,F,_);break;default:throw Error(r(161))}}catch(ee){Ct(i,i.return,ee)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;rv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Pi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xx(i,a.alternate,a),a=a.sibling}function No(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Cs(4,a,a.return),No(a);break;case 1:ui(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Gx(a,a.return,c),No(a);break;case 27:rc(a.stateNode);case 26:case 5:ui(a,a.return),No(a);break;case 22:a.memoizedState===null&&No(a);break;case 30:No(a);break;default:No(a)}i=i.sibling}}function Vi(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,g=i,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:Vi(g,y,c),Kl(4,y);break;case 1:if(Vi(g,y,c),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){Ct(f,f.return,F)}if(f=y,g=f.updateQueue,g!==null){var A=f.stateNode;try{var _=g.shared.hiddenCallbacks;if(_!==null)for(g.shared.hiddenCallbacks=null,g=0;g<_.length;g++)jb(_[g],A)}catch(F){Ct(f,f.return,F)}}c&&E&64&&Fx(y),Wl(y,y.return);break;case 27:Qx(y);case 26:case 5:Vi(g,y,c),c&&f===null&&E&4&&Kx(y),Wl(y,y.return);break;case 12:Vi(g,y,c);break;case 31:Vi(g,y,c),c&&E&4&&ev(g,y);break;case 13:Vi(g,y,c),c&&E&4&&tv(g,y);break;case 22:y.memoizedState===null&&Vi(g,y,c),Wl(y,y.return);break;case 30:break;default:Vi(g,y,c)}a=a.sibling}}function tm(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&jl(c))}function nm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&jl(i))}function ti(i,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)iv(i,a,c,f),a=a.sibling}function iv(i,a,c,f){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ti(i,a,c,f),g&2048&&Kl(9,a);break;case 1:ti(i,a,c,f);break;case 3:ti(i,a,c,f),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&jl(i)));break;case 12:if(g&2048){ti(i,a,c,f),i=a.stateNode;try{var y=a.memoizedProps,E=y.id,A=y.onPostCommit;typeof A=="function"&&A(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(_){Ct(a,a.return,_)}}else ti(i,a,c,f);break;case 31:ti(i,a,c,f);break;case 13:ti(i,a,c,f);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?ti(i,a,c,f):Ql(i,a):y._visibility&2?ti(i,a,c,f):(y._visibility|=2,ka(i,a,c,f,(a.subtreeFlags&10256)!==0||!1)),g&2048&&tm(E,a);break;case 24:ti(i,a,c,f),g&2048&&nm(a.alternate,a);break;default:ti(i,a,c,f)}}function ka(i,a,c,f,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,E=a,A=c,_=f,F=E.flags;switch(E.tag){case 0:case 11:case 15:ka(y,E,A,_,g),Kl(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?ka(y,E,A,_,g):Ql(y,E):(ee._visibility|=2,ka(y,E,A,_,g)),g&&F&2048&&tm(E.alternate,E);break;case 24:ka(y,E,A,_,g),g&&F&2048&&nm(E.alternate,E);break;default:ka(y,E,A,_,g)}a=a.sibling}}function Ql(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,f=a,g=f.flags;switch(f.tag){case 22:Ql(c,f),g&2048&&tm(f.alternate,f);break;case 24:Ql(c,f),g&2048&&nm(f.alternate,f);break;default:Ql(c,f)}a=a.sibling}}var Yl=8192;function Ma(i,a,c){if(i.subtreeFlags&Yl)for(i=i.child;i!==null;)sv(i,a,c),i=i.sibling}function sv(i,a,c){switch(i.tag){case 26:Ma(i,a,c),i.flags&Yl&&i.memoizedState!==null&&ok(c,ei,i.memoizedState,i.memoizedProps);break;case 5:Ma(i,a,c);break;case 3:case 4:var f=ei;ei=gd(i.stateNode.containerInfo),Ma(i,a,c),ei=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Yl,Yl=16777216,Ma(i,a,c),Yl=f):Ma(i,a,c));break;default:Ma(i,a,c)}}function ov(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Xl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Cn=f,lv(f,i)}ov(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)av(i),i=i.sibling}function av(i){switch(i.tag){case 0:case 11:case 15:Xl(i),i.flags&2048&&Cs(9,i,i.return);break;case 3:Xl(i);break;case 12:Xl(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,rd(i)):Xl(i);break;default:Xl(i)}}function rd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Cn=f,lv(f,i)}ov(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Cs(8,a,a.return),rd(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,rd(a));break;default:rd(a)}i=i.sibling}}function lv(i,a){for(;Cn!==null;){var c=Cn;switch(c.tag){case 0:case 11:case 15:Cs(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:jl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Cn=f;else e:for(c=i;Cn!==null;){f=Cn;var g=f.sibling,y=f.return;if(Jx(f),f===c){Cn=null;break e}if(g!==null){g.return=y,Cn=g;break e}Cn=y}}}var wA={getCacheForType:function(i){var a=Ln(pn),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Ln(pn).controller.signal}},SA=typeof WeakMap=="function"?WeakMap:Map,bt=0,Rt=null,at=null,ut=0,Et=0,Cr=null,Ts=!1,Oa=!1,rm=!1,Fi=0,en=0,Ns=0,Ao=0,im=0,Tr=0,Ra=0,Jl=null,lr=null,sm=!1,id=0,cv=0,sd=1/0,od=null,As=null,wn=0,ks=null,Da=null,Gi=0,om=0,am=null,uv=null,Zl=0,lm=null;function Nr(){return(bt&2)!==0&&ut!==0?ut&-ut:z.T!==null?pm():ao()}function dv(){if(Tr===0)if((ut&536870912)===0||ht){var i=Yn;Yn<<=1,(Yn&3932160)===0&&(Yn=262144),Tr=i}else Tr=536870912;return i=Sr.current,i!==null&&(i.flags|=32),Tr}function cr(i,a,c){(i===Rt&&(Et===2||Et===9)||i.cancelPendingCommit!==null)&&(_a(i,0),Ms(i,ut,Tr,!1)),Fe(i,c),((bt&2)===0||i!==Rt)&&(i===Rt&&((bt&2)===0&&(Ao|=c),en===4&&Ms(i,ut,Tr,!1)),di(i))}function fv(i,a,c){if((bt&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&i.expiredLanes)===0||Q(i,a),g=f?TA(i,a):um(i,a,!0),y=f;do{if(g===0){Oa&&!f&&Ms(i,a,0,!1);break}else{if(c=i.current.alternate,y&&!EA(c)){g=um(i,a,!1),y=!1;continue}if(g===2){if(y=a,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var A=i;g=Jl;var _=A.current.memoizedState.isDehydrated;if(_&&(_a(A,E).flags|=256),E=um(A,E,!1),E!==2){if(rm&&!_){A.errorRecoveryDisabledLanes|=y,Ao|=y,g=4;break e}y=lr,lr=g,y!==null&&(lr===null?lr=y:lr.push.apply(lr,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){_a(i,0),Ms(i,a,0,!0);break}e:{switch(f=i,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ms(f,a,Tr,!Ts);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=id+300-Ze(),10<g)){if(Ms(f,a,Tr,!Ts),O(f,0,!0)!==0)break e;Gi=a,f.timeoutHandle=Pv(hv.bind(null,f,c,lr,od,sm,a,Tr,Ao,Ra,Ts,y,"Throttled",-0,0),g);break e}hv(f,c,lr,od,sm,a,Tr,Ao,Ra,Ts,y,null,-0,0)}}break}while(!0);di(i)}function hv(i,a,c,f,g,y,E,A,_,F,ee,re,G,X){if(i.timeoutHandle=-1,re=a.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xe},sv(a,y,re);var Oe=(y&62914560)===y?id-Ze():(y&4194048)===y?cv-Ze():0;if(Oe=ak(re,Oe),Oe!==null){Gi=y,i.cancelPendingCommit=Oe(wv.bind(null,i,a,y,c,f,g,E,A,_,ee,re,null,G,X)),Ms(i,y,E,!F);return}}wv(i,a,y,c,f,g,E,A,_)}function EA(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],y=g.getSnapshot;g=g.value;try{if(!vr(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ms(i,a,c,f){a&=~im,a&=~Ao,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var g=a;0<g;){var y=31-Me(g),E=1<<y;f[y]=-1,g&=~E}c!==0&&Ae(i,c,a)}function ad(){return(bt&6)===0?(ec(0),!1):!0}function cm(){if(at!==null){if(Et===0)var i=at.return;else i=at,Li=bo=null,Tp(i),Ea=null,Bl=0,i=at;for(;i!==null;)Vx(i.alternate,i),i=i.return;at=null}}function _a(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,PA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Gi=0,cm(),Rt=i,at=c=_i(i.current,null),ut=a,Et=0,Cr=null,Ts=!1,Oa=Q(i,a),rm=!1,Ra=Tr=im=Ao=Ns=en=0,lr=Jl=null,sm=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var g=31-Me(f),y=1<<g;a|=i[g],f&=~y}return Fi=a,ku(),c}function pv(i,a){et=null,z.H=Vl,a===Sa||a===Bu?(a=Ob(),Et=3):a===hp?(a=Ob(),Et=4):Et=a===$p?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Cr=a,at===null&&(en=1,Yu(i,jr(a,i.current)))}function mv(){var i=Sr.current;return i===null?!0:(ut&4194048)===ut?Ir===null:(ut&62914560)===ut||(ut&536870912)!==0?i===Ir:!1}function gv(){var i=z.H;return z.H=Vl,i===null?Vl:i}function yv(){var i=z.A;return z.A=wA,i}function ld(){en=4,Ts||(ut&4194048)!==ut&&Sr.current!==null||(Oa=!0),(Ns&134217727)===0&&(Ao&134217727)===0||Rt===null||Ms(Rt,ut,Tr,!1)}function um(i,a,c){var f=bt;bt|=2;var g=gv(),y=yv();(Rt!==i||ut!==a)&&(od=null,_a(i,a)),a=!1;var E=en;e:do try{if(Et!==0&&at!==null){var A=at,_=Cr;switch(Et){case 8:cm(),E=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(a=!0);var F=Et;if(Et=0,Cr=null,ja(i,A,_,F),c&&Oa){E=0;break e}break;default:F=Et,Et=0,Cr=null,ja(i,A,_,F)}}CA(),E=en;break}catch(ee){pv(i,ee)}while(!0);return a&&i.shellSuspendCounter++,Li=bo=null,bt=f,z.H=g,z.A=y,at===null&&(Rt=null,ut=0,ku()),E}function CA(){for(;at!==null;)bv(at)}function TA(i,a){var c=bt;bt|=2;var f=gv(),g=yv();Rt!==i||ut!==a?(od=null,sd=Ze()+500,_a(i,a)):Oa=Q(i,a);e:do try{if(Et!==0&&at!==null){a=at;var y=Cr;t:switch(Et){case 1:Et=0,Cr=null,ja(i,a,y,1);break;case 2:case 9:if(kb(y)){Et=0,Cr=null,xv(a);break}a=function(){Et!==2&&Et!==9||Rt!==i||(Et=7),di(i)},y.then(a,a);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:kb(y)?(Et=0,Cr=null,xv(a)):(Et=0,Cr=null,ja(i,a,y,7));break;case 5:var E=null;switch(at.tag){case 26:E=at.memoizedState;case 5:case 27:var A=at;if(E?i1(E):A.stateNode.complete){Et=0,Cr=null;var _=A.sibling;if(_!==null)at=_;else{var F=A.return;F!==null?(at=F,cd(F)):at=null}break t}}Et=0,Cr=null,ja(i,a,y,5);break;case 6:Et=0,Cr=null,ja(i,a,y,6);break;case 8:cm(),en=6;break e;default:throw Error(r(462))}}NA();break}catch(ee){pv(i,ee)}while(!0);return Li=bo=null,z.H=f,z.A=g,bt=c,at!==null?0:(Rt=null,ut=0,ku(),en)}function NA(){for(;at!==null&&!Be();)bv(at)}function bv(i){var a=qx(i.alternate,i,Fi);i.memoizedProps=i.pendingProps,a===null?cd(i):at=a}function xv(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Bx(c,a,a.pendingProps,a.type,void 0,ut);break;case 11:a=Bx(c,a,a.pendingProps,a.type.render,a.ref,ut);break;case 5:Tp(a);default:Vx(c,a),a=at=yb(a,Fi),a=qx(c,a,Fi)}i.memoizedProps=i.pendingProps,a===null?cd(i):at=a}function ja(i,a,c,f){Li=bo=null,Tp(a),Ea=null,Bl=0;var g=a.return;try{if(pA(i,g,a,c,ut)){en=1,Yu(i,jr(c,i.current)),at=null;return}}catch(y){if(g!==null)throw at=g,y;en=1,Yu(i,jr(c,i.current)),at=null;return}a.flags&32768?(ht||f===1?i=!0:Oa||(ut&536870912)!==0?i=!1:(Ts=i=!0,(f===2||f===9||f===3||f===6)&&(f=Sr.current,f!==null&&f.tag===13&&(f.flags|=16384))),vv(a,i)):cd(a)}function cd(i){var a=i;do{if((a.flags&32768)!==0){vv(a,Ts);return}i=a.return;var c=yA(a.alternate,a,Fi);if(c!==null){at=c;return}if(a=a.sibling,a!==null){at=a;return}at=a=i}while(a!==null);en===0&&(en=5)}function vv(i,a){do{var c=bA(i.alternate,i);if(c!==null){c.flags&=32767,at=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){at=i;return}at=i=c}while(i!==null);en=6,at=null}function wv(i,a,c,f,g,y,E,A,_){i.cancelPendingCommit=null;do ud();while(wn!==0);if((bt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=Jh,Ce(i,c,y,E,A,_),i===Rt&&(at=Rt=null,ut=0),Da=a,ks=i,Gi=c,om=y,am=g,uv=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,OA(Ne,function(){return Nv(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=z.T,z.T=null,g=D.p,D.p=2,E=bt,bt|=4;try{xA(i,a,c)}finally{bt=E,D.p=g,z.T=f}}wn=1,Sv(),Ev(),Cv()}}function Sv(){if(wn===1){wn=0;var i=ks,a=Da,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var f=D.p;D.p=2;var g=bt;bt|=4;try{nv(a,i);var y=Sm,E=lb(i.containerInfo),A=y.focusedElem,_=y.selectionRange;if(E!==A&&A&&A.ownerDocument&&ab(A.ownerDocument.documentElement,A)){if(_!==null&&Kh(A)){var F=_.start,ee=_.end;if(ee===void 0&&(ee=F),"selectionStart"in A)A.selectionStart=F,A.selectionEnd=Math.min(ee,A.value.length);else{var re=A.ownerDocument||document,G=re&&re.defaultView||window;if(G.getSelection){var X=G.getSelection(),Oe=A.textContent.length,qe=Math.min(_.start,Oe),At=_.end===void 0?qe:Math.min(_.end,Oe);!X.extend&&qe>At&&(E=At,At=qe,qe=E);var q=ob(A,qe),I=ob(A,At);if(q&&I&&(X.rangeCount!==1||X.anchorNode!==q.node||X.anchorOffset!==q.offset||X.focusNode!==I.node||X.focusOffset!==I.offset)){var V=re.createRange();V.setStart(q.node,q.offset),X.removeAllRanges(),qe>At?(X.addRange(V),X.extend(I.node,I.offset)):(V.setEnd(I.node,I.offset),X.addRange(V))}}}}for(re=[],X=A;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<re.length;A++){var ne=re[A];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Sd=!!wm,Sm=wm=null}finally{bt=g,D.p=f,z.T=c}}i.current=a,wn=2}}function Ev(){if(wn===2){wn=0;var i=ks,a=Da,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var f=D.p;D.p=2;var g=bt;bt|=4;try{Xx(i,a.alternate,a)}finally{bt=g,D.p=f,z.T=c}}wn=3}}function Cv(){if(wn===4||wn===3){wn=0,ot();var i=ks,a=Da,c=Gi,f=uv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?wn=5:(wn=0,Da=ks=null,Tv(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(As=null),Dn(c),a=a.stateNode,Y&&typeof Y.onCommitFiberRoot=="function")try{Y.onCommitFiberRoot(gr,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=z.T,g=D.p,D.p=2,z.T=null;try{for(var y=i.onRecoverableError,E=0;E<f.length;E++){var A=f[E];y(A.value,{componentStack:A.stack})}}finally{z.T=a,D.p=g}}(Gi&3)!==0&&ud(),di(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===lm?Zl++:(Zl=0,lm=i):Zl=0,ec(0)}}function Tv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,jl(a)))}function ud(){return Sv(),Ev(),Cv(),Nv()}function Nv(){if(wn!==5)return!1;var i=ks,a=om;om=0;var c=Dn(Gi),f=z.T,g=D.p;try{D.p=32>c?32:c,z.T=null,c=am,am=null;var y=ks,E=Gi;if(wn=0,Da=ks=null,Gi=0,(bt&6)!==0)throw Error(r(331));var A=bt;if(bt|=4,av(y.current),iv(y,y.current,E,c),bt=A,ec(0,!1),Y&&typeof Y.onPostCommitFiberRoot=="function")try{Y.onPostCommitFiberRoot(gr,y)}catch{}return!0}finally{D.p=g,z.T=f,Tv(i,a)}}function Av(i,a,c){a=jr(c,a),a=Up(i.stateNode,a,2),i=ws(i,a,2),i!==null&&(Fe(i,2),di(i))}function Ct(i,a,c){if(i.tag===3)Av(i,i,c);else for(;a!==null;){if(a.tag===3){Av(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(As===null||!As.has(f))){i=jr(c,i),c=kx(2),f=ws(a,c,2),f!==null&&(Mx(c,f,a,i),Fe(f,2),di(f));break}}a=a.return}}function dm(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new SA;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(rm=!0,g.add(c),i=AA.bind(null,i,a,c),a.then(i,i))}function AA(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Rt===i&&(ut&c)===c&&(en===4||en===3&&(ut&62914560)===ut&&300>Ze()-id?(bt&2)===0&&_a(i,0):im|=c,Ra===ut&&(Ra=0)),di(i)}function kv(i,a){a===0&&(a=De()),i=mo(i,a),i!==null&&(Fe(i,a),di(i))}function kA(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),kv(i,c)}function MA(i,a){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),kv(i,c)}function OA(i,a){return Ee(i,a)}var dd=null,La=null,fm=!1,fd=!1,hm=!1,Os=0;function di(i){i!==La&&i.next===null&&(La===null?dd=La=i:La=La.next=i),fd=!0,fm||(fm=!0,DA())}function ec(i,a){if(!hm&&fd){hm=!0;do for(var c=!1,f=dd;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var E=f.suspendedLanes,A=f.pingedLanes;y=(1<<31-Me(42|i)+1)-1,y&=g&~(E&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Dv(f,y))}else y=ut,y=O(f,f===Rt?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||Q(f,y)||(c=!0,Dv(f,y));f=f.next}while(c);hm=!1}}function RA(){Mv()}function Mv(){fd=fm=!1;var i=0;Os!==0&&qA()&&(i=Os);for(var a=Ze(),c=null,f=dd;f!==null;){var g=f.next,y=Ov(f,a);y===0?(f.next=null,c===null?dd=g:c.next=g,g===null&&(La=c)):(c=f,(i!==0||(y&3)!==0)&&(fd=!0)),f=g}wn!==0&&wn!==5||ec(i),Os!==0&&(Os=0)}function Ov(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-Me(y),A=1<<E,_=g[E];_===-1?((A&c)===0||(A&f)!==0)&&(g[E]=ue(A,a)):_<=a&&(i.expiredLanes|=A),y&=~A}if(a=Rt,c=ut,c=O(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===a&&(Et===2||Et===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&We(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Q(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(f!==null&&We(f),Dn(c)){case 2:case 8:c=ye;break;case 32:c=Ne;break;case 268435456:c=Ye;break;default:c=Ne}return f=Rv.bind(null,i),c=Ee(c,f),i.callbackPriority=a,i.callbackNode=c,a}return f!==null&&f!==null&&We(f),i.callbackPriority=2,i.callbackNode=null,2}function Rv(i,a){if(wn!==0&&wn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ud()&&i.callbackNode!==c)return null;var f=ut;return f=O(i,i===Rt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(fv(i,f,a),Ov(i,Ze()),i.callbackNode!=null&&i.callbackNode===c?Rv.bind(null,i):null)}function Dv(i,a){if(ud())return null;fv(i,a,!0)}function DA(){VA(function(){(bt&6)!==0?Ee(jt,RA):Mv()})}function pm(){if(Os===0){var i=va;i===0&&(i=Jt,Jt<<=1,(Jt&261888)===0&&(Jt=256)),Os=i}return Os}function _v(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:hs(""+i)}function jv(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function _A(i,a,c,f,g){if(a==="submit"&&c&&c.stateNode===g){var y=_v((g[Pn]||null).action),E=f.submitter;E&&(a=(a=E[Pn]||null)?_v(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var A=new Cu("action","action",null,f,g);i.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Os!==0){var _=E?jv(g,E):new FormData(g);jp(c,{pending:!0,data:_,method:g.method,action:y},null,_)}}else typeof y=="function"&&(A.preventDefault(),_=E?jv(g,E):new FormData(g),jp(c,{pending:!0,data:_,method:g.method,action:y},y,_))},currentTarget:g}]})}}for(var mm=0;mm<Xh.length;mm++){var gm=Xh[mm],jA=gm.toLowerCase(),LA=gm[0].toUpperCase()+gm.slice(1);Zr(jA,"on"+LA)}Zr(db,"onAnimationEnd"),Zr(fb,"onAnimationIteration"),Zr(hb,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(XN,"onTransitionRun"),Zr(JN,"onTransitionStart"),Zr(ZN,"onTransitionCancel"),Zr(pb,"onTransitionEnd"),pe("onMouseEnter",["mouseout","mouseover"]),pe("onMouseLeave",["mouseout","mouseover"]),pe("onPointerEnter",["pointerout","pointerover"]),pe("onPointerLeave",["pointerout","pointerover"]),Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function Lv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var E=f.length-1;0<=E;E--){var A=f[E],_=A.instance,F=A.currentTarget;if(A=A.listener,_!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=F;try{y(g)}catch(ee){Au(ee)}g.currentTarget=null,y=_}else for(E=0;E<f.length;E++){if(A=f[E],_=A.instance,F=A.currentTarget,A=A.listener,_!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=F;try{y(g)}catch(ee){Au(ee)}g.currentTarget=null,y=_}}}}function lt(i,a){var c=a[yl];c===void 0&&(c=a[yl]=new Set);var f=i+"__bubble";c.has(f)||(Bv(a,i,2,!1),c.add(f))}function ym(i,a,c){var f=0;a&&(f|=4),Bv(c,i,f,a)}var hd="_reactListening"+Math.random().toString(36).slice(2);function bm(i){if(!i[hd]){i[hd]=!0,gu.forEach(function(c){c!=="selectionchange"&&(BA.has(c)||ym(c,!1,i),ym(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[hd]||(a[hd]=!0,ym("selectionchange",!1,a))}}function Bv(i,a,c,f){switch(d1(a)){case 2:var g=uk;break;case 8:g=dk;break;default:g=_m}c=g.bind(null,a,c,i),g=void 0,!Ih||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function xm(i,a,c,f,g){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var A=f.stateNode.containerInfo;if(A===g)break;if(E===4)for(E=f.return;E!==null;){var _=E.tag;if((_===3||_===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;A!==null;){if(E=Xn(A),E===null)return;if(_=E.tag,_===5||_===6||_===26||_===27){f=y=E;continue e}A=A.parentNode}}f=f.return}vu(function(){var F=y,ee=Je(c),re=[];e:{var G=mb.get(i);if(G!==void 0){var X=Cu,Oe=i;switch(i){case"keypress":if(Su(c)===0)break e;case"keydown":case"keyup":X=MN;break;case"focusin":Oe="focus",X=qh;break;case"focusout":Oe="blur",X=qh;break;case"beforeblur":case"afterblur":X=qh;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=yN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=DN;break;case db:case fb:case hb:X=vN;break;case pb:X=jN;break;case"scroll":case"scrollend":X=mN;break;case"wheel":X=BN;break;case"copy":case"cut":case"paste":X=SN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Gy;break;case"toggle":case"beforetoggle":X=IN}var qe=(a&4)!==0,At=!qe&&(i==="scroll"||i==="scrollend"),q=qe?G!==null?G+"Capture":null:G;qe=[];for(var I=F,V;I!==null;){var ne=I;if(V=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||V===null||q===null||(ne=El(I,q),ne!=null&&qe.push(nc(I,ne,V))),At)break;I=I.return}0<qe.length&&(G=new X(G,Oe,null,c,ee),re.push({event:G,listeners:qe}))}}if((a&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",X=i==="mouseout"||i==="pointerout",G&&c!==je&&(Oe=c.relatedTarget||c.fromElement)&&(Xn(Oe)||Oe[cs]))break e;if((X||G)&&(G=ee.window===ee?ee:(G=ee.ownerDocument)?G.defaultView||G.parentWindow:window,X?(Oe=c.relatedTarget||c.toElement,X=F,Oe=Oe?Xn(Oe):null,Oe!==null&&(At=o(Oe),qe=Oe.tag,Oe!==At||qe!==5&&qe!==27&&qe!==6)&&(Oe=null)):(X=null,Oe=F),X!==Oe)){if(qe=Vy,ne="onMouseLeave",q="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(qe=Gy,ne="onPointerLeave",q="onPointerEnter",I="pointer"),At=X==null?G:us(X),V=Oe==null?G:us(Oe),G=new qe(ne,I+"leave",X,c,ee),G.target=At,G.relatedTarget=V,ne=null,Xn(ee)===F&&(qe=new qe(q,I+"enter",Oe,c,ee),qe.target=V,qe.relatedTarget=At,ne=qe),At=ne,X&&Oe)t:{for(qe=zA,q=X,I=Oe,V=0,ne=q;ne;ne=qe(ne))V++;ne=0;for(var He=I;He;He=qe(He))ne++;for(;0<V-ne;)q=qe(q),V--;for(;0<ne-V;)I=qe(I),ne--;for(;V--;){if(q===I||I!==null&&q===I.alternate){qe=q;break t}q=qe(q),I=qe(I)}qe=null}else qe=null;X!==null&&zv(re,G,X,qe,!1),Oe!==null&&At!==null&&zv(re,At,Oe,qe,!0)}}e:{if(G=F?us(F):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var gt=eb;else if(Jy(G))if(tb)gt=WN;else{gt=GN;var Le=FN}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&fs(F.elementType)&&(gt=eb):gt=KN;if(gt&&(gt=gt(i,F))){Zy(re,gt,c,ee);break e}Le&&Le(i,G,F),i==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&ca(G,"number",G.value)}switch(Le=F?us(F):window,i){case"focusin":(Jy(Le)||Le.contentEditable==="true")&&(fa=Le,Wh=F,Rl=null);break;case"focusout":Rl=Wh=fa=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,cb(re,c,ee);break;case"selectionchange":if(YN)break;case"keydown":case"keyup":cb(re,c,ee)}var tt;if(Vh)e:{switch(i){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else da?Yy(i,c)&&(dt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(dt="onCompositionStart");dt&&(Ky&&c.locale!=="ko"&&(da||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&da&&(tt=qy()):(ps=ee,Hh="value"in ps?ps.value:ps.textContent,da=!0)),Le=pd(F,dt),0<Le.length&&(dt=new Fy(dt,i,null,c,ee),re.push({event:dt,listeners:Le}),tt?dt.data=tt:(tt=Xy(c),tt!==null&&(dt.data=tt)))),(tt=UN?$N(i,c):qN(i,c))&&(dt=pd(F,"onBeforeInput"),0<dt.length&&(Le=new Fy("onBeforeInput","beforeinput",null,c,ee),re.push({event:Le,listeners:dt}),Le.data=tt)),_A(re,i,F,c,ee)}Lv(re,a)})}function nc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function pd(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=El(i,c),g!=null&&f.unshift(nc(i,g,y)),g=El(i,a),g!=null&&f.push(nc(i,g,y))),i.tag===3)return f;i=i.return}return[]}function zA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zv(i,a,c,f,g){for(var y=a._reactName,E=[];c!==null&&c!==f;){var A=c,_=A.alternate,F=A.stateNode;if(A=A.tag,_!==null&&_===f)break;A!==5&&A!==26&&A!==27||F===null||(_=F,g?(F=El(c,y),F!=null&&E.unshift(nc(c,F,_))):g||(F=El(c,y),F!=null&&E.push(nc(c,F,_)))),c=c.return}E.length!==0&&i.push({event:a,listeners:E})}var IA=/\r\n?/g,HA=/\u0000|\uFFFD/g;function Iv(i){return(typeof i=="string"?i:""+i).replace(IA,`
`).replace(HA,"")}function Hv(i,a){return a=Iv(a),Iv(i)===a}function Nt(i,a,c,f,g,y){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Ge(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Ge(i,""+f);break;case"className":br(i,"class",f);break;case"tabIndex":br(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":br(i,c,f);break;case"style":St(i,f,y);break;case"data":if(a!=="object"){br(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=hs(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&Nt(i,a,"name",g.name,g,null),Nt(i,a,"formEncType",g.formEncType,g,null),Nt(i,a,"formMethod",g.formMethod,g,null),Nt(i,a,"formTarget",g.formTarget,g,null)):(Nt(i,a,"encType",g.encType,g,null),Nt(i,a,"method",g.method,g,null),Nt(i,a,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=hs(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=xe);break;case"onScroll":f!=null&&lt("scroll",i);break;case"onScrollEnd":f!=null&&lt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=hs(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":lt("beforetoggle",i),lt("toggle",i),Vn(i,"popover",f);break;case"xlinkActuate":nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":nr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":nr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":nr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":nr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Vn(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ri.get(c)||c,Vn(i,c,f))}}function vm(i,a,c,f,g,y){switch(c){case"style":St(i,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof f=="string"?Ge(i,f):(typeof f=="number"||typeof f=="bigint")&&Ge(i,""+f);break;case"onScroll":f!=null&&lt("scroll",i);break;case"onScrollEnd":f!=null&&lt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=xe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=i[Pn]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(a,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):Vn(i,c,f)}}}function zn(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",i),lt("load",i);var f=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(i,a,y,E,c,null)}}g&&Nt(i,a,"srcSet",c.srcSet,c,null),f&&Nt(i,a,"src",c.src,c,null);return;case"input":lt("invalid",i);var A=y=E=g=null,_=null,F=null;for(f in c)if(c.hasOwnProperty(f)){var ee=c[f];if(ee!=null)switch(f){case"name":g=ee;break;case"type":E=ee;break;case"checked":_=ee;break;case"defaultChecked":F=ee;break;case"value":y=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:Nt(i,a,f,ee,c,null)}}uo(i,y,A,_,F,E,g,!1);return;case"select":lt("invalid",i),f=E=y=null;for(g in c)if(c.hasOwnProperty(g)&&(A=c[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":E=A;break;case"multiple":f=A;default:Nt(i,a,g,A,c,null)}a=y,c=E,i.multiple=!!f,a!=null?_n(i,!!f,a,!1):c!=null&&_n(i,!!f,c,!0);return;case"textarea":lt("invalid",i),y=g=f=null;for(E in c)if(c.hasOwnProperty(E)&&(A=c[E],A!=null))switch(E){case"value":f=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Nt(i,a,E,A,c,null)}ua(i,f,g,y);return;case"option":for(_ in c)if(c.hasOwnProperty(_)&&(f=c[_],f!=null))switch(_){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Nt(i,a,_,f,c,null)}return;case"dialog":lt("beforetoggle",i),lt("toggle",i),lt("cancel",i),lt("close",i);break;case"iframe":case"object":lt("load",i);break;case"video":case"audio":for(f=0;f<tc.length;f++)lt(tc[f],i);break;case"image":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"embed":case"source":case"link":lt("error",i),lt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in c)if(c.hasOwnProperty(F)&&(f=c[F],f!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(i,a,F,f,c,null)}return;default:if(fs(a)){for(ee in c)c.hasOwnProperty(ee)&&(f=c[ee],f!==void 0&&vm(i,a,ee,f,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(f=c[A],f!=null&&Nt(i,a,A,f,c,null))}function UA(i,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,A=null,_=null,F=null,ee=null;for(X in c){var re=c[X];if(c.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":_=re;default:f.hasOwnProperty(X)||Nt(i,a,X,null,f,re)}}for(var G in f){var X=f[G];if(re=c[G],f.hasOwnProperty(G)&&(X!=null||re!=null))switch(G){case"type":y=X;break;case"name":g=X;break;case"checked":F=X;break;case"defaultChecked":ee=X;break;case"value":E=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:X!==re&&Nt(i,a,G,X,f,re)}}vl(i,E,A,_,F,ee,y,g);return;case"select":X=E=A=G=null;for(y in c)if(_=c[y],c.hasOwnProperty(y)&&_!=null)switch(y){case"value":break;case"multiple":X=_;default:f.hasOwnProperty(y)||Nt(i,a,y,null,f,_)}for(g in f)if(y=f[g],_=c[g],f.hasOwnProperty(g)&&(y!=null||_!=null))switch(g){case"value":G=y;break;case"defaultValue":A=y;break;case"multiple":E=y;default:y!==_&&Nt(i,a,g,y,f,_)}a=A,c=E,f=X,G!=null?_n(i,!!c,G,!1):!!f!=!!c&&(a!=null?_n(i,!!c,a,!0):_n(i,!!c,c?[]:"",!1));return;case"textarea":X=G=null;for(A in c)if(g=c[A],c.hasOwnProperty(A)&&g!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Nt(i,a,A,null,f,g)}for(E in f)if(g=f[E],y=c[E],f.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":G=g;break;case"defaultValue":X=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&Nt(i,a,E,g,f,y)}bu(i,G,X);return;case"option":for(var Oe in c)if(G=c[Oe],c.hasOwnProperty(Oe)&&G!=null&&!f.hasOwnProperty(Oe))switch(Oe){case"selected":i.selected=!1;break;default:Nt(i,a,Oe,null,f,G)}for(_ in f)if(G=f[_],X=c[_],f.hasOwnProperty(_)&&G!==X&&(G!=null||X!=null))switch(_){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Nt(i,a,_,G,f,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in c)G=c[qe],c.hasOwnProperty(qe)&&G!=null&&!f.hasOwnProperty(qe)&&Nt(i,a,qe,null,f,G);for(F in f)if(G=f[F],X=c[F],f.hasOwnProperty(F)&&G!==X&&(G!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,a));break;default:Nt(i,a,F,G,f,X)}return;default:if(fs(a)){for(var At in c)G=c[At],c.hasOwnProperty(At)&&G!==void 0&&!f.hasOwnProperty(At)&&vm(i,a,At,void 0,f,G);for(ee in f)G=f[ee],X=c[ee],!f.hasOwnProperty(ee)||G===X||G===void 0&&X===void 0||vm(i,a,ee,G,f,X);return}}for(var q in c)G=c[q],c.hasOwnProperty(q)&&G!=null&&!f.hasOwnProperty(q)&&Nt(i,a,q,null,f,G);for(re in f)G=f[re],X=c[re],!f.hasOwnProperty(re)||G===X||G==null&&X==null||Nt(i,a,re,G,f,X)}function Uv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $A(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],y=g.transferSize,E=g.initiatorType,A=g.duration;if(y&&A&&Uv(E)){for(E=0,A=g.responseEnd,f+=1;f<c.length;f++){var _=c[f],F=_.startTime;if(F>A)break;var ee=_.transferSize,re=_.initiatorType;ee&&Uv(re)&&(_=_.responseEnd,E+=ee*(_<A?1:(A-F)/(_-F)))}if(--f,a+=8*(y+E)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var wm=null,Sm=null;function md(i){return i.nodeType===9?i:i.ownerDocument}function $v(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Em(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cm=null;function qA(){var i=window.event;return i&&i.type==="popstate"?i===Cm?!1:(Cm=i,!0):(Cm=null,!1)}var Pv=typeof setTimeout=="function"?setTimeout:void 0,PA=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(i){return Vv.resolve(null).then(i).catch(FA)}:Pv;function FA(i){setTimeout(function(){throw i})}function Rs(i){return i==="head"}function Fv(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(g),Ha(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")rc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,rc(c);for(var y=c.firstChild;y;){var E=y.nextSibling,A=y.nodeName;y[lo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=E}}else c==="body"&&rc(i.ownerDocument.body);c=g}while(c);Ha(a)}function Gv(i,a){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Tm(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Tm(c),bl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function GA(i,a,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[lo])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Hr(i.nextSibling),i===null)break}return null}function KA(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Hr(i.nextSibling),i===null))return null;return i}function Kv(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hr(i.nextSibling),i===null))return null;return i}function Nm(i){return i.data==="$?"||i.data==="$~"}function Am(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function WA(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Hr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var km=null;function Wv(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return Hr(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function Qv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function Yv(i,a,c){switch(a=md(c),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function rc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);bl(i)}var Ur=new Map,Xv=new Set;function gd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=D.d;D.d={f:QA,r:YA,D:XA,C:JA,L:ZA,m:ek,X:nk,S:tk,M:rk};function QA(){var i=Ki.f(),a=ad();return i||a}function YA(i){var a=Mi(i);a!==null&&a.tag===5&&a.type==="form"?px(a):Ki.r(i)}var Ba=typeof document>"u"?null:document;function Jv(i,a,c){var f=Ba;if(f&&typeof a=="string"&&a){var g=rr(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Xv.has(g)||(Xv.add(g),i={rel:i,crossOrigin:c,href:a},f.querySelector(g)===null&&(a=f.createElement("link"),zn(a,"link",i),fn(a),f.head.appendChild(a)))}}function XA(i){Ki.D(i),Jv("dns-prefetch",i,null)}function JA(i,a){Ki.C(i,a),Jv("preconnect",i,a)}function ZA(i,a,c){Ki.L(i,a,c);var f=Ba;if(f&&i&&a){var g='link[rel="preload"][as="'+rr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+rr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+rr(c.imageSizes)+'"]')):g+='[href="'+rr(i)+'"]';var y=g;switch(a){case"style":y=za(i);break;case"script":y=Ia(i)}Ur.has(y)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Ur.set(y,i),f.querySelector(g)!==null||a==="style"&&f.querySelector(ic(y))||a==="script"&&f.querySelector(sc(y))||(a=f.createElement("link"),zn(a,"link",i),fn(a),f.head.appendChild(a)))}}function ek(i,a){Ki.m(i,a);var c=Ba;if(c&&i){var f=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+rr(f)+'"][href="'+rr(i)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ia(i)}if(!Ur.has(y)&&(i=m({rel:"modulepreload",href:i},a),Ur.set(y,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(sc(y)))return}f=c.createElement("link"),zn(f,"link",i),fn(f),c.head.appendChild(f)}}}function tk(i,a,c){Ki.S(i,a,c);var f=Ba;if(f&&i){var g=ds(f).hoistableStyles,y=za(i);a=a||"default";var E=g.get(y);if(!E){var A={loading:0,preload:null};if(E=f.querySelector(ic(y)))A.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Ur.get(y))&&Mm(i,c);var _=E=f.createElement("link");fn(_),zn(_,"link",i),_._p=new Promise(function(F,ee){_.onload=F,_.onerror=ee}),_.addEventListener("load",function(){A.loading|=1}),_.addEventListener("error",function(){A.loading|=2}),A.loading|=4,yd(E,a,f)}E={type:"stylesheet",instance:E,count:1,state:A},g.set(y,E)}}}function nk(i,a){Ki.X(i,a);var c=Ba;if(c&&i){var f=ds(c).hoistableScripts,g=Ia(i),y=f.get(g);y||(y=c.querySelector(sc(g)),y||(i=m({src:i,async:!0},a),(a=Ur.get(g))&&Om(i,a),y=c.createElement("script"),fn(y),zn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function rk(i,a){Ki.M(i,a);var c=Ba;if(c&&i){var f=ds(c).hoistableScripts,g=Ia(i),y=f.get(g);y||(y=c.querySelector(sc(g)),y||(i=m({src:i,async:!0,type:"module"},a),(a=Ur.get(g))&&Om(i,a),y=c.createElement("script"),fn(y),zn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function Zv(i,a,c,f){var g=(g=Z.current)?gd(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=za(c.href),c=ds(g).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=za(c.href);var y=ds(g).hoistableStyles,E=y.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=g.querySelector(ic(i)))&&!y._p&&(E.instance=y,E.state.loading=5),Ur.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ur.set(i,c),y||ik(g,i,c,E.state))),a&&f===null)throw Error(r(528,""));return E}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ia(c),c=ds(g).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function za(i){return'href="'+rr(i)+'"'}function ic(i){return'link[rel="stylesheet"]['+i+"]"}function e1(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function ik(i,a,c,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),zn(a,"link",c),fn(a),i.head.appendChild(a))}function Ia(i){return'[src="'+rr(i)+'"]'}function sc(i){return"script[async]"+i}function t1(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+rr(c.href)+'"]');if(f)return a.instance=f,fn(f),f;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),fn(f),zn(f,"style",g),yd(f,c.precedence,i),a.instance=f;case"stylesheet":g=za(c.href);var y=i.querySelector(ic(g));if(y)return a.state.loading|=4,a.instance=y,fn(y),y;f=e1(c),(g=Ur.get(g))&&Mm(f,g),y=(i.ownerDocument||i).createElement("link"),fn(y);var E=y;return E._p=new Promise(function(A,_){E.onload=A,E.onerror=_}),zn(y,"link",f),a.state.loading|=4,yd(y,c.precedence,i),a.instance=y;case"script":return y=Ia(c.src),(g=i.querySelector(sc(y)))?(a.instance=g,fn(g),g):(f=c,(g=Ur.get(y))&&(f=m({},c),Om(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),fn(g),zn(g,"link",f),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,yd(f,c.precedence,i));return a.instance}function yd(i,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,E=0;E<f.length;E++){var A=f[E];if(A.dataset.precedence===a)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Mm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Om(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var bd=null;function n1(i,a,c){if(bd===null){var f=new Map,g=bd=new Map;g.set(c,f)}else g=bd,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var y=c[g];if(!(y[lo]||y[sn]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=i+E;var A=f.get(E);A?A.push(y):f.set(E,[y])}}return f}function r1(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function sk(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function i1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function ok(i,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=za(f.href),y=a.querySelector(ic(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=xd.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=y,fn(y);return}y=a.ownerDocument||a,f=e1(f),(g=Ur.get(g))&&Mm(f,g),y=y.createElement("link"),fn(y);var E=y;E._p=new Promise(function(A,_){E.onload=A,E.onerror=_}),zn(y,"link",f),c.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=xd.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Rm=0;function ak(i,a){return i.stylesheets&&i.count===0&&wd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&wd(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Rm===0&&(Rm=62500*$A());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&wd(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Rm?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var vd=null;function wd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,vd=new Map,a.forEach(lk,i),vd=null,xd.call(i))}function lk(i,a){if(!(a.state.loading&4)){var c=vd.get(i);if(c)var f=c.get(null);else{c=new Map,vd.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),f=E)}f&&c.set(null,f)}g=a.instance,E=g.getAttribute("data-precedence"),y=c.get(E)||f,y===f&&c.set(null,g),c.set(E,g),this.count++,f=xd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var oc={$$typeof:R,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function ck(i,a,c,f,g,y,E,A,_){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.hiddenUpdates=pt(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function s1(i,a,c,f,g,y,E,A,_,F,ee,re){return i=new ck(i,a,c,E,_,F,ee,re,A),a=1,y===!0&&(a|=24),y=wr(3,null,null,a),i.current=y,y.stateNode=i,a=up(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:a},pp(y),i}function o1(i){return i?(i=ma,i):ma}function a1(i,a,c,f,g,y){g=o1(g),f.context===null?f.context=g:f.pendingContext=g,f=vs(a),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=ws(i,f,a),c!==null&&(cr(c,i,a),Il(c,i,a))}function l1(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function Dm(i,a){l1(i,a),(i=i.alternate)&&l1(i,a)}function c1(i){if(i.tag===13||i.tag===31){var a=mo(i,67108864);a!==null&&cr(a,i,67108864),Dm(i,67108864)}}function u1(i){if(i.tag===13||i.tag===31){var a=Nr();a=Ot(a);var c=mo(i,a);c!==null&&cr(c,i,a),Dm(i,a)}}var Sd=!0;function uk(i,a,c,f){var g=z.T;z.T=null;var y=D.p;try{D.p=2,_m(i,a,c,f)}finally{D.p=y,z.T=g}}function dk(i,a,c,f){var g=z.T;z.T=null;var y=D.p;try{D.p=8,_m(i,a,c,f)}finally{D.p=y,z.T=g}}function _m(i,a,c,f){if(Sd){var g=jm(f);if(g===null)xm(i,a,f,Ed,c),f1(i,f);else if(hk(g,i,a,c,f))f.stopPropagation();else if(f1(i,f),a&4&&-1<fk.indexOf(i)){for(;g!==null;){var y=Mi(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Ht(y.pendingLanes);if(E!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var _=1<<31-Me(E);A.entanglements[1]|=_,E&=~_}di(y),(bt&6)===0&&(sd=Ze()+500,ec(0))}}break;case 31:case 13:A=mo(y,2),A!==null&&cr(A,y,2),ad(),Dm(y,2)}if(y=jm(f),y===null&&xm(i,a,f,Ed,c),y===g)break;g=y}g!==null&&f.stopPropagation()}else xm(i,a,f,null,c)}}function jm(i){return i=Je(i),Lm(i)}var Ed=null;function Lm(i){if(Ed=null,i=Xn(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Ed=i,null}function d1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vn()){case jt:return 2;case ye:return 8;case Ne:case Ke:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var Bm=!1,Ds=null,_s=null,js=null,ac=new Map,lc=new Map,Ls=[],fk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function f1(i,a){switch(i){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":ac.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(a.pointerId)}}function cc(i,a,c,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},a!==null&&(a=Mi(a),a!==null&&c1(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function hk(i,a,c,f,g){switch(a){case"focusin":return Ds=cc(Ds,i,a,c,f,g),!0;case"dragenter":return _s=cc(_s,i,a,c,f,g),!0;case"mouseover":return js=cc(js,i,a,c,f,g),!0;case"pointerover":var y=g.pointerId;return ac.set(y,cc(ac.get(y)||null,i,a,c,f,g)),!0;case"gotpointercapture":return y=g.pointerId,lc.set(y,cc(lc.get(y)||null,i,a,c,f,g)),!0}return!1}function h1(i){var a=Xn(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,sa(i.priority,function(){u1(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,sa(i.priority,function(){u1(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=jm(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);je=f,c.target.dispatchEvent(f),je=null}else return a=Mi(c),a!==null&&c1(a),i.blockedOn=c,!1;a.shift()}return!0}function p1(i,a,c){Cd(i)&&c.delete(a)}function pk(){Bm=!1,Ds!==null&&Cd(Ds)&&(Ds=null),_s!==null&&Cd(_s)&&(_s=null),js!==null&&Cd(js)&&(js=null),ac.forEach(p1),lc.forEach(p1)}function Td(i,a){i.blockedOn===a&&(i.blockedOn=null,Bm||(Bm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,pk)))}var Nd=null;function m1(i){Nd!==i&&(Nd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nd===i&&(Nd=null);for(var a=0;a<i.length;a+=3){var c=i[a],f=i[a+1],g=i[a+2];if(typeof f!="function"){if(Lm(f||c)===null)continue;break}var y=Mi(c);y!==null&&(i.splice(a,3),a-=3,jp(y,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function Ha(i){function a(_){return Td(_,i)}Ds!==null&&Td(Ds,i),_s!==null&&Td(_s,i),js!==null&&Td(js,i),ac.forEach(a),lc.forEach(a);for(var c=0;c<Ls.length;c++){var f=Ls[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ls.length&&(c=Ls[0],c.blockedOn===null);)h1(c),c.blockedOn===null&&Ls.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],y=c[f+1],E=g[Pn]||null;if(typeof y=="function")E||m1(c);else if(E){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Pn]||null)A=E.formAction;else if(Lm(g)!==null)continue}else A=E.action;typeof A=="function"?c[f+1]=A:(c.splice(f,3),f-=3),m1(c)}}}function g1(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function zm(i){this._internalRoot=i}Ad.prototype.render=zm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=Nr();a1(c,f,i,a,null,null)},Ad.prototype.unmount=zm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;a1(i.current,2,null,i,null,null),ad(),a[cs]=null}};function Ad(i){this._internalRoot=i}Ad.prototype.unstable_scheduleHydration=function(i){if(i){var a=ao();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Ls.length&&a!==0&&a<Ls[c].priority;c++);Ls.splice(c,0,i),c===0&&h1(i)}};var y1=e.version;if(y1!=="19.2.0")throw Error(r(527,y1,"19.2.0"));D.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var mk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{gr=kd.inject(mk),Y=kd}catch{}}return dc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var c=!1,f="",g=Cx,y=Tx,E=Nx;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=s1(i,1,!1,null,null,c,f,null,g,y,E,g1),i[cs]=a.current,bm(i),new zm(a)},dc.hydrateRoot=function(i,a,c){if(!s(i))throw Error(r(299));var f=!1,g="",y=Cx,E=Tx,A=Nx,_=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(_=c.formState)),a=s1(i,1,!0,a,c??null,f,g,_,y,E,A,g1),a.context=o1(null),c=a.current,f=Nr(),f=Ot(f),g=vs(f),g.callback=null,ws(c,g,f),c=f,a.current.lanes=c,Fe(a,c),di(a),i[cs]=a.current,bm(i),new Ad(a)},dc.version="19.2.0",dc}var A1;function Ck(){if(A1)return Um.exports;A1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Um.exports=Ek(),Um.exports}var Tk=Ck();const Oo="1.29.1";var bi=[],Vr=[],Nk=Uint8Array,Vm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ua=0,Ak=Vm.length;Ua<Ak;++Ua)bi[Ua]=Vm[Ua],Vr[Vm.charCodeAt(Ua)]=Ua;Vr[45]=62;Vr[95]=63;function kk(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Mk(n,e,t){return(e+t)*3/4-t}function zc(n){var e,t=kk(n),r=t[0],s=t[1],o=new Nk(Mk(n,r,s)),l=0,u=s>0?r-4:r,d;for(d=0;d<u;d+=4)e=Vr[n.charCodeAt(d)]<<18|Vr[n.charCodeAt(d+1)]<<12|Vr[n.charCodeAt(d+2)]<<6|Vr[n.charCodeAt(d+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=e&255;return s===2&&(e=Vr[n.charCodeAt(d)]<<2|Vr[n.charCodeAt(d+1)]>>4,o[l++]=e&255),s===1&&(e=Vr[n.charCodeAt(d)]<<10|Vr[n.charCodeAt(d+1)]<<4|Vr[n.charCodeAt(d+2)]>>2,o[l++]=e>>8&255,o[l++]=e&255),o}function Ok(n){return bi[n>>18&63]+bi[n>>12&63]+bi[n>>6&63]+bi[n&63]}function Rk(n,e,t){for(var r,s=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),s.push(Ok(r));return s.join("")}function Ic(n){for(var e,t=n.length,r=t%3,s=[],o=16383,l=0,u=t-r;l<u;l+=o)s.push(Rk(n,l,l+o>u?u:l+o));return r===1?(e=n[t-1],s.push(bi[e>>2]+bi[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],s.push(bi[e>>10]+bi[e>>4&63]+bi[e<<2&63]+"=")),s.join("")}function dr(n){if(n===void 0)return{};if(!xE(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function bE(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function xE(n){var s;const e=typeof n=="object",t=Object.getPrototypeOf(n),r=t===null||t===Object.prototype||((s=t==null?void 0:t.constructor)==null?void 0:s.name)==="Object";return e&&r}const vE=!0,el=BigInt("-9223372036854775808"),D0=BigInt("9223372036854775807"),zg=BigInt("0"),Dk=BigInt("8"),_k=BigInt("256");function wE(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function jk(n){n<zg&&(n-=el+el);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let r=0;for(const s of e.match(/.{2}/g).reverse())t.set([parseInt(s,16)],r++),n>>=Dk;return Ic(t)}function Lk(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=zg,r=zg;for(const s of e)t+=BigInt(s)*_k**r,r++;return t>D0&&(t+=el+el),t}function Bk(n){if(n<el||D0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),Ic(new Uint8Array(e))}function zk(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const Ik=DataView.prototype.setBigInt64?Bk:jk,Hk=DataView.prototype.getBigInt64?zk:Lk,k1=1024;function SE(n){if(n.length>k1)throw new Error(`Field name ${n} exceeds maximum field name length ${k1}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function ri(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(r=>ri(r));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return zc(n.$bytes).buffer}if(r==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return Hk(n.$integer)}if(r==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const s=zc(n.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const l=new DataView(s.buffer).getFloat64(0,vE);if(!wE(l))throw new Error(`Float ${l} should be encoded as a number`);return l}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[r,s]of Object.entries(n))SE(r),t[r]=ri(s);return t}const M1=16384;function wc(n){const e=JSON.stringify(n,(t,r)=>r===void 0?"undefined":typeof r=="bigint"?`${r.toString()}n`:r);if(e.length>M1){const t="[...truncated]";let r=M1-t.length;const s=e.codePointAt(r-1);return s!==void 0&&s>65535&&(r-=1),e.substring(0,r)+t}return e}function Ig(n,e,t,r){var l;if(n===void 0){const u=t&&` (present at path ${t} in original object ${wc(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<el||D0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:Ik(n)}}if(typeof n=="number")if(wE(n)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,n,vE),{$float:Ic(new Uint8Array(u))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:Ic(new Uint8Array(n))};if(Array.isArray(n))return n.map((u,d)=>Ig(u,e,t+`[${d}]`));if(n instanceof Set)throw new Error(Fm(t,"Set",[...n],e));if(n instanceof Map)throw new Error(Fm(t,"Map",[...n],e));if(!xE(n)){const u=(l=n==null?void 0:n.constructor)==null?void 0:l.name,d=u?`${u} `:"";throw new Error(Fm(t,d,n,e))}const s={},o=Object.entries(n);o.sort(([u,d],[h,p])=>u===h?0:u<h?-1:1);for(const[u,d]of o)d!==void 0&&(SE(u),s[u]=Ig(d,e,t+`.${u}`));return s}function Fm(n,e,t,r){return n?`${e}${wc(t)} is not a supported Convex type (present at path ${n} in original object ${wc(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${wc(t)} is not a supported Convex type.`}function Kr(n){return Ig(n,n,"")}var Uk=Object.defineProperty,$k=(n,e,t)=>e in n?Uk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Gm=(n,e,t)=>$k(n,typeof e!="symbol"?e+"":e,t),O1,R1;const qk=Symbol.for("ConvexError");class _o extends(R1=Error,O1=qk,R1){constructor(e){super(typeof e=="string"?e:wc(e)),Gm(this,"name","ConvexError"),Gm(this,"data"),Gm(this,O1,!0),this.data=e}}const EE=()=>Array.from({length:4},()=>0);EE();EE();var Pk=Object.defineProperty,Vk=(n,e,t)=>e in n?Pk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D1=(n,e,t)=>Vk(n,typeof e!="symbol"?e+"":e,t);const Fk="color:rgb(0, 145, 255)";function CE(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class TE{constructor(e){D1(this,"_onLogLineFuncs"),D1(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[t]!==void 0;r++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function _0(n){const e=new TE(n);return e.addLogLineListener((t,...r)=>{switch(t){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function j0(n){return new TE(n)}function Gs(n,e,t,r,s){const o=CE(t);if(typeof s=="object"&&(s=`ConvexError ${JSON.stringify(s.errorData,null,2)}`),e==="info"){const l=s.match(/^\[.*?\] /);if(l===null){n.error(`[CONVEX ${o}(${r})] Could not parse console.log`);return}const u=s.slice(1,l[0].length-2),d=s.slice(l[0].length);n.log(`%c[CONVEX ${o}(${r})] [${u}]`,Fk,d)}else n.error(`[CONVEX ${o}(${r})] ${s}`)}function Gk(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function Wa(n,e,t){return`[CONVEX ${CE(n)}(${e})] ${t.errorMessage}
  Called by client`}function Hg(n,e){return e.data=n.errorData,e}function gf(n){const e=n.split(":");let t,r;return e.length===1?(t=e[0],r="default"):(t=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function Io(n,e){return JSON.stringify({udfPath:gf(n),args:Kr(e)})}var Kk=Object.defineProperty,Wk=(n,e,t)=>e in n?Kk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fi=(n,e,t)=>Wk(n,typeof e!="symbol"?e+"":e,t);class Qk{constructor(){fi(this,"nextQueryId"),fi(this,"querySetVersion"),fi(this,"querySet"),fi(this,"queryIdToToken"),fi(this,"identityVersion"),fi(this,"auth"),fi(this,"outstandingQueriesOlderThanRestart"),fi(this,"outstandingAuthOlderThanRestart"),fi(this,"paused"),fi(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,s){const o=gf(e),l=Io(o,t),u=this.querySet.get(l);if(u!==void 0)return u.numSubscribers+=1,{queryToken:l,modification:null,unsubscribe:()=>this.removeSubscriber(l)};{const d=this.nextQueryId++,h={id:d,canonicalizedUdfPath:o,args:t,numSubscribers:1,journal:r,componentPath:s};this.querySet.set(l,h),this.queryIdToToken.set(d,l);const p=this.querySetVersion,m=this.querySetVersion+1,b={type:"Add",queryId:d,udfPath:o,args:[Kr(t)],journal:r,componentPath:s};return this.paused?this.pendingQuerySetModifications.set(d,b):this.querySetVersion=m,{queryToken:l,modification:{type:"ModifyQuerySet",baseVersion:p,newVersion:m,modifications:[b]},unsubscribe:()=>this.removeSubscriber(l)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const r=t.journal;if(r!==void 0){const s=this.queryIdToToken.get(t.queryId);s!==void 0&&(this.querySet.get(s).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const r=gf(e),s=Io(r,t),o=this.querySet.get(s);return o!==void 0?o.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}getAuth(){return this.auth}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;const s=this.identityVersion;return this.paused||(this.identityVersion=s+1),{type:"Authenticate",baseVersion:s,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var t;return((t=this.auth)==null?void 0:t.value)!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var t;return(t=this.querySet.get(e))==null?void 0:t.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const o of this.querySet.values()){const l={type:"Add",queryId:o.id,udfPath:o.canonicalizedUdfPath,args:[Kr(o.args)],journal:o.journal,componentPath:o.componentPath};t.push(l),e.has(o.id)||this.outstandingQueriesOlderThanRestart.add(o.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const s={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,s]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const r=this.querySetVersion,s=this.querySetVersion+1,o={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,o):this.querySetVersion=s,{type:"ModifyQuerySet",baseVersion:r,newVersion:s,modifications:[o]}}}}var Yk=Object.defineProperty,Xk=(n,e,t)=>e in n?Yk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Md=(n,e,t)=>Xk(n,typeof e!="symbol"?e+"":e,t);class Jk{constructor(e,t){this.logger=e,this.markConnectionStateDirty=t,Md(this,"inflightRequests"),Md(this,"requestsOlderThanRestart"),Md(this,"inflightMutationsCount",0),Md(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){const r=new Promise(s=>{const o=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:o,requestedAt:new Date,onResult:s}}),e.type==="Mutation"?this.inflightMutationsCount++:e.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),r}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const r=t.message.type==="Mutation"?"mutation":"action",s=t.message.udfPath;for(const d of e.logLines)Gs(this.logger,"info",r,s,d);const o=t.status;let l,u;if(e.success)l={success:!0,logLines:e.logLines,value:ri(e.result)},u=()=>o.onResult(l);else{const d=e.result,{errorData:h}=e;Gs(this.logger,"error",r,s,d),l={success:!1,errorMessage:d,errorData:h!==void 0?ri(h):void 0,logLines:e.logLines},u=()=>o.onResult(l)}return e.type==="ActionResponse"||!e.success?(u(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),t.message.type==="Action"?this.inflightActionsCount--:t.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:e.requestId,result:l}):(t.status={status:"Completed",result:l,ts:e.ts,onResolve:u},null)}removeCompleted(e){const t=new Map;for(const[r,s]of this.inflightRequests.entries()){const o=s.status;o.status==="Completed"&&o.ts.lessThanOrEqual(e)&&(o.onResolve(),t.set(r,o.result),s.message.type==="Mutation"?this.inflightMutationsCount--:s.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t.size>0&&this.markConnectionStateDirty(),t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else if(r.message.type==="Action"){if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),this.inflightActionsCount--,r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const Hc=Symbol.for("functionName"),NE=Symbol.for("toReferencePath");function Zk(n){return n[NE]??null}function eM(n){return n.startsWith("function://")}function tM(n){let e;if(typeof n=="string")eM(n)?e={functionHandle:n}:e={name:n};else if(n[Hc])e={name:n[Hc]};else{const t=Zk(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function Nn(n){const e=tM(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[Hc];if(!t)throw new Error(`${n} is not a functionReference`);return t}function L0(n){return{[Hc]:n}}function AE(n=[]){const e={get(t,r){if(typeof r=="string"){const s=[...n,r];return AE(s)}else if(r===Hc){if(n.length<2){const l=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${l}\``)}const s=n.slice(0,-1).join("/"),o=n[n.length-1];return o==="default"?s:s+":"+o}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const nM=AE();var rM=Object.defineProperty,iM=(n,e,t)=>e in n?rM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yf=(n,e,t)=>iM(n,typeof e!="symbol"?e+"":e,t);class Uc{constructor(e){yf(this,"queryResults"),yf(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const r=dr(t[0]),s=Nn(e),o=this.queryResults.get(Io(s,r));if(o!==void 0)return Uc.queryValue(o.result)}getAllQueries(e){const t=[],r=Nn(e);for(const s of this.queryResults.values())s.udfPath===gf(r)&&t.push({args:s.args,value:Uc.queryValue(s.result)});return t}setQuery(e,t,r){const s=dr(t),o=Nn(e),l=Io(o,s);let u;r===void 0?u=void 0:u={success:!0,value:r,logLines:[]};const d={udfPath:o,args:s,result:u};this.queryResults.set(l,d),this.modifiedQueries.push(l)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class sM{constructor(){yf(this,"queryResults"),yf(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(l=>!t.has(l.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const s=new Uc(this.queryResults);for(const l of this.optimisticUpdates)l.update(s);const o=[];for(const[l,u]of this.queryResults){const d=r.get(l);(d===void 0||d.result!==u.result)&&o.push(l)}return o}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const r=new Uc(this.queryResults);return e(r),r.modifiedQueries}rawQueryResult(e){return this.queryResults.get(e)}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const r=t.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?Hg(r,new _o(Wa("query",t.udfPath,r))):new Error(Wa("query",t.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const t=this.queryResults.get(e);return(r=t==null?void 0:t.result)==null?void 0:r.logLines}}var oM=Object.defineProperty,aM=(n,e,t)=>e in n?oM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Km=(n,e,t)=>aM(n,typeof e!="symbol"?e+"":e,t);class Ar{constructor(e,t){Km(this,"low"),Km(this,"high"),Km(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new Ar(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?_1:e>=lM?cM:new Ar(e%Sc|0,e/Sc|0)}toString(){return(BigInt(this.high)*BigInt(Sc)+BigInt(this.low)).toString()}equals(e){return Ar.isLong(e)||(e=Ar.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return Ar.isLong(e)||(e=Ar.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?Ar.fromNumber(e):new Ar(e.low,e.high)}}const _1=new Ar(0,0),j1=65536,Sc=j1*j1,lM=Sc*Sc,cM=new Ar(-1,-1);var uM=Object.defineProperty,dM=(n,e,t)=>e in n?uM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Od=(n,e,t)=>dM(n,typeof e!="symbol"?e+"":e,t);class L1{constructor(e,t){Od(this,"version"),Od(this,"remoteQuerySet"),Od(this,"queryPath"),Od(this,"logger"),this.version={querySet:0,ts:Ar.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}:${t.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Gs(this.logger,"info","query",s,l);const o=ri(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:o,logLines:r.logLines});break}case"QueryFailed":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Gs(this.logger,"info","query",s,l);const{errorData:o}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:o!==void 0?ri(o):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Wm(n){const e=zc(n);return Ar.fromBytesLE(Array.from(e))}function fM(n){const e=new Uint8Array(n.toBytesLE());return Ic(e)}function B1(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Wm(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Wm(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Wm(n.endVersion.ts)}}}}function hM(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:fM(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var pM=Object.defineProperty,mM=(n,e,t)=>e in n?pM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,In=(n,e,t)=>mM(n,typeof e!="symbol"?e+"":e,t);const gM=1e3,yM=1001,bM=1005,xM=4040;let nf;function rf(){return nf===void 0&&(nf=Date.now()),typeof performance>"u"||!performance.now?Date.now():Math.round(nf+performance.now())}function z1(){return`t=${Math.round((rf()-nf)/100)/10}s`}const kE={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function vM(n){if(n===void 0)return"Unknown";for(const e of Object.keys(kE))if(n.startsWith(e))return e;return"Unknown"}class wM{constructor(e,t,r,s,o,l){this.markConnectionStateDirty=o,this.debug=l,In(this,"socket"),In(this,"connectionCount"),In(this,"_hasEverConnected",!1),In(this,"lastCloseReason"),In(this,"transitionChunkBuffer",null),In(this,"defaultInitialBackoff"),In(this,"maxBackoff"),In(this,"retries"),In(this,"serverInactivityThreshold"),In(this,"reconnectDueToServerInactivityTimeout"),In(this,"uri"),In(this,"onOpen"),In(this,"onResume"),In(this,"onMessage"),In(this,"webSocketConstructor"),In(this,"logger"),In(this,"onServerDisconnectError"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.onServerDisconnectError=t.onServerDisconnectError,this.logger=s,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(e){if(e.partNumber<0||e.partNumber>=e.totalParts||e.totalParts===0||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==e.totalParts||this.transitionChunkBuffer.transitionId!==e.transitionId))throw this.transitionChunkBuffer=null,new Error("Invalid TransitionChunk");if(this.transitionChunkBuffer===null&&(this.transitionChunkBuffer={chunks:[],totalParts:e.totalParts,transitionId:e.transitionId}),e.partNumber!==this.transitionChunkBuffer.chunks.length){const t=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,new Error(`TransitionChunk received out of order: expected part ${t}, got ${e.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(e.chunk),this.transitionChunkBuffer.chunks.length===e.totalParts){const t=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;const r=B1(JSON.parse(t));if(r.type!=="Transition")throw new Error(`Expected Transition, got ${r.type} after assembling chunks`);return r}return null}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:rf()})),this.lastCloseReason!=="InitialConnect"&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",z1(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",z1())),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{this.transitionChunkBuffer=null;const r=t.message;r&&this.logger.log(`WebSocket error message: ${r}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const r=t.data.length;let s=B1(JSON.parse(t.data));if(this._logVerbose(`received ws message with type ${s.type}`),s.type==="Ping")return;if(s.type==="TransitionChunk"){const l=this.assembleTransition(s);if(!l)return;s=l,this._logVerbose(`assembled full ws message of type ${s.type}`)}this.transitionChunkBuffer!==null&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${s.type} while buffering TransitionChunks`)),s.type==="Transition"&&this.reportLargeTransition({messageLength:r,transition:s}),this.onMessage(s).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,this.lastCloseReason===null&&(this.lastCloseReason=t.reason||`closed with code ${t.code}`),t.code!==gM&&t.code!==yM&&t.code!==bM&&t.code!==xM){let s=`WebSocket closed with code ${t.code}`;t.reason&&(s+=`: ${t.reason}`),this.logger.log(s),this.onServerDisconnectError&&t.reason&&this.onServerDisconnectError(s)}const r=vM(t.reason);this.scheduleReconnect(r)}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const r=hM(e),s=JSON.stringify(r);let o=!1;try{this.socket.ws.send(s),o=!0}catch(l){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${l}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${o?"sent":"failed to send"} message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(e){this.socket={state:"disconnected"};const t=this.nextBackoff(e);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(t)}ms`),setTimeout(()=>this.connect(),t)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return e.onmessage=t=>{this._logVerbose("Ignoring message received after close")},new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws;e.onmessage=r=>{this._logVerbose("Ignoring message received after close")};const t=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:rf()})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(e){const r=(e==="client"?100:e==="Unknown"?this.defaultInitialBackoff:kE[e].timeout)*Math.pow(2,this.retries);this.retries+=1;const s=Math.min(r,this.maxBackoff),o=s*(Math.random()-.5);return s+o}reportLargeTransition({transition:e,messageLength:t}){if(e.clientClockSkew===void 0||e.serverTs===void 0)return;const r=rf()-e.clientClockSkew-e.serverTs/1e6,s=`${Math.round(r)}ms`,o=`${Math.round(t/1e4)/100}MB`,l=t/(r/1e3),u=`${Math.round(l/1e4)/100}MB per second`;this._logVerbose(`received ${o} transition in ${s} at ${u}`),t>2e7?this.logger.log(`received query results totaling more that 20MB (${o}) which will take a long time to download on slower connections`):r>2e4&&this.logger.log(`received query results totaling ${o} which took more than 20s to arrive (${s})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:r,messageLength:t}})}}function SM(){return EM()}function EM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class gc extends Error{}gc.prototype.name="InvalidTokenError";function CM(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function TM(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return CM(e)}catch{return atob(e)}}function ME(n,e){if(typeof n!="string")throw new gc("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,r=n.split(".")[t];if(typeof r!="string")throw new gc(`Invalid token specified: missing part #${t+1}`);let s;try{s=TM(r)}catch(o){throw new gc(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new gc(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}var NM=Object.defineProperty,AM=(n,e,t)=>e in n?NM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$r=(n,e,t)=>AM(n,typeof e!="symbol"?e+"":e,t);const kM=20*24*60*60*1e3,I1=2;class MM{constructor(e,t,r){$r(this,"authState",{state:"noAuth"}),$r(this,"configVersion",0),$r(this,"syncState"),$r(this,"authenticate"),$r(this,"stopSocket"),$r(this,"tryRestartSocket"),$r(this,"pauseSocket"),$r(this,"resumeSocket"),$r(this,"clearAuth"),$r(this,"logger"),$r(this,"refreshTokenLeewaySeconds"),$r(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=I1){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${I1-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:s}=t;if(!r||!s){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const o=s-r;if(o<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let l=Math.min(kM,(o-this.refreshTokenLeewaySeconds)*1e3);l<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${o}s`),l=0);const u=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},l);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:u,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${l}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const r=++this.configVersion;this._logVerbose(`fetching token with config version ${r}`);const s=await e(t);return this.configVersion!==r?(this._logVerbose(`stale config version, expected ${r}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:s}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return ME(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const OM=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function RM(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function DM(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function _M(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of OM){const r=performance.getEntriesByName(t).filter(s=>s.entryType==="mark").filter(s=>s.detail.sessionId===n);e.push(...r)}return e.map(DM)}var jM=Object.defineProperty,LM=(n,e,t)=>e in n?jM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bn=(n,e,t)=>LM(n,typeof e!="symbol"?e+"":e,t);class BM{constructor(e,t,r){if(bn(this,"address"),bn(this,"state"),bn(this,"requestManager"),bn(this,"webSocketManager"),bn(this,"authenticationManager"),bn(this,"remoteQuerySet"),bn(this,"optimisticQueryResults"),bn(this,"_transitionHandlerCounter",0),bn(this,"_nextRequestId"),bn(this,"_onTransitionFns",new Map),bn(this,"_sessionId"),bn(this,"firstMessageReceived",!1),bn(this,"debug"),bn(this,"logger"),bn(this,"maxObservedTimestamp"),bn(this,"connectionStateSubscribers",new Map),bn(this,"nextConnectionStateSubscriberId",0),bn(this,"_lastPublishedConnectionState"),bn(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const x=this.connectionState();if(JSON.stringify(x)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=x;for(const w of this.connectionStateSubscribers.values())w(x)}})}),bn(this,"mark",x=>{this.debug&&RM(x,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&bE(e),r={...r};const s=r.authRefreshTokenLeewaySeconds??2;let o=r.webSocketConstructor;if(!o&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");o=o||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger===!1?j0({verbose:r.verbose??!1}):r.logger!==!0&&r.logger?r.logger:_0({verbose:r.verbose??!1});const l=e.search("://");if(l===-1)throw new Error("Provided address was not an absolute URL.");const u=e.substring(l+3),d=e.substring(0,l);let h;if(d==="http")h="ws";else if(d==="https")h="wss";else throw new Error(`Unknown parent protocol ${d}`);const p=`${h}://${u}/api/${Oo}/sync`;this.state=new Qk,this.remoteQuerySet=new L1(x=>this.state.queryPath(x),this.logger),this.requestManager=new Jk(this.logger,this.markConnectionStateDirty);const m=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new MM(this.state,{authenticate:x=>{const w=this.state.setAuth(x);return this.webSocketManager.sendMessage(w),w.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:m,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:s}),this.optimisticQueryResults=new sM,this.addOnTransitionHandler(x=>{t(x.queries.map(w=>w.token))}),this._nextRequestId=0,this._sessionId=SM();const{unsavedChangesWarning:b}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(b===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else b!==!1&&window.addEventListener("beforeunload",x=>{if(this.requestManager.hasIncompleteRequests()){x.preventDefault();const w="Are you sure you want to leave? Your changes may not be saved.";return(x||window.event).returnValue=w,w}});this.webSocketManager=new wM(p,{onOpen:x=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...x,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const w=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new L1(N=>this.state.queryPath(N),this.logger);const[S,C]=this.state.restart(w);C&&this.webSocketManager.sendMessage(C),this.webSocketManager.sendMessage(S);for(const N of this.requestManager.restart())this.webSocketManager.sendMessage(N)},onResume:()=>{const[x,w]=this.state.resume();w&&this.webSocketManager.sendMessage(w),x&&this.webSocketManager.sendMessage(x);for(const S of this.requestManager.resume())this.webSocketManager.sendMessage(S)},onMessage:x=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),x.type){case"Transition":{this.observedTimestamp(x.endVersion.ts),this.authenticationManager.onTransition(x),this.remoteQuerySet.transition(x),this.state.transition(x);const w=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(w);break}case"MutationResponse":{x.success&&this.observedTimestamp(x.ts);const w=this.requestManager.onResponse(x);w!==null&&this.notifyOnQueryResultChanges(new Map([[w.requestId,w.result]]));break}case"ActionResponse":{this.requestManager.onResponse(x);break}case"AuthError":{this.authenticationManager.onAuthError(x);break}case"FatalError":{const w=Gk(this.logger,x.error);throw this.webSocketManager.terminate(),w}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:r.onServerDisconnectError},o,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),r.expectAuth&&m()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[o,l]of t){const u=this.state.queryToken(o);if(u!==null){const d={result:l,udfPath:this.state.queryPath(o),args:this.state.queryArgs(o)};r.set(u,d)}}const s=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:s.map(o=>{const l=this.optimisticQueryResults.rawQueryResult(o);return{token:o,modification:{kind:"Updated",result:l.result}}}),reflectedMutations:Array.from(e).map(([o,l])=>({requestId:o,result:l})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}getCurrentAuthClaims(){const e=this.state.getAuth();let t={};if(e&&e.tokenType==="User")try{t=e?ME(e.value):{}}catch{t={}}else return;return{token:e.value,decoded:t}}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){const s=dr(t),{modification:o,queryToken:l,unsubscribe:u}=this.state.subscribe(e,s,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return o!==null&&this.webSocketManager.sendMessage(o),{queryToken:l,unsubscribe:()=>{const d=u();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(e,t){const r=dr(t),s=Io(e,r);return this.optimisticQueryResults.queryResult(s)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const r=dr(t),s=Io(e,r);return this.optimisticQueryResults.queryLogs(s)}queryJournal(e,t){const r=dr(t),s=Io(e,r);return this.state.queryJournal(s)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(e){const t=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(t,e),()=>{this.connectionStateSubscribers.delete(t)}}async mutation(e,t,r){const s=await this.mutationInternal(e,t,r);if(!s.success)throw s.errorData!==void 0?Hg(s,new _o(Wa("mutation",e,s))):new Error(Wa("mutation",e,s));return s.value}async mutationInternal(e,t,r,s){const{mutationPromise:o}=this.enqueueMutation(e,t,r,s);return o}enqueueMutation(e,t,r,s){const o=dr(t);this.tryReportLongDisconnect();const l=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const p=r.optimisticUpdate;if(p!==void 0){const m=w=>{p(w,o)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},x=this.optimisticQueryResults.applyOptimisticUpdate(m,l).map(w=>{const S=this.localQueryResultByToken(w);return{token:w,modification:{kind:"Updated",result:S===void 0?void 0:{success:!0,value:S,logLines:[]}}}});this.handleTransition({queries:x,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const u={type:"Mutation",requestId:l,udfPath:e,componentPath:s,args:[Kr(o)]},d=this.webSocketManager.sendMessage(u),h=this.requestManager.request(u,d);return{requestId:l,mutationPromise:h}}async action(e,t){const r=await this.actionInternal(e,t);if(!r.success)throw r.errorData!==void 0?Hg(r,new _o(Wa("action",e,r))):new Error(Wa("action",e,r));return r.value}async actionInternal(e,t,r){const s=dr(t),o=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const l={type:"Action",requestId:o,udfPath:e,componentPath:r,args:[Kr(s)]},u=this.webSocketManager.sendMessage(l);return this.requestManager.request(l,u)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=_M(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Oo}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var zM=Object.defineProperty,IM=(n,e,t)=>e in n?zM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wi=(n,e,t)=>IM(n,typeof e!="symbol"?e+"":e,t);const Rd=560;class HM{constructor(e,t){if(Wi(this,"address"),Wi(this,"auth"),Wi(this,"adminAuth"),Wi(this,"encodedTsPromise"),Wi(this,"debug"),Wi(this,"fetchOptions"),Wi(this,"logger"),Wi(this,"mutationQueue",[]),Wi(this,"isProcessingQueue",!1),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");(t??{}).skipConvexDeploymentUrlCheck!==!0&&bE(e),this.logger=(t==null?void 0:t.logger)===!1?j0({verbose:!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:_0({verbose:!1}),this.address=e,this.debug=!0,this.auth=void 0,this.adminAuth=void 0,t!=null&&t.auth&&this.setAuth(t.auth)}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const r=new TextEncoder().encode(JSON.stringify(t)),s=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${s}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const r=dr(t[0]),s=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:s})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!r.ok)throw new Error(await r.text());const{ts:s}=await r.json();return s}async query(e,...t){const r=dr(t[0]);return await this.queryInner(e,r,{})}async queryInner(e,t,r){const s=Nn(e),o=[Kr(t)],l={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const u=fetch,d=r.timestampPromise?await r.timestampPromise:void 0,h=JSON.stringify({path:s,format:"convex_encoded_json",args:o,...d?{ts:d}:{}}),p=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,m=await u(p,{...this.fetchOptions,body:h,method:"POST",headers:l});if(!m.ok&&m.status!==Rd)throw new Error(await m.text());const b=await m.json();if(this.debug)for(const x of b.logLines??[])Gs(this.logger,"info","query",s,x);switch(b.status){case"success":return ri(b.value);case"error":throw b.errorData!==void 0?Dd(b.errorData,new _o(b.errorMessage)):new Error(b.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(b)}`)}}async mutationInner(e,t){const r=Nn(e),s=JSON.stringify({path:r,format:"convex_encoded_json",args:[Kr(t)]}),o={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?o.Authorization=`Convex ${this.adminAuth}`:this.auth&&(o.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:s,method:"POST",headers:o});if(!u.ok&&u.status!==Rd)throw new Error(await u.text());const d=await u.json();if(this.debug)for(const h of d.logLines??[])Gs(this.logger,"info","mutation",r,h);switch(d.status){case"success":return ri(d.value);case"error":throw d.errorData!==void 0?Dd(d.errorData,new _o(d.errorMessage)):new Error(d.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(d)}`)}}async processMutationQueue(){if(!this.isProcessingQueue){for(this.isProcessingQueue=!0;this.mutationQueue.length>0;){const{mutation:e,args:t,resolve:r,reject:s}=this.mutationQueue.shift();try{const o=await this.mutationInner(e,t);r(o)}catch(o){s(o)}}this.isProcessingQueue=!1}}enqueueMutation(e,t){return new Promise((r,s)=>{this.mutationQueue.push({mutation:e,args:t,resolve:r,reject:s}),this.processMutationQueue()})}async mutation(e,...t){const[r,s]=t,o=dr(r);return s!=null&&s.skipQueue?await this.mutationInner(e,o):await this.enqueueMutation(e,o)}async action(e,...t){const r=dr(t[0]),s=Nn(e),o=JSON.stringify({path:s,format:"convex_encoded_json",args:[Kr(r)]}),l={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:o,method:"POST",headers:l});if(!d.ok&&d.status!==Rd)throw new Error(await d.text());const h=await d.json();if(this.debug)for(const p of h.logLines??[])Gs(this.logger,"info","action",s,p);switch(h.status){case"success":return ri(h.value);case"error":throw h.errorData!==void 0?Dd(h.errorData,new _o(h.errorMessage)):new Error(h.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(h)}`)}}async function(e,t,...r){const s=dr(r[0]),o=typeof e=="string"?e:Nn(e),l=JSON.stringify({componentPath:t,path:o,format:"convex_encoded_json",args:Kr(s)}),u={"Content-Type":"application/json","Convex-Client":`npm-${Oo}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const h=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!h.ok&&h.status!==Rd)throw new Error(await h.text());const p=await h.json();if(this.debug)for(const m of p.logLines??[])Gs(this.logger,"info","any",o,m);switch(p.status){case"success":return ri(p.value);case"error":throw p.errorData!==void 0?Dd(p.errorData,new _o(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}}function Dd(n,e){return e.data=ri(n),e}function UM({getCurrentValue:n,subscribe:e}){const[t,r]=T.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let s=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(s=n(),r({getCurrentValue:n,subscribe:e,value:s})),T.useEffect(()=>{let o=!1;const l=()=>{o||r(d=>{if(d.getCurrentValue!==n||d.subscribe!==e)return d;const h=n();return d.value===h?d:{...d,value:h}})},u=e(l);return l(),()=>{o=!0,u()}},[n,e]),s}var $M=Object.defineProperty,qM=(n,e,t)=>e in n?$M(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zs=(n,e,t)=>qM(n,typeof e!="symbol"?e+"":e,t);const PM=5e3;if(typeof oe>"u")throw new Error("Required dependency 'react' not found");function OE(n,e,t){function r(s){return WM(s),e.mutation(n,s,{optimisticUpdate:t})}return r.withOptimisticUpdate=function(o){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${Nn(n)}`);return OE(n,e,o)},r}function VM(n,e){return function(t){return e.action(n,t)}}class FM{constructor(e,t){if(zs(this,"address"),zs(this,"cachedSync"),zs(this,"listeners"),zs(this,"options"),zs(this,"closed",!1),zs(this,"_logger"),zs(this,"adminAuth"),zs(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(t==null?void 0:t.logger)===!1?j0({verbose:(t==null?void 0:t.verbose)??!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:_0({verbose:(t==null?void 0:t.verbose)??!1}),this.options={...t,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new BM(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[r,s]=t,o=Nn(e);return{onUpdate:l=>{const{queryToken:u,unsubscribe:d}=this.sync.subscribe(o,r,s),h=this.listeners.get(u);return h!==void 0?h.add(l):this.listeners.set(u,new Set([l])),()=>{if(this.closed)return;const p=this.listeners.get(u);p.delete(l),p.size===0&&this.listeners.delete(u),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(o,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(o,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(o,r)}}}prewarmQuery(e){const t=e.extendSubscriptionFor??PM,s=this.watchQuery(e.query,e.args||{}).onUpdate(()=>{});setTimeout(s,t)}mutation(e,...t){const[r,s]=t,o=Nn(e);return this.sync.mutation(o,r,s)}action(e,...t){const r=Nn(e);return this.sync.action(r,...t)}query(e,...t){const r=this.watchQuery(e,...t),s=r.localQueryResult();return s!==void 0?Promise.resolve(s):new Promise((o,l)=>{const u=r.onUpdate(()=>{u();try{o(r.localQueryResult())}catch(d){l(d)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(e){return this.sync.subscribeToConnectionState(e)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){for(const t of e){const r=this.listeners.get(t);if(r)for(const s of r)s()}}}const hh=oe.createContext(void 0);function GM(){return T.useContext(hh)}const KM=({client:n,children:e})=>oe.createElement(hh.Provider,{value:n},e);function un(n,...e){const t=e[0]==="skip",r=e[0]==="skip"?{}:dr(e[0]),s=typeof n=="string"?L0(n):n,o=Nn(s),l=T.useMemo(()=>t?{}:{query:{query:s,args:r}},[JSON.stringify(Kr(r)),o,t]),d=JM(l).query;if(d instanceof Error)throw d;return d}function Bt(n){const e=typeof n=="string"?L0(n):n,t=T.useContext(hh);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return T.useMemo(()=>OE(e,t),[t,Nn(e)])}function bf(n){const e=T.useContext(hh),t=typeof n=="string"?L0(n):n;if(e===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return T.useMemo(()=>VM(t,e),[e,Nn(t)])}function WM(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var QM=Object.defineProperty,YM=(n,e,t)=>e in n?QM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qm=(n,e,t)=>YM(n,typeof e!="symbol"?e+"":e,t);class XM{constructor(e){Qm(this,"createWatch"),Qm(this,"queries"),Qm(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:r,args:s}=e[t];if(Nn(r),this.queries[t]===void 0)this.addQuery(t,r,s);else{const o=this.queries[t];(Nn(r)!==Nn(o.query)||JSON.stringify(Kr(s))!==JSON.stringify(Kr(o.args)))&&(this.removeQuery(t),this.addQuery(t,r,s))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const r of Object.keys(e)){const{query:s,args:o}=e[r];Nn(s);const l=this.createWatch(s,o);let u;try{u=l.localQueryResult()}catch(d){if(d instanceof Error)u=d;else throw d}t[r]=u}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:r,args:s,watch:o}=this.queries[t],l=o.journal();this.removeQuery(t),this.addQuery(t,r,s,l)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,s){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const o=this.createWatch(t,r,s),l=o.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:o,unsubscribe:l}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function JM(n){const e=GM();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=T.useMemo(()=>(r,s,o)=>e.watchQuery(r,s,o?{journal:o}:{}),[e]);return ZM(n,t)}function ZM(n,e){const[t]=T.useState(()=>new XM(e));t.createWatch!==e&&t.setCreateWatch(e),T.useEffect(()=>()=>t.destroy(),[t]);const r=T.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:s=>(t.setQueries(n),t.subscribe(s))}),[t,n]);return UM(r)}const RE=T.createContext(void 0);function B0(){const n=T.useContext(RE);if(n===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return n}function eO({children:n,client:e,useAuth:t}){const{isLoading:r,isAuthenticated:s,fetchAccessToken:o}=t(),[l,u]=T.useState(null);return r&&l!==null&&u(null),!r&&!s&&l!==!1&&u(!1),oe.createElement(RE.Provider,{value:{isLoading:l===null,isAuthenticated:s&&(l??!1)}},oe.createElement(tO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}),oe.createElement(KM,{client:e},n),oe.createElement(nO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}))}function tO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return T.useEffect(()=>{let o=!0;if(n)return r.setAuth(e,l=>{o&&s(()=>l)}),()=>{o=!1,s(l=>l?!1:null)}},[n,e,t,r,s]),null}function nO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return T.useEffect(()=>{if(n)return()=>{r.clearAuth(),s(()=>null)}},[n,e,t,r,s]),null}function rO({children:n}){const{isLoading:e,isAuthenticated:t}=B0();return e||!t?null:oe.createElement(oe.Fragment,null,n)}function iO({children:n}){const{isLoading:e,isAuthenticated:t}=B0();return e||t?null:oe.createElement(oe.Fragment,null,n)}const DE=T.createContext(void 0),_E=T.createContext(void 0);function sO(){return T.useContext(_E)}const oO=T.createContext(null),Ym="__convexAuthOAuthVerifier",_d="__convexAuthJWT",jd="__convexAuthRefreshToken",H1="__convexAuthServerStateFetchTime";function aO({client:n,serverState:e,onChange:t,storage:r,storageNamespace:s,replaceURL:o,children:l}){const u=T.useRef((e==null?void 0:e._state.token)??null),[d,h]=T.useState(u.current===null),[p,m]=T.useState(u.current),b=n.verbose??!1,x=T.useCallback(ce=>{b&&console.debug(`${new Date().toISOString()} ${ce}`)},[b]),{storageSet:w,storageGet:S,storageRemove:C,storageKey:N}=lO(r,s),[L,R]=T.useState(!1),k=T.useCallback(async ce=>{const ve=u.current!==null;let de;if(ce.tokens===null)u.current=null,ce.shouldStore&&(await C(_d),await C(jd)),de=null;else{const{token:z}=ce.tokens;if(u.current=z,ce.shouldStore){const{refreshToken:D}=ce.tokens;await w(_d,z),await w(jd,D)}de=z}ve!==(de!==null)&&await(t==null?void 0:t()),m(de),h(!1)},[w,C]);T.useEffect(()=>{const ce=async ve=>{if(L){ve.preventDefault();const de="Are you sure you want to leave? Your changes may not be saved.";return ve.returnValue=!0,de}};return U1("beforeunload",ce),()=>{$1("beforeunload",ce)}}),T.useEffect(()=>{const ce=ve=>{(async()=>{if(ve.storageArea===r&&ve.key===N(_d)){const de=ve.newValue;x(`synced access token, is null: ${de===null}`),await k({shouldStore:!1,tokens:de===null?null:{token:de}})}})()};return U1("storage",ce),()=>$1("storage",ce)},[k]);const j=T.useCallback(async ce=>{const{tokens:ve}=await n.unauthenticatedCall("auth:signIn","code"in ce?{params:{code:ce.code},verifier:ce.verifier}:ce);return x(`retrieved tokens, is null: ${ve===null}`),await k({shouldStore:!0,tokens:ve??null}),ve!==null},[n,k]),H=T.useCallback(async(ce,ve)=>{const de=ve instanceof FormData?Array.from(ve.entries()).reduce(($,[B,te])=>($[B]=te,$),{}):ve??{},z=await S(Ym)??void 0;await C(Ym);const D=await n.authenticatedCall("auth:signIn",{provider:ce,params:de,verifier:z});if(D.redirect!==void 0){const $=new URL(D.redirect);return await w(Ym,D.verifier),window.location!==void 0&&(window.location.href=$.toString()),{signingIn:!1,redirect:$}}else if(D.tokens!==void 0){const{tokens:$}=D;return x(`signed in and got tokens, is null: ${$===null}`),await k({shouldStore:!0,tokens:$}),{signingIn:D.tokens!==null}}return{signingIn:!1}},[n,k,S]),U=T.useCallback(async()=>{try{await n.authenticatedCall("auth:signOut")}catch{}x("signed out, erasing tokens"),await k({shouldStore:!0,tokens:null})},[k,n]),J=T.useCallback(async({forceRefreshToken:ce})=>{if(ce){const ve=u.current;return await uO(jd,async()=>{const de=u.current;if(de!==ve)return x(`returning synced token, is null: ${de===null}`),de;const z=await S(jd)??null;return z!==null?(R(!0),await j({refreshToken:z}).finally(()=>{R(!1)}),x(`returning retrieved token, is null: ${de===null}`),u.current):(R(!1),x("returning null, there is no refresh token"),null)})}return u.current},[j,U,S]),ie=T.useRef(!1);T.useEffect(()=>{if(r===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ce=async()=>{const de=await S(_d)??null;x(`retrieved token from storage, is null: ${de===null}`),await k({shouldStore:!1,tokens:de===null?null:{token:de}})};if(e!==void 0){const de=S(H1),z=D=>{if(!D||e._timeFetched>+D){const{token:$,refreshToken:B}=e._state,te=$===null||B===null?null:{token:$,refreshToken:B};w(H1,e._timeFetched.toString()),k({tokens:te,shouldStore:!0})}else ce()};de instanceof Promise?de.then(z):z(de);return}const ve=typeof(window==null?void 0:window.location)<"u"?new URLSearchParams(window.location.search).get("code"):null;if(ie.current||ve){if(ve&&!ie.current){ie.current=!0;const de=new URL(window.location.href);de.searchParams.delete("code"),(async()=>(await o(de.pathname+de.search+de.hash),await H(void 0,{code:ve}),ie.current=!1))()}}else ce()},[n,S]);const ge=T.useMemo(()=>({signIn:H,signOut:U}),[H,U]),be=p!==null,he=T.useMemo(()=>({isLoading:d,isAuthenticated:be,fetchAccessToken:J}),[J,d,be]);return v.jsx(_E.Provider,{value:he,children:v.jsx(DE.Provider,{value:ge,children:v.jsx(oO.Provider,{value:p,children:l})})})}function lO(n,e){const t=cO(),r=T.useMemo(()=>n??t(),[n]),s=e.replace(/[^a-zA-Z0-9]/g,""),o=T.useCallback(h=>`${h}_${s}`,[e]),l=T.useCallback((h,p)=>r.setItem(o(h),p),[r,o]),u=T.useCallback(h=>r.getItem(o(h)),[r,o]),d=T.useCallback(h=>r.removeItem(o(h)),[r,o]);return{storageSet:l,storageGet:u,storageRemove:d,storageKey:o}}function cO(){const[n,e]=T.useState({});return()=>({getItem:t=>n[t],setItem:(t,r)=>{e(s=>({...s,[t]:r}))},removeItem:t=>{e(r=>{const{[t]:s,...o}=r;return o})}})}async function uO(n,e){var r;const t=(r=window==null?void 0:window.navigator)==null?void 0:r.locks;return t!==void 0?await t.request(n,e):await dO(n,e)}function Ld(n){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[n];return e===void 0&&(globalThis.__convexAuthMutexes[n]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[n],e}function Xm(n,e){globalThis.__convexAuthMutexes[n]=e}async function jE(n,e){const t=Ld(n);t.currentlyRunning===null?Xm(n,{currentlyRunning:e().finally(()=>{const r=Ld(n).waiting.shift();Ld(n).currentlyRunning=null,Xm(n,{...Ld(n),currentlyRunning:r===void 0?null:jE(n,r)})}),waiting:[]}):Xm(n,{...t,waiting:[...t.waiting,e]})}async function dO(n,e){return new Promise((r,s)=>{jE(n,()=>e().then(l=>r(l)).catch(l=>s(l)))})}function U1(n,e,t){var r;(r=window.addEventListener)==null||r.call(window,n,e,t)}function $1(n,e,t){var r;(r=window.removeEventListener)==null||r.call(window,n,e,t)}function LE(){return T.useContext(DE)}function fO(n){const{client:e,storage:t,storageNamespace:r,replaceURL:s,children:o}=n,l=T.useMemo(()=>{var u;return{authenticatedCall(d,h){return e.action(d,h)},unauthenticatedCall(d,h){return new HM(e.address).action(d,h)},verbose:(u=e.options)==null?void 0:u.verbose}},[e]);return v.jsx(aO,{client:l,storage:t??(typeof window>"u"||window==null?void 0:window.localStorage),storageNamespace:r??e.address,replaceURL:s??(u=>{window.history.replaceState({},"",u)}),children:v.jsx(eO,{client:e,useAuth:sO,children:o})})}/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var q1="popstate";function hO(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Ug("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:$c(s)}return mO(e,t,null,n)}function Yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function si(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pO(){return Math.random().toString(36).substring(2,10)}function P1(n,e){return{usr:n.state,key:n.key,idx:e}}function Ug(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?dl(e):e,state:t,key:e&&e.key||r||pO()}}function $c({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function dl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function mO(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let C=p(),N=C==null?null:C-h;h=C,d&&d({action:u,location:S.location,delta:N})}function b(C,N){u="PUSH";let L=Ug(S.location,C,N);h=p()+1;let R=P1(L,h),k=S.createHref(L);try{l.pushState(R,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(k)}o&&d&&d({action:u,location:S.location,delta:1})}function x(C,N){u="REPLACE";let L=Ug(S.location,C,N);h=p();let R=P1(L,h),k=S.createHref(L);l.replaceState(R,"",k),o&&d&&d({action:u,location:S.location,delta:0})}function w(C){return gO(C)}let S={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(q1,m),d=C,()=>{s.removeEventListener(q1,m),d=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let N=w(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:b,replace:x,go(C){return l.go(C)}};return S}function gO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Yt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:$c(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function BE(n,e,t="/"){return yO(n,e,t,!1)}function yO(n,e,t,r){let s=typeof e=="string"?dl(e):e,o=as(s.pathname||"/",t);if(o==null)return null;let l=zE(n);bO(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=MO(o);u=AO(l[d],h,r)}return u}function zE(n,e=[],t=[],r="",s=!1){let o=(l,u,d=s,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Yt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=rs([r,p.relativePath]),b=t.concat(p);l.children&&l.children.length>0&&(Yt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),zE(l.children,e,b,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:TO(m,l.index),routesMeta:b})};return n.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let h of IE(l.path))o(l,u,!0,h)}),e}function IE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=IE(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function bO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:NO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var xO=/^:[\w-]+$/,vO=3,wO=2,SO=1,EO=10,CO=-2,V1=n=>n==="*";function TO(n,e){let t=n.split("/"),r=t.length;return t.some(V1)&&(r+=CO),e&&(r+=wO),t.filter(s=>!V1(s)).reduce((s,o)=>s+(xO.test(o)?vO:o===""?SO:EO),r)}function NO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function AO(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=xf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),b=d.route;if(!m&&h&&t&&!r[r.length-1].route.index&&(m=xf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:rs([o,m.pathname]),pathnameBase:jO(rs([o,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(o=rs([o,m.pathnameBase]))}return l}function xf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},b)=>{if(p==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[b];return m&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function kO(n,e=!1,t=!0){si(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function MO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function as(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var OO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RO=n=>OO.test(n);function DO(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?dl(n):n,o;if(t)if(RO(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),si(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=F1(t.substring(1),"/"):o=F1(t,e)}else o=e;return{pathname:o,search:LO(r),hash:BO(s)}}function F1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Jm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _O(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HE(n){let e=_O(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function UE(n,e,t,r=!1){let s;typeof n=="string"?s=dl(n):(s={...n},Yt(!s.pathname||!s.pathname.includes("?"),Jm("?","pathname","search",s)),Yt(!s.pathname||!s.pathname.includes("#"),Jm("#","pathname","hash",s)),Yt(!s.search||!s.search.includes("#"),Jm("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),m-=1;s.pathname=b.join("/")}u=m>=0?e[m]:"/"}let d=DO(s,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var rs=n=>n.join("/").replace(/\/\/+/g,"/"),jO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function zO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $E=["POST","PUT","PATCH","DELETE"];new Set($E);var IO=["GET",...$E];new Set(IO);var fl=T.createContext(null);fl.displayName="DataRouter";var ph=T.createContext(null);ph.displayName="DataRouterState";T.createContext(!1);var qE=T.createContext({isTransitioning:!1});qE.displayName="ViewTransition";var HO=T.createContext(new Map);HO.displayName="Fetchers";var UO=T.createContext(null);UO.displayName="Await";var Ni=T.createContext(null);Ni.displayName="Navigation";var ou=T.createContext(null);ou.displayName="Location";var Ai=T.createContext({outlet:null,matches:[],isDataRoute:!1});Ai.displayName="Route";var z0=T.createContext(null);z0.displayName="RouteError";function $O(n,{relative:e}={}){Yt(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=T.useContext(Ni),{hash:s,pathname:o,search:l}=lu(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:rs([t,o])),r.createHref({pathname:u,search:l,hash:s})}function au(){return T.useContext(ou)!=null}function ta(){return Yt(au(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(ou).location}var PE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VE(n){T.useContext(Ni).static||T.useLayoutEffect(n)}function qO(){let{isDataRoute:n}=T.useContext(Ai);return n?nR():PO()}function PO(){Yt(au(),"useNavigate() may be used only in the context of a <Router> component.");let n=T.useContext(fl),{basename:e,navigator:t}=T.useContext(Ni),{matches:r}=T.useContext(Ai),{pathname:s}=ta(),o=JSON.stringify(HE(r)),l=T.useRef(!1);return VE(()=>{l.current=!0}),T.useCallback((d,h={})=>{if(si(l.current,PE),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=UE(d,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rs([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,o,s,n])}T.createContext(null);function VO(){let{matches:n}=T.useContext(Ai),e=n[n.length-1];return e?e.params:{}}function lu(n,{relative:e}={}){let{matches:t}=T.useContext(Ai),{pathname:r}=ta(),s=JSON.stringify(HE(t));return T.useMemo(()=>UE(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function FO(n,e){return FE(n,e)}function FE(n,e,t,r,s){var L;Yt(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=T.useContext(Ni),{matches:l}=T.useContext(Ai),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let R=m&&m.path||"";GE(h,!m||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=ta(),x;if(e){let R=typeof e=="string"?dl(e):e;Yt(p==="/"||((L=R.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),x=R}else x=b;let w=x.pathname||"/",S=w;if(p!=="/"){let R=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=BE(n,{pathname:S});si(m||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),si(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=YO(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:rs([p,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:rs([p,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),l,t,r,s);return e&&N?T.createElement(ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function GO(){let n=tR(),e=zO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:o},"ErrorBoundary")," or"," ",T.createElement("code",{style:o},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:s},t):null,l)}var KO=T.createElement(GO,null),WO=class extends T.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?T.createElement(Ai.Provider,{value:this.props.routeContext},T.createElement(z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QO({routeContext:n,match:e,children:t}){let r=T.useContext(fl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(Ai.Provider,{value:n},t)}function YO(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Yt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:b,errors:x}=t,w=m.route.loader&&!b.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=t&&r?(p,m)=>{var b,x;r(p,{location:t.location,params:((x=(b=t.matches)==null?void 0:b[0])==null?void 0:x.params)??{},errorInfo:m})}:void 0;return o.reduceRight((p,m,b)=>{let x,w=!1,S=null,C=null;t&&(x=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||KO,u&&(d<0&&b===0?(GE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):d===b&&(w=!0,C=m.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,b+1)),L=()=>{let R;return x?R=S:w?R=C:m.route.Component?R=T.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,T.createElement(QO,{match:m,routeContext:{outlet:p,matches:N,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?T.createElement(WO,{location:t.location,revalidation:t.revalidation,component:S,error:x,children:L(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:h}):L()},null)}function I0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XO(n){let e=T.useContext(fl);return Yt(e,I0(n)),e}function JO(n){let e=T.useContext(ph);return Yt(e,I0(n)),e}function ZO(n){let e=T.useContext(Ai);return Yt(e,I0(n)),e}function H0(n){let e=ZO(n),t=e.matches[e.matches.length-1];return Yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eR(){return H0("useRouteId")}function tR(){var r;let n=T.useContext(z0),e=JO("useRouteError"),t=H0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function nR(){let{router:n}=XO("useNavigate"),e=H0("useNavigate"),t=T.useRef(!1);return VE(()=>{t.current=!0}),T.useCallback(async(s,o={})=>{si(t.current,PE),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var G1={};function GE(n,e,t){!e&&!G1[n]&&(G1[n]=!0,si(!1,t))}T.memo(rR);function rR({routes:n,future:e,state:t,unstable_onError:r}){return FE(n,void 0,t,r,e)}function $g(n){Yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Yt(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=dl(t));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:b="default"}=t,x=T.useMemo(()=>{let w=as(d,l);return w==null?null:{location:{pathname:w,search:h,hash:p,state:m,key:b},navigationType:r}},[l,d,h,p,m,b,r]);return si(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:T.createElement(Ni.Provider,{value:u},T.createElement(ou.Provider,{children:e,value:x}))}function sR({children:n,location:e}){return FO(qg(n),e)}function qg(n,e=[]){let t=[];return T.Children.forEach(n,(r,s)=>{if(!T.isValidElement(r))return;let o=[...e,s];if(r.type===T.Fragment){t.push.apply(t,qg(r.props.children,o));return}Yt(r.type===$g,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=qg(r.props.children,o)),t.push(l)}),t}var sf="get",of="application/x-www-form-urlencoded";function mh(n){return n!=null&&typeof n.tagName=="string"}function oR(n){return mh(n)&&n.tagName.toLowerCase()==="button"}function aR(n){return mh(n)&&n.tagName.toLowerCase()==="form"}function lR(n){return mh(n)&&n.tagName.toLowerCase()==="input"}function cR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uR(n,e){return n.button===0&&(!e||e==="_self")&&!cR(n)}var Bd=null;function dR(){if(Bd===null)try{new FormData(document.createElement("form"),0),Bd=!1}catch{Bd=!0}return Bd}var fR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zm(n){return n!=null&&!fR.has(n)?(si(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):n}function hR(n,e){let t,r,s,o,l;if(aR(n)){let u=n.getAttribute("action");r=u?as(u,e):null,t=n.getAttribute("method")||sf,s=Zm(n.getAttribute("enctype"))||of,o=new FormData(n)}else if(oR(n)||lR(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?as(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||sf,s=Zm(n.getAttribute("formenctype"))||Zm(u.getAttribute("enctype"))||of,o=new FormData(u,n),!dR()){let{name:h,type:p,value:m}=n;if(p==="image"){let b=h?`${h}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else h&&o.append(h,m)}}else{if(mh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sf,r=null,s=of,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function U0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&as(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function mR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yR(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await mR(o,t);return l.links?l.links():[]}return[]}));return wR(r.flat(1).filter(gR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function K1(n,e,t,r,s,o){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var p;return t[h].pathname!==d.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var m;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function bR(n,e,{includeHydrateFallback:t}={}){return xR(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function xR(n){return[...new Set(n)]}function vR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function wR(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(vR(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function KE(){let n=T.useContext(fl);return U0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function SR(){let n=T.useContext(ph);return U0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $0=T.createContext(void 0);$0.displayName="FrameworkContext";function WE(){let n=T.useContext($0);return U0(n,"You must render this element inside a <HydratedRouter> element"),n}function ER(n,e){let t=T.useContext($0),[r,s]=T.useState(!1),[o,l]=T.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,b=T.useRef(null);T.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let S=N=>{N.forEach(L=>{l(L.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[n]),T.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let x=()=>{s(!0)},w=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,b,{}]:[o,b,{onFocus:fc(u,x),onBlur:fc(d,w),onMouseEnter:fc(h,x),onMouseLeave:fc(p,w),onTouchStart:fc(m,x)}]:[!1,b,{}]}function fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function CR({page:n,...e}){let{router:t}=KE(),r=T.useMemo(()=>BE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?T.createElement(NR,{page:n,matches:r,...e}):null}function TR(n){let{manifest:e,routeModules:t}=WE(),[r,s]=T.useState([]);return T.useEffect(()=>{let o=!1;return yR(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function NR({page:n,matches:e,...t}){let r=ta(),{manifest:s,routeModules:o}=WE(),{basename:l}=KE(),{loaderData:u,matches:d}=SR(),h=T.useMemo(()=>K1(n,e,d,s,r,"data"),[n,e,d,s,r]),p=T.useMemo(()=>K1(n,e,d,s,r,"assets"),[n,e,d,s,r]),m=T.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(N=>{var R;let L=s.routes[N.route.id];!L||!L.hasLoader||(!h.some(k=>k.route.id===N.route.id)&&N.route.id in u&&((R=o[N.route.id])!=null&&R.shouldRevalidate)||L.hasClientLoader?S=!0:w.add(N.route.id))}),w.size===0)return[];let C=pR(n,l,"data");return S&&w.size>0&&C.searchParams.set("_routes",e.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[C.pathname+C.search]},[l,u,r,s,h,e,n,o]),b=T.useMemo(()=>bR(p,s),[p,s]),x=TR(p);return T.createElement(T.Fragment,null,m.map(w=>T.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),b.map(w=>T.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),x.map(({key:w,link:S})=>T.createElement("link",{key:w,nonce:t.nonce,...S})))}function AR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var QE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QE&&(window.__reactRouterVersion="7.9.6")}catch{}function kR({basename:n,children:e,window:t}){let r=T.useRef();r.current==null&&(r.current=hO({window:t,v5Compat:!0}));let s=r.current,[o,l]=T.useState({action:s.action,location:s.location}),u=T.useCallback(d=>{T.startTransition(()=>l(d))},[l]);return T.useLayoutEffect(()=>s.listen(u),[s,u]),T.createElement(iR,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XE=T.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,...b},x){let{basename:w}=T.useContext(Ni),S=typeof h=="string"&&YE.test(h),C,N=!1;if(typeof h=="string"&&S&&(C=h,QE))try{let ie=new URL(window.location.href),ge=h.startsWith("//")?new URL(ie.protocol+h):new URL(h),be=as(ge.pathname,w);ge.origin===ie.origin&&be!=null?h=be+ge.search+ge.hash:N=!0}catch{si(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=$O(h,{relative:s}),[R,k,j]=ER(r,b),H=DR(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:m});function U(ie){e&&e(ie),ie.defaultPrevented||H(ie)}let J=T.createElement("a",{...b,...j,href:C||L,onClick:N||o?e:U,ref:AR(x,k),target:d,"data-discover":!S&&t==="render"?"true":void 0});return R&&!S?T.createElement(T.Fragment,null,J,T.createElement(CR,{page:L})):J});XE.displayName="Link";var MR=T.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...h},p){let m=lu(l,{relative:h.relative}),b=ta(),x=T.useContext(ph),{navigator:w,basename:S}=T.useContext(Ni),C=x!=null&&zR(m)&&u===!0,N=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,L=b.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(L=L.toLowerCase(),R=R?R.toLowerCase():null,N=N.toLowerCase()),R&&S&&(R=as(R,S)||R);const k=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let j=L===N||!s&&L.startsWith(N)&&L.charAt(k)==="/",H=R!=null&&(R===N||!s&&R.startsWith(N)&&R.charAt(N.length)==="/"),U={isActive:j,isPending:H,isTransitioning:C},J=j?e:void 0,ie;typeof r=="function"?ie=r(U):ie=[r,j?"active":null,H?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let ge=typeof o=="function"?o(U):o;return T.createElement(XE,{...h,"aria-current":J,className:ie,ref:p,style:ge,to:l,viewTransition:u},typeof d=="function"?d(U):d)});MR.displayName="NavLink";var OR=T.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=sf,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...b},x)=>{let w=LR(),S=BR(u,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&YE.test(u),L=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let k=R.nativeEvent.submitter,j=(k==null?void 0:k.getAttribute("formmethod"))||l;w(k||R.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:s,state:o,relative:h,preventScrollReset:p,viewTransition:m})};return T.createElement("form",{ref:x,method:C,action:S,onSubmit:r?d:L,...b,"data-discover":!N&&n==="render"?"true":void 0})});OR.displayName="Form";function RR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JE(n){let e=T.useContext(fl);return Yt(e,RR(n)),e}function DR(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=qO(),d=ta(),h=lu(n,{relative:o});return T.useCallback(p=>{if(uR(p,e)){p.preventDefault();let m=t!==void 0?t:$c(d)===$c(h);u(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,h,t,r,e,n,s,o,l])}var _R=0,jR=()=>`__${String(++_R)}__`;function LR(){let{router:n}=JE("useSubmit"),{basename:e}=T.useContext(Ni),t=eR();return T.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=hR(r,e);if(s.navigate===!1){let p=s.fetcherKey||jR();await n.fetch(p,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function BR(n,{relative:e}={}){let{basename:t}=T.useContext(Ni),r=T.useContext(Ai);Yt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...lu(n||".",{relative:e})},l=ta();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:rs([t,o.pathname])),$c(o)}function zR(n,{relative:e}={}){let t=T.useContext(qE);Yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=JE("useViewTransitionState"),s=lu(n,{relative:e});if(!t.isTransitioning)return!1;let o=as(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=as(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xf(s.pathname,l)!=null||xf(s.pathname,o)!=null}var ZE=yE();const eC=O0(ZE);function tC(n,e){const t={get(r,s){if(typeof s=="string"){const o=[...e,s];return tC(n,o)}else if(s===NE){if(e.length<1){const o=[n,...e].join(".");throw new Error(`API path is expected to be of the form \`${n}.childComponent.functionName\`. Found: \`${o}\``)}return"_reference/childComponent/"+e.join("/")}else return}};return new Proxy({},t)}const IR=()=>tC("components",[]),Pe=nM;IR();function HR(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const UR=n=>{switch(n){case"success":return PR;case"info":return FR;case"warning":return VR;case"error":return GR;default:return null}},$R=Array(12).fill(0),qR=({visible:n,className:e})=>oe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},oe.createElement("div",{className:"sonner-spinner"},$R.map((t,r)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),PR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),VR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),FR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),GR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),KR=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),WR=()=>{const[n,e]=oe.useState(document.hidden);return oe.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Pg=1;class QR{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Pg++,l=this.toasts.find(d=>d.id===o),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...e,id:o,title:r}),{...d,...e,id:o,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const u=s.then(async h=>{if(l=["resolve",h],oe.isValidElement(h))o=!1,this.create({id:r,type:"default",message:h});else if(XR(h)&&!h.ok){o=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,b=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:b,...w})}else if(h instanceof Error){o=!1;const m=typeof t.error=="function"?await t.error(h):t.error,b=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:b,...w})}else if(t.success!==void 0){o=!1;const m=typeof t.success=="function"?await t.success(h):t.success,b=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!oe.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:b,...w})}}).catch(async h=>{if(l=["reject",h],t.error!==void 0){o=!1;const p=typeof t.error=="function"?await t.error(h):t.error,m=typeof t.description=="function"?await t.description(h):t.description,x=typeof p=="object"&&!oe.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...x})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((h,p)=>u.then(()=>l[0]==="reject"?p(l[1]):h(l[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Pg++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ur=new QR,YR=(n,e)=>{const t=(e==null?void 0:e.id)||Pg++;return ur.addToast({title:n,...e,id:t}),t},XR=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",JR=YR,ZR=()=>ur.toasts,e5=()=>ur.getActiveToasts(),$e=Object.assign(JR,{success:ur.success,info:ur.info,warning:ur.warning,error:ur.error,custom:ur.custom,message:ur.message,promise:ur.promise,dismiss:ur.dismiss,loading:ur.loading},{getHistory:ZR,getToasts:e5});HR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function zd(n){return n.label!==void 0}const t5=3,n5="24px",r5="16px",W1=4e3,i5=356,s5=14,o5=45,a5=200;function hi(...n){return n.filter(Boolean).join(" ")}function l5(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const c5=n=>{var e,t,r,s,o,l,u,d,h;const{invert:p,toast:m,unstyled:b,interacting:x,setHeights:w,visibleToasts:S,heights:C,index:N,toasts:L,expanded:R,removeToast:k,defaultRichColors:j,closeButton:H,style:U,cancelButtonStyle:J,actionButtonStyle:ie,className:ge="",descriptionClassName:be="",duration:he,position:ce,gap:ve,expandByDefault:de,classNames:z,icons:D,closeButtonAriaLabel:$="Close toast"}=n,[B,te]=oe.useState(null),[M,P]=oe.useState(null),[W,se]=oe.useState(!1),[le,Z]=oe.useState(!1),[Se,ke]=oe.useState(!1),[fe,nt]=oe.useState(!1),[kt,Vt]=oe.useState(!1),[qn,_t]=oe.useState(0),[Sn,Mt]=oe.useState(0),rn=oe.useRef(m.duration||he||W1),En=oe.useRef(null),K=oe.useRef(null),Ee=N===0,We=N+1<=S,Be=m.type,ot=m.dismissible!==!1,Ze=m.className||"",vn=m.descriptionClassName||"",jt=oe.useMemo(()=>C.findIndex(O=>O.toastId===m.id)||0,[C,m.id]),ye=oe.useMemo(()=>{var O;return(O=m.closeButton)!=null?O:H},[m.closeButton,H]),Ne=oe.useMemo(()=>m.duration||he||W1,[m.duration,he]),Ke=oe.useRef(0),Ye=oe.useRef(0),It=oe.useRef(0),Xt=oe.useRef(null),[gr,Y]=ce.split("-"),Te=oe.useMemo(()=>C.reduce((O,Q,ue)=>ue>=jt?O:O+Q.height,0),[C,jt]),Me=WR(),ft=m.invert||p,Xe=Be==="loading";Ye.current=oe.useMemo(()=>jt*ve+Te,[jt,Te]),oe.useEffect(()=>{rn.current=Ne},[Ne]),oe.useEffect(()=>{se(!0)},[]),oe.useEffect(()=>{const O=K.current;if(O){const Q=O.getBoundingClientRect().height;return Mt(Q),w(ue=>[{toastId:m.id,height:Q,position:m.position},...ue]),()=>w(ue=>ue.filter(De=>De.toastId!==m.id))}},[w,m.id]),oe.useLayoutEffect(()=>{if(!W)return;const O=K.current,Q=O.style.height;O.style.height="auto";const ue=O.getBoundingClientRect().height;O.style.height=Q,Mt(ue),w(De=>De.find(Fe=>Fe.toastId===m.id)?De.map(Fe=>Fe.toastId===m.id?{...Fe,height:ue}:Fe):[{toastId:m.id,height:ue,position:m.position},...De])},[W,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const vt=oe.useCallback(()=>{Z(!0),_t(Ye.current),w(O=>O.filter(Q=>Q.toastId!==m.id)),setTimeout(()=>{k(m)},a5)},[m,k,w,Ye]);oe.useEffect(()=>{if(m.promise&&Be==="loading"||m.duration===1/0||m.type==="loading")return;let O;return R||x||Me?(()=>{if(It.current<Ke.current){const De=new Date().getTime()-Ke.current;rn.current=rn.current-De}It.current=new Date().getTime()})():(()=>{rn.current!==1/0&&(Ke.current=new Date().getTime(),O=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),vt()},rn.current))})(),()=>clearTimeout(O)},[R,x,m,Be,Me,vt]),oe.useEffect(()=>{m.delete&&(vt(),m.onDismiss==null||m.onDismiss.call(m,m))},[vt,m.delete]);function Jt(){var O;if(D!=null&&D.loading){var Q;return oe.createElement("div",{className:hi(z==null?void 0:z.loader,m==null||(Q=m.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":Be==="loading"},D.loading)}return oe.createElement(qR,{className:hi(z==null?void 0:z.loader,m==null||(O=m.classNames)==null?void 0:O.loader),visible:Be==="loading"})}const Yn=m.icon||(D==null?void 0:D[Be])||UR(Be);var yr,Ht;return oe.createElement("li",{tabIndex:0,ref:K,className:hi(ge,Ze,z==null?void 0:z.toast,m==null||(e=m.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[Be],m==null||(t=m.classNames)==null?void 0:t[Be]),"data-sonner-toast":"","data-rich-colors":(yr=m.richColors)!=null?yr:j,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":kt,"data-removed":le,"data-visible":We,"data-y-position":gr,"data-x-position":Y,"data-index":N,"data-front":Ee,"data-swiping":Se,"data-dismissible":ot,"data-type":Be,"data-invert":ft,"data-swipe-out":fe,"data-swipe-direction":M,"data-expanded":!!(R||de&&W),"data-testid":m.testId,style:{"--index":N,"--toasts-before":N,"--z-index":L.length-N,"--offset":`${le?qn:Ye.current}px`,"--initial-height":de?"auto":`${Sn}px`,...U,...m.style},onDragEnd:()=>{ke(!1),te(null),Xt.current=null},onPointerDown:O=>{O.button!==2&&(Xe||!ot||(En.current=new Date,_t(Ye.current),O.target.setPointerCapture(O.pointerId),O.target.tagName!=="BUTTON"&&(ke(!0),Xt.current={x:O.clientX,y:O.clientY})))},onPointerUp:()=>{var O,Q,ue;if(fe||!ot)return;Xt.current=null;const De=Number(((O=K.current)==null?void 0:O.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pt=Number(((Q=K.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((ue=En.current)==null?void 0:ue.getTime()),Ce=B==="x"?De:pt,Ae=Math.abs(Ce)/Fe;if(Math.abs(Ce)>=o5||Ae>.11){_t(Ye.current),m.onDismiss==null||m.onDismiss.call(m,m),P(B==="x"?De>0?"right":"left":pt>0?"down":"up"),vt(),nt(!0);return}else{var _e,mt;(_e=K.current)==null||_e.style.setProperty("--swipe-amount-x","0px"),(mt=K.current)==null||mt.style.setProperty("--swipe-amount-y","0px")}Vt(!1),ke(!1),te(null)},onPointerMove:O=>{var Q,ue,De;if(!Xt.current||!ot||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;const Fe=O.clientY-Xt.current.y,Ce=O.clientX-Xt.current.x;var Ae;const _e=(Ae=n.swipeDirections)!=null?Ae:l5(ce);!B&&(Math.abs(Ce)>1||Math.abs(Fe)>1)&&te(Math.abs(Ce)>Math.abs(Fe)?"x":"y");let mt={x:0,y:0};const Ot=Dn=>1/(1.5+Math.abs(Dn)/20);if(B==="y"){if(_e.includes("top")||_e.includes("bottom"))if(_e.includes("top")&&Fe<0||_e.includes("bottom")&&Fe>0)mt.y=Fe;else{const Dn=Fe*Ot(Fe);mt.y=Math.abs(Dn)<Math.abs(Fe)?Dn:Fe}}else if(B==="x"&&(_e.includes("left")||_e.includes("right")))if(_e.includes("left")&&Ce<0||_e.includes("right")&&Ce>0)mt.x=Ce;else{const Dn=Ce*Ot(Ce);mt.x=Math.abs(Dn)<Math.abs(Ce)?Dn:Ce}(Math.abs(mt.x)>0||Math.abs(mt.y)>0)&&Vt(!0),(ue=K.current)==null||ue.style.setProperty("--swipe-amount-x",`${mt.x}px`),(De=K.current)==null||De.style.setProperty("--swipe-amount-y",`${mt.y}px`)}},ye&&!m.jsx&&Be!=="loading"?oe.createElement("button",{"aria-label":$,"data-disabled":Xe,"data-close-button":!0,onClick:Xe||!ot?()=>{}:()=>{vt(),m.onDismiss==null||m.onDismiss.call(m,m)},className:hi(z==null?void 0:z.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(Ht=D==null?void 0:D.close)!=null?Ht:KR):null,(Be||m.icon||m.promise)&&m.icon!==null&&((D==null?void 0:D[Be])!==null||m.icon)?oe.createElement("div",{"data-icon":"",className:hi(z==null?void 0:z.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Jt():null,m.type!=="loading"?Yn:null):null,oe.createElement("div",{"data-content":"",className:hi(z==null?void 0:z.content,m==null||(o=m.classNames)==null?void 0:o.content)},oe.createElement("div",{"data-title":"",className:hi(z==null?void 0:z.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?oe.createElement("div",{"data-description":"",className:hi(be,vn,z==null?void 0:z.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),oe.isValidElement(m.cancel)?m.cancel:m.cancel&&zd(m.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||J,onClick:O=>{zd(m.cancel)&&ot&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,O),vt())},className:hi(z==null?void 0:z.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,oe.isValidElement(m.action)?m.action:m.action&&zd(m.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||ie,onClick:O=>{zd(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,O),!O.defaultPrevented&&vt())},className:hi(z==null?void 0:z.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function Q1(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function u5(n,e){const t={};return[n,e].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",u=o?r5:n5;function d(h){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?t[`${l}-${h}`]=u:t[`${l}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(u)}),t}const d5=oe.forwardRef(function(e,t){const{id:r,invert:s,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:h,offset:p,mobileOffset:m,theme:b="light",richColors:x,duration:w,style:S,visibleToasts:C=t5,toastOptions:N,dir:L=Q1(),gap:R=s5,icons:k,containerAriaLabel:j="Notifications"}=e,[H,U]=oe.useState([]),J=oe.useMemo(()=>r?H.filter(W=>W.toasterId===r):H.filter(W=>!W.toasterId),[H,r]),ie=oe.useMemo(()=>Array.from(new Set([o].concat(J.filter(W=>W.position).map(W=>W.position)))),[J,o]),[ge,be]=oe.useState([]),[he,ce]=oe.useState(!1),[ve,de]=oe.useState(!1),[z,D]=oe.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=oe.useRef(null),B=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=oe.useRef(null),M=oe.useRef(!1),P=oe.useCallback(W=>{U(se=>{var le;return(le=se.find(Z=>Z.id===W.id))!=null&&le.delete||ur.dismiss(W.id),se.filter(({id:Z})=>Z!==W.id)})},[]);return oe.useEffect(()=>ur.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{U(se=>se.map(le=>le.id===W.id?{...le,delete:!0}:le))});return}setTimeout(()=>{eC.flushSync(()=>{U(se=>{const le=se.findIndex(Z=>Z.id===W.id);return le!==-1?[...se.slice(0,le),{...se[le],...W},...se.slice(le+1)]:[W,...se]})})})}),[H]),oe.useEffect(()=>{if(b!=="system"){D(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:se})=>{D(se?"dark":"light")})}catch{W.addListener(({matches:le})=>{try{D(le?"dark":"light")}catch(Z){console.error(Z)}})}},[b]),oe.useEffect(()=>{H.length<=1&&ce(!1)},[H]),oe.useEffect(()=>{const W=se=>{var le;if(l.every(ke=>se[ke]||se.code===ke)){var Se;ce(!0),(Se=$.current)==null||Se.focus()}se.code==="Escape"&&(document.activeElement===$.current||(le=$.current)!=null&&le.contains(document.activeElement))&&ce(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[l]),oe.useEffect(()=>{if($.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,M.current=!1)}},[$.current]),oe.createElement("section",{ref:t,"aria-label":`${j} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ie.map((W,se)=>{var le;const[Z,Se]=W.split("-");return J.length?oe.createElement("ol",{key:W,dir:L==="auto"?Q1():L,tabIndex:-1,ref:$,className:h,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":Z,"data-x-position":Se,style:{"--front-toast-height":`${((le=ge[0])==null?void 0:le.height)||0}px`,"--width":`${i5}px`,"--gap":`${R}px`,...S,...u5(p,m)},onBlur:ke=>{M.current&&!ke.currentTarget.contains(ke.relatedTarget)&&(M.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||M.current||(M.current=!0,te.current=ke.relatedTarget)},onMouseEnter:()=>ce(!0),onMouseMove:()=>ce(!0),onMouseLeave:()=>{ve||ce(!1)},onDragEnd:()=>ce(!1),onPointerDown:ke=>{ke.target instanceof HTMLElement&&ke.target.dataset.dismissible==="false"||de(!0)},onPointerUp:()=>de(!1)},J.filter(ke=>!ke.position&&se===0||ke.position===W).map((ke,fe)=>{var nt,kt;return oe.createElement(c5,{key:ke.id,icons:k,index:fe,toast:ke,defaultRichColors:x,duration:(nt=N==null?void 0:N.duration)!=null?nt:w,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:s,visibleToasts:C,closeButton:(kt=N==null?void 0:N.closeButton)!=null?kt:d,interacting:ve,position:W,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:P,toasts:J.filter(Vt=>Vt.position==ke.position),heights:ge.filter(Vt=>Vt.position==ke.position),setHeights:be,expandByDefault:u,gap:R,expanded:he,swipeDirections:e.swipeDirections})})):null}))});function f5(){const{signIn:n}=LE(),[e,t]=T.useState("signIn"),[r,s]=T.useState(!1);return v.jsx("div",{className:"w-full",children:v.jsxs("form",{className:"flex flex-col gap-form-field",onSubmit:o=>{o.preventDefault(),s(!0);const l=new FormData(o.target);l.set("flow",e),n("password",l).catch(u=>{let d="";u.message.includes("Invalid password")?d="Invalid password. Please try again.":d=e==="signIn"?"Could not sign in, did you mean to sign up?":"Could not sign up, did you mean to sign in?",$e.error(d),s(!1)})},children:[v.jsx("input",{className:"auth-input-field",type:"email",name:"email",placeholder:"Email",required:!0}),v.jsx("input",{className:"auth-input-field",type:"password",name:"password",placeholder:"Password",required:!0}),v.jsx("button",{className:"auth-button",type:"submit",disabled:r,children:e==="signIn"?"Sign in":"Sign up"}),v.jsxs("div",{className:"text-center text-sm text-secondary",children:[v.jsx("span",{children:e==="signIn"?"Don't have an account? ":"Already have an account? "}),v.jsx("button",{type:"button",className:"text-primary hover:text-primary-hover hover:underline font-medium cursor-pointer",onClick:()=>t(e==="signIn"?"signUp":"signIn"),children:e==="signIn"?"Sign up instead":"Sign in instead"})]})]})})}function h5(){const{isAuthenticated:n}=B0(),{signOut:e}=LE();return n?v.jsx("button",{className:"rounded-md border border-neutral-200 px-3 py-1.5 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 hover:text-neutral-800",onClick:()=>void e(),children:"Sign out"}):null}function p5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const m5=T.forwardRef(p5);function g5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const y5=T.forwardRef(g5);function b5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const x5=T.forwardRef(b5);function v5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25"}))}const w5=T.forwardRef(v5);function S5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const af=T.forwardRef(S5);function E5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const C5=T.forwardRef(E5);function T5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const Vg=T.forwardRef(T5);function N5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const nC=T.forwardRef(N5);function A5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Fg=T.forwardRef(A5);function k5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const M5=T.forwardRef(k5);function O5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const R5=T.forwardRef(O5);function D5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ec=T.forwardRef(D5);function _5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const j5=T.forwardRef(_5);function L5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const vf=T.forwardRef(L5);function B5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const gh=T.forwardRef(B5);function z5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const q0=T.forwardRef(z5);function I5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const H5=T.forwardRef(I5);function U5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const qc=T.forwardRef(U5);function $5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const q5=T.forwardRef($5);function P5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const V5=T.forwardRef(P5);function F5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Y1=T.forwardRef(F5);function G5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const K5=T.forwardRef(G5);function W5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Q5=T.forwardRef(W5);function Y5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const X5=T.forwardRef(Y5);function J5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const Z5=T.forwardRef(J5);function eD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const P0=T.forwardRef(eD);function tD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const nD=T.forwardRef(tD);function rD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const V0=T.forwardRef(rD);function iD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const sD=T.forwardRef(iD);function oD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const aD=T.forwardRef(oD);function lD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const jo=T.forwardRef(lD);function cD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"}))}const uD=T.forwardRef(cD);function dD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const fD=T.forwardRef(dD);function hD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const pD=T.forwardRef(hD);function mD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const vi=T.forwardRef(mD);function gD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ho=T.forwardRef(gD);function yD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const X1=T.forwardRef(yD);function bD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const J1=T.forwardRef(bD);function xD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Z1=T.forwardRef(xD);function vD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Xa=T.forwardRef(vD);function wD({collapsed:n,onToggleCollapse:e,activeView:t,onViewChange:r,selectedCaseId:s,onCaseSelect:o}){const l=[{id:"editor",label:"Editor",icon:gh},{id:"hub",label:"Hub",icon:qc},{id:"goals",label:"Goals",icon:nC},{id:"chat",label:"WS Chat",icon:vi}];return n?v.jsxs("div",{className:"flex w-16 flex-col border-r border-neutral-200 bg-white",children:[v.jsx("button",{onClick:e,className:"flex h-12 items-center justify-center border-b border-neutral-200 text-neutral-500 transition hover:bg-neutral-50",children:v.jsx(R5,{className:"h-5 w-5"})}),v.jsx("nav",{className:"flex-1 py-4",children:l.map(u=>v.jsxs("button",{onClick:()=>r(u.id),className:`relative flex h-12 w-full items-center justify-center transition ${t===u.id?"bg-gray-100 text-neutral-900":"text-neutral-500 hover:bg-neutral-50"}`,title:u.label,children:[v.jsx(u.icon,{className:"h-5 w-5"}),t===u.id&&v.jsx("span",{className:"absolute inset-y-0 left-0 w-1 rounded-tr rounded-br bg-neutral-900"})]},u.id))}),v.jsx("div",{className:"border-t border-neutral-200 p-2"})]}):v.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-white",children:[v.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[v.jsx("div",{className:"mb-4 flex items-center justify-end",children:v.jsx("button",{onClick:e,className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-neutral-50",children:v.jsx(M5,{className:"h-4 w-4"})})}),v.jsx("nav",{className:"space-y-1",children:l.map(u=>v.jsxs("button",{onClick:()=>r(u.id),className:`flex w-full items-center gap-3 rounded-md px-3 py-2 text-sm transition ${t===u.id?"bg-gray-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50"}`,children:[v.jsx(u.icon,{className:"h-4 w-4"}),u.label]},u.id))})]}),v.jsx("div",{className:"flex-1"})]})}function SD({isOpen:n,onClose:e,documentId:t,documentContent:r}){const[s,o]=T.useState(""),[l,u]=T.useState([]),[d,h]=T.useState(!1),p=T.useRef(null),m=bf(Pe.chat.generateAIResponse);T.useEffect(()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})},[l]);const b=async w=>{if(w.preventDefault(),!s.trim()||d)return;const S={id:Date.now().toString(),type:"user",content:s,timestamp:Date.now()};u(N=>[...N,S]);const C=s;o(""),h(!0);try{let N=C;r&&r.trim()&&(N=`Document context: "${r.substring(0,500)}${r.length>500?"...":""}"

User question: ${C}`);const L=await m({userMessage:N,documentId:t});if(L){const R={id:(Date.now()+1).toString(),type:"ai",content:L,timestamp:Date.now()};u(k=>[...k,R])}}catch(N){console.error("AI response error:",N),$e.error("Failed to get AI response");const L={id:(Date.now()+1).toString(),type:"ai",content:"I apologize, but I'm currently unable to provide a response. Please try again later.",timestamp:Date.now()};u(R=>[...R,L])}finally{h(!1)}},x=w=>{o(w)};return n?v.jsxs("div",{className:"w-96 border-l border-gray-200 bg-white flex flex-col transition-all duration-300 ease-in-out",children:[v.jsx("div",{className:"px-6 py-5 border-b border-gray-200 bg-white",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-xl border border-gray-200 bg-white flex items-center justify-center shadow-sm",children:v.jsx(vi,{className:"w-5 h-5 text-slate-500"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-slate-900 font-sans",children:"Legal AI Assistant"}),v.jsx("p",{className:"text-xs text-slate-500 mt-1 font-sans",children:"Get instant legal insights and document analysis"})]})]}),v.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white border border-transparent hover:border-gray-200 rounded-lg transition-colors","aria-label":"Close AI Assistant",children:v.jsx(Xa,{className:"w-4 h-4 text-slate-400"})})]})}),v.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-4 min-h-0",children:[l.length===0?v.jsxs("div",{className:"text-center py-16",children:[v.jsx("div",{className:"w-14 h-14 rounded-xl border border-gray-200 bg-white flex items-center justify-center mx-auto mb-5 shadow-sm",children:v.jsx(vi,{className:"w-6 h-6 text-slate-500"})}),v.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2 font-sans",children:"Welcome to Legal AI Assistant"}),v.jsx("p",{className:"text-xs text-slate-500 max-w-xs mx-auto leading-relaxed font-sans",children:"Ask questions about legal concepts, document analysis, compliance requirements, or get help with your legal research."}),v.jsxs("div",{className:"mt-8 space-y-2 text-left",children:[v.jsx("p",{className:"text-xs font-medium text-slate-600 font-sans",children:"Try asking:"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("button",{onClick:()=>x("What are the key elements of a valid contract?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are the key elements of a valid contract?"'}),v.jsx("button",{onClick:()=>x("Help me review this document for compliance issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Help me review this document for compliance issues"'}),v.jsx("button",{onClick:()=>x("What are common legal risks in business agreements?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are common legal risks in business agreements?"'}),r&&v.jsx("button",{onClick:()=>x("Analyze this document for potential legal issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Analyze this document for potential legal issues"'})]})]})]}):v.jsxs(v.Fragment,{children:[l.map(w=>v.jsx("div",{className:`flex ${w.type==="user"?"justify-end":"justify-start"}`,children:v.jsxs("div",{className:`max-w-sm px-4 py-3 rounded-2xl shadow-sm ${w.type==="user"?"bg-slate-900 text-white":"bg-white border border-gray-200 text-slate-800"}`,children:[v.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap font-sans",children:w.content}),v.jsx("p",{className:`text-[11px] mt-2 font-sans ${w.type==="user"?"text-slate-300":"text-slate-400"}`,children:new Date(w.timestamp).toLocaleTimeString()})]})},w.id)),d&&v.jsx("div",{className:"flex justify-start",children:v.jsx("div",{className:"bg-white border border-gray-200 text-slate-700 shadow-sm px-4 py-3 rounded-2xl max-w-sm",children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs("div",{className:"flex space-x-1",children:[v.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),v.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),v.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),v.jsx("span",{className:"text-sm text-slate-600 font-sans",children:"AI is thinking..."})]})})})]}),v.jsx("div",{ref:p})]}),v.jsxs("div",{className:"px-6 py-5 border-t border-gray-200 bg-white",children:[v.jsxs("form",{onSubmit:b,className:"flex items-end space-x-3",children:[v.jsx("div",{className:"flex-1",children:v.jsx("textarea",{value:s,onChange:w=>o(w.target.value),placeholder:"Ask about legal concepts, document analysis, compliance...",className:"w-full px-4 py-3 text-sm border border-gray-200 rounded-xl bg-white resize-none focus:outline-none focus:ring-2 focus:ring-slate-900/10 font-sans leading-relaxed shadow-sm",rows:2,disabled:d,onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),b(w))}})}),v.jsx("button",{type:"submit",disabled:!s.trim()||d,className:"p-3 rounded-xl bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200 shadow-sm","aria-label":"Send message",children:v.jsx(P0,{className:"w-4 h-4"})})]}),v.jsx("p",{className:"text-xs text-slate-500 mt-3 font-sans leading-relaxed",children:"Press Enter to send, Shift+Enter for new line. AI responses are for informational purposes only."})]})]}):null}function Hn(n){this.content=n}Hn.prototype={constructor:Hn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),o=r.content.slice();return s==-1?o.push(t||n,e):(o[s+1]=e,t&&(o[s]=t)),new Hn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Hn(t)},addToStart:function(n,e){return new Hn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Hn(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),o=r.find(n);return s.splice(o==-1?s.length:o,0,e,t),new Hn(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Hn.from(n),n.size?new Hn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Hn.from(n),n.size?new Hn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Hn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Hn.from=function(n){if(n instanceof Hn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Hn(e)};function rC(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let l=0;s.text[l]==o.text[l];l++)t++;return t}if(s.content.size||o.content.size){let l=rC(s.content,o.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function iC(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let l=n.child(--s),u=e.child(--o),d=l.nodeSize;if(l==u){t-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=iC(l.content,u.content,t-1,r-1);if(h)return h}t-=d,r-=d}}class ae{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let l=0,u=0;u<t;l++){let d=this.content[l],h=u+d.nodeSize;if(h>e&&r(d,s+u,o||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,t-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",l=!0;return this.nodesBetween(e,t,(u,d)=>{let h=u.isText?u.text.slice(Math.max(e,d)-d,t-d):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new ae(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],d=l+u.nodeSize;d>e&&((l<e||d>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),s+=u.nodeSize),l=d}return new ae(r,s)}cutByIndex(e,t){return e==t?ae.empty:e==0&&t==this.content.length?this:new ae(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new ae(s,o)}addToStart(e){return new ae([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ae(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return rC(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return iC(this,e,t,r)}findIndex(e){if(e==0)return Id(0,e);if(e==this.size)return Id(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),o=r+s.nodeSize;if(o>=e)return o==e?Id(t+1,o):Id(t,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ae.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ae(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ae.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new ae(t||e,r)}static from(e){if(!e)return ae.empty;if(e instanceof ae)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ae([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ae.empty=new ae([],0);const eg={index:0,offset:0};function Id(n,e){return eg.index=n,eg.offset=e,eg}function wf(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!wf(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!wf(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Dt=class Gg{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&wf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Gg.none;if(e instanceof Gg)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};Dt.none=[];class Sf extends Error{}class we{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=oC(this.content,e+this.openStart,t);return r&&new we(r,this.openStart,this.openEnd)}removeBetween(e,t){return new we(sC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return we.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new we(ae.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new we(e,r,s)}}we.empty=new we(ae.empty,0,0);function sC(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(s==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(sC(o.content,e-s-1,t-s-1)))}function oC(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),l=n.maybeChild(s);if(o==e||l.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=oC(l.content,e-o-1,t,l);return u&&n.replaceChild(s,l.copy(u))}function ED(n,e,t){if(t.openStart>n.depth)throw new Sf("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Sf("Inconsistent open depths");return aC(n,e,t,0)}function aC(n,e,t,r){let s=n.index(r),o=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=aC(n,e,t,r+1);return o.copy(o.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return $o(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=CD(t,n);return $o(o,cC(n,l,u,e,r))}else return $o(o,Ef(n,e,r))}function lC(n,e){if(!e.type.compatibleContent(n.type))throw new Sf("Cannot join "+e.type.name+" onto "+n.type.name)}function Kg(n,e,t){let r=n.node(t);return lC(r,e.node(t)),r}function Uo(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Cc(n,e,t,r){let s=(e||n).node(t),o=0,l=e?e.index(t):s.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Uo(n.nodeAfter,r),o++));for(let u=o;u<l;u++)Uo(s.child(u),r);e&&e.depth==t&&e.textOffset&&Uo(e.nodeBefore,r)}function $o(n,e){return n.type.checkContent(e),n.copy(e)}function cC(n,e,t,r,s){let o=n.depth>s&&Kg(n,e,s+1),l=r.depth>s&&Kg(t,r,s+1),u=[];return Cc(null,n,s,u),o&&l&&e.index(s)==t.index(s)?(lC(o,l),Uo($o(o,cC(n,e,t,r,s+1)),u)):(o&&Uo($o(o,Ef(n,e,s+1)),u),Cc(e,t,s,u),l&&Uo($o(l,Ef(t,r,s+1)),u)),Cc(r,null,s,u),new ae(u)}function Ef(n,e,t){let r=[];if(Cc(null,n,t,r),n.depth>t){let s=Kg(n,e,t+1);Uo($o(s,Ef(n,e,t+1)),r)}return Cc(e,null,t,r),new ae(r)}function CD(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)s=e.node(o).copy(ae.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Pc{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Dt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!s||!o[l].isInSet(s.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Cf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,o=t;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(o),h=o-d;if(r.push(l,u,s+d),!h||(l=l.child(u),l.isText))break;o=h-1,s+=d+1}return new Pc(t,r,o)}static resolveCached(e,t){let r=ew.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else ew.set(e,r=new TD);let s=r.elts[r.i]=Pc.resolve(e,t);return r.i=(r.i+1)%ND,s}}class TD{constructor(){this.elts=[],this.i=0}}const ND=12,ew=new WeakMap;class Cf{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const AD=Object.create(null);let Xs=class Wg{constructor(e,t,r,s=Dt.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&wf(this.attrs,t||e.defaultAttrs||AD)&&Dt.sameSet(this.marks,r||Dt.none)}copy(e=null){return e==this.content?this:new Wg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Wg(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return we.empty;let s=this.resolve(e),o=this.resolve(t),l=r?0:s.sharedDepth(t),u=s.start(l),h=s.node(l).content.cut(s.pos-u,o.pos-u);return new we(h,s.depth-l,o.depth-l)}replace(e,t,r){return ED(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Pc.resolveCached(this,e)}resolveNoCache(e){return Pc.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),uC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ae.empty,s=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let d=s;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Dt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Dt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=ae.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Xs.prototype.text=void 0;class Tf extends Xs{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):uC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Tf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Tf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function uC(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Wo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new kD(e,t);if(r.next==null)return Wo.empty;let s=dC(r);r.next&&r.err("Unexpected trailing text");let o=LD(jD(s));return BD(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let o=t;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function o(l,u){let d=l.matchFragment(e,r);if(d&&(!t||d.validEnd))return ae.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let b=o(m,u.concat(p));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Wo.empty=new Wo(!0);class kD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function dC(n){let e=[];do e.push(MD(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function MD(n){let e=[];do e.push(OD(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function OD(n){let e=_D(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=RD(n,e);else break;return e}function tw(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function RD(n,e){let t=tw(n),r=t;return n.eat(",")&&(n.next!="}"?r=tw(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function DD(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let o in t){let l=t[o];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function _D(n){if(n.eat("(")){let e=dC(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=DD(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function jD(n){let e=[[]];return s(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,d){let h={term:d,to:u};return e[l].push(h),h}function s(l,u){l.forEach(d=>d.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],u);if(d==l.exprs.length-1)return h;s(h,u=t())}else if(l.type=="star"){let d=t();return r(u,d),s(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=t();return s(o(l.expr,u),d),s(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=t();s(o(l.expr,d),p),d=p}if(l.max==-1)s(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=t();r(d,p),s(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function fC(n,e){return e-n}function nw(n,e){let t=[];return r(e),t.sort(fC);function r(s){let o=n[s];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(s);for(let l=0;l<o.length;l++){let{term:u,to:d}=o[l];!u&&t.indexOf(d)==-1&&r(d)}}}function LD(n){let e=Object.create(null);return t(nw(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);nw(n,d).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new Wo(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(fC);o.next.push({type:s[l][0],next:e[u.join(",")]||t(u)})}return o}}function BD(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],o=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:d,next:h}=s.next[u];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hC(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function pC(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let o=n[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function mC(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let o=n[s];o.validate&&o.validate(e[s])}}function gC(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new ID(n,r,e[r]);return t}let rw=class yC{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gC(e,r.attrs),this.defaultAttrs=hC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pC(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Xs(this,this.computeAttrs(e),ae.from(t),Dt.setFrom(r))}createChecked(e=null,t,r){return t=ae.from(t),this.checkContent(t),new Xs(this,this.computeAttrs(e),t,Dt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ae.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),o=s&&s.fillBefore(ae.empty,!0);return o?new Xs(this,e,t.append(o),Dt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Dt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new yC(o,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function zD(n,e,t){let r=t.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class ID{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?zD(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class yh{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=gC(e,s.attrs),this.excluded=null;let o=hC(this.attrs);this.instance=o?new Dt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Dt(this,pC(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((o,l)=>r[o]=new yh(o,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){mC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class bC{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Hn.from(e.nodes),t.marks=Hn.from(e.marks||{}),this.nodes=rw.compile(this.spec.nodes,this),this.marks=yh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Wo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?iw(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:iw(this,l.split(" "))}this.nodeFromJSON=s=>Xs.fromJSON(this,s),this.markFromJSON=s=>Dt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof rw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Tf(r,r.defaultAttrs,e,Dt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function iw(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],o=n.marks[s],l=o;if(o)t.push(o);else for(let u in n.marks){let d=n.marks[u];(s=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function HD(n){return n.tag!=null}function UD(n){return n.style!=null}class Js{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(HD(s))this.tags.push(s);else if(UD(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new ow(this,t,!1);return r.addAll(e,Dt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new ow(this,t,!0);return r.addAll(e,Dt.none,t.from,t.to),we.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(PD(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let d=l.getAttrs(t);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(l=>{r(l=aw(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(l=>{r(l=aw(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Js(e,Js.schemaRules(e)))}}const xC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},$D={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vC={ol:!0,ul:!0},Vc=1,Qg=2,Tc=4;function sw(n,e,t){return e!=null?(e?Vc:0)|(e==="full"?Qg:0):n&&n.whitespace=="pre"?Vc|Qg:t&~Tc}class Hd{constructor(e,t,r,s,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=Dt.none,this.match=o||(l&Tc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ae.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Vc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=ae.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ae.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!xC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ow{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,o,l=sw(null,t.preserveWhitespace,0)|(r?Tc:0);s?o=new Hd(s.type,s.attrs,Dt.none,!0,t.topMatch||s.type.contentMatch,l):r?o=new Hd(null,null,Dt.none,!0,null,l):o=new Hd(e.schema.topNodeType,null,Dt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,o=s.options&Qg?"full":this.localPreserveWS||(s.options&Vc)>0,{schema:l}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),t,!0),u[d]&&this.insertNode(l.text(u[d]),t,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;vC.hasOwnProperty(l)&&this.parser.normalizeLists&&qD(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:$D.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(xC.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=d&&d.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(o,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return t}addElementByRule(e,t,r,s){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,t.attrs||null,r,t.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,s){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t,r){let s,o;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,o=d,!h.length))break;if(d.solid){if(r)break;u+=2}}if(!s)return null;this.sync(o);for(let l=0;l<s.length;l++)t=this.enterInner(s[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Dt.none;for(let u of s.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):lw(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,s){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,s)),o}enterInner(e,t,r,s=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=sw(e,o,l.options);l.options&Tc&&l.content.length==0&&(u|=Tc);let d=Dt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):lw(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Hd(e,t,d,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Vc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),l=(u,d)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;d>=o;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&s?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function qD(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&vC.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function PD(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function aw(n){let e={};for(let t in n)e[t]=n[t];return e}function lw(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(s.contentMatch))return!0}}class na{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=tg(t).createDocumentFragment());let s=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,d=0;for(;u<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<o.length;)s=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,t);p&&(o.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=lf(tg(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&lf(tg(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return lf(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new na(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=cw(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return cw(e.marks)}}function cw(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function tg(n){return n.document||window.document}const uw=new WeakMap;function VD(n){let e=uw.get(n);return e===void 0&&uw.set(n,e=FD(n)),e}function FD(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function lf(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=VD(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let u,d=t?n.createElementNS(t,s):n.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let b=m.indexOf(" ");b>0?d.setAttributeNS(m.slice(0,b),m.slice(b+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let b=e[m];if(b===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:x,contentDOM:w}=lf(n,b,t,r);if(d.appendChild(x),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:d,contentDOM:u}}const wC=65535,SC=Math.pow(2,16);function GD(n,e){return n+e*SC}function dw(n){return n&wC}function KD(n){return(n-(n&wC))/SC}const EC=1,CC=2,cf=4,TC=8;class Yg{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&TC)>0}get deletedBefore(){return(this.delInfo&(EC|cf))>0}get deletedAfter(){return(this.delInfo&(CC|cf))>0}get deletedAcross(){return(this.delInfo&cf)>0}}class kr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&kr.empty)return kr.empty}recover(e){let t=0,r=dw(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+KD(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=d+h;if(e<=m){let b=h?e==d?-1:e==m?1:t:t,x=d+s+(b<0?0:p);if(r)return x;let w=e==(t<0?d:m)?null:GD(u/3,e-d),S=e==d?CC:e==m?EC:cf;return(t<0?e!=d:e!=m)&&(S|=TC),new Yg(x,S,w)}s+=p-h}return r?e+s:new Yg(e+s,0,null)}touches(e,t){let r=0,s=dw(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[u+o],p=d+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[s+t],p=this.ranges[s+r];e(u,u+h,d,d+p),o+=p-h}}invert(){return new kr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?kr.empty:new kr(e<0?[0,-e,0]:[0,0,e])}}kr.empty=new kr([]);class Fc{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Fc(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Fc;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new Yg(e,s,null)}}const ng=Object.create(null);class Qn{getMap(){return kr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ng[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ng)throw new RangeError("Duplicate use of step JSON ID "+e);return ng[e]=t,t.prototype.jsonID=e,t}}class xn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new xn(e,null)}static fail(e){return new xn(null,e)}static fromReplace(e,t,r,s){try{return xn.ok(e.replace(t,r,s))}catch(o){if(o instanceof Sf)return xn.fail(o.message);throw o}}}function F0(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(F0(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return ae.fromArray(r)}class Ks extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new we(F0(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return xn.fromReplace(e,this.from,this.to,o)}invert(){return new xi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ks(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ks&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ks(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ks(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("addMark",Ks);class xi extends Qn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new we(F0(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return xn.fromReplace(e,this.from,this.to,r)}invert(){return new Ks(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xi(t.pos,r.pos,this.mark)}merge(e){return e instanceof xi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xi(t.from,t.to,e.markFromJSON(t.mark))}}Qn.jsonID("removeMark",xi);class Ws extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return xn.fromReplace(e,this.pos,this.pos+1,new we(ae.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Ws(this.pos,t.marks[s]);return new Ws(this.pos,this.mark)}}return new Qo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ws(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ws(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("addNodeMark",Ws);class Qo extends Qn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return xn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return xn.fromReplace(e,this.pos,this.pos+1,new we(ae.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Ws(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Qo(t.pos,e.markFromJSON(t.mark))}}Qn.jsonID("removeNodeMark",Qo);class Tn extends Qn{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&Xg(e,this.from,this.to)?xn.fail("Structure replace would overwrite content"):xn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new kr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Tn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Tn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Tn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?we.empty:new we(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Tn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?we.empty:new we(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Tn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Tn(t.from,t.to,we.fromJSON(e,t.slice),!!t.structure)}}Qn.jsonID("replace",Tn);class kn extends Qn{constructor(e,t,r,s,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(Xg(e,this.from,this.gapFrom)||Xg(e,this.gapTo,this.to)))return xn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return xn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?xn.fromReplace(e,this.from,this.to,r):xn.fail("Content does not fit in gap")}getMap(){return new kr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new kn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new kn(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new kn(t.from,t.to,t.gapFrom,t.gapTo,we.fromJSON(e,t.slice),t.insert,!!t.structure)}}Qn.jsonID("replaceAround",kn);function Xg(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function WD(n,e,t,r){let s=[],o=[],l,u;n.doc.nodesBetween(e,t,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let b=Math.max(h,e),x=Math.min(h+d.nodeSize,t),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==b&&l.mark.eq(m[S])?l.to=x:s.push(l=new xi(b,x,m[S])));u&&u.to==b?u.to=x:o.push(u=new Ks(b,x,r))}}),s.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function QD(n,e,t,r){let s=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof yh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,t);for(let p=0;p<d.length;p++){let m=d[p],b;for(let x=0;x<s.length;x++){let w=s[x];w.step==o-1&&m.eq(s[x].style)&&(b=w)}b?(b.to=h,b.step=o):s.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),s.forEach(l=>n.step(new xi(l.from,l.to,l.style)))}function G0(n,e,t,r=t.contentMatch,s=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new Tn(u,p,we.empty));else{r=m;for(let b=0;b<h.marks.length;b++)t.allowsMarkType(h.marks[b].type)||n.step(new xi(u,p,h.marks[b]));if(s&&h.isText&&t.whitespace!="pre"){let b,x=/\r?\n|\r/g,w;for(;b=x.exec(h.text);)w||(w=new we(ae.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new Tn(u+b.index,u+b.index+b[0].length,w))}}u=p}if(!r.validEnd){let d=r.fillBefore(ae.empty,!0);n.replace(u,u,new we(d,0,0))}for(let d=l.length-1;d>=0;d--)n.step(l[d])}function YD(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function hl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,s=0,o=0;;--r){let l=n.$from.node(r),u=n.$from.index(r)+s,d=n.$to.indexAfter(r)-o;if(r<n.depth&&l.canReplace(u,d,t))return r;if(r==0||l.type.spec.isolating||!YD(l,u,d))break;u&&(s=1),d<l.childCount&&(o=1)}return null}function XD(n,e,t){let{$from:r,$to:s,depth:o}=e,l=r.before(o+1),u=s.after(o+1),d=l,h=u,p=ae.empty,m=0;for(let w=o,S=!1;w>t;w--)S||r.index(w)>0?(S=!0,p=ae.from(r.node(w).copy(p)),m++):d--;let b=ae.empty,x=0;for(let w=o,S=!1;w>t;w--)S||s.after(w+1)<s.end(w)?(S=!0,b=ae.from(s.node(w).copy(b)),x++):h++;n.step(new kn(d,h,l,u,new we(p.append(b),m,x),p.size-m,!0))}function K0(n,e,t=null,r=n){let s=JD(n,e),o=s&&ZD(r,e);return o?s.map(fw).concat({type:e,attrs:t}).concat(o.map(fw)):null}function fw(n){return{type:n,attrs:null}}function JD(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,s,l)?o:null}function ZD(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<s;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:l}function e3(n,e,t){let r=ae.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ae.from(t[l].type.create(t[l].attrs,r))}let s=e.start,o=e.end;n.step(new kn(s,o,s,o,new we(r,0,0),t.length,!0))}function t3(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let d=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,d)&&n3(n.doc,n.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!w?h=!1:!x&&w&&(h=!0)}h===!1&&AC(n,l,u,o),G0(n,n.mapping.slice(o).map(u,1),r,void 0,h===null);let p=n.mapping.slice(o),m=p.map(u,1),b=p.map(u+l.nodeSize,1);return n.step(new kn(m,b,m+1,b-1,new we(ae.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&NC(n,l,u,o),!1}})}function NC(n,e,t,r){e.forEach((s,o)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let d=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function AC(n,e,t,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function n3(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function r3(n,e,t,r,s){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,s||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new kn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new we(ae.from(l),0,0),1,!0))}function is(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,l=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=t-2;h>o;h--,p--){let m=s.node(h),b=s.index(h);if(m.type.spec.isolating)return!1;let x=m.content.cutByIndex(b,m.childCount),w=r&&r[p+1];w&&(x=x.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(b+1,m.childCount)||!S.type.validContent(x))return!1}let u=s.indexAfter(o),d=r&&r[0];return s.node(o).canReplaceWith(u,u,d?d.type:s.node(o+1).type)}function i3(n,e,t=1,r){let s=n.doc.resolve(e),o=ae.empty,l=ae.empty;for(let u=s.depth,d=s.depth-t,h=t-1;u>d;u--,h--){o=ae.from(s.node(u).copy(o));let p=r&&r[h];l=ae.from(p?p.type.create(p.attrs,l):s.node(u).copy(l))}n.step(new Tn(e,e,new we(o.append(l),t,t),!0))}function ro(n,e){let t=n.resolve(e),r=t.index();return kC(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function s3(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function kC(n,e){return!!(n&&e&&!n.isLeaf&&s3(n,e))}function bh(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,l,u=r.index(s);if(s==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(o=r.node(s).maybeChild(u-1),l=r.node(s+1)),o&&!o.isTextblock&&kC(o,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function o3(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(s&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);AC(n,p.node(),p.before(),u)}l.inlineContent&&G0(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let d=n.mapping.slice(u),h=d.map(e-t);if(n.step(new Tn(h,d.map(e+t,-1),we.empty,!0)),r===!0){let p=n.doc.resolve(h);NC(n,p.node(),p.before(),n.steps.length)}return n}function a3(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,t))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,t))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function MC(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let o=0;o<t.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(d,d,s);else{let m=h.contentMatchAt(d).findWrapping(s.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function xh(n,e,t=e,r=we.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return OC(s,o,r)?new Tn(e,t,r):new l3(s,o,r).fit()}function OC(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class l3{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ae.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=ae.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,l=r.depth,u=s.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let d=new we(o,l,u);return e>-1?new kn(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new Tn(r.pos,s.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=rg(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,m=null;if(t==1&&(l?h.matchType(l.type)||(m=h.fillBefore(ae.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(t==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=rg(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new we(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=rg(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new we(yc(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new we(yc(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:m,type:b}=this.frontier[t];if(s){for(let S=0;S<s.childCount;S++)p.push(s.child(S));m=m.matchFragment(s)}let x=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let S=u.child(h),C=m.matchType(S.type);if(!C)break;h++,(h>1||d==0||S.content.size)&&(m=C,p.push(RC(S.mark(b.allowedMarks(S.marks)),h==1?d:0,h==u.childCount?x:-1)))}let w=h==u.childCount;w||(x=-1),this.placed=bc(this.placed,t,ae.from(p)),this.frontier[t].match=m,w&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,C=u;S<x;S++){let N=C.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),C=N.content}this.unplaced=w?e==0?we.empty:new we(yc(l.content,e-1,1),e-1,x<0?l.openEnd:e-1):new we(yc(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ig(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=ig(e,t,s,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=ig(e,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=bc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=bc(this.placed,this.depth,ae.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ae.empty,!0);t.childCount&&(this.placed=bc(this.placed,this.frontier.length,t))}}function yc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(yc(n.firstChild.content,e-1,t)))}function bc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(bc(n.lastChild.content,e-1,t)))}function rg(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function RC(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,RC(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ae.empty,!0)))),n.copy(r)}function ig(n,e,t,r,s){let o=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!c3(t,o.content,l)?u:null}function c3(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function u3(n){return n.spec.defining||n.spec.definingForContent}function d3(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),o=n.doc.resolve(t);if(OC(s,o,r))return n.step(new Tn(e,t,r));let l=_C(s,o);l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let b=s.depth,x=s.pos-1;b>0;b--,x--){let w=s.node(b).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(b)>-1?u=b:s.before(b)==x&&l.splice(1,0,-b)}let d=l.indexOf(u),h=[],p=r.openStart;for(let b=r.content,x=0;;x++){let w=b.firstChild;if(h.push(w),x==r.openStart)break;b=w.content}for(let b=p-1;b>=0;b--){let x=h[b],w=u3(x.type);if(w&&!x.sameMarkup(s.node(Math.abs(u)-1)))p=b;else if(w||!x.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let x=(b+p+1)%(r.openStart+1),w=h[x];if(w)for(let S=0;S<l.length;S++){let C=l[(S+d)%l.length],N=!0;C<0&&(N=!1,C=-C);let L=s.node(C-1),R=s.index(C-1);if(L.canReplaceWith(R,R,w.type,w.marks))return n.replace(s.before(C),N?o.after(C):t,new we(DC(r.content,0,r.openStart,x),x,r.openEnd))}}let m=n.steps.length;for(let b=l.length-1;b>=0&&(n.replace(e,t,r),!(n.steps.length>m));b--){let x=l[b];x<0||(e=s.before(x),t=o.after(x))}}function DC(n,e,t,r,s){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(DC(o.content,e+1,t,r,o)))}if(e>r){let o=s.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(ae.empty,!0))}return n}function f3(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=a3(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new we(ae.from(r),0,0))}function h3(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),o=_C(r,s);for(let l=0;l<o.length;l++){let u=o[l],d=l==o.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function _C(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let o=n.start(s);if(o<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&t.push(s)}return t}class Ja extends Qn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return xn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return xn.fromReplace(e,this.pos,this.pos+1,new we(ae.from(s),0,t.isLeaf?0:1))}getMap(){return kr.empty}invert(e){return new Ja(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ja(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ja(t.pos,t.attr,t.value)}}Qn.jsonID("attr",Ja);class Gc extends Qn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return xn.ok(r)}getMap(){return kr.empty}invert(e){return new Gc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gc(t.attr,t.value)}}Qn.jsonID("docAttr",Gc);let tl=class extends Error{};tl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};tl.prototype=Object.create(Error.prototype);tl.prototype.constructor=tl;tl.prototype.name="TransformError";class W0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Fc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new tl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=we.empty){let s=xh(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new we(ae.from(r),0,0))}delete(e,t){return this.replace(e,t,we.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return d3(this,e,t,r),this}replaceRangeWith(e,t,r){return f3(this,e,t,r),this}deleteRange(e,t){return h3(this,e,t),this}lift(e,t){return XD(this,e,t),this}join(e,t=1){return o3(this,e,t),this}wrap(e,t){return e3(this,e,t),this}setBlockType(e,t=e,r,s=null){return t3(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return r3(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new Ja(e,t,r)),this}setDocAttribute(e,t){return this.step(new Gc(e,t)),this}addNodeMark(e,t){return this.step(new Ws(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Dt)t.isInSet(r.marks)&&this.step(new Qo(e,t));else{let s=r.marks,o,l=[];for(;o=t.isInSet(s);)l.push(new Qo(e,o)),s=o.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,t=1,r){return i3(this,e,t,r),this}addMark(e,t,r){return WD(this,e,t,r),this}removeMark(e,t,r){return QD(this,e,t,r),this}clearIncompatible(e,t,r){return G0(this,e,t,r),this}}const sg=Object.create(null);class Ve{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new jC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=we.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(h.pos),u?we.empty:t),u==0&&mw(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),mw(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new Ue(e):Va(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let l=t<0?Va(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Va(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Or(e.node(0))}static atStart(e){return Va(e,e,0,0,1)||new Or(e)}static atEnd(e){return Va(e,e,e.content.size,e.childCount,-1)||new Or(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=sg[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in sg)throw new RangeError("Duplicate use of selection JSON ID "+e);return sg[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Ue.between(this.$anchor,this.$head).getBookmark()}}Ve.prototype.visible=!0;class jC{constructor(e,t){this.$from=e,this.$to=t}}let hw=!1;function pw(n){!hw&&!n.parent.inlineContent&&(hw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Ue extends Ve{constructor(e,t=e){pw(e),pw(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ve.near(r);let s=e.resolve(t.map(this.anchor));return new Ue(s.parent.inlineContent?s:r,r)}replace(e,t=we.empty){if(super.replace(e,t),t==we.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ue&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new vh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ue(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=Ve.findFrom(t,r,!0)||Ve.findFrom(t,-r,!0);if(o)t=o.$head;else return Ve.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Ve.findFrom(e,-r,!0)||Ve.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Ue(e,t)}}Ve.jsonID("text",Ue);class vh{constructor(e,t){this.anchor=e,this.head=t}map(e){return new vh(e.map(this.anchor),e.map(this.head))}resolve(e){return Ue.between(e.resolve(this.anchor),e.resolve(this.head))}}class ze extends Ve{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?Ve.near(o):new ze(o)}content(){return new we(ae.from(this.node),0,0)}eq(e){return e instanceof ze&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Q0(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ze(e.resolve(t.anchor))}static create(e,t){return new ze(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ze.prototype.visible=!1;Ve.jsonID("node",ze);class Q0{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new vh(r,r):new Q0(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ze.isSelectable(r)?new ze(t):Ve.near(t)}}class Or extends Ve{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=we.empty){if(t==we.empty){e.delete(0,e.doc.content.size);let r=Ve.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Or(e)}map(e){return new Or(e)}eq(e){return e instanceof Or}getBookmark(){return p3}}Ve.jsonID("all",Or);const p3={map(){return this},resolve(n){return new Or(n)}};function Va(n,e,t,r,s,o=!1){if(e.inlineContent)return Ue.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!o&&ze.isSelectable(u))return ze.create(n,t-(s<0?u.nodeSize:0))}else{let d=Va(n,u,t+s,s<0?u.childCount:0,s,o);if(d)return d}t+=u.nodeSize*s}return null}function mw(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof Tn||s instanceof kn))return;let o=n.mapping.maps[r],l;o.forEach((u,d,h,p)=>{l==null&&(l=p)}),n.setSelection(Ve.near(n.doc.resolve(l),t))}const gw=1,Ud=2,yw=4;class m3 extends W0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|gw)&~Ud,this.storedMarks=null,this}get selectionSet(){return(this.updated&gw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ud,this}ensureMarks(e){return Dt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ud)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Ud,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Dt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Ve.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=yw,this}get scrolledIntoView(){return(this.updated&yw)>0}}function bw(n,e){return!e||!n?n:n.bind(e)}class xc{constructor(e,t,r){this.name=e,this.init=bw(t.init,r),this.apply=bw(t.apply,r)}}const g3=[new xc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new xc("selection",{init(n,e){return n.selection||Ve.atStart(e.doc)},apply(n){return n.selection}}),new xc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new xc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class og{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=g3.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xc(r.key,r.spec.state,r))})}}class Qa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=s?s[l].n:0,h=s?s[l].state:this,p=d<t.length&&u.spec.appendTransaction.call(u,d?t.slice(d):t,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<l?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),o=!0}s&&(s[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qa(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new m3(this)}static create(e){let t=new og(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qa(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new og(this.schema,e.plugins),r=t.fields,s=new Qa(t);for(let o=0;o<r.length;o++){let l=r[o].name;s[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new og(e.schema,e.plugins),o=new Qa(s);return s.fields.forEach(l=>{if(l.name=="doc")o.doc=Xs.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=Ve.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=h.fromJSON.call(d,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function LC(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=LC(s,e,{})),t[r]=s}return t}class Wt{constructor(e){this.spec=e,this.props={},e.props&&LC(e.props,this,this.props),this.key=e.key?e.key.key:BC("plugin")}getState(e){return e[this.key]}}const ag=Object.create(null);function BC(n){return n in ag?n+"$"+ ++ag[n]:(ag[n]=0,n+"$")}class dn{constructor(e="key"){this.key=BC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Un=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},nl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Jg=null;const es=function(n,e,t){let r=Jg||(Jg=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},y3=function(){Jg=null},Yo=function(n,e,t,r){return t&&(xw(n,e,t,r,-1)||xw(n,e,t,r,1))},b3=/^(img|br|input|textarea|hr)$/i;function xw(n,e,t,r,s){for(var o;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Gr(n))){let l=n.parentNode;if(!l||l.nodeType!=1||cu(n)||b3.test(n.nodeName)||n.contentEditable=="false")return!1;e=Un(n)+(s<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else n=l,e=s<0?Gr(n):0}else return!1}}function Gr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function x3(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Gr(n)}else if(n.parentNode&&!cu(n))e=Un(n),n=n.parentNode;else return null}}function v3(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!cu(n))e=Un(n)+1,n=n.parentNode;else return null}}function w3(n,e,t){for(let r=e==0,s=e==Gr(n);r||s;){if(n==t)return!0;let o=Un(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,s=s&&o==Gr(n)}}function cu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const wh=function(n){return n.focusNode&&Yo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ro(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function S3(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function E3(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Gr(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Gr(r.startContainer),r.startOffset)}}}const Si=typeof navigator<"u"?navigator:null,vw=typeof document<"u"?document:null,io=Si&&Si.userAgent||"",Zg=/Edge\/(\d+)/.exec(io),zC=/MSIE \d/.exec(io),e0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(io),hr=!!(zC||e0||Zg),Zs=zC?document.documentMode:e0?+e0[1]:Zg?+Zg[1]:0,Wr=!hr&&/gecko\/(\d+)/i.test(io);Wr&&+(/Firefox\/(\d+)/.exec(io)||[0,0])[1];const t0=!hr&&/Chrome\/(\d+)/.exec(io),Kn=!!t0,IC=t0?+t0[1]:0,Zn=!hr&&!!Si&&/Apple Computer/.test(Si.vendor),rl=Zn&&(/Mobile\/\w+/.test(io)||!!Si&&Si.maxTouchPoints>2),Fr=rl||(Si?/Mac/.test(Si.platform):!1),C3=Si?/Win/.test(Si.platform):!1,ts=/Android \d/.test(io),uu=!!vw&&"webkitFontSmoothing"in vw.documentElement.style,T3=uu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function N3(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Qi(n,e){return typeof n=="number"?n:n[e]}function A3(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function ww(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=nl(l);continue}let u=l,d=u==o.body,h=d?N3(o):A3(u),p=0,m=0;if(e.top<h.top+Qi(r,"top")?m=-(h.top-e.top+Qi(s,"top")):e.bottom>h.bottom-Qi(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+Qi(s,"top")-h.top:e.bottom-h.bottom+Qi(s,"bottom")),e.left<h.left+Qi(r,"left")?p=-(h.left-e.left+Qi(s,"left")):e.right>h.right-Qi(r,"right")&&(p=e.right-h.right+Qi(s,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let x=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-x,C=u.scrollTop-w;e={left:e.left-S,top:e.top-C,right:e.right-S,bottom:e.bottom-C}}let b=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(b))break;l=b=="absolute"?l.offsetParent:nl(l)}}function k3(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=t-20){r=u,s=d.top;break}}return{refDOM:r,refTop:s,stack:HC(n.dom)}}function HC(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=nl(r));return e}function M3({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;UC(t,r==0?0:r-e)}function UC(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:o}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let $a=null;function O3(n){if(n.setActive)return n.setActive();if($a)return n.focus($a);let e=HC(n);n.focus($a==null?{get preventScroll(){return $a={preventScroll:!0},!0}}:void 0),$a||($a=!1,UC(e,0))}function $C(n,e){let t,r=2e8,s,o=0,l=e.top,u=e.top,d,h;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=es(p).getClientRects();else continue;for(let x=0;x<b.length;x++){let w=b[x];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){t=p,r=S,s=S&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!t&&d&&(t=d,s=h,r=0),t&&t.nodeType==3?R3(t,s):!t||r&&t.nodeType==1?{node:n,offset:o}:$C(t,s)}function R3(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=Hs(r,1);if(o.top!=o.bottom&&Y0(e,o))return{node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Y0(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function D3(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function _3(n,e,t){let{node:r,offset:s}=$C(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,o)}function j3(n,e,t,r){let s=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?s=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function qC(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=s;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(Y0(e,h))return qC(l,e,h)}}if((o=(o+1)%r)==s)break}return n}function L3(n,e){let t=n.dom.ownerDocument,r,s=0,o=E3(t,e.left,e.top);o&&({node:r,offset:s}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!Y0(e,h)||(l=qC(n.dom,e,h),!l))return null}if(Zn)for(let h=l;r&&h;h=nl(h))h.draggable&&(r=void 0);if(l=D3(l,e),r){if(Wr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let h;uu&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=j3(n,r,s,e))}u==null&&(u=_3(n,l,e));let d=n.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function Sw(n){return n.top<n.bottom||n.left<n.right}function Hs(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Sw(r))return r}return Array.prototype.find.call(t,Sw)||n.getBoundingClientRect()}const B3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function PC(n,e,t){let{node:r,offset:s,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=uu||Wr;if(r.nodeType==3)if(l&&(B3.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let d=Hs(es(r,s,s),t);if(Wr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Hs(es(r,s-1,s-1),-1);if(h.top==d.top){let p=Hs(es(r,s,s+1),-1);if(p.top!=d.top)return hc(p,p.left<h.left)}}return d}else{let d=s,h=s,p=t<0?1:-1;return t<0&&!s?(h++,p=-1):t>=0&&s==r.nodeValue.length?(d--,p=1):t<0?d--:h++,hc(Hs(es(r,d,h),p),p<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1];if(d.nodeType==1)return lg(d.getBoundingClientRect(),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];if(d.nodeType==1)return lg(d.getBoundingClientRect(),!0)}return lg(r.getBoundingClientRect(),t>=0)}if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1],h=d.nodeType==3?es(d,Gr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return hc(Hs(h,1),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?es(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return hc(Hs(h,-1),!0)}return hc(Hs(r.nodeType==3?es(r):r,-t),t>=0)}function hc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function lg(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function VC(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function z3(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return VC(n,e,()=>{let{node:o}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=PC(n,s.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=es(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(t=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const I3=/[\u0590-\u08ac]/;function H3(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,l=s==r.parent.content.size,u=n.domSelection();return u?!I3.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:VC(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),b=u.caretBidiLevel;u.modify("move",t,"character");let x=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:S}=n.domSelectionRange(),C=w&&!x.contains(w.nodeType==1?w:w.parentNode)||d==w&&h==S;try{u.collapse(p,m),d&&(d!=p||h!=m)&&u.extend&&u.extend(d,h)}catch{}return b!=null&&(u.caretBidiLevel=b),C}):r.pos==r.start()||r.pos==r.end()}let Ew=null,Cw=null,Tw=!1;function U3(n,e,t){return Ew==e&&Cw==t?Tw:(Ew=e,Cw=t,Tw=t=="up"||t=="down"?z3(n,e,t):H3(n,e,t))}const Qr=0,Nw=1,Lo=2,Ei=3;class du{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Qr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Un(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof GC){s=e-o;break}o=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof FC&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Un(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Un(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let l=r,u=0;;u++){let d=this.children[u],h=l+d.size;if(s==-1&&e<=h){let p=l+d.border;if(e>=p&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,p);e=l;for(let m=u;m>0;m--){let b=this.children[m-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){s=Un(b.dom)+1;break}e-=b.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Un(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let x=0,w=0;x<this.children.length;x++){let S=this.children[x],C=w+S.size;if(o>w&&l<C)return S.setSelection(e-w-S.border,t-w-S.border,r,s);w=C}let u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Wr||Zn)&&e==t){let{node:x,offset:w}=u;if(x.nodeType==3){if(m=!!(w&&x.nodeValue[w-1]==`
`),m&&w==x.nodeValue.length)for(let S=x,C;S;S=S.parentNode){if(C=S.nextSibling){C.nodeName=="BR"&&(u=d={node:C.parentNode,offset:Un(C)+1});break}let N=S.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let S=x.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Wr&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let x=p.focusNode.childNodes[p.focusOffset];x&&x.contentEditable=="false"&&(s=!0)}if(!(s||m&&Zn)&&Yo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Yo(d.node,d.offset,p.focusNode,p.focusOffset))return;let b=!1;if((h.extend||e==t)&&!(m&&Wr)){h.collapse(u.node,u.offset);try{e!=t&&h.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let w=u;u=d,d=w}let x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,d=l-o.border;if(e>=u&&t<=d){this.dirty=e==r||t==l?Lo:Nw,e==u&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ei:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Lo:Ei}r=l}this.dirty=Lo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Lo:Nw;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class FC extends du{constructor(e,t,r,s){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Qr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class $3 extends du{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xo extends du{constructor(e,t,r,s,o){super(e,[],r,s),this.mark=t,this.spec=o}static create(e,t,r,s){let o=s.nodeViews[t.type.name],l=o&&o(t,s,r);return(!l||!l.dom)&&(l=na.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Xo(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ei||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ei&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Qr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qr}}slice(e,t,r){let s=Xo.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=r0(o,t,l,r)),e>0&&(o=r0(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class eo extends du{constructor(e,t,r,s,o,l,u,d,h){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,o,l){let u=o.nodeViews[t.type.name],d,h=u&&u(t,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,s),p=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=na.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let b=p;return p=QC(p,r,t),h?d=new q3(e,t,r,s,p,m||null,b,h,o,l+1):t.isText?new Sh(e,t,r,s,p,b,o):new eo(e,t,r,s,p,m||null,b,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ae.empty)}return e}matchesNode(e,t,r){return this.dirty==Qr&&e.eq(this.node)&&Nf(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,d=new V3(this,l&&l.node,e);K3(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?Dt.none:this.node.child(p).marks,r,e),d.placeWidget(h,e,s)},(h,p,m,b)=>{d.syncToMarks(h.marks,r,e);let x;d.findNodeMatch(h,p,m,b)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(x=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,x,e)||d.updateNextNode(h,p,m,e,b,s)||d.addNode(h,p,m,e,s),s+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Lo)&&(l&&this.protectLocalComposition(e,l),KC(this.contentDOM,this.children,e),rl&&W3(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Ue)||r<t||s>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=Q3(this.node.content,l,r-t,s-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new $3(this,o,t,s);e.input.compositionNodes.push(l),this.children=r0(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==Ei||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Qr}updateOuterDeco(e){if(Nf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=WC(this.dom,this.nodeDOM,n0(this.outerDeco,this.node,t),n0(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Aw(n,e,t,r,s){QC(r,e,n);let o=new eo(void 0,n,e,t,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Sh extends eo{constructor(e,t,r,s,o,l,u){super(e,t,r,s,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Ei||this.dirty!=Qr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Qr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Qr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),o=document.createTextNode(s.text);return new Sh(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ei)}get domAtom(){return!1}isText(e){return this.node.text==e}}class GC extends du{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class q3 extends eo{constructor(e,t,r,s,o,l,u,d,h,p){super(e,t,r,s,o,l,u,h,p),this.spec=d}update(e,t,r,s){if(this.dirty==Ei)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function KC(n,e,t){let r=n.firstChild,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=kw(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(l instanceof Xo){let d=r?r.previousSibling:n.lastChild;KC(l.contentDOM,l.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=kw(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Nc=function(n){n&&(this.nodeName=n)};Nc.prototype=Object.create(null);const Bo=[new Nc];function n0(n,e,t){if(n.length==0)return Bo;let r=t?Bo[0]:new Nc,s=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&s.push(r=new Nc(l.nodeName));for(let u in l){let d=l[u];d!=null&&(t&&s.length==1&&s.push(r=new Nc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return s}function WC(n,e,t,r){if(t==Bo&&r==Bo)return e;let s=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let d;u&&u.nodeName==l.nodeName&&s!=n&&(d=s.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(s),u=Bo[0]),s=d}P3(s,u||Bo[0],l)}return s}function P3(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&n.classList.add(s[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function QC(n,e,t){return WC(n,n,Bo,n0(e,t,n.nodeType!=1))}function Nf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function kw(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class V3{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=F3(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;s<l&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Qr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=d;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let d=Xo.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,s){let o=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,s,o){let l=this.top.children[s];return l.dirty==Ei&&l.dom==l.contentDOM&&(l.dirty=Lo),l.update(e,t,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,o,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof eo){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,b=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Ei&&Nf(t,d.outerDeco));if(!b&&d.update(e,t,r,s))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(m=this.recreateWrapper(d,e,t,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Lo,m.updateChildren(s,l+1),m.dirty=Qr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Nf(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=eo.create(this.top,t,r,s,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,t,r,s,o){let l=eo.create(this.top,e,t,r,s,o);l.contentDOM&&l.updateChildren(s,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new FC(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Xo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Sh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Zn||Kn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new GC(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function F3(n,e){let t=e,r=t.children.length,s=n.childCount,o=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof Xo)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=u.node;if(d){if(d!=n.child(s-1))break;--s,o.set(u,s),l.push(u)}}return{index:s,matched:o,matches:l.reverse()}}function G3(n,e){return n.type.side-e.type.side}function K3(n,e,t,r){let s=e.locals(n),o=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,s,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,m;for(;l<s.length&&s[l].to==o;){let C=s[l++];C.widget&&(p?(m||(m=[p])).push(C):p=C)}if(p)if(m){m.sort(G3);for(let C=0;C<m.length;C++)t(m[C],h,!!d)}else t(p,h,!!d);let b,x;if(d)x=-1,b=d,d=null;else if(h<n.childCount)x=h,b=n.child(h++);else break;for(let C=0;C<u.length;C++)u[C].to<=o&&u.splice(C--,1);for(;l<s.length&&s[l].from<=o&&s[l].to>o;)u.push(s[l++]);let w=o+b.nodeSize;if(b.isText){let C=w;l<s.length&&s[l].from<C&&(C=s[l].from);for(let N=0;N<u.length;N++)u[N].to<C&&(C=u[N].to);C<w&&(d=b.cut(C-o),b=b.cut(0,C-o),w=C,x=-1)}else for(;l<s.length&&s[l].to<w;)l++;let S=b.isInline&&!b.isLeaf?u.filter(C=>!C.inline):u.slice();r(b,S,e.forChild(o,b),x),o=w}}function W3(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function Q3(n,e,t,r){for(let s=0,o=0;s<n.childCount&&o<=r;){let l=n.child(s++),u=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;s<n.childCount;){let h=n.child(s++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?d.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function r0(n,e,t,r,s){let o=[];for(let l=0,u=0;l<n.length;l++){let d=n[l],h=u,p=u+=d.size;h>=t||p<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,r)),s&&(o.push(s),s=void 0),p>t&&o.push(d.slice(t-h,d.size,r)))}return o}function X0(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),o=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,h;if(wh(t)){for(d=l;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&ze.isSelectable(m)&&s.parent&&!(m.isInline&&w3(t.focusNode,t.focusOffset,s.dom))){let b=s.posBefore;h=new ze(l==b?u:r.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=l,b=l;for(let x=0;x<t.rangeCount;x++){let w=t.getRangeAt(x);m=Math.min(m,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=b==n.state.selection.anchor?[b,m]:[m,b],u=r.resolve(l)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let m=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=J0(n,p,u,m)}return h}function YC(n){return n.editable?n.hasFocus():JC(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ss(n,e=!1){let t=n.state.selection;if(XC(n,t),!!YC(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Kn){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Yo(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)X3(n);else{let{anchor:r,head:s}=t,o,l;Mw&&!(t instanceof Ue)&&(t.$from.parent.inlineContent||(o=Ow(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=Ow(n,t.to))),n.docView.setSelection(r,s,n,e),Mw&&(o&&Rw(o),l&&Rw(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Y3(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Mw=Zn||Kn&&IC<63;function Ow(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Zn&&s&&s.contentEditable=="false")return cg(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return cg(s);if(o)return cg(o)}}function cg(n){return n.contentEditable="true",Zn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Rw(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function Y3(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!YC(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function X3(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Un(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&hr&&Zs<=11&&(t.disabled=!0,t.disabled=!1)}function XC(n,e){if(e instanceof ze){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Dw(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Dw(n)}function Dw(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function J0(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||Ue.between(e,t,r)}function _w(n){return n.editable&&!n.hasFocus()?!1:JC(n)}function JC(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function J3(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Yo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function i0(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),o=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return o&&Ve.findFrom(o,e)}function Us(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function jw(n,e,t){let r=n.state.selection;if(r instanceof Ue)if(t.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return Us(n,new Ue(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=i0(n.state,e);return s&&s instanceof ze?Us(n,s):!1}else if(!(Fr&&t.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?ze.isSelectable(o)?Us(n,new ze(e<0?n.state.doc.resolve(s.pos-o.nodeSize):s)):uu?Us(n,new Ue(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ze&&r.node.isInline)return Us(n,new Ue(e>0?r.$to:r.$from));{let s=i0(n.state,e);return s?Us(n,s):!1}}}function Af(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ac(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function qa(n,e){return e<0?Z3(n):e_(n)}function Z3(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,o,l=!1;for(Wr&&t.nodeType==1&&r<Af(t)&&Ac(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Ac(u,-1))s=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(ZC(t))break;{let u=t.previousSibling;for(;u&&Ac(u,-1);)s=t.parentNode,o=Un(u),u=u.previousSibling;if(u)t=u,r=Af(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?s0(n,t,r):s&&s0(n,s,o)}function e_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=Af(t),o,l;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Ac(u,1))o=t,l=++r;else break}else{if(ZC(t))break;{let u=t.nextSibling;for(;u&&Ac(u,1);)o=u.parentNode,l=Un(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=Af(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}o&&s0(n,o,l)}function ZC(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function t_(n,e){for(;n&&e==n.childNodes.length&&!cu(n);)e=Un(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function n_(n,e){for(;n&&!e&&!cu(n);)e=Un(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function s0(n,e,t){if(e.nodeType!=3){let o,l;(l=t_(e,t))?(e=l,t=0):(o=n_(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(wh(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&ss(n)},50)}function Lw(n,e){let t=n.state.doc.resolve(e);if(!(Kn||C3)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Bw(n,e,t){let r=n.state.selection;if(r instanceof Ue&&!r.empty||t.indexOf("s")>-1||Fr&&t.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=i0(n.state,e);if(l&&l instanceof ze)return Us(n,l)}if(!s.parent.inlineContent){let l=e<0?s:o,u=r instanceof Or?Ve.near(l,e):Ve.findFrom(l,e);return u?Us(n,u):!1}return!1}function zw(n,e){if(!(n.state.selection instanceof Ue))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function Iw(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function r_(n){if(!Zn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Iw(n,r,"true"),setTimeout(()=>Iw(n,r,"false"),20)}return!1}function i_(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function s_(n,e){let t=e.keyCode,r=i_(e);if(t==8||Fr&&t==72&&r=="c")return zw(n,-1)||qa(n,-1);if(t==46&&!e.shiftKey||Fr&&t==68&&r=="c")return zw(n,1)||qa(n,1);if(t==13||t==27)return!0;if(t==37||Fr&&t==66&&r=="c"){let s=t==37?Lw(n,n.state.selection.from)=="ltr"?-1:1:-1;return jw(n,s,r)||qa(n,s)}else if(t==39||Fr&&t==70&&r=="c"){let s=t==39?Lw(n,n.state.selection.from)=="ltr"?1:-1:1;return jw(n,s,r)||qa(n,s)}else{if(t==38||Fr&&t==80&&r=="c")return Bw(n,-1,r)||qa(n,-1);if(t==40||Fr&&t==78&&r=="c")return r_(n)||Bw(n,1,r)||qa(n,1);if(r==(Fr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Z0(n,e){n.someProp("transformCopied",x=>{e=x(e,n)});let t=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let x=r.firstChild;t.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let l=n.someProp("clipboardSerializer")||na.fromSchema(n.state.schema),u=s2(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=i2[h.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let w=u.createElement(p[x]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",x=>x(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function e2(n,e,t,r,s){let o=s.parent.type.spec.code,l,u;if(!t&&!e)return null;let d=!!e&&(r||o||!t);if(d){if(n.someProp("transformPastedText",b=>{e=b(e,o||r,n)}),o)return u=new we(ae.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",b=>{u=b(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",b=>b(e,s,r,n));if(m)u=m;else{let b=s.marks(),{schema:x}=n.state,w=na.fromSchema(x);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let C=l.appendChild(document.createElement("p"));S&&C.appendChild(w.serializeNode(x.text(S,b)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),l=c_(t),uu&&u_(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let b=l.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;l=b}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Js.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!o_.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)u=d_(Hw(u,+p[1],+p[2]),p[4]);else if(u=we.maxOpen(a_(u.content,s),!0),u.openStart||u.openEnd){let m=0,b=0;for(let x=u.content.firstChild;m<u.openStart&&!x.type.spec.isolating;m++,x=x.firstChild);for(let x=u.content.lastChild;b<u.openEnd&&!x.type.spec.isolating;b++,x=x.lastChild);u=Hw(u,m,b)}return n.someProp("transformPasted",m=>{u=m(u,n,d)}),u}const o_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function a_(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let d=s.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&o.length&&n2(d,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=r2(l[l.length-1],o.length));let p=t2(u,d);l.push(p),s=s.matchType(p.type),o=d}}),l)return ae.from(l)}return n}function t2(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ae.from(n));return n}function n2(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let o=n2(n,e,t,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(ae.from(t2(t,n,s+1))))}}function r2(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,r2(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ae.empty,!0);return n.copy(t.append(r))}function o0(n,e,t,r,s,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),s<r-1&&(u=o0(u,e,t,r,s+1,o)),s>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(ae.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function Hw(n,e,t){return e<n.openStart&&(n=new we(o0(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new we(o0(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const i2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Uw=null;function s2(){return Uw||(Uw=document.implementation.createHTMLDocument("title"))}let ug=null;function l_(n){let e=window.trustedTypes;return e?(ug||(ug=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ug.createHTML(n)):n}function c_(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=s2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&i2[r[1].toLowerCase()])&&(n=s.map(o=>"<"+o+">").join("")+n+s.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=l_(n),s)for(let o=0;o<s.length;o++)t=t.querySelector(s[o])||t;return t}function u_(n){let e=n.querySelectorAll(Kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function d_(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let d=t.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;s=ae.from(d.create(r[u+1],s)),o++,l++}return new we(s,o,l)}const er={},tr={},f_={touchstart:!0,touchmove:!0};class h_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function p_(n){for(let e in er){let t=er[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{g_(n,r)&&!ey(n,r)&&(n.editable||!(r.type in tr))&&t(n,r)},f_[e]?{passive:!0}:void 0)}Zn&&n.dom.addEventListener("input",()=>null),a0(n)}function Qs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function m_(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function a0(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>ey(n,r))})}function ey(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function g_(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function y_(n,e){!ey(n,e)&&er[e.type]&&(n.editable||!(e.type in tr))&&er[e.type](n,e)}tr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!a2(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ts&&Kn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),rl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Ro(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||s_(n,t)?t.preventDefault():Qs(n,"key")};tr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};tr.keypress=(n,e)=>{let t=e;if(a2(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fr&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Ue)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,s,o))&&n.dispatch(o()),t.preventDefault()}};function Eh(n){return{left:n.clientX,top:n.clientY}}function b_(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ty(n,e,t,r,s){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),s,!0):u(n,t,o.node(l),o.before(l),s,!1)))return!0;return!1}function Za(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function x_(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ze.isSelectable(r)?(Za(n,new ze(t)),!0):!1}function v_(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof ze&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(ze.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?s=o.before(t.$from.depth):s=o.before(l);break}}return s!=null?(Za(n,ze.create(n.state.doc,s)),!0):!1}function w_(n,e,t,r,s){return ty(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(s?v_(n,t):x_(n,t))}function S_(n,e,t,r){return ty(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function E_(n,e,t,r){return ty(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||C_(n,t,r)}function C_(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Za(n,Ue.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o),u=s.before(o);if(l.inlineContent)Za(n,Ue.create(r,u+1,u+1+l.content.size));else if(ze.isSelectable(l))Za(n,ze.create(r,u));else continue;return!0}}function ny(n){return kf(n)}const o2=Fr?"metaKey":"ctrlKey";er.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=ny(n),s=Date.now(),o="singleClick";s-n.input.lastClick.time<500&&b_(t,n.input.lastClick)&&!t[o2]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=n.posAtCoords(Eh(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new T_(n,l,t,!!r)):(o=="doubleClick"?S_:E_)(n,l.pos,l.inside,t)?t.preventDefault():Qs(n,"pointer"))};class T_{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[o2],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let p=e.state.doc.resolve(t.pos);o=p.parent,l=p.depth?p.before():0}const u=s?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof ze&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ss(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Eh(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qs(this.view,"pointer"):w_(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Zn&&this.mightDrag&&!this.mightDrag.node.isAtom||Kn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Za(this.view,Ve.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qs(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}er.touchstart=n=>{n.input.lastTouch=Date.now(),ny(n),Qs(n,"pointer")};er.touchmove=n=>{n.input.lastTouch=Date.now(),Qs(n,"pointer")};er.contextmenu=n=>ny(n);function a2(n,e){return n.composing?!0:Zn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const N_=ts?5e3:-1;tr.compositionstart=tr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Ue&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),kf(n,!0),n.markCursor=null;else if(kf(n,!e.selection.empty),Wr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let l=o<0?s.lastChild:s.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,o=-1}}n.input.composing=!0}l2(n,N_)};tr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,l2(n,20))};function l2(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>kf(n),e))}function c2(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=k_());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function A_(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=x3(e.focusNode,e.focusOffset),r=v3(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function k_(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function kf(n,e=!1){if(!(ts&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),c2(n),e||n.docView&&n.docView.dirty){let t=X0(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function M_(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Kc=hr&&Zs<15||rl&&T3<604;er.copy=tr.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let o=Kc?null:t.clipboardData,l=r.content(),{dom:u,text:d}=Z0(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",d)):M_(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function O_(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function R_(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Wc(n,r.value,null,s,e):Wc(n,r.textContent,r.innerHTML,s,e)},50)}function Wc(n,e,t,r,s){let o=e2(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,s,o||we.empty)))return!0;if(!o)return!1;let l=O_(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function u2(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}tr.paste=(n,e)=>{let t=e;if(n.composing&&!ts)return;let r=Kc?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Wc(n,u2(r),r.getData("text/html"),s,t)?t.preventDefault():R_(n,t)};class d2{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const D_=Fr?"altKey":"ctrlKey";function f2(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[D_]}er.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,o=s.empty?null:n.posAtCoords(Eh(t)),l;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof ze?s.to-1:s.to))){if(r&&r.mightDrag)l=ze.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(l=ze.create(n.state.doc,m.posBefore))}}let u=(l||n.state.selection).content(),{dom:d,text:h,slice:p}=Z0(n,u);(!t.dataTransfer.files.length||!Kn||IC>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Kc?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Kc||t.dataTransfer.setData("text/plain",h),n.dragging=new d2(p,f2(n,t),l)};er.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};tr.dragover=tr.dragenter=(n,e)=>e.preventDefault();tr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Eh(t));if(!s)return;let o=n.state.doc.resolve(s.pos),l=r&&r.slice;l?n.someProp("transformPasted",w=>{l=w(l,n,!1)}):l=e2(n,u2(t.dataTransfer),Kc?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&f2(n,t));if(n.someProp("handleDrop",w=>w(n,t,l||we.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let d=l?MC(n.state.doc,o.pos,l):o.pos;d==null&&(d=o.pos);let h=n.state.tr;if(u){let{node:w}=r;w?w.replace(h):h.deleteSelection()}let p=h.mapping.map(d),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,b=h.doc;if(m?h.replaceRangeWith(p,p,l.content.firstChild):h.replaceRange(p,p,l),h.doc.eq(b))return;let x=h.doc.resolve(p);if(m&&ze.isSelectable(l.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new ze(x));else{let w=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((S,C,N,L)=>w=L),h.setSelection(J0(n,x,h.doc.resolve(w)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};er.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ss(n)},20))};er.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};er.beforeinput=(n,e)=>{if(Kn&&ts&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Ro(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in tr)er[n]=tr[n];function Qc(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Mf{constructor(e,t){this.toDOM=e,this.spec=t||qo,this.side=this.spec.side||0}map(e,t,r,s){let{pos:o,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new An(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Mf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Qc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class to{constructor(e,t){this.attrs=e,this.spec=t||qo}map(e,t,r,s){let o=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new An(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof to&&Qc(this.attrs,e.attrs)&&Qc(this.spec,e.spec)}static is(e){return e.type instanceof to}destroy(){}}class ry{constructor(e,t){this.attrs=e,this.spec=t||qo}map(e,t,r,s){let o=e.mapResult(t.from+s,1);if(o.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=o.pos?null:new An(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),o;return s==t.from&&!(o=e.child(r)).isText&&s+o.nodeSize==t.to}eq(e){return this==e||e instanceof ry&&Qc(this.attrs,e.attrs)&&Qc(this.spec,e.spec)}destroy(){}}class An{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new An(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new An(e,e,new Mf(t,r))}static inline(e,t,r,s){return new An(e,t,new to(r,s))}static node(e,t,r,s){return new An(e,t,new ry(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof to}get widget(){return this.type instanceof Mf}}const Fa=[],qo={};class Pt{constructor(e,t){this.local=e.length?e:Fa,this.children=t.length?t:Fa}static create(e,t){return t.length?Of(t,e,0,qo):Gn}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,s+u,o)}}map(e,t,r){return this==Gn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||qo)}mapInner(e,t,r,s,o){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,s);d&&d.type.valid(t,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?__(this.children,l||[],e,t,r,s,o):l?new Pt(l.sort(Po),Fa):Gn}add(e,t){return t.length?this==Gn?Pt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,o=0;e.forEach((u,d)=>{let h=d+r,p;if(p=p2(t,u,h)){for(s||(s=this.children.slice());o<s.length&&s[o]<d;)o+=3;s[o]==d?s[o+2]=s[o+2].addInner(u,p,h+1):s.splice(o,0,d,d+u.nodeSize,Of(p,u,h+1,qo)),o+=3}});let l=h2(o?m2(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Pt(l.length?this.local.concat(l).sort(Po):this.local,s||this.children)}remove(e){return e.length==0||this==Gn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,d=r[o+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=Gn?r[o+2]=h:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<s.length;u++)s[u].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Pt(s,r):Gn}forChild(e,t){if(this==Gn)return this;if(t.isLeaf)return Pt.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>o&&d.type instanceof to){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(s||(s=[])).push(d.copy(h,p))}}if(s){let u=new Pt(s.sort(Po),Fa);return r?new Ps([u,r]):u}return r||Gn}eq(e){if(this==e)return!0;if(!(e instanceof Pt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return iy(this.localsInner(e))}localsInner(e){if(this==Gn)return Fa;if(e.inlineContent||!this.local.some(to.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof to||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Pt.empty=new Pt([],[]);Pt.removeOverlap=iy;const Gn=Pt.empty;class Ps{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,qo));return Ps.from(r)}forChild(e,t){if(t.isLeaf)return Pt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,t);o!=Gn&&(o instanceof Ps?r=r.concat(o.members):r.push(o))}return Ps.from(r)}eq(e){if(!(e instanceof Ps)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?iy(r?t:t.sort(Po)):Fa}static from(e){switch(e.length){case 0:return Gn;case 1:return e[0];default:return new Ps(e.every(t=>t instanceof Pt)?e:e.reduce((t,r)=>t.concat(r instanceof Pt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function __(n,e,t,r,s,o,l){let u=n.slice();for(let h=0,p=o;h<t.maps.length;h++){let m=0;t.maps[h].forEach((b,x,w,S)=>{let C=S-w-(x-b);for(let N=0;N<u.length;N+=3){let L=u[N+1];if(L<0||b>L+p-m)continue;let R=u[N]+p-m;x>=R?u[N+1]=b<=R?-2:-1:b>=p&&C&&(u[N]+=C,u[N+1]+=C)}m+=C}),p=t.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=t.map(n[h]+o),m=p-s;if(m<0||m>=r.content.size){d=!0;continue}let b=t.map(n[h+1]+o,-1),x=b-s,{index:w,offset:S}=r.content.findIndex(m),C=r.maybeChild(w);if(C&&S==m&&S+C.nodeSize==x){let N=u[h+2].mapInner(t,C,p+1,n[h]+o+1,l);N!=Gn?(u[h]=m,u[h+1]=x,u[h+2]=N):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=j_(u,n,e,t,s,o,l),p=Of(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,b=0;m<p.children.length;m+=3){let x=p.children[m];for(;b<u.length&&u[b]<x;)b+=3;u.splice(b,0,p.children[m],p.children[m+1],p.children[m+2])}}return new Pt(e.sort(Po),u)}function h2(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new An(s.from+e,s.to+e,s.type))}return t}function j_(n,e,t,r,s,o,l){function u(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,s,h);m?t.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&u(n[d+2],e[d]+o+1);return t}function p2(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[o]=null);return s}function m2(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Of(n,e,t,r){let s=[],o=!1;e.forEach((u,d)=>{let h=p2(n,u,d+t);if(h){o=!0;let p=Of(h,u,t+d+1,r);p!=Gn&&s.push(d,d+u.nodeSize,p)}});let l=h2(o?m2(n):n,-t).sort(Po);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new Pt(l,s):Gn}function Po(n,e){return n.from-e.from||n.to-e.to}function iy(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[s]=o.copy(o.from,r.to),$w(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),$w(e,s,r.copy(o.from,r.to)));break}}}return e}function $w(n,e,t){for(;e<n.length&&Po(t,n[e])>0;)e++;n.splice(e,0,t)}function dg(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Gn&&e.push(r)}),n.cursorWrapper&&e.push(Pt.create(n.state.doc,[n.cursorWrapper.deco])),Ps.from(e)}const L_={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},B_=hr&&Zs<=11;class z_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class I_{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new z_,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);hr&&Zs<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),B_&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,L_)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_w(this.view)){if(this.suppressingSelectionUpdates)return ss(this.view);if(hr&&Zs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Yo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=nl(o))t.add(o);for(let o=e.anchorNode;o;o=nl(o))if(t.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&_w(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(Wr&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,b]=p;m.parentNode&&m.parentNode.parentNode==b.parentNode?b.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let b of p){let x=b.parentNode;x&&x.nodeName=="LI"&&(!m||$_(e,m)!=x)&&b.remove()}}}let h=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&wh(r)&&(h=X0(e))&&h.eq(Ve.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ss(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,l),H_(e)),this.handleDOMChange(o,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ss(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(hr&&Zs<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:b}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(o=b)}let l=s&&s.parentNode==e.target?Un(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?Un(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let qw=new WeakMap,Pw=!1;function H_(n){if(!qw.has(n)&&(qw.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Wr,Pw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Pw=!0}}function Vw(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Yo(l.node,l.offset,s,o)&&([t,r,s,o]=[s,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:o}}function U_(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Vw(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Vw(n,t):null}function $_(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function q_(n,e,t){let{node:r,fromOffset:s,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,p=d.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],wh(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Kn&&n.input.lastKeyCode===8)for(let C=o;C>s;C--){let N=r.childNodes[C-1],L=N.pmViewDesc;if(N.nodeName=="BR"&&!L){o=C;break}if(!L||L.size)break}let m=n.state.doc,b=n.someProp("domParser")||Js.fromSchema(n.state.schema),x=m.resolve(l),w=null,S=b.parse(r,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:s,to:o,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:P_,context:x});if(h&&h[0].pos!=null){let C=h[0].pos,N=h[1]&&h[1].pos;N==null&&(N=C),w={anchor:C+l,head:N+l}}return{doc:S,sel:w,from:l,to:u}}function P_(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Zn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Zn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const V_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function F_(n,e,t,r,s){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let U=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,J=X0(n,U);if(J&&!n.state.selection.eq(J)){if(Kn&&ts&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ge=>ge(n,Ro(13,"Enter"))))return;let ie=n.state.tr.setSelection(J);U=="pointer"?ie.setMeta("pointer",!0):U=="key"&&ie.scrollIntoView(),o&&ie.setMeta("composition",o),n.dispatch(ie)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let d=n.state.selection,h=q_(n,e,t),p=n.state.doc,m=p.slice(h.from,h.to),b,x;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,x="end"):(b=n.state.selection.from,x="start"),n.input.lastKeyCode=null;let w=W_(m.content,h.doc.content,h.from,b,x);if(w&&n.input.domChangeCount++,(rl&&n.input.lastIOSEnter>Date.now()-225||ts)&&s.some(U=>U.nodeType==1&&!V_.test(U.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",U=>U(n,Ro(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof Ue&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let U=Fw(n,n.state.doc,h.sel);if(U&&!U.eq(n.state.selection)){let J=n.state.tr.setSelection(U);o&&J.setMeta("composition",o),n.dispatch(J)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof Ue&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),hr&&Zs<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=h.doc.resolveNoCache(w.start-h.from),C=h.doc.resolveNoCache(w.endB-h.from),N=p.resolve(w.start),L=S.sameParent(C)&&S.parent.inlineContent&&N.end()>=w.endA;if((rl&&n.input.lastIOSEnter>Date.now()-225&&(!L||s.some(U=>U.nodeName=="DIV"||U.nodeName=="P"))||!L&&S.pos<h.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&S.pos<C.pos&&!/\S/.test(h.doc.textBetween(S.pos,C.pos,"","")))&&n.someProp("handleKeyDown",U=>U(n,Ro(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&K_(p,w.start,w.endA,S,C)&&n.someProp("handleKeyDown",U=>U(n,Ro(8,"Backspace")))){ts&&Kn&&n.domObserver.suppressSelectionUpdates();return}Kn&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),ts&&!L&&S.start()!=C.start()&&C.parentOffset==0&&S.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,C=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(U){return U(n,Ro(13,"Enter"))})},20));let R=w.start,k=w.endA,j=U=>{let J=U||n.state.tr.replace(R,k,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let ie=Fw(n,J.doc,h.sel);ie&&!(Kn&&n.composing&&ie.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(ie.head==R||ie.head==J.mapping.map(k)-1)||hr&&ie.empty&&ie.head==R)&&J.setSelection(ie)}return o&&J.setMeta("composition",o),J.scrollIntoView()},H;if(L)if(S.pos==C.pos){hr&&Zs<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ss(n),20));let U=j(n.state.tr.delete(R,k)),J=p.resolve(w.start).marksAcross(p.resolve(w.endA));J&&U.ensureMarks(J),n.dispatch(U)}else if(w.endA==w.endB&&(H=G_(S.parent.content.cut(S.parentOffset,C.parentOffset),N.parent.content.cut(N.parentOffset,w.endA-N.start())))){let U=j(n.state.tr);H.type=="add"?U.addMark(R,k,H.mark):U.removeMark(R,k,H.mark),n.dispatch(U)}else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){let U=S.parent.textBetween(S.parentOffset,C.parentOffset),J=()=>j(n.state.tr.insertText(U,R,k));n.someProp("handleTextInput",ie=>ie(n,R,k,U,J))||n.dispatch(J())}else n.dispatch(j());else n.dispatch(j())}function Fw(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:J0(n,e.resolve(t.anchor),e.resolve(t.head))}function G_(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,o=r,l,u,d;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<t.length;p++)o=t[p].removeFromSet(o);if(s.length==1&&o.length==0)u=s[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&o.length==1)u=o[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(ae.from(h).eq(n))return{mark:u,type:l}}function K_(n,e,t,r,s){if(t-e<=s.pos-r.pos||fg(r,!0,!1)<s.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(fg(o,!0,!0));return!l.parent.isTextblock||l.pos>t||fg(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function fg(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function W_(n,e,t,r,s){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let d=Math.max(0,o-Math.min(l,u));r-=l+d-o}if(l<o&&n.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&Gw(e.textBetween(o-1,o+1))&&(o+=d?1:-1),u=o+(u-l),l=o}else if(u<o){let d=r<=o&&r>=u?o-r:0;o-=d,o&&o<n.size&&Gw(n.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function Gw(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class g2{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new h_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Xw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Qw(this),Ww(this),this.nodeViews=Yw(this),this.docView=Aw(this.state.doc,Kw(this),dg(this),this.dom,this),this.domObserver=new I_(this,(r,s,o,l)=>F_(this,r,s,o,l)),this.domObserver.start(),p_(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&a0(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Xw),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(c2(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let x=Yw(this);Y_(x,this.nodeViews)&&(this.nodeViews=x,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&a0(this),this.editable=Qw(this),Ww(this);let d=dg(this),h=Kw(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,d);(m||!e.selection.eq(s.selection))&&(l=!0);let b=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&k3(this);if(l){this.domObserver.stop();let x=m&&(hr||Kn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&Q_(s.selection,e.selection);if(m){let w=Kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=A_(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Aw(e.doc,h,d,this.dom,this)),w&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&J3(this))?ss(this,x):(XC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&M3(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof ze){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&ww(this,t.getBoundingClientRect(),e)}else ww(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new d2(e.slice,e.move,s<0?void 0:ze.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=t?t(u):u))return s}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(hr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&O3(this.dom),ss(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return L3(this,e)}coordsAtPos(e,t=1){return PC(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return U3(this,t||this.state,e)}pasteHTML(e,t){return Wc(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Wc(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Z0(this,e)}destroy(){this.docView&&(m_(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],dg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,y3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return y_(this,e)}domSelectionRange(){let e=this.domSelection();return e?Zn&&this.root.nodeType===11&&S3(this.dom.ownerDocument)==this.dom&&U_(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}g2.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Kw(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[An.node(0,n.state.doc.content.size,e)]}function Ww(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:An.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Qw(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Q_(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Yw(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Y_(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Xw(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var no={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Rf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},X_=typeof navigator<"u"&&/Mac/.test(navigator.platform),J_=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $n=0;$n<10;$n++)no[48+$n]=no[96+$n]=String($n);for(var $n=1;$n<=24;$n++)no[$n+111]="F"+$n;for(var $n=65;$n<=90;$n++)no[$n]=String.fromCharCode($n+32),Rf[$n]=String.fromCharCode($n);for(var hg in no)Rf.hasOwnProperty(hg)||(Rf[hg]=no[hg]);function Z_(n){var e=X_&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||J_&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Rf:no)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const e4=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),t4=typeof navigator<"u"&&/Win/.test(navigator.platform);function n4(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))e4?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function r4(n){let e=Object.create(null);for(let t in n)e[n4(t)]=n[t];return e}function pg(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function i4(n){return new Wt({props:{handleKeyDown:sy(n)}})}function sy(n){let e=r4(n);return function(t,r){let s=Z_(r),o,l=e[pg(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[pg(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(t4&&r.ctrlKey&&r.altKey)&&(o=no[r.keyCode])&&o!=s){let u=e[pg(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const oy=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function y2(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const b2=(n,e,t)=>{let r=y2(n,t);if(!r)return!1;let s=ay(r);if(!s){let l=r.blockRange(),u=l&&hl(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=s.nodeBefore;if(A2(n,s,e,-1))return!0;if(r.parent.content.size==0&&(il(o,"end")||ze.isSelectable(o)))for(let l=r.depth;;l--){let u=xh(n.doc,r.before(l),r.after(l),we.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=n.tr.step(u);d.setSelection(il(o,"end")?Ve.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):ze.create(d.doc,s.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},s4=(n,e,t)=>{let r=y2(n,t);if(!r)return!1;let s=ay(r);return s?x2(n,s,e):!1},o4=(n,e,t)=>{let r=w2(n,t);if(!r)return!1;let s=ly(r);return s?x2(n,s,e):!1};function x2(n,e,t){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=xh(n.doc,o,d,we.empty);if(!h||h.from!=o||h instanceof Tn&&h.slice.size>=d-o)return!1;if(t){let p=n.tr.step(h);p.setSelection(Ue.create(p.doc,o)),t(p.scrollIntoView())}return!0}function il(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const v2=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=ay(r)}let l=o&&o.nodeBefore;return!l||!ze.isSelectable(l)?!1:(e&&e(n.tr.setSelection(ze.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function ay(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function w2(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const S2=(n,e,t)=>{let r=w2(n,t);if(!r)return!1;let s=ly(r);if(!s)return!1;let o=s.nodeAfter;if(A2(n,s,e,1))return!0;if(r.parent.content.size==0&&(il(o,"start")||ze.isSelectable(o))){let l=xh(n.doc,r.before(),r.after(),we.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(il(o,"start")?Ve.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):ze.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},E2=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=ly(r)}let l=o&&o.nodeAfter;return!l||!ze.isSelectable(l)?!1:(e&&e(n.tr.setSelection(ze.create(n.doc,o.pos)).scrollIntoView()),!0)};function ly(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const a4=(n,e)=>{let t=n.selection,r=t instanceof ze,s;if(r){if(t.node.isTextblock||!ro(n.doc,t.from))return!1;s=t.from}else if(s=bh(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(ze.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},l4=(n,e)=>{let t=n.selection,r;if(t instanceof ze){if(t.node.isTextblock||!ro(n.doc,t.to))return!1;r=t.to}else if(r=bh(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},c4=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&hl(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},C2=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function cy(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const u4=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),l=cy(s.contentMatchAt(o));if(!l||!s.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),d=n.tr.replaceWith(u,u,l.createAndFill());d.setSelection(Ve.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},T2=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof Or||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=cy(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(Ue.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},N2=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(is(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&hl(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function d4(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof ze&&e.selection.node.isBlock)return!r.parentOffset||!is(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,d=!1,h=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){d=r.end(x)==r.pos+(r.depth-x),h=r.start(x)==r.pos-(r.depth-x),u=cy(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),o.unshift(d&&u?{type:u}:null),l=x;break}else{if(x==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof Ue||e.selection instanceof Or)&&p.deleteSelection();let m=p.mapping.map(r.pos),b=is(p.doc,m,o.length,o);if(b||(o[0]=u?{type:u}:null,b=is(p.doc,m,o.length,o)),!b)return!1;if(p.split(m,o.length,o),!d&&h&&r.node(l).type!=u){let x=p.mapping.map(r.before(l)),w=p.doc.resolve(x);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return t&&t(p.scrollIntoView()),!0}}const f4=d4(),h4=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(ze.create(n.doc,s))),!0)};function p4(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||ro(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function A2(n,e,t,r){let s=e.nodeBefore,o=e.nodeAfter,l,u,d=s.type.spec.isolating||o.type.spec.isolating;if(!d&&p4(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let x=e.pos+o.nodeSize,w=ae.empty;for(let N=l.length-1;N>=0;N--)w=ae.from(l[N].create(null,w));w=ae.from(s.copy(w));let S=n.tr.step(new kn(e.pos-1,x,e.pos,x,new we(w,1,0),l.length,!0)),C=S.doc.resolve(x+2*l.length);C.nodeAfter&&C.nodeAfter.type==s.type&&ro(S.doc,C.pos)&&S.join(C.pos),t(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:Ve.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),b=m&&hl(m);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(m,b).scrollIntoView()),!0;if(h&&il(o,"start",!0)&&il(s,"end")){let x=s,w=[];for(;w.push(x),!x.isTextblock;)x=x.lastChild;let S=o,C=1;for(;!S.isTextblock;S=S.firstChild)C++;if(x.canReplace(x.childCount,x.childCount,S.content)){if(t){let N=ae.empty;for(let R=w.length-1;R>=0;R--)N=ae.from(w[R].copy(N));let L=n.tr.step(new kn(e.pos-w.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new we(N,w.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function k2(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(Ue.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const m4=k2(-1),g4=k2(1);function y4(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o),u=l&&K0(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function Jw(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(d,h)=>{if(s)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)s=!0;else{let p=t.doc.resolve(h),m=p.index();s=p.parent.canReplaceWith(m,m+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=t.selection.ranges[l];o.setBlockType(u,d,n,e)}r(o.scrollIntoView())}return!0}}function uy(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}uy(oy,b2,v2);uy(oy,S2,E2);uy(C2,T2,N2,f4);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function b4(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o);if(!l)return!1;let u=r?t.tr:null;return x4(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function x4(n,e,t,r=null){let s=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new Cf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Cf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=K0(o,t,r,e);return u?(n&&v4(n,e,u,s,t),!0):!1}function v4(n,e,t,r,s){let o=ae.empty;for(let p=t.length-1;p>=0;p--)o=ae.from(t[p].type.create(t[p].attrs,o));n.step(new kn(e.start-(r?2:0),e.end,e.start,e.end,new we(o,0,0),t.length,!0));let l=0;for(let p=0;p<t.length;p++)t[p].type==s&&(l=p+1);let u=t.length-l,d=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,b=!0;p<m;p++,b=!1)!b&&is(n.doc,d,u)&&(n.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return n}function w4(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?S4(e,t,n,o):E4(e,t,o):!0:!1}}function S4(n,e,t,r){let s=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(s.step(new kn(o-1,l,o,l,new we(ae.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Cf(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=hl(r);if(u==null)return!1;s.lift(r,u);let d=s.doc.resolve(s.mapping.map(o,-1)-1);return ro(s.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&s.join(d.pos),e(s.scrollIntoView()),!0}function E4(n,e,t){let r=n.tr,s=t.parent;for(let x=t.end,w=t.endIndex-1,S=t.startIndex;w>S;w--)x-=s.child(w).nodeSize,r.delete(x-1,x+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,d=t.endIndex==s.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?ae.empty:ae.from(s))))return!1;let m=o.pos,b=m+l.nodeSize;return r.step(new kn(m-(u?1:0),b+(d?1:0),m+1,b-1,new we((u?ae.empty:ae.from(s.copy(ae.empty))).append(d?ae.empty:ae.from(s.copy(ae.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function C4(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,d=u.child(l-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==u.type,p=ae.from(h?n.create():null),m=new we(ae.from(n.create(null,ae.from(u.type.create(null,p)))),h?3:1,0),b=o.start,x=o.end;t(e.tr.step(new kn(b-(h?3:1),x,b,x,m,1,!0)).scrollIntoView())}return!0}}function Ch(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}class Th{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...p)=>{const m=d(...p)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u=[],d=!!e,h=e||o.tr,p=()=>(!d&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(h),u.every(b=>b===!0)),m={...Object.fromEntries(Object.entries(r).map(([b,x])=>[b,(...S)=>{const C=this.buildProps(h,t),N=x(...S)(C);return u.push(N),m}])),run:p};return m}createCan(e){const{rawCommands:t,state:r}=this,s=!1,o=e||r.tr,l=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(t).map(([d,h])=>[d,(...p)=>h(...p)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u={tr:e,editor:s,view:l,state:Ch({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...p)=>h(...p)(u)]))}};return u}}class T4{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Re(n,e,t){return n.config[e]===void 0&&n.parent?Re(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Re(n.parent,e,t):null}):n.config[e]}function Nh(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function M2(n){const e=[],{nodeExtensions:t,markExtensions:r}=Nh(n),s=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:s},d=Re(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([b,x])=>{e.push({type:m,name:b,attribute:{...o,...x}})})})})}),s.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=Re(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const b={...o,...m};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:l.name,name:p,attribute:b})})}),e}function On(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function xt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const u=o?String(o).split(" "):[],d=r[s]?r[s].split(" "):[],h=u.filter(p=>!d.includes(p));r[s]=[...d,...h].join(" ")}else if(s==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,b]=p.split(":").map(x=>x.trim());h.set(m,b)}),u.forEach(p=>{const[m,b]=p.split(":").map(x=>x.trim());h.set(m,b)}),r[s]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=o}),r},{})}function Df(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>xt(t,r),{})}function O2(n){return typeof n=="function"}function it(n,e=void 0,...t){return O2(n)?e?n.bind(e)(...t):n(...t):n}function N4(n={}){return Object.keys(n).length===0&&n.constructor===Object}function A4(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Zw(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):A4(t.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...s}}}}function eS(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&N4(t)?!1:t!=null))}function k4(n,e){var t;const r=M2(n),{nodeExtensions:s,markExtensions:o}=Nh(n),l=(t=s.find(h=>Re(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(N=>N.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((N,L)=>{const R=Re(L,"extendNodeSchema",m);return{...N,...R?R(h):{}}},{}),x=eS({...b,content:it(Re(h,"content",m)),marks:it(Re(h,"marks",m)),group:it(Re(h,"group",m)),inline:it(Re(h,"inline",m)),atom:it(Re(h,"atom",m)),selectable:it(Re(h,"selectable",m)),draggable:it(Re(h,"draggable",m)),code:it(Re(h,"code",m)),whitespace:it(Re(h,"whitespace",m)),linebreakReplacement:it(Re(h,"linebreakReplacement",m)),defining:it(Re(h,"defining",m)),isolating:it(Re(h,"isolating",m)),attrs:Object.fromEntries(p.map(N=>{var L;return[N.name,{default:(L=N==null?void 0:N.attribute)===null||L===void 0?void 0:L.default}]}))}),w=it(Re(h,"parseHTML",m));w&&(x.parseDOM=w.map(N=>Zw(N,p)));const S=Re(h,"renderHTML",m);S&&(x.toDOM=N=>S({node:N,HTMLAttributes:Df(N,p)}));const C=Re(h,"renderText",m);return C&&(x.toText=C),[h.name,x]})),d=Object.fromEntries(o.map(h=>{const p=r.filter(C=>C.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((C,N)=>{const L=Re(N,"extendMarkSchema",m);return{...C,...L?L(h):{}}},{}),x=eS({...b,inclusive:it(Re(h,"inclusive",m)),excludes:it(Re(h,"excludes",m)),group:it(Re(h,"group",m)),spanning:it(Re(h,"spanning",m)),code:it(Re(h,"code",m)),attrs:Object.fromEntries(p.map(C=>{var N;return[C.name,{default:(N=C==null?void 0:C.attribute)===null||N===void 0?void 0:N.default}]}))}),w=it(Re(h,"parseHTML",m));w&&(x.parseDOM=w.map(C=>Zw(C,p)));const S=Re(h,"renderHTML",m);return S&&(x.toDOM=C=>S({mark:C,HTMLAttributes:Df(C,p)})),[h.name,x]}));return new bC({topNode:l,nodes:u,marks:d})}function mg(n,e){return e.nodes[n]||e.marks[n]||null}function tS(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function dy(n,e){const t=na.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const M4=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,o,l,u)=>{var d,h;const p=((h=(d=s.type.spec).toText)===null||h===void 0?void 0:h.call(d,{node:s,pos:o,parent:l,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-o))}),t};function fy(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Ah{constructor(e){this.find=e.find,this.handler=e.handler}}const O4=(n,e)=>{if(fy(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function $d(n){var e;const{editor:t,from:r,to:s,text:o,rules:l,plugin:u}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let p=!1;const m=M4(h)+o;return l.forEach(b=>{if(p)return;const x=O4(m,b.find);if(!x)return;const w=d.state.tr,S=Ch({state:d.state,transaction:w}),C={from:r-(x[0].length-o.length),to:s},{commands:N,chain:L,can:R}=new Th({editor:t,state:S});b.handler({state:S,range:C,match:x,commands:N,chain:L,can:R})===null||!w.steps.length||(w.setMeta(u,{transform:w,from:r,to:s,text:o}),d.dispatch(w),p=!0)}),p}function R4(n){const{editor:e,rules:t}=n,r=new Wt({state:{init(){return null},apply(s,o,l){const u=s.getMeta(r);if(u)return u;const d=s.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=dy(ae.from(p),l.schema);const{from:m}=d,b=m+p.length;$d({editor:e,from:m,to:b,text:p,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,l,u){return $d({editor:e,from:o,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&$d({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?$d({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function D4(n){return Object.prototype.toString.call(n).slice(8,-1)}function qd(n){return D4(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function kh(n,e){const t={...n};return qd(n)&&qd(e)&&Object.keys(e).forEach(r=>{qd(e[r])&&qd(n[r])?t[r]=kh(n[r],e[r]):t[r]=e[r]}),t}class Ci{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(Re(this,"addOptions",{name:this.name}))),this.storage=it(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ci(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>kh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ci(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=it(Re(t,"addOptions",{name:t.name})),t.storage=it(Re(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const d=l.find(h=>(h==null?void 0:h.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function _4(n){return typeof n=="number"}class j4{constructor(e){this.find=e.find,this.handler=e.handler}}const L4=(n,e,t)=>{if(fy(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=n,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function B4(n){const{editor:e,state:t,from:r,to:s,rule:o,pasteEvent:l,dropEvent:u}=n,{commands:d,chain:h,can:p}=new Th({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,s,(x,w)=>{if(!x.isTextblock||x.type.spec.code)return;const S=Math.max(r,w),C=Math.min(s,w+x.content.size),N=x.textBetween(S-w,C-w,void 0,"");L4(N,o.find,l).forEach(R=>{if(R.index===void 0)return;const k=S+R.index+1,j=k+R[0].length,H={from:t.tr.mapping.map(k),to:t.tr.mapping.map(j)},U=o.handler({state:t,range:H,match:R,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(U)})}),m.every(x=>x!==null)}let Pd=null;const z4=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function I4(n){const{editor:e,rules:t}=n;let r=null,s=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:b,rule:x,pasteEvt:w})=>{const S=p.tr,C=Ch({state:p,transaction:S});if(!(!B4({editor:e,state:C,from:Math.max(m-1,0),to:b.b-1,rule:x,pasteEvent:w,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new Wt({view(m){const b=w=>{var S;r=!((S=m.dom.parentElement)===null||S===void 0)&&S.contains(w.target)?m.dom.parentElement:null,r&&(Pd=e)},x=()=>{Pd&&(Pd=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(m,b)=>{if(o=r===m.dom.parentElement,u=b,!o){const x=Pd;x!=null&&x.isEditable&&setTimeout(()=>{const w=x.state.selection;w&&x.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,b)=>{var x;const w=(x=b.clipboardData)===null||x===void 0?void 0:x.getData("text/html");return l=b,s=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(m,b,x)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!s,C=w.getMeta("uiEvent")==="drop"&&!o,N=w.getMeta("applyPasteRules"),L=!!N;if(!S&&!C&&!L)return;if(L){let{text:j}=N;typeof j=="string"?j=j:j=dy(ae.from(j),x.schema);const{from:H}=N,U=H+j.length,J=z4(j);return d({rule:p,state:x,from:H,to:{b:U},pasteEvt:J})}const R=b.doc.content.findDiffStart(x.doc.content),k=b.doc.content.findDiffEnd(x.doc.content);if(!(!_4(R)||!k||R===k.b))return d({rule:p,state:x,from:R,to:k,pasteEvt:l})}}))}function H4(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Ya{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ya.resolve(e),this.schema=k4(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ya.sort(Ya.flatten(e)),r=H4(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=Re(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=Re(r,"priority")||100,l=Re(s,"priority")||100;return o>l?-1:o<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:mg(t.name,this.schema)},s=Re(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Ya.sort([...this.extensions].reverse()),r=[],s=[],o=t.map(l=>{const u={name:l.name,options:l.options,storage:l.storage,editor:e,type:mg(l.name,this.schema)},d=[],h=Re(l,"addKeyboardShortcuts",u);let p={};if(l.type==="mark"&&Re(l,"exitable",u)&&(p.ArrowRight=()=>Ci.handleExit({editor:e,mark:l})),h){const S=Object.fromEntries(Object.entries(h()).map(([C,N])=>[C,()=>N({editor:e})]));p={...p,...S}}const m=i4(p);d.push(m);const b=Re(l,"addInputRules",u);tS(l,e.options.enableInputRules)&&b&&r.push(...b());const x=Re(l,"addPasteRules",u);tS(l,e.options.enablePasteRules)&&x&&s.push(...x());const w=Re(l,"addProseMirrorPlugins",u);if(w){const S=w();d.push(...S)}return d}).flat();return[R4({editor:e,rules:r}),...I4({editor:e,rules:s}),...o]}get attributes(){return M2(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Nh(this.extensions);return Object.fromEntries(t.filter(r=>!!Re(r,"addNodeView")).map(r=>{const s=this.attributes.filter(d=>d.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:On(r.name,this.schema)},l=Re(r,"addNodeView",o);if(!l)return[];const u=(d,h,p,m,b)=>{const x=Df(d,s);return l()({node:d,view:h,getPos:p,decorations:m,innerDecorations:b,editor:e,extension:r,HTMLAttributes:x})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:mg(e.name,this.schema)};e.type==="mark"&&(!((t=it(Re(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=Re(e,"onBeforeCreate",r),o=Re(e,"onCreate",r),l=Re(e,"onUpdate",r),u=Re(e,"onSelectionUpdate",r),d=Re(e,"onTransaction",r),h=Re(e,"onFocus",r),p=Re(e,"onBlur",r),m=Re(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}}class Rn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(Re(this,"addOptions",{name:this.name}))),this.storage=it(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Rn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>kh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Rn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=it(Re(t,"addOptions",{name:t.name})),t.storage=it(Re(t,"addStorage",{name:t.name,options:t.options})),t}}function R2(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,s,(d,h,p,m)=>{var b;d.isBlock&&h>r&&(u+=o);const x=l==null?void 0:l[d.type.name];if(x)return p&&(u+=x({node:d,pos:h,parent:p,index:m,range:e})),!1;d.isText&&(u+=(b=d==null?void 0:d.text)===null||b===void 0?void 0:b.slice(Math.max(r,h)-h,s-h))}),u}function D2(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const U4=Rn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Wt({key:new dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),d=D2(t);return R2(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),$4=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),q4=(n=!1)=>({commands:e})=>e.setContent("",n),P4=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(d)),b=h.resolve(p.map(d+u.nodeSize)),x=m.blockRange(b);if(!x)return;const w=hl(x);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(x.start,S)}(w||w===0)&&e.lift(x,w)})}),!0},V4=n=>e=>n(e),F4=()=>({state:n,dispatch:e})=>T2(n,e),G4=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,o=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new Ue(r.doc.resolve(Math.max(l-1,0)))),!0},K4=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const u=s.before(o),d=s.after(o);n.delete(u,d).scrollIntoView()}return!0}return!1},W4=n=>({tr:e,state:t,dispatch:r})=>{const s=On(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===s){if(r){const d=o.before(l),h=o.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},Q4=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},Y4=()=>({state:n,dispatch:e})=>oy(n,e),X4=()=>({commands:n})=>n.keyboardShortcut("Enter"),J4=()=>({state:n,dispatch:e})=>u4(n,e);function _f(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:fy(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function _2(n,e,t={}){return n.find(r=>r.type===e&&_f(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function nS(n,e,t={}){return!!_2(n,e,t)}function hy(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!_2([...s.node.marks],e,t)))return;let l=s.index,u=n.start()+s.offset,d=l+1,h=u+s.node.nodeSize;for(;l>0&&nS([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;d<n.parent.childCount&&nS([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function so(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const Z4=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=so(n,r.schema),{doc:l,selection:u}=t,{$from:d,from:h,to:p}=u;if(s){const m=hy(d,o,e);if(m&&m.from<=h&&m.to>=p){const b=Ue.create(l,m.from,m.to);t.setSelection(b)}}return!0},ej=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function py(n){return n instanceof Ue}function ns(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function j2(n,e=null){if(!e)return null;const t=Ve.atStart(n),r=Ve.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?Ue.create(n,ns(0,s,o),ns(n.content.size,s,o)):Ue.create(n,ns(e,s,o),ns(e,s,o))}function L2(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Mh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const tj=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Mh()||L2())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!py(t.state.selection))return l(),!0;const u=j2(s.doc,n)||t.state.selection,d=t.state.selection.eq(u);return o&&(d||s.setSelection(u),d&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},nj=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),rj=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),B2=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&B2(r)}return n};function Vd(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return B2(t)}function Yc(n,e,t){if(n instanceof Xs||n instanceof ae)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ae.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Yc("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,u="";const d=new bC({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Js.fromSchema(d).parseSlice(Vd(n),t.parseOptions):Js.fromSchema(d).parse(Vd(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=Js.fromSchema(e);return t.slice?o.parseSlice(Vd(n),t.parseOptions).content:o.parse(Vd(n),t.parseOptions)}return Yc("",e,t)}function ij(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof Tn||s instanceof kn))return;const o=n.mapping.maps[r];let l=0;o.forEach((u,d,h,p)=>{l===0&&(l=p)}),n.setSelection(Ve.near(n.doc.resolve(l),t))}const sj=n=>!("type"in n),oj=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{var l;if(s){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const d=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Yc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(C){d(C)}try{u=Yc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck})}catch(C){return d(C),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,x=!0;if((sj(u)?u:[u]).forEach(C=>{C.check(),b=b?C.isText&&C.marks.length===0:!1,x=x?C.isBlock:!1}),p===m&&x){const{parent:C}=r.doc.resolve(p);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(p-=1,m+=1)}let S;if(b){if(Array.isArray(e))S=e.map(C=>C.text||"").join("");else if(e instanceof ae){let C="";e.forEach(N=>{N.text&&(C+=N.text)}),S=C}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else S=u,r.replaceWith(p,m,S);t.updateSelection&&ij(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},aj=()=>({state:n,dispatch:e})=>a4(n,e),lj=()=>({state:n,dispatch:e})=>l4(n,e),cj=()=>({state:n,dispatch:e})=>b2(n,e),uj=()=>({state:n,dispatch:e})=>S2(n,e),dj=()=>({state:n,dispatch:e,tr:t})=>{try{const r=bh(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},fj=()=>({state:n,dispatch:e,tr:t})=>{try{const r=bh(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},hj=()=>({state:n,dispatch:e})=>s4(n,e),pj=()=>({state:n,dispatch:e})=>o4(n,e);function z2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function mj(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Mh()||z2()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const gj=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=mj(n).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return d==null||d.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function Xc(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,l=e?On(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(m,b)=>{if(m.isText)return;const x=Math.max(r,b),w=Math.min(s,b+m.nodeSize);u.push({node:m,from:x,to:w})});const d=s-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>_f(m.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((m,b)=>m+b.to-b.from,0)>=d}const yj=(n,e={})=>({state:t,dispatch:r})=>{const s=On(n,t.schema);return Xc(t,s,e)?c4(t,r):!1},bj=()=>({state:n,dispatch:e})=>N2(n,e),xj=n=>({state:e,dispatch:t})=>{const r=On(n,e.schema);return w4(r)(e,t)},vj=()=>({state:n,dispatch:e})=>C2(n,e);function Oh(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function rS(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const wj=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=Oh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=On(n,r.schema)),u==="mark"&&(l=so(n,r.schema)),s&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,p)=>{o&&o===h.type&&t.setNodeMarkup(p,void 0,rS(h.attrs,e)),l&&h.marks.length&&h.marks.forEach(m=>{l===m.type&&t.addMark(p,p+h.nodeSize,l.create(rS(m.attrs,e)))})})}),!0):!1},Sj=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Ej=()=>({tr:n,dispatch:e})=>{if(e){const t=new Or(n.doc);n.setSelection(t)}return!0},Cj=()=>({state:n,dispatch:e})=>v2(n,e),Tj=()=>({state:n,dispatch:e})=>E2(n,e),Nj=()=>({state:n,dispatch:e})=>h4(n,e),Aj=()=>({state:n,dispatch:e})=>g4(n,e),kj=()=>({state:n,dispatch:e})=>m4(n,e);function l0(n,e,t={},r={}){return Yc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const Mj=(n,e=!1,t={},r={})=>({editor:s,tr:o,dispatch:l,commands:u})=>{var d,h;const{doc:p}=o;if(t.preserveWhitespace!=="full"){const m=l0(n,s.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck});return l&&o.replaceWith(0,p.content.size,m).setMeta("preventUpdate",!e),!0}return l&&o.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:s.options.enableContentCheck})};function I2(n,e){const t=so(e,n.schema),{from:r,to:s,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===t.name);return u?{...u.attrs}:{}}function Oj(n,e){const t=new W0(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function my(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Vo(n,e){const t=[];return n.descendants((r,s)=>{e(r)&&t.push({node:r,pos:s})}),t}function Rj(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,o)=>{t(s)&&r.push({node:s,pos:o})}),r}function H2(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function pl(n){return e=>H2(e.$from,n)}function Dj(n,e){const t={from:0,to:n.content.size};return R2(n,t,e)}function _j(n,e){const t=On(e,n.schema),{from:r,to:s}=n.selection,o=[];n.doc.nodesBetween(r,s,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function U2(n,e){const t=Oh(typeof e=="string"?e:e.name,n.schema);return t==="node"?_j(n,e):t==="mark"?I2(n,e):{}}function jj(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function Lj(n){const e=jj(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,l)=>l!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Bj(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,o)=>{const l=[];if(s.ranges.length)s.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=t[o];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(d),m=e.invert().map(h,-1),b=e.invert().map(p);r.push({oldRange:{from:m,to:b},newRange:{from:h,to:p}})})}),Lj(r)}function gy(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const o=t.resolve(n),l=hy(o,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(l=>({from:o,to:o+s.nodeSize,mark:l})))}),r}function uf(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function c0(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?so(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>_f(m.attrs,t,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:m,$to:b})=>{const x=m.pos,w=b.pos;n.doc.nodesBetween(x,w,(S,C)=>{if(!S.isText&&!S.marks.length)return;const N=Math.max(x,C),L=Math.min(w,C+S.nodeSize),R=L-N;l+=R,u.push(...S.marks.map(k=>({mark:k,from:N,to:L})))})}),l===0)return!1;const d=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>_f(m.mark.attrs,t,{strict:!1})).reduce((m,b)=>m+b.to-b.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,b)=>m+b.to-b.from,0);return(d>0?d+h:d)>=l}function $2(n,e,t={}){if(!e)return Xc(n,null,t)||c0(n,null,t);const r=Oh(e,n.schema);return r==="node"?Xc(n,e,t):r==="mark"?c0(n,e,t):!1}function iS(n,e){const{nodeExtensions:t}=Nh(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=it(Re(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Rh(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(o=>{s!==!1&&(Rh(o,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function q2(n){return n instanceof ze}function zj(n,e,t){const s=n.state.doc.content.size,o=ns(e,0,s),l=ns(t,0,s),u=n.coordsAtPos(o),d=n.coordsAtPos(l,-1),h=Math.min(u.top,d.top),p=Math.max(u.bottom,d.bottom),m=Math.min(u.left,d.left),b=Math.max(u.right,d.right),x=b-m,w=p-h,N={top:h,bottom:p,left:m,right:b,width:x,height:w,x:m,y:h};return{...N,toJSON:()=>N}}function Ij(n,e,t){var r;const{selection:s}=e;let o=null;if(py(s)&&(o=s.$cursor),o){const u=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(u)||!u.some(d=>d.type.excludes(t))}const{ranges:l}=s;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,d.pos,(p,m,b)=>{if(h)return!1;if(p.isInline){const x=!b||b.type.allowsMarkType(t),w=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));h=x&&w}return!h}),h})}const Hj=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:l,ranges:u}=o,d=so(n,r.schema);if(s)if(l){const h=I2(r,d);t.addStoredMark(d.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(b,x)=>{const w=Math.max(x,p),S=Math.min(x+b.nodeSize,m);b.marks.find(N=>N.type===d)?b.marks.forEach(N=>{d===N.type&&t.addMark(w,S,d.create({...N.attrs,...e}))}):t.addMark(w,S,d.create(e))})});return Ij(r,t,d)},Uj=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),$j=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=On(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:u})=>Jw(o,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>Jw(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qj=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=ns(n,0,r.content.size),o=ze.create(r,s);e.setSelection(o)}return!0},Pj=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,l=Ue.atStart(r).from,u=Ue.atEnd(r).to,d=ns(s,l,u),h=ns(o,l,u),p=Ue.create(r,d,h);e.setSelection(p)}return!0},Vj=n=>({state:e,dispatch:t})=>{const r=On(n,e.schema);return C4(r)(e,t)};function sS(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const Fj=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:l}=e,{$from:u,$to:d}=o,h=s.extensionManager.attributes,p=uf(h,u.node().type.name,u.node().attrs);if(o instanceof ze&&o.node.isBlock)return!u.parentOffset||!is(l,u.pos)?!1:(r&&(n&&sS(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,b=u.depth===0?void 0:my(u.node(-1).contentMatchAt(u.indexAfter(-1)));let x=m&&b?[{type:b,attrs:p}]:void 0,w=is(e.doc,e.mapping.map(u.pos),1,x);if(!x&&!w&&is(e.doc,e.mapping.map(u.pos),1,b?[{type:b}]:void 0)&&(w=!0,x=b?[{type:b,attrs:p}]:void 0),r){if(w&&(o instanceof Ue&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,x),b&&!m&&!u.parentOffset&&u.parent.type!==b)){const S=e.mapping.map(u.before()),C=e.doc.resolve(S);u.node(-1).canReplaceWith(C.index(),C.index()+1,b)&&e.setNodeMarkup(e.mapping.map(u.before()),b)}n&&sS(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return w},Gj=(n,e={})=>({tr:t,state:r,dispatch:s,editor:o})=>{var l;const u=On(n,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==u)return!1;const b=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(s){let N=ae.empty;const L=d.index(-1)?1:d.index(-2)?2:3;for(let J=d.depth-L;J>=d.depth-3;J-=1)N=ae.from(d.node(J).copy(N));const R=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,k={...uf(b,d.node().type.name,d.node().attrs),...e},j=((l=u.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(k))||void 0;N=N.append(ae.from(u.createAndFill(null,j)||void 0));const H=d.before(d.depth-(L-1));t.replace(H,d.after(-R),new we(N,4-L,0));let U=-1;t.doc.nodesBetween(H,t.doc.content.size,(J,ie)=>{if(U>-1)return!1;J.isTextblock&&J.content.size===0&&(U=ie+1)}),U>-1&&t.setSelection(Ue.near(t.doc.resolve(U))),t.scrollIntoView()}return!0}const x=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...uf(b,m.type.name,m.attrs),...e},S={...uf(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const C=x?[{type:u,attrs:w},{type:x,attrs:S}]:[{type:u,attrs:w}];if(!is(t.doc,d.pos,2))return!1;if(s){const{selection:N,storedMarks:L}=r,{splittableMarks:R}=o.extensionManager,k=L||N.$to.parentOffset&&N.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!k||!s)return!0;const j=k.filter(H=>R.includes(H.type.name));t.ensureMarks(j)}return!0},gg=(n,e)=>{const t=pl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&ro(n.doc,t.pos)&&n.join(t.pos),!0},yg=(n,e)=>{const t=pl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&ro(n.doc,r)&&n.join(r),!0},Kj=(n,e,t,r={})=>({editor:s,tr:o,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:b}=s.extensionManager,x=On(n,l.schema),w=On(e,l.schema),{selection:S,storedMarks:C}=l,{$from:N,$to:L}=S,R=N.blockRange(L),k=C||S.$to.parentOffset&&S.$from.marks();if(!R)return!1;const j=pl(H=>iS(H.type.name,m))(S);if(R.depth>=1&&j&&R.depth-j.depth<=1){if(j.node.type===x)return h.liftListItem(w);if(iS(j.node.type.name,m)&&x.validContent(j.node.content)&&u)return d().command(()=>(o.setNodeMarkup(j.pos,x),!0)).command(()=>gg(o,x)).command(()=>yg(o,x)).run()}return!t||!k||!u?d().command(()=>p().wrapInList(x,r)?!0:h.clearNodes()).wrapInList(x,r).command(()=>gg(o,x)).command(()=>yg(o,x)).run():d().command(()=>{const H=p().wrapInList(x,r),U=k.filter(J=>b.includes(J.type.name));return o.ensureMarks(U),H?!0:h.clearNodes()}).wrapInList(x,r).command(()=>gg(o,x)).command(()=>yg(o,x)).run()},Wj=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,l=so(n,r.schema);return c0(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:o}):s.setMark(l,e)},Qj=(n,e,t={})=>({state:r,commands:s})=>{const o=On(n,r.schema),l=On(e,r.schema),u=Xc(r,o,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?s.setNode(l,d):s.setNode(o,{...d,...t})},Yj=(n,e={})=>({state:t,commands:r})=>{const s=On(n,t.schema);return Xc(t,s,e)?r.lift(s):r.wrapIn(s,e)},Xj=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const l=n.tr,u=o.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},Jj=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},Zj=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,d=so(n,r.schema),{$from:h,empty:p,ranges:m}=u;if(!s)return!0;if(p&&l){let{from:b,to:x}=u;const w=(o=h.marks().find(C=>C.type===d))===null||o===void 0?void 0:o.attrs,S=hy(h,d,w);S&&(b=S.from,x=S.to),t.removeMark(b,x,d)}else m.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},eL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=Oh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=On(n,r.schema)),u==="mark"&&(l=so(n,r.schema)),s&&t.selection.ranges.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;let m,b,x,w;t.selection.empty?r.doc.nodesBetween(h,p,(S,C)=>{o&&o===S.type&&(x=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,b=S)}):r.doc.nodesBetween(h,p,(S,C)=>{C<h&&o&&o===S.type&&(x=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,b=S),C>=h&&C<=p&&(o&&o===S.type&&t.setNodeMarkup(C,void 0,{...S.attrs,...e}),l&&S.marks.length&&S.marks.forEach(N=>{if(l===N.type){const L=Math.max(C,h),R=Math.min(C+S.nodeSize,p);t.addMark(L,R,l.create({...N.attrs,...e}))}}))}),b&&(m!==void 0&&t.setNodeMarkup(m,void 0,{...b.attrs,...e}),l&&b.marks.length&&b.marks.forEach(S=>{l===S.type&&t.addMark(x,w,l.create({...S.attrs,...e}))}))}),!0):!1},tL=(n,e={})=>({state:t,dispatch:r})=>{const s=On(n,t.schema);return y4(s,e)(t,r)},nL=(n,e={})=>({state:t,dispatch:r})=>{const s=On(n,t.schema);return b4(s,e)(t,r)};var rL=Object.freeze({__proto__:null,blur:$4,clearContent:q4,clearNodes:P4,command:V4,createParagraphNear:F4,cut:G4,deleteCurrentNode:K4,deleteNode:W4,deleteRange:Q4,deleteSelection:Y4,enter:X4,exitCode:J4,extendMarkRange:Z4,first:ej,focus:tj,forEach:nj,insertContent:rj,insertContentAt:oj,joinBackward:cj,joinDown:lj,joinForward:uj,joinItemBackward:dj,joinItemForward:fj,joinTextblockBackward:hj,joinTextblockForward:pj,joinUp:aj,keyboardShortcut:gj,lift:yj,liftEmptyBlock:bj,liftListItem:xj,newlineInCode:vj,resetAttributes:wj,scrollIntoView:Sj,selectAll:Ej,selectNodeBackward:Cj,selectNodeForward:Tj,selectParentNode:Nj,selectTextblockEnd:Aj,selectTextblockStart:kj,setContent:Mj,setMark:Hj,setMeta:Uj,setNode:$j,setNodeSelection:qj,setTextSelection:Pj,sinkListItem:Vj,splitBlock:Fj,splitListItem:Gj,toggleList:Kj,toggleMark:Wj,toggleNode:Qj,toggleWrap:Yj,undoInputRule:Xj,unsetAllMarks:Jj,unsetMark:Zj,updateAttributes:eL,wrapIn:tL,wrapInList:nL});const iL=Rn.create({name:"commands",addCommands(){return{...rL}}}),sL=Rn.create({name:"drop",addProseMirrorPlugins(){return[new Wt({key:new dn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),oL=Rn.create({name:"editable",addProseMirrorPlugins(){return[new Wt({key:new dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),aL=new dn("focusEvents"),lL=Rn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Wt({key:aL,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),cL=Rn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:m}=d,{pos:b,parent:x}=m,w=m.parent.isTextblock&&b>0?u.doc.resolve(b-1):m,S=w.parent.type.spec.isolating,C=m.pos-m.parentOffset,N=S&&w.parent.childCount===1?C===m.pos:Ve.atStart(h).from===b;return!p||!x.type.isTextblock||x.textContent.length||!N||N&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Mh()||z2()?o:s},addProseMirrorPlugins(){return[new Wt({key:new dn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),s=n.some(S=>S.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:l,to:u}=e.selection,d=Ve.atStart(e.doc).from,h=Ve.atEnd(e.doc).to;if(o||!(l===d&&u===h)||!Rh(t.doc))return;const b=t.tr,x=Ch({state:t,transaction:b}),{commands:w}=new Th({editor:this.editor,state:x});if(w.clearNodes(),!!b.steps.length)return b}})]}}),uL=Rn.create({name:"paste",addProseMirrorPlugins(){return[new Wt({key:new dn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),dL=Rn.create({name:"tabindex",addProseMirrorPlugins(){return[new Wt({key:new dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Do{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Do(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Do(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Do(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!s&&u.depth<=this.depth)return;const d=new Do(u,this.editor,s,s?t:null);s&&(d.actualDepth=this.depth+1),e.push(new Do(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const o=s.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const d=l[u];if(o[d]!==t[d])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&o.every(d=>t[d]===l.node.attrs[d])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const fL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function hL(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class pL extends T4{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=hL(fL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=O2(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const l=typeof o=="string"?`${o}$`:o.key;r=r.filter(u=>!u.key.startsWith(l))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[oL,U4.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),iL,lL,cL,dL,sL,uL].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Ya(s,this)}createCommandManager(){this.commandManager=new Th({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=l0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=l0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=j2(t,this.options.autofocus);this.view=new g2(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Qa.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(l)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return U2(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return $2(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return dy(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Dj(this.state.doc,{blockSeparator:t,textSerializers:{...D2(this.schema),...r}})}get isEmpty(){return Rh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Do(t,this)}get $doc(){return this.$pos(0)}}function sl(n){return new Ah({find:n.find,handler:({state:e,range:t,match:r})=>{const s=it(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),h=t.from+u.indexOf(l),p=h+l.length;if(gy(t.from,t.to,e.doc).filter(x=>x.mark.type.excluded.find(S=>S===n.type&&S!==x.mark.type)).filter(x=>x.to>h).length)return null;p<t.to&&o.delete(p,t.to),h>t.from&&o.delete(t.from+d,h);const b=t.from+d+l.length;o.addMark(t.from+d,b,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function P2(n){return new Ah({find:n.find,handler:({state:e,range:t,match:r})=>{const s=it(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let u=t.to;const d=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,d)}else if(r[0]){const h=n.type.isInline?l:l-1;o.insert(h,n.type.create(s)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()}})}function u0(n){return new Ah({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),o=it(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function Jc(n){return new Ah({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const o=it(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),d=l.doc.resolve(t.from).blockRange(),h=d&&K0(d,n.type,o);if(!h)return null;if(l.wrap(d,h),n.keepMarks&&n.editor){const{selection:m,storedMarks:b}=e,{splittableMarks:x}=n.editor.extensionManager,w=b||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(C=>x.includes(C.type.name));l.ensureMarks(S)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,o).run()}const p=l.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&ro(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&l.join(t.from-1)}})}class Kt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(Re(this,"addOptions",{name:this.name}))),this.storage=it(Re(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Kt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>kh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Kt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=it(Re(t,"addOptions",{name:t.name})),t.storage=it(Re(t,"addStorage",{name:t.name,options:t.options})),t}}class mL{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,s,o,l,u,d;const{view:h}=this.editor,p=e.target,m=p.nodeType===3?(t=p.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):p.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(p)||!m)return;let b=0,x=0;if(this.dom!==m){const L=this.dom.getBoundingClientRect(),R=m.getBoundingClientRect(),k=(s=e.offsetX)!==null&&s!==void 0?s:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,j=(l=e.offsetY)!==null&&l!==void 0?l:(u=e.nativeEvent)===null||u===void 0?void 0:u.offsetY;b=R.x-L.x+k,x=R.y-L.y+j}const w=this.dom.cloneNode(!0);(d=e.dataTransfer)===null||d===void 0||d.setDragImage(w,b,x);const S=this.getPos();if(typeof S!="number")return;const C=ze.create(h.state.doc,S),N=h.state.tr.setSelection(C);h.dispatch(N)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(r))))return!1;const o=e.type.startsWith("drag"),l=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!l&&!o)return!0;const{isEditable:d}=this.editor,{isDragging:h}=this,p=!!this.node.type.spec.draggable,m=ze.isSelectable(this.node),b=e.type==="copy",x=e.type==="paste",w=e.type==="cut",S=e.type==="mousedown";if(!p&&m&&o&&e.target===this.dom&&e.preventDefault(),p&&o&&!h&&e.target===this.dom)return e.preventDefault(),!1;if(p&&d&&!h&&S){const C=r.closest("[data-drag-handle]");C&&(this.dom===C||this.dom.contains(C))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(h||l||b||x||w||S&&m)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Mh()||L2())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function Jo(n){return new j4({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const o=it(n.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let h=t.to;if(u){const p=d.search(/\S/),m=t.from+d.indexOf(u),b=m+u.length;if(gy(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(C=>C===n.type&&C!==w.mark.type)).filter(w=>w.to>m).length)return null;b<t.to&&l.delete(b,t.to),m>t.from&&l.delete(t.from+p,m),h=t.from+p+u.length,l.addMark(t.from+p,h,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function gL(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof ze){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}function yL(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var pr="top",Xr="bottom",Jr="right",mr="left",yy="auto",fu=[pr,Xr,Jr,mr],ol="start",Zc="end",bL="clippingParents",V2="viewport",pc="popper",xL="reference",oS=fu.reduce(function(n,e){return n.concat([e+"-"+ol,e+"-"+Zc])},[]),F2=[].concat(fu,[yy]).reduce(function(n,e){return n.concat([e,e+"-"+ol,e+"-"+Zc])},[]),vL="beforeRead",wL="read",SL="afterRead",EL="beforeMain",CL="main",TL="afterMain",NL="beforeWrite",AL="write",kL="afterWrite",ML=[vL,wL,SL,EL,CL,TL,NL,AL,kL];function Ti(n){return n?(n.nodeName||"").toLowerCase():null}function Rr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Zo(n){var e=Rr(n).Element;return n instanceof e||n instanceof Element}function Yr(n){var e=Rr(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function by(n){if(typeof ShadowRoot>"u")return!1;var e=Rr(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function OL(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},o=e.elements[t];!Yr(o)||!Ti(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(l){var u=s[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function RL(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),u=l.reduce(function(d,h){return d[h]="",d},{});!Yr(s)||!Ti(s)||(Object.assign(s.style,u),Object.keys(o).forEach(function(d){s.removeAttribute(d)}))})}}const G2={name:"applyStyles",enabled:!0,phase:"write",fn:OL,effect:RL,requires:["computeStyles"]};function wi(n){return n.split("-")[0]}var Fo=Math.max,jf=Math.min,al=Math.round;function d0(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function K2(){return!/^((?!chrome|android).)*safari/i.test(d0())}function ll(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&Yr(n)&&(s=n.offsetWidth>0&&al(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&al(r.height)/n.offsetHeight||1);var l=Zo(n)?Rr(n):window,u=l.visualViewport,d=!K2()&&t,h=(r.left+(d&&u?u.offsetLeft:0))/s,p=(r.top+(d&&u?u.offsetTop:0))/o,m=r.width/s,b=r.height/o;return{width:m,height:b,top:p,right:h+m,bottom:p+b,left:h,x:h,y:p}}function xy(n){var e=ll(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function W2(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&by(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ls(n){return Rr(n).getComputedStyle(n)}function DL(n){return["table","td","th"].indexOf(Ti(n))>=0}function oo(n){return((Zo(n)?n.ownerDocument:n.document)||window.document).documentElement}function Dh(n){return Ti(n)==="html"?n:n.assignedSlot||n.parentNode||(by(n)?n.host:null)||oo(n)}function aS(n){return!Yr(n)||ls(n).position==="fixed"?null:n.offsetParent}function _L(n){var e=/firefox/i.test(d0()),t=/Trident/i.test(d0());if(t&&Yr(n)){var r=ls(n);if(r.position==="fixed")return null}var s=Dh(n);for(by(s)&&(s=s.host);Yr(s)&&["html","body"].indexOf(Ti(s))<0;){var o=ls(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function hu(n){for(var e=Rr(n),t=aS(n);t&&DL(t)&&ls(t).position==="static";)t=aS(t);return t&&(Ti(t)==="html"||Ti(t)==="body"&&ls(t).position==="static")?e:t||_L(n)||e}function vy(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function kc(n,e,t){return Fo(n,jf(e,t))}function jL(n,e,t){var r=kc(n,e,t);return r>t?t:r}function Q2(){return{top:0,right:0,bottom:0,left:0}}function Y2(n){return Object.assign({},Q2(),n)}function X2(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var LL=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Y2(typeof e!="number"?e:X2(e,fu))};function BL(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,u=wi(t.placement),d=vy(u),h=[mr,Jr].indexOf(u)>=0,p=h?"height":"width";if(!(!o||!l)){var m=LL(s.padding,t),b=xy(o),x=d==="y"?pr:mr,w=d==="y"?Xr:Jr,S=t.rects.reference[p]+t.rects.reference[d]-l[d]-t.rects.popper[p],C=l[d]-t.rects.reference[d],N=hu(o),L=N?d==="y"?N.clientHeight||0:N.clientWidth||0:0,R=S/2-C/2,k=m[x],j=L-b[p]-m[w],H=L/2-b[p]/2+R,U=kc(k,H,j),J=d;t.modifiersData[r]=(e={},e[J]=U,e.centerOffset=U-H,e)}}function zL(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||W2(e.elements.popper,s)&&(e.elements.arrow=s))}const IL={name:"arrow",enabled:!0,phase:"main",fn:BL,effect:zL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cl(n){return n.split("-")[1]}var HL={top:"auto",right:"auto",bottom:"auto",left:"auto"};function UL(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:al(t*s)/s||0,y:al(r*s)/s||0}}function lS(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,u=n.position,d=n.gpuAcceleration,h=n.adaptive,p=n.roundOffsets,m=n.isFixed,b=l.x,x=b===void 0?0:b,w=l.y,S=w===void 0?0:w,C=typeof p=="function"?p({x,y:S}):{x,y:S};x=C.x,S=C.y;var N=l.hasOwnProperty("x"),L=l.hasOwnProperty("y"),R=mr,k=pr,j=window;if(h){var H=hu(t),U="clientHeight",J="clientWidth";if(H===Rr(t)&&(H=oo(t),ls(H).position!=="static"&&u==="absolute"&&(U="scrollHeight",J="scrollWidth")),H=H,s===pr||(s===mr||s===Jr)&&o===Zc){k=Xr;var ie=m&&H===j&&j.visualViewport?j.visualViewport.height:H[U];S-=ie-r.height,S*=d?1:-1}if(s===mr||(s===pr||s===Xr)&&o===Zc){R=Jr;var ge=m&&H===j&&j.visualViewport?j.visualViewport.width:H[J];x-=ge-r.width,x*=d?1:-1}}var be=Object.assign({position:u},h&&HL),he=p===!0?UL({x,y:S},Rr(t)):{x,y:S};if(x=he.x,S=he.y,d){var ce;return Object.assign({},be,(ce={},ce[k]=L?"0":"",ce[R]=N?"0":"",ce.transform=(j.devicePixelRatio||1)<=1?"translate("+x+"px, "+S+"px)":"translate3d("+x+"px, "+S+"px, 0)",ce))}return Object.assign({},be,(e={},e[k]=L?S+"px":"",e[R]=N?x+"px":"",e.transform="",e))}function $L(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,u=t.roundOffsets,d=u===void 0?!0:u,h={placement:wi(e.placement),variation:cl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lS(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lS(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const qL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$L,data:{}};var Fd={passive:!0};function PL(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,u=l===void 0?!0:l,d=Rr(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(p){p.addEventListener("scroll",t.update,Fd)}),u&&d.addEventListener("resize",t.update,Fd),function(){o&&h.forEach(function(p){p.removeEventListener("scroll",t.update,Fd)}),u&&d.removeEventListener("resize",t.update,Fd)}}const VL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:PL,data:{}};var FL={left:"right",right:"left",bottom:"top",top:"bottom"};function df(n){return n.replace(/left|right|bottom|top/g,function(e){return FL[e]})}var GL={start:"end",end:"start"};function cS(n){return n.replace(/start|end/g,function(e){return GL[e]})}function wy(n){var e=Rr(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Sy(n){return ll(oo(n)).left+wy(n).scrollLeft}function KL(n,e){var t=Rr(n),r=oo(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;var h=K2();(h||!h&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}return{width:o,height:l,x:u+Sy(n),y:d}}function WL(n){var e,t=oo(n),r=wy(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=Fo(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Fo(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-r.scrollLeft+Sy(n),d=-r.scrollTop;return ls(s||t).direction==="rtl"&&(u+=Fo(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:u,y:d}}function Ey(n){var e=ls(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function J2(n){return["html","body","#document"].indexOf(Ti(n))>=0?n.ownerDocument.body:Yr(n)&&Ey(n)?n:J2(Dh(n))}function Mc(n,e){var t;e===void 0&&(e=[]);var r=J2(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Rr(r),l=s?[o].concat(o.visualViewport||[],Ey(r)?r:[]):r,u=e.concat(l);return s?u:u.concat(Mc(Dh(l)))}function f0(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function QL(n,e){var t=ll(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function uS(n,e,t){return e===V2?f0(KL(n,t)):Zo(e)?QL(e,t):f0(WL(oo(n)))}function YL(n){var e=Mc(Dh(n)),t=["absolute","fixed"].indexOf(ls(n).position)>=0,r=t&&Yr(n)?hu(n):n;return Zo(r)?e.filter(function(s){return Zo(s)&&W2(s,r)&&Ti(s)!=="body"}):[]}function XL(n,e,t,r){var s=e==="clippingParents"?YL(n):[].concat(e),o=[].concat(s,[t]),l=o[0],u=o.reduce(function(d,h){var p=uS(n,h,r);return d.top=Fo(p.top,d.top),d.right=jf(p.right,d.right),d.bottom=jf(p.bottom,d.bottom),d.left=Fo(p.left,d.left),d},uS(n,l,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Z2(n){var e=n.reference,t=n.element,r=n.placement,s=r?wi(r):null,o=r?cl(r):null,l=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,d;switch(s){case pr:d={x:l,y:e.y-t.height};break;case Xr:d={x:l,y:e.y+e.height};break;case Jr:d={x:e.x+e.width,y:u};break;case mr:d={x:e.x-t.width,y:u};break;default:d={x:e.x,y:e.y}}var h=s?vy(s):null;if(h!=null){var p=h==="y"?"height":"width";switch(o){case ol:d[h]=d[h]-(e[p]/2-t[p]/2);break;case Zc:d[h]=d[h]+(e[p]/2-t[p]/2);break}}return d}function eu(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,u=t.boundary,d=u===void 0?bL:u,h=t.rootBoundary,p=h===void 0?V2:h,m=t.elementContext,b=m===void 0?pc:m,x=t.altBoundary,w=x===void 0?!1:x,S=t.padding,C=S===void 0?0:S,N=Y2(typeof C!="number"?C:X2(C,fu)),L=b===pc?xL:pc,R=n.rects.popper,k=n.elements[w?L:b],j=XL(Zo(k)?k:k.contextElement||oo(n.elements.popper),d,p,l),H=ll(n.elements.reference),U=Z2({reference:H,element:R,placement:s}),J=f0(Object.assign({},R,U)),ie=b===pc?J:H,ge={top:j.top-ie.top+N.top,bottom:ie.bottom-j.bottom+N.bottom,left:j.left-ie.left+N.left,right:ie.right-j.right+N.right},be=n.modifiersData.offset;if(b===pc&&be){var he=be[s];Object.keys(ge).forEach(function(ce){var ve=[Jr,Xr].indexOf(ce)>=0?1:-1,de=[pr,Xr].indexOf(ce)>=0?"y":"x";ge[ce]+=he[de]*ve})}return ge}function JL(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,u=t.flipVariations,d=t.allowedAutoPlacements,h=d===void 0?F2:d,p=cl(r),m=p?u?oS:oS.filter(function(w){return cl(w)===p}):fu,b=m.filter(function(w){return h.indexOf(w)>=0});b.length===0&&(b=m);var x=b.reduce(function(w,S){return w[S]=eu(n,{placement:S,boundary:s,rootBoundary:o,padding:l})[wi(S)],w},{});return Object.keys(x).sort(function(w,S){return x[w]-x[S]})}function ZL(n){if(wi(n)===yy)return[];var e=df(n);return[cS(n),e,cS(e)]}function eB(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!0:l,d=t.fallbackPlacements,h=t.padding,p=t.boundary,m=t.rootBoundary,b=t.altBoundary,x=t.flipVariations,w=x===void 0?!0:x,S=t.allowedAutoPlacements,C=e.options.placement,N=wi(C),L=N===C,R=d||(L||!w?[df(C)]:ZL(C)),k=[C].concat(R).reduce(function(se,le){return se.concat(wi(le)===yy?JL(e,{placement:le,boundary:p,rootBoundary:m,padding:h,flipVariations:w,allowedAutoPlacements:S}):le)},[]),j=e.rects.reference,H=e.rects.popper,U=new Map,J=!0,ie=k[0],ge=0;ge<k.length;ge++){var be=k[ge],he=wi(be),ce=cl(be)===ol,ve=[pr,Xr].indexOf(he)>=0,de=ve?"width":"height",z=eu(e,{placement:be,boundary:p,rootBoundary:m,altBoundary:b,padding:h}),D=ve?ce?Jr:mr:ce?Xr:pr;j[de]>H[de]&&(D=df(D));var $=df(D),B=[];if(o&&B.push(z[he]<=0),u&&B.push(z[D]<=0,z[$]<=0),B.every(function(se){return se})){ie=be,J=!1;break}U.set(be,B)}if(J)for(var te=w?3:1,M=function(le){var Z=k.find(function(Se){var ke=U.get(Se);if(ke)return ke.slice(0,le).every(function(fe){return fe})});if(Z)return ie=Z,"break"},P=te;P>0;P--){var W=M(P);if(W==="break")break}e.placement!==ie&&(e.modifiersData[r]._skip=!0,e.placement=ie,e.reset=!0)}}const tB={name:"flip",enabled:!0,phase:"main",fn:eB,requiresIfExists:["offset"],data:{_skip:!1}};function dS(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function fS(n){return[pr,Jr,Xr,mr].some(function(e){return n[e]>=0})}function nB(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=eu(e,{elementContext:"reference"}),u=eu(e,{altBoundary:!0}),d=dS(l,r),h=dS(u,s,o),p=fS(d),m=fS(h);e.modifiersData[t]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const rB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nB};function iB(n,e,t){var r=wi(n),s=[mr,pr].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],u=o[1];return l=l||0,u=(u||0)*s,[mr,Jr].indexOf(r)>=0?{x:u,y:l}:{x:l,y:u}}function sB(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=F2.reduce(function(p,m){return p[m]=iB(m,e.rects,o),p},{}),u=l[e.placement],d=u.x,h=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=l}const oB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sB};function aB(n){var e=n.state,t=n.name;e.modifiersData[t]=Z2({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const lB={name:"popperOffsets",enabled:!0,phase:"read",fn:aB,data:{}};function cB(n){return n==="x"?"y":"x"}function uB(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!1:l,d=t.boundary,h=t.rootBoundary,p=t.altBoundary,m=t.padding,b=t.tether,x=b===void 0?!0:b,w=t.tetherOffset,S=w===void 0?0:w,C=eu(e,{boundary:d,rootBoundary:h,padding:m,altBoundary:p}),N=wi(e.placement),L=cl(e.placement),R=!L,k=vy(N),j=cB(k),H=e.modifiersData.popperOffsets,U=e.rects.reference,J=e.rects.popper,ie=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,ge=typeof ie=="number"?{mainAxis:ie,altAxis:ie}:Object.assign({mainAxis:0,altAxis:0},ie),be=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,he={x:0,y:0};if(H){if(o){var ce,ve=k==="y"?pr:mr,de=k==="y"?Xr:Jr,z=k==="y"?"height":"width",D=H[k],$=D+C[ve],B=D-C[de],te=x?-J[z]/2:0,M=L===ol?U[z]:J[z],P=L===ol?-J[z]:-U[z],W=e.elements.arrow,se=x&&W?xy(W):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Q2(),Z=le[ve],Se=le[de],ke=kc(0,U[z],se[z]),fe=R?U[z]/2-te-ke-Z-ge.mainAxis:M-ke-Z-ge.mainAxis,nt=R?-U[z]/2+te+ke+Se+ge.mainAxis:P+ke+Se+ge.mainAxis,kt=e.elements.arrow&&hu(e.elements.arrow),Vt=kt?k==="y"?kt.clientTop||0:kt.clientLeft||0:0,qn=(ce=be==null?void 0:be[k])!=null?ce:0,_t=D+fe-qn-Vt,Sn=D+nt-qn,Mt=kc(x?jf($,_t):$,D,x?Fo(B,Sn):B);H[k]=Mt,he[k]=Mt-D}if(u){var rn,En=k==="x"?pr:mr,K=k==="x"?Xr:Jr,Ee=H[j],We=j==="y"?"height":"width",Be=Ee+C[En],ot=Ee-C[K],Ze=[pr,mr].indexOf(N)!==-1,vn=(rn=be==null?void 0:be[j])!=null?rn:0,jt=Ze?Be:Ee-U[We]-J[We]-vn+ge.altAxis,ye=Ze?Ee+U[We]+J[We]-vn-ge.altAxis:ot,Ne=x&&Ze?jL(jt,Ee,ye):kc(x?jt:Be,Ee,x?ye:ot);H[j]=Ne,he[j]=Ne-Ee}e.modifiersData[r]=he}}const dB={name:"preventOverflow",enabled:!0,phase:"main",fn:uB,requiresIfExists:["offset"]};function fB(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function hB(n){return n===Rr(n)||!Yr(n)?wy(n):fB(n)}function pB(n){var e=n.getBoundingClientRect(),t=al(e.width)/n.offsetWidth||1,r=al(e.height)/n.offsetHeight||1;return t!==1||r!==1}function mB(n,e,t){t===void 0&&(t=!1);var r=Yr(e),s=Yr(e)&&pB(e),o=oo(e),l=ll(n,s,t),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&((Ti(e)!=="body"||Ey(o))&&(u=hB(e)),Yr(e)?(d=ll(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=Sy(o))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function gB(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!t.has(u)){var d=e.get(u);d&&s(d)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function yB(n){var e=gB(n);return ML.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function bB(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function xB(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var hS={placement:"bottom",modifiers:[],strategy:"absolute"};function pS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function vB(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?hS:s;return function(u,d,h){h===void 0&&(h=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},hS,o),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],b=!1,x={state:p,setOptions:function(N){var L=typeof N=="function"?N(p.options):N;S(),p.options=Object.assign({},o,p.options,L),p.scrollParents={reference:Zo(u)?Mc(u):u.contextElement?Mc(u.contextElement):[],popper:Mc(d)};var R=yB(xB([].concat(r,p.options.modifiers)));return p.orderedModifiers=R.filter(function(k){return k.enabled}),w(),x.update()},forceUpdate:function(){if(!b){var N=p.elements,L=N.reference,R=N.popper;if(pS(L,R)){p.rects={reference:mB(L,hu(R),p.options.strategy==="fixed"),popper:xy(R)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(ge){return p.modifiersData[ge.name]=Object.assign({},ge.data)});for(var k=0;k<p.orderedModifiers.length;k++){if(p.reset===!0){p.reset=!1,k=-1;continue}var j=p.orderedModifiers[k],H=j.fn,U=j.options,J=U===void 0?{}:U,ie=j.name;typeof H=="function"&&(p=H({state:p,options:J,name:ie,instance:x})||p)}}}},update:bB(function(){return new Promise(function(C){x.forceUpdate(),C(p)})}),destroy:function(){S(),b=!0}};if(!pS(u,d))return x;x.setOptions(h).then(function(C){!b&&h.onFirstUpdate&&h.onFirstUpdate(C)});function w(){p.orderedModifiers.forEach(function(C){var N=C.name,L=C.options,R=L===void 0?{}:L,k=C.effect;if(typeof k=="function"){var j=k({state:p,name:N,instance:x,options:R}),H=function(){};m.push(j||H)}})}function S(){m.forEach(function(C){return C()}),m=[]}return x}}var wB=[VL,lB,qL,G2,oB,tB,dB,IL,rB],SB=vB({defaultModifiers:wB}),EB="tippy-box",eT="tippy-content",CB="tippy-backdrop",tT="tippy-arrow",nT="tippy-svg-arrow",Mo={passive:!0,capture:!0},rT=function(){return document.body};function bg(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function Cy(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function iT(n,e){return typeof n=="function"?n.apply(void 0,e):n}function mS(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function TB(n){return n.split(/\s+/).filter(Boolean)}function Ga(n){return[].concat(n)}function gS(n,e){n.indexOf(e)===-1&&n.push(e)}function NB(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function AB(n){return n.split("-")[0]}function Lf(n){return[].slice.call(n)}function yS(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Oc(){return document.createElement("div")}function _h(n){return["Element","Fragment"].some(function(e){return Cy(n,e)})}function kB(n){return Cy(n,"NodeList")}function MB(n){return Cy(n,"MouseEvent")}function OB(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function RB(n){return _h(n)?[n]:kB(n)?Lf(n):Array.isArray(n)?n:Lf(document.querySelectorAll(n))}function xg(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function bS(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function DB(n){var e,t=Ga(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function _B(n,e){var t=e.clientX,r=e.clientY;return n.every(function(s){var o=s.popperRect,l=s.popperState,u=s.props,d=u.interactiveBorder,h=AB(l.placement),p=l.modifiersData.offset;if(!p)return!0;var m=h==="bottom"?p.top.y:0,b=h==="top"?p.bottom.y:0,x=h==="right"?p.left.x:0,w=h==="left"?p.right.x:0,S=o.top-r+m>d,C=r-o.bottom-b>d,N=o.left-t+x>d,L=t-o.right-w>d;return S||C||N||L})}function vg(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){n[r](s,t)})}function xS(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var yi={isTouch:!1},vS=0;function jB(){yi.isTouch||(yi.isTouch=!0,window.performance&&document.addEventListener("mousemove",sT))}function sT(){var n=performance.now();n-vS<20&&(yi.isTouch=!1,document.removeEventListener("mousemove",sT)),vS=n}function LB(){var n=document.activeElement;if(OB(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function BB(){document.addEventListener("touchstart",jB,Mo),window.addEventListener("blur",LB)}var zB=typeof window<"u"&&typeof document<"u",IB=zB?!!window.msCrypto:!1,HB={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},UB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ii=Object.assign({appendTo:rT,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},HB,UB),$B=Object.keys(ii),qB=function(e){var t=Object.keys(e);t.forEach(function(r){ii[r]=e[r]})};function oT(n){var e=n.plugins||[],t=e.reduce(function(r,s){var o=s.name,l=s.defaultValue;if(o){var u;r[o]=n[o]!==void 0?n[o]:(u=ii[o])!=null?u:l}return r},{});return Object.assign({},n,t)}function PB(n,e){var t=e?Object.keys(oT(Object.assign({},ii,{plugins:e}))):$B,r=t.reduce(function(s,o){var l=(n.getAttribute("data-tippy-"+o)||"").trim();if(!l)return s;if(o==="content")s[o]=l;else try{s[o]=JSON.parse(l)}catch{s[o]=l}return s},{});return r}function wS(n,e){var t=Object.assign({},e,{content:iT(e.content,[n])},e.ignoreAttributes?{}:PB(n,e.plugins));return t.aria=Object.assign({},ii.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var VB=function(){return"innerHTML"};function h0(n,e){n[VB()]=e}function SS(n){var e=Oc();return n===!0?e.className=tT:(e.className=nT,_h(n)?e.appendChild(n):h0(e,n)),e}function ES(n,e){_h(e.content)?(h0(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?h0(n,e.content):n.textContent=e.content)}function p0(n){var e=n.firstElementChild,t=Lf(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(eT)}),arrow:t.find(function(r){return r.classList.contains(tT)||r.classList.contains(nT)}),backdrop:t.find(function(r){return r.classList.contains(CB)})}}function aT(n){var e=Oc(),t=Oc();t.className=EB,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Oc();r.className=eT,r.setAttribute("data-state","hidden"),ES(r,n.props),e.appendChild(t),t.appendChild(r),s(n.props,n.props);function s(o,l){var u=p0(e),d=u.box,h=u.content,p=u.arrow;l.theme?d.setAttribute("data-theme",l.theme):d.removeAttribute("data-theme"),typeof l.animation=="string"?d.setAttribute("data-animation",l.animation):d.removeAttribute("data-animation"),l.inertia?d.setAttribute("data-inertia",""):d.removeAttribute("data-inertia"),d.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?d.setAttribute("role",l.role):d.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&ES(h,n.props),l.arrow?p?o.arrow!==l.arrow&&(d.removeChild(p),d.appendChild(SS(l.arrow))):d.appendChild(SS(l.arrow)):p&&d.removeChild(p)}return{popper:e,onUpdate:s}}aT.$$tippy=!0;var FB=1,Gd=[],wg=[];function GB(n,e){var t=wS(n,Object.assign({},ii,oT(yS(e)))),r,s,o,l=!1,u=!1,d=!1,h=!1,p,m,b,x=[],w=mS(_t,t.interactiveDebounce),S,C=FB++,N=null,L=NB(t.plugins),R={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},k={id:C,reference:n,popper:Oc(),popperInstance:N,props:t,state:R,plugins:L,clearDelayTimeouts:jt,setProps:ye,setContent:Ne,show:Ke,hide:Ye,hideWithInteractivity:It,enable:Ze,disable:vn,unmount:Xt,destroy:gr};if(!t.render)return k;var j=t.render(k),H=j.popper,U=j.onUpdate;H.setAttribute("data-tippy-root",""),H.id="tippy-"+k.id,k.popper=H,n._tippy=k,H._tippy=k;var J=L.map(function(Y){return Y.fn(k)}),ie=n.hasAttribute("aria-expanded");return kt(),te(),D(),$("onCreate",[k]),t.showOnCreate&&Be(),H.addEventListener("mouseenter",function(){k.props.interactive&&k.state.isVisible&&k.clearDelayTimeouts()}),H.addEventListener("mouseleave",function(){k.props.interactive&&k.props.trigger.indexOf("mouseenter")>=0&&ve().addEventListener("mousemove",w)}),k;function ge(){var Y=k.props.touch;return Array.isArray(Y)?Y:[Y,0]}function be(){return ge()[0]==="hold"}function he(){var Y;return!!((Y=k.props.render)!=null&&Y.$$tippy)}function ce(){return S||n}function ve(){var Y=ce().parentNode;return Y?DB(Y):document}function de(){return p0(H)}function z(Y){return k.state.isMounted&&!k.state.isVisible||yi.isTouch||p&&p.type==="focus"?0:bg(k.props.delay,Y?0:1,ii.delay)}function D(Y){Y===void 0&&(Y=!1),H.style.pointerEvents=k.props.interactive&&!Y?"":"none",H.style.zIndex=""+k.props.zIndex}function $(Y,Te,Me){if(Me===void 0&&(Me=!0),J.forEach(function(Xe){Xe[Y]&&Xe[Y].apply(Xe,Te)}),Me){var ft;(ft=k.props)[Y].apply(ft,Te)}}function B(){var Y=k.props.aria;if(Y.content){var Te="aria-"+Y.content,Me=H.id,ft=Ga(k.props.triggerTarget||n);ft.forEach(function(Xe){var vt=Xe.getAttribute(Te);if(k.state.isVisible)Xe.setAttribute(Te,vt?vt+" "+Me:Me);else{var Jt=vt&&vt.replace(Me,"").trim();Jt?Xe.setAttribute(Te,Jt):Xe.removeAttribute(Te)}})}}function te(){if(!(ie||!k.props.aria.expanded)){var Y=Ga(k.props.triggerTarget||n);Y.forEach(function(Te){k.props.interactive?Te.setAttribute("aria-expanded",k.state.isVisible&&Te===ce()?"true":"false"):Te.removeAttribute("aria-expanded")})}}function M(){ve().removeEventListener("mousemove",w),Gd=Gd.filter(function(Y){return Y!==w})}function P(Y){if(!(yi.isTouch&&(d||Y.type==="mousedown"))){var Te=Y.composedPath&&Y.composedPath()[0]||Y.target;if(!(k.props.interactive&&xS(H,Te))){if(Ga(k.props.triggerTarget||n).some(function(Me){return xS(Me,Te)})){if(yi.isTouch||k.state.isVisible&&k.props.trigger.indexOf("click")>=0)return}else $("onClickOutside",[k,Y]);k.props.hideOnClick===!0&&(k.clearDelayTimeouts(),k.hide(),u=!0,setTimeout(function(){u=!1}),k.state.isMounted||Z())}}}function W(){d=!0}function se(){d=!1}function le(){var Y=ve();Y.addEventListener("mousedown",P,!0),Y.addEventListener("touchend",P,Mo),Y.addEventListener("touchstart",se,Mo),Y.addEventListener("touchmove",W,Mo)}function Z(){var Y=ve();Y.removeEventListener("mousedown",P,!0),Y.removeEventListener("touchend",P,Mo),Y.removeEventListener("touchstart",se,Mo),Y.removeEventListener("touchmove",W,Mo)}function Se(Y,Te){fe(Y,function(){!k.state.isVisible&&H.parentNode&&H.parentNode.contains(H)&&Te()})}function ke(Y,Te){fe(Y,Te)}function fe(Y,Te){var Me=de().box;function ft(Xe){Xe.target===Me&&(vg(Me,"remove",ft),Te())}if(Y===0)return Te();vg(Me,"remove",m),vg(Me,"add",ft),m=ft}function nt(Y,Te,Me){Me===void 0&&(Me=!1);var ft=Ga(k.props.triggerTarget||n);ft.forEach(function(Xe){Xe.addEventListener(Y,Te,Me),x.push({node:Xe,eventType:Y,handler:Te,options:Me})})}function kt(){be()&&(nt("touchstart",qn,{passive:!0}),nt("touchend",Sn,{passive:!0})),TB(k.props.trigger).forEach(function(Y){if(Y!=="manual")switch(nt(Y,qn),Y){case"mouseenter":nt("mouseleave",Sn);break;case"focus":nt(IB?"focusout":"blur",Mt);break;case"focusin":nt("focusout",Mt);break}})}function Vt(){x.forEach(function(Y){var Te=Y.node,Me=Y.eventType,ft=Y.handler,Xe=Y.options;Te.removeEventListener(Me,ft,Xe)}),x=[]}function qn(Y){var Te,Me=!1;if(!(!k.state.isEnabled||rn(Y)||u)){var ft=((Te=p)==null?void 0:Te.type)==="focus";p=Y,S=Y.currentTarget,te(),!k.state.isVisible&&MB(Y)&&Gd.forEach(function(Xe){return Xe(Y)}),Y.type==="click"&&(k.props.trigger.indexOf("mouseenter")<0||l)&&k.props.hideOnClick!==!1&&k.state.isVisible?Me=!0:Be(Y),Y.type==="click"&&(l=!Me),Me&&!ft&&ot(Y)}}function _t(Y){var Te=Y.target,Me=ce().contains(Te)||H.contains(Te);if(!(Y.type==="mousemove"&&Me)){var ft=We().concat(H).map(function(Xe){var vt,Jt=Xe._tippy,Yn=(vt=Jt.popperInstance)==null?void 0:vt.state;return Yn?{popperRect:Xe.getBoundingClientRect(),popperState:Yn,props:t}:null}).filter(Boolean);_B(ft,Y)&&(M(),ot(Y))}}function Sn(Y){var Te=rn(Y)||k.props.trigger.indexOf("click")>=0&&l;if(!Te){if(k.props.interactive){k.hideWithInteractivity(Y);return}ot(Y)}}function Mt(Y){k.props.trigger.indexOf("focusin")<0&&Y.target!==ce()||k.props.interactive&&Y.relatedTarget&&H.contains(Y.relatedTarget)||ot(Y)}function rn(Y){return yi.isTouch?be()!==Y.type.indexOf("touch")>=0:!1}function En(){K();var Y=k.props,Te=Y.popperOptions,Me=Y.placement,ft=Y.offset,Xe=Y.getReferenceClientRect,vt=Y.moveTransition,Jt=he()?p0(H).arrow:null,Yn=Xe?{getBoundingClientRect:Xe,contextElement:Xe.contextElement||ce()}:n,yr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Q){var ue=Q.state;if(he()){var De=de(),pt=De.box;["placement","reference-hidden","escaped"].forEach(function(Fe){Fe==="placement"?pt.setAttribute("data-placement",ue.placement):ue.attributes.popper["data-popper-"+Fe]?pt.setAttribute("data-"+Fe,""):pt.removeAttribute("data-"+Fe)}),ue.attributes.popper={}}}},Ht=[{name:"offset",options:{offset:ft}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!vt}},yr];he()&&Jt&&Ht.push({name:"arrow",options:{element:Jt,padding:3}}),Ht.push.apply(Ht,(Te==null?void 0:Te.modifiers)||[]),k.popperInstance=SB(Yn,H,Object.assign({},Te,{placement:Me,onFirstUpdate:b,modifiers:Ht}))}function K(){k.popperInstance&&(k.popperInstance.destroy(),k.popperInstance=null)}function Ee(){var Y=k.props.appendTo,Te,Me=ce();k.props.interactive&&Y===rT||Y==="parent"?Te=Me.parentNode:Te=iT(Y,[Me]),Te.contains(H)||Te.appendChild(H),k.state.isMounted=!0,En()}function We(){return Lf(H.querySelectorAll("[data-tippy-root]"))}function Be(Y){k.clearDelayTimeouts(),Y&&$("onTrigger",[k,Y]),le();var Te=z(!0),Me=ge(),ft=Me[0],Xe=Me[1];yi.isTouch&&ft==="hold"&&Xe&&(Te=Xe),Te?r=setTimeout(function(){k.show()},Te):k.show()}function ot(Y){if(k.clearDelayTimeouts(),$("onUntrigger",[k,Y]),!k.state.isVisible){Z();return}if(!(k.props.trigger.indexOf("mouseenter")>=0&&k.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Y.type)>=0&&l)){var Te=z(!1);Te?s=setTimeout(function(){k.state.isVisible&&k.hide()},Te):o=requestAnimationFrame(function(){k.hide()})}}function Ze(){k.state.isEnabled=!0}function vn(){k.hide(),k.state.isEnabled=!1}function jt(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)}function ye(Y){if(!k.state.isDestroyed){$("onBeforeUpdate",[k,Y]),Vt();var Te=k.props,Me=wS(n,Object.assign({},Te,yS(Y),{ignoreAttributes:!0}));k.props=Me,kt(),Te.interactiveDebounce!==Me.interactiveDebounce&&(M(),w=mS(_t,Me.interactiveDebounce)),Te.triggerTarget&&!Me.triggerTarget?Ga(Te.triggerTarget).forEach(function(ft){ft.removeAttribute("aria-expanded")}):Me.triggerTarget&&n.removeAttribute("aria-expanded"),te(),D(),U&&U(Te,Me),k.popperInstance&&(En(),We().forEach(function(ft){requestAnimationFrame(ft._tippy.popperInstance.forceUpdate)})),$("onAfterUpdate",[k,Y])}}function Ne(Y){k.setProps({content:Y})}function Ke(){var Y=k.state.isVisible,Te=k.state.isDestroyed,Me=!k.state.isEnabled,ft=yi.isTouch&&!k.props.touch,Xe=bg(k.props.duration,0,ii.duration);if(!(Y||Te||Me||ft)&&!ce().hasAttribute("disabled")&&($("onShow",[k],!1),k.props.onShow(k)!==!1)){if(k.state.isVisible=!0,he()&&(H.style.visibility="visible"),D(),le(),k.state.isMounted||(H.style.transition="none"),he()){var vt=de(),Jt=vt.box,Yn=vt.content;xg([Jt,Yn],0)}b=function(){var Ht;if(!(!k.state.isVisible||h)){if(h=!0,H.offsetHeight,H.style.transition=k.props.moveTransition,he()&&k.props.animation){var O=de(),Q=O.box,ue=O.content;xg([Q,ue],Xe),bS([Q,ue],"visible")}B(),te(),gS(wg,k),(Ht=k.popperInstance)==null||Ht.forceUpdate(),$("onMount",[k]),k.props.animation&&he()&&ke(Xe,function(){k.state.isShown=!0,$("onShown",[k])})}},Ee()}}function Ye(){var Y=!k.state.isVisible,Te=k.state.isDestroyed,Me=!k.state.isEnabled,ft=bg(k.props.duration,1,ii.duration);if(!(Y||Te||Me)&&($("onHide",[k],!1),k.props.onHide(k)!==!1)){if(k.state.isVisible=!1,k.state.isShown=!1,h=!1,l=!1,he()&&(H.style.visibility="hidden"),M(),Z(),D(!0),he()){var Xe=de(),vt=Xe.box,Jt=Xe.content;k.props.animation&&(xg([vt,Jt],ft),bS([vt,Jt],"hidden"))}B(),te(),k.props.animation?he()&&Se(ft,k.unmount):k.unmount()}}function It(Y){ve().addEventListener("mousemove",w),gS(Gd,w),w(Y)}function Xt(){k.state.isVisible&&k.hide(),k.state.isMounted&&(K(),We().forEach(function(Y){Y._tippy.unmount()}),H.parentNode&&H.parentNode.removeChild(H),wg=wg.filter(function(Y){return Y!==k}),k.state.isMounted=!1,$("onHidden",[k]))}function gr(){k.state.isDestroyed||(k.clearDelayTimeouts(),k.unmount(),Vt(),delete n._tippy,k.state.isDestroyed=!0,$("onDestroy",[k]))}}function ml(n,e){e===void 0&&(e={});var t=ii.plugins.concat(e.plugins||[]);BB();var r=Object.assign({},e,{plugins:t}),s=RB(n),o=s.reduce(function(l,u){var d=u&&GB(u,r);return d&&l.push(d),l},[]);return _h(n)?o[0]:o}ml.defaultProps=ii;ml.setDefaultProps=qB;ml.currentInput=yi;Object.assign({},G2,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});ml.setDefaultProps({render:aT});class KB{constructor({editor:e,element:t,view:r,tippyOptions:s={},updateDelay:o=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:u,state:d,from:h,to:p})=>{const{doc:m,selection:b}=d,{empty:x}=b,w=!m.textBetween(h,p).length&&py(d.selection),S=this.element.contains(document.activeElement);return!(!(u.hasFocus()||S)||x||w||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var d;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&(!((d=this.element.parentNode)===null||d===void 0)&&d.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=u=>{this.blurHandler({event:u})},this.handleDebouncedUpdate=(u,d)=>{const h=!(d!=null&&d.selection.eq(u.state.selection)),p=!(d!=null&&d.doc.eq(u.state.doc));!h&&!p||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,h,p,d)},this.updateDelay))},this.updateHandler=(u,d,h,p)=>{var m,b,x;const{state:w,composing:S}=u,{selection:C}=w;if(S||!d&&!h)return;this.createTooltip();const{ranges:L}=C,R=Math.min(...L.map(H=>H.$from.pos)),k=Math.max(...L.map(H=>H.$to.pos));if(!((m=this.shouldShow)===null||m===void 0?void 0:m.call(this,{editor:this.editor,element:this.element,view:u,state:w,oldState:p,from:R,to:k}))){this.hide();return}(b=this.tippy)===null||b===void 0||b.setProps({getReferenceClientRect:((x=this.tippyOptions)===null||x===void 0?void 0:x.getReferenceClientRect)||(()=>{if(q2(w.selection)){let H=u.nodeDOM(R);if(H){const U=H.dataset.nodeViewWrapper?H:H.querySelector("[data-node-view-wrapper]");if(U&&(H=U.firstChild),H)return H.getBoundingClientRect()}}return zj(u,R,k)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!t)&&(this.tippy=ml(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,s=r.selection.from!==r.selection.to;if(this.updateDelay>0&&s){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),l=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,l,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const lT=n=>new Wt({key:typeof n.pluginKey=="string"?new dn(n.pluginKey):n.pluginKey,view:e=>new KB({view:e,...n})});Rn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[lT({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function WB(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cT={exports:{}},Sg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function QB(){if(CS)return Sg;CS=1;var n=oe;function e(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(m,b){var x=b(),w=r({inst:{value:x,getSnapshot:b}}),S=w[0].inst,C=w[1];return o(function(){S.value=x,S.getSnapshot=b,d(S)&&C({inst:S})},[m,x,b]),s(function(){return d(S)&&C({inst:S}),m(function(){d(S)&&C({inst:S})})},[m]),l(x),x}function d(m){var b=m.getSnapshot;m=m.value;try{var x=b();return!t(m,x)}catch{return!0}}function h(m,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Sg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Sg}cT.exports=QB();var Ty=cT.exports;const YB=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},XB=({contentComponent:n})=>{const e=Ty.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return oe.createElement(oe.Fragment,null,Object.values(e))};function JB(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:eC.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class ZB extends oe.Component{constructor(e){var t;super(e),this.editorContentRef=oe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=JB(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return oe.createElement(oe.Fragment,null,oe.createElement("div",{ref:YB(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&oe.createElement(XB,{contentComponent:e.contentComponent}))}}const e6=T.forwardRef((n,e)=>{const t=oe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return oe.createElement(ZB,{key:t,innerRef:e,...n})}),t6=oe.memo(e6);var n6=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=r;s--!==0;){var l=o[s];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},r6=WB(n6),uT={exports:{}},Eg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS;function i6(){if(TS)return Eg;TS=1;var n=oe,e=Ty;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return Eg.useSyncExternalStoreWithSelector=function(h,p,m,b,x){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function N(H){if(!L){if(L=!0,R=H,H=b(H),x!==void 0&&S.hasValue){var U=S.value;if(x(U,H))return k=U}return k=H}if(U=k,r(R,H))return U;var J=b(H);return x!==void 0&&x(U,J)?U:(R=H,k=J)}var L=!1,R,k,j=m===void 0?null:m;return[function(){return N(p())},j===null?void 0:function(){return N(j())}]},[p,m,b,x]);var C=s(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=C},[C]),d(C),C},Eg}uT.exports=i6();var s6=uT.exports;const o6=typeof window<"u"?T.useLayoutEffect:T.useEffect;class a6{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function l6(n){var e;const[t]=T.useState(()=>new a6(n.editor)),r=s6.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:r6);return o6(()=>t.watch(n.editor),[n.editor,t]),T.useDebugValue(r),r}const c6=!1,m0=typeof window>"u",u6=m0||!!(typeof window<"u"&&window.next);class Ny{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?m0||u6?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)===null||o===void 0?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)===null||o===void 0?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)===null||o===void 0?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)===null||o===void 0?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)===null||o===void 0?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)===null||o===void 0?void 0:o.call(s,...r)}};return new pL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,o)=>{var l;return s===((l=t.extensions)===null||l===void 0?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Ny.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function d6(n={},e=[]){const t=T.useRef(n);t.current=n;const[r]=T.useState(()=>new Ny(t)),s=Ty.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(s),T.useEffect(r.onRender(e)),l6({editor:s,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&o===0?0:o+1}),s}const dT=T.createContext({editor:null});dT.Consumer;const f6=()=>T.useContext(dT),fT=n=>{const[e,t]=T.useState(null),{editor:r}=f6();return T.useEffect(()=>{var s;if(!e||!((s=n.editor)===null||s===void 0)&&s.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:l,tippyOptions:u={},updateDelay:d,shouldShow:h=null}=n,p=l||r;if(!p){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=lT({updateDelay:d,editor:p,element:e,pluginKey:o,shouldShow:h,tippyOptions:u});return p.registerPlugin(m),()=>{p.unregisterPlugin(o)}},[n.editor,r,e]),oe.createElement("div",{ref:t,className:n.className,style:{visibility:"hidden"}},n.children)},hT=T.createContext({onDragStart:void 0}),pT=()=>T.useContext(hT),h6=n=>{const e=n.as||"div",{nodeViewContentRef:t}=pT();return oe.createElement(e,{...n,ref:t,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style}})},mT=oe.forwardRef((n,e)=>{const{onDragStart:t}=pT(),r=n.as||"div";return oe.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function NS(n){return!!(typeof n=="function"&&n.prototype&&n.prototype.isReactComponent)}function AS(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.forward_ref)"||n.$$typeof.description==="react.forward_ref"))}function p6(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.memo)"||n.$$typeof.description==="react.memo"))}function m6(n){if(NS(n)||AS(n))return!0;if(p6(n)){const e=n.type;if(e)return NS(e)||AS(e)}return!1}function g6(){try{if(T.version)return parseInt(T.version.split(".")[0],10)>=19}catch{}return!1}class gT{constructor(e,{editor:t,props:r={},as:s="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(s),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?ZE.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,s=this.editor,o=g6(),l=m6(t),u={...r};u.ref&&!(o||l)&&delete u.ref,!u.ref&&(o||l)&&(u.ref=d=>{this.ref=d}),this.reactElement=oe.createElement(t,{...u}),(e=s==null?void 0:s.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class y6 extends mL{constructor(e,t,r){if(super(e,t,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const s=this.dom.querySelector("[data-node-view-content]");if(!s)return;s.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(h={})=>this.updateAttributes(h),deleteNode:()=>this.deleteNode(),ref:T.createRef()};if(!this.component.displayName){const h=p=>p.charAt(0).toUpperCase()+p.substring(1);this.component.displayName=h(this.extension.name)}const s={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:h=>{h&&this.contentDOMElement&&h.firstChild!==this.contentDOMElement&&(h.hasAttribute("data-node-view-wrapper")&&h.removeAttribute("data-node-view-wrapper"),h.appendChild(this.contentDOMElement))}},o=this.component,l=T.memo(h=>oe.createElement(hT.Provider,{value:s},T.createElement(o,h)));l.displayName="ReactNodeView";let u=this.node.isInline?"span":"div";this.options.as&&(u=this.options.as);const{className:d=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new gT(l,{editor:this.editor,props:e,as:u,className:`node-${this.node.type.name} ${d}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,r){const s=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,l=this.decorations,u=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:o,oldDecorations:l,newNode:e,newDecorations:t,oldInnerDecorations:u,innerDecorations:r,updateProps:()=>s({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,s({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=Df(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function yT(n,e){return t=>t.editor.contentComponent?new y6(n,t,e):{}}const b6=/^\s*>\s$/,x6=Kt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Jc({find:b6,type:this.type})]}}),v6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,w6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,S6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,E6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,C6=Ci.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[sl({find:v6,type:this.type}),sl({find:S6,type:this.type})]},addPasteRules(){return[Jo({find:w6,type:this.type}),Jo({find:E6,type:this.type})]}}),T6="listItem",kS="textStyle",MS=/^\s*([-+*])\s$/,N6=Kt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(T6,this.editor.getAttributes(kS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Jc({find:MS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Jc({find:MS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kS),editor:this.editor})),[n]}}),A6=/(^|[^`])`([^`]+)`(?!`)/,k6=/(^|[^`])`([^`]+)`(?!`)/g,M6=Ci.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[sl({find:A6,type:this.type})]},addPasteRules(){return[Jo({find:k6,type:this.type})]}}),O6=/^```([a-z]+)?[\s\n]$/,R6=/^~~~([a-z]+)?[\s\n]$/,bT=Kt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",xt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(Ve.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[u0({find:O6,type:this.type,getAttributes:n=>({language:n[1]})}),u0({find:R6,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Wt({key:new dn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!t||!o)return!1;const{tr:l,schema:u}=n.state,d=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Ue.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),D6=Kt.create({name:"doc",topNode:!0,content:"block+"});function _6(n={}){return new Wt({view(e){return new j6(e,n)}})}class j6{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=l=>{this[s](l)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),l=o.width/s.offsetWidth,u=o.height/s.offsetHeight;if(t){let m=e.nodeBefore,b=e.nodeAfter;if(m||b){let x=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(x){let w=x.getBoundingClientRect(),S=m?w.bottom:w.top;m&&b&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*u;r={left:w.left,right:w.right,top:S-C,bottom:S+C}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*l;r={left:m.left-b,right:m.left+b,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),b=m.width/d.offsetWidth,x=m.height/d.offsetHeight;h=m.left-d.scrollLeft*b,p=m.top-d.scrollTop*x}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=MC(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const L6=Rn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_6(this.options)]}});class Gt extends Ve{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Gt.valid(r)?new Gt(r):Ve.near(r)}content(){return we.empty}eq(e){return e instanceof Gt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Gt(e.resolve(t.pos))}getBookmark(){return new Ay(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!B6(e)||!z6(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Gt.valid(e))return e;let s=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let d=e.doc.resolve(s);if(Gt.valid(d))return d}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!ze.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*t),r=!1;continue e}break}o=l,s+=t;let u=e.doc.resolve(s);if(Gt.valid(u))return u}return null}}}Gt.prototype.visible=!1;Gt.findFrom=Gt.findGapCursorFrom;Ve.jsonID("gapcursor",Gt);class Ay{constructor(e){this.pos=e}map(e){return new Ay(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Gt.valid(t)?new Gt(t):Ve.near(t)}}function xT(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function B6(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||xT(s.type))return!0;if(s.inlineContent)return!1}}return!0}function z6(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||xT(s.type))return!0;if(s.inlineContent)return!1}}return!0}function I6(){return new Wt({props:{decorations:q6,createSelectionBetween(n,e,t){return e.pos==t.pos&&Gt.valid(t)?new Gt(t):null},handleClick:U6,handleKeyDown:H6,handleDOMEvents:{beforeinput:$6}}})}const H6=sy({ArrowLeft:Kd("horiz",-1),ArrowRight:Kd("horiz",1),ArrowUp:Kd("vert",-1),ArrowDown:Kd("vert",1)});function Kd(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Ue){if(!o.endOfTextblock(t)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Gt.findGapCursorFrom(u,e,d);return h?(s&&s(r.tr.setSelection(new Gt(h))),!0):!1}}function U6(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Gt.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&ze.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Gt(r))),!0)}function $6(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Gt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=ae.empty;for(let l=r.length-1;l>=0;l--)s=ae.from(r[l].createAndFill(null,s));let o=n.state.tr.replace(t.pos,t.pos,new we(s,0,0));return o.setSelection(Ue.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function q6(n){if(!(n.selection instanceof Gt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Pt.create(n.doc,[An.widget(n.selection.head,e,{key:"gapcursor"})])}const P6=Rn.create({name:"gapCursor",addProseMirrorPlugins(){return[I6()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=it(Re(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),V6=Kt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",xt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:o}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(b=>u.includes(b.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),F6=Kt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,xt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>u0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Bf=200,Mn=function(){};Mn.prototype.append=function(e){return e.length?(e=Mn.from(e),!this.length&&e||e.length<Bf&&this.leafAppend(e)||this.length<Bf&&e.leafPrepend(this)||this.appendInner(e)):this};Mn.prototype.prepend=function(e){return e.length?Mn.from(e).append(this):this};Mn.prototype.appendInner=function(e){return new G6(this,e)};Mn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Mn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Mn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Mn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Mn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,l){return s.push(e(o,l))},t,r),s};Mn.from=function(e){return e instanceof Mn?e:e&&e.length?new vT(e):Mn.empty};var vT=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,l,u){for(var d=o;d<l;d++)if(s(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,l,u){for(var d=o-1;d>=l;d--)if(s(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Bf)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Bf)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Mn);Mn.empty=new vT([]);var G6=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(s,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Mn);const K6=500;class ni{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;t&&(s=this.remapping(r,this.items.length),o=s.maps.length);let l=e.tr,u,d,h=[],p=[];return this.items.forEach((m,b)=>{if(!m.step){s||(s=this.remapping(r,b+1),o=s.maps.length),o--,p.push(m);return}if(s){p.push(new pi(m.map));let x=m.step.map(s.slice(o)),w;x&&l.maybeStep(x).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new pi(w,void 0,void 0,h.length+p.length))),o--,w&&s.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(o)):m.selection,d=new ni(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,t,r,s){let o=[],l=this.eventCount,u=this.items,d=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),b=new pi(e.mapping.maps[p],m,t),x;(x=d&&d.merge(b))&&(b=x,p?o.pop():u=u.slice(0,u.length-1)),o.push(b),t&&(l++,t=void 0),s||(d=b)}let h=l-r.depth;return h>Q6&&(u=W6(u,h),l-=h),new ni(u.append(o),l)}remapping(e,t){let r=new Fc;return this.items.forEach((s,o)=>{let l=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new ni(this.items.append(e.map(t=>new pi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(b=>{b.selection&&u--},s);let d=t;this.items.forEach(b=>{let x=o.getMirror(--d);if(x==null)return;l=Math.min(l,x);let w=o.maps[x];if(b.step){let S=e.steps[x].invert(e.docs[x]),C=b.selection&&b.selection.map(o.slice(d+1,x));C&&u++,r.push(new pi(w,S,C))}else r.push(new pi(w))},s);let h=[];for(let b=t;b<l;b++)h.push(new pi(o.maps[b]));let p=this.items.slice(0,s).append(h).append(r),m=new ni(p,u);return m.emptyItemCount()>K6&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(t.slice(r)),h=d&&d.getMap();if(r--,h&&t.appendMap(h,r),d){let p=l.selection&&l.selection.map(t.slice(r));p&&o++;let m=new pi(h.invert(),d,p),b,x=s.length-1;(b=s.length&&s[x].merge(m))?s[x]=b:s.push(m)}}else l.map&&r--},this.items.length,0),new ni(Mn.from(s.reverse()),o)}}ni.empty=new ni(Mn.empty,0);function W6(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class pi{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new pi(t.getMap().invert(),t,this.selection)}}}class $s{constructor(e,t,r,s,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const Q6=20;function Y6(n,e,t,r){let s=t.getMeta(Go),o;if(s)return s.historyState;t.getMeta(Z6)&&(n=new $s(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Go))return l.getMeta(Go).redo?new $s(n.done.addTransform(t,void 0,r,ff(e)),n.undone,OS(t.mapping.maps),n.prevTime,n.prevComposition):new $s(n.done,n.undone.addTransform(t,void 0,r,ff(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),d=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!X6(t,n.prevRanges)),h=l?Cg(n.prevRanges,t.mapping):OS(t.mapping.maps);return new $s(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,ff(e)),ni.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new $s(n.done.rebased(t,o),n.undone.rebased(t,o),Cg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new $s(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Cg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function X6(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(t=!0)}),t}function OS(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,o,l)=>e.push(o,l));return e}function Cg(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),o=e.map(n[r+1],-1);s<=o&&t.push(s,o)}return t}function J6(n,e,t){let r=ff(e),s=Go.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),d=new $s(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Go,{redo:t,historyState:d})}let Tg=!1,RS=null;function ff(n){let e=n.plugins;if(RS!=e){Tg=!1,RS=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Tg=!0;break}}return Tg}const Go=new dn("history"),Z6=new dn("closeHistory");function ez(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Wt({key:Go,state:{init(){return new $s(ni.empty,ni.empty,null,0,-1)},apply(e,t,r){return Y6(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?ST:r=="historyRedo"?ET:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function wT(n,e){return(t,r)=>{let s=Go.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let o=J6(s,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const ST=wT(!1,!0),ET=wT(!0,!0),tz=Rn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>ST(n,e),redo:()=>({state:n,dispatch:e})=>ET(n,e)}},addProseMirrorPlugins(){return[ez(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),nz=Kt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",xt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!gL(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:s}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):q2(t)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:l,dispatch:u})=>{var d;if(u){const{$to:h}=l.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?l.setSelection(Ue.create(l.doc,h.pos+1)):h.nodeAfter.isBlock?l.setSelection(ze.create(l.doc,h.pos)):l.setSelection(Ue.create(l.doc,h.pos));else{const m=(d=h.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();m&&(l.insert(p,m),l.setSelection(Ue.create(l.doc,p+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[P2({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,sz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,oz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,az=Ci.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[sl({find:rz,type:this.type}),sl({find:sz,type:this.type})]},addPasteRules(){return[Jo({find:iz,type:this.type}),Jo({find:oz,type:this.type})]}}),lz=Kt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",xt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),cz="listItem",DS="textStyle",_S=/^(\d+)\.\s$/,uz=Kt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",xt(this.options.HTMLAttributes,t),0]:["ol",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cz,this.editor.getAttributes(DS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Jc({find:_S,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Jc({find:_S,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(DS)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),dz=Kt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),fz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,hz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,pz=Ci.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[sl({find:fz,type:this.type})]},addPasteRules(){return[Jo({find:hz,type:this.type})]}}),mz=Kt.create({name:"text",group:"inline"}),gz=Rn.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(C6.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(x6.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(N6.configure(this.options.bulletList)),this.options.code!==!1&&n.push(M6.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(bT.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(D6.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(L6.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(P6.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(V6.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(F6.configure(this.options.heading)),this.options.history!==!1&&n.push(tz.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(nz.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(az.configure(this.options.italic)),this.options.listItem!==!1&&n.push(lz.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(uz.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(dz.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(pz.configure(this.options.strike)),this.options.text!==!1&&n.push(mz.configure(this.options.text)),n}}),yz=Rn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Wt({key:new dn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((l,u)=>{const d=r>=u&&r<=u+l.nodeSize,h=!l.isLeaf&&Rh(l);if((d||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const m=An.node(u,u+l.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:d}):this.options.placeholder});s.push(m)}return this.options.includeChildren}),Pt.create(n,s)}}})]}}),bz=Ci.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",xt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),xz="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",vz="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",g0="numeric",y0="ascii",b0="alpha",Rc="asciinumeric",vc="alphanumeric",x0="domain",CT="emoji",wz="scheme",Sz="slashscheme",Ng="whitespace";function Ez(n,e){return n in e||(e[n]=[]),e[n]}function zo(n,e,t){e[g0]&&(e[Rc]=!0,e[vc]=!0),e[y0]&&(e[Rc]=!0,e[b0]=!0),e[Rc]&&(e[vc]=!0),e[b0]&&(e[vc]=!0),e[vc]&&(e[x0]=!0),e[CT]&&(e[x0]=!0);for(const r in e){const s=Ez(r,t);s.indexOf(n)<0&&s.push(n)}}function Cz(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function fr(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}fr.groups={};fr.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||fr.groups;let s;return e&&e.j?s=e:(s=new fr(e),t&&r&&zo(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const o=n.length;if(!o)return s;for(let l=0;l<o-1;l++)s=s.tt(n[l]);return s.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||fr.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const o=e;let l,u=s.go(n);if(u?(l=new fr,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new fr,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(Cz(l.t,r),t);zo(o,d,r)}else t&&zo(o,t,r);l.t=o}return s.j[n]=l,l}};const rt=(n,e,t,r,s)=>n.ta(e,t,r,s),tn=(n,e,t,r,s)=>n.tr(e,t,r,s),jS=(n,e,t,r,s)=>n.ts(e,t,r,s),me=(n,e,t,r,s)=>n.tt(e,t,r,s),Ji="WORD",v0="UWORD",TT="ASCIINUMERICAL",NT="ALPHANUMERICAL",tu="LOCALHOST",w0="TLD",S0="UTLD",hf="SCHEME",Ka="SLASH_SCHEME",ky="NUM",E0="WS",My="NL",Dc="OPENBRACE",_c="CLOSEBRACE",zf="OPENBRACKET",If="CLOSEBRACKET",Hf="OPENPAREN",Uf="CLOSEPAREN",$f="OPENANGLEBRACKET",qf="CLOSEANGLEBRACKET",Pf="FULLWIDTHLEFTPAREN",Vf="FULLWIDTHRIGHTPAREN",Ff="LEFTCORNERBRACKET",Gf="RIGHTCORNERBRACKET",Kf="LEFTWHITECORNERBRACKET",Wf="RIGHTWHITECORNERBRACKET",Qf="FULLWIDTHLESSTHAN",Yf="FULLWIDTHGREATERTHAN",Xf="AMPERSAND",Jf="APOSTROPHE",Zf="ASTERISK",qs="AT",eh="BACKSLASH",th="BACKTICK",nh="CARET",Vs="COLON",Oy="COMMA",rh="DOLLAR",mi="DOT",ih="EQUALS",Ry="EXCLAMATION",Pr="HYPHEN",jc="PERCENT",sh="PIPE",oh="PLUS",ah="POUND",Lc="QUERY",Dy="QUOTE",AT="FULLWIDTHMIDDLEDOT",_y="SEMI",gi="SLASH",Bc="TILDE",lh="UNDERSCORE",kT="EMOJI",ch="SYM";var MT=Object.freeze({__proto__:null,ALPHANUMERICAL:NT,AMPERSAND:Xf,APOSTROPHE:Jf,ASCIINUMERICAL:TT,ASTERISK:Zf,AT:qs,BACKSLASH:eh,BACKTICK:th,CARET:nh,CLOSEANGLEBRACKET:qf,CLOSEBRACE:_c,CLOSEBRACKET:If,CLOSEPAREN:Uf,COLON:Vs,COMMA:Oy,DOLLAR:rh,DOT:mi,EMOJI:kT,EQUALS:ih,EXCLAMATION:Ry,FULLWIDTHGREATERTHAN:Yf,FULLWIDTHLEFTPAREN:Pf,FULLWIDTHLESSTHAN:Qf,FULLWIDTHMIDDLEDOT:AT,FULLWIDTHRIGHTPAREN:Vf,HYPHEN:Pr,LEFTCORNERBRACKET:Ff,LEFTWHITECORNERBRACKET:Kf,LOCALHOST:tu,NL:My,NUM:ky,OPENANGLEBRACKET:$f,OPENBRACE:Dc,OPENBRACKET:zf,OPENPAREN:Hf,PERCENT:jc,PIPE:sh,PLUS:oh,POUND:ah,QUERY:Lc,QUOTE:Dy,RIGHTCORNERBRACKET:Gf,RIGHTWHITECORNERBRACKET:Wf,SCHEME:hf,SEMI:_y,SLASH:gi,SLASH_SCHEME:Ka,SYM:ch,TILDE:Bc,TLD:w0,UNDERSCORE:lh,UTLD:S0,UWORD:v0,WORD:Ji,WS:E0});const Yi=/[a-z]/,mc=new RegExp("\\p{L}","u"),Ag=new RegExp("\\p{Emoji}","u"),Xi=/\d/,kg=/\s/,LS="\r",Mg=`
`,Tz="",Nz="",Og="";let Wd=null,Qd=null;function Az(n=[]){const e={};fr.groups=e;const t=new fr;Wd==null&&(Wd=BS(xz)),Qd==null&&(Qd=BS(vz)),me(t,"'",Jf),me(t,"{",Dc),me(t,"}",_c),me(t,"[",zf),me(t,"]",If),me(t,"(",Hf),me(t,")",Uf),me(t,"<",$f),me(t,">",qf),me(t,"",Pf),me(t,"",Vf),me(t,"",Ff),me(t,"",Gf),me(t,"",Kf),me(t,"",Wf),me(t,"",Qf),me(t,"",Yf),me(t,"&",Xf),me(t,"*",Zf),me(t,"@",qs),me(t,"`",th),me(t,"^",nh),me(t,":",Vs),me(t,",",Oy),me(t,"$",rh),me(t,".",mi),me(t,"=",ih),me(t,"!",Ry),me(t,"-",Pr),me(t,"%",jc),me(t,"|",sh),me(t,"+",oh),me(t,"#",ah),me(t,"?",Lc),me(t,'"',Dy),me(t,"/",gi),me(t,";",_y),me(t,"~",Bc),me(t,"_",lh),me(t,"\\",eh),me(t,"",AT);const r=tn(t,Xi,ky,{[g0]:!0});tn(r,Xi,r);const s=tn(r,Yi,TT,{[Rc]:!0}),o=tn(r,mc,NT,{[vc]:!0}),l=tn(t,Yi,Ji,{[y0]:!0});tn(l,Xi,s),tn(l,Yi,l),tn(s,Xi,s),tn(s,Yi,s);const u=tn(t,mc,v0,{[b0]:!0});tn(u,Yi),tn(u,Xi,o),tn(u,mc,u),tn(o,Xi,o),tn(o,Yi),tn(o,mc,o);const d=me(t,Mg,My,{[Ng]:!0}),h=me(t,LS,E0,{[Ng]:!0}),p=tn(t,kg,E0,{[Ng]:!0});me(t,Og,p),me(h,Mg,d),me(h,Og,p),tn(h,kg,p),me(p,LS),me(p,Mg),tn(p,kg,p),me(p,Og,p);const m=tn(t,Ag,kT,{[CT]:!0});me(m,"#"),tn(m,Ag,m),me(m,Tz,m);const b=me(m,Nz);me(b,"#"),tn(b,Ag,m);const x=[[Yi,l],[Xi,s]],w=[[Yi,null],[mc,u],[Xi,o]];for(let S=0;S<Wd.length;S++)Is(t,Wd[S],w0,Ji,x);for(let S=0;S<Qd.length;S++)Is(t,Qd[S],S0,v0,w);zo(w0,{tld:!0,ascii:!0},e),zo(S0,{utld:!0,alpha:!0},e),Is(t,"file",hf,Ji,x),Is(t,"mailto",hf,Ji,x),Is(t,"http",Ka,Ji,x),Is(t,"https",Ka,Ji,x),Is(t,"ftp",Ka,Ji,x),Is(t,"ftps",Ka,Ji,x),zo(hf,{scheme:!0,ascii:!0},e),zo(Ka,{slashscheme:!0,ascii:!0},e),n=n.sort((S,C)=>S[0]>C[0]?1:-1);for(let S=0;S<n.length;S++){const C=n[S][0],L=n[S][1]?{[wz]:!0}:{[Sz]:!0};C.indexOf("-")>=0?L[x0]=!0:Yi.test(C)?Xi.test(C)?L[Rc]=!0:L[y0]=!0:L[g0]=!0,jS(t,C,C,L)}return jS(t,"localhost",tu,{ascii:!0}),t.jd=new fr(ch),{start:t,tokens:Object.assign({groups:e},MT)}}function OT(n,e){const t=kz(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let o=0,l=0;for(;l<r;){let u=n,d=null,h=0,p=null,m=-1,b=-1;for(;l<r&&(d=u.go(t[l]));)u=d,u.accepts()?(m=0,b=0,p=u):m>=0&&(m+=t[l].length,b++),h+=t[l].length,o+=t[l].length,l++;o-=m,l-=b,h-=m,s.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return s}function kz(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),o,l=s<55296||s>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Is(n,e,t,r,s){let o;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];n.j[d]?o=n.j[d]:(o=new fr(r),o.jr=s.slice(),n.j[d]=o),n=o}return o=new fr(t),o.jr=s.slice(),n.j[e[l-1]]=o,o}function BS(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let o=0;for(;s.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+o),10);l>0;l--)t.pop();r+=o}else t.push(n[r]),r++}return e}const nu={defaultProtocol:"http",events:null,format:zS,formatHref:zS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function jy(n,e=null){let t=Object.assign({},nu);n&&(t=Object.assign(t,n instanceof jy?n.o:n));const r=t.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}jy.prototype={o:nu,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:nu[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function zS(n){return n}function RT(n,e){this.t="token",this.v=n,this.tk=e}RT.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=nu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),o=this.toFormattedString(n),l={},u=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:s,attributes:l,content:o,eventListeners:m}}};function jh(n,e){class t extends RT{constructor(s,o){super(s,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const IS=jh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),HS=jh("text"),Mz=jh("nl"),Yd=jh("url",{isLink:!0,toHref(n=nu.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==tu&&n[1].t===Vs}}),qr=n=>new fr(n);function Oz({groups:n}){const e=n.domain.concat([Xf,Zf,qs,eh,th,nh,rh,ih,Pr,ky,jc,sh,oh,ah,gi,ch,Bc,lh]),t=[Jf,Vs,Oy,mi,Ry,jc,Lc,Dy,_y,$f,qf,Dc,_c,If,zf,Hf,Uf,Pf,Vf,Ff,Gf,Kf,Wf,Qf,Yf],r=[Xf,Jf,Zf,eh,th,nh,rh,ih,Pr,Dc,_c,jc,sh,oh,ah,Lc,gi,ch,Bc,lh],s=qr(),o=me(s,Bc);rt(o,r,o),rt(o,n.domain,o);const l=qr(),u=qr(),d=qr();rt(s,n.domain,l),rt(s,n.scheme,u),rt(s,n.slashscheme,d),rt(l,r,o),rt(l,n.domain,l);const h=me(l,qs);me(o,qs,h),me(u,qs,h),me(d,qs,h);const p=me(o,mi);rt(p,r,o),rt(p,n.domain,o);const m=qr();rt(h,n.domain,m),rt(m,n.domain,m);const b=me(m,mi);rt(b,n.domain,m);const x=qr(IS);rt(b,n.tld,x),rt(b,n.utld,x),me(h,tu,x);const w=me(m,Pr);me(w,Pr,w),rt(w,n.domain,m),rt(x,n.domain,m),me(x,mi,b),me(x,Pr,w);const S=me(x,Vs);rt(S,n.numeric,IS);const C=me(l,Pr),N=me(l,mi);me(C,Pr,C),rt(C,n.domain,l),rt(N,r,o),rt(N,n.domain,l);const L=qr(Yd);rt(N,n.tld,L),rt(N,n.utld,L),rt(L,n.domain,l),rt(L,r,o),me(L,mi,N),me(L,Pr,C),me(L,qs,h);const R=me(L,Vs),k=qr(Yd);rt(R,n.numeric,k);const j=qr(Yd),H=qr();rt(j,e,j),rt(j,t,H),rt(H,e,j),rt(H,t,H),me(L,gi,j),me(k,gi,j);const U=me(u,Vs),J=me(d,Vs),ie=me(J,gi),ge=me(ie,gi);rt(u,n.domain,l),me(u,mi,N),me(u,Pr,C),rt(d,n.domain,l),me(d,mi,N),me(d,Pr,C),rt(U,n.domain,j),me(U,gi,j),me(U,Lc,j),rt(ge,n.domain,j),rt(ge,e,j),me(ge,gi,j);const be=[[Dc,_c],[zf,If],[Hf,Uf],[$f,qf],[Pf,Vf],[Ff,Gf],[Kf,Wf],[Qf,Yf]];for(let he=0;he<be.length;he++){const[ce,ve]=be[he],de=me(j,ce);me(H,ce,de),me(de,ve,j);const z=qr(Yd);rt(de,e,z);const D=qr();rt(de,t),rt(z,e,z),rt(z,t,D),rt(D,e,z),rt(D,t,D),me(z,ve,j),me(D,ve,j)}return me(s,tu,L),me(s,My,Mz),{start:s,tokens:MT}}function Rz(n,e,t){let r=t.length,s=0,o=[],l=[];for(;s<r;){let u=n,d=null,h=null,p=0,m=null,b=-1;for(;s<r&&!(d=u.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=d||u.go(t[s].t));)d=null,u=h,u.accepts()?(b=0,m=u):b>=0&&b++,s++,p++;if(b<0)s-=p,s<r&&(l.push(t[s]),s++);else{l.length>0&&(o.push(Rg(HS,e,l)),l=[]),s-=b,p-=b;const x=m.t,w=t.slice(s-p,s);o.push(Rg(x,e,w))}}return l.length>0&&o.push(Rg(HS,e,l)),o}function Rg(n,e,t){const r=t[0].s,s=t[t.length-1].e,o=e.slice(r,s);return new n(o,t)}const Dz=typeof console<"u"&&console&&console.warn||(()=>{}),_z="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",qt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function jz(){return fr.groups={},qt.scanner=null,qt.parser=null,qt.tokenQueue=[],qt.pluginQueue=[],qt.customSchemes=[],qt.initialized=!1,qt}function US(n,e=!1){if(qt.initialized&&Dz(`linkifyjs: already initialized - will not register custom scheme "${n}" ${_z}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);qt.customSchemes.push([n,e])}function Lz(){qt.scanner=Az(qt.customSchemes);for(let n=0;n<qt.tokenQueue.length;n++)qt.tokenQueue[n][1]({scanner:qt.scanner});qt.parser=Oz(qt.scanner.tokens);for(let n=0;n<qt.pluginQueue.length;n++)qt.pluginQueue[n][1]({scanner:qt.scanner,parser:qt.parser});return qt.initialized=!0,qt}function Ly(n){return qt.initialized||Lz(),Rz(qt.parser.start,n,OT(qt.scanner.start,n))}Ly.scan=OT;function DT(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new jy(t),s=Ly(n),o=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}const By="[\0- -\u2029]",Bz=new RegExp(By),zz=new RegExp(`${By}$`),Iz=new RegExp(By,"g");function Hz(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function Uz(n){return new Wt({key:new dn("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!s||o)return;const{tr:l}=r,u=Oj(t.doc,[...e]);if(Bj(u).forEach(({newRange:h})=>{const p=Rj(r.doc,h,x=>x.isTextblock);let m,b;if(p.length>1)m=p[0],b=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const x=r.doc.textBetween(h.from,h.to," "," ");if(!zz.test(x))return;m=p[0],b=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&b){const x=b.split(Bz).filter(Boolean);if(x.length<=0)return!1;const w=x[x.length-1],S=m.pos+b.lastIndexOf(w);if(!w)return!1;const C=Ly(w).map(N=>N.toObject(n.defaultProtocol));if(!Hz(C))return!1;C.filter(N=>N.isLink).map(N=>({...N,from:S+N.start+1,to:S+N.end+1})).filter(N=>r.schema.marks.code?!r.doc.rangeHasMark(N.from,N.to,r.schema.marks.code):!0).filter(N=>n.validate(N.value)).filter(N=>n.shouldAutoLink(N.value)).forEach(N=>{gy(N.from,N.to,r.doc).some(L=>L.mark.type===n.type)||l.addMark(N.from,N.to,n.type.create({href:N.href}))})}}),!!l.steps.length)return l}})}function $z(n){return new Wt({key:new dn("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let l=r.target;const u=[];for(;l.nodeName!=="DIV";)u.push(l),l=l.parentNode;if(!u.find(b=>b.nodeName==="A"))return!1;const d=U2(e.state,n.type.name),h=r.target,p=(s=h==null?void 0:h.href)!==null&&s!==void 0?s:d.href,m=(o=h==null?void 0:h.target)!==null&&o!==void 0?o:d.target;return h&&p?(window.open(p,m),!0):!1}}})}function qz(n){return new Wt({key:new dn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const d=DT(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!d?!1:n.editor.commands.setMark(n.type,{href:d.href})}}})}function ko(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(Iz,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Pz=Ci.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){US(n);return}US(n.scheme,n.optionalSlashes)})},onDestroy(){jz()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!ko(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!ko(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!ko(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",xt(this.options.HTMLAttributes,n),0]:["a",xt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ko(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!ko(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Jo({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=DT(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!ko(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(Uz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!ko(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push($z({type:this.type})),this.options.linkOnPaste&&n.push(qz({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),Vz=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Fz=Kt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",xt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[P2({find:Vz,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}});var C0,T0;if(typeof WeakMap<"u"){let n=new WeakMap;C0=e=>n.get(e),T0=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;C0=r=>{for(let s=0;s<n.length;s+=2)if(n[s]==r)return n[s+1]},T0=(r,s)=>(t==10&&(t=0),n[t++]=r,n[t++]=s)}var nn=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,s=e/this.width|0;let o=r+1,l=s+1;for(let u=1;o<this.width&&this.map[e+u]==t;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==t;u++)l++;return{left:r,top:s,right:o,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:s,top:o,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:s==this.width)?null:this.map[o*this.width+(t<0?r-1:s)]:(t<0?o==0:l==this.height)?null:this.map[r+this.width*(t<0?o-1:l)]}rectBetween(n,e){const{left:t,right:r,top:s,bottom:o}=this.findCell(n),{left:l,right:u,top:d,bottom:h}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(s,d),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let s=n.left;s<n.right;s++){const o=r*this.width+s,l=this.map[o];t[l]||(t[l]=!0,!(s==n.left&&s&&this.map[o-1]==l||r==n.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,s=0;;r++){const o=s+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const u=(n+1)*this.width;for(;l<u&&this.map[l]<s;)l++;return l==u?o-1:this.map[l]}s=o}}static get(n){return C0(n)||T0(n,Gz(n))}};function Gz(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=Kz(n),t=n.childCount,r=[];let s=0,o=null;const l=[];for(let h=0,p=e*t;h<p;h++)r[h]=0;for(let h=0,p=0;h<t;h++){const m=n.child(h);p++;for(let w=0;;w++){for(;s<r.length&&r[s]!=0;)s++;if(w==m.childCount)break;const S=m.child(w),{colspan:C,rowspan:N,colwidth:L}=S.attrs;for(let R=0;R<N;R++){if(R+h>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:N-R});break}const k=s+R*e;for(let j=0;j<C;j++){r[k+j]==0?r[k+j]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:C-j});const H=L&&L[j];if(H){const U=(k+j)%e*2,J=l[U];J==null||J!=H&&l[U+1]==1?(l[U]=H,l[U+1]=1):J==H&&l[U+1]++}}}s+=C,p+=S.nodeSize}const b=(h+1)*e;let x=0;for(;s<b;)r[s++]==0&&x++;x&&(o||(o=[])).push({type:"missing",row:h,n:x}),p++}(e===0||t===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new nn(e,t,r,o);let d=!1;for(let h=0;!d&&h<l.length;h+=2)l[h]!=null&&l[h+1]<t&&(d=!0);return d&&Wz(u,l,n),u}function Kz(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const s=n.child(r);let o=0;if(t)for(let l=0;l<r;l++){const u=n.child(l);for(let d=0;d<u.childCount;d++){const h=u.child(d);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<s.childCount;l++){const u=s.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Wz(n,e,t){n.problems||(n.problems=[]);const r={};for(let s=0;s<n.map.length;s++){const o=n.map[s];if(r[o])continue;r[o]=!0;const l=t.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const d=l.attrs;for(let h=0;h<d.colspan;h++){const p=(s+h)%n.width,m=e[p*2];m!=null&&(!d.colwidth||d.colwidth[h]!=m)&&((u||(u=Qz(d)))[h]=m)}u&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function Qz(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Wn(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var Fs=new dn("selectingCells");function gl(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Yz(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function oi(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Lh(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=gl(e.$head)||Xz(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function Xz(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function N0(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function Jz(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function zy(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function _T(n,e,t){const r=n.node(-1),s=nn.get(r),o=n.start(-1),l=s.nextCell(n.pos-o,e,t);return l==null?null:n.node(0).resolve(o+l)}function ea(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function jT(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<t;s++)r.colwidth.splice(e,0,0)}return r}function Zz(n,e,t){const r=Wn(e.type.schema).header_cell;for(let s=0;s<n.height;s++)if(e.nodeAt(n.map[t+s*n.width]).type!=r)return!1;return!0}var zt=class Zi extends Ve{constructor(e,t=e){const r=e.node(-1),s=nn.get(r),o=e.start(-1),l=s.rectBetween(e.pos-o,t.pos-o),u=e.node(0),d=s.cellsInRect(l).filter(p=>p!=t.pos-o);d.unshift(t.pos-o);const h=d.map(p=>{const m=r.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const b=o+p+1;return new jC(u.resolve(b),u.resolve(b+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),s=e.resolve(t.map(this.$headCell.pos));if(N0(r)&&N0(s)&&zy(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Zi.rowSelection(r,s):o&&this.isColSelection()?Zi.colSelection(r,s):new Zi(r,s)}return Ue.between(r,s)}content(){const e=this.$anchorCell.node(-1),t=nn.get(e),r=this.$anchorCell.start(-1),s=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=s.top;d<s.bottom;d++){const h=[];for(let p=d*t.width+s.left,m=s.left;m<s.right;m++,p++){const b=t.map[p];if(o[b])continue;o[b]=!0;const x=t.findCell(b);let w=e.nodeAt(b);if(!w)throw RangeError(`No cell with offset ${b} found`);const S=s.left-x.left,C=x.right-s.right;if(S>0||C>0){let N=w.attrs;if(S>0&&(N=ea(N,0,S)),C>0&&(N=ea(N,N.colspan-C,C)),x.left<s.left){if(w=w.type.createAndFill(N),!w)throw RangeError(`Could not create cell with attrs ${JSON.stringify(N)}`)}else w=w.type.create(N,w.content)}if(x.top<s.top||x.bottom>s.bottom){const N={...w.attrs,rowspan:Math.min(x.bottom,s.bottom)-Math.max(x.top,s.top)};x.top<s.top?w=w.type.createAndFill(N):w=w.type.create(N,w.content)}h.push(w)}l.push(e.child(d).copy(ae.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new we(ae.from(u),1,1)}replace(e,t=we.empty){const r=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){const{$from:u,$to:d}=s[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(d.pos),l?we.empty:t)}const o=Ve.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new we(ae.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=nn.get(t),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let l=0;l<o.length;l++)e(t.nodeAt(o[l]),s+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),s=nn.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.top<=u.top?(l.top>0&&(e=d.resolve(o+s.map[l.left])),u.bottom<s.height&&(t=d.resolve(o+s.map[s.width*(s.height-1)+u.right-1]))):(u.top>0&&(t=d.resolve(o+s.map[u.left])),l.bottom<s.height&&(e=d.resolve(o+s.map[s.width*(s.height-1)+l.right-1]))),new Zi(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=nn.get(e),r=this.$anchorCell.start(-1),s=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const l=s+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==t.width}eq(e){return e instanceof Zi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),s=nn.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.left<=u.left?(l.left>0&&(e=d.resolve(o+s.map[l.top*s.width])),u.right<s.width&&(t=d.resolve(o+s.map[s.width*(u.top+1)-1]))):(u.left>0&&(t=d.resolve(o+s.map[u.top*s.width])),l.right<s.width&&(e=d.resolve(o+s.map[s.width*(l.top+1)-1]))),new Zi(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new Zi(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new Zi(e.resolve(t),e.resolve(r))}getBookmark(){return new eI(this.$anchorCell.pos,this.$headCell.pos)}};zt.prototype.visible=!1;Ve.jsonID("cell",zt);var eI=class LT{constructor(e,t){this.anchor=e,this.head=t}map(e){return new LT(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&zy(t,r)?new zt(t,r):Ve.near(r,1)}};function tI(n){if(!(n.selection instanceof zt))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(An.node(r,r+t.nodeSize,{class:"selectedCell"}))}),Pt.create(n.doc,e)}function nI({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,s=n.depth;for(;s>=0&&!(n.after(s+1)<n.end(s));s--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(s).type.spec.tableRole)}function rI({$from:n,$to:e}){let t,r;for(let s=n.depth;s>0;s--){const o=n.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let s=e.depth;s>0;s--){const o=e.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function iI(n,e,t){const r=(e||n).selection,s=(e||n).doc;let o,l;if(r instanceof ze&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=zt.create(s,r.from);else if(l=="row"){const u=s.resolve(r.from+1);o=zt.rowSelection(u,u)}else if(!t){const u=nn.get(r.node),d=r.from+1,h=d+u.map[u.width*u.height-1];o=zt.create(s,d+1,h)}}else r instanceof Ue&&nI(r)?o=Ue.create(s,r.from):r instanceof Ue&&rI(r)&&(o=Ue.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var sI=new dn("fix-tables");function BT(n,e,t,r){const s=n.childCount,o=e.childCount;e:for(let l=0,u=0;l<o;l++){const d=e.child(l);for(let h=u,p=Math.min(s,l+3);h<p;h++)if(n.child(h)==d){u=h+1,t+=d.nodeSize;continue e}r(d,t),u<s&&n.child(u).sameMarkup(d)?BT(n.child(u),d,t+1,r):d.nodesBetween(0,d.content.size,r,t+1),t+=d.nodeSize}}function zT(n,e){let t;const r=(s,o)=>{s.type.spec.tableRole=="table"&&(t=oI(n,s,o,t))};return e?e.doc!=n.doc&&BT(e.doc,n.doc,0,r):n.doc.descendants(r),t}function oI(n,e,t,r){const s=nn.get(e);if(!s.problems)return r;r||(r=n.tr);const o=[];for(let d=0;d<s.height;d++)o.push(0);for(let d=0;d<s.problems.length;d++){const h=s.problems[d];if(h.type=="collision"){const p=e.nodeAt(h.pos);if(!p)continue;const m=p.attrs;for(let b=0;b<m.rowspan;b++)o[h.row+b]+=h.n;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,ea(m,m.colspan-h.n,h.n))}else if(h.type=="missing")o[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const p=r.mapping.map(t);r.delete(p,p+e.nodeSize)}}let l,u;for(let d=0;d<o.length;d++)o[d]&&(l==null&&(l=d),u=d);for(let d=0,h=t+1;d<s.height;d++){const p=e.child(d),m=h+p.nodeSize,b=o[d];if(b>0){let x="cell";p.firstChild&&(x=p.firstChild.type.spec.tableRole);const w=[];for(let C=0;C<b;C++){const N=Wn(n.schema)[x].createAndFill();N&&w.push(N)}const S=(d==0||l==d-1)&&u==d?h+1:m-1;r.insert(r.mapping.map(S),w)}h=m}return r.setMeta(sI,{fixTables:!0})}function ki(n){const e=n.selection,t=Lh(n),r=t.node(-1),s=t.start(-1),o=nn.get(r);return{...e instanceof zt?o.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):o.findCell(t.pos-s),tableStart:s,map:o,table:r}}function IT(n,{map:e,tableStart:t,table:r},s){let o=s>0?-1:0;Zz(e,r,s+o)&&(o=s==0||s==e.width?null:0);for(let l=0;l<e.height;l++){const u=l*e.width+s;if(s>0&&s<e.width&&e.map[u-1]==e.map[u]){const d=e.map[u],h=r.nodeAt(d);n.setNodeMarkup(n.mapping.map(t+d),null,jT(h.attrs,s-e.colCount(d))),l+=h.attrs.rowspan-1}else{const d=o==null?Wn(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,h=e.positionAt(l,s,r);n.insert(n.mapping.map(t+h),d.createAndFill())}}return n}function aI(n,e){if(!oi(n))return!1;if(e){const t=ki(n);e(IT(n.tr,t,t.left))}return!0}function lI(n,e){if(!oi(n))return!1;if(e){const t=ki(n);e(IT(n.tr,t,t.right))}return!0}function cI(n,{map:e,table:t,tableStart:r},s){const o=n.mapping.maps.length;for(let l=0;l<e.height;){const u=l*e.width+s,d=e.map[u],h=t.nodeAt(d),p=h.attrs;if(s>0&&e.map[u-1]==d||s<e.width-1&&e.map[u+1]==d)n.setNodeMarkup(n.mapping.slice(o).map(r+d),null,ea(p,s-e.colCount(d)));else{const m=n.mapping.slice(o).map(r+d);n.delete(m,m+h.nodeSize)}l+=p.rowspan}}function uI(n,e){if(!oi(n))return!1;if(e){const t=ki(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let s=t.right-1;cI(r,t,s),s!=t.left;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=nn.get(o)}e(r)}return!0}function dI(n,e,t){var r;const s=Wn(e.type.schema).header_cell;for(let o=0;o<n.width;o++)if(((r=e.nodeAt(n.map[o+t*n.width]))==null?void 0:r.type)!=s)return!1;return!0}function HT(n,{map:e,tableStart:t,table:r},s){var o;let l=t;for(let h=0;h<s;h++)l+=r.child(h).nodeSize;const u=[];let d=s>0?-1:0;dI(e,r,s+d)&&(d=s==0||s==e.height?null:0);for(let h=0,p=e.width*s;h<e.width;h++,p++)if(s>0&&s<e.height&&e.map[p]==e.map[p-e.width]){const m=e.map[p],b=r.nodeAt(m).attrs;n.setNodeMarkup(t+m,null,{...b,rowspan:b.rowspan+1}),h+=b.colspan-1}else{const m=d==null?Wn(r.type.schema).cell:(o=r.nodeAt(e.map[p+d*e.width]))==null?void 0:o.type,b=m==null?void 0:m.createAndFill();b&&u.push(b)}return n.insert(l,Wn(r.type.schema).row.create(null,u)),n}function fI(n,e){if(!oi(n))return!1;if(e){const t=ki(n);e(HT(n.tr,t,t.top))}return!0}function hI(n,e){if(!oi(n))return!1;if(e){const t=ki(n);e(HT(n.tr,t,t.bottom))}return!0}function pI(n,{map:e,table:t,tableStart:r},s){let o=0;for(let h=0;h<s;h++)o+=t.child(h).nodeSize;const l=o+t.child(s).nodeSize,u=n.mapping.maps.length;n.delete(o+r,l+r);const d=new Set;for(let h=0,p=s*e.width;h<e.width;h++,p++){const m=e.map[p];if(!d.has(m)){if(d.add(m),s>0&&m==e.map[p-e.width]){const b=t.nodeAt(m).attrs;n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...b,rowspan:b.rowspan-1}),h+=b.colspan-1}else if(s<e.height&&m==e.map[p+e.width]){const b=t.nodeAt(m),x=b.attrs,w=b.type.create({...x,rowspan:b.attrs.rowspan-1},b.content),S=e.positionAt(s+1,h,t);n.insert(n.mapping.slice(u).map(r+S),w),h+=x.colspan-1}}}}function mI(n,e){if(!oi(n))return!1;if(e){const t=ki(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let s=t.bottom-1;pI(r,t,s),s!=t.top;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=nn.get(t.table)}e(r)}return!0}function $S(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function gI({width:n,height:e,map:t},r){let s=r.top*n+r.left,o=s,l=(r.bottom-1)*n+r.left,u=s+(r.right-r.left-1);for(let d=r.top;d<r.bottom;d++){if(r.left>0&&t[o]==t[o-1]||r.right<n&&t[u]==t[u+1])return!0;o+=n,u+=n}for(let d=r.left;d<r.right;d++){if(r.top>0&&t[s]==t[s-n]||r.bottom<e&&t[l]==t[l+n])return!0;s++,l++}return!1}function qS(n,e){const t=n.selection;if(!(t instanceof zt)||t.$anchorCell.pos==t.$headCell.pos)return!1;const r=ki(n),{map:s}=r;if(gI(s,r))return!1;if(e){const o=n.tr,l={};let u=ae.empty,d,h;for(let p=r.top;p<r.bottom;p++)for(let m=r.left;m<r.right;m++){const b=s.map[p*s.width+m],x=r.table.nodeAt(b);if(!(l[b]||!x))if(l[b]=!0,d==null)d=b,h=x;else{$S(x)||(u=u.append(x.content));const w=o.mapping.map(b+r.tableStart);o.delete(w,w+x.nodeSize)}}if(d==null||h==null)return!0;if(o.setNodeMarkup(d+r.tableStart,null,{...jT(h.attrs,h.attrs.colspan,r.right-r.left-h.attrs.colspan),rowspan:r.bottom-r.top}),u.size){const p=d+1+h.content.size,m=$S(h)?d+1:p;o.replaceWith(m+r.tableStart,p+r.tableStart,u)}o.setSelection(new zt(o.doc.resolve(d+r.tableStart))),e(o)}return!0}function PS(n,e){const t=Wn(n.schema);return yI(({node:r})=>t[r.type.spec.tableRole])(n,e)}function yI(n){return(e,t)=>{var r;const s=e.selection;let o,l;if(s instanceof zt){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;o=s.$anchorCell.nodeAfter,l=s.$anchorCell.pos}else{if(o=Yz(s.$from),!o)return!1;l=(r=gl(s.$from))==null?void 0:r.pos}if(o==null||l==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(t){let u=o.attrs;const d=[],h=u.colwidth;u.rowspan>1&&(u={...u,rowspan:1}),u.colspan>1&&(u={...u,colspan:1});const p=ki(e),m=e.tr;for(let x=0;x<p.right-p.left;x++)d.push(h?{...u,colwidth:h&&h[x]?[h[x]]:null}:u);let b;for(let x=p.top;x<p.bottom;x++){let w=p.map.positionAt(x,p.left,p.table);x==p.top&&(w+=o.nodeSize);for(let S=p.left,C=0;S<p.right;S++,C++)S==p.left&&x==p.top||m.insert(b=m.mapping.map(w+p.tableStart,1),n({node:o,row:x,col:S}).createAndFill(d[C]))}m.setNodeMarkup(l,n({node:o,row:p.top,col:p.left}),d[0]),s instanceof zt&&m.setSelection(new zt(m.doc.resolve(s.$anchorCell.pos),b?m.doc.resolve(b):void 0)),t(m)}return!0}}function bI(n,e){return function(t,r){if(!oi(t))return!1;const s=Lh(t);if(s.nodeAfter.attrs[n]===e)return!1;if(r){const o=t.tr;t.selection instanceof zt?t.selection.forEachCell((l,u)=>{l.attrs[n]!==e&&o.setNodeMarkup(u,null,{...l.attrs,[n]:e})}):o.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[n]:e}),r(o)}return!0}}function xI(n){return function(e,t){if(!oi(e))return!1;if(t){const r=Wn(e.schema),s=ki(e),o=e.tr,l=s.map.cellsInRect(n=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:n=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),u=l.map(d=>s.table.nodeAt(d));for(let d=0;d<l.length;d++)u[d].type==r.header_cell&&o.setNodeMarkup(s.tableStart+l[d],r.cell,u[d].attrs);if(o.steps.length==0)for(let d=0;d<l.length;d++)o.setNodeMarkup(s.tableStart+l[d],r.header_cell,u[d].attrs);t(o)}return!0}}function VS(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const o=e.table.nodeAt(r[s]);if(o&&o.type!==t.header_cell)return!1}return!0}function ru(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?xI(n):function(t,r){if(!oi(t))return!1;if(r){const s=Wn(t.schema),o=ki(t),l=t.tr,u=VS("row",o,s),d=VS("column",o,s),p=(n==="column"?u:n==="row"?d:!1)?1:0,m=n=="column"?{left:0,top:p,right:1,bottom:o.map.height}:n=="row"?{left:p,top:0,right:o.map.width,bottom:1}:o,b=n=="column"?d?s.cell:s.header_cell:n=="row"?u?s.cell:s.header_cell:s.cell;o.map.cellsInRect(m).forEach(x=>{const w=x+o.tableStart,S=l.doc.nodeAt(w);S&&l.setNodeMarkup(w,b,S.attrs)}),r(l)}return!0}}ru("row",{useDeprecatedLogic:!0});ru("column",{useDeprecatedLogic:!0});var vI=ru("cell",{useDeprecatedLogic:!0});function wI(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,s=n.before();r>=0;r--){const o=n.node(-1).child(r),l=o.lastChild;if(l)return s-1-l.nodeSize;s-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),s=n.after();r<t.childCount;r++){const o=t.child(r);if(o.childCount)return s+1;s+=o.nodeSize}}return null}function FS(n){return function(e,t){if(!oi(e))return!1;const r=wI(Lh(e),n);if(r==null)return!1;if(t){const s=e.doc.resolve(r);t(e.tr.setSelection(Ue.between(s,Jz(s))).scrollIntoView())}return!0}}function SI(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Xd(n,e){const t=n.selection;if(!(t instanceof zt))return!1;if(e){const r=n.tr,s=Wn(n.schema).cell.createAndFill().content;t.forEachCell((o,l)=>{o.content.eq(s)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new we(s,0,0))}),r.docChanged&&e(r)}return!0}function EI(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const s=e.child(0),o=s.type.spec.tableRole,l=s.type.schema,u=[];if(o=="row")for(let d=0;d<e.childCount;d++){let h=e.child(d).content;const p=d?0:Math.max(0,t-1),m=d<e.childCount-1?0:Math.max(0,r-1);(p||m)&&(h=A0(Wn(l).row,new we(h,p,m)).content),u.push(h)}else if(o=="cell"||o=="header_cell")u.push(t||r?A0(Wn(l).row,new we(e,t,r)).content:e);else return null;return CI(l,u)}function CI(n,e){const t=[];for(let s=0;s<e.length;s++){const o=e[s];for(let l=o.childCount-1;l>=0;l--){const{rowspan:u,colspan:d}=o.child(l).attrs;for(let h=s;h<s+u;h++)t[h]=(t[h]||0)+d}}let r=0;for(let s=0;s<t.length;s++)r=Math.max(r,t[s]);for(let s=0;s<t.length;s++)if(s>=e.length&&e.push(ae.empty),t[s]<r){const o=Wn(n).cell.createAndFill(),l=[];for(let u=t[s];u<r;u++)l.push(o);e[s]=e[s].append(ae.from(l))}return{height:e.length,width:r,rows:e}}function A0(n,e){const t=n.createAndFill();return new W0(t).replace(0,t.content.size,e).doc}function TI({width:n,height:e,rows:t},r,s){if(n!=r){const o=[],l=[];for(let u=0;u<t.length;u++){const d=t[u],h=[];for(let p=o[u]||0,m=0;p<r;m++){let b=d.child(m%d.childCount);p+b.attrs.colspan>r&&(b=b.type.createChecked(ea(b.attrs,b.attrs.colspan,p+b.attrs.colspan-r),b.content)),h.push(b),p+=b.attrs.colspan;for(let x=1;x<b.attrs.rowspan;x++)o[u+x]=(o[u+x]||0)+b.attrs.colspan}l.push(ae.from(h))}t=l,n=r}if(e!=s){const o=[];for(let l=0,u=0;l<s;l++,u++){const d=[],h=t[u%e];for(let p=0;p<h.childCount;p++){let m=h.child(p);l+m.attrs.rowspan>s&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,s-m.attrs.rowspan)},m.content)),d.push(m)}o.push(ae.from(d))}t=o,e=s}return{width:n,height:e,rows:t}}function NI(n,e,t,r,s,o,l){const u=n.doc.type.schema,d=Wn(u);let h,p;if(s>e.width)for(let m=0,b=0;m<e.height;m++){const x=t.child(m);b+=x.nodeSize;const w=[];let S;x.lastChild==null||x.lastChild.type==d.cell?S=h||(h=d.cell.createAndFill()):S=p||(p=d.header_cell.createAndFill());for(let C=e.width;C<s;C++)w.push(S);n.insert(n.mapping.slice(l).map(b-1+r),w)}if(o>e.height){const m=[];for(let w=0,S=(e.height-1)*e.width;w<Math.max(e.width,s);w++){const C=w>=e.width?!1:t.nodeAt(e.map[S+w]).type==d.header_cell;m.push(C?p||(p=d.header_cell.createAndFill()):h||(h=d.cell.createAndFill()))}const b=d.row.create(null,ae.from(m)),x=[];for(let w=e.height;w<o;w++)x.push(b);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),x)}return!!(h||p)}function GS(n,e,t,r,s,o,l,u){if(l==0||l==e.height)return!1;let d=!1;for(let h=s;h<o;h++){const p=l*e.width+h,m=e.map[p];if(e.map[p-e.width]==m){d=!0;const b=t.nodeAt(m),{top:x,left:w}=e.findCell(m);n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...b.attrs,rowspan:l-x}),n.insert(n.mapping.slice(u).map(e.positionAt(l,w,t)),b.type.createAndFill({...b.attrs,rowspan:x+b.attrs.rowspan-l})),h+=b.attrs.colspan-1}}return d}function KS(n,e,t,r,s,o,l,u){if(l==0||l==e.width)return!1;let d=!1;for(let h=s;h<o;h++){const p=h*e.width+l,m=e.map[p];if(e.map[p-1]==m){d=!0;const b=t.nodeAt(m),x=e.colCount(m),w=n.mapping.slice(u).map(m+r);n.setNodeMarkup(w,null,ea(b.attrs,l-x,b.attrs.colspan-(l-x))),n.insert(w+b.nodeSize,b.type.createAndFill(ea(b.attrs,0,l-x))),h+=b.attrs.rowspan-1}}return d}function WS(n,e,t,r,s){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let l=nn.get(o);const{top:u,left:d}=r,h=d+s.width,p=u+s.height,m=n.tr;let b=0;function x(){if(o=t?m.doc.nodeAt(t-1):m.doc,!o)throw new Error("No table found");l=nn.get(o),b=m.mapping.maps.length}NI(m,l,o,t,h,p,b)&&x(),GS(m,l,o,t,d,h,u,b)&&x(),GS(m,l,o,t,d,h,p,b)&&x(),KS(m,l,o,t,u,p,d,b)&&x(),KS(m,l,o,t,u,p,h,b)&&x();for(let w=u;w<p;w++){const S=l.positionAt(w,d,o),C=l.positionAt(w,h,o);m.replace(m.mapping.slice(b).map(S+t),m.mapping.slice(b).map(C+t),new we(s.rows[w-u],0,0))}x(),m.setSelection(new zt(m.doc.resolve(t+l.positionAt(u,d,o)),m.doc.resolve(t+l.positionAt(p-1,h-1,o)))),e(m)}var AI=sy({ArrowLeft:Jd("horiz",-1),ArrowRight:Jd("horiz",1),ArrowUp:Jd("vert",-1),ArrowDown:Jd("vert",1),"Shift-ArrowLeft":Zd("horiz",-1),"Shift-ArrowRight":Zd("horiz",1),"Shift-ArrowUp":Zd("vert",-1),"Shift-ArrowDown":Zd("vert",1),Backspace:Xd,"Mod-Backspace":Xd,Delete:Xd,"Mod-Delete":Xd});function pf(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Jd(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;if(o instanceof zt)return pf(t,r,Ve.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const l=UT(s,n,e);if(l==null)return!1;if(n=="horiz")return pf(t,r,Ve.near(t.doc.resolve(o.head+e),e));{const u=t.doc.resolve(l),d=_T(u,n,e);let h;return d?h=Ve.near(d,1):e<0?h=Ve.near(t.doc.resolve(u.before(-1)),-1):h=Ve.near(t.doc.resolve(u.after(-1)),1),pf(t,r,h)}}}function Zd(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;let l;if(o instanceof zt)l=o;else{const d=UT(s,n,e);if(d==null)return!1;l=new zt(t.doc.resolve(d))}const u=_T(l.$headCell,n,e);return u?pf(t,r,new zt(l.$anchorCell,u)):!1}}function kI(n,e){const t=n.state.doc,r=gl(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new zt(r))),!0):!1}function MI(n,e,t){if(!oi(n.state))return!1;let r=EI(t);const s=n.state.selection;if(s instanceof zt){r||(r={width:1,height:1,rows:[ae.from(A0(Wn(n.state.schema).cell,t))]});const o=s.$anchorCell.node(-1),l=s.$anchorCell.start(-1),u=nn.get(o).rectBetween(s.$anchorCell.pos-l,s.$headCell.pos-l);return r=TI(r,u.right-u.left,u.bottom-u.top),WS(n.state,n.dispatch,l,u,r),!0}else if(r){const o=Lh(n.state),l=o.start(-1);return WS(n.state,n.dispatch,l,nn.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function OI(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=QS(n,e.target);let s;if(e.shiftKey&&n.state.selection instanceof zt)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=gl(n.state.selection.$anchor))!=null&&((t=Dg(n,e))==null?void 0:t.pos)!=s.pos)o(s,e),e.preventDefault();else if(!r)return;function o(d,h){let p=Dg(n,h);const m=Fs.getState(n.state)==null;if(!p||!zy(d,p))if(m)p=d;else return;const b=new zt(d,p);if(m||!n.state.selection.eq(b)){const x=n.state.tr.setSelection(b);m&&x.setMeta(Fs,d.pos),n.dispatch(x)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",u),Fs.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Fs,-1))}function u(d){const h=d,p=Fs.getState(n.state);let m;if(p!=null)m=n.state.doc.resolve(p);else if(QS(n,h.target)!=r&&(m=Dg(n,e),!m))return l();m&&o(m,h)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",u)}function UT(n,e,t){if(!(n.state.selection instanceof Ue))return null;const{$head:r}=n.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((t<0?r.index(s):r.indexAfter(s))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(s),d=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(d)?u:null}}return null}function QS(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function Dg(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?gl(n.state.doc.resolve(t.pos)):null}var RI=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),k0(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,k0(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function k0(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p){for(let m=0,b=0;m<p.childCount;m++){const{colspan:x,colwidth:w}=p.child(m).attrs;for(let S=0;S<x;S++,b++){const C=s==b?o:w&&w[S],N=C?C+"px":"";if(u+=C||r,C||(d=!1),h)h.style.width!=N&&(h.style.width=N),h=h.nextSibling;else{const L=document.createElement("col");L.style.width=N,e.appendChild(L)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)==null||l.removeChild(h),h=m}d?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var Mr=new dn("tableColumnResizing");function DI({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=RI,lastColumnResizable:s=!0}={}){const o=new Wt({key:Mr,state:{init(l,u){var d,h;const p=(h=(d=o.spec)==null?void 0:d.props)==null?void 0:h.nodeViews,m=Wn(u.schema).table.name;return r&&p&&(p[m]=(b,x)=>new r(b,t,x)),new _I(-1,!1)},apply(l,u){return u.apply(l)}},props:{attributes:l=>{const u=Mr.getState(l);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,u)=>{jI(l,u,n,s)},mouseleave:l=>{LI(l)},mousedown:(l,u)=>{BI(l,u,e,t)}},decorations:l=>{const u=Mr.getState(l);if(u&&u.activeHandle>-1)return $I(l,u.activeHandle)},nodeViews:{}}});return o}var _I=class mf{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(Mr);if(r&&r.setHandle!=null)return new mf(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new mf(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let s=e.mapping.map(t.activeHandle,-1);return N0(e.doc.resolve(s))||(s=-1),new mf(s,t.dragging)}return t}};function jI(n,e,t,r){if(!n.editable)return;const s=Mr.getState(n.state);if(s&&!s.dragging){const o=II(e.target);let l=-1;if(o){const{left:u,right:d}=o.getBoundingClientRect();e.clientX-u<=t?l=YS(n,e,"left",t):d-e.clientX<=t&&(l=YS(n,e,"right",t))}if(l!=s.activeHandle){if(!r&&l!==-1){const u=n.state.doc.resolve(l),d=u.node(-1),h=nn.get(d),p=u.start(-1);if(h.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==h.width-1)return}$T(n,l)}}}function LI(n){if(!n.editable)return;const e=Mr.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&$T(n,-1)}function BI(n,e,t,r){var s;if(!n.editable)return!1;const o=(s=n.dom.ownerDocument.defaultView)!=null?s:window,l=Mr.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const u=n.state.doc.nodeAt(l.activeHandle),d=zI(n,l.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(Mr,{setDragging:{startX:e.clientX,startWidth:d}}));function h(m){o.removeEventListener("mouseup",h),o.removeEventListener("mousemove",p);const b=Mr.getState(n.state);b!=null&&b.dragging&&(HI(n,b.activeHandle,XS(b.dragging,m,t)),n.dispatch(n.state.tr.setMeta(Mr,{setDragging:null})))}function p(m){if(!m.which)return h(m);const b=Mr.getState(n.state);if(b&&b.dragging){const x=XS(b.dragging,m,t);JS(n,b.activeHandle,x,r)}}return JS(n,l.activeHandle,d,r),o.addEventListener("mouseup",h),o.addEventListener("mousemove",p),e.preventDefault(),!0}function zI(n,e,{colspan:t,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const o=n.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,d=t;if(r)for(let h=0;h<t;h++)r[h]&&(u-=r[h],d--);return u/d}function II(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function YS(n,e,t,r){const s=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+s,top:e.clientY});if(!o)return-1;const{pos:l}=o,u=gl(n.state.doc.resolve(l));if(!u)return-1;if(t=="right")return u.pos;const d=nn.get(u.node(-1)),h=u.start(-1),p=d.map.indexOf(u.pos-h);return p%d.width==0?-1:h+d.map[p-1]}function XS(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function $T(n,e){n.dispatch(n.state.tr.setMeta(Mr,{setHandle:e}))}function HI(n,e,t){const r=n.state.doc.resolve(e),s=r.node(-1),o=nn.get(s),l=r.start(-1),u=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,d=n.state.tr;for(let h=0;h<o.height;h++){const p=h*o.width+u;if(h&&o.map[p]==o.map[p-o.width])continue;const m=o.map[p],b=s.nodeAt(m).attrs,x=b.colspan==1?0:u-o.colCount(m);if(b.colwidth&&b.colwidth[x]==t)continue;const w=b.colwidth?b.colwidth.slice():UI(b.colspan);w[x]=t,d.setNodeMarkup(l+m,null,{...b,colwidth:w})}d.docChanged&&n.dispatch(d)}function JS(n,e,t,r){const s=n.state.doc.resolve(e),o=s.node(-1),l=s.start(-1),u=nn.get(o).colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1;let d=n.domAtPos(s.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&k0(o,d.firstChild,d,r,u,t)}function UI(n){return Array(n).fill(0)}function $I(n,e){var t;const r=[],s=n.doc.resolve(e),o=s.node(-1);if(!o)return Pt.empty;const l=nn.get(o),u=s.start(-1),d=l.colCount(s.pos-u)+s.nodeAfter.attrs.colspan-1;for(let h=0;h<l.height;h++){const p=d+h*l.width;if((d==l.width-1||l.map[p]!=l.map[p+1])&&(h==0||l.map[p]!=l.map[p-l.width])){const m=l.map[p],b=u+m+o.nodeAt(m).nodeSize-1,x=document.createElement("div");x.className="column-resize-handle",(t=Mr.getState(n))!=null&&t.dragging&&r.push(An.node(u+m,u+m+o.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),r.push(An.widget(b,x))}}return Pt.create(n.doc,r)}function qI({allowTableNodeSelection:n=!1}={}){return new Wt({key:Fs,state:{init(){return null},apply(e,t){const r=e.getMeta(Fs);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:s,pos:o}=e.mapping.mapResult(t);return s?null:o}},props:{decorations:tI,handleDOMEvents:{mousedown:OI},createSelectionBetween(e){return Fs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:kI,handleKeyDown:AI,handlePaste:MI},appendTransaction(e,t,r){return iI(r,zT(r,t),n)}})}function M0(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function ZS(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p!==null)for(let m=0,b=0;m<p.childCount;m+=1){const{colspan:x,colwidth:w}=p.child(m).attrs;for(let S=0;S<x;S+=1,b+=1){const C=s===b?o:w&&w[S],N=C?`${C}px`:"";if(u+=C||r,C||(d=!1),h){if(h.style.width!==N){const[L,R]=M0(r,C);h.style.setProperty(L,R)}h=h.nextSibling}else{const L=document.createElement("col"),[R,k]=M0(r,C);L.style.setProperty(R,k),e.appendChild(L)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)===null||l===void 0||l.removeChild(h),h=m}d?(t.style.width=`${u}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${u}px`)}class PI{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ZS(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,ZS(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function VI(n,e,t,r){let s=0,o=!0;const l=[],u=n.firstChild;if(!u)return{};for(let m=0,b=0;m<u.childCount;m+=1){const{colspan:x,colwidth:w}=u.child(m).attrs;for(let S=0;S<x;S+=1,b+=1){const C=t===b?r:w&&w[S];s+=C||e,C||(o=!1);const[N,L]=M0(e,C);l.push(["col",{style:`${N}: ${L}`}])}}const d=o?`${s}px`:"",h=o?"":`${s}px`;return{colgroup:["colgroup",{},...l],tableWidth:d,tableMinWidth:h}}function eE(n,e){return n.createAndFill()}function FI(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function GI(n,e,t,r,s){const o=FI(n),l=[],u=[];for(let h=0;h<t;h+=1){const p=eE(o.cell);if(p&&u.push(p),r){const m=eE(o.header_cell);m&&l.push(m)}}const d=[];for(let h=0;h<e;h+=1)d.push(o.row.createChecked(null,r&&h===0?l:u));return o.table.createChecked(null,d)}function KI(n){return n instanceof zt}const ef=({editor:n})=>{const{selection:e}=n.state;if(!KI(e))return!1;let t=0;const r=H2(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},WI=Kt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:PI,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:r,tableMinWidth:s}=VI(n,this.options.cellMinWidth),o=["table",xt(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),t,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},o]:o},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:s,editor:o})=>{const l=GI(o.schema,n,e,t);if(s){const u=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(Ue.near(r.doc.resolve(u)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>aI(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>lI(n,e),deleteColumn:()=>({state:n,dispatch:e})=>uI(n,e),addRowBefore:()=>({state:n,dispatch:e})=>fI(n,e),addRowAfter:()=>({state:n,dispatch:e})=>hI(n,e),deleteRow:()=>({state:n,dispatch:e})=>mI(n,e),deleteTable:()=>({state:n,dispatch:e})=>SI(n,e),mergeCells:()=>({state:n,dispatch:e})=>qS(n,e),splitCell:()=>({state:n,dispatch:e})=>PS(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>ru("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>ru("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>vI(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>qS(n,e)?!0:PS(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>bI(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>FS(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>FS(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&zT(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=zt.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:ef,"Mod-Backspace":ef,Delete:ef,"Mod-Delete":ef}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[DI({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],qI({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:it(Re(n,"tableRole",e))}}}),QI=Kt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",xt(this.options.HTMLAttributes,n),0]}}),YI=Kt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",xt(this.options.HTMLAttributes,n),0]}}),XI=Kt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",xt(this.options.HTMLAttributes,n),0]}}),uh=(n,e)=>e.view.domAtPos(n).node.offsetParent!==null,JI=(n,e,t)=>{for(let r=n.depth;r>0;r-=1){const s=n.node(r),o=e(s),l=uh(n.start(r),t);if(o&&l)return{pos:r>0?n.before(r):0,start:n.start(r),depth:r,node:s}}},tE=(n,e)=>{const{state:t,view:r,extensionManager:s}=n,{schema:o,selection:l}=t,{empty:u,$anchor:d}=l,h=!!s.extensions.find(N=>N.name==="gapCursor");if(!u||d.parent.type!==o.nodes.detailsSummary||!h||e==="right"&&d.parentOffset!==d.parent.nodeSize-2)return!1;const p=pl(N=>N.type===o.nodes.details)(l);if(!p)return!1;const m=Vo(p.node,N=>N.type===o.nodes.detailsContent);if(!m.length||uh(p.start+m[0].pos+1,n))return!1;const x=t.doc.resolve(p.pos+p.node.nodeSize),w=Gt.findFrom(x,1,!1);if(!w)return!1;const{tr:S}=t,C=new Gt(w);return S.setSelection(C),S.scrollIntoView(),r.dispatch(S),!0},ZI=Kt.create({name:"details",content:"detailsSummary detailsContent",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,addOptions(){return{persist:!1,openClassName:"is-open",HTMLAttributes:{}}},addAttributes(){return this.options.persist?{open:{default:!1,parseHTML:n=>n.hasAttribute("open"),renderHTML:({open:n})=>n?{open:""}:{}}}:[]},parseHTML(){return[{tag:"details"}]},renderHTML({HTMLAttributes:n}){return["details",xt(this.options.HTMLAttributes,n),0]},addNodeView(){return({editor:n,getPos:e,node:t,HTMLAttributes:r})=>{const s=document.createElement("div"),o=xt(this.options.HTMLAttributes,r,{"data-type":this.name});Object.entries(o).forEach(([h,p])=>s.setAttribute(h,p));const l=document.createElement("button");l.type="button",s.append(l);const u=document.createElement("div");s.append(u);const d=h=>{if(h!==void 0)if(h){if(s.classList.contains(this.options.openClassName))return;s.classList.add(this.options.openClassName)}else{if(!s.classList.contains(this.options.openClassName))return;s.classList.remove(this.options.openClassName)}else s.classList.toggle(this.options.openClassName);const p=new Event("toggleDetailsContent"),m=u.querySelector(':scope > div[data-type="detailsContent"]');m==null||m.dispatchEvent(p)};return t.attrs.open&&setTimeout(()=>d()),l.addEventListener("click",()=>{if(d(),!this.options.persist){n.commands.focus(void 0,{scrollIntoView:!1});return}if(n.isEditable&&typeof e=="function"){const{from:h,to:p}=n.state.selection;n.chain().command(({tr:m})=>{const b=e(),x=m.doc.nodeAt(b);return(x==null?void 0:x.type)!==this.type?!1:(m.setNodeMarkup(b,void 0,{open:!x.attrs.open}),!0)}).setTextSelection({from:h,to:p}).focus(void 0,{scrollIntoView:!1}).run()}}),{dom:s,contentDOM:u,ignoreMutation(h){return h.type==="selection"?!1:!s.contains(h.target)||s===h.target},update:h=>h.type!==this.type?!1:(h.attrs.open!==void 0&&d(h.attrs.open),!0)}}},addCommands(){return{setDetails:()=>({state:n,chain:e})=>{var t;const{schema:r,selection:s}=n,{$from:o,$to:l}=s,u=o.blockRange(l);if(!u)return!1;const d=n.doc.slice(u.start,u.end);if(!r.nodes.detailsContent.contentMatch.matchFragment(d.content))return!1;const p=((t=d.toJSON())===null||t===void 0?void 0:t.content)||[];return e().insertContentAt({from:u.start,to:u.end},{type:this.name,content:[{type:"detailsSummary"},{type:"detailsContent",content:p}]}).setTextSelection(u.start+2).run()},unsetDetails:()=>({state:n,chain:e})=>{const{selection:t,schema:r}=n,s=pl(N=>N.type===this.type)(t);if(!s)return!1;const o=Vo(s.node,N=>N.type===r.nodes.detailsSummary),l=Vo(s.node,N=>N.type===r.nodes.detailsContent);if(!o.length||!l.length)return!1;const u=o[0],d=l[0],h=s.pos,p=n.doc.resolve(h),m=h+s.node.nodeSize,b={from:h,to:m},x=d.node.content.toJSON()||[],w=p.parent.type.contentMatch.defaultType,C=[w==null?void 0:w.create(null,u.node.content).toJSON(),...x];return e().insertContentAt(b,C).setTextSelection(h+1).run()}}},addKeyboardShortcuts(){return{Backspace:()=>{const{schema:n,selection:e}=this.editor.state,{empty:t,$anchor:r}=e;return!t||r.parent.type!==n.nodes.detailsSummary?!1:r.parentOffset!==0?this.editor.commands.command(({tr:s})=>{const o=r.pos-1,l=r.pos;return s.delete(o,l),!0}):this.editor.commands.unsetDetails()},Enter:({editor:n})=>{const{state:e,view:t}=n,{schema:r,selection:s}=e,{$head:o}=s;if(o.parent.type!==r.nodes.detailsSummary)return!1;const l=uh(o.after()+1,n),u=l?e.doc.nodeAt(o.after()):o.node(-2);if(!u)return!1;const d=l?0:o.indexAfter(-1),h=my(u.contentMatchAt(d));if(!h||!u.canReplaceWith(d,d,h))return!1;const p=h.createAndFill();if(!p)return!1;const m=l?o.after()+1:o.after(-1),b=e.tr.replaceWith(m,m,p),x=b.doc.resolve(m),w=Ve.near(x,1);return b.setSelection(w),b.scrollIntoView(),t.dispatch(b),!0},ArrowRight:({editor:n})=>tE(n,"right"),ArrowDown:({editor:n})=>tE(n,"down")}},addProseMirrorPlugins(){return[new Wt({key:new dn("detailsSelection"),appendTransaction:(n,e,t)=>{const{editor:r,type:s}=this;if(!n.some(C=>C.selectionSet)||!e.selection.empty||!t.selection.empty||!$2(t,s.name))return;const{$from:u}=t.selection;if(uh(u.pos,r))return;const h=JI(u,C=>C.type===s,r);if(!h)return;const p=Vo(h.node,C=>C.type===t.schema.nodes.detailsSummary);if(!p.length)return;const m=p[0],x=(e.selection.from<t.selection.from?"forward":"backward")==="forward"?h.start+m.pos:h.pos+m.pos+m.node.nodeSize,w=Ue.create(t.doc,x);return t.tr.setSelection(w)}})]}}),e7=Kt.create({name:"detailsSummary",content:"text*",defining:!0,selectable:!1,isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"summary"}]},renderHTML({HTMLAttributes:n}){return["summary",xt(this.options.HTMLAttributes,n),0]}}),t7=Kt.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){return["div",xt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addNodeView(){return({HTMLAttributes:n})=>{const e=document.createElement("div"),t=xt(this.options.HTMLAttributes,n,{"data-type":this.name,hidden:"hidden"});return Object.entries(t).forEach(([r,s])=>e.setAttribute(r,s)),e.addEventListener("toggleDetailsContent",()=>{e.toggleAttribute("hidden")}),{dom:e,contentDOM:e,ignoreMutation(r){return r.type==="selection"?!1:!e.contains(r.target)||e===r.target},update:r=>r.type===this.type}}},addKeyboardShortcuts(){return{Enter:({editor:n})=>{const{state:e,view:t}=n,{selection:r}=e,{$from:s,empty:o}=r,l=pl(be=>be.type===this.type)(r);if(!o||!l||!l.node.childCount)return!1;const u=s.index(l.depth),{childCount:d}=l.node;if(!(d===u+1))return!1;const p=l.node.type.contentMatch.defaultType,m=p==null?void 0:p.createAndFill();if(!m)return!1;const b=e.doc.resolve(l.pos+1),x=d-1,w=l.node.child(x),S=b.posAtIndex(x,l.depth);if(!w.eq(m))return!1;const N=s.node(-3);if(!N)return!1;const L=s.indexAfter(-3),R=my(N.contentMatchAt(L));if(!R||!N.canReplaceWith(L,L,R))return!1;const k=R.createAndFill();if(!k)return!1;const{tr:j}=e,H=s.after(-2);j.replaceWith(H,H,k);const U=j.doc.resolve(H),J=Ve.near(U,1);j.setSelection(J);const ie=S,ge=S+w.nodeSize;return j.delete(ie,ge),j.scrollIntoView(),t.dispatch(j),!0}}}});function n7(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function qT(n){return n instanceof Map?n.clear=n.delete=n.set=function(){throw new Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=function(){throw new Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{const t=n[e],r=typeof t;(r==="object"||r==="function")&&!Object.isFrozen(t)&&qT(t)}),n}class nE{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function PT(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Ys(n,...e){const t=Object.create(null);for(const r in n)t[r]=n[r];return e.forEach(function(r){for(const s in r)t[s]=r[s]}),t}const r7="</span>",rE=n=>!!n.scope,i7=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){const t=n.split(".");return[`${e}${t.shift()}`,...t.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${n}`};class s7{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=PT(e)}openNode(e){if(!rE(e))return;const t=i7(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){rE(e)&&(this.buffer+=r7)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const iE=(n={})=>{const e={children:[]};return Object.assign(e,n),e};class Iy{constructor(){this.rootNode=iE(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=iE({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(r=>this._walk(e,r)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{Iy._collapse(t)}))}}class o7 extends Iy{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const r=e.root;t&&(r.scope=`language:${t}`),this.add(r)}toHTML(){return new s7(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function iu(n){return n?typeof n=="string"?n:n.source:null}function VT(n){return ra("(?=",n,")")}function a7(n){return ra("(?:",n,")*")}function l7(n){return ra("(?:",n,")?")}function ra(...n){return n.map(t=>iu(t)).join("")}function c7(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function Hy(...n){return"("+(c7(n).capture?"":"?:")+n.map(r=>iu(r)).join("|")+")"}function FT(n){return new RegExp(n.toString()+"|").exec("").length-1}function u7(n,e){const t=n&&n.exec(e);return t&&t.index===0}const d7=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Uy(n,{joinWith:e}){let t=0;return n.map(r=>{t+=1;const s=t;let o=iu(r),l="";for(;o.length>0;){const u=d7.exec(o);if(!u){l+=o;break}l+=o.substring(0,u.index),o=o.substring(u.index+u[0].length),u[0][0]==="\\"&&u[1]?l+="\\"+String(Number(u[1])+s):(l+=u[0],u[0]==="("&&t++)}return l}).map(r=>`(${r})`).join(e)}const f7=/\b\B/,GT="[a-zA-Z]\\w*",$y="[a-zA-Z_]\\w*",KT="\\b\\d+(\\.\\d+)?",WT="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",QT="\\b(0b[01]+)",h7="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",p7=(n={})=>{const e=/^#![ ]*\//;return n.binary&&(n.begin=ra(e,/.*\b/,n.binary,/\b.*/)),Ys({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,r)=>{t.index!==0&&r.ignoreMatch()}},n)},su={begin:"\\\\[\\s\\S]",relevance:0},m7={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[su]},g7={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[su]},y7={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Bh=function(n,e,t={}){const r=Ys({scope:"comment",begin:n,end:e,contains:[]},t);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=Hy("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:ra(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},b7=Bh("//","$"),x7=Bh("/\\*","\\*/"),v7=Bh("#","$"),w7={scope:"number",begin:KT,relevance:0},S7={scope:"number",begin:WT,relevance:0},E7={scope:"number",begin:QT,relevance:0},C7={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[su,{begin:/\[/,end:/\]/,relevance:0,contains:[su]}]},T7={scope:"title",begin:GT,relevance:0},N7={scope:"title",begin:$y,relevance:0},A7={begin:"\\.\\s*"+$y,relevance:0},k7=function(n){return Object.assign(n,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var tf=Object.freeze({__proto__:null,APOS_STRING_MODE:m7,BACKSLASH_ESCAPE:su,BINARY_NUMBER_MODE:E7,BINARY_NUMBER_RE:QT,COMMENT:Bh,C_BLOCK_COMMENT_MODE:x7,C_LINE_COMMENT_MODE:b7,C_NUMBER_MODE:S7,C_NUMBER_RE:WT,END_SAME_AS_BEGIN:k7,HASH_COMMENT_MODE:v7,IDENT_RE:GT,MATCH_NOTHING_RE:f7,METHOD_GUARD:A7,NUMBER_MODE:w7,NUMBER_RE:KT,PHRASAL_WORDS_MODE:y7,QUOTE_STRING_MODE:g7,REGEXP_MODE:C7,RE_STARTERS_RE:h7,SHEBANG:p7,TITLE_MODE:T7,UNDERSCORE_IDENT_RE:$y,UNDERSCORE_TITLE_MODE:N7});function M7(n,e){n.input[n.index-1]==="."&&e.ignoreMatch()}function O7(n,e){n.className!==void 0&&(n.scope=n.className,delete n.className)}function R7(n,e){e&&n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",n.__beforeBegin=M7,n.keywords=n.keywords||n.beginKeywords,delete n.beginKeywords,n.relevance===void 0&&(n.relevance=0))}function D7(n,e){Array.isArray(n.illegal)&&(n.illegal=Hy(...n.illegal))}function _7(n,e){if(n.match){if(n.begin||n.end)throw new Error("begin & end are not supported with match");n.begin=n.match,delete n.match}}function j7(n,e){n.relevance===void 0&&(n.relevance=1)}const L7=(n,e)=>{if(!n.beforeMatch)return;if(n.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},n);Object.keys(n).forEach(r=>{delete n[r]}),n.keywords=t.keywords,n.begin=ra(t.beforeMatch,VT(t.begin)),n.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},n.relevance=0,delete t.beforeMatch},B7=["of","and","for","in","not","or","if","then","parent","list","value"],z7="keyword";function YT(n,e,t=z7){const r=Object.create(null);return typeof n=="string"?s(t,n.split(" ")):Array.isArray(n)?s(t,n):Object.keys(n).forEach(function(o){Object.assign(r,YT(n[o],e,o))}),r;function s(o,l){e&&(l=l.map(u=>u.toLowerCase())),l.forEach(function(u){const d=u.split("|");r[d[0]]=[o,I7(d[0],d[1])]})}}function I7(n,e){return e?Number(e):H7(n)?0:1}function H7(n){return B7.includes(n.toLowerCase())}const sE={},Ko=n=>{console.error(n)},oE=(n,...e)=>{console.log(`WARN: ${n}`,...e)},Pa=(n,e)=>{sE[`${n}/${e}`]||(console.log(`Deprecated as of ${n}. ${e}`),sE[`${n}/${e}`]=!0)},dh=new Error;function XT(n,e,{key:t}){let r=0;const s=n[t],o={},l={};for(let u=1;u<=e.length;u++)l[u+r]=s[u],o[u+r]=!0,r+=FT(e[u-1]);n[t]=l,n[t]._emit=o,n[t]._multi=!0}function U7(n){if(Array.isArray(n.begin)){if(n.skip||n.excludeBegin||n.returnBegin)throw Ko("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),dh;if(typeof n.beginScope!="object"||n.beginScope===null)throw Ko("beginScope must be object"),dh;XT(n,n.begin,{key:"beginScope"}),n.begin=Uy(n.begin,{joinWith:""})}}function $7(n){if(Array.isArray(n.end)){if(n.skip||n.excludeEnd||n.returnEnd)throw Ko("skip, excludeEnd, returnEnd not compatible with endScope: {}"),dh;if(typeof n.endScope!="object"||n.endScope===null)throw Ko("endScope must be object"),dh;XT(n,n.end,{key:"endScope"}),n.end=Uy(n.end,{joinWith:""})}}function q7(n){n.scope&&typeof n.scope=="object"&&n.scope!==null&&(n.beginScope=n.scope,delete n.scope)}function P7(n){q7(n),typeof n.beginScope=="string"&&(n.beginScope={_wrap:n.beginScope}),typeof n.endScope=="string"&&(n.endScope={_wrap:n.endScope}),U7(n),$7(n)}function V7(n){function e(l,u){return new RegExp(iu(l),"m"+(n.case_insensitive?"i":"")+(n.unicodeRegex?"u":"")+(u?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(u,d){d.position=this.position++,this.matchIndexes[this.matchAt]=d,this.regexes.push([d,u]),this.matchAt+=FT(u)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const u=this.regexes.map(d=>d[1]);this.matcherRe=e(Uy(u,{joinWith:"|"}),!0),this.lastIndex=0}exec(u){this.matcherRe.lastIndex=this.lastIndex;const d=this.matcherRe.exec(u);if(!d)return null;const h=d.findIndex((m,b)=>b>0&&m!==void 0),p=this.matchIndexes[h];return d.splice(0,h),Object.assign(d,p)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(u){if(this.multiRegexes[u])return this.multiRegexes[u];const d=new t;return this.rules.slice(u).forEach(([h,p])=>d.addRule(h,p)),d.compile(),this.multiRegexes[u]=d,d}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(u,d){this.rules.push([u,d]),d.type==="begin"&&this.count++}exec(u){const d=this.getMatcher(this.regexIndex);d.lastIndex=this.lastIndex;let h=d.exec(u);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const p=this.getMatcher(0);p.lastIndex=this.lastIndex+1,h=p.exec(u)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(l){const u=new r;return l.contains.forEach(d=>u.addRule(d.begin,{rule:d,type:"begin"})),l.terminatorEnd&&u.addRule(l.terminatorEnd,{type:"end"}),l.illegal&&u.addRule(l.illegal,{type:"illegal"}),u}function o(l,u){const d=l;if(l.isCompiled)return d;[O7,_7,P7,L7].forEach(p=>p(l,u)),n.compilerExtensions.forEach(p=>p(l,u)),l.__beforeBegin=null,[R7,D7,j7].forEach(p=>p(l,u)),l.isCompiled=!0;let h=null;return typeof l.keywords=="object"&&l.keywords.$pattern&&(l.keywords=Object.assign({},l.keywords),h=l.keywords.$pattern,delete l.keywords.$pattern),h=h||/\w+/,l.keywords&&(l.keywords=YT(l.keywords,n.case_insensitive)),d.keywordPatternRe=e(h,!0),u&&(l.begin||(l.begin=/\B|\b/),d.beginRe=e(d.begin),!l.end&&!l.endsWithParent&&(l.end=/\B|\b/),l.end&&(d.endRe=e(d.end)),d.terminatorEnd=iu(d.end)||"",l.endsWithParent&&u.terminatorEnd&&(d.terminatorEnd+=(l.end?"|":"")+u.terminatorEnd)),l.illegal&&(d.illegalRe=e(l.illegal)),l.contains||(l.contains=[]),l.contains=[].concat(...l.contains.map(function(p){return F7(p==="self"?l:p)})),l.contains.forEach(function(p){o(p,d)}),l.starts&&o(l.starts,u),d.matcher=s(d),d}if(n.compilerExtensions||(n.compilerExtensions=[]),n.contains&&n.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return n.classNameAliases=Ys(n.classNameAliases||{}),o(n)}function JT(n){return n?n.endsWithParent||JT(n.starts):!1}function F7(n){return n.variants&&!n.cachedVariants&&(n.cachedVariants=n.variants.map(function(e){return Ys(n,{variants:null},e)})),n.cachedVariants?n.cachedVariants:JT(n)?Ys(n,{starts:n.starts?Ys(n.starts):null}):Object.isFrozen(n)?Ys(n):n}var G7="11.10.0";class K7 extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const _g=PT,aE=Ys,lE=Symbol("nomatch"),W7=7,ZT=function(n){const e=Object.create(null),t=Object.create(null),r=[];let s=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let u={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:o7};function d(D){return u.noHighlightRe.test(D)}function h(D){let $=D.className+" ";$+=D.parentNode?D.parentNode.className:"";const B=u.languageDetectRe.exec($);if(B){const te=ie(B[1]);return te||(oE(o.replace("{}",B[1])),oE("Falling back to no-highlight mode for this block.",D)),te?B[1]:"no-highlight"}return $.split(/\s+/).find(te=>d(te)||ie(te))}function p(D,$,B){let te="",M="";typeof $=="object"?(te=D,B=$.ignoreIllegals,M=$.language):(Pa("10.7.0","highlight(lang, code, ...args) has been deprecated."),Pa("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),M=D,te=$),B===void 0&&(B=!0);const P={code:te,language:M};de("before:highlight",P);const W=P.result?P.result:m(P.language,P.code,B);return W.code=P.code,de("after:highlight",W),W}function m(D,$,B,te){const M=Object.create(null);function P(ye,Ne){return ye.keywords[Ne]}function W(){if(!K.keywords){We.addText(Be);return}let ye=0;K.keywordPatternRe.lastIndex=0;let Ne=K.keywordPatternRe.exec(Be),Ke="";for(;Ne;){Ke+=Be.substring(ye,Ne.index);const Ye=Mt.case_insensitive?Ne[0].toLowerCase():Ne[0],It=P(K,Ye);if(It){const[Xt,gr]=It;if(We.addText(Ke),Ke="",M[Ye]=(M[Ye]||0)+1,M[Ye]<=W7&&(ot+=gr),Xt.startsWith("_"))Ke+=Ne[0];else{const Y=Mt.classNameAliases[Xt]||Xt;Z(Ne[0],Y)}}else Ke+=Ne[0];ye=K.keywordPatternRe.lastIndex,Ne=K.keywordPatternRe.exec(Be)}Ke+=Be.substring(ye),We.addText(Ke)}function se(){if(Be==="")return;let ye=null;if(typeof K.subLanguage=="string"){if(!e[K.subLanguage]){We.addText(Be);return}ye=m(K.subLanguage,Be,!0,Ee[K.subLanguage]),Ee[K.subLanguage]=ye._top}else ye=x(Be,K.subLanguage.length?K.subLanguage:null);K.relevance>0&&(ot+=ye.relevance),We.__addSublanguage(ye._emitter,ye.language)}function le(){K.subLanguage!=null?se():W(),Be=""}function Z(ye,Ne){ye!==""&&(We.startScope(Ne),We.addText(ye),We.endScope())}function Se(ye,Ne){let Ke=1;const Ye=Ne.length-1;for(;Ke<=Ye;){if(!ye._emit[Ke]){Ke++;continue}const It=Mt.classNameAliases[ye[Ke]]||ye[Ke],Xt=Ne[Ke];It?Z(Xt,It):(Be=Xt,W(),Be=""),Ke++}}function ke(ye,Ne){return ye.scope&&typeof ye.scope=="string"&&We.openNode(Mt.classNameAliases[ye.scope]||ye.scope),ye.beginScope&&(ye.beginScope._wrap?(Z(Be,Mt.classNameAliases[ye.beginScope._wrap]||ye.beginScope._wrap),Be=""):ye.beginScope._multi&&(Se(ye.beginScope,Ne),Be="")),K=Object.create(ye,{parent:{value:K}}),K}function fe(ye,Ne,Ke){let Ye=u7(ye.endRe,Ke);if(Ye){if(ye["on:end"]){const It=new nE(ye);ye["on:end"](Ne,It),It.isMatchIgnored&&(Ye=!1)}if(Ye){for(;ye.endsParent&&ye.parent;)ye=ye.parent;return ye}}if(ye.endsWithParent)return fe(ye.parent,Ne,Ke)}function nt(ye){return K.matcher.regexIndex===0?(Be+=ye[0],1):(jt=!0,0)}function kt(ye){const Ne=ye[0],Ke=ye.rule,Ye=new nE(Ke),It=[Ke.__beforeBegin,Ke["on:begin"]];for(const Xt of It)if(Xt&&(Xt(ye,Ye),Ye.isMatchIgnored))return nt(Ne);return Ke.skip?Be+=Ne:(Ke.excludeBegin&&(Be+=Ne),le(),!Ke.returnBegin&&!Ke.excludeBegin&&(Be=Ne)),ke(Ke,ye),Ke.returnBegin?0:Ne.length}function Vt(ye){const Ne=ye[0],Ke=$.substring(ye.index),Ye=fe(K,ye,Ke);if(!Ye)return lE;const It=K;K.endScope&&K.endScope._wrap?(le(),Z(Ne,K.endScope._wrap)):K.endScope&&K.endScope._multi?(le(),Se(K.endScope,ye)):It.skip?Be+=Ne:(It.returnEnd||It.excludeEnd||(Be+=Ne),le(),It.excludeEnd&&(Be=Ne));do K.scope&&We.closeNode(),!K.skip&&!K.subLanguage&&(ot+=K.relevance),K=K.parent;while(K!==Ye.parent);return Ye.starts&&ke(Ye.starts,ye),It.returnEnd?0:Ne.length}function qn(){const ye=[];for(let Ne=K;Ne!==Mt;Ne=Ne.parent)Ne.scope&&ye.unshift(Ne.scope);ye.forEach(Ne=>We.openNode(Ne))}let _t={};function Sn(ye,Ne){const Ke=Ne&&Ne[0];if(Be+=ye,Ke==null)return le(),0;if(_t.type==="begin"&&Ne.type==="end"&&_t.index===Ne.index&&Ke===""){if(Be+=$.slice(Ne.index,Ne.index+1),!s){const Ye=new Error(`0 width match regex (${D})`);throw Ye.languageName=D,Ye.badRule=_t.rule,Ye}return 1}if(_t=Ne,Ne.type==="begin")return kt(Ne);if(Ne.type==="illegal"&&!B){const Ye=new Error('Illegal lexeme "'+Ke+'" for mode "'+(K.scope||"<unnamed>")+'"');throw Ye.mode=K,Ye}else if(Ne.type==="end"){const Ye=Vt(Ne);if(Ye!==lE)return Ye}if(Ne.type==="illegal"&&Ke==="")return 1;if(vn>1e5&&vn>Ne.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Be+=Ke,Ke.length}const Mt=ie(D);if(!Mt)throw Ko(o.replace("{}",D)),new Error('Unknown language: "'+D+'"');const rn=V7(Mt);let En="",K=te||rn;const Ee={},We=new u.__emitter(u);qn();let Be="",ot=0,Ze=0,vn=0,jt=!1;try{if(Mt.__emitTokens)Mt.__emitTokens($,We);else{for(K.matcher.considerAll();;){vn++,jt?jt=!1:K.matcher.considerAll(),K.matcher.lastIndex=Ze;const ye=K.matcher.exec($);if(!ye)break;const Ne=$.substring(Ze,ye.index),Ke=Sn(Ne,ye);Ze=ye.index+Ke}Sn($.substring(Ze))}return We.finalize(),En=We.toHTML(),{language:D,value:En,relevance:ot,illegal:!1,_emitter:We,_top:K}}catch(ye){if(ye.message&&ye.message.includes("Illegal"))return{language:D,value:_g($),illegal:!0,relevance:0,_illegalBy:{message:ye.message,index:Ze,context:$.slice(Ze-100,Ze+100),mode:ye.mode,resultSoFar:En},_emitter:We};if(s)return{language:D,value:_g($),illegal:!1,relevance:0,errorRaised:ye,_emitter:We,_top:K};throw ye}}function b(D){const $={value:_g(D),illegal:!1,relevance:0,_top:l,_emitter:new u.__emitter(u)};return $._emitter.addText(D),$}function x(D,$){$=$||u.languages||Object.keys(e);const B=b(D),te=$.filter(ie).filter(be).map(le=>m(le,D,!1));te.unshift(B);const M=te.sort((le,Z)=>{if(le.relevance!==Z.relevance)return Z.relevance-le.relevance;if(le.language&&Z.language){if(ie(le.language).supersetOf===Z.language)return 1;if(ie(Z.language).supersetOf===le.language)return-1}return 0}),[P,W]=M,se=P;return se.secondBest=W,se}function w(D,$,B){const te=$&&t[$]||B;D.classList.add("hljs"),D.classList.add(`language-${te}`)}function S(D){let $=null;const B=h(D);if(d(B))return;if(de("before:highlightElement",{el:D,language:B}),D.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",D);return}if(D.children.length>0&&(u.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(D)),u.throwUnescapedHTML))throw new K7("One of your code blocks includes unescaped HTML.",D.innerHTML);$=D;const te=$.textContent,M=B?p(te,{language:B,ignoreIllegals:!0}):x(te);D.innerHTML=M.value,D.dataset.highlighted="yes",w(D,B,M.language),D.result={language:M.language,re:M.relevance,relevance:M.relevance},M.secondBest&&(D.secondBest={language:M.secondBest.language,relevance:M.secondBest.relevance}),de("after:highlightElement",{el:D,result:M,text:te})}function C(D){u=aE(u,D)}const N=()=>{k(),Pa("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function L(){k(),Pa("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let R=!1;function k(){if(document.readyState==="loading"){R=!0;return}document.querySelectorAll(u.cssSelector).forEach(S)}function j(){R&&k()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",j,!1);function H(D,$){let B=null;try{B=$(n)}catch(te){if(Ko("Language definition for '{}' could not be registered.".replace("{}",D)),s)Ko(te);else throw te;B=l}B.name||(B.name=D),e[D]=B,B.rawDefinition=$.bind(null,n),B.aliases&&ge(B.aliases,{languageName:D})}function U(D){delete e[D];for(const $ of Object.keys(t))t[$]===D&&delete t[$]}function J(){return Object.keys(e)}function ie(D){return D=(D||"").toLowerCase(),e[D]||e[t[D]]}function ge(D,{languageName:$}){typeof D=="string"&&(D=[D]),D.forEach(B=>{t[B.toLowerCase()]=$})}function be(D){const $=ie(D);return $&&!$.disableAutodetect}function he(D){D["before:highlightBlock"]&&!D["before:highlightElement"]&&(D["before:highlightElement"]=$=>{D["before:highlightBlock"](Object.assign({block:$.el},$))}),D["after:highlightBlock"]&&!D["after:highlightElement"]&&(D["after:highlightElement"]=$=>{D["after:highlightBlock"](Object.assign({block:$.el},$))})}function ce(D){he(D),r.push(D)}function ve(D){const $=r.indexOf(D);$!==-1&&r.splice($,1)}function de(D,$){const B=D;r.forEach(function(te){te[B]&&te[B]($)})}function z(D){return Pa("10.7.0","highlightBlock will be removed entirely in v12.0"),Pa("10.7.0","Please use highlightElement now."),S(D)}Object.assign(n,{highlight:p,highlightAuto:x,highlightAll:k,highlightElement:S,highlightBlock:z,configure:C,initHighlighting:N,initHighlightingOnLoad:L,registerLanguage:H,unregisterLanguage:U,listLanguages:J,getLanguage:ie,registerAliases:ge,autoDetection:be,inherit:aE,addPlugin:ce,removePlugin:ve}),n.debugMode=function(){s=!1},n.safeMode=function(){s=!0},n.versionString=G7,n.regex={concat:ra,lookahead:VT,either:Hy,optional:l7,anyNumberOfTimes:a7};for(const D in tf)typeof tf[D]=="object"&&qT(tf[D]);return Object.assign(n,tf),n},ul=ZT({});ul.newInstance=()=>ZT({});var Q7=ul;ul.HighlightJS=ul;ul.default=ul;var Y7=n7(Q7);function eN(n,e=[]){return n.map(t=>{const r=[...e,...t.properties?t.properties.className:[]];return t.children?eN(t.children,r):{text:t.value,classes:r}}).flat()}function cE(n){return n.value||n.children||[]}function X7(n){return!!Y7.getLanguage(n)}function uE({doc:n,name:e,lowlight:t,defaultLanguage:r}){const s=[];return Vo(n,o=>o.type.name===e).forEach(o=>{var l;let u=o.pos+1;const d=o.node.attrs.language||r,h=t.listLanguages(),p=d&&(h.includes(d)||X7(d)||!((l=t.registered)===null||l===void 0)&&l.call(t,d))?cE(t.highlight(d,o.node.textContent)):cE(t.highlightAuto(o.node.textContent));eN(p).forEach(m=>{const b=u+m.text.length;if(m.classes.length){const x=An.inline(u,b,{class:m.classes.join(" ")});s.push(x)}u=b})}),Pt.create(n,s)}function J7(n){return typeof n=="function"}function Z7({name:n,lowlight:e,defaultLanguage:t}){if(!["highlight","highlightAuto","listLanguages"].every(s=>J7(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Wt({key:new dn("lowlight"),state:{init:(s,{doc:o})=>uE({doc:o,name:n,lowlight:e,defaultLanguage:t}),apply:(s,o,l,u)=>{const d=l.selection.$head.parent.type.name,h=u.selection.$head.parent.type.name,p=Vo(l.doc,b=>b.type.name===n),m=Vo(u.doc,b=>b.type.name===n);return s.docChanged&&([d,h].includes(n)||m.length!==p.length||s.steps.some(b=>b.from!==void 0&&b.to!==void 0&&p.some(x=>x.pos>=b.from&&x.pos+x.node.nodeSize<=b.to)))?uE({doc:s.doc,name:n,lowlight:e,defaultLanguage:t}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}const eH=bT.extend({addOptions(){var n;return{...(n=this.parent)===null||n===void 0?void 0:n.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var n;return[...((n=this.parent)===null||n===void 0?void 0:n.call(this))||[],Z7({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),tH=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),nH=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],rH=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],iH=[...nH,...rH],sH=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),oH=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),aH=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),lH=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function cH(n){const e=n.regex,t=tH(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",o=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",u=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+oH.join("|")+")"},{begin:":(:)?("+aH.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+lH.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...u,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...u,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:sH.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...u,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+iH.join("|")+")\\b"}]}}const dE="[A-Za-z$_][0-9A-Za-z$_]*",uH=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],dH=["true","false","null","undefined","NaN","Infinity"],tN=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],nN=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],rN=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],fH=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],hH=[].concat(rN,tN,nN);function pH(n){const e=n.regex,t=($,{after:B})=>{const te="</"+$[0].slice(1);return $.input.indexOf(te,B)!==-1},r=dE,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:($,B)=>{const te=$[0].length+$.index,M=$.input[te];if(M==="<"||M===","){B.ignoreMatch();return}M===">"&&(t($,{after:te})||B.ignoreMatch());let P;const W=$.input.substring(te);if(P=W.match(/^\s*=/)){B.ignoreMatch();return}if((P=W.match(/^\s+extends\s+/))&&P.index===0){B.ignoreMatch();return}}},u={$pattern:dE,keyword:uH,literal:dH,built_in:hH,"variable.language":fH},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},b={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,b]},L={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},R=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,w,S,C,{match:/\$\d+/},m];b.contains=R.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(R)});const k=[].concat(L,b.contains),j=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),H={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j},U={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},J={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...tN,...nN]}},ie={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ge={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[H],illegal:/%/},be={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function he($){return e.concat("(?!",$.join("|"),")")}const ce={match:e.concat(/\b/,he([...rN,"super","import"].map($=>`${$}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},ve={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},de={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},H]},z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[H]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:j,CLASS_REFERENCE:J},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),ie,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,w,S,C,L,{match:/\$\d+/},m,J,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[L,n.REGEXP_MODE,{className:"function",begin:z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},ge,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[H,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},ve,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[H]},ce,be,U,de,{match:/\$[(.]/}]}}function mH(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,t,n.QUOTE_STRING_MODE,s,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function gH(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],u={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:u,illegal:/#/},p={begin:/\{\{/,relevance:0},m={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,p,h]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},b="[0-9](_?[0-9])*",x=`(\\b(${b}))?\\.(${b})|\\b(${b})\\.`,w=`\\b|${r.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${b})|(${x}))[eE][+-]?(${b})[jJ]?(?=${w})`},{begin:`(${x})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${w})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${w})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${w})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${w})`},{begin:`\\b(${b})[jJ](?=${w})`}]},C={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:u,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},N={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",d,S,m,n.HASH_COMMENT_MODE]}]};return h.contains=[m,S,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:u,illegal:/(<\/|\?)|=>/,contains:[d,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,C,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[N]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,N,m]}]}}const fh="[A-Za-z$_][0-9A-Za-z$_]*",iN=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],sN=["true","false","null","undefined","NaN","Infinity"],oN=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],aN=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],lN=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],cN=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],uN=[].concat(lN,oN,aN);function yH(n){const e=n.regex,t=($,{after:B})=>{const te="</"+$[0].slice(1);return $.input.indexOf(te,B)!==-1},r=fh,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:($,B)=>{const te=$[0].length+$.index,M=$.input[te];if(M==="<"||M===","){B.ignoreMatch();return}M===">"&&(t($,{after:te})||B.ignoreMatch());let P;const W=$.input.substring(te);if(P=W.match(/^\s*=/)){B.ignoreMatch();return}if((P=W.match(/^\s+extends\s+/))&&P.index===0){B.ignoreMatch();return}}},u={$pattern:fh,keyword:iN,literal:sN,built_in:uN,"variable.language":cN},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},b={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},x={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,b]},L={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},R=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,w,S,C,{match:/\$\d+/},m];b.contains=R.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(R)});const k=[].concat(L,b.contains),j=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),H={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j},U={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},J={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...oN,...aN]}},ie={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ge={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[H],illegal:/%/},be={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function he($){return e.concat("(?!",$.join("|"),")")}const ce={match:e.concat(/\b/,he([...lN,"super","import"].map($=>`${$}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},ve={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},de={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},H]},z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",D={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[H]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:j,CLASS_REFERENCE:J},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),ie,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,x,w,S,C,L,{match:/\$\d+/},m,J,{scope:"attr",match:r+e.lookahead(":"),relevance:0},D,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[L,n.REGEXP_MODE,{className:"function",begin:z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:j}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},ge,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[H,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},ve,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[H]},ce,be,U,de,{match:/\$[(.]/}]}}function bH(n){const e=n.regex,t=yH(n),r=fh,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[t.exports.CLASS_REFERENCE]},u={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:fh,keyword:iN.concat(d),literal:sN,built_in:uN.concat(s),"variable.language":cN},p={className:"meta",begin:"@"+r},m=(S,C,N)=>{const L=S.contains.findIndex(R=>R.label===C);if(L===-1)throw new Error("can not find mode to replace");S.contains.splice(L,1,N)};Object.assign(t.keywords,h),t.exports.PARAMS_CONTAINS.push(p);const b=t.contains.find(S=>S.scope==="attr"),x=Object.assign({},b,{match:e.concat(r,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,b,x]),t.contains=t.contains.concat([p,o,l,x]),m(t,"shebang",n.SHEBANG()),m(t,"use_strict",u);const w=t.contains.find(S=>S.label==="func.def");return w.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function xH(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=n.inherit(o,{begin:/\(/,end:/\)/}),u=n.inherit(n.APOS_STRING_MODE,{className:"string"}),d=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,d,u,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,l,d,u]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}var jg,fE;function vH(){if(fE)return jg;fE=1;function n(O){return O instanceof Map?O.clear=O.delete=O.set=function(){throw new Error("map is read-only")}:O instanceof Set&&(O.add=O.clear=O.delete=function(){throw new Error("set is read-only")}),Object.freeze(O),Object.getOwnPropertyNames(O).forEach(Q=>{const ue=O[Q],De=typeof ue;(De==="object"||De==="function")&&!Object.isFrozen(ue)&&n(ue)}),O}class e{constructor(Q){Q.data===void 0&&(Q.data={}),this.data=Q.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(O){return O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(O,...Q){const ue=Object.create(null);for(const De in O)ue[De]=O[De];return Q.forEach(function(De){for(const pt in De)ue[pt]=De[pt]}),ue}const s="</span>",o=O=>!!O.scope,l=(O,{prefix:Q})=>{if(O.startsWith("language:"))return O.replace("language:","language-");if(O.includes(".")){const ue=O.split(".");return[`${Q}${ue.shift()}`,...ue.map((De,pt)=>`${De}${"_".repeat(pt+1)}`)].join(" ")}return`${Q}${O}`};class u{constructor(Q,ue){this.buffer="",this.classPrefix=ue.classPrefix,Q.walk(this)}addText(Q){this.buffer+=t(Q)}openNode(Q){if(!o(Q))return;const ue=l(Q.scope,{prefix:this.classPrefix});this.span(ue)}closeNode(Q){o(Q)&&(this.buffer+=s)}value(){return this.buffer}span(Q){this.buffer+=`<span class="${Q}">`}}const d=(O={})=>{const Q={children:[]};return Object.assign(Q,O),Q};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Q){this.top.children.push(Q)}openNode(Q){const ue=d({scope:Q});this.add(ue),this.stack.push(ue)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Q){return this.constructor._walk(Q,this.rootNode)}static _walk(Q,ue){return typeof ue=="string"?Q.addText(ue):ue.children&&(Q.openNode(ue),ue.children.forEach(De=>this._walk(Q,De)),Q.closeNode(ue)),Q}static _collapse(Q){typeof Q!="string"&&Q.children&&(Q.children.every(ue=>typeof ue=="string")?Q.children=[Q.children.join("")]:Q.children.forEach(ue=>{h._collapse(ue)}))}}class p extends h{constructor(Q){super(),this.options=Q}addText(Q){Q!==""&&this.add(Q)}startScope(Q){this.openNode(Q)}endScope(){this.closeNode()}__addSublanguage(Q,ue){const De=Q.root;ue&&(De.scope=`language:${ue}`),this.add(De)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function m(O){return O?typeof O=="string"?O:O.source:null}function b(O){return S("(?=",O,")")}function x(O){return S("(?:",O,")*")}function w(O){return S("(?:",O,")?")}function S(...O){return O.map(ue=>m(ue)).join("")}function C(O){const Q=O[O.length-1];return typeof Q=="object"&&Q.constructor===Object?(O.splice(O.length-1,1),Q):{}}function N(...O){return"("+(C(O).capture?"":"?:")+O.map(De=>m(De)).join("|")+")"}function L(O){return new RegExp(O.toString()+"|").exec("").length-1}function R(O,Q){const ue=O&&O.exec(Q);return ue&&ue.index===0}const k=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function j(O,{joinWith:Q}){let ue=0;return O.map(De=>{ue+=1;const pt=ue;let Fe=m(De),Ce="";for(;Fe.length>0;){const Ae=k.exec(Fe);if(!Ae){Ce+=Fe;break}Ce+=Fe.substring(0,Ae.index),Fe=Fe.substring(Ae.index+Ae[0].length),Ae[0][0]==="\\"&&Ae[1]?Ce+="\\"+String(Number(Ae[1])+pt):(Ce+=Ae[0],Ae[0]==="("&&ue++)}return Ce}).map(De=>`(${De})`).join(Q)}const H=/\b\B/,U="[a-zA-Z]\\w*",J="[a-zA-Z_]\\w*",ie="\\b\\d+(\\.\\d+)?",ge="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",be="\\b(0b[01]+)",he="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ce=(O={})=>{const Q=/^#![ ]*\//;return O.binary&&(O.begin=S(Q,/.*\b/,O.binary,/\b.*/)),r({scope:"meta",begin:Q,end:/$/,relevance:0,"on:begin":(ue,De)=>{ue.index!==0&&De.ignoreMatch()}},O)},ve={begin:"\\\\[\\s\\S]",relevance:0},de={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ve]},z={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ve]},D={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},$=function(O,Q,ue={}){const De=r({scope:"comment",begin:O,end:Q,contains:[]},ue);De.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const pt=N("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return De.contains.push({begin:S(/[ ]+/,"(",pt,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),De},B=$("//","$"),te=$("/\\*","\\*/"),M=$("#","$"),P={scope:"number",begin:ie,relevance:0},W={scope:"number",begin:ge,relevance:0},se={scope:"number",begin:be,relevance:0},le={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ve,{begin:/\[/,end:/\]/,relevance:0,contains:[ve]}]},Z={scope:"title",begin:U,relevance:0},Se={scope:"title",begin:J,relevance:0},ke={begin:"\\.\\s*"+J,relevance:0};var nt=Object.freeze({__proto__:null,APOS_STRING_MODE:de,BACKSLASH_ESCAPE:ve,BINARY_NUMBER_MODE:se,BINARY_NUMBER_RE:be,COMMENT:$,C_BLOCK_COMMENT_MODE:te,C_LINE_COMMENT_MODE:B,C_NUMBER_MODE:W,C_NUMBER_RE:ge,END_SAME_AS_BEGIN:function(O){return Object.assign(O,{"on:begin":(Q,ue)=>{ue.data._beginMatch=Q[1]},"on:end":(Q,ue)=>{ue.data._beginMatch!==Q[1]&&ue.ignoreMatch()}})},HASH_COMMENT_MODE:M,IDENT_RE:U,MATCH_NOTHING_RE:H,METHOD_GUARD:ke,NUMBER_MODE:P,NUMBER_RE:ie,PHRASAL_WORDS_MODE:D,QUOTE_STRING_MODE:z,REGEXP_MODE:le,RE_STARTERS_RE:he,SHEBANG:ce,TITLE_MODE:Z,UNDERSCORE_IDENT_RE:J,UNDERSCORE_TITLE_MODE:Se});function kt(O,Q){O.input[O.index-1]==="."&&Q.ignoreMatch()}function Vt(O,Q){O.className!==void 0&&(O.scope=O.className,delete O.className)}function qn(O,Q){Q&&O.beginKeywords&&(O.begin="\\b("+O.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",O.__beforeBegin=kt,O.keywords=O.keywords||O.beginKeywords,delete O.beginKeywords,O.relevance===void 0&&(O.relevance=0))}function _t(O,Q){Array.isArray(O.illegal)&&(O.illegal=N(...O.illegal))}function Sn(O,Q){if(O.match){if(O.begin||O.end)throw new Error("begin & end are not supported with match");O.begin=O.match,delete O.match}}function Mt(O,Q){O.relevance===void 0&&(O.relevance=1)}const rn=(O,Q)=>{if(!O.beforeMatch)return;if(O.starts)throw new Error("beforeMatch cannot be used with starts");const ue=Object.assign({},O);Object.keys(O).forEach(De=>{delete O[De]}),O.keywords=ue.keywords,O.begin=S(ue.beforeMatch,b(ue.begin)),O.starts={relevance:0,contains:[Object.assign(ue,{endsParent:!0})]},O.relevance=0,delete ue.beforeMatch},En=["of","and","for","in","not","or","if","then","parent","list","value"],K="keyword";function Ee(O,Q,ue=K){const De=Object.create(null);return typeof O=="string"?pt(ue,O.split(" ")):Array.isArray(O)?pt(ue,O):Object.keys(O).forEach(function(Fe){Object.assign(De,Ee(O[Fe],Q,Fe))}),De;function pt(Fe,Ce){Q&&(Ce=Ce.map(Ae=>Ae.toLowerCase())),Ce.forEach(function(Ae){const _e=Ae.split("|");De[_e[0]]=[Fe,We(_e[0],_e[1])]})}}function We(O,Q){return Q?Number(Q):Be(O)?0:1}function Be(O){return En.includes(O.toLowerCase())}const ot={},Ze=O=>{console.error(O)},vn=(O,...Q)=>{console.log(`WARN: ${O}`,...Q)},jt=(O,Q)=>{ot[`${O}/${Q}`]||(console.log(`Deprecated as of ${O}. ${Q}`),ot[`${O}/${Q}`]=!0)},ye=new Error;function Ne(O,Q,{key:ue}){let De=0;const pt=O[ue],Fe={},Ce={};for(let Ae=1;Ae<=Q.length;Ae++)Ce[Ae+De]=pt[Ae],Fe[Ae+De]=!0,De+=L(Q[Ae-1]);O[ue]=Ce,O[ue]._emit=Fe,O[ue]._multi=!0}function Ke(O){if(Array.isArray(O.begin)){if(O.skip||O.excludeBegin||O.returnBegin)throw Ze("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ye;if(typeof O.beginScope!="object"||O.beginScope===null)throw Ze("beginScope must be object"),ye;Ne(O,O.begin,{key:"beginScope"}),O.begin=j(O.begin,{joinWith:""})}}function Ye(O){if(Array.isArray(O.end)){if(O.skip||O.excludeEnd||O.returnEnd)throw Ze("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ye;if(typeof O.endScope!="object"||O.endScope===null)throw Ze("endScope must be object"),ye;Ne(O,O.end,{key:"endScope"}),O.end=j(O.end,{joinWith:""})}}function It(O){O.scope&&typeof O.scope=="object"&&O.scope!==null&&(O.beginScope=O.scope,delete O.scope)}function Xt(O){It(O),typeof O.beginScope=="string"&&(O.beginScope={_wrap:O.beginScope}),typeof O.endScope=="string"&&(O.endScope={_wrap:O.endScope}),Ke(O),Ye(O)}function gr(O){function Q(Ce,Ae){return new RegExp(m(Ce),"m"+(O.case_insensitive?"i":"")+(O.unicodeRegex?"u":"")+(Ae?"g":""))}class ue{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Ae,_e){_e.position=this.position++,this.matchIndexes[this.matchAt]=_e,this.regexes.push([_e,Ae]),this.matchAt+=L(Ae)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Ae=this.regexes.map(_e=>_e[1]);this.matcherRe=Q(j(Ae,{joinWith:"|"}),!0),this.lastIndex=0}exec(Ae){this.matcherRe.lastIndex=this.lastIndex;const _e=this.matcherRe.exec(Ae);if(!_e)return null;const mt=_e.findIndex((Dn,ao)=>ao>0&&Dn!==void 0),Ot=this.matchIndexes[mt];return _e.splice(0,mt),Object.assign(_e,Ot)}}class De{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Ae){if(this.multiRegexes[Ae])return this.multiRegexes[Ae];const _e=new ue;return this.rules.slice(Ae).forEach(([mt,Ot])=>_e.addRule(mt,Ot)),_e.compile(),this.multiRegexes[Ae]=_e,_e}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Ae,_e){this.rules.push([Ae,_e]),_e.type==="begin"&&this.count++}exec(Ae){const _e=this.getMatcher(this.regexIndex);_e.lastIndex=this.lastIndex;let mt=_e.exec(Ae);if(this.resumingScanAtSamePosition()&&!(mt&&mt.index===this.lastIndex)){const Ot=this.getMatcher(0);Ot.lastIndex=this.lastIndex+1,mt=Ot.exec(Ae)}return mt&&(this.regexIndex+=mt.position+1,this.regexIndex===this.count&&this.considerAll()),mt}}function pt(Ce){const Ae=new De;return Ce.contains.forEach(_e=>Ae.addRule(_e.begin,{rule:_e,type:"begin"})),Ce.terminatorEnd&&Ae.addRule(Ce.terminatorEnd,{type:"end"}),Ce.illegal&&Ae.addRule(Ce.illegal,{type:"illegal"}),Ae}function Fe(Ce,Ae){const _e=Ce;if(Ce.isCompiled)return _e;[Vt,Sn,Xt,rn].forEach(Ot=>Ot(Ce,Ae)),O.compilerExtensions.forEach(Ot=>Ot(Ce,Ae)),Ce.__beforeBegin=null,[qn,_t,Mt].forEach(Ot=>Ot(Ce,Ae)),Ce.isCompiled=!0;let mt=null;return typeof Ce.keywords=="object"&&Ce.keywords.$pattern&&(Ce.keywords=Object.assign({},Ce.keywords),mt=Ce.keywords.$pattern,delete Ce.keywords.$pattern),mt=mt||/\w+/,Ce.keywords&&(Ce.keywords=Ee(Ce.keywords,O.case_insensitive)),_e.keywordPatternRe=Q(mt,!0),Ae&&(Ce.begin||(Ce.begin=/\B|\b/),_e.beginRe=Q(_e.begin),!Ce.end&&!Ce.endsWithParent&&(Ce.end=/\B|\b/),Ce.end&&(_e.endRe=Q(_e.end)),_e.terminatorEnd=m(_e.end)||"",Ce.endsWithParent&&Ae.terminatorEnd&&(_e.terminatorEnd+=(Ce.end?"|":"")+Ae.terminatorEnd)),Ce.illegal&&(_e.illegalRe=Q(Ce.illegal)),Ce.contains||(Ce.contains=[]),Ce.contains=[].concat(...Ce.contains.map(function(Ot){return Te(Ot==="self"?Ce:Ot)})),Ce.contains.forEach(function(Ot){Fe(Ot,_e)}),Ce.starts&&Fe(Ce.starts,Ae),_e.matcher=pt(_e),_e}if(O.compilerExtensions||(O.compilerExtensions=[]),O.contains&&O.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return O.classNameAliases=r(O.classNameAliases||{}),Fe(O)}function Y(O){return O?O.endsWithParent||Y(O.starts):!1}function Te(O){return O.variants&&!O.cachedVariants&&(O.cachedVariants=O.variants.map(function(Q){return r(O,{variants:null},Q)})),O.cachedVariants?O.cachedVariants:Y(O)?r(O,{starts:O.starts?r(O.starts):null}):Object.isFrozen(O)?r(O):O}var Me="11.11.1";class ft extends Error{constructor(Q,ue){super(Q),this.name="HTMLInjectionError",this.html=ue}}const Xe=t,vt=r,Jt=Symbol("nomatch"),Yn=7,yr=function(O){const Q=Object.create(null),ue=Object.create(null),De=[];let pt=!0;const Fe="Could not find the language '{}', did you forget to load/include a language module?",Ce={disableAutodetect:!0,name:"Plain text",contains:[]};let Ae={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function _e(pe){return Ae.noHighlightRe.test(pe)}function mt(pe){let Ie=pe.className+" ";Ie+=pe.parentNode?pe.parentNode.className:"";const st=Ae.languageDetectRe.exec(Ie);if(st){const wt=Xn(st[1]);return wt||(vn(Fe.replace("{}",st[1])),vn("Falling back to no-highlight mode for this block.",pe)),wt?st[1]:"no-highlight"}return Ie.split(/\s+/).find(wt=>_e(wt)||Xn(wt))}function Ot(pe,Ie,st){let wt="",on="";typeof Ie=="object"?(wt=pe,st=Ie.ignoreIllegals,on=Ie.language):(jt("10.7.0","highlight(lang, code, ...args) has been deprecated."),jt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),on=pe,wt=Ie),st===void 0&&(st=!0);const Vn={code:wt,language:on};co("before:highlight",Vn);const br=Vn.result?Vn.result:Dn(Vn.language,Vn.code,st);return br.code=Vn.code,co("after:highlight",br),br}function Dn(pe,Ie,st,wt){const on=Object.create(null);function Vn(xe,je){return xe.keywords[je]}function br(){if(!Ge.keywords){hn.addText(St);return}let xe=0;Ge.keywordPatternRe.lastIndex=0;let je=Ge.keywordPatternRe.exec(St),Je="";for(;je;){Je+=St.substring(xe,je.index);const ct=_n.case_insensitive?je[0].toLowerCase():je[0],Qt=Vn(Ge,ct);if(Qt){const[Dr,Sl]=Qt;if(hn.addText(Je),Je="",on[ct]=(on[ct]||0)+1,on[ct]<=Yn&&(fs+=Sl),Dr.startsWith("_"))Je+=je[0];else{const vu=_n.classNameAliases[Dr]||Dr;xr(je[0],vu)}}else Je+=je[0];xe=Ge.keywordPatternRe.lastIndex,je=Ge.keywordPatternRe.exec(St)}Je+=St.substring(xe),hn.addText(Je)}function nr(){if(St==="")return;let xe=null;if(typeof Ge.subLanguage=="string"){if(!Q[Ge.subLanguage]){hn.addText(St);return}xe=Dn(Ge.subLanguage,St,!0,xu[Ge.subLanguage]),xu[Ge.subLanguage]=xe._top}else xe=sa(St,Ge.subLanguage.length?Ge.subLanguage:null);Ge.relevance>0&&(fs+=xe.relevance),hn.__addSublanguage(xe._emitter,xe.language)}function Lt(){Ge.subLanguage!=null?nr():br(),St=""}function xr(xe,je){xe!==""&&(hn.startScope(je),hn.addText(xe),hn.endScope())}function yu(xe,je){let Je=1;const ct=je.length-1;for(;Je<=ct;){if(!xe._emit[Je]){Je++;continue}const Qt=_n.classNameAliases[xe[Je]]||xe[Je],Dr=je[Je];Qt?xr(Dr,Qt):(St=Dr,br(),St=""),Je++}}function aa(xe,je){return xe.scope&&typeof xe.scope=="string"&&hn.openNode(_n.classNameAliases[xe.scope]||xe.scope),xe.beginScope&&(xe.beginScope._wrap?(xr(St,_n.classNameAliases[xe.beginScope._wrap]||xe.beginScope._wrap),St=""):xe.beginScope._multi&&(yu(xe.beginScope,je),St="")),Ge=Object.create(xe,{parent:{value:Ge}}),Ge}function xl(xe,je,Je){let ct=R(xe.endRe,Je);if(ct){if(xe["on:end"]){const Qt=new e(xe);xe["on:end"](je,Qt),Qt.isMatchIgnored&&(ct=!1)}if(ct){for(;xe.endsParent&&xe.parent;)xe=xe.parent;return xe}}if(xe.endsWithParent)return xl(xe.parent,je,Je)}function la(xe){return Ge.matcher.regexIndex===0?(St+=xe[0],1):(hs=!0,0)}function zh(xe){const je=xe[0],Je=xe.rule,ct=new e(Je),Qt=[Je.__beforeBegin,Je["on:begin"]];for(const Dr of Qt)if(Dr&&(Dr(xe,ct),ct.isMatchIgnored))return la(je);return Je.skip?St+=je:(Je.excludeBegin&&(St+=je),Lt(),!Je.returnBegin&&!Je.excludeBegin&&(St=je)),aa(Je,xe),Je.returnBegin?0:je.length}function rr(xe){const je=xe[0],Je=Ie.substring(xe.index),ct=xl(Ge,xe,Je);if(!ct)return Jt;const Qt=Ge;Ge.endScope&&Ge.endScope._wrap?(Lt(),xr(je,Ge.endScope._wrap)):Ge.endScope&&Ge.endScope._multi?(Lt(),yu(Ge.endScope,xe)):Qt.skip?St+=je:(Qt.returnEnd||Qt.excludeEnd||(St+=je),Lt(),Qt.excludeEnd&&(St=je));do Ge.scope&&hn.closeNode(),!Ge.skip&&!Ge.subLanguage&&(fs+=Ge.relevance),Ge=Ge.parent;while(Ge!==ct.parent);return ct.starts&&aa(ct.starts,xe),Qt.returnEnd?0:je.length}function vl(){const xe=[];for(let je=Ge;je!==_n;je=je.parent)je.scope&&xe.unshift(je.scope);xe.forEach(je=>hn.openNode(je))}let uo={};function ca(xe,je){const Je=je&&je[0];if(St+=xe,Je==null)return Lt(),0;if(uo.type==="begin"&&je.type==="end"&&uo.index===je.index&&Je===""){if(St+=Ie.slice(je.index,je.index+1),!pt){const ct=new Error(`0 width match regex (${pe})`);throw ct.languageName=pe,ct.badRule=uo.rule,ct}return 1}if(uo=je,je.type==="begin")return zh(je);if(je.type==="illegal"&&!st){const ct=new Error('Illegal lexeme "'+Je+'" for mode "'+(Ge.scope||"<unnamed>")+'"');throw ct.mode=Ge,ct}else if(je.type==="end"){const ct=rr(je);if(ct!==Jt)return ct}if(je.type==="illegal"&&Je==="")return St+=`
`,1;if(wl>1e5&&wl>je.index*3)throw new Error("potential infinite loop, way more iterations than matches");return St+=Je,Je.length}const _n=Xn(pe);if(!_n)throw Ze(Fe.replace("{}",pe)),new Error('Unknown language: "'+pe+'"');const bu=gr(_n);let ua="",Ge=wt||bu;const xu={},hn=new Ae.__emitter(Ae);vl();let St="",fs=0,Ri=0,wl=0,hs=!1;try{if(_n.__emitTokens)_n.__emitTokens(Ie,hn);else{for(Ge.matcher.considerAll();;){wl++,hs?hs=!1:Ge.matcher.considerAll(),Ge.matcher.lastIndex=Ri;const xe=Ge.matcher.exec(Ie);if(!xe)break;const je=Ie.substring(Ri,xe.index),Je=ca(je,xe);Ri=xe.index+Je}ca(Ie.substring(Ri))}return hn.finalize(),ua=hn.toHTML(),{language:pe,value:ua,relevance:fs,illegal:!1,_emitter:hn,_top:Ge}}catch(xe){if(xe.message&&xe.message.includes("Illegal"))return{language:pe,value:Xe(Ie),illegal:!0,relevance:0,_illegalBy:{message:xe.message,index:Ri,context:Ie.slice(Ri-100,Ri+100),mode:xe.mode,resultSoFar:ua},_emitter:hn};if(pt)return{language:pe,value:Xe(Ie),illegal:!1,relevance:0,errorRaised:xe,_emitter:hn,_top:Ge};throw xe}}function ao(pe){const Ie={value:Xe(pe),illegal:!1,relevance:0,_top:Ce,_emitter:new Ae.__emitter(Ae)};return Ie._emitter.addText(pe),Ie}function sa(pe,Ie){Ie=Ie||Ae.languages||Object.keys(Q);const st=ao(pe),wt=Ie.filter(Xn).filter(us).map(Lt=>Dn(Lt,pe,!1));wt.unshift(st);const on=wt.sort((Lt,xr)=>{if(Lt.relevance!==xr.relevance)return xr.relevance-Lt.relevance;if(Lt.language&&xr.language){if(Xn(Lt.language).supersetOf===xr.language)return 1;if(Xn(xr.language).supersetOf===Lt.language)return-1}return 0}),[Vn,br]=on,nr=Vn;return nr.secondBest=br,nr}function ai(pe,Ie,st){const wt=Ie&&ue[Ie]||st;pe.classList.add("hljs"),pe.classList.add(`language-${wt}`)}function sn(pe){let Ie=null;const st=mt(pe);if(_e(st))return;if(co("before:highlightElement",{el:pe,language:st}),pe.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",pe);return}if(pe.children.length>0&&(Ae.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(pe)),Ae.throwUnescapedHTML))throw new ft("One of your code blocks includes unescaped HTML.",pe.innerHTML);Ie=pe;const wt=Ie.textContent,on=st?Ot(wt,{language:st,ignoreIllegals:!0}):sa(wt);pe.innerHTML=on.value,pe.dataset.highlighted="yes",ai(pe,st,on.language),pe.result={language:on.language,re:on.relevance,relevance:on.relevance},on.secondBest&&(pe.secondBest={language:on.secondBest.language,relevance:on.secondBest.relevance}),co("after:highlightElement",{el:pe,result:on,text:wt})}function Pn(pe){Ae=vt(Ae,pe)}const cs=()=>{oa(),jt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function yl(){oa(),jt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let pu=!1;function oa(){function pe(){oa()}if(document.readyState==="loading"){pu||window.addEventListener("DOMContentLoaded",pe,!1),pu=!0;return}document.querySelectorAll(Ae.cssSelector).forEach(sn)}function mu(pe,Ie){let st=null;try{st=Ie(O)}catch(wt){if(Ze("Language definition for '{}' could not be registered.".replace("{}",pe)),pt)Ze(wt);else throw wt;st=Ce}st.name||(st.name=pe),Q[pe]=st,st.rawDefinition=Ie.bind(null,O),st.aliases&&Mi(st.aliases,{languageName:pe})}function lo(pe){delete Q[pe];for(const Ie of Object.keys(ue))ue[Ie]===pe&&delete ue[Ie]}function bl(){return Object.keys(Q)}function Xn(pe){return pe=(pe||"").toLowerCase(),Q[pe]||Q[ue[pe]]}function Mi(pe,{languageName:Ie}){typeof pe=="string"&&(pe=[pe]),pe.forEach(st=>{ue[st.toLowerCase()]=Ie})}function us(pe){const Ie=Xn(pe);return Ie&&!Ie.disableAutodetect}function ds(pe){pe["before:highlightBlock"]&&!pe["before:highlightElement"]&&(pe["before:highlightElement"]=Ie=>{pe["before:highlightBlock"](Object.assign({block:Ie.el},Ie))}),pe["after:highlightBlock"]&&!pe["after:highlightElement"]&&(pe["after:highlightElement"]=Ie=>{pe["after:highlightBlock"](Object.assign({block:Ie.el},Ie))})}function fn(pe){ds(pe),De.push(pe)}function gu(pe){const Ie=De.indexOf(pe);Ie!==-1&&De.splice(Ie,1)}function co(pe,Ie){const st=pe;De.forEach(function(wt){wt[st]&&wt[st](Ie)})}function Oi(pe){return jt("10.7.0","highlightBlock will be removed entirely in v12.0"),jt("10.7.0","Please use highlightElement now."),sn(pe)}Object.assign(O,{highlight:Ot,highlightAuto:sa,highlightAll:oa,highlightElement:sn,highlightBlock:Oi,configure:Pn,initHighlighting:cs,initHighlightingOnLoad:yl,registerLanguage:mu,unregisterLanguage:lo,listLanguages:bl,getLanguage:Xn,registerAliases:Mi,autoDetection:us,inherit:vt,addPlugin:fn,removePlugin:gu}),O.debugMode=function(){pt=!1},O.safeMode=function(){pt=!0},O.versionString=Me,O.regex={concat:S,lookahead:b,either:N,optional:w,anyNumberOfTimes:x};for(const pe in nt)typeof nt[pe]=="object"&&n(nt[pe]);return Object.assign(O,nt),O},Ht=yr({});return Ht.newInstance=()=>yr({}),jg=Ht,Ht.HighlightJS=Ht,Ht.default=Ht,jg}var wH=vH();const SH=O0(wH),hE={},EH="hljs-";function CH(n){const e=SH.newInstance();return{highlight:t,highlightAuto:r,listLanguages:s,register:o,registerAlias:l,registered:u};function t(d,h,p){const m=p||hE,b=typeof m.prefix=="string"?m.prefix:EH;if(!e.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");e.configure({__emitter:TH,classPrefix:b});const x=e.highlight(h,{ignoreIllegals:!0,language:d});if(x.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:x.errorRaised});const w=x._emitter.root,S=w.data;return S.language=x.language,S.relevance=x.relevance,w}function r(d,h){const m=(h||hE).subset||s();let b=-1,x=0,w;for(;++b<m.length;){const S=m[b];if(!e.getLanguage(S))continue;const C=t(S,d,h);C.data&&C.data.relevance!==void 0&&C.data.relevance>x&&(x=C.data.relevance,w=C)}return w||{type:"root",children:[],data:{language:void 0,relevance:x}}}function s(){return e.listLanguages()}function o(d,h){if(typeof d=="string")e.registerLanguage(d,h);else{let p;for(p in d)Object.hasOwn(d,p)&&e.registerLanguage(p,d[p])}}function l(d,h){if(typeof d=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let p;for(p in d)if(Object.hasOwn(d,p)){const m=d[p];e.registerAliases(typeof m=="string"?m:[...m],{languageName:p})}}}function u(d){return!!e.getLanguage(d)}}class TH{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],r=t.children[t.children.length-1];r&&r.type==="text"?r.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const r=this.stack[this.stack.length-1],s=e.root.children;t?r.children.push({type:"element",tagName:"span",properties:{className:[t]},children:s}):r.children.push(...s)}openNode(e){const t=this,r=e.split(".").map(function(l,u){return u?l+"_".repeat(u):t.options.classPrefix+l}),s=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}function dN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=dN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Lg(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=dN(n))&&(r&&(r+=" "),r+=e);return r}function NH(n){var e;const{char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:u}=n,d=r&&!s,h=yL(t),p=new RegExp(`\\s${h}$`),m=l?"^":"",b=s?"":h,x=d?new RegExp(`${m}${h}.*?(?=\\s${b}|$)`,"gm"):new RegExp(`${m}(?:^)?${h}[^\\s${b}]*`,"gm"),w=((e=u.nodeBefore)===null||e===void 0?void 0:e.isText)&&u.nodeBefore.text;if(!w)return null;const S=u.pos-w.length,C=Array.from(w.matchAll(x)).pop();if(!C||C.input===void 0||C.index===void 0)return null;const N=C.input.slice(Math.max(0,C.index-1),C.index),L=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(N);if(o!==null&&!L)return null;const R=S+C.index;let k=R+C[0].length;return d&&p.test(w.slice(k-1,k+1))&&(C[0]+=" ",k+=1),R<u.pos&&k>=u.pos?{range:{from:R,to:k},query:C[0].slice(t.length),text:C[0]}:null}const AH=new dn("suggestion");function kH({pluginKey:n=AH,editor:e,char:t="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:o=[" "],startOfLine:l=!1,decorationTag:u="span",decorationClass:d="suggestion",decorationContent:h="",decorationEmptyClass:p="is-empty",command:m=()=>null,items:b=()=>[],render:x=()=>({}),allow:w=()=>!0,findSuggestionMatch:S=NH}){let C;const N=x==null?void 0:x(),L=new Wt({key:n,view(){return{update:async(R,k)=>{var j,H,U,J,ie,ge,be;const he=(j=this.key)===null||j===void 0?void 0:j.getState(k),ce=(H=this.key)===null||H===void 0?void 0:H.getState(R.state),ve=he.active&&ce.active&&he.range.from!==ce.range.from,de=!he.active&&ce.active,z=he.active&&!ce.active,D=!de&&!z&&he.query!==ce.query,$=de||ve&&D,B=D||ve,te=z||ve&&D;if(!$&&!B&&!te)return;const M=te&&!$?he:ce,P=R.dom.querySelector(`[data-decoration-id="${M.decorationId}"]`);C={editor:e,range:M.range,query:M.query,text:M.text,items:[],command:W=>m({editor:e,range:M.range,props:W}),decorationNode:P,clientRect:P?()=>{var W;const{decorationId:se}=(W=this.key)===null||W===void 0?void 0:W.getState(e.state),le=R.dom.querySelector(`[data-decoration-id="${se}"]`);return(le==null?void 0:le.getBoundingClientRect())||null}:null},$&&((U=N==null?void 0:N.onBeforeStart)===null||U===void 0||U.call(N,C)),B&&((J=N==null?void 0:N.onBeforeUpdate)===null||J===void 0||J.call(N,C)),(B||$)&&(C.items=await b({editor:e,query:M.query})),te&&((ie=N==null?void 0:N.onExit)===null||ie===void 0||ie.call(N,C)),B&&((ge=N==null?void 0:N.onUpdate)===null||ge===void 0||ge.call(N,C)),$&&((be=N==null?void 0:N.onStart)===null||be===void 0||be.call(N,C))},destroy:()=>{var R;C&&((R=N==null?void 0:N.onExit)===null||R===void 0||R.call(N,C))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(R,k,j,H){const{isEditable:U}=e,{composing:J}=e.view,{selection:ie}=R,{empty:ge,from:be}=ie,he={...k};if(he.composing=J,U&&(ge||e.view.composing)){(be<k.range.from||be>k.range.to)&&!J&&!k.composing&&(he.active=!1);const ce=S({char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:ie.$from}),ve=`id_${Math.floor(Math.random()*4294967295)}`;ce&&w({editor:e,state:H,range:ce.range,isActive:k.active})?(he.active=!0,he.decorationId=k.decorationId?k.decorationId:ve,he.range=ce.range,he.query=ce.query,he.text=ce.text):he.active=!1}else he.active=!1;return he.active||(he.decorationId=null,he.range={from:0,to:0},he.query=null,he.text=null),he}},props:{handleKeyDown(R,k){var j;const{active:H,range:U}=L.getState(R.state);return H&&((j=N==null?void 0:N.onKeyDown)===null||j===void 0?void 0:j.call(N,{view:R,event:k,range:U}))||!1},decorations(R){const{active:k,range:j,decorationId:H,query:U}=L.getState(R);if(!k)return null;const J=!(U!=null&&U.length),ie=[d];return J&&ie.push(p),Pt.create(R.doc,[An.inline(j.from,j.to,{nodeName:u,class:ie.join(" "),"data-decoration-id":H,"data-decoration-content":h})])}}});return L}const fN=T.forwardRef(({items:n,command:e},t)=>{const r=T.useRef(null),[s,o]=T.useState(0),l=T.useMemo(()=>h=>{const p=n[h];p&&e(p)},[n,e]),u=T.useMemo(()=>()=>{o(h=>{const p=h-1;return p<0?Math.max(n.length-1,0):p})},[n.length]),d=T.useMemo(()=>()=>{o(h=>{const p=h+1;return p>=n.length?0:p})},[n.length]);return T.useEffect(()=>{o(0)},[n]),T.useEffect(()=>{const h=r.current;if(!h)return;const p=h.querySelector(`[data-index="${s}"]`);p==null||p.scrollIntoView({block:"nearest"})},[s]),T.useImperativeHandle(t,()=>({onKeyDown:({event:h})=>h.key==="ArrowUp"?(u(),!0):h.key==="ArrowDown"?(d(),!0):h.key==="Enter"?(l(s),!0):!1}),[d,l,s,u]),n.length?v.jsx("div",{ref:r,className:"max-h-80 w-72 overflow-y-auto rounded-xl border border-neutral-200 bg-white p-1 shadow-xl",children:n.map((h,p)=>{const m=h.icon,b=p===s;return v.jsxs("button",{type:"button","data-index":p,onClick:()=>l(p),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition ${b?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[m?v.jsx(m,{className:"h-4 w-4 text-neutral-500"}):v.jsx("span",{className:"h-4 w-4","aria-hidden":!0}),v.jsxs("div",{className:"flex flex-col text-sm",children:[v.jsx("span",{className:"font-medium",children:h.title}),h.description?v.jsx("span",{className:"text-xs text-neutral-400",children:h.description}):null]})]},h.title)})}):v.jsx("div",{ref:r,className:"w-72 rounded-xl border border-neutral-200 bg-white p-4 text-sm text-neutral-500 shadow-xl",children:v.jsx("p",{children:"No matches. Keep typing to search commands."})})});fN.displayName="SlashCommandList";const MH=Rn.create({name:"slash-command",addOptions(){return{items:[]}},addProseMirrorPlugins(){return[kH({editor:this.editor,char:"/",command:n=>{const e=n==null?void 0:n.editor,t=n==null?void 0:n.range,r=n==null?void 0:n.props;if(!e||!t||!r)return!1;r.command({editor:e,range:t})},items:({query:n})=>{const e=n.toLowerCase();return this.options.items.filter(t=>t.disabled?!1:[t.title,t.description??"",...t.keywords??[]].join(" ").toLowerCase().includes(e)).slice(0,50)},render:()=>{let n=null,e=null;return{onStart(t){t!=null&&t.editor&&(n=new gT(fN,{props:{items:t.items,command:r=>t.command(r)},editor:t.editor}),e=ml("body",{getReferenceClientRect:t.clientRect,appendTo:()=>document.body,content:n.element,interactive:!0,trigger:"manual",placement:"left-start",arrow:!1,offset:[0,12]}),e[0].show())},onUpdate(t){t!=null&&t.editor&&(n==null||n.updateProps({items:t.items,command:r=>t.command(r)}),e==null||e[0].setProps({getReferenceClientRect:t.clientRect}))},onKeyDown(t){var s;return t!=null&&t.editor?t.event.key==="Escape"?(e==null||e[0].hide(),!0):!!((s=n==null?void 0:n.ref)==null?void 0:s.onKeyDown({event:t.event})):!1},onExit(){var t,r,s;(r=(t=e==null?void 0:e[0])==null?void 0:t.destroy)==null||r.call(t),e=null,(s=n==null?void 0:n.destroy)==null||s.call(n),n=null}}}})]}}),Bg={default:"border-neutral-200 bg-neutral-50",info:"border-blue-200 bg-blue-50",success:"border-emerald-200 bg-emerald-50",warning:"border-amber-200 bg-amber-50",danger:"border-rose-200 bg-rose-50"};function OH({node:n,updateAttributes:e}){const{emoji:t="",color:r="default"}=n.attrs,s=Bg[r]??Bg.default,o=()=>{const u=window.prompt("Callout icon (emoji)",t??"");u&&e({emoji:u})},l=()=>{const u=window.prompt("Callout color (default, info, success, warning, danger)",r);if(!u)return;const d=u.toLowerCase();Bg[d]&&e({color:d})};return v.jsxs(mT,{as:"aside",className:`notion-callout group relative my-3 flex w-full items-start gap-3 rounded-xl border px-4 py-3 text-[15px] leading-7 text-neutral-800 ${s}`,"data-color":r,children:[v.jsx("button",{type:"button",onClick:o,className:"mt-1 inline-flex h-8 w-8 items-center justify-center rounded-lg text-xl transition hover:bg-white/70","aria-label":"Change callout icon",children:t}),v.jsx("div",{className:"flex-1",children:v.jsx(h6,{className:"notion-callout-content"})}),v.jsx("button",{type:"button",onClick:l,className:"absolute right-3 top-3 hidden rounded-md bg-white/80 px-2 py-1 text-xs font-medium text-neutral-500 shadow-sm transition hover:bg-white group-hover:flex",children:"Color"})]})}const RH=["youtube.com","youtu.be","player.vimeo.com"];function DH(n){try{const e=new URL(n);return RH.some(t=>e.hostname.includes(t))}catch{return!1}}function _H({node:n}){const{url:e,title:t}=n.attrs,r=DH(e),s=(()=>{try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e}})();return v.jsxs(mT,{className:"notion-embed my-4 w-full overflow-hidden rounded-xl border border-neutral-200 bg-white shadow-sm",children:[r?v.jsx("div",{className:"aspect-video w-full bg-neutral-950/5",children:v.jsx("iframe",{src:e,title:t??e,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):null,v.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 text-sm",children:[v.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-neutral-200 bg-neutral-100 font-semibold text-neutral-500",children:s.slice(0,2).toUpperCase()}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-neutral-800",children:t??e}),v.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-neutral-500 underline-offset-2 hover:underline",children:s})]})]})]})}function jH({editor:n}){return v.jsx(fT,{editor:n,pluginKey:"table-bubble-menu",shouldShow:()=>n.isActive("table"),tippyOptions:{duration:150,offset:[0,16]},className:"rounded-xl border border-neutral-200 bg-white/95 px-3 py-2 text-sm shadow-2xl",children:v.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[v.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Col"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Col "}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Row"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Row "}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteColumn().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Col"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteRow().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Row"}),v.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteTable().run(),className:"rounded-md border border-rose-200 px-2 py-1 text-xs font-medium text-rose-500 transition hover:bg-rose-50",children:"Delete"})]})})}const ia=CH();ia.register("javascript",pH);ia.register("typescript",bH);ia.register("css",cH);ia.register("html",xH);ia.register("json",mH);ia.register("python",gH);function cn(n){return!n||n.isDestroyed?null:n.chain().focus()}function pE(n){try{return new URL(n),!0}catch{return!1}}const LH=ZI.extend({name:"toggle"}).configure({HTMLAttributes:{class:"notion-toggle","data-type":"toggle"}}),BH=Kt.create({name:"callout",group:"block",content:"block+",defining:!0,isolating:!0,selectable:!0,addAttributes(){return{emoji:{default:""},color:{default:"default"}}},parseHTML(){return[{tag:"aside[data-type='callout']"}]},renderHTML({HTMLAttributes:n}){return["aside",xt(n,{"data-type":"callout"}),0]},addNodeView(){return yT(OH)},addCommands(){return{setCallout:n=>({editor:e,range:t})=>{var l;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"callout",attrs:n??{},content:[{type:"paragraph"}]}),(l=cn(e))==null||l.run(),!0}}}}),zH=Kt.create({name:"embed",group:"block",atom:!0,selectable:!0,addAttributes(){return{url:{default:""},title:{default:null}}},parseHTML(){return[{tag:"div[data-type='embed']"}]},renderHTML({HTMLAttributes:n}){return["div",xt(n,{"data-type":"embed"})]},addNodeView(){return yT(_H)},addCommands(){return{setEmbed:n=>({editor:e,range:t})=>{var l;if(!(n!=null&&n.url))return!1;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"embed",attrs:n}),(l=cn(e))==null||l.run(),!0}}}});function IH({value:n,onChange:e,placeholder:t="Type '/' for commands",editable:r=!0,className:s,editorClassName:o}){const l=T.useRef(n??""),u=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>[{title:"Text",description:"Plain text",icon:gh,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).setParagraph().run()}},{title:"Heading 1",description:"Large heading",icon:V5,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).setNode("heading",{level:1}).run()}},{title:"List",description:"Bulleted list",icon:x5,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).toggleBulletList().run()}},{title:"Ordered list",description:"Numbered",icon:uD,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).toggleOrderedList().run()}},{title:"Quote",description:"Blockquote",icon:vi,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).toggleBlockquote().run()}},{title:"Code block",description:"Syntax highlighted",icon:j5,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).setCodeBlock().run()}},{title:"Divider",description:"Horizontal line",icon:Z5,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).setHorizontalRule().run()}},{title:"Callout",description:"Highlighted block",icon:w5,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).setCallout().run()}},{title:"Table",description:"33 table",icon:fD,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}},{title:"Embed",description:"External link",icon:Y1,command:({editor:x,range:w})=>{var C;const S=window.prompt("Embed URL");S&&((C=cn(x))==null||C.deleteRange(w).setEmbed({url:S}).run())}},{title:"Image",description:"Upload",icon:aD,command:({editor:x,range:w})=>{var S;(S=cn(x))==null||S.deleteRange(w).run(),setTimeout(()=>{var C;return(C=u.current)==null?void 0:C.click()},0)}}],[]),p=T.useCallback(async x=>{const w=d.current;if(!w||w.isDestroyed||!(x!=null&&x.length))return;const S=Array.from(x).filter(C=>C.type.startsWith("image/"));if(S.length)for(const C of S)await new Promise(N=>{const L=new FileReader;L.onload=R=>{var k,j;if(!d.current||d.current.isDestroyed)return N();typeof((k=R.target)==null?void 0:k.result)=="string"&&((j=cn(d.current))==null||j.setImage({src:R.target.result,alt:C.name}).run()),N()},L.readAsDataURL(C)})},[]),m=d6({content:n,editable:r,extensions:[gz.configure({codeBlock:!1,heading:{levels:[1,2,3]}}),yz.configure({placeholder:t,showOnlyWhenEditable:!0}),bz,Pz.configure({openOnClick:!1,autolink:!0,validate:x=>pE(x),HTMLAttributes:{class:"underline text-neutral-700 hover:text-neutral-900"}}),Fz.configure({allowBase64:!0}),WI.configure({resizable:!0,HTMLAttributes:{class:"notion-table w-full text-sm border border-neutral-200"}}),QI,YI.configure({HTMLAttributes:{class:"bg-neutral-100 font-semibold"}}),XI.configure({HTMLAttributes:{class:"border p-3 align-top"}}),eH.configure({lowlight:ia,HTMLAttributes:{class:"rounded-xl bg-neutral-950/90 p-4 font-mono text-[13px] text-neutral-100 overflow-x-auto"}}),LH,e7.configure({HTMLAttributes:{class:"cursor-pointer text-neutral-700 font-medium flex gap-2"}}),t7.configure({HTMLAttributes:{class:"pl-4 text-neutral-700"}}),BH,zH,MH.configure({items:h})],editorProps:{attributes:{class:Lg("notion-editor prose prose-neutral mx-auto min-h-[50vh] max-w-3xl text-[16px] leading-7 outline-none",o)},handlePaste:(x,w)=>{var N,L,R;const S=(N=w.clipboardData)==null?void 0:N.files;if(S!=null&&S.length)return p(S),!0;const C=(L=w.clipboardData)==null?void 0:L.getData("text/plain");return C&&pE(C)?((R=cn(d.current))==null||R.setEmbed({url:C}).run(),!0):!1},handleDrop:(x,w)=>{var C;const S=(C=w.dataTransfer)==null?void 0:C.files;return S!=null&&S.length?(w.preventDefault(),p(S),!0):!1}},onUpdate({editor:x}){if(!x||x.isDestroyed)return;const w=x.isEmpty?"":x.getHTML();l.current!==w&&(l.current=w,e(w))}},[r,t]);T.useEffect(()=>{d.current=m??null},[m]),T.useEffect(()=>{!m||m.isDestroyed||m.isEditable!==r&&m.setEditable(r)},[m,r]),T.useEffect(()=>{var k;if(!m||m.isDestroyed)return;const x=n??"";if(l.current===x)return;if(m.getHTML()===x||m.isEmpty&&x===""){l.current=x;return}const S=m.state.selection,C=(S==null?void 0:S.from)??0,N=(S==null?void 0:S.to)??0;m.commands.setContent(x,!1);const L=m.state.doc.content.size,R=j=>Math.max(0,Math.min(j,L));(k=cn(m))==null||k.setTextSelection({from:R(C),to:R(N)}).run(),l.current=x},[n,m]);const b=x=>Lg("flex h-8 w-8 items-center justify-center rounded-full text-[13px] transition",x?"bg-neutral-900 text-white":"text-neutral-100 hover:bg-white/10 hover:text-white");return v.jsxs("div",{className:Lg("relative rounded-2xl border border-neutral-200 bg-white px-6 py-5 shadow-sm",s),children:[v.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:x=>{p(x.target.files),x.target.value=""}}),m?v.jsxs(v.Fragment,{children:[v.jsx(fT,{editor:m,tippyOptions:{duration:100,offset:[0,8]},className:"rounded-full bg-neutral-900/95 px-2 py-1 shadow-xl",children:v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{type:"button",onClick:()=>{var x;return(x=cn(m))==null?void 0:x.toggleBold().run()},className:b(m.isActive("bold")),children:v.jsx("strong",{children:"B"})}),v.jsx("button",{type:"button",onClick:()=>{var x;return(x=cn(m))==null?void 0:x.toggleItalic().run()},className:b(m.isActive("italic")),children:v.jsx("em",{children:"I"})}),v.jsx("button",{type:"button",onClick:()=>{var x;return(x=cn(m))==null?void 0:x.toggleUnderline().run()},className:b(m.isActive("underline")),children:v.jsx("span",{className:"underline",children:"U"})}),v.jsx("button",{type:"button",onClick:()=>{var x;return(x=cn(m))==null?void 0:x.toggleStrike().run()},className:b(m.isActive("strike")),children:v.jsx("span",{className:"line-through",children:"S"})}),v.jsx("button",{type:"button",onClick:()=>{var w;const x=window.prompt("Enter URL:");x&&((w=cn(m))==null||w.extendMarkRange("link").setLink({href:x}).run())},className:b(m.isActive("link")),children:v.jsx(Y1,{className:"h-4 w-4"})})]})}),v.jsx(t6,{editor:m}),v.jsx(jH,{editor:m})]}):v.jsx("div",{className:"h-40 animate-pulse rounded-xl bg-neutral-200/80"})]})}const HH=/<\/?[a-z][^>]*>/i,UH=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),hN=n=>n?HH.test(n)?n:n.split(/\n{2,}/).map(t=>t.trim()?`<p>${t.split(/\n/).map(s=>UH(s.trimEnd())).join("<br />")}</p>`:"<p><br /></p>").join(""):"";function $H({selectedDocumentId:n,onSelectDocument:e}){const[t,r]=T.useState(""),[s,o]=T.useState(!1),[l,u]=T.useState(""),[d,h]=T.useState(!1),[p,m]=T.useState("all"),[b,x]=T.useState(!1),[w,S]=T.useState(null),[C,N]=T.useState(""),[L,R]=T.useState(""),[k,j]=T.useState(null),H=un(Pe.documents.listUserDocuments)||[],U=un(Pe.documents.searchDocuments,t.length>2?{query:t}:"skip")||[],J=un(Pe.folders.listUserFolders)||[],ie=Bt(Pe.documents.createDocument),ge=Bt(Pe.documents.setDocumentFolder),be=Bt(Pe.folders.createFolder),he=Bt(Pe.folders.updateFolder),ce=Bt(Pe.folders.deleteFolder),ve=t.length>2?U:H,de=T.useMemo(()=>ve.filter(Boolean).slice().sort((Z,Se)=>((Se==null?void 0:Se.lastModifiedAt)||0)-((Z==null?void 0:Z.lastModifiedAt)||0)),[ve]),z=T.useMemo(()=>p==="all"?de:p==="ungrouped"?de.filter(Z=>!Z.folderId):de.filter(Z=>Z.folderId===p),[de,p]),D=p!=="all"&&p!=="ungrouped"?J.find(Z=>Z._id===p):null,$=T.useMemo(()=>H.filter(Z=>!(Z!=null&&Z.folderId)).length,[H]),B=async Z=>{if(Z.preventDefault(),!!l.trim())try{const Se=await ie({title:l,content:"",isPublic:d,folderId:D==null?void 0:D._id});u(""),h(!1),o(!1),e(Se)}catch(Se){console.error("Failed to create document",Se),$e.error("Unable to create document. Please try again.")}},te=()=>{S(null),N(""),R(""),x(!0)},M=Z=>{const Se=J.find(ke=>ke._id===Z);Se&&(S(Se._id),N(Se.name),R(Se.description||""),x(!0))},P=()=>{x(!1),S(null),N(""),R("")},W=async Z=>{if(Z.preventDefault(),!!C.trim())try{if(w)await he({folderId:w,name:C,description:L}),$e.success("Folder updated");else{const Se=await be({name:C,description:L});$e.success("Folder created"),m(Se)}P()}catch(Se){console.error("Failed to save folder",Se),$e.error("Unable to save folder")}},se=async Z=>{if(confirm("Deleting a folder keeps the documents but removes their grouping. Continue?"))try{await ce({folderId:Z}),p===Z&&m("all"),$e.success("Folder deleted")}catch(Se){console.error("Failed to delete folder",Se),$e.error("Unable to delete folder")}},le=async(Z,Se)=>{try{await ge({documentId:Z,folderId:Se??null}),j(null),$e.success(Se?"Document added to folder":"Document removed from folder")}catch(ke){console.error("Failed to update folder assignment",ke),$e.error("Unable to update folder")}};return v.jsxs("aside",{className:"flex w-96 flex-col border-r border-neutral-200 bg-white",children:[v.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[v.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Documents"}),D&&v.jsxs("p",{className:"text-xs text-neutral-500",children:["New documents will be added to ",v.jsx("span",{className:"font-medium",children:D.name})]})]}),v.jsx("button",{onClick:()=>o(!s),className:"rounded-md border border-neutral-200 p-1.5 text-neutral-600 transition hover:bg-neutral-50",children:v.jsx(jo,{className:"h-4 w-4"})})]}),s&&v.jsxs("form",{onSubmit:B,className:"mb-4 space-y-3 rounded-xl border border-neutral-200 bg-gray-50 p-3",children:[v.jsx("input",{type:"text",placeholder:"Document title",value:l,onChange:Z=>u(Z.target.value),className:"w-full rounded-md border border-neutral-200 px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",autoFocus:!0}),v.jsxs("label",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[v.jsx("input",{type:"checkbox",checked:d,onChange:Z=>h(Z.target.checked),className:"rounded border-neutral-300 text-neutral-900 focus:ring-neutral-400"}),"Make public"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{type:"submit",className:"inline-flex flex-1 items-center justify-center rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-800",children:"Create"}),v.jsx("button",{type:"button",onClick:()=>o(!1),className:"inline-flex flex-1 items-center justify-center rounded-md border border-neutral-200 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-50",children:"Cancel"})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx(Q5,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-300"}),v.jsx("input",{type:"text",placeholder:"Search documents...",value:t,onChange:Z=>r(Z.target.value),className:"w-full rounded-md border border-neutral-200 bg-white pl-9 pr-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400 focus:ring-0"})]})]}),v.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[v.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-neutral-700",children:"Folders"}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Group related documents"})]}),v.jsx("button",{onClick:te,className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:bg-neutral-50",children:"New"})]}),b&&v.jsxs("form",{onSubmit:W,className:"mb-4 space-y-2 rounded-xl border border-neutral-200 bg-gray-50 p-3 text-sm",children:[v.jsx("input",{type:"text",value:C,onChange:Z=>N(Z.target.value),placeholder:"Folder name",className:"w-full rounded-md border border-neutral-200 px-3 py-2 outline-none transition focus:border-neutral-400"}),v.jsx("textarea",{value:L,onChange:Z=>R(Z.target.value),placeholder:"Description (optional)",className:"h-16 w-full rounded-md border border-neutral-200 px-3 py-2 outline-none transition focus:border-neutral-400"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{type:"submit",className:"inline-flex flex-1 items-center justify-center rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-800",children:w?"Save":"Create"}),v.jsx("button",{type:"button",onClick:P,className:"inline-flex flex-1 items-center justify-center rounded-md border border-neutral-200 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-50",children:"Cancel"})]})]}),v.jsxs("div",{className:"space-y-1 text-sm",children:[v.jsxs("button",{onClick:()=>m("all"),className:`flex w-full items-center justify-between rounded-md px-3 py-2 ${p==="all"?"bg-gray-100 font-semibold text-neutral-900":"text-neutral-600 hover:bg-neutral-50"}`,children:[v.jsx("span",{children:"All documents"}),v.jsx("span",{className:"text-xs text-neutral-500",children:H.length})]}),v.jsxs("button",{onClick:()=>m("ungrouped"),className:`flex w-full items-center justify-between rounded-md px-3 py-2 ${p==="ungrouped"?"bg-gray-100 font-semibold text-neutral-900":"text-neutral-600 hover:bg-neutral-50"}`,children:[v.jsx("span",{children:"Unsorted"}),v.jsx("span",{className:"text-xs text-neutral-500",children:$})]})]}),v.jsxs("div",{className:"mt-4 space-y-2",children:[J.length===0&&v.jsx("p",{className:"text-xs text-neutral-500",children:"No folders yet. Create one to start organizing."}),J.map(Z=>v.jsxs("div",{className:`flex items-center justify-between rounded-md px-3 py-2 text-sm ${p===Z._id?"bg-gray-100":"text-neutral-600 hover:bg-neutral-50"}`,children:[v.jsxs("button",{onClick:()=>m(Z._id),className:"flex flex-1 items-center gap-2 text-left",children:[v.jsx(qc,{className:"h-4 w-4"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium text-neutral-800",children:Z.name}),Z.description&&v.jsx("p",{className:"text-xs text-neutral-500",children:Z.description})]}),v.jsx("span",{className:"text-xs text-neutral-500",children:Z.documentCount})]}),v.jsxs("div",{className:"flex gap-1 pl-2",children:[v.jsx("button",{onClick:()=>M(Z._id),className:"rounded-md border border-neutral-200 p-1 text-neutral-500 transition hover:bg-neutral-50",title:"Rename folder",children:v.jsx(V0,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>se(Z._id),className:"rounded-md border border-neutral-200 p-1 text-red-500 transition hover:bg-neutral-50",title:"Delete folder",children:v.jsx(Ho,{className:"h-4 w-4"})})]})]},Z._id))]})]}),v.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:z.length===0?v.jsxs("div",{className:"rounded-lg border border-dashed border-neutral-200 bg-gray-50 px-4 py-10 text-center text-neutral-400",children:[v.jsx(qc,{className:"mx-auto mb-3 h-6 w-6"}),v.jsx("p",{className:"text-sm",children:t.length>2?"No documents match your search":"Create a document to get started"})]}):v.jsx("div",{className:"space-y-2",children:z.map(Z=>{const Se=n===Z._id;return v.jsxs("div",{className:`rounded-lg border px-3 py-3 ${Se?"border-neutral-300 bg-gray-50":"border-transparent bg-transparent hover:border-neutral-200 hover:bg-gray-50"}`,children:[v.jsxs("button",{className:"flex w-full items-start justify-between text-left",onClick:()=>e(Z._id),children:[v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsx("h4",{className:"truncate text-sm font-medium text-neutral-800",children:Z.title}),v.jsx("p",{className:"mt-1 text-xs text-neutral-400",children:new Date(Z.lastModifiedAt).toLocaleDateString()})]}),v.jsx("div",{className:"ml-3 flex items-center",children:Z.isPublic?v.jsx(q5,{className:"h-4 w-4 text-neutral-500",title:"Public"}):v.jsx(K5,{className:"h-4 w-4 text-neutral-300",title:"Private"})})]}),v.jsxs("div",{className:"mt-3",children:[v.jsx("button",{onClick:()=>j(k===Z._id?null:Z._id),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-900",children:Z.folderId?"Move to a different folder":"Add to folder"}),k===Z._id&&v.jsxs("div",{className:"mt-2 space-y-1 rounded-md border border-neutral-200 bg-white p-2 text-sm",children:[v.jsx("button",{onClick:()=>le(Z._id,null),className:"w-full rounded-md px-2 py-1 text-left text-neutral-600 transition hover:bg-neutral-100",children:"No folder"}),J.length===0&&v.jsx("p",{className:"px-2 py-1 text-xs text-neutral-400",children:"Create a folder to organize this document"}),J.map(ke=>v.jsx("button",{onClick:()=>le(Z._id,ke._id),className:`w-full rounded-md px-2 py-1 text-left transition ${Z.folderId===ke._id?"bg-neutral-900 text-white":"text-neutral-600 hover:bg-neutral-100"}`,children:ke.name},ke._id))]})]})]},Z._id)})})})]})}function qH({documentId:n,onDocumentChange:e,currentUserName:t}){const[r,s]=T.useState(""),[o,l]=T.useState(""),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[m,b]=T.useState(!1),[x,w]=T.useState(!1),[S,C]=T.useState(""),[N,L]=T.useState(!1),[R,k]=T.useState(null),[j,H]=T.useState(!1),U=T.useRef(null),J=T.useRef(""),ie=T.useRef(""),ge=un(Pe.documents.getDocument,n?{documentId:n}:"skip"),be=un(Pe.documents.getDocumentVersions,n?{documentId:n}:"skip")||[],he=un(Pe.comments.getDocumentComments,n?{documentId:n}:"skip")||[],ce=Bt(Pe.documents.updateDocument),ve=Bt(Pe.documents.generateShareableLink),de=Bt(Pe.documents.rollbackToVersion),z=Bt(Pe.comments.addComment),D=Bt(Pe.documents.deleteDocument);T.useEffect(()=>{if(ge){const fe=hN(ge.content);s(fe),l(ge.title),J.current=fe,ie.current=ge.title,d(!1),L(!1),k(new Date(ge.lastModifiedAt))}},[ge]);const $=T.useCallback(async()=>{if(!n||!N)return;const fe=r!==J.current,nt=o!==ie.current;if(!fe&&!nt){L(!1);return}H(!0);try{await ce({documentId:n,title:nt?o:void 0,content:fe?r:void 0,changeDescription:"Auto-saved changes"}),J.current=r,ie.current=o,L(!1),k(new Date)}catch(kt){console.error("Auto-save failed:",kt),$e.error("Auto-save failed")}finally{H(!1)}},[n,r,o,N,ce]);T.useEffect(()=>(N&&(U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{$()},3e4)),()=>{U.current&&clearTimeout(U.current)}),[N,$]);const B=T.useCallback(fe=>{s(fe),fe!==J.current&&L(!0)},[J]),te=T.useMemo(()=>{if(!r)return"";if(typeof window>"u")return r.replace(/<[^>]+>/g," ").trim();const fe=document.createElement("div");return fe.innerHTML=r,fe.textContent||fe.innerText||""},[r]),M=fe=>{l(fe),d(!0),L(!0)},P=async()=>{if(n)try{await ce({documentId:n,title:o,content:r,changeDescription:"Manual save"}),J.current=r,ie.current=o,d(!1),L(!1),k(new Date),$e.success("Document saved successfully")}catch(fe){$e.error("Failed to save document"),console.error("Save error:",fe)}},W=async()=>{if(n)try{const fe=await ve({documentId:n}),nt=`${window.location.origin}/shared/${fe}`;await navigator.clipboard.writeText(nt),$e.success("Shareable link copied to clipboard")}catch(fe){$e.error("Failed to generate shareable link"),console.error("Share error:",fe)}},se=async fe=>{if(n)try{await de({documentId:n,version:fe}),$e.success(`Rolled back to version ${fe}`),p(!1),L(!1)}catch(nt){$e.error("Failed to rollback document"),console.error("Rollback error:",nt)}},le=async fe=>{if(fe.preventDefault(),!(!n||!S.trim()))try{await z({documentId:n,content:S}),C(""),$e.success("Comment added")}catch(nt){$e.error("Failed to add comment"),console.error("Comment error:",nt)}},Z=async()=>{if(n&&confirm("Are you sure you want to delete this document? This action cannot be undone."))try{await D({documentId:n}),e(null),$e.success("Document deleted")}catch(fe){$e.error("Failed to delete document"),console.error("Delete error:",fe)}},Se=()=>{if(!ge)return;const fe=window.open("","_blank");fe&&(fe.document.write(`
        <html>
          <head>
            <title>${ge.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content { font-size: 16px; line-height: 1.75; color: #27272a; }
              .content h1, .content h2, .content h3, .content h4 { margin-top: 32px; }
              .content ul, .content ol { padding-left: 20px; }
              .content blockquote { border-left: 4px solid #d4d4d8; padding-left: 16px; color: #52525b; }
              .content pre { background: #111827; color: #f8fafc; padding: 16px; border-radius: 12px; }
              .content code { background: #f4f4f5; padding: 4px 6px; border-radius: 6px; }
            </style>
          </head>
          <body>
            <h1>${ge.title}</h1>
            <div class="content">${r}</div>
          </body>
        </html>
      `),fe.document.close(),fe.print())},ke=fe=>v.jsxs("div",{className:"flex h-full overflow-hidden bg-gray-50",children:[v.jsx($H,{selectedDocumentId:n,onSelectDocument:e}),v.jsx("div",{className:"flex-1 overflow-hidden",children:fe})]});return ke(n?ge?v.jsxs("div",{className:"flex h-full flex-col overflow-hidden bg-gray-50",children:[v.jsx("div",{className:"border-b border-neutral-200 bg-white px-10 py-5",children:v.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[v.jsxs("div",{className:"min-w-0 flex-1",children:[u?v.jsx("input",{type:"text",value:o,onChange:fe=>M(fe.target.value),className:"mt-3 w-full border-none bg-transparent text-3xl font-semibold text-neutral-900 outline-none focus:ring-1 focus:ring-neutral-400",onBlur:P,onKeyDown:fe=>fe.key==="Enter"&&P(),autoFocus:!0}):v.jsx("h1",{className:"mt-3 cursor-text text-3xl font-semibold text-neutral-900 transition hover:text-neutral-700",onClick:()=>d(!0),children:ge.title}),v.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs text-neutral-500",children:[v.jsxs("span",{className:"inline-flex items-center gap-1",children:[v.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),R?`Last edited ${R.toLocaleString()}`:"Never saved"]}),v.jsx("span",{className:"text-neutral-300",children:""}),v.jsxs("span",{className:"inline-flex items-center gap-1",children:[v.jsx(Z1,{className:"h-4 w-4 text-neutral-400"}),t?`${t}`:"Shared workspace"]}),v.jsx("span",{className:"text-neutral-300",children:""}),v.jsxs("span",{className:"inline-flex items-center gap-1",children:[v.jsx(H5,{className:"h-4 w-4 text-neutral-400"}),ge.isPublic?"Public page":"Private page"]}),j&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"text-neutral-300",children:""}),v.jsx("span",{className:"text-neutral-500",children:"Auto-saving"})]})]})]}),v.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[v.jsxs("button",{onClick:()=>p(!h),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${h?"bg-white shadow-sm":"bg-transparent"}`,children:[v.jsx(Ec,{className:"h-4 w-4"}),"Versions"]}),v.jsxs("button",{onClick:()=>b(!m),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${m?"bg-white shadow-sm":"bg-transparent"}`,children:[v.jsx(Vg,{className:"h-4 w-4"}),"Comments (",he.length,")"]}),v.jsxs("button",{onClick:()=>w(!x),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium transition hover:bg-white ${x?"border-purple-300 bg-purple-50 text-purple-700 shadow-sm":"text-neutral-600 hover:text-neutral-700"}`,children:[v.jsx(vi,{className:"h-4 w-4"}),"AI Assistant"]}),v.jsxs("button",{onClick:Se,className:"inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700",children:[v.jsx(vf,{className:"h-4 w-4"}),"Export"]}),v.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-1.5 font-medium text-neutral-100 transition hover:bg-neutral-700",children:[v.jsx(pD,{className:"h-4 w-4"}),"Share"]}),v.jsxs("button",{onClick:Z,className:"inline-flex items-center gap-2 rounded-md border border-red-200 bg-red-50 px-3 py-1.5 font-medium text-red-600 transition hover:bg-red-100",children:[v.jsx(Ho,{className:"h-4 w-4"}),"Delete"]})]})]})}),v.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsxs("div",{className:"mx-auto w-full max-w-4xl px-10 pb-24 pt-12",children:[v.jsxs("div",{className:"mb-10 flex items-center gap-3 text-sm text-neutral-500",children:[v.jsx(Z1,{className:"h-5 w-5 text-neutral-400"}),v.jsx("span",{children:"Collaborate with your team and keep every update in one place. Use / to use styling"})]}),v.jsx(IH,{value:r,onChange:B,placeholder:"Type '/' for commands or start writing..."},n??"new-document")]})}),h&&v.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-white",children:[v.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:v.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Document versions"})}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:be.map(fe=>v.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"font-medium text-neutral-700",children:["Version ",fe.version]}),fe.version!==ge.version&&v.jsx("button",{onClick:()=>se(fe.version),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-800",children:"Restore"})]}),v.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:new Date(fe.createdAt).toLocaleString()}),fe.changeDescription&&v.jsx("p",{className:"mt-2 text-xs text-neutral-600",children:fe.changeDescription})]},fe._id))})]}),m&&v.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-white",children:[v.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:v.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Comments"})}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:he.map(fe=>{var nt,kt,Vt;return v.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-900 text-xs font-semibold text-neutral-100",children:((kt=(nt=fe.author)==null?void 0:nt.name)==null?void 0:kt[0])||"U"}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-neutral-700",children:((Vt=fe.author)==null?void 0:Vt.name)||"Unknown user"}),v.jsx("p",{className:"text-xs text-neutral-500",children:new Date(fe.createdAt).toLocaleString()})]})]}),v.jsx("p",{className:"mt-3 text-sm leading-relaxed text-neutral-700",children:fe.content})]},fe._id)})}),v.jsxs("form",{onSubmit:le,className:"border-t border-neutral-200 px-4 py-3",children:[v.jsx("textarea",{value:S,onChange:fe=>C(fe.target.value),placeholder:"Leave a note...",className:"w-full resize-none rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",rows:3}),v.jsx("button",{type:"submit",disabled:!S.trim(),className:"mt-3 w-full rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:"Add comment"})]})]}),v.jsx(SD,{isOpen:x,onClose:()=>w(!1),documentId:n,documentContent:te})]}),N&&v.jsxs("div",{className:"flex items-center justify-between border-t border-neutral-200 bg-white px-10 py-3 text-sm text-neutral-600",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{children:"Unsaved changes"}),j&&v.jsx("span",{className:"text-neutral-500",children:"Auto-saving in progress"})]}),v.jsxs("button",{onClick:P,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[v.jsx(Fg,{className:"h-4 w-4"}),"Save now"]})]})]}):v.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-gray-50",children:v.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-neutral-300 border-t-neutral-700"})}):v.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-gray-50",children:v.jsxs("div",{className:"text-center",children:[v.jsx(vf,{className:"mx-auto mb-4 h-16 w-16 text-neutral-300"}),v.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"No document selected"}),v.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Choose a page from the sidebar to begin editing."})]})}))}function PH({documentId:n}){const[e,t]=T.useState(!1),[r,s]=T.useState({title:"",description:"",priority:"medium",dueDate:"",startTime:"",endTime:"",location:""}),[o,l]=T.useState(null),[u,d]=T.useState(!1),[h,p]=T.useState("priority"),[m,b]=T.useState({description:"",priority:"medium",dueDate:"",startTime:"",endTime:"",location:""}),x=un(Pe.tasks.getUserTasks,{includeCompleted:!0})||[],w=un(Pe.tasks.getDocumentTasks,n?{documentId:n}:"skip")||[],S=Bt(Pe.tasks.createTask),C=Bt(Pe.tasks.updateTaskStatus),N=Bt(Pe.tasks.updateTaskDetails),L=Bt(Pe.tasks.deleteTask),R=B=>B?new Date(B).getTime():void 0,k=B=>B?new Date(B).toISOString().slice(0,16):"",j=B=>B?new Date(B).toLocaleDateString(void 0,{dateStyle:"medium"}):"No due date",H=B=>B?new Date(B).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null,U=async B=>{if(B.preventDefault(),!!r.title.trim())try{await S({title:r.title,description:r.description||void 0,priority:r.priority,dueDate:R(r.dueDate),startTime:R(r.startTime),endTime:R(r.endTime),location:r.location||void 0,documentId:n||void 0}),s({title:"",description:"",priority:"medium",dueDate:"",startTime:"",endTime:"",location:""}),t(!1),$e.success("Goal created successfully")}catch(te){$e.error("Failed to create task"),console.error("Create task error:",te)}},J=B=>{l(B._id),b({description:B.description||"",priority:B.priority,dueDate:B.dueDate?new Date(B.dueDate).toISOString().slice(0,10):"",startTime:k(B.startTime),endTime:k(B.endTime),location:B.location||""})},ie=async B=>{if(B.preventDefault(),!!o)try{await N({taskId:o,description:m.description||void 0,priority:m.priority,dueDate:R(m.dueDate),startTime:R(m.startTime),endTime:R(m.endTime),location:m.location||void 0}),$e.success("Goal updated"),l(null)}catch(te){console.error("Update task error:",te),$e.error("Failed to update task")}},ge=async B=>{if(window.confirm("Delete this task? This cannot be undone."))try{await L({taskId:B}),$e.success("Goal deleted"),o===B&&l(null)}catch(M){console.error("Delete task error:",M),$e.error("Failed to delete task")}},be=async(B,te,M)=>{try{await C({taskId:B,status:te}),$e.success(M||"Goal status updated")}catch(P){$e.error("Failed to update task status"),console.error("Update task error:",P)}},he=async B=>{await be(B,"in_progress","Goal restored to In Progress")},ce=B=>{switch(B){case"high":return"text-rose-600 bg-rose-50 border border-rose-200";case"medium":return"text-amber-600 bg-amber-50 border border-amber-200";case"low":return"text-emerald-600 bg-emerald-50 border border-emerald-200";default:return"text-neutral-600 bg-neutral-50 border border-neutral-200"}},ve=B=>{switch(B){case"completed":return"text-emerald-600 bg-emerald-50";case"in_progress":return"text-blue-600 bg-blue-50";case"todo":return"text-neutral-500 bg-neutral-100";default:return"text-neutral-500 bg-neutral-100"}},de=n?w:x,z=de.filter(B=>B.status==="completed"),D={high:0,medium:1,low:2},$=de.filter(B=>B.status!=="completed").slice().sort((B,te)=>{if(h==="created")return te.createdAt-B.createdAt;if(h==="status"){const se={in_progress:0,todo:1,completed:2},le=se[B.status]-se[te.status];if(le!==0)return le}const M=D[B.priority]-D[te.priority];if(M!==0)return M;const P=B.dueDate||Number.MAX_SAFE_INTEGER,W=te.dueDate||Number.MAX_SAFE_INTEGER;return P-W});return v.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-gray-50",children:v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[v.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:v.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Goals":"My Goals"}),v.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Track progress and collaborate on goals connected to this document.":"Manage your personal and shared objectives across the workspace."})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-2 text-sm font-medium text-neutral-600",children:[v.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-neutral-400",children:"Sort by"}),v.jsxs("select",{value:h,onChange:B=>p(B.target.value),className:"rounded-full border border-neutral-200 bg-white px-3 py-1 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",children:[v.jsx("option",{value:"priority",children:"Priority"}),v.jsx("option",{value:"created",children:"Creation date"}),v.jsx("option",{value:"status",children:"Status"})]})]}),v.jsxs("button",{onClick:()=>d(!u),className:`inline-flex items-center gap-2 rounded-full border px-5 py-2 text-sm font-medium transition ${u?"border-neutral-900 text-neutral-900":"border-neutral-200 text-neutral-600 hover:border-neutral-300 hover:text-neutral-800"}`,children:["Archive",z.length>0&&v.jsx("span",{className:"rounded-full bg-neutral-900 px-2 py-0.5 text-xs font-semibold text-white",children:z.length})]}),v.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[v.jsx(jo,{className:"h-4 w-4"}),"New Goal"]})]})]})}),v.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[e&&v.jsx("div",{className:"border-b border-neutral-200/70 bg-gray-50 px-6 py-6",children:v.jsxs("form",{onSubmit:U,className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Goal Title"}),v.jsx("input",{type:"text",value:r.title,onChange:B=>s({...r,title:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"Outline the goal...",required:!0})]}),v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),v.jsx("textarea",{value:r.description,onChange:B=>s({...r,description:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,placeholder:"Provide helpful context for collaborators..."})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),v.jsxs("select",{value:r.priority,onChange:B=>s({...r,priority:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",children:[v.jsx("option",{value:"low",children:"Low"}),v.jsx("option",{value:"medium",children:"Medium"}),v.jsx("option",{value:"high",children:"High"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),v.jsx("input",{type:"date",value:r.dueDate,onChange:B=>s({...r,dueDate:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start Time"}),v.jsx("input",{type:"datetime-local",value:r.startTime,onChange:B=>s({...r,startTime:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End Time"}),v.jsx("input",{type:"datetime-local",value:r.endTime,onChange:B=>s({...r,endTime:B.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),v.jsx("input",{type:"text",value:r.location,onChange:B=>s({...r,location:B.target.value}),placeholder:"Add a room, link, or address",className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),v.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[v.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[v.jsx(P0,{className:"h-4 w-4"}),"Create Goal"]}),v.jsx("button",{type:"button",onClick:()=>t(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:"Cancel"})]})]})}),v.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:[$.length===0?v.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-gray-50 py-16 text-center",children:[v.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:v.jsx(nC,{className:"h-8 w-8 text-neutral-400"})}),v.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No goals yet"}),v.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:n?"Create goals linked to this document to align your team and track progress.":"Capture your next objectives and assign work to teammates to keep momentum."}),v.jsxs("button",{onClick:()=>t(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[v.jsx(jo,{className:"h-4 w-4"}),"Add your first goal"]})]}):v.jsx("div",{className:"space-y-4",children:$.map(B=>{const te=o===B._id;return v.jsxs("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-5 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:[v.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[v.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:B.title}),v.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${ce(B.priority)}`,children:["Priority  ",B.priority.charAt(0).toUpperCase()+B.priority.slice(1)]})]}),B.description&&v.jsx("p",{className:"mt-3 text-sm text-neutral-600",children:B.description}),v.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs font-medium uppercase tracking-[0.2em] text-neutral-400",children:[B.creator&&v.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[v.jsx(J1,{className:"h-4 w-4 text-neutral-400"}),"Created by ",B.creator.name]}),B.assignee&&v.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[v.jsx(J1,{className:"h-4 w-4 text-neutral-400"}),"Assigned to ",B.assignee.name]}),v.jsxs("div",{className:"inline-flex flex-wrap items-center gap-2 text-neutral-500 normal-case tracking-normal",children:[v.jsxs("span",{className:"inline-flex items-center gap-1",children:[v.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),j(B.dueDate)]}),v.jsxs("span",{className:"ml-1 flex gap-1",children:[v.jsx("button",{onClick:()=>J(B),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-neutral-700",title:"Edit task",children:v.jsx(V0,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>ge(B._id),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-100 hover:text-red-500",title:"Delete task",children:v.jsx(Ho,{className:"h-4 w-4"})})]})]}),B.startTime&&v.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[v.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),"Start  ",H(B.startTime)]}),B.endTime&&v.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[v.jsx(Ec,{className:"h-4 w-4 text-neutral-400"}),"End  ",H(B.endTime)]}),B.location&&v.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[v.jsx(X5,{className:"h-4 w-4 text-neutral-400"}),B.location]})]})]}),v.jsxs("div",{className:"flex flex-col items-stretch gap-3 md:w-56",children:[v.jsx("span",{className:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${ve(B.status)}`,children:B.status.replace("_"," ").replace(/\b\w/g,M=>M.toUpperCase())}),v.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[v.jsx("button",{onClick:()=>be(B._id,"todo"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${B.status==="todo"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"To Do"}),v.jsx("button",{onClick:()=>be(B._id,"in_progress"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${B.status==="in_progress"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"In Progress"}),v.jsx("button",{onClick:()=>be(B._id,"completed"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${B.status==="completed"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"Done"})]})]})]}),te&&v.jsxs("div",{className:"mt-4 rounded-2xl border border-neutral-200 bg-gray-50 px-4 py-4",children:[v.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[v.jsx("h4",{className:"text-sm font-semibold text-neutral-700",children:"Edit Goal"}),v.jsx("button",{onClick:()=>l(null),className:"rounded-full p-1 text-neutral-400 transition hover:bg-neutral-200",title:"Close editor",children:v.jsx(Xa,{className:"h-4 w-4"})})]}),v.jsxs("form",{onSubmit:ie,className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),v.jsx("textarea",{value:m.description,onChange:M=>b({...m,description:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",rows:3})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),v.jsxs("select",{value:m.priority,onChange:M=>b({...m,priority:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",children:[v.jsx("option",{value:"low",children:"Low"}),v.jsx("option",{value:"medium",children:"Medium"}),v.jsx("option",{value:"high",children:"High"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),v.jsx("input",{type:"date",value:m.dueDate,onChange:M=>b({...m,dueDate:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start Time"}),v.jsx("input",{type:"datetime-local",value:m.startTime,onChange:M=>b({...m,startTime:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End Time"}),v.jsx("input",{type:"datetime-local",value:m.endTime,onChange:M=>b({...m,endTime:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none"})]}),v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),v.jsx("input",{type:"text",value:m.location,onChange:M=>b({...m,location:M.target.value}),className:"mt-2 w-full rounded-xl border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none",placeholder:"Add a room, link, or address"})]}),v.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-2",children:[v.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800",children:"Save changes"}),v.jsx("button",{type:"button",onClick:()=>l(null),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300",children:"Cancel"})]})]})]})]},B._id)})}),u&&v.jsxs("div",{className:"mt-8 rounded-2xl border border-neutral-200 bg-white px-5 py-5 shadow-sm",children:[v.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Archived Goals"}),v.jsx("p",{className:"text-sm text-neutral-500",children:"Goals marked as done are stored here. Restore them anytime."})]}),v.jsx("button",{onClick:()=>d(!1),className:"rounded-full border border-neutral-200 px-3 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",children:"Close"})]}),z.length===0?v.jsx("div",{className:"rounded-xl border border-dashed border-neutral-200 bg-gray-50 px-4 py-6 text-center text-sm text-neutral-500",children:"No archived goals yet."}):v.jsx("div",{className:"space-y-3",children:z.map(B=>v.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 text-sm text-neutral-700 shadow-sm",children:v.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-base font-semibold text-neutral-900",children:B.title}),v.jsxs("p",{className:"text-xs text-neutral-500",children:["Completed on"," ",B.dueDate?new Date(B.dueDate).toLocaleDateString():new Date(B.createdAt).toLocaleDateString()]}),B.description&&v.jsx("p",{className:"mt-2 text-sm text-neutral-600",children:B.description})]}),v.jsx("button",{onClick:()=>he(B._id),className:"inline-flex items-center justify-center rounded-full border border-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-neutral-900 transition hover:bg-neutral-900 hover:text-white",children:"Restore"})]})},B._id))})]})]})]})]})})})}function VH({selectedCaseId:n,onCaseSelect:e}){const[t,r]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(null),[p,m]=T.useState(""),[b,x]=T.useState(""),[w,S]=T.useState(!1),[C,N]=T.useState([]),[L,R]=T.useState(""),[k,j]=T.useState(!1),[H,U]=T.useState(!1),J=T.useRef(null),ie=T.useRef(null),ge=un(Pe.cases.getUserCases)||[],be=un(Pe.cases.getCase,n?{caseId:n}:"skip"),he=un(Pe.cases.getCaseDocuments,n?{caseId:n}:"skip")||[],ce=un(Pe.cases.getCaseMessages,n?{caseId:n}:"skip"),ve=un(Pe.documents.listUserDocuments)||[],de=un(Pe.files.getCaseFiles,n?{caseId:n}:"skip")||[],z=Bt(Pe.cases.createCase),D=Bt(Pe.cases.updateCase),$=Bt(Pe.cases.deleteCase),B=Bt(Pe.cases.addDocumentToCase),te=Bt(Pe.cases.removeDocumentFromCase),M=bf(Pe.cases.sendMessageToCaseAI),P=Bt(Pe.files.generateUploadUrl),W=bf(Pe.fileExtraction.convertUploadToDocument),se=Bt(Pe.files.deleteFile);T.useEffect(()=>{if(!n){N([]),R("");return}},[n]),T.useEffect(()=>{if(!ce)return;const K=[...ce].sort((Ee,We)=>Ee.timestamp-We.timestamp).map(Ee=>({id:String(Ee._id??Ee.id??Ee.timestamp),role:Ee.isAI?"assistant":"user",text:Ee.content,createdAt:Ee.timestamp,sources:[]}));N(K)},[ce]);const le=C.length?`${C[C.length-1].id}-${C[C.length-1].pending??!1}`:"none";T.useEffect(()=>{w&&J.current&&J.current.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},[le,w]);const Z=async K=>{if(K.preventDefault(),!!s.trim())try{const Ee=await z({name:s,description:l||void 0});e(Ee),o(""),u(""),r(!1),$e.success("Case created successfully")}catch(Ee){$e.error("Failed to create case"),console.error("Create case error:",Ee)}},Se=async K=>{try{await D({caseId:K,name:p,description:b||void 0}),h(null),$e.success("Case updated successfully")}catch(Ee){$e.error("Failed to update case"),console.error("Update case error:",Ee)}},ke=async(K,Ee)=>{if(confirm(`Are you sure you want to delete the case "${Ee}"? This will remove all documents from the case but won't delete the documents themselves.`))try{await $({caseId:K}),n===K&&e(null),$e.success("Case deleted successfully")}catch(We){$e.error("Failed to delete case"),console.error("Delete case error:",We)}},fe=async K=>{if(n)try{await B({caseId:n,documentId:K}),$e.success("Document added to case")}catch(Ee){$e.error(Ee.message||"Failed to add document to case"),console.error("Add document error:",Ee)}},nt=async K=>{if(n)try{await te({caseId:n,documentId:K}),$e.success("Document removed from case")}catch(Ee){$e.error("Failed to remove document from case"),console.error("Remove document error:",Ee)}},kt=async K=>{var Be;if(K==null||K.preventDefault(),!n)return;const Ee=L.trim();if(!Ee||he.length===0&&de.length===0)return;const We={id:`temp-${Date.now()}`,role:"user",text:Ee,createdAt:Date.now(),sources:[],pending:!0};N(ot=>[...ot,We]),R(""),j(!0),(Be=J.current)==null||Be.scrollIntoView({behavior:"smooth"});try{await M({caseId:n,content:Ee})}catch(ot){N(Ze=>Ze.filter(vn=>vn.id!==We.id)),$e.error((ot==null?void 0:ot.message)||"Failed to send message to Case AI")}finally{j(!1)}},Vt=async K=>{var Be;if(!n)return;const Ee=(Be=K.target.files)==null?void 0:Be[0];if(!Ee)return;if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(Ee.type)){$e.error("Only PDF or Word files can be uploaded"),K.target.value="";return}if(Ee.size>15*1024*1024){$e.error("File size must be less than 15MB"),K.target.value="";return}U(!0);try{const ot=await P(),Ze=await fetch(ot,{method:"POST",headers:{"Content-Type":Ee.type},body:Ee});if(!Ze.ok)throw new Error("Upload failed");const{storageId:vn}=await Ze.json(),jt=await W({storageId:vn,name:Ee.name,type:Ee.type,size:Ee.size,caseId:n});if(jt.status==="ok")$e.success("File converted into a case document. Review it under Case Documents.");else throw new Error(jt.message||"Could not convert file.")}catch(ot){console.error("Case file upload error",ot),$e.error((ot==null?void 0:ot.message)||"Failed to upload file")}finally{ie.current&&(ie.current.value=""),U(!1)}},qn=async(K,Ee)=>{if(confirm(`Delete the file "${Ee}" from this case? This cannot be undone.`))try{await se({fileId:K}),$e.success("File deleted")}catch(We){console.error("Delete case file error",We),$e.error("Failed to delete file")}},_t=ve.filter(K=>K&&!K.caseId&&!he.some(Ee=>Ee._id===K._id)),Sn=((be==null?void 0:be.documentCount)??he.length)>=30,Mt=he.length>0||de.length>0,rn=K=>{if(K===0)return"0 B";const Ee=1024,We=["B","KB","MB","GB"],Be=Math.floor(Math.log(K)/Math.log(Ee));return parseFloat((K/Math.pow(Ee,Be)).toFixed(2))+" "+We[Be]},En=K=>{if(!K)return"";const Ee=K.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return Ee.length>140?`${Ee.slice(0,140)}`:Ee};return v.jsx("div",{className:"flex h-full flex-col bg-gray-50",children:v.jsx("div",{className:"flex-1 overflow-y-auto",children:v.jsxs("div",{className:"mx-auto flex min-h-full w-full max-w-6xl flex-col gap-6 px-6 py-8",children:[v.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:v.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:"Organize Your Matters"}),v.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Group related documents, collaborate with your team, and unlock AI insights per case."})]}),v.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[v.jsx(jo,{className:"h-4 w-4"}),"New Case"]})]})}),v.jsxs("div",{className:"flex flex-1 min-h-0 flex-col gap-6 lg:flex-row",children:[v.jsxs("div",{className:"flex w-full flex-col rounded-3xl border border-neutral-200/70 bg-white shadow-sm lg:max-w-xs",children:[v.jsx("div",{className:"border-b border-neutral-200/70 px-5 py-5",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Cases"}),v.jsxs("p",{className:"mt-1 text-sm text-neutral-500",children:[ge.length," active"]})]}),v.jsx("button",{onClick:()=>r(!0),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",title:"Create case",children:v.jsx(jo,{className:"h-4 w-4"})})]})}),t&&v.jsx("div",{className:"border-b border-neutral-200/70 bg-gray-50 px-5 py-5",children:v.jsxs("form",{onSubmit:Z,className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Case Name"}),v.jsx("input",{type:"text",value:s,onChange:K=>o(K.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"e.g. Johnson vs. State",autoFocus:!0,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),v.jsx("textarea",{value:l,onChange:K=>u(K.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2,placeholder:"Optional context or notes"})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-100 transition hover:bg-neutral-700",children:[v.jsx(Fg,{className:"h-3 w-3"}),"Save"]}),v.jsxs("button",{type:"button",onClick:()=>r(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:[v.jsx(Xa,{className:"h-3 w-3"}),"Cancel"]})]})]})}),v.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-5",children:ge.length===0?v.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-gray-50 px-4 py-12 text-center",children:[v.jsx(qc,{className:"h-10 w-10 text-neutral-400"}),v.jsx("h3",{className:"mt-4 text-sm font-semibold text-neutral-900",children:"No cases yet"}),v.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Create your first case to start organizing documents and discussions."})]}):v.jsx("div",{className:"space-y-3",children:ge.map(K=>v.jsx("div",{className:`group rounded-2xl border px-4 py-4 transition ${n===K._id?"border-neutral-900 bg-neutral-900/90 text-neutral-100 shadow-sm":"border-neutral-200 bg-white hover:border-neutral-300 hover:shadow-md"}`,onClick:()=>e(K._id),children:v.jsx("div",{className:"flex items-start justify-between gap-3",children:v.jsx("div",{className:"min-w-0 flex-1",children:d===K._id?v.jsxs("div",{className:"space-y-2",onClick:Ee=>Ee.stopPropagation(),children:[v.jsx("input",{type:"text",value:p,onChange:Ee=>m(Ee.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"}),v.jsx("textarea",{value:b,onChange:Ee=>x(Ee.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>Se(K._id),className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-neutral-900 text-neutral-100 transition hover:bg-neutral-700",children:v.jsx(Fg,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>h(null),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:v.jsx(Xa,{className:"h-4 w-4"})})]})]}):v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:`truncate text-sm font-semibold ${n===K._id?"text-neutral-100":"text-neutral-900"}`,children:K.name}),K.description&&v.jsx("p",{className:`line-clamp-2 text-xs ${n===K._id?"text-neutral-200/90":"text-neutral-500"}`,children:K.description}),v.jsxs("div",{className:`flex items-center justify-between text-[11px] uppercase tracking-[0.25em] ${n===K._id?"text-neutral-200":"text-neutral-400"}`,children:[v.jsxs("span",{children:[K.documentCount,"/30 docs "," ",rn(K.totalSize),"/50MB"]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),h(K._id),m(K.name),x(K.description||"")},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===K._id?"border-neutral-700 text-neutral-200 hover:border-neutral-500":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,title:"Edit case",children:v.jsx(sD,{className:"h-3.5 w-3.5"})}),v.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),ke(K._id,K.name)},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===K._id?"border-neutral-700 text-rose-200 hover:border-rose-400":"border-neutral-200 text-rose-500 hover:border-rose-300 hover:text-rose-600"}`,title:"Delete case",children:v.jsx(Ho,{className:"h-3.5 w-3.5"})})]})]})]})})})},K._id))})})]}),v.jsx("div",{className:"flex-1 overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:be?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[v.jsx("div",{className:"border-b border-neutral-200/70 bg-gray-50 px-6 py-5",children:v.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold text-neutral-900",children:be.name}),be.description&&v.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:be.description}),v.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[v.jsxs("span",{children:[be.documentCount,"/30 Documents"]}),v.jsx("span",{children:""}),v.jsxs("span",{children:[rn(be.totalSize),"/50MB Used"]}),be.documentCount>=30&&v.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-600",children:[v.jsx(q0,{className:"h-4 w-4"}),"Limit Reached"]})]})]}),v.jsxs("button",{onClick:()=>S(!w),className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition ${w?"border-indigo-400 bg-indigo-50 text-indigo-600":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:[v.jsx(vi,{className:"h-4 w-4"}),"Case AI Chat"]})]})}),v.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[v.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[v.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200/60 px-5 py-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case Documents"}),v.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Documents linked to this case and analyzed by AI."})]}),v.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[he.length,"/30"]})]}),v.jsx("div",{className:"max-h-[360px] space-y-3 overflow-y-auto px-5 py-4",children:he.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-gray-50 px-4 py-8 text-center",children:[v.jsx(gh,{className:"h-10 w-10 text-neutral-400"}),v.jsx("p",{className:"mt-3 text-sm font-semibold text-neutral-900",children:"No documents linked"}),v.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Use the Document Library to attach existing docs."})]}):he.map(K=>v.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3 shadow-sm",children:[v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:K.title}),K.content&&v.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:En(K.content)}),K.lastModifiedAt&&v.jsxs("p",{className:"mt-1 text-[11px] uppercase tracking-[0.2em] text-neutral-400",children:["Updated"," ",new Date(K.lastModifiedAt).toLocaleDateString()]})]}),v.jsx("button",{onClick:()=>nt(String(K._id)),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-rose-200 text-rose-500 transition hover:border-rose-400 hover:text-rose-600",title:"Remove from case",children:v.jsx(Ho,{className:"h-4 w-4"})})]},K._id))})]}),v.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[v.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200/60 px-5 py-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Document Library"}),v.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Select personal or shared documents to add them to this case."})]}),Sn&&v.jsx("span",{className:"rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-700",children:"Limit Reached"})]}),v.jsx("div",{className:"max-h-[360px] space-y-3 overflow-y-auto px-5 py-4",children:_t.length===0?v.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-gray-50 px-4 py-8 text-center text-sm text-neutral-500",children:"No available documents. Create a document first or remove it from another case."}):_t.map(K=>v.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3 shadow-sm",children:[v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsx("p",{className:"text-sm font-semibold text-neutral-900 truncate",children:K.title}),v.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:["Updated ",new Date(K.lastModifiedAt).toLocaleDateString()]})]}),v.jsxs("button",{onClick:()=>fe(String(K._id)),disabled:Sn,className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:[v.jsx(jo,{className:"h-3.5 w-3.5"}),"Add"]})]},K._id))})]})]}),v.jsxs("section",{className:"rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[v.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-neutral-200/60 px-5 py-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case Attachments"}),v.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Upload supporting PDF or Word files for this case (max 15MB)."})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{ref:ie,type:"file",accept:".pdf,.doc,.docx",className:"hidden",onChange:Vt}),v.jsxs("button",{type:"button",onClick:()=>{var K;return(K=ie.current)==null?void 0:K.click()},disabled:H,className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900 disabled:cursor-not-allowed disabled:opacity-60",children:[v.jsx(y5,{className:"h-4 w-4"}),H?"Uploading...":"Upload file"]})]})]}),v.jsx("div",{className:"space-y-3 px-5 py-4 max-h-80 overflow-y-auto",children:de.length===0?v.jsx("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-gray-50 px-4 py-6 text-center text-sm text-neutral-500",children:"No attachments yet. Upload PDF or Word files that should stay with this case."}):de.map(K=>v.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl border border-neutral-200/80 bg-white px-4 py-3",children:[v.jsxs("div",{className:"flex flex-1 items-center gap-3",children:[v.jsx(nD,{className:"h-5 w-5 text-neutral-400"}),v.jsxs("div",{className:"min-w-0",children:[v.jsx("p",{className:"truncate text-sm font-semibold text-neutral-900",children:K.name}),v.jsxs("p",{className:"mt-1 text-xs text-neutral-500",children:[rn(K.size),"  Uploaded"," ",new Date(K.uploadedAt).toLocaleDateString()]})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[K.url&&v.jsx("a",{href:K.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",title:"Download",children:v.jsx(m5,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>qn(String(K._id),K.name),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-rose-200 text-rose-500 transition hover:border-rose-400 hover:text-rose-600",title:"Delete file",children:v.jsx(Ho,{className:"h-4 w-4"})})]})]},K._id))})]})]})})]}),w&&v.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/50 px-4 py-6",children:v.jsxs("div",{className:"flex h-[90vh] w-full max-w-4xl flex-col rounded-3xl bg-white shadow-2xl",children:[v.jsxs("div",{className:"flex items-center justify-between border-b border-neutral-200 px-6 py-4",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(vi,{className:"h-5 w-5 text-indigo-500"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Case AI Chat"}),v.jsx("h3",{className:"text-base font-semibold text-neutral-900",children:be.name})]})]}),v.jsx("button",{onClick:()=>S(!1),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",title:"Close assistant",children:v.jsx(Xa,{className:"h-4 w-4"})})]}),v.jsx(FH,{messages:C,isSendingMessage:k,userMessage:L,setUserMessage:R,handleSendMessage:kt,canSendMessages:Mt,messagesEndRef:J})]})})]}):v.jsxs("div",{className:"flex h-full flex-col items-center justify-center px-6 py-12 text-center",children:[v.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-sm",children:v.jsx(qc,{className:"h-10 w-10 text-neutral-400"})}),v.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No Case Selected"}),v.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Select a case from the sidebar or create a new one to start organizing your legal materials."}),v.jsxs("button",{onClick:()=>r(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[v.jsx(jo,{className:"h-4 w-4"}),"Create a case"]})]})})]})]})})})}function FH({messages:n,isSendingMessage:e,userMessage:t,setUserMessage:r,handleSendMessage:s,canSendMessages:o,messagesEndRef:l}){return v.jsxs("div",{className:"flex h-full min-h-0 w-full flex-col overflow-hidden bg-white",children:[v.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-6 py-6",children:[n.length===0&&!e?v.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-2xl border border-dashed border-neutral-200 bg-white/80 px-3 py-2 text-xs text-neutral-500",children:[v.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-indigo-500"}),"Waiting for AI response..."]}):v.jsx("div",{className:"space-y-4",children:n.map(u=>{const d=u.role==="assistant",h=d?"text-neutral-400":"text-white/70";return v.jsx("div",{className:`flex ${d?"justify-start":"justify-end"}`,children:v.jsxs("div",{className:`w-full rounded-3xl border px-4 py-3 text-sm shadow-sm ${d?"border-neutral-200 bg-white text-neutral-800":"border-neutral-900 bg-neutral-900 text-white"}`,children:[v.jsx("p",{className:`text-[11px] font-semibold uppercase tracking-[0.3em] ${h}`,children:d?"Legal AI Assistant":"You"}),v.jsx("p",{className:"mt-2 whitespace-pre-wrap",children:u.text}),u.pending&&v.jsx("p",{className:`mt-2 text-[11px] uppercase tracking-[0.3em] ${h}`,children:"Processing..."}),u.createdAt&&v.jsx("p",{className:`mt-2 text-[11px] uppercase tracking-[0.3em] ${h}`,children:new Date(u.createdAt).toLocaleTimeString()})]})},u.id)})}),v.jsx("div",{ref:l})]}),v.jsx("div",{className:"border-t border-neutral-200/80 bg-gray-50 px-6 py-4",children:o?v.jsxs("form",{onSubmit:s,className:"flex flex-col gap-3 md:flex-row md:items-end md:gap-4",children:[v.jsx("div",{className:"flex-1",children:v.jsx("textarea",{value:t,onChange:u=>r(u.target.value),placeholder:"Ask a question about this case...",rows:3,className:"w-full resize-none rounded-2xl border border-neutral-200 bg-white px-5 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",disabled:e})}),v.jsx("button",{type:"submit",disabled:e||!t.trim(),className:"inline-flex h-11 w-full items-center justify-center rounded-full bg-neutral-900 px-4 py-2 text-sm font-medium text-white transition hover:bg-neutral-800 disabled:cursor-not-allowed disabled:bg-neutral-300 md:w-32",children:e?"Thinking...":"Send"})]}):v.jsx("div",{className:"rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:v.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[v.jsx(q0,{className:"h-4 w-4"}),"Add at least one document or attachment to use the AI chat."]})})})]})}function GH(){const n=un(Pe.aiChats.listChats)??[],[e,t]=T.useState(null),[r,s]=T.useState(""),[o,l]=T.useState(""),[u,d]=T.useState(!1),h=T.useRef(null),p=Bt(Pe.aiChats.createChat),m=bf(Pe.aiChats.sendMessage),b=Bt(Pe.aiChats.renameChat),x=Bt(Pe.aiChats.deleteChat),w=un(Pe.aiChats.getMessages,e?{chatId:e}:"skip")??[],S=T.useMemo(()=>n.find(j=>j&&j._id===e),[n,e]),C=T.useMemo(()=>o.trim()?n.filter(j=>j&&j.title.toLowerCase().includes(o.trim().toLowerCase())):n,[n,o]);T.useEffect(()=>{var j,H;if(!(n!=null&&n.length)){t(null);return}e?n.some(J=>(J==null?void 0:J._id)===e)||t(((j=n[0])==null?void 0:j._id)??null):t(((H=n[0])==null?void 0:H._id)??null)},[n,e]),T.useEffect(()=>{var j;(j=h.current)==null||j.scrollIntoView({behavior:"smooth"})},[w,u]),T.useEffect(()=>{s("")},[e]);const N=async()=>{try{const j=await p({});t(j)}catch(j){console.error("Failed to create chat",j),$e.error("Unable to start a new chat right now.")}},L=async()=>{if(!(!e||!r.trim()||u))try{d(!0),await m({chatId:e,content:r.trim()}),s("")}catch(j){console.error("Failed to send chat message",j),$e.error("AI assistant is unavailable. Please try again.")}finally{d(!1)}},R=async(j,H)=>{const U=window.prompt("Rename chat",H||"Untitled chat");if(!(!U||!U.trim()))try{await b({chatId:j,title:U.trim()}),$e.success("Chat renamed")}catch(J){console.error("Failed to rename chat",J),$e.error("Could not rename chat")}},k=async j=>{if(window.confirm("Delete this chat? This action cannot be undone."))try{await x({chatId:j}),e===j&&t(null),$e.success("Chat deleted")}catch(U){console.error("Failed to delete chat",U),$e.error("Could not delete chat")}};return v.jsxs("div",{className:"flex h-full bg-gray-50 text-neutral-900",children:[v.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-white/80",children:[v.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("div",{children:v.jsx("p",{className:"text-sm font-semibold text-neutral-800",children:"WS Chat"})}),v.jsxs("button",{onClick:N,className:"inline-flex items-center gap-1 rounded-lg border border-neutral-200 px-3 py-1.5 text-xs font-medium text-neutral-600 transition hover:bg-neutral-50",children:[v.jsx(vi,{className:"h-3.5 w-3.5"}),"New Chat"]})]}),v.jsx("div",{className:"mt-4",children:v.jsx("input",{type:"text",placeholder:"Search chats...",value:o,onChange:j=>l(j.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400"})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3",children:C.length===0?v.jsxs("div",{className:"rounded-xl border border-dashed border-neutral-200 bg-neutral-50 px-4 py-8 text-center",children:[v.jsx(C5,{className:"mx-auto mb-3 h-6 w-6 text-neutral-400"}),v.jsx("p",{className:"text-sm font-medium text-neutral-700",children:o?"No chats match that search":"No chats yet"}),v.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"Start a conversation to see it here."})]}):v.jsx("div",{className:"space-y-2",children:C.map(j=>{if(!j)return null;const H=j._id===e;return v.jsxs("div",{className:`relative rounded-xl border px-3 py-2 text-left transition ${H?"border-neutral-900 bg-neutral-900 text-white shadow-sm":"border-neutral-200 bg-white/70 text-neutral-700 hover:border-neutral-300"}`,role:"button",tabIndex:0,onClick:()=>t(j._id),onKeyDown:U=>{(U.key==="Enter"||U.key===" ")&&(U.preventDefault(),t(j._id))},children:[v.jsx("button",{className:`absolute right-2 top-2 rounded-full p-1 text-neutral-400 transition ${H?"hover:text-white":"hover:text-neutral-700"}`,onClick:U=>{U.stopPropagation(),R(j._id,j.title)},title:"Rename chat",children:v.jsx(V0,{className:"h-4 w-4"})}),v.jsx("button",{className:"absolute right-2 top-7 rounded-full p-1 text-[10px] text-neutral-400 hover:text-red-300",onClick:U=>{U.stopPropagation(),k(j._id)},title:"Delete chat",children:v.jsx(Ho,{className:"h-4 w-4"})}),v.jsx("p",{className:"truncate text-sm font-semibold",children:j.title||"Untitled chat"}),v.jsx("p",{className:`mt-1 text-xs ${H?"text-neutral-300":"text-neutral-500"}`,children:j.lastMessagePreview||"No messages yet"})]},j._id)})})})]}),v.jsx("div",{className:"flex flex-1 flex-col",children:S?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"flex items-center justify-between border-b border-neutral-200 bg-white/70 px-8 py-5",children:v.jsx("div",{children:v.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:S.title||"Untitled chat"})})}),v.jsx("div",{className:"flex-1 overflow-y-auto px-8 py-6",children:w.length===0?v.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center text-neutral-500",children:[v.jsx(vi,{className:"h-10 w-10 text-neutral-300"}),v.jsx("p",{className:"mt-4 text-lg font-medium text-neutral-800",children:"This chat is empty."}),v.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Ask a question to kick off the conversation or start a new chat."})]}):v.jsxs("div",{className:"space-y-4",children:[w.map(j=>v.jsx("div",{className:`flex ${j.role==="user"?"justify-end":"justify-start"}`,children:v.jsxs("div",{className:`max-w-2xl rounded-2xl px-5 py-3 text-sm leading-relaxed shadow-sm ${j.role==="user"?"bg-neutral-900 text-white":"bg-white text-neutral-800"}`,children:[v.jsx("p",{className:"whitespace-pre-wrap",children:j.content}),v.jsx("p",{className:`mt-2 text-[11px] ${j.role==="user"?"text-neutral-300":"text-neutral-500"}`,children:new Date(j.createdAt).toLocaleTimeString()})]})},j._id)),u&&v.jsx("div",{className:"flex justify-start",children:v.jsx("div",{className:"rounded-2xl bg-white px-4 py-2 text-xs text-neutral-500 shadow-sm",children:"AI is drafting a response..."})}),v.jsx("div",{ref:h})]})}),v.jsx("div",{className:"border-t border-neutral-200 bg-white/90 px-8 py-5",children:v.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white p-4 shadow-sm",children:[v.jsxs("form",{onSubmit:j=>{j.preventDefault(),L()},className:"flex items-end gap-3",children:[v.jsx("textarea",{value:r,onChange:j=>s(j.target.value),placeholder:"Ask a question about strategy, drafting, compliance, or research...",className:"h-24 flex-1 resize-none rounded-xl border border-neutral-200 bg-neutral-50 px-4 py-3 text-sm text-neutral-800 outline-none transition focus:border-neutral-400",disabled:u,onKeyDown:j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),L())}}),v.jsx("button",{type:"submit",disabled:!r.trim()||u,className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-neutral-900 text-white transition hover:bg-neutral-800 disabled:opacity-40",children:v.jsx(P0,{className:"h-5 w-5"})})]}),v.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Press Enter to send. Shift + Enter adds a new line."})]})})]}):v.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center text-center text-neutral-500",children:[v.jsx(vi,{className:"h-12 w-12 text-neutral-300"}),v.jsx("p",{className:"mt-4 text-lg font-semibold text-neutral-800",children:"Create your first chat"}),v.jsx("p",{className:"mt-2 max-w-sm text-sm",children:"Launch a WS Chat thread from the sidebar to brainstorm briefs, summarize documents, or get legal research inspiration."}),v.jsx("button",{onClick:N,className:"mt-6 rounded-full border border-neutral-300 bg-white px-4 py-2 text-sm font-medium text-neutral-700 transition hover:border-neutral-400",children:"Start chatting"})]})})]})}function KH(){const{shareableLink:n}=VO(),[e,t]=T.useState(!1),r=un(Pe.documents.getDocumentByShareableLink,n?{shareableLink:n}:"skip"),s=T.useMemo(()=>hN(r==null?void 0:r.content),[r==null?void 0:r.content]);T.useEffect(()=>{n&&r===null&&t(!0)},[r,n]);const o=()=>{if(!r)return;const l=window.open("","_blank");l&&(l.document.write(`
        <html>
          <head>
            <title>${r.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content p { margin: 0 0 1em; }
            </style>
          </head>
          <body>
            <h1>${r.title}</h1>
            <div class="content">${s||"<p>This document is empty.</p>"}</div>
          </body>
        </html>
      `),l.document.close(),l.print())};return e?v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(vf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Document Not Found"}),v.jsx("p",{className:"text-gray-600",children:"The shared document you're looking for doesn't exist or is no longer available."})]})}):r?v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kodex"}),v.jsx("span",{className:"ml-2 text-sm text-gray-500 font-medium",children:"v1.0"})]}),v.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[v.jsx(vf,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})}),v.jsx("div",{className:"max-w-4xl mx-auto py-8 px-6",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),v.jsxs("div",{className:"text-sm text-gray-500",children:["Last modified: ",new Date(r.lastModifiedAt).toLocaleString(),v.jsx("span",{className:"mx-2",children:""}),"Version ",r.version]})]}),v.jsx("div",{className:"prose max-w-none",children:v.jsx("div",{className:"text-gray-900 leading-relaxed",style:{fontFamily:"Georgia, serif"},dangerouslySetInnerHTML:{__html:s||"<p>This document is empty.</p>"}})})]})})]}):v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function WH({isOpen:n,onClose:e}){const[t,r]=T.useState(!1),s=un(Pe.notifications.getUserNotifications,{limit:50,unreadOnly:t})||[],o=un(Pe.notifications.getUnreadCount)||0,l=Bt(Pe.notifications.markNotificationAsRead),u=Bt(Pe.notifications.markAllNotificationsAsRead),d=async m=>{try{await l({notificationId:m})}catch(b){console.error("Failed to mark notification as read:",b)}},h=async()=>{try{await u()}catch(m){console.error("Failed to mark all notifications as read:",m)}},p=m=>{switch(m){case"mention":return v.jsx(Vg,{className:"w-5 h-5 text-blue-600"});case"assignment":return v.jsx(X1,{className:"w-5 h-5 text-green-600"});case"comment":return v.jsx(Vg,{className:"w-5 h-5 text-purple-600"});case"suggestion":return v.jsx(gh,{className:"w-5 h-5 text-orange-600"});case"deadline":return v.jsx(q0,{className:"w-5 h-5 text-red-600"});case"invitation":return v.jsx(X1,{className:"w-5 h-5 text-indigo-600"});default:return v.jsx(af,{className:"w-5 h-5 text-gray-600"})}};return n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-end z-50 pt-16 pr-4",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-h-[80vh] flex flex-col",children:[v.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(af,{className:"w-5 h-5 text-gray-600 mr-2"}),v.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),o>0&&v.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:o})]}),v.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:v.jsx(Xa,{className:"w-4 h-4 text-gray-500"})})]}),v.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("label",{className:"flex items-center text-sm",children:[v.jsx("input",{type:"checkbox",checked:t,onChange:m=>r(m.target.checked),className:"mr-2"}),"Show unread only"]}),o>0&&v.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})]})}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length===0?v.jsxs("div",{className:"text-center py-12 text-gray-500",children:[v.jsx(af,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),v.jsx("p",{className:"text-sm",children:t?"No unread notifications":"No notifications yet"})]}):v.jsx("div",{className:"divide-y divide-gray-200",children:s.map(m=>v.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${m.isRead?"":"bg-blue-50"}`,onClick:()=>{m.isRead||d(m._id),m.actionUrl&&(window.location.href=m.actionUrl)},children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0 mr-3",children:p(m.type)}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:m.title}),!m.isRead&&v.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full ml-2"})]}),v.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.message}),v.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(m.createdAt).toLocaleString()})]})]})},m._id))})})]})}):null}function QH(){const[n,e]=T.useState(!1),[t,r]=T.useState("editor"),[s,o]=T.useState(null),[l,u]=T.useState(null),[d,h]=T.useState(!1),p=un(Pe.auth.loggedInUser),m=un(Pe.notifications.getUnreadCount)||0,b={editor:"Documents",hub:"Hub",goals:"Goals",chat:"WS Chat"},x=()=>{switch(t){case"editor":return v.jsx(qH,{documentId:s,onDocumentChange:o,currentUserName:(p==null?void 0:p.name)||(p==null?void 0:p.email)||void 0});case"hub":return v.jsx(VH,{selectedCaseId:l,onCaseSelect:u});case"goals":return v.jsx(PH,{documentId:s});case"chat":return v.jsx(GH,{});default:return null}};return v.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 text-neutral-900",children:[v.jsx(iO,{children:v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6",children:v.jsxs("div",{className:"max-w-md w-full",children:[v.jsxs("div",{className:"text-center mb-10",children:[v.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-neutral-400",children:v.jsx("span",{children:"Welcome"})}),v.jsx("h1",{className:"mt-6 text-4xl font-semibold text-neutral-900",children:"Sign in to continue"}),v.jsx("p",{className:"mt-3 text-sm text-neutral-500",children:"Unlock collaborative drafting, AI research, and case automation in one calm workspace."})]}),v.jsx("div",{className:"rounded-3xl border border-neutral-200 bg-white p-6 shadow-sm",children:v.jsx(f5,{})})]})})}),v.jsx(rO,{children:v.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[v.jsx(wD,{collapsed:n,onToggleCollapse:()=>e(!n),activeView:t,onViewChange:r,selectedCaseId:l,onCaseSelect:u}),v.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[v.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-neutral-200 bg-white px-6",children:[v.jsx("div",{className:"flex flex-col",children:v.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-neutral-500",children:[v.jsx("span",{className:"font-medium text-neutral-700",children:"Home"}),v.jsx("span",{className:"text-neutral-300",children:"/"}),v.jsx("span",{children:b[t]}),t==="editor"&&s&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"text-neutral-300",children:"/"}),v.jsx("span",{className:"truncate max-w-[240px] text-neutral-500",title:"Active document",children:"Document"})]})]})}),v.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-500",children:[v.jsxs("button",{onClick:()=>h(!0),className:"relative rounded-full border border-neutral-200 p-2 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800","aria-label":"Notifications",children:[v.jsx(af,{className:"h-5 w-5"}),m>0&&v.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-semibold text-white",children:m>9?"9+":m})]}),v.jsx(h5,{})]})]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:x()})]})]})}),v.jsx(WH,{isOpen:d,onClose:()=>h(!1)})]})}function YH(){return v.jsxs(kR,{children:[v.jsx(d5,{position:"top-right"}),v.jsxs(sR,{children:[v.jsx($g,{path:"/shared/:shareableLink",element:v.jsx(KH,{})}),v.jsx($g,{path:"/*",element:v.jsx(QH,{})})]})]})}const pN=document.getElementById("root");if(!pN)throw new Error("Root element with id 'root' not found in the document.");const mE=Tk.createRoot(pN),gE="https://fleet-goat-249.convex.cloud";if(gE.length===0)console.error("VITE_CONVEX_URL is not defined. Make sure `convex dev` is running or provide the deployment URL in your environment."),mE.render(v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-neutral-900",children:v.jsxs("div",{className:"max-w-lg space-y-4 rounded-2xl border border-neutral-200 bg-white p-10 shadow-sm",children:[v.jsx("h1",{className:"text-xl font-semibold",children:"Configuration required"}),v.jsxs("p",{className:"text-sm text-neutral-600",children:["The application cannot connect to Convex because the ",v.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"VITE_CONVEX_URL"}),"environment variable is missing. Start the backend with ",v.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"convex dev"})," or set the URL in a",v.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:".env.local"})," file."]}),v.jsx("p",{className:"text-sm text-neutral-600",children:"Once configured, restart the development server to continue."})]})}));else{const n=new FM(gE);mE.render(v.jsx(T.StrictMode,{children:v.jsx(fO,{client:n,children:v.jsx(YH,{})})}))}
